!function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function t(e){if(Array.isArray(e))return e}function n(t){if(Array.isArray(t))return e(t)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new o(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function o(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return o=function(e){this.s=e,this.n=e.next},o.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new o(e)}function a(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function s(e){a(o,i,r,s,l,"next",e)}function l(e){a(o,i,r,s,l,"throw",e)}s(void 0)}))}}function l(e,t,n){return t=v(t),function(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;return i(e)}(e,I()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t,n){return c=I()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&w(r,n.prototype),r},c.apply(null,arguments)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t,n){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n||e):r.value}},g(e,t,n||e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function m(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){f(e,t,n[t])}))}return e}function b(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function k(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function C(e,n){return t(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,n)||D(e,n)||y()}function S(e){return t(e)||m(e)||D(e)||y()}function x(e){return n(e)||m(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function D(t,n){if(t){if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}function N(e){var t="function"==typeof Map?new Map:void 0;return N=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return c(e,arguments,v(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),w(n,e)},N(e)}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I=function(){return!!e})()}function E(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return l([e,t])}}function l(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function M(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}System.register(["./index-legacy-BrvkS0-7.js","./Button-legacy-BNpMDAvm.js"],(function(e,t){"use strict";var n,o,a,d,m,y,w,D,I,T,R,A,P,O,F,W,B,H,V,z,U,j,K,q,G,Z,Y,Q,X,$,J,ee,te,ne,ie,re,oe,ae,se,le,ue,ce,de,he,fe,ge,ve,pe,me,ye,_e,be,ke,we,Ce,Se,xe,Le,De,Ne,Ie,Ee,Me,Te,Re,Ae,Pe,Oe,Fe,We,Be,He,Ve,ze,Ue,je,Ke,qe,Ge,Ze,Ye,Qe,Xe,$e,Je,et,tt,nt,it;return f({setters:[function(e){n=e.j,o=e.x,a=e.y,d=e.q,m=e.z,y=e.H,w=e.s,D=e.k,I=e.M,T=e.F,R=e.V,A=e.d,P=e.t,O=e.p,F=e.n,W=e.W,B=e.I,H=e.B,V=e.K,z=e.N,U=e.T,j=e.O,K=e.A,q=e.X,G=e.o,Z=e.c,Y=e.Y,Q=e.Z,X=e.$,$=e.f,J=e.a0,ee=e.l,te=e.e,ne=e.w,ie=e.v,re=e.h,oe=e.a1},function(e){ae=e.c,se=e.a6,le=e.a,ue=e.o,ce=e.P,de=e.a7,he=e.a8,fe=e.v,ge=e.j,ve=e.l,pe=e.a9,me=e.r,ye=e.aa,_e=e.G,be=e.J,ke=e.F,we=e.H,Ce=e.ab,Se=e.a3,xe=e.W,Le=e.E,De=e.Z,Ne=e.I,Ie=e.N,Ee=e.L,Me=e.ac,Te=e.$,Re=e.ad,Ae=e.O,Pe=e.ae,Oe=e.R,Fe=e.V,We=e.af,Be=e.ag,He=e.ah,Ve=e.T,ze=e.u,Ue=e.ai,je=e.aj,Ke=e.Y,qe=e.a0,Ge=e.a2,Ze=e.ak,Ye=e.i,Qe=e.al,Xe=e.am,$e=e.an,Je=e.w,et=e.ao,tt=e.ap,nt=e.aq,it=e.ar}]},"execute",(function(){var rt,ot,at,st,lt,ut,ct,dt,ht,ft,gt,vt,pt,mt,yt,_t,bt,kt,wt,Ct,St,xt,Lt,Dt,Nt,It,Et,Mt,Tt,Rt,At,Pt,Ot,Ft,Wt,Bt,Ht,Vt,zt,Ut,jt,Kt,qt,Gt,Zt,Yt,Qt,Xt,$t,Jt,en,tn,nn,rn,on,an,sn,ln,un,cn,dn,hn,fn,gn,vn,pn,mn,yn,_n,bn,kn,wn,Cn,Sn,xn,Ln,Dn,Nn,In,En,Mn,Tn,Rn,An,Pn,On,Fn,Wn,Bn,Hn,Vn,zn,Un,jn,Kn,qn,Gn,Zn,Yn=document.createElement("style");function Qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return Math.random().toString(16).slice(2,2+e)}function Xn(e){var t=n(!!e.value);if(t.value)return o(t);var i=a(e,(function(e){e&&(t.value=!0,i())}));return o(t)}Yn.textContent='.monaco-editor{--monaco-monospace-font:"SF Mono",Monaco,Menlo,Consolas,"Ubuntu Mono","Liberation Mono","DejaVu Sans Mono","Courier New",monospace;font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,HelveticaNeue-Light,system-ui,Ubuntu,Droid Sans,sans-serif}.monaco-menu .monaco-action-bar.vertical .action-item .action-menu-item:focus .action-label,.monaco-editor.vs-dark .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label,.monaco-editor.hc-black .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label,.monaco-editor.hc-light .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label{stroke-width:1.2px}.monaco-hover p{margin:0}.monaco-aria-container{clip:rect(1px,1px,1px,1px);clip-path:inset(50%);width:1px;height:1px;margin:-1px;padding:0;top:0;overflow:hidden;position:absolute!important}.monaco-editor,.monaco-diff-editor .synthetic-focus,.monaco-editor,.monaco-diff-editor [tabindex="0"]:focus,.monaco-editor,.monaco-diff-editor [tabindex="-1"]:focus,.monaco-editor,.monaco-diff-editor button:focus,.monaco-editor,.monaco-diff-editor input[type=button]:focus,.monaco-editor,.monaco-diff-editor input[type=checkbox]:focus,.monaco-editor,.monaco-diff-editor input[type=search]:focus,.monaco-editor,.monaco-diff-editor input[type=text]:focus,.monaco-editor,.monaco-diff-editor select:focus,.monaco-editor,.monaco-diff-editor textarea:focus{outline-offset:-1px;outline-width:1px;outline-style:solid;outline-color:var(--vscode-focusBorder);opacity:1}.monaco-workbench .workbench-hover{z-index:40;background:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border);max-width:700px;color:var(--vscode-editorHoverWidget-foreground);box-shadow:0 2px 8px var(--vscode-widget-shadow);border-radius:3px;font-size:13px;line-height:19px;position:relative;overflow:hidden}.monaco-workbench .workbench-hover hr{border-bottom:none}.monaco-workbench .workbench-hover:not(.skip-fade-in){animation:.1s linear fadein}.monaco-workbench .workbench-hover.compact{font-size:12px}.monaco-workbench .workbench-hover.compact .hover-contents{padding:2px 8px}.monaco-workbench .workbench-hover-container.locked .workbench-hover{outline:1px solid var(--vscode-editorHoverWidget-border)}.monaco-workbench .workbench-hover-container.locked .workbench-hover:focus,.monaco-workbench .workbench-hover-lock:focus{outline:1px solid var(--vscode-focusBorder)}.monaco-workbench .workbench-hover-container.locked .workbench-hover-lock:hover{background:var(--vscode-toolbar-hoverBackground)}.monaco-workbench .workbench-hover-pointer{z-index:41;pointer-events:none;position:absolute}.monaco-workbench .workbench-hover-pointer:after{content:"";background-color:var(--vscode-editorHoverWidget-background);border-right:1px solid var(--vscode-editorHoverWidget-border);border-bottom:1px solid var(--vscode-editorHoverWidget-border);width:5px;height:5px;position:absolute}.monaco-workbench .locked .workbench-hover-pointer:after{border-bottom-width:2px;border-right-width:2px;width:4px;height:4px}.monaco-workbench .workbench-hover-pointer.left{left:-3px}.monaco-workbench .workbench-hover-pointer.right{right:3px}.monaco-workbench .workbench-hover-pointer.top{top:-3px}.monaco-workbench .workbench-hover-pointer.bottom{bottom:3px}.monaco-workbench .workbench-hover-pointer.left:after{transform:rotate(135deg)}.monaco-workbench .workbench-hover-pointer.right:after{transform:rotate(315deg)}.monaco-workbench .workbench-hover-pointer.top:after{transform:rotate(225deg)}.monaco-workbench .workbench-hover-pointer.bottom:after{transform:rotate(45deg)}.monaco-workbench .workbench-hover a{color:var(--vscode-textLink-foreground)}.monaco-workbench .workbench-hover a:focus{outline-offset:-1px;outline:1px solid;outline-color:var(--vscode-focusBorder);text-decoration:underline}.monaco-workbench .workbench-hover a:hover,.monaco-workbench .workbench-hover a:active{color:var(--vscode-textLink-activeForeground)}.monaco-workbench .workbench-hover code{background:var(--vscode-textCodeBlock-background)}.monaco-workbench .workbench-hover .hover-row .actions{background:var(--vscode-editorHoverWidget-statusBarBackground)}.monaco-workbench .workbench-hover.right-aligned{left:1px}.monaco-workbench .workbench-hover.right-aligned .hover-row.status-bar .actions{flex-direction:row-reverse}.monaco-workbench .workbench-hover.right-aligned .hover-row.status-bar .actions .action-container{margin-left:16px;margin-right:0}.monaco-scrollable-element>.scrollbar>.scra{cursor:pointer;font-size:11px!important}.monaco-scrollable-element>.visible{opacity:1;z-index:11;background:0 0;transition:opacity .1s linear}.monaco-scrollable-element>.invisible{opacity:0;pointer-events:none}.monaco-scrollable-element>.invisible.fade{transition:opacity .8s linear}.monaco-scrollable-element>.shadow{display:none;position:absolute}.monaco-scrollable-element>.shadow.top{width:100%;height:3px;box-shadow:var(--vscode-scrollbar-shadow)0 6px 6px -6px inset;display:block;top:0;left:3px}.monaco-scrollable-element>.shadow.left{width:3px;height:100%;box-shadow:var(--vscode-scrollbar-shadow)6px 0 6px -6px inset;display:block;top:3px;left:0}.monaco-scrollable-element>.shadow.top-left-corner{width:3px;height:3px;display:block;top:0;left:0}.monaco-scrollable-element>.shadow.top.left{box-shadow:var(--vscode-scrollbar-shadow)6px 0 6px -6px inset}.monaco-scrollable-element>.scrollbar>.slider{background:var(--vscode-scrollbarSlider-background)}.monaco-scrollable-element>.scrollbar>.slider:hover{background:var(--vscode-scrollbarSlider-hoverBackground)}.monaco-scrollable-element>.scrollbar>.slider.active{background:var(--vscode-scrollbarSlider-activeBackground)}.monaco-hover{cursor:default;user-select:text;box-sizing:border-box;white-space:var(--vscode-hover-whiteSpace,normal);line-height:1.5em;animation:.1s linear fadein;position:absolute;overflow:hidden}.monaco-hover.hidden{display:none}.monaco-hover a:hover:not(.disabled){cursor:pointer}.monaco-hover .hover-contents:not(.html-hover-contents){padding:4px 8px}.monaco-hover .markdown-hover>.hover-contents:not(.code-hover-contents){max-width:var(--vscode-hover-maxWidth,500px);word-wrap:break-word}.monaco-hover .markdown-hover>.hover-contents:not(.code-hover-contents) hr{min-width:100%}.monaco-hover p,.monaco-hover .code,.monaco-hover ul,.monaco-hover h1,.monaco-hover h2,.monaco-hover h3,.monaco-hover h4,.monaco-hover h5,.monaco-hover h6{margin:8px 0}.monaco-hover h1,.monaco-hover h2,.monaco-hover h3,.monaco-hover h4,.monaco-hover h5,.monaco-hover h6{line-height:1.1}.monaco-hover code{font-family:var(--monaco-monospace-font)}.monaco-hover hr{box-sizing:border-box;border-left:0;border-right:0;height:1px;margin:4px -8px -4px}.monaco-hover p:first-child,.monaco-hover .code:first-child,.monaco-hover ul:first-child{margin-top:0}.monaco-hover p:last-child,.monaco-hover .code:last-child,.monaco-hover ul:last-child{margin-bottom:0}.monaco-hover ul,.monaco-hover ol{padding-left:20px}.monaco-hover li>p{margin-bottom:0}.monaco-hover li>ul{margin-top:0}.monaco-hover code{border-radius:3px;padding:0 .4em}.monaco-hover .monaco-tokenized-source{white-space:var(--vscode-hover-sourceWhiteSpace,pre-wrap)}.monaco-hover .hover-row.status-bar{font-size:12px;line-height:22px}.monaco-hover .hover-row.status-bar .info{padding:0 8px;font-style:italic}.monaco-hover .hover-row.status-bar .actions{width:100%;padding:0 8px;display:flex}.monaco-hover .hover-row.status-bar .actions .action-container{cursor:pointer;margin-right:16px}.monaco-hover .hover-row.status-bar .actions .action-container .action .icon{padding-right:4px}.monaco-hover .hover-row.status-bar .actions .action-container a{color:var(--vscode-textLink-foreground);text-decoration:var(--text-link-decoration)}.monaco-hover .markdown-hover .hover-contents .codicon{color:inherit;font-size:inherit;vertical-align:middle}.monaco-hover .hover-contents a.code-link:hover,.monaco-hover .hover-contents a.code-link{color:inherit}.monaco-hover .hover-contents a.code-link:before{content:"("}.monaco-hover .hover-contents a.code-link:after{content:")"}.monaco-hover .hover-contents a.code-link>span{text-underline-position:under;color:var(--vscode-textLink-foreground);border-bottom:1px solid transparent;text-decoration:underline}.monaco-hover .hover-contents a.code-link>span:hover{color:var(--vscode-textLink-activeForeground)}.monaco-hover .markdown-hover .hover-contents:not(.code-hover-contents):not(.html-hover-contents) span{margin-bottom:4px;display:inline-block}.monaco-hover .markdown-hover .hover-contents:not(.code-hover-contents):not(.html-hover-contents) span.codicon{margin-bottom:2px}.monaco-hover-content .action-container a{user-select:none}.monaco-hover-content .action-container.disabled{pointer-events:none;opacity:.4;cursor:default}.monaco-editor .rendered-markdown kbd{background-color:var(--vscode-keybindingLabel-background);color:var(--vscode-keybindingLabel-foreground);border-style:solid;border-width:1px;border-color:var(--vscode-keybindingLabel-border);border-bottom-color:var(--vscode-keybindingLabel-bottomBorder);box-shadow:inset 0 -1px 0 var(--vscode-widget-shadow);vertical-align:middle;border-radius:3px;padding:1px 3px}.rendered-markdown li:has(input[type=checkbox]){list-style-type:none}.monaco-aria-container{position:absolute;left:-999em}.context-view{position:absolute}.context-view.fixed{all:initial;color:inherit;font-family:inherit;font-size:13px;position:fixed}.monaco-list{white-space:nowrap;width:100%;height:100%;position:relative}.monaco-list.mouse-support{user-select:none}.monaco-list>.monaco-scrollable-element{height:100%}.monaco-list-rows{width:100%;height:100%;position:relative}.monaco-list.horizontal-scrolling .monaco-list-rows{width:auto;min-width:100%}.monaco-list-row{box-sizing:border-box;width:100%;position:absolute;overflow:hidden}.monaco-list.mouse-support .monaco-list-row{cursor:pointer;touch-action:none}.monaco-list .monaco-scrollable-element>.scrollbar.vertical,.monaco-pane-view>.monaco-split-view2.vertical>.monaco-scrollable-element>.scrollbar.vertical{z-index:14}.monaco-list-row.scrolling{display:none!important}.monaco-list.element-focused,.monaco-list.selection-single,.monaco-list.selection-multiple{outline:0!important}.monaco-drag-image{z-index:1000;border-radius:10px;padding:1px 7px;font-size:12px;display:inline-block;position:absolute}.monaco-list-type-filter-message{box-sizing:border-box;text-align:center;white-space:normal;opacity:.7;pointer-events:none;width:100%;height:100%;padding:40px 1em 1em;position:absolute;top:0;left:0}.monaco-list-type-filter-message:empty{display:none}.monaco-select-box-dropdown-padding{--dropdown-padding-top:1px;--dropdown-padding-bottom:1px}.hc-black .monaco-select-box-dropdown-padding,.hc-light .monaco-select-box-dropdown-padding{--dropdown-padding-top:3px;--dropdown-padding-bottom:4px}.monaco-select-box-dropdown-container{box-sizing:border-box;display:none}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown *{margin:0}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown a:focus{outline:1px solid -webkit-focus-ring-color;outline-offset:-1px}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown code{line-height:15px;font-family:var(--monaco-monospace-font)}.monaco-select-box-dropdown-container.visible{text-align:left;border-bottom-right-radius:3px;border-bottom-left-radius:3px;flex-direction:column;width:1px;display:flex;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container{padding-top:var(--dropdown-padding-top);padding-bottom:var(--dropdown-padding-bottom);box-sizing:border-box;flex:none;align-self:flex-start;width:100%;padding-left:1px;padding-right:1px;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-details-pane{padding:5px}.hc-black .monaco-select-box-dropdown-container>.select-box-dropdown-list-container{padding-top:var(--dropdown-padding-top);padding-bottom:var(--dropdown-padding-bottom)}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row{cursor:pointer}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.option-text{text-overflow:ellipsis;white-space:nowrap;float:left;padding-left:3.5px;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.option-detail{text-overflow:ellipsis;white-space:nowrap;float:left;opacity:.7;padding-left:3.5px;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.option-decorator-right{text-overflow:ellipsis;white-space:nowrap;float:right;padding-right:10px;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.visually-hidden{width:1px;height:1px;position:absolute;top:auto;left:-10000px;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-dropdown-container-width-control{opacity:0;flex:auto;align-self:flex-start}.monaco-select-box-dropdown-container>.select-box-dropdown-container-width-control>.width-control-div{max-height:0;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-dropdown-container-width-control>.width-control-div>.option-text-width-control{white-space:nowrap;padding-left:4px;padding-right:8px}.monaco-select-box{cursor:pointer;border-radius:2px;width:100%}.monaco-select-box-dropdown-container{text-transform:none;font-size:13px;font-weight:400}.monaco-action-bar .action-item.select-container{cursor:default}.monaco-action-bar .action-item .monaco-select-box{cursor:pointer;min-width:100px;min-height:18px;padding:2px 23px 2px 8px}.mac .monaco-action-bar .action-item .monaco-select-box{border-radius:5px;font-size:11px}.monaco-action-bar{white-space:nowrap;height:100%}.monaco-action-bar .actions-container{align-items:center;width:100%;height:100%;margin:0 auto;padding:0;display:flex}.monaco-action-bar.vertical .actions-container{display:inline-block}.monaco-action-bar .action-item{cursor:pointer;justify-content:center;align-items:center;display:block;position:relative}.monaco-action-bar .action-item.disabled{cursor:default}.monaco-action-bar .action-item .icon,.monaco-action-bar .action-item .codicon{display:block}.monaco-action-bar .action-item .codicon{align-items:center;width:16px;height:16px;display:flex}.monaco-action-bar .action-label{border-radius:5px;padding:3px;font-size:11px;display:flex}.monaco-action-bar .action-item.disabled .action-label,.monaco-action-bar .action-item.disabled .action-label:before,.monaco-action-bar .action-item.disabled .action-label:hover{color:var(--vscode-disabledForeground)}.monaco-action-bar.vertical{text-align:left}.monaco-action-bar.vertical .action-item{display:block}.monaco-action-bar.vertical .action-label.separator{border-bottom:1px solid #bbb;margin-left:.8em;margin-right:.8em;padding-top:1px;display:block}.monaco-action-bar .action-item .action-label.separator{cursor:default;background-color:#bbb;width:1px;min-width:1px;height:16px;padding:0;margin:5px 4px!important}.secondary-actions .monaco-action-bar .action-label{margin-left:6px}.monaco-action-bar .action-item.select-container{flex:1;justify-content:center;align-items:center;min-width:60px;max-width:170px;margin-right:10px;display:flex;overflow:hidden}.monaco-action-bar .action-item.action-dropdown-item{display:flex}.monaco-action-bar .action-item.action-dropdown-item>.action-dropdown-item-separator{cursor:default;align-items:center;display:flex}.monaco-action-bar .action-item.action-dropdown-item>.action-dropdown-item-separator>div{width:1px}.monaco-dropdown{height:100%;padding:0}.monaco-dropdown>.dropdown-label{cursor:pointer;justify-content:center;align-items:center;height:100%;display:flex}.monaco-dropdown>.dropdown-label>.action-label.disabled{cursor:default}.monaco-dropdown-with-primary{border-radius:5px;flex-direction:row;display:flex!important}.monaco-dropdown-with-primary>.action-container>.action-label{margin-right:0}.monaco-dropdown-with-primary>.dropdown-action-container>.monaco-dropdown>.dropdown-label .codicon[class*=codicon-]{margin-left:-3px;padding-left:0;padding-right:0;font-size:12px;line-height:16px}.monaco-dropdown-with-primary>.dropdown-action-container>.monaco-dropdown>.dropdown-label>.action-label{background-position:50%;background-repeat:no-repeat;background-size:16px;display:block}.monaco-action-bar .action-item.menu-entry .action-label.icon{background-position:50%;background-repeat:no-repeat;background-size:16px;width:16px;height:16px}.monaco-action-bar .action-item.menu-entry.text-only .action-label{color:var(--vscode-descriptionForeground);border-radius:2px;overflow:hidden}.monaco-action-bar .action-item.menu-entry.text-only.use-comma:not(:last-of-type) .action-label:after{content:", "}.monaco-action-bar .action-item.menu-entry.text-only+.action-item:not(.text-only)>.monaco-dropdown .action-label{color:var(--vscode-descriptionForeground)}.monaco-dropdown-with-default{border-radius:5px;flex-direction:row;display:flex!important}.monaco-dropdown-with-default>.action-container>.action-label{margin-right:0}.monaco-dropdown-with-default>.action-container.menu-entry>.action-label.icon{background-position:50%;background-repeat:no-repeat;background-size:16px;width:16px;height:16px}.monaco-dropdown-with-default:hover{background-color:var(--vscode-toolbar-hoverBackground)}.monaco-dropdown-with-default>.dropdown-action-container>.monaco-dropdown>.dropdown-label .codicon[class*=codicon-]{margin-left:-3px;padding-left:0;padding-right:0;font-size:12px;line-height:16px}.monaco-dropdown-with-default>.dropdown-action-container>.monaco-dropdown>.dropdown-label>.action-label{background-position:50%;background-repeat:no-repeat;background-size:16px;display:block}.quick-input-widget{font-size:13px}.quick-input-widget .monaco-highlighted-label .highlight,.quick-input-widget .monaco-highlighted-label .highlight{color:#0066bf}.vs .quick-input-widget .monaco-list-row.focused .monaco-highlighted-label .highlight,.vs .quick-input-widget .monaco-list-row.focused .monaco-highlighted-label .highlight{color:#9dddff}.vs-dark .quick-input-widget .monaco-highlighted-label .highlight,.vs-dark .quick-input-widget .monaco-highlighted-label .highlight{color:#0097fb}.hc-black .quick-input-widget .monaco-highlighted-label .highlight,.hc-black .quick-input-widget .monaco-highlighted-label .highlight{color:#f38518}.hc-light .quick-input-widget .monaco-highlighted-label .highlight,.hc-light .quick-input-widget .monaco-highlighted-label .highlight{color:#0f4a85}.monaco-keybinding>.monaco-keybinding-key{color:#555;background-color:rgba(221,221,221,.4);border:1px solid rgba(204,204,204,.4);border-bottom-color:rgba(187,187,187,.4);box-shadow:inset 0 -1px rgba(187,187,187,.4)}.hc-black .monaco-keybinding>.monaco-keybinding-key{box-shadow:none;color:#fff;background-color:transparent;border:1px solid #6fc3df}.hc-light .monaco-keybinding>.monaco-keybinding-key{box-shadow:none;color:#292929;background-color:transparent;border:1px solid #0f4a85}.vs-dark .monaco-keybinding>.monaco-keybinding-key{color:#ccc;background-color:rgba(128,128,128,.17);border:1px solid rgba(51,51,51,.6);border-bottom-color:rgba(68,68,68,.6);box-shadow:inset 0 -1px rgba(68,68,68,.6)}.monaco-custom-toggle{float:left;cursor:pointer;box-sizing:border-box;user-select:none;border:1px solid transparent;border-radius:3px;width:20px;height:20px;margin-left:2px;padding:1px;overflow:hidden}.monaco-custom-toggle:hover{background-color:var(--vscode-inputOption-hoverBackground)}.hc-black .monaco-custom-toggle:hover,.hc-light .monaco-custom-toggle:hover{border:1px dashed var(--vscode-focusBorder)}.hc-black .monaco-custom-toggle,.hc-light .monaco-custom-toggle,.hc-black .monaco-custom-toggle:hover,.hc-light .monaco-custom-toggle:hover{background:0 0}.monaco-custom-toggle.monaco-checkbox{opacity:1;border:1px solid transparent;border-radius:3px;width:18px;height:18px;margin-left:0;margin-right:9px;padding:0;background-size:16px!important}.monaco-action-bar .checkbox-action-item{border-radius:2px;align-items:center;padding-right:2px;display:flex}.monaco-action-bar .checkbox-action-item:hover{background-color:var(--vscode-toolbar-hoverBackground)}.monaco-action-bar .checkbox-action-item>.monaco-custom-toggle.monaco-checkbox{margin-right:4px}.monaco-action-bar .checkbox-action-item>.checkbox-label{font-size:12px}.monaco-custom-toggle.monaco-checkbox:not(.checked):before{visibility:hidden}.quick-input-widget{z-index:2550;-webkit-app-region:no-drag;border-radius:6px;width:600px;margin-left:-300px;position:absolute;left:50%}.quick-input-titlebar{border-top-left-radius:5px;border-top-right-radius:5px;align-items:center;display:flex}.quick-input-left-action-bar{flex:1;margin-left:4px;display:flex}.quick-input-inline-action-bar{margin:2px 0 0 5px}.quick-input-title{text-align:center;text-overflow:ellipsis;padding:3px 0;overflow:hidden}.quick-input-right-action-bar{flex:1;margin-right:4px;display:flex}.quick-input-right-action-bar>.actions-container{justify-content:flex-end}.quick-input-titlebar .monaco-action-bar .action-label.codicon{background-position:50%;background-repeat:no-repeat;padding:2px}.quick-input-description{margin:6px 6px 6px 11px}.quick-input-header .quick-input-description{flex:1;margin:4px 2px}.quick-input-header{padding:8px 6px 2px;display:flex}.quick-input-widget.hidden-input .quick-input-header{margin-bottom:0;padding:0}.quick-input-and-message{flex-direction:column;flex-grow:1;min-width:0;display:flex;position:relative}.quick-input-check-all{align-self:center;margin:0}.quick-input-filter{flex-grow:1;display:flex;position:relative}.quick-input-box{flex-grow:1}.quick-input-widget.show-checkboxes .quick-input-box,.quick-input-widget.show-checkboxes .quick-input-message{margin-left:5px}.quick-input-visible-count{position:absolute;left:-10000px}.quick-input-count{align-self:center;align-items:center;display:flex;position:absolute;right:4px}.quick-input-count .monaco-count-badge{vertical-align:middle;border-radius:2px;min-height:auto;padding:2px 4px;line-height:normal}.quick-input-action{margin-left:6px}.quick-input-action .monaco-text-button{align-items:center;height:25px;padding:0 6px;font-size:11px;display:flex}.quick-input-message{overflow-wrap:break-word;margin-top:-1px;padding:5px}.quick-input-message>.codicon{vertical-align:text-bottom;margin:0 .2em}.quick-input-message a{color:inherit}.quick-input-progress.monaco-progress-container{position:relative}.quick-input-list{line-height:22px}.quick-input-widget.hidden-input .quick-input-list{margin-top:4px;padding-bottom:4px}.quick-input-list .monaco-list{max-height:440px;padding-bottom:5px;overflow:hidden}.quick-input-list .monaco-scrollable-element{padding:0 5px}.quick-input-list .quick-input-list-entry{box-sizing:border-box;padding:0 6px;display:flex;overflow:hidden}.quick-input-list .quick-input-list-entry.quick-input-list-separator-border{border-top-style:solid;border-top-width:1px}.quick-input-list .monaco-list-row{border-radius:3px}.quick-input-list .monaco-list-row[data-index="0"] .quick-input-list-entry.quick-input-list-separator-border{border-top-style:none}.quick-input-list .quick-input-list-label{flex:1;height:100%;display:flex;overflow:hidden}.quick-input-list .quick-input-list-checkbox{align-self:center;margin:0}.quick-input-list .quick-input-list-icon{background-position:0;background-repeat:no-repeat;background-size:16px;justify-content:center;align-items:center;width:16px;height:22px;padding-right:6px;display:flex}.quick-input-list .quick-input-list-rows{text-overflow:ellipsis;flex-direction:column;flex:1;height:100%;margin-left:5px;display:flex;overflow:hidden}.quick-input-widget.show-checkboxes .quick-input-list .quick-input-list-rows{margin-left:10px}.quick-input-widget .quick-input-list .quick-input-list-checkbox{display:none}.quick-input-widget.show-checkboxes .quick-input-list .quick-input-list-checkbox{display:inline}.quick-input-list .quick-input-list-rows>.quick-input-list-row{align-items:center;display:flex}.quick-input-list .quick-input-list-rows>.quick-input-list-row .monaco-icon-label,.quick-input-list .quick-input-list-rows>.quick-input-list-row .monaco-icon-label .monaco-icon-label-container>.monaco-icon-name-container{flex:1}.quick-input-list .quick-input-list-rows>.quick-input-list-row .codicon[class*=codicon-]{vertical-align:text-bottom}.quick-input-list .quick-input-list-rows .monaco-highlighted-label>span{opacity:1}.quick-input-list .quick-input-list-entry .quick-input-list-entry-keybinding{margin-right:8px}.quick-input-list .quick-input-list-label-meta{opacity:.7;text-overflow:ellipsis;line-height:normal;overflow:hidden}.quick-input-list .monaco-list .monaco-list-row .monaco-highlighted-label .highlight{background-color:unset;font-weight:700;color:var(--vscode-list-highlightForeground)!important}.quick-input-list .monaco-list .monaco-list-row.focused .monaco-highlighted-label .highlight{color:var(--vscode-list-focusHighlightForeground)!important}.quick-input-list .quick-input-list-entry .quick-input-list-separator{margin-right:4px}.quick-input-list .quick-input-list-entry-action-bar{flex:0;display:flex;overflow:visible}.quick-input-list .quick-input-list-entry-action-bar .action-label{display:none}.quick-input-list .quick-input-list-entry-action-bar .action-label.codicon{margin-right:4px;padding:2px}.quick-input-list .quick-input-list-entry-action-bar{margin-top:1px;margin-right:4px}.quick-input-list .quick-input-list-entry .quick-input-list-entry-action-bar .action-label.always-visible,.quick-input-list .quick-input-list-entry:hover .quick-input-list-entry-action-bar .action-label,.quick-input-list .quick-input-list-entry.focus-inside .quick-input-list-entry-action-bar .action-label,.quick-input-list .monaco-list-row.focused .quick-input-list-entry-action-bar .action-label,.quick-input-list .monaco-list-row.passive-focused .quick-input-list-entry-action-bar .action-label{display:flex}.quick-input-list .monaco-list-row.focused .monaco-keybinding-key,.quick-input-list .monaco-list-row.focused .quick-input-list-entry .quick-input-list-separator{color:inherit}.quick-input-list .monaco-list-row.focused .monaco-keybinding-key{background:0 0}.quick-input-list .quick-input-list-separator-as-item{padding:4px 6px;font-size:12px}.quick-input-list .quick-input-list-separator-as-item .label-name{font-weight:600}.quick-input-list .quick-input-list-separator-as-item .label-description{opacity:1!important}.quick-input-list .monaco-tree-sticky-row .quick-input-list-entry.quick-input-list-separator-as-item.quick-input-list-separator-border{border-top-style:none}.quick-input-list .monaco-tree-sticky-row{padding:0 5px}.quick-input-list .monaco-tl-twistie{display:none!important}.monaco-text-button{box-sizing:border-box;text-align:center;cursor:pointer;border:1px solid var(--vscode-button-border,transparent);border-radius:2px;justify-content:center;align-items:center;width:100%;padding:4px;line-height:18px;display:flex}.monaco-text-button:focus{outline-offset:2px!important}.monaco-text-button:hover{text-decoration:none!important}.monaco-button.disabled:focus,.monaco-button.disabled{cursor:default;opacity:.4!important}.monaco-text-button .codicon{margin:0 .2em;color:inherit!important}.monaco-text-button.monaco-text-button-with-short-label{flex-flow:wrap;height:28px;padding:0 4px;overflow:hidden}.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label{flex-basis:100%}.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label-short{flex-grow:1;width:0;overflow:hidden}.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label,.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label-short{font-weight:400;font-style:inherit;justify-content:center;align-items:center;padding:4px 0;display:flex}.monaco-button-dropdown{cursor:pointer;display:flex}.monaco-button-dropdown.disabled{cursor:default}.monaco-button-dropdown>.monaco-button:focus{outline-offset:-1px!important}.monaco-button-dropdown.disabled>.monaco-button.disabled,.monaco-button-dropdown.disabled>.monaco-button.disabled:focus,.monaco-button-dropdown.disabled>.monaco-button-dropdown-separator{opacity:.4!important}.monaco-button-dropdown>.monaco-button.monaco-text-button{border-right-width:0!important}.monaco-button-dropdown .monaco-button-dropdown-separator{cursor:default;padding:4px 0}.monaco-button-dropdown .monaco-button-dropdown-separator>div{width:1px;height:100%}.monaco-button-dropdown>.monaco-button.monaco-dropdown-button{border:1px solid var(--vscode-button-border,transparent);border-radius:0 2px 2px 0;align-items:center;display:flex;border-left-width:0!important}.monaco-button-dropdown>.monaco-button.monaco-text-button{border-radius:2px 0 0 2px}.monaco-description-button{flex-direction:column;align-items:center;margin:4px 5px;display:flex}.monaco-description-button .monaco-button-description{padding:4px 20px;font-size:11px;font-style:italic}.monaco-description-button .monaco-button-label,.monaco-description-button .monaco-button-description{justify-content:center;align-items:center;display:flex}.monaco-description-button .monaco-button-label>.codicon,.monaco-description-button .monaco-button-description>.codicon{margin:0 .2em;color:inherit!important}.monaco-button.default-colors,.monaco-button-dropdown.default-colors>.monaco-button{color:var(--vscode-button-foreground);background-color:var(--vscode-button-background)}.monaco-button.default-colors:hover,.monaco-button-dropdown.default-colors>.monaco-button:hover{background-color:var(--vscode-button-hoverBackground)}.monaco-button.default-colors.secondary,.monaco-button-dropdown.default-colors>.monaco-button.secondary{color:var(--vscode-button-secondaryForeground);background-color:var(--vscode-button-secondaryBackground)}.monaco-button.default-colors.secondary:hover,.monaco-button-dropdown.default-colors>.monaco-button.secondary:hover{background-color:var(--vscode-button-secondaryHoverBackground)}.monaco-button-dropdown.default-colors .monaco-button-dropdown-separator{background-color:var(--vscode-button-background);border-top:1px solid var(--vscode-button-border);border-bottom:1px solid var(--vscode-button-border)}.monaco-button-dropdown.default-colors .monaco-button.secondary+.monaco-button-dropdown-separator{background-color:var(--vscode-button-secondaryBackground)}.monaco-button-dropdown.default-colors .monaco-button-dropdown-separator>div{background-color:var(--vscode-button-separator)}.monaco-count-badge{text-align:center;box-sizing:border-box;border-radius:11px;min-width:18px;min-height:18px;padding:3px 6px;font-size:11px;font-weight:400;line-height:11px;display:inline-block}.monaco-count-badge.long{border-radius:2px;min-height:auto;padding:2px 3px;line-height:normal}.monaco-progress-container{width:100%;height:2px;overflow:hidden}.monaco-progress-container .progress-bit{width:2%;height:2px;display:none;position:absolute;left:0}.monaco-progress-container.active .progress-bit{display:inherit}.monaco-progress-container.discrete .progress-bit{transition:width .1s linear;left:0}.monaco-progress-container.discrete.done .progress-bit{width:100%}.monaco-progress-container.infinite .progress-bit{animation-name:progress;animation-duration:4s;animation-timing-function:linear;animation-iteration-count:infinite;transform:translate(0)}.monaco-progress-container.infinite.infinite-long-running .progress-bit{animation-timing-function:steps(100,end)}@keyframes progress{0%{transform:translate(0%)scaleX(1)}50%{transform:translate(2500%)scaleX(3)}to{transform:translate(4900%)scaleX(1)}}.monaco-inputbox{box-sizing:border-box;font-size:inherit;border-radius:2px;padding:0;display:block;position:relative}.monaco-inputbox>.ibwrapper>.input,.monaco-inputbox>.ibwrapper>.mirror{padding:4px 6px}.monaco-inputbox>.ibwrapper{width:100%;height:100%;position:relative}.monaco-inputbox>.ibwrapper>.input{box-sizing:border-box;width:100%;height:100%;line-height:inherit;font-family:inherit;font-size:inherit;resize:none;color:inherit;border:none;display:inline-block}.monaco-inputbox>.ibwrapper>input{text-overflow:ellipsis}.monaco-inputbox>.ibwrapper>textarea.input{scrollbar-width:none;outline:none;display:block}.monaco-inputbox>.ibwrapper>textarea.input::-webkit-scrollbar{display:none}.monaco-inputbox>.ibwrapper>textarea.input.empty{white-space:nowrap}.monaco-inputbox>.ibwrapper>.mirror{box-sizing:border-box;white-space:pre-wrap;visibility:hidden;word-wrap:break-word;width:100%;display:inline-block;position:absolute;top:0;left:0}.monaco-inputbox-container{text-align:right}.monaco-inputbox-container .monaco-inputbox-message{text-align:left;box-sizing:border-box;word-wrap:break-word;width:100%;margin-top:-1px;padding:.4em;font-size:12px;line-height:17px;display:inline-block;overflow:hidden}.monaco-inputbox .monaco-action-bar{position:absolute;top:4px;right:2px}.monaco-inputbox .monaco-action-bar .action-item{margin-left:2px}.monaco-inputbox .monaco-action-bar .action-item .codicon{background-repeat:no-repeat;width:16px;height:16px}.monaco-findInput{position:relative}.monaco-findInput .monaco-inputbox{width:100%;font-size:13px}.monaco-findInput>.controls{position:absolute;top:3px;right:2px}.vs .monaco-findInput.disabled{background-color:#e1e1e1}.vs-dark .monaco-findInput.disabled{background-color:#333}.monaco-findInput.highlight-0 .controls,.hc-light .monaco-findInput.highlight-0 .controls{animation:.1s linear monaco-findInput-highlight-0}.monaco-findInput.highlight-1 .controls,.hc-light .monaco-findInput.highlight-1 .controls{animation:.1s linear monaco-findInput-highlight-1}.hc-black .monaco-findInput.highlight-0 .controls,.vs-dark .monaco-findInput.highlight-0 .controls{animation:.1s linear monaco-findInput-highlight-dark-0}.hc-black .monaco-findInput.highlight-1 .controls,.vs-dark .monaco-findInput.highlight-1 .controls{animation:.1s linear monaco-findInput-highlight-dark-1}@keyframes monaco-findInput-highlight-0{0%{background:rgba(253,255,0,.8)}to{background:0 0}}@keyframes monaco-findInput-highlight-1{0%{background:rgba(253,255,0,.8)}99%{background:0 0}}@keyframes monaco-findInput-highlight-dark-0{0%{background:rgba(255,255,255,.44)}to{background:0 0}}@keyframes monaco-findInput-highlight-dark-1{0%{background:rgba(255,255,255,.44)}99%{background:0 0}}:root{--vscode-sash-size:4px;--vscode-sash-hover-size:4px}.monaco-sash{z-index:35;touch-action:none;position:absolute}.monaco-sash.disabled{pointer-events:none}.monaco-sash.mac.vertical{cursor:col-resize}.monaco-sash.vertical.minimum{cursor:e-resize}.monaco-sash.vertical.maximum{cursor:w-resize}.monaco-sash.mac.horizontal{cursor:row-resize}.monaco-sash.horizontal.minimum{cursor:s-resize}.monaco-sash.horizontal.maximum{cursor:n-resize}.monaco-sash.disabled{cursor:default!important;pointer-events:none!important}.monaco-sash.vertical{cursor:ew-resize;width:var(--vscode-sash-size);height:100%;top:0}.monaco-sash.horizontal{cursor:ns-resize;width:100%;height:var(--vscode-sash-size);left:0}.monaco-sash:not(.disabled)>.orthogonal-drag-handle{content:" ";height:calc(var(--vscode-sash-size)*2);width:calc(var(--vscode-sash-size)*2);z-index:100;cursor:all-scroll;display:block;position:absolute}.monaco-sash.horizontal.orthogonal-edge-north:not(.disabled)>.orthogonal-drag-handle.start,.monaco-sash.horizontal.orthogonal-edge-south:not(.disabled)>.orthogonal-drag-handle.end{cursor:nwse-resize}.monaco-sash.horizontal.orthogonal-edge-north:not(.disabled)>.orthogonal-drag-handle.end,.monaco-sash.horizontal.orthogonal-edge-south:not(.disabled)>.orthogonal-drag-handle.start{cursor:nesw-resize}.monaco-sash.vertical>.orthogonal-drag-handle.start{left:calc(var(--vscode-sash-size)*-.5);top:calc(var(--vscode-sash-size)*-1)}.monaco-sash.vertical>.orthogonal-drag-handle.end{left:calc(var(--vscode-sash-size)*-.5);bottom:calc(var(--vscode-sash-size)*-1)}.monaco-sash.horizontal>.orthogonal-drag-handle.start{top:calc(var(--vscode-sash-size)*-.5);left:calc(var(--vscode-sash-size)*-1)}.monaco-sash.horizontal>.orthogonal-drag-handle.end{top:calc(var(--vscode-sash-size)*-.5);right:calc(var(--vscode-sash-size)*-1)}.monaco-sash:before{content:"";pointer-events:none;background:0 0;width:100%;height:100%;position:absolute}.monaco-workbench:not(.reduce-motion) .monaco-sash:before{transition:background-color .1s ease-out}.monaco-sash.hover:before,.monaco-sash.active:before{background:var(--vscode-sash-hoverBorder)}.monaco-sash.vertical:before{width:var(--vscode-sash-hover-size);left:calc(50% - (var(--vscode-sash-hover-size)/2))}.monaco-sash.horizontal:before{height:var(--vscode-sash-hover-size);top:calc(50% - (var(--vscode-sash-hover-size)/2))}.pointer-events-disabled{pointer-events:none!important}.monaco-sash.debug{background:#0ff}.monaco-sash.debug.disabled{background:rgba(0,255,255,.2)}.monaco-sash.debug:not(.disabled)>.orthogonal-drag-handle{background:red}.monaco-split-view2{width:100%;height:100%;position:relative}.monaco-split-view2>.sash-container{pointer-events:none;width:100%;height:100%;position:absolute}.monaco-split-view2>.sash-container>.monaco-sash{pointer-events:initial}.monaco-split-view2>.monaco-scrollable-element{width:100%;height:100%}.monaco-split-view2>.monaco-scrollable-element>.split-view-container{white-space:nowrap;width:100%;height:100%;position:relative}.monaco-split-view2>.monaco-scrollable-element>.split-view-container>.split-view-view{white-space:initial;position:absolute}.monaco-split-view2>.monaco-scrollable-element>.split-view-container>.split-view-view:not(.visible){display:none}.monaco-split-view2.vertical>.monaco-scrollable-element>.split-view-container>.split-view-view{width:100%}.monaco-split-view2.horizontal>.monaco-scrollable-element>.split-view-container>.split-view-view{height:100%}.monaco-split-view2.separator-border>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{content:" ";z-index:5;pointer-events:none;background-color:var(--separator-border);position:absolute;top:0;left:0}.monaco-split-view2.separator-border.horizontal>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{width:1px;height:100%}.monaco-split-view2.separator-border.vertical>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{width:100%;height:1px}.monaco-table{white-space:nowrap;flex-direction:column;width:100%;height:100%;display:flex;position:relative;overflow:hidden}.monaco-table>.monaco-split-view2{border-bottom:1px solid transparent}.monaco-table>.monaco-list{flex:1}.monaco-table-tr{height:100%;display:flex}.monaco-table-th{text-overflow:ellipsis;width:100%;height:100%;font-weight:700;overflow:hidden}.monaco-table-th,.monaco-table-td{box-sizing:border-box;white-space:nowrap;text-overflow:ellipsis;flex-shrink:0;overflow:hidden}.monaco-table>.monaco-split-view2 .monaco-sash.vertical:before{content:"";left:calc(var(--vscode-sash-size)/2);border-left:1px solid transparent;width:0;position:absolute}.monaco-workbench:not(.reduce-motion) .monaco-table>.monaco-split-view2,.monaco-workbench:not(.reduce-motion) .monaco-table>.monaco-split-view2 .monaco-sash.vertical:before{transition:border-color .2s ease-out}.monaco-tl-row{align-items:center;height:100%;display:flex;position:relative}.monaco-tl-row.disabled{cursor:default}.monaco-tl-indent{pointer-events:none;height:100%;position:absolute;top:0;left:16px}.hide-arrows .monaco-tl-indent{left:12px}.monaco-tl-indent>.indent-guide{box-sizing:border-box;border-left:1px solid transparent;height:100%;display:inline-block}.monaco-workbench:not(.reduce-motion) .monaco-tl-indent>.indent-guide{transition:border-color .1s linear}.monaco-tl-twistie,.monaco-tl-contents{height:100%}.monaco-tl-twistie{text-align:right;flex-shrink:0;justify-content:center;align-items:center;width:16px;padding-right:6px;font-size:10px;transform:translate(3px);display:flex!important}.monaco-tl-contents{flex:1;overflow:hidden}.monaco-tl-twistie:before{border-radius:20px}.monaco-tl-twistie.collapsed:before{transform:rotate(-90deg)}.monaco-tl-twistie.codicon-tree-item-loading:before{animation:1.25s steps(30,end) infinite codicon-spin}.monaco-tree-type-filter{z-index:100;border:1px solid var(--vscode-widget-border);border-bottom-right-radius:4px;border-bottom-left-radius:4px;max-width:200px;margin:0 6px;padding:3px;display:flex;position:absolute;top:0}.monaco-workbench:not(.reduce-motion) .monaco-tree-type-filter{transition:top .3s}.monaco-tree-type-filter.disabled{top:-40px!important}.monaco-tree-type-filter-grab{cursor:grab;justify-content:center;align-items:center;margin-right:2px;display:flex!important}.monaco-tree-type-filter-grab.grabbing{cursor:grabbing}.monaco-tree-type-filter-input{flex:1}.monaco-tree-type-filter-input .monaco-inputbox{height:23px}.monaco-tree-type-filter-input .monaco-inputbox>.ibwrapper>.input,.monaco-tree-type-filter-input .monaco-inputbox>.ibwrapper>.mirror{padding:2px 4px}.monaco-tree-type-filter-input .monaco-findInput>.controls{top:2px}.monaco-tree-type-filter-actionbar{margin-left:4px}.monaco-tree-type-filter-actionbar .monaco-action-bar .action-label{padding:2px}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container{z-index:13;background-color:var(--vscode-sideBar-background);width:100%;height:0;position:absolute;top:0;left:0}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row.monaco-list-row{background-color:var(--vscode-sideBar-background);width:100%;position:absolute;overflow:hidden;opacity:1!important}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row:hover{cursor:pointer;background-color:var(--vscode-list-hoverBackground)!important}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container.empty,.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container.empty .monaco-tree-sticky-container-shadow{display:none}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow{width:100%;height:0;position:absolute;bottom:-3px;left:0}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container[tabindex="0"]:focus{outline:none}.monaco-icon-label{text-overflow:ellipsis;display:flex;overflow:hidden}.monaco-icon-label:before{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;vertical-align:top;background-position:0;background-repeat:no-repeat;background-size:16px;flex-shrink:0;width:16px;height:22px;padding-right:6px;display:inline-block;line-height:inherit!important}.monaco-icon-label-iconpath{width:16px;height:16px;margin-top:2px;padding-left:2px;display:flex}.monaco-icon-label-container.disabled{color:var(--vscode-disabledForeground)}.monaco-icon-label>.monaco-icon-label-container{text-overflow:ellipsis;flex:1;min-width:0;overflow:hidden}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-name-container>.label-name{color:inherit;white-space:pre}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-name-container>.label-name>.label-separator{opacity:.5;margin:0 2px}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-suffix-container>.label-suffix{opacity:.7;white-space:pre}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{opacity:.7;white-space:pre;margin-left:.5em;font-size:.9em}.monaco-icon-label.nowrap>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{white-space:nowrap}.vs .monaco-icon-label>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{opacity:.95}.monaco-icon-label.italic>.monaco-icon-label-container>.monaco-icon-name-container>.label-name,.monaco-icon-label.italic>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{font-style:italic}.monaco-icon-label.deprecated{opacity:.66;text-decoration:line-through}.monaco-icon-label.italic:after{font-style:italic}.monaco-icon-label.strikethrough>.monaco-icon-label-container>.monaco-icon-name-container>.label-name,.monaco-icon-label.strikethrough>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{text-decoration:line-through}.monaco-icon-label:after{opacity:.75;text-align:center;margin:auto 16px 0 5px;font-size:90%;font-weight:600}.monaco-list:focus .selected .monaco-icon-label,.monaco-list:focus .selected .monaco-icon-label:after{color:inherit!important}.monaco-list-row.focused.selected .label-description,.monaco-list-row.selected .label-description{opacity:.8}.monaco-keybinding{align-items:center;line-height:10px;display:flex}.monaco-keybinding>.monaco-keybinding-key{vertical-align:middle;border-style:solid;border-width:1px;border-radius:3px;margin:0 2px;padding:3px 5px;font-size:11px;display:inline-block}.monaco-keybinding>.monaco-keybinding-key:first-child{margin-left:0}.monaco-keybinding>.monaco-keybinding-key:last-child{margin-right:0}.monaco-keybinding>.monaco-keybinding-key-separator{display:inline-block}.monaco-keybinding>.monaco-keybinding-key-chord-separator{width:6px}::-ms-clear{display:none}.monaco-editor .editor-widget input{color:inherit}.monaco-editor{-webkit-text-size-adjust:100%;color:var(--vscode-editor-foreground);background-color:var(--vscode-editor-background);overflow-wrap:initial;position:relative;overflow:visible}.monaco-editor-background{background-color:var(--vscode-editor-background)}.monaco-editor .rangeHighlight{background-color:var(--vscode-editor-rangeHighlightBackground);box-sizing:border-box;border:1px solid var(--vscode-editor-rangeHighlightBorder)}.monaco-editor.hc-black .rangeHighlight,.monaco-editor.hc-light .rangeHighlight{border-style:dotted}.monaco-editor .symbolHighlight{background-color:var(--vscode-editor-symbolHighlightBackground);box-sizing:border-box;border:1px solid var(--vscode-editor-symbolHighlightBorder)}.monaco-editor.hc-black .symbolHighlight,.monaco-editor.hc-light .symbolHighlight{border-style:dotted}.monaco-editor .overflow-guard{position:relative;overflow:hidden}.monaco-editor .view-overlays{position:absolute;top:0}.monaco-editor .view-overlays>div,.monaco-editor .margin-view-overlays>div{width:100%;position:absolute}.monaco-editor .squiggly-error{border-bottom:4px double var(--vscode-editorError-border)}.monaco-editor .squiggly-error:before{content:"";background:var(--vscode-editorError-background);width:100%;height:100%;display:block}.monaco-editor .squiggly-warning{border-bottom:4px double var(--vscode-editorWarning-border)}.monaco-editor .squiggly-warning:before{content:"";background:var(--vscode-editorWarning-background);width:100%;height:100%;display:block}.monaco-editor .squiggly-info{border-bottom:4px double var(--vscode-editorInfo-border)}.monaco-editor .squiggly-info:before{content:"";background:var(--vscode-editorInfo-background);width:100%;height:100%;display:block}.monaco-editor .squiggly-hint{border-bottom:2px dotted var(--vscode-editorHint-border)}.monaco-editor.showUnused .squiggly-unnecessary{border-bottom:2px dashed var(--vscode-editorUnnecessaryCode-border)}.monaco-editor.showDeprecated .squiggly-inline-deprecated{text-decoration:line-through;text-decoration-color:var(--vscode-editor-foreground,inherit)}.monaco-editor .inputarea{resize:none;color:transparent;z-index:-10;background-color:transparent;border:none;min-width:0;min-height:0;margin:0;padding:0;position:absolute;overflow:hidden;outline:none!important}.monaco-editor .inputarea.ime-input{z-index:10;caret-color:var(--vscode-editorCursor-foreground);color:var(--vscode-editor-foreground)}.monaco-editor .margin-view-overlays .line-numbers{font-variant-numeric:tabular-nums;text-align:right;vertical-align:middle;box-sizing:border-box;cursor:default;display:inline-block;position:absolute;bottom:0}.monaco-editor .relative-current-line-number{text-align:left;width:100%;display:inline-block}.monaco-editor .margin-view-overlays .line-numbers.lh-odd{margin-top:1px}.monaco-editor .line-numbers{color:var(--vscode-editorLineNumber-foreground)}.monaco-editor .line-numbers.active-line-number{color:var(--vscode-editorLineNumber-activeForeground)}.monaco-editor .margin{background-color:var(--vscode-editorGutter-background)}.monaco-mouse-cursor-text{cursor:text}.monaco-editor .blockDecorations-container{pointer-events:none;position:absolute;top:0}.monaco-editor .blockDecorations-block{box-sizing:border-box;position:absolute}.monaco-editor .view-overlays .current-line,.monaco-editor .margin-view-overlays .current-line{box-sizing:border-box;height:100%;display:block;position:absolute;top:0;left:0}.monaco-editor .margin-view-overlays .current-line.current-line-margin.current-line-margin-both{border-right:0}.monaco-editor .lines-content .cdr{height:100%;position:absolute}.monaco-editor .glyph-margin{position:absolute;top:0}.monaco-editor .glyph-margin-widgets .cgmr{justify-content:center;align-items:center;display:flex;position:absolute}.monaco-editor .glyph-margin-widgets .cgmr.codicon-modifier-spin:before{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.monaco-editor .lines-content .core-guide{box-sizing:border-box;height:100%;position:absolute}.mtkcontrol{color:#fff!important;background:#960000!important}.mtkoverflow{background-color:var(--vscode-button-background,var(--vscode-editor-background));color:var(--vscode-button-foreground,var(--vscode-editor-foreground));border-style:solid;border-width:1px;border-color:var(--vscode-contrastBorder);cursor:pointer;border-radius:2px;padding:4px}.mtkoverflow:hover{background-color:var(--vscode-button-hoverBackground)}.monaco-editor.no-user-select .lines-content,.monaco-editor.no-user-select .view-line,.monaco-editor.no-user-select .view-lines{user-select:none}.monaco-editor.mac .lines-content:hover,.monaco-editor.mac .view-line:hover,.monaco-editor.mac .view-lines:hover{user-select:text}.monaco-editor.enable-user-select{user-select:initial;-webkit-user-select:initial}.monaco-editor .view-lines{white-space:nowrap}.monaco-editor .view-line{width:100%;position:absolute}.monaco-editor .lines-content>.view-lines>.view-line>span{position:absolute;top:0;bottom:0}.monaco-editor .mtkw{color:var(--vscode-editorWhitespace-foreground)!important}.monaco-editor .mtkz{display:inline-block;color:var(--vscode-editorWhitespace-foreground)!important}.monaco-editor .lines-decorations{background:#fff;position:absolute;top:0}.monaco-editor .margin-view-overlays .cldr{height:100%;position:absolute}.monaco-editor .margin-view-overlays .cmdr{width:100%;height:100%;position:absolute;left:0}.monaco-editor .minimap.slider-mouseover .minimap-slider{opacity:0;transition:opacity .1s linear}.monaco-editor .minimap.slider-mouseover:hover .minimap-slider,.monaco-editor .minimap.slider-mouseover .minimap-slider.active{opacity:1}.monaco-editor .minimap-slider .minimap-slider-horizontal{background:var(--vscode-minimapSlider-background)}.monaco-editor .minimap-slider:hover .minimap-slider-horizontal{background:var(--vscode-minimapSlider-hoverBackground)}.monaco-editor .minimap-slider.active .minimap-slider-horizontal{background:var(--vscode-minimapSlider-activeBackground)}.monaco-editor .minimap-shadow-visible{box-shadow:var(--vscode-scrollbar-shadow)-6px 0 6px -6px inset}.monaco-editor .minimap-shadow-hidden{width:0;position:absolute}.monaco-editor .minimap-shadow-visible{width:6px;position:absolute;left:-6px}.monaco-editor.no-minimap-shadow .minimap-shadow-visible{width:1px;position:absolute;left:-1px}.minimap.autohide{opacity:0;transition:opacity .5s}.minimap.autohide:hover{opacity:1}.monaco-editor .minimap{z-index:5}.monaco-editor .overlayWidgets{position:absolute;top:0;left:0}.monaco-editor .view-ruler{box-shadow:1px 0 0 0 var(--vscode-editorRuler-foreground)inset;position:absolute;top:0}.monaco-editor .scroll-decoration{height:6px;box-shadow:var(--vscode-scrollbar-shadow)0 6px 6px -6px inset;position:absolute;top:0;left:0}.monaco-editor .lines-content .cslr{position:absolute}.monaco-editor .focused .selected-text{background-color:var(--vscode-editor-selectionBackground)}.monaco-editor .selected-text{background-color:var(--vscode-editor-inactiveSelectionBackground)}.monaco-editor .top-left-radius{border-top-left-radius:3px}.monaco-editor .bottom-left-radius{border-bottom-left-radius:3px}.monaco-editor .top-right-radius{border-top-right-radius:3px}.monaco-editor .bottom-right-radius{border-bottom-right-radius:3px}.monaco-editor.hc-black .top-left-radius{border-top-left-radius:0}.monaco-editor.hc-black .bottom-left-radius{border-bottom-left-radius:0}.monaco-editor.hc-black .top-right-radius{border-top-right-radius:0}.monaco-editor.hc-black .bottom-right-radius{border-bottom-right-radius:0}.monaco-editor.hc-light .top-left-radius{border-top-left-radius:0}.monaco-editor.hc-light .bottom-left-radius{border-bottom-left-radius:0}.monaco-editor.hc-light .top-right-radius{border-top-right-radius:0}.monaco-editor.hc-light .bottom-right-radius{border-bottom-right-radius:0}.monaco-editor .cursors-layer{position:absolute;top:0}.monaco-editor .cursors-layer>.cursor{box-sizing:border-box;position:absolute;overflow:hidden}.monaco-editor .cursors-layer.cursor-smooth-caret-animation>.cursor{transition:all 80ms}.monaco-editor .cursors-layer.cursor-block-outline-style>.cursor{border-style:solid;border-width:1px;background:0 0!important}.monaco-editor .cursors-layer.cursor-underline-style>.cursor{border-bottom-style:solid;border-bottom-width:2px;background:0 0!important}.monaco-editor .cursors-layer.cursor-underline-thin-style>.cursor{border-bottom-style:solid;border-bottom-width:1px;background:0 0!important}@keyframes monaco-cursor-smooth{0%,20%{opacity:1}60%,to{opacity:0}}@keyframes monaco-cursor-phase{0%,20%{opacity:1}90%,to{opacity:0}}@keyframes monaco-cursor-expand{0%,20%{transform:scaleY(1)}80%,to{transform:scaleY(0)}}.cursor-smooth{animation:.5s ease-in-out 20 alternate monaco-cursor-smooth}.cursor-phase{animation:.5s ease-in-out 20 alternate monaco-cursor-phase}.cursor-expand>.cursor{animation:.5s ease-in-out 20 alternate monaco-cursor-expand}.monaco-editor .mwh{position:absolute;color:var(--vscode-editorWhitespace-foreground)!important}.monaco-editor .diff-hidden-lines-widget{width:100%}.monaco-editor .diff-hidden-lines{height:0;font-size:13px;line-height:14px;transform:translateY(-10px)}.monaco-editor .diff-hidden-lines:not(.dragging) .top:hover,.monaco-editor .diff-hidden-lines:not(.dragging) .bottom:hover,.monaco-editor .diff-hidden-lines .top.dragging,.monaco-editor .diff-hidden-lines .bottom.dragging{background-color:var(--vscode-focusBorder)}.monaco-editor .diff-hidden-lines .top,.monaco-editor .diff-hidden-lines .bottom{background-color:transparent;background-clip:padding-box;border-top:4px solid transparent;border-bottom:2px solid transparent;height:4px;transition:background-color .1s ease-out}.monaco-editor.draggingUnchangedRegion.canMoveTop:not(.canMoveBottom) *,.monaco-editor .diff-hidden-lines .top.canMoveTop:not(.canMoveBottom),.monaco-editor .diff-hidden-lines .bottom.canMoveTop:not(.canMoveBottom){cursor:n-resize!important}.monaco-editor.draggingUnchangedRegion:not(.canMoveTop).canMoveBottom *,.monaco-editor .diff-hidden-lines .top:not(.canMoveTop).canMoveBottom,.monaco-editor .diff-hidden-lines .bottom:not(.canMoveTop).canMoveBottom{cursor:s-resize!important}.monaco-editor.draggingUnchangedRegion.canMoveTop.canMoveBottom *,.monaco-editor .diff-hidden-lines .top.canMoveTop.canMoveBottom,.monaco-editor .diff-hidden-lines .bottom.canMoveTop.canMoveBottom{cursor:ns-resize!important}.monaco-editor .diff-hidden-lines .top{transform:translateY(4px)}.monaco-editor .diff-hidden-lines .bottom{transform:translateY(-6px)}.monaco-editor .diff-unchanged-lines{background:var(--vscode-diffEditor-unchangedCodeBackground)}.monaco-editor .noModificationsOverlay{z-index:1;background:var(--vscode-editor-background);justify-content:center;align-items:center;display:flex}.monaco-editor .diff-hidden-lines .center{background:var(--vscode-diffEditor-unchangedRegionBackground);color:var(--vscode-diffEditor-unchangedRegionForeground);text-overflow:ellipsis;white-space:nowrap;height:24px;box-shadow:inset 0 -5px 5px -7px var(--vscode-diffEditor-unchangedRegionShadow),inset 0 5px 5px -7px var(--vscode-diffEditor-unchangedRegionShadow);display:block;overflow:hidden}.monaco-editor .diff-hidden-lines .center span.codicon{vertical-align:middle}.monaco-editor .diff-hidden-lines .center a:hover .codicon{cursor:pointer;color:var(--vscode-editorLink-activeForeground)!important}.monaco-editor .diff-hidden-lines div.breadcrumb-item{cursor:pointer}.monaco-editor .diff-hidden-lines div.breadcrumb-item:hover{color:var(--vscode-editorLink-activeForeground)}.monaco-editor .movedOriginal,.monaco-editor .movedModified{border:2px solid var(--vscode-diffEditor-move-border)}.monaco-editor .movedOriginal.currentMove,.monaco-editor .movedModified.currentMove{border:2px solid var(--vscode-diffEditor-moveActive-border)}.monaco-diff-editor .moved-blocks-lines path.currentMove{stroke:var(--vscode-diffEditor-moveActive-border)}.monaco-diff-editor .moved-blocks-lines path{pointer-events:visiblestroke}.monaco-diff-editor .moved-blocks-lines .arrow{fill:var(--vscode-diffEditor-move-border)}.monaco-diff-editor .moved-blocks-lines .arrow.currentMove{fill:var(--vscode-diffEditor-moveActive-border)}.monaco-diff-editor .moved-blocks-lines .arrow-rectangle{fill:var(--vscode-editor-background)}.monaco-diff-editor .moved-blocks-lines{pointer-events:none;position:absolute}.monaco-diff-editor .moved-blocks-lines path{fill:none;stroke:var(--vscode-diffEditor-move-border);stroke-width:2px}.monaco-editor .char-delete.diff-range-empty{border-left:solid var(--vscode-diffEditor-removedTextBackground)3px;margin-left:-1px}.monaco-editor .char-insert.diff-range-empty{border-left:solid var(--vscode-diffEditor-insertedTextBackground)3px}.monaco-editor .fold-unchanged{cursor:pointer}.monaco-diff-editor .diff-moved-code-block{justify-content:flex-end;margin-top:-4px;display:flex}.monaco-diff-editor .diff-moved-code-block .action-bar .action-label.codicon{width:12px;height:12px;font-size:12px}.monaco-diff-editor .diffOverview{z-index:9}.monaco-diff-editor .diffOverview .diffViewport{z-index:10}.monaco-diff-editor.vs .diffOverview{background:rgba(0,0,0,.03)}.monaco-diff-editor.vs-dark .diffOverview{background:rgba(255,255,255,.01)}.monaco-scrollable-element.modified-in-monaco-diff-editor.vs .scrollbar,.monaco-scrollable-element.modified-in-monaco-diff-editor.vs-dark .scrollbar,.monaco-scrollable-element.modified-in-monaco-diff-editor.hc-black .scrollbar,.monaco-scrollable-element.modified-in-monaco-diff-editor.hc-light .scrollbar{background:0 0}.monaco-scrollable-element.modified-in-monaco-diff-editor .slider{z-index:10}.modified-in-monaco-diff-editor .slider.active{background:rgba(171,171,171,.4)}.modified-in-monaco-diff-editor.hc-black .slider.active,.modified-in-monaco-diff-editor.hc-light .slider.active{background:0 0}.monaco-editor .insert-sign,.monaco-diff-editor .insert-sign,.monaco-editor .delete-sign,.monaco-diff-editor .delete-sign{align-items:center;opacity:.7!important;font-size:11px!important;display:flex!important}.monaco-editor.hc-black .insert-sign,.monaco-diff-editor.hc-black .insert-sign,.monaco-editor.hc-black .delete-sign,.monaco-diff-editor.hc-black .delete-sign,.monaco-editor.hc-light .insert-sign,.monaco-diff-editor.hc-light .insert-sign,.monaco-editor.hc-light .delete-sign,.monaco-diff-editor.hc-light .delete-sign{opacity:1}.monaco-editor .inline-deleted-margin-view-zone,.monaco-editor .inline-added-margin-view-zone{text-align:right}.monaco-editor .arrow-revert-change{z-index:10;position:absolute}.monaco-editor .arrow-revert-change:hover{cursor:pointer}.monaco-editor .view-zones .view-lines .view-line span{display:inline-block}.monaco-editor .margin-view-zones .lightbulb-glyph:hover{cursor:pointer}.monaco-editor .char-insert,.monaco-diff-editor .char-insert{background-color:var(--vscode-diffEditor-insertedTextBackground)}.monaco-editor .line-insert,.monaco-diff-editor .line-insert{background-color:var(--vscode-diffEditor-insertedLineBackground,var(--vscode-diffEditor-insertedTextBackground))}.monaco-editor .line-insert,.monaco-editor .char-insert{box-sizing:border-box;border:1px solid var(--vscode-diffEditor-insertedTextBorder)}.monaco-editor.hc-black .line-insert,.monaco-editor.hc-light .line-insert,.monaco-editor.hc-black .char-insert,.monaco-editor.hc-light .char-insert{border-style:dashed}.monaco-editor .line-delete,.monaco-editor .char-delete{box-sizing:border-box;border:1px solid var(--vscode-diffEditor-removedTextBorder)}.monaco-editor.hc-black .line-delete,.monaco-editor.hc-light .line-delete,.monaco-editor.hc-black .char-delete,.monaco-editor.hc-light .char-delete{border-style:dashed}.monaco-editor .inline-added-margin-view-zone,.monaco-editor .gutter-insert,.monaco-diff-editor .gutter-insert{background-color:var(--vscode-diffEditorGutter-insertedLineBackground,var(--vscode-diffEditor-insertedLineBackground),var(--vscode-diffEditor-insertedTextBackground))}.monaco-editor .char-delete,.monaco-diff-editor .char-delete,.monaco-editor .inline-deleted-text{background-color:var(--vscode-diffEditor-removedTextBackground)}.monaco-editor .inline-deleted-text{text-decoration:line-through}.monaco-editor .line-delete,.monaco-diff-editor .line-delete{background-color:var(--vscode-diffEditor-removedLineBackground,var(--vscode-diffEditor-removedTextBackground))}.monaco-editor .inline-deleted-margin-view-zone,.monaco-editor .gutter-delete,.monaco-diff-editor .gutter-delete{background-color:var(--vscode-diffEditorGutter-removedLineBackground,var(--vscode-diffEditor-removedLineBackground),var(--vscode-diffEditor-removedTextBackground))}.monaco-diff-editor.side-by-side .editor.modified{box-shadow:-6px 0 5px -5px var(--vscode-scrollbar-shadow);border-left:1px solid var(--vscode-diffEditor-border)}.monaco-diff-editor.side-by-side .editor.original{box-shadow:6px 0 5px -5px var(--vscode-scrollbar-shadow);border-right:1px solid var(--vscode-diffEditor-border)}.monaco-diff-editor .diffViewport{background:var(--vscode-scrollbarSlider-background)}.monaco-diff-editor .diffViewport:hover{background:var(--vscode-scrollbarSlider-hoverBackground)}.monaco-diff-editor .diffViewport:active{background:var(--vscode-scrollbarSlider-activeBackground)}.monaco-editor .diagonal-fill{background-image:linear-gradient(-45deg,var(--vscode-diffEditor-diagonalFill)12.5%,transparent 12.5%,transparent 50%,var(--vscode-diffEditor-diagonalFill)50%,var(--vscode-diffEditor-diagonalFill)62.5%,transparent 62.5%,transparent 100%);background-size:8px 8px}.monaco-diff-editor .gutter{flex-grow:0;flex-shrink:0;position:relative;overflow:hidden}.monaco-diff-editor .gutter>div{position:absolute}.monaco-diff-editor .gutter .gutterItem{opacity:0;transition:opacity .7s}.monaco-diff-editor .gutter .gutterItem.showAlways{opacity:1;transition:none}.monaco-diff-editor .gutter .gutterItem.noTransition{transition:none}.monaco-diff-editor .gutter:hover .gutterItem{opacity:1;transition:opacity .1s ease-in-out}.monaco-diff-editor .gutter .gutterItem .background{border-left:2px var(--vscode-menu-border)solid;width:1px;height:100%;position:absolute;left:50%}.monaco-diff-editor .gutter .gutterItem .buttons{justify-content:center;align-items:center;width:100%;display:flex;position:absolute}.monaco-diff-editor .gutter .gutterItem .buttons .monaco-toolbar{height:fit-content}.monaco-diff-editor .gutter .gutterItem .buttons .monaco-toolbar .monaco-action-bar{line-height:1}.monaco-diff-editor .gutter .gutterItem .buttons .monaco-toolbar .monaco-action-bar .actions-container{background:var(--vscode-editorGutter-commentRangeForeground);border-radius:4px;width:fit-content}.monaco-diff-editor .gutter .gutterItem .buttons .monaco-toolbar .monaco-action-bar .actions-container .action-item:hover{background:var(--vscode-toolbar-hoverBackground)}.monaco-diff-editor .gutter .gutterItem .buttons .monaco-toolbar .monaco-action-bar .actions-container .action-item .action-label{padding:1px 2px}.monaco-diff-editor .diff-hidden-lines-compact{height:11px;display:flex}.monaco-diff-editor .diff-hidden-lines-compact .line-left{border-top:1px solid;border-color:var(--vscode-editorCodeLens-foreground);opacity:.5;width:100%;height:1px;margin:auto}.monaco-diff-editor .diff-hidden-lines-compact .line-right{border-top:1px solid;border-color:var(--vscode-editorCodeLens-foreground);opacity:.5;width:100%;height:1px;margin:auto}.monaco-diff-editor .diff-hidden-lines-compact .line-left{width:20px}.monaco-diff-editor .diff-hidden-lines-compact .text{color:var(--vscode-editorCodeLens-foreground);text-wrap:nowrap;margin:0 4px;font-size:11px;line-height:11px}.monaco-component.diff-review{user-select:none;z-index:99}.monaco-diff-editor .diff-review{position:absolute}.monaco-component.diff-review .diff-review-line-number{text-align:right;color:var(--vscode-editorLineNumber-foreground);display:inline-block}.monaco-component.diff-review .diff-review-summary{padding-left:10px}.monaco-component.diff-review .diff-review-shadow{box-shadow:var(--vscode-scrollbar-shadow)0 -6px 6px -6px inset;position:absolute}.monaco-component.diff-review .diff-review-row{white-space:pre}.monaco-component.diff-review .diff-review-table{min-width:100%;display:table}.monaco-component.diff-review .diff-review-row{width:100%;display:table-row}.monaco-component.diff-review .diff-review-spacer{vertical-align:middle;width:10px;display:inline-block}.monaco-component.diff-review .diff-review-spacer>.codicon{font-size:9px!important}.monaco-component.diff-review .diff-review-actions{z-index:100;display:inline-block;position:absolute;top:2px;right:10px}.monaco-component.diff-review .diff-review-actions .action-label{width:16px;height:16px;margin:2px 0}.monaco-component.diff-review .revertButton{cursor:pointer}.monaco-toolbar{height:100%}.monaco-toolbar .toolbar-toggle-more{padding:0;display:inline-block}.monaco-component.multiDiffEditor{background:var(--vscode-multiDiffEditor-background);width:100%;height:100%;position:relative;overflow-y:hidden}.monaco-component.multiDiffEditor>div{width:100%;height:100%;position:absolute;top:0;left:0}.monaco-component.multiDiffEditor>div.placeholder{visibility:hidden;place-content:center;place-items:center;display:grid}.monaco-component.multiDiffEditor>div.placeholder.visible{visibility:visible}.monaco-component.multiDiffEditor .active{--vscode-multiDiffEditor-border:var(--vscode-focusBorder)}.monaco-component.multiDiffEditor .multiDiffEntry{flex-direction:column;flex:1;display:flex;overflow:hidden}.monaco-component.multiDiffEditor .multiDiffEntry .collapse-button{cursor:pointer;margin:0 5px}.monaco-component.multiDiffEditor .multiDiffEntry .collapse-button a{display:block}.monaco-component.multiDiffEditor .multiDiffEntry .header{z-index:1000;background:var(--vscode-editor-background)}.monaco-component.multiDiffEditor .multiDiffEntry .header:not(.collapsed) .header-content{border-bottom:1px solid var(--vscode-sideBarSectionHeader-border)}.monaco-component.multiDiffEditor .multiDiffEntry .header .header-content{border-top:1px solid var(--vscode-multiDiffEditor-border);color:var(--vscode-foreground);background:var(--vscode-multiDiffEditor-headerBackground);align-items:center;margin:8px 0 0;padding:4px 5px;display:flex}.monaco-component.multiDiffEditor .multiDiffEntry .header .header-content.shadow{box-shadow:var(--vscode-scrollbar-shadow)0px 6px 6px -6px}.monaco-component.multiDiffEditor .multiDiffEntry .header .header-content .file-path{flex:1;min-width:0;display:flex}.monaco-component.multiDiffEditor .multiDiffEntry .header .header-content .file-path .title{font-size:14px;line-height:22px}.monaco-component.multiDiffEditor .multiDiffEntry .header .header-content .file-path .title.original{text-overflow:ellipsis;flex:1;min-width:0}.monaco-component.multiDiffEditor .multiDiffEntry .header .header-content .file-path .status{opacity:.75;margin:0 10px;font-weight:600;line-height:22px}.monaco-component.multiDiffEditor .multiDiffEntry .header .header-content .actions{padding:0 8px}.monaco-component.multiDiffEditor .multiDiffEntry .editorParent{border-bottom:1px solid var(--vscode-multiDiffEditor-border);flex-direction:column;flex:1;display:flex;overflow:hidden}.monaco-component.multiDiffEditor .multiDiffEntry .editorContainer{flex:1}.monaco-editor .selection-anchor{background-color:#007acc;width:2px!important}.monaco-editor .bracket-match{box-sizing:border-box;background-color:var(--vscode-editorBracketMatch-background);border:1px solid var(--vscode-editorBracketMatch-border)}.inline-editor-progress-decoration{width:1em;height:1em;display:inline-block}.inline-progress-widget{justify-content:center;align-items:center;display:flex!important}.inline-progress-widget .icon{font-size:80%!important}.inline-progress-widget:hover .icon{animation:none;font-size:90%!important}.inline-progress-widget:hover .icon:before{content:var(--vscode-icon-x-content);font-family:var(--vscode-icon-x-font-family)}.monaco-editor .monaco-editor-overlaymessage{z-index:10000;padding-bottom:8px}.monaco-editor .monaco-editor-overlaymessage.below{z-index:10000;padding-top:8px;padding-bottom:0}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.monaco-editor .monaco-editor-overlaymessage.fadeIn{animation:.15s ease-out fadeIn}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.monaco-editor .monaco-editor-overlaymessage.fadeOut{animation:.1s ease-out fadeOut}.monaco-editor .monaco-editor-overlaymessage .message{color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-inputValidation-infoBorder);border-radius:3px;padding:2px 4px}.monaco-editor .monaco-editor-overlaymessage .message p{margin-top:0;margin-bottom:0}.monaco-editor .monaco-editor-overlaymessage .message a{color:var(--vscode-textLink-foreground)}.monaco-editor .monaco-editor-overlaymessage .message a:hover{color:var(--vscode-textLink-activeForeground)}.monaco-editor.hc-black .monaco-editor-overlaymessage .message,.monaco-editor.hc-light .monaco-editor-overlaymessage .message{border-width:2px}.monaco-editor .monaco-editor-overlaymessage .anchor{z-index:1000;border:8px solid transparent;position:absolute;left:2px;width:0!important;height:0!important}.monaco-editor .monaco-editor-overlaymessage .anchor.top{border-bottom-color:var(--vscode-inputValidation-infoBorder)}.monaco-editor .monaco-editor-overlaymessage .anchor.below{border-top-color:var(--vscode-inputValidation-infoBorder)}.monaco-editor .monaco-editor-overlaymessage:not(.below) .anchor.top,.monaco-editor .monaco-editor-overlaymessage.below .anchor.below{display:none}.monaco-editor .monaco-editor-overlaymessage.below .anchor.top{display:inherit;top:-8px}.post-edit-widget{box-shadow:0 0 8px 2px var(--vscode-widget-shadow);border:1px solid var(--vscode-widget-border,transparent);background-color:var(--vscode-editorWidget-background);border-radius:4px;overflow:hidden}.post-edit-widget .monaco-button{border:none;border-radius:0;padding:2px}.post-edit-widget .monaco-button:hover{background-color:var(--vscode-button-secondaryHoverBackground)!important}.post-edit-widget .monaco-button .codicon{margin:0}@font-face{font-family:codicon;font-display:block;src:url(/FTQPriVuepress-public-page/assets/codicon-DCmgc-ay.ttf)format("truetype")}.codicon[class*=codicon-]{text-rendering:auto;text-align:center;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;user-select:none;font:16px/1 codicon;text-decoration:none;display:inline-block}.codicon-wrench-subaction{opacity:.5}@keyframes codicon-spin{to{transform:rotate(360deg)}}.codicon-sync.codicon-modifier-spin,.codicon-loading.codicon-modifier-spin,.codicon-gear.codicon-modifier-spin,.codicon-notebook-state-executing.codicon-modifier-spin{animation:1.5s steps(30,end) infinite codicon-spin}.codicon-modifier-disabled{opacity:.4}.codicon-loading,.codicon-tree-item-loading:before{animation-duration:1s!important;animation-timing-function:cubic-bezier(.53,.21,.29,.67)!important}.monaco-editor .codicon.codicon-symbol-array,.monaco-workbench .codicon.codicon-symbol-array{color:var(--vscode-symbolIcon-arrayForeground)}.monaco-editor .codicon.codicon-symbol-boolean,.monaco-workbench .codicon.codicon-symbol-boolean{color:var(--vscode-symbolIcon-booleanForeground)}.monaco-editor .codicon.codicon-symbol-class,.monaco-workbench .codicon.codicon-symbol-class{color:var(--vscode-symbolIcon-classForeground)}.monaco-editor .codicon.codicon-symbol-method,.monaco-workbench .codicon.codicon-symbol-method{color:var(--vscode-symbolIcon-methodForeground)}.monaco-editor .codicon.codicon-symbol-color,.monaco-workbench .codicon.codicon-symbol-color{color:var(--vscode-symbolIcon-colorForeground)}.monaco-editor .codicon.codicon-symbol-constant,.monaco-workbench .codicon.codicon-symbol-constant{color:var(--vscode-symbolIcon-constantForeground)}.monaco-editor .codicon.codicon-symbol-constructor,.monaco-workbench .codicon.codicon-symbol-constructor{color:var(--vscode-symbolIcon-constructorForeground)}.monaco-editor .codicon.codicon-symbol-value,.monaco-workbench .codicon.codicon-symbol-value,.monaco-editor .codicon.codicon-symbol-enum,.monaco-workbench .codicon.codicon-symbol-enum{color:var(--vscode-symbolIcon-enumeratorForeground)}.monaco-editor .codicon.codicon-symbol-enum-member,.monaco-workbench .codicon.codicon-symbol-enum-member{color:var(--vscode-symbolIcon-enumeratorMemberForeground)}.monaco-editor .codicon.codicon-symbol-event,.monaco-workbench .codicon.codicon-symbol-event{color:var(--vscode-symbolIcon-eventForeground)}.monaco-editor .codicon.codicon-symbol-field,.monaco-workbench .codicon.codicon-symbol-field{color:var(--vscode-symbolIcon-fieldForeground)}.monaco-editor .codicon.codicon-symbol-file,.monaco-workbench .codicon.codicon-symbol-file{color:var(--vscode-symbolIcon-fileForeground)}.monaco-editor .codicon.codicon-symbol-folder,.monaco-workbench .codicon.codicon-symbol-folder{color:var(--vscode-symbolIcon-folderForeground)}.monaco-editor .codicon.codicon-symbol-function,.monaco-workbench .codicon.codicon-symbol-function{color:var(--vscode-symbolIcon-functionForeground)}.monaco-editor .codicon.codicon-symbol-interface,.monaco-workbench .codicon.codicon-symbol-interface{color:var(--vscode-symbolIcon-interfaceForeground)}.monaco-editor .codicon.codicon-symbol-key,.monaco-workbench .codicon.codicon-symbol-key{color:var(--vscode-symbolIcon-keyForeground)}.monaco-editor .codicon.codicon-symbol-keyword,.monaco-workbench .codicon.codicon-symbol-keyword{color:var(--vscode-symbolIcon-keywordForeground)}.monaco-editor .codicon.codicon-symbol-module,.monaco-workbench .codicon.codicon-symbol-module{color:var(--vscode-symbolIcon-moduleForeground)}.monaco-editor .codicon.codicon-symbol-namespace,.monaco-workbench .codicon.codicon-symbol-namespace{color:var(--vscode-symbolIcon-namespaceForeground)}.monaco-editor .codicon.codicon-symbol-null,.monaco-workbench .codicon.codicon-symbol-null{color:var(--vscode-symbolIcon-nullForeground)}.monaco-editor .codicon.codicon-symbol-number,.monaco-workbench .codicon.codicon-symbol-number{color:var(--vscode-symbolIcon-numberForeground)}.monaco-editor .codicon.codicon-symbol-object,.monaco-workbench .codicon.codicon-symbol-object{color:var(--vscode-symbolIcon-objectForeground)}.monaco-editor .codicon.codicon-symbol-operator,.monaco-workbench .codicon.codicon-symbol-operator{color:var(--vscode-symbolIcon-operatorForeground)}.monaco-editor .codicon.codicon-symbol-package,.monaco-workbench .codicon.codicon-symbol-package{color:var(--vscode-symbolIcon-packageForeground)}.monaco-editor .codicon.codicon-symbol-property,.monaco-workbench .codicon.codicon-symbol-property{color:var(--vscode-symbolIcon-propertyForeground)}.monaco-editor .codicon.codicon-symbol-reference,.monaco-workbench .codicon.codicon-symbol-reference{color:var(--vscode-symbolIcon-referenceForeground)}.monaco-editor .codicon.codicon-symbol-snippet,.monaco-workbench .codicon.codicon-symbol-snippet{color:var(--vscode-symbolIcon-snippetForeground)}.monaco-editor .codicon.codicon-symbol-string,.monaco-workbench .codicon.codicon-symbol-string{color:var(--vscode-symbolIcon-stringForeground)}.monaco-editor .codicon.codicon-symbol-struct,.monaco-workbench .codicon.codicon-symbol-struct{color:var(--vscode-symbolIcon-structForeground)}.monaco-editor .codicon.codicon-symbol-text,.monaco-workbench .codicon.codicon-symbol-text{color:var(--vscode-symbolIcon-textForeground)}.monaco-editor .codicon.codicon-symbol-type-parameter,.monaco-workbench .codicon.codicon-symbol-type-parameter{color:var(--vscode-symbolIcon-typeParameterForeground)}.monaco-editor .codicon.codicon-symbol-unit,.monaco-workbench .codicon.codicon-symbol-unit{color:var(--vscode-symbolIcon-unitForeground)}.monaco-editor .codicon.codicon-symbol-variable,.monaco-workbench .codicon.codicon-symbol-variable{color:var(--vscode-symbolIcon-variableForeground)}.monaco-editor .lightBulbWidget{justify-content:center;align-items:center;display:flex}.monaco-editor .lightBulbWidget:hover{cursor:pointer}.monaco-editor .lightBulbWidget.codicon-light-bulb,.monaco-editor .lightBulbWidget.codicon-lightbulb-sparkle{color:var(--vscode-editorLightBulb-foreground)}.monaco-editor .lightBulbWidget.codicon-lightbulb-autofix,.monaco-editor .lightBulbWidget.codicon-lightbulb-sparkle-autofix{color:var(--vscode-editorLightBulbAutoFix-foreground,var(--vscode-editorLightBulb-foreground))}.monaco-editor .lightBulbWidget.codicon-sparkle-filled{color:var(--vscode-editorLightBulbAi-foreground,var(--vscode-icon-foreground))}.monaco-editor .lightBulbWidget:before{z-index:2;position:relative}.monaco-editor .lightBulbWidget:after{content:"";opacity:.3;z-index:1;width:100%;height:100%;display:block;position:absolute;top:0;left:0}.monaco-editor .glyph-margin-widgets .cgmr[class*=codicon-gutter-lightbulb]{cursor:pointer;display:block}.monaco-editor .glyph-margin-widgets .cgmr.codicon-gutter-lightbulb,.monaco-editor .glyph-margin-widgets .cgmr.codicon-gutter-lightbulb-sparkle{color:var(--vscode-editorLightBulb-foreground)}.monaco-editor .glyph-margin-widgets .cgmr.codicon-gutter-lightbulb-auto-fix,.monaco-editor .glyph-margin-widgets .cgmr.codicon-gutter-lightbulb-aifix-auto-fix{color:var(--vscode-editorLightBulbAutoFix-foreground,var(--vscode-editorLightBulb-foreground))}.monaco-editor .glyph-margin-widgets .cgmr.codicon-gutter-lightbulb-sparkle-filled{color:var(--vscode-editorLightBulbAi-foreground,var(--vscode-icon-foreground))}.action-widget{z-index:40;background-color:var(--vscode-editorActionList-background);width:100%;min-width:160px;max-width:80vw;color:var(--vscode-editorActionList-foreground);box-shadow:0 2px 8px var(--vscode-widget-shadow);border-radius:5px;padding:4px;font-size:13px;display:block;border:1px solid var(--vscode-editorWidget-border)!important}.context-view-block{cursor:initial;z-index:-1;width:100%;height:100%;position:fixed;top:0;left:0}.context-view-pointerBlock{cursor:initial;z-index:2;width:100%;height:100%;position:fixed;top:0;left:0}.action-widget .monaco-list{user-select:none;border:0!important}.action-widget .monaco-list:focus:before{outline:0!important}.action-widget .monaco-list .monaco-scrollable-element{overflow:visible}.action-widget .monaco-list .monaco-list-row{white-space:nowrap;cursor:pointer;touch-action:none;border-radius:4px;width:100%;padding:0 10px}.action-widget .monaco-list .monaco-list-row.action.focused:not(.option-disabled){color:var(--vscode-editorActionList-focusForeground);outline:1px solid var(--vscode-menu-selectionBorder,transparent);outline-offset:-1px;background-color:var(--vscode-editorActionList-focusBackground)!important}.action-widget .monaco-list-row.group-header{font-size:12px;font-weight:600;color:var(--vscode-descriptionForeground)!important}.action-widget .monaco-list-row.group-header:not(:first-of-type){margin-top:2px}.action-widget .monaco-list .group-header,.action-widget .monaco-list .option-disabled,.action-widget .monaco-list .option-disabled:before,.action-widget .monaco-list .option-disabled .focused,.action-widget .monaco-list .option-disabled .focused:before{-webkit-touch-callout:none;user-select:none;cursor:default!important;background-color:transparent!important;outline:0 solid!important}.action-widget .monaco-list-row.action{align-items:center;gap:8px;display:flex}.action-widget .monaco-list-row.action.option-disabled,.action-widget .monaco-list:focus .monaco-list-row.focused.action.option-disabled,.action-widget .monaco-list-row.action.option-disabled .codicon,.action-widget .monaco-list:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused).option-disabled{color:var(--vscode-disabledForeground)}.action-widget .monaco-list-row.action:not(.option-disabled) .codicon{color:inherit}.action-widget .monaco-list-row.action .title{text-overflow:ellipsis;flex:1;overflow:hidden}.action-widget .monaco-list-row.action .monaco-keybinding>.monaco-keybinding-key{background-color:var(--vscode-keybindingLabel-background);color:var(--vscode-keybindingLabel-foreground);border-style:solid;border-width:1px;border-color:var(--vscode-keybindingLabel-border);border-bottom-color:var(--vscode-keybindingLabel-bottomBorder);box-shadow:inset 0 -1px 0 var(--vscode-widget-shadow);border-radius:3px}.action-widget .action-widget-action-bar{background-color:var(--vscode-editorActionList-background);border-top:1px solid var(--vscode-editorHoverWidget-border);margin-top:2px}.action-widget .action-widget-action-bar:before{content:"";width:100%;display:block}.action-widget .action-widget-action-bar .actions-container{padding:3px 8px 0}.action-widget-action-bar .action-label{color:var(--vscode-textLink-activeForeground);pointer-events:all;padding:0;font-size:12px;line-height:22px}.action-widget-action-bar .action-item{pointer-events:none;margin-right:16px}.action-widget-action-bar .action-label:hover{background-color:transparent!important}.monaco-action-bar .actions-container.highlight-toggled .action-label.checked{background:var(--vscode-actionBar-toggledBackground)!important}.monaco-editor .codelens-decoration{text-overflow:ellipsis;white-space:nowrap;color:var(--vscode-editorCodeLens-foreground);line-height:var(--vscode-editorCodeLens-lineHeight);font-size:var(--vscode-editorCodeLens-fontSize);padding-right:calc(var(--vscode-editorCodeLens-fontSize)*.5);font-feature-settings:var(--vscode-editorCodeLens-fontFeatureSettings);font-family:var(--vscode-editorCodeLens-fontFamily),var(--vscode-editorCodeLens-fontFamilyDefault);display:inline-block;overflow:hidden}.monaco-editor .codelens-decoration>span,.monaco-editor .codelens-decoration>a{user-select:none;white-space:nowrap;vertical-align:sub}.monaco-editor .codelens-decoration>a{text-decoration:none}.monaco-editor .codelens-decoration>a:hover{cursor:pointer;color:var(--vscode-editorLink-activeForeground)!important}.monaco-editor .codelens-decoration>a:hover .codicon{color:var(--vscode-editorLink-activeForeground)!important}.monaco-editor .codelens-decoration .codicon{vertical-align:middle;color:var(--vscode-editorCodeLens-foreground);line-height:var(--vscode-editorCodeLens-lineHeight);font-size:var(--vscode-editorCodeLens-fontSize);color:currentColor!important}.monaco-editor .codelens-decoration>a:hover .codicon:before{cursor:pointer}@keyframes fadein{0%{opacity:0;visibility:visible}to{opacity:1}}.monaco-editor .codelens-decoration.fadein{animation:.1s linear fadein}.colorpicker-widget{user-select:none;height:190px}.colorpicker-color-decoration,.hc-light .colorpicker-color-decoration{box-sizing:border-box;cursor:pointer;border:.1em solid #000;width:.8em;height:.8em;margin:.1em .2em 0;line-height:.8em;display:inline-block}.hc-black .colorpicker-color-decoration,.vs-dark .colorpicker-color-decoration{border:.1em solid #eee}.colorpicker-header{height:24px;image-rendering:pixelated;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII=) 0 0/9px 9px;display:flex;position:relative}.colorpicker-header .picked-color{cursor:pointer;color:#fff;white-space:nowrap;flex:1;justify-content:center;align-items:center;width:240px;line-height:24px;display:flex;overflow:hidden}.colorpicker-header .picked-color .picked-color-presentation{white-space:nowrap;margin-left:5px;margin-right:5px}.colorpicker-header .picked-color .codicon{color:inherit;font-size:14px}.colorpicker-header .picked-color.light{color:#000}.colorpicker-header .original-color{width:74px;z-index:inherit;cursor:pointer}.standalone-colorpicker{color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border)}.colorpicker-header.standalone-colorpicker{border-bottom:none}.colorpicker-header .close-button{cursor:pointer;background-color:var(--vscode-editorHoverWidget-background);border-left:1px solid var(--vscode-editorHoverWidget-border)}.colorpicker-header .close-button-inner-div{text-align:center;width:100%;height:100%}.colorpicker-header .close-button-inner-div:hover{background-color:var(--vscode-toolbar-hoverBackground)}.colorpicker-header .close-icon{padding:3px}.colorpicker-body{padding:8px;display:flex;position:relative}.colorpicker-body .saturation-wrap{flex:1;min-width:220px;height:150px;position:relative;overflow:hidden}.colorpicker-body .saturation-box{height:150px;position:absolute}.colorpicker-body .saturation-selection{border:1px solid #fff;border-radius:100%;width:9px;height:9px;margin:-5px 0 0 -5px;position:absolute;box-shadow:0 0 2px rgba(0,0,0,.8)}.colorpicker-body .strip{width:25px;height:150px}.colorpicker-body .standalone-strip{width:25px;height:122px}.colorpicker-body .hue-strip{cursor:grab;background:linear-gradient(red 0%,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%);margin-left:8px;position:relative}.colorpicker-body .opacity-strip{cursor:grab;image-rendering:pixelated;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII=) 0 0/9px 9px;margin-left:8px;position:relative}.colorpicker-body .strip.grabbing{cursor:grabbing}.colorpicker-body .slider{box-sizing:border-box;border:1px solid rgba(255,255,255,.71);width:calc(100% + 4px);height:4px;position:absolute;top:0;left:-2px;box-shadow:0 0 1px rgba(0,0,0,.85)}.colorpicker-body .strip .overlay{pointer-events:none;height:150px}.colorpicker-body .standalone-strip .standalone-overlay{pointer-events:none;height:122px}.standalone-colorpicker-body{border:1px solid transparent;border-bottom:1px solid var(--vscode-editorHoverWidget-border);display:block;overflow:hidden}.colorpicker-body .insert-button{background:var(--vscode-button-background);width:58px;height:20px;color:var(--vscode-button-foreground);cursor:pointer;border:none;border-radius:2px;padding:0;position:absolute;bottom:8px;right:8px}.colorpicker-body .insert-button:hover{background:var(--vscode-button-hoverBackground)}.monaco-editor .inlineSuggestionsHints.withBorder{z-index:39;color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border)}.monaco-editor .inlineSuggestionsHints a,.monaco-editor .inlineSuggestionsHints a:hover{color:var(--vscode-foreground)}.monaco-editor .inlineSuggestionsHints .keybinding{opacity:.6;margin-left:4px;display:flex}.monaco-editor .inlineSuggestionsHints .keybinding .monaco-keybinding-key{padding:2px 3px;font-size:8px}.monaco-editor .inlineSuggestionsHints .availableSuggestionCount a{justify-content:center;min-width:19px;display:flex}.monaco-editor .inlineSuggestionStatusBarItemLabel{margin-right:2px}.monaco-editor .peekview-widget .head{box-sizing:border-box;flex-wrap:nowrap;justify-content:space-between;display:flex}.monaco-editor .peekview-widget .head .peekview-title{text-overflow:ellipsis;align-items:baseline;min-width:0;margin-left:20px;font-size:13px;display:flex;overflow:hidden}.monaco-editor .peekview-widget .head .peekview-title.clickable{cursor:pointer}.monaco-editor .peekview-widget .head .peekview-title .dirname:not(:empty){margin-left:.5em;font-size:.9em}.monaco-editor .peekview-widget .head .peekview-title .meta{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.monaco-editor .peekview-widget .head .peekview-title .dirname,.monaco-editor .peekview-widget .head .peekview-title .filename{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.monaco-editor .peekview-widget .head .peekview-title .meta:not(:empty):before{content:"-";padding:0 .3em}.monaco-editor .peekview-widget .head .peekview-actions{text-align:right;flex:1;padding-right:2px}.monaco-editor .peekview-widget .head .peekview-actions>.monaco-action-bar{display:inline-block}.monaco-editor .peekview-widget .head .peekview-actions>.monaco-action-bar,.monaco-editor .peekview-widget .head .peekview-actions>.monaco-action-bar>.actions-container{height:100%}.monaco-editor .peekview-widget>.body{border-top:1px solid;position:relative}.monaco-editor .peekview-widget .head .peekview-title .codicon{align-self:center;margin-right:4px}.monaco-editor .peekview-widget .monaco-list .monaco-list-row.focused .codicon{color:inherit!important}.monaco-editor .zone-widget{z-index:10;position:absolute}.monaco-editor .zone-widget .zone-widget-container{border-top-style:solid;border-top-width:0;border-bottom-style:solid;border-bottom-width:0;position:relative}.monaco-editor .zone-widget .zone-widget-container.reference-zone-widget{border-top-width:1px;border-bottom-width:1px}.monaco-editor .reference-zone-widget .inline{vertical-align:top;display:inline-block}.monaco-editor .reference-zone-widget .messages{text-align:center;width:100%;height:100%;padding:3em 0}.monaco-editor .reference-zone-widget .ref-tree{background-color:var(--vscode-peekViewResult-background);color:var(--vscode-peekViewResult-lineForeground);line-height:23px}.monaco-editor .reference-zone-widget .ref-tree .reference{text-overflow:ellipsis;overflow:hidden}.monaco-editor .reference-zone-widget .ref-tree .reference-file{width:100%;height:100%;color:var(--vscode-peekViewResult-fileForeground);display:inline-flex}.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .selected .reference-file{color:inherit!important}.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows>.monaco-list-row.selected:not(.highlighted){background-color:var(--vscode-peekViewResult-selectionBackground);color:var(--vscode-peekViewResult-selectionForeground)!important}.monaco-editor .reference-zone-widget .ref-tree .reference-file .count{margin-left:auto;margin-right:12px}.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight{background-color:var(--vscode-peekViewResult-matchHighlightBackground)}.monaco-editor .reference-zone-widget .preview .reference-decoration{background-color:var(--vscode-peekViewEditor-matchHighlightBackground);border:2px solid var(--vscode-peekViewEditor-matchHighlightBorder);box-sizing:border-box}.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input{background-color:var(--vscode-peekViewEditor-background)}.monaco-editor .reference-zone-widget .preview .monaco-editor .margin{background-color:var(--vscode-peekViewEditorGutter-background)}.monaco-editor.hc-black .reference-zone-widget .ref-tree .reference-file,.monaco-editor.hc-light .reference-zone-widget .ref-tree .reference-file{font-weight:700}.monaco-editor.hc-black .reference-zone-widget .ref-tree .referenceMatch .highlight,.monaco-editor.hc-light .reference-zone-widget .ref-tree .referenceMatch .highlight{border:1px dotted var(--vscode-contrastActiveBorder,transparent);box-sizing:border-box}.monaco-editor .hoverHighlight{background-color:var(--vscode-editor-hoverHighlightBackground)}.monaco-editor .monaco-hover-content{box-sizing:border-box;padding-bottom:2px;padding-right:2px}.monaco-editor .monaco-hover{color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border);border-radius:3px}.monaco-editor .monaco-hover a{color:var(--vscode-textLink-foreground)}.monaco-editor .monaco-hover a:hover{color:var(--vscode-textLink-activeForeground)}.monaco-editor .monaco-hover .hover-row{display:flex}.monaco-editor .monaco-hover .hover-row .hover-row-contents{flex-direction:column;min-width:0;display:flex}.monaco-editor .monaco-hover .hover-row .verbosity-actions{border-right:1px solid var(--vscode-editorHoverWidget-border);flex-direction:column;justify-content:end;padding-left:5px;padding-right:5px;display:flex}.monaco-editor .monaco-hover .hover-row .verbosity-actions .codicon{cursor:pointer;font-size:11px}.monaco-editor .monaco-hover .hover-row .verbosity-actions .codicon.enabled{color:var(--vscode-textLink-foreground)}.monaco-editor .monaco-hover .hover-row .verbosity-actions .codicon.disabled{opacity:.6}.monaco-editor .monaco-hover .hover-row .actions{background-color:var(--vscode-editorHoverWidget-statusBarBackground)}.monaco-editor .monaco-hover code{background-color:var(--vscode-textCodeBlock-background)}.monaco-editor.vs .dnd-target,.monaco-editor.hc-light .dnd-target{color:#fff;border-right:2px dotted #000}.monaco-editor.vs-dark .dnd-target{color:#51504f;border-right:2px dotted #aeafad}.monaco-editor.hc-black .dnd-target{color:#000;border-right:2px dotted #fff}.monaco-editor.mouse-default .view-lines,.monaco-editor.vs-dark.mac.mouse-default .view-lines,.monaco-editor.hc-black.mac.mouse-default .view-lines,.monaco-editor.hc-light.mac.mouse-default .view-lines{cursor:default}.monaco-editor.mouse-copy .view-lines,.monaco-editor.vs-dark.mac.mouse-copy .view-lines,.monaco-editor.hc-black.mac.mouse-copy .view-lines,.monaco-editor.hc-light.mac.mouse-copy .view-lines{cursor:copy}.monaco-editor .findOptionsWidget{background-color:var(--vscode-editorWidget-background);color:var(--vscode-editorWidget-foreground);box-shadow:0 0 8px 2px var(--vscode-widget-shadow);border:2px solid var(--vscode-contrastBorder)}.monaco-editor .find-widget{z-index:35;box-sizing:border-box;height:33px;box-shadow:0 0 8px 2px var(--vscode-widget-shadow);color:var(--vscode-editorWidget-foreground);border-left:1px solid var(--vscode-widget-border);border-right:1px solid var(--vscode-widget-border);border-bottom:1px solid var(--vscode-widget-border);background-color:var(--vscode-editorWidget-background);border-bottom-right-radius:4px;border-bottom-left-radius:4px;padding:0 4px;line-height:19px;transition:transform .2s linear;position:absolute;overflow:hidden;transform:translateY(calc(-100% - 10px))}.monaco-workbench.reduce-motion .monaco-editor .find-widget{transition:transform linear}.monaco-editor .find-widget textarea{margin:0}.monaco-editor .find-widget.hiddenEditor{display:none}.monaco-editor .find-widget.replaceToggled>.replace-part{display:flex}.monaco-editor .find-widget.visible{transform:translateY(0)}.monaco-editor .find-widget .monaco-inputbox.synthetic-focus{outline:1px solid -webkit-focus-ring-color;outline-offset:-1px;outline-color:var(--vscode-focusBorder)}.monaco-editor .find-widget .monaco-inputbox .input{background-color:transparent;min-height:0}.monaco-editor .find-widget .monaco-findInput .input{font-size:13px}.monaco-editor .find-widget>.find-part,.monaco-editor .find-widget>.replace-part{margin:3px 25px 0 17px;font-size:12px;display:flex}.monaco-editor .find-widget>.find-part .monaco-inputbox,.monaco-editor .find-widget>.replace-part .monaco-inputbox{min-height:25px}.monaco-editor .find-widget>.replace-part .monaco-inputbox>.ibwrapper>.mirror{padding-right:22px}.monaco-editor .find-widget>.find-part .monaco-inputbox>.ibwrapper>.input,.monaco-editor .find-widget>.find-part .monaco-inputbox>.ibwrapper>.mirror,.monaco-editor .find-widget>.replace-part .monaco-inputbox>.ibwrapper>.input,.monaco-editor .find-widget>.replace-part .monaco-inputbox>.ibwrapper>.mirror{padding-top:2px;padding-bottom:2px}.monaco-editor .find-widget>.find-part .find-actions,.monaco-editor .find-widget>.replace-part .replace-actions{align-items:center;height:25px;display:flex}.monaco-editor .find-widget .monaco-findInput{vertical-align:middle;flex:1;display:flex}.monaco-editor .find-widget .monaco-findInput .monaco-scrollable-element{width:100%}.monaco-editor .find-widget .monaco-findInput .monaco-scrollable-element .scrollbar.vertical{opacity:0}.monaco-editor .find-widget .matchesCount{flex:initial;vertical-align:middle;box-sizing:border-box;text-align:center;height:25px;margin:0 0 0 3px;padding:2px 0 0 2px;line-height:23px;display:flex}.monaco-editor .find-widget .button{flex:initial;cursor:pointer;background-position:50%;background-repeat:no-repeat;border-radius:5px;justify-content:center;align-items:center;width:16px;height:16px;margin-left:3px;padding:3px;display:flex}.monaco-editor .find-widget .codicon-find-selection{border-radius:5px;width:22px;height:22px;padding:3px}.monaco-editor .find-widget .button.left{margin-left:0;margin-right:3px}.monaco-editor .find-widget .button.wide{width:auto;padding:1px 6px;top:-1px}.monaco-editor .find-widget .button.toggle{box-sizing:border-box;border-radius:0;width:18px;height:100%;position:absolute;top:0;left:3px}.monaco-editor .find-widget .button.toggle.disabled{display:none}.monaco-editor .find-widget .disabled{color:var(--vscode-disabledForeground);cursor:default}.monaco-editor .find-widget>.replace-part{display:none}.monaco-editor .find-widget>.replace-part>.monaco-findInput{vertical-align:middle;flex:none;display:flex;position:relative}.monaco-editor .find-widget>.replace-part>.monaco-findInput>.controls{position:absolute;top:3px;right:2px}.monaco-editor .find-widget.reduced-find-widget .matchesCount{display:none}.monaco-editor .find-widget.narrow-find-widget{max-width:257px!important}.monaco-editor .find-widget.collapsed-find-widget{max-width:170px!important}.monaco-editor .find-widget.collapsed-find-widget .button.previous,.monaco-editor .find-widget.collapsed-find-widget .button.next,.monaco-editor .find-widget.collapsed-find-widget .button.replace,.monaco-editor .find-widget.collapsed-find-widget .button.replace-all,.monaco-editor .find-widget.collapsed-find-widget>.find-part .monaco-findInput .controls{display:none}.monaco-editor .find-widget.no-results .matchesCount{color:var(--vscode-errorForeground)}.monaco-editor .findMatch{animation-duration:0;background-color:var(--vscode-editor-findMatchHighlightBackground);animation-name:inherit!important}.monaco-editor .currentFindMatch{background-color:var(--vscode-editor-findMatchBackground);border:2px solid var(--vscode-editor-findMatchBorder);box-sizing:border-box;padding:1px}.monaco-editor .findScope{background-color:var(--vscode-editor-findRangeHighlightBackground)}.monaco-editor .find-widget .monaco-sash{background-color:var(--vscode-editorWidget-resizeBorder,var(--vscode-editorWidget-border));left:0!important}.monaco-editor.hc-black .find-widget .button:before{position:relative;top:1px;left:2px}.monaco-editor .find-widget .button:not(.disabled):hover,.monaco-editor .find-widget .codicon-find-selection:hover{background-color:var(--vscode-toolbar-hoverBackground)!important}.monaco-editor.currentFindMatch{background-color:var(--vscode-editor-findMatchBackground)}.monaco-editor.findScope{background-color:var(--vscode-editor-findRangeHighlightBackground)}.monaco-editor.findMatch{background-color:var(--vscode-editorWidget-background)}.monaco-editor .find-widget>.button.codicon-widget-close{position:absolute;top:5px;right:4px}.monaco-editor .margin-view-overlays .codicon-folding-manual-collapsed,.monaco-editor .margin-view-overlays .codicon-folding-manual-expanded,.monaco-editor .margin-view-overlays .codicon-folding-expanded,.monaco-editor .margin-view-overlays .codicon-folding-collapsed{cursor:pointer;opacity:0;justify-content:center;align-items:center;margin-left:2px;font-size:140%;transition:opacity .5s;display:flex}.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-manual-collapsed,.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-manual-expanded,.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-expanded,.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-collapsed{transition:initial}.monaco-editor .margin-view-overlays:hover .codicon,.monaco-editor .margin-view-overlays .codicon.codicon-folding-collapsed,.monaco-editor .margin-view-overlays .codicon.codicon-folding-manual-collapsed,.monaco-editor .margin-view-overlays .codicon.alwaysShowFoldIcons{opacity:1}.monaco-editor .inline-folded:after{color:var(--vscode-editor-foldPlaceholderForeground);content:"⋯";cursor:pointer;margin:.1em .2em 0;line-height:1em;display:inline}.monaco-editor .folded-background{background-color:var(--vscode-editor-foldBackground)}.monaco-editor .cldr.codicon.codicon-folding-expanded,.monaco-editor .cldr.codicon.codicon-folding-collapsed,.monaco-editor .cldr.codicon.codicon-folding-manual-expanded,.monaco-editor .cldr.codicon.codicon-folding-manual-collapsed{color:var(--vscode-editorGutter-foldingControlForeground)!important}.monaco-editor .suggest-preview-additional-widget{white-space:nowrap}.monaco-editor .suggest-preview-additional-widget .content-spacer{color:transparent;white-space:pre}.monaco-editor .suggest-preview-additional-widget .button{cursor:pointer;text-underline-position:under;text-decoration:underline;display:inline-block}.monaco-editor .ghost-text-hidden{opacity:0;font-size:0}.monaco-editor .ghost-text-decoration,.monaco-editor .suggest-preview-text .ghost-text{font-style:italic}.monaco-editor .ghost-text-decoration,.monaco-editor .ghost-text-decoration-preview,.monaco-editor .suggest-preview-text .ghost-text{background-color:var(--vscode-editorGhostText-background);border:1px solid var(--vscode-editorGhostText-border);color:var(--vscode-editorGhostText-foreground)!important}.monaco-editor .snippet-placeholder{background-color:var(--vscode-editor-snippetTabstopHighlightBackground,transparent);outline-width:1px;outline-style:solid;outline-color:var(--vscode-editor-snippetTabstopHighlightBorder,transparent);min-width:2px}.monaco-editor .finish-snippet-placeholder{background-color:var(--vscode-editor-snippetFinalTabstopHighlightBackground,transparent);outline-width:1px;outline-style:solid;outline-color:var(--vscode-editor-snippetFinalTabstopHighlightBorder,transparent)}.monaco-editor .suggest-widget{z-index:40;border-radius:3px;flex-direction:column;width:430px;display:flex}.monaco-editor .suggest-widget.message{flex-direction:row;align-items:center}.monaco-editor .suggest-widget,.monaco-editor .suggest-details{border-style:solid;border-width:1px;border-color:var(--vscode-editorSuggestWidget-border);background-color:var(--vscode-editorSuggestWidget-background);flex:0 auto;width:100%}.monaco-editor.hc-black .suggest-widget,.monaco-editor.hc-black .suggest-details,.monaco-editor.hc-light .suggest-widget,.monaco-editor.hc-light .suggest-details{border-width:2px}.monaco-editor .suggest-widget .suggest-status-bar{box-sizing:border-box;border-top:1px solid var(--vscode-editorSuggestWidget-border);flex-flow:row;justify-content:space-between;width:100%;padding:0 4px;font-size:80%;display:none;overflow:hidden}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar{display:flex}.monaco-editor .suggest-widget .suggest-status-bar .left{padding-right:8px}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-label{color:var(--vscode-editorSuggestWidgetStatus-foreground)}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-item:not(:last-of-type) .action-label{margin-right:0}.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-item:not(:last-of-type) .action-label:after{content:", ";margin-right:.3em}.monaco-editor .suggest-widget.with-status-bar .monaco-list .monaco-list-row>.contents>.main>.right>.readMore,.monaco-editor .suggest-widget.with-status-bar .monaco-list .monaco-list-row.focused.string-label>.contents>.main>.right>.readMore{display:none}.monaco-editor .suggest-widget.with-status-bar:not(.docs-side) .monaco-list .monaco-list-row:hover>.contents>.main>.right.can-expand-details>.details-label{width:100%}.monaco-editor .suggest-widget>.message{padding-left:22px}.monaco-editor .suggest-widget>.tree{width:100%;height:100%}.monaco-editor .suggest-widget .monaco-list{user-select:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row{-mox-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;cursor:pointer;touch-action:none;background-position:2px 2px;background-repeat:no-repeat;padding-right:10px;display:flex}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused{color:var(--vscode-editorSuggestWidget-selectedForeground)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .codicon{color:var(--vscode-editorSuggestWidget-selectedIconForeground)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents{flex:1;height:100%;padding-left:2px;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main{text-overflow:ellipsis;white-space:pre;justify-content:space-between;display:flex;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left,.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right{display:flex}.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.focused)>.contents>.main .monaco-icon-label{color:var(--vscode-editorSuggestWidget-foreground)}.monaco-editor .suggest-widget:not(.frozen) .monaco-highlighted-label .highlight{font-weight:700}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main .monaco-highlighted-label .highlight{color:var(--vscode-editorSuggestWidget-highlightForeground)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused>.contents>.main .monaco-highlighted-label .highlight{color:var(--vscode-editorSuggestWidget-focusHighlightForeground)}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close,.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore:before{color:inherit;opacity:1;cursor:pointer;font-size:14px}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close{position:absolute;top:6px;right:2px}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close:hover,.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore:hover{opacity:1}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label{opacity:.7}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.signature-label{text-overflow:ellipsis;opacity:.6;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.qualifier-label{opacity:.4;font-size:85%;line-height:initial;text-overflow:ellipsis;align-self:center;margin-left:12px;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label{text-overflow:ellipsis;white-space:nowrap;margin-left:1.1em;font-size:85%;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label>.monaco-tokenized-source{display:inline}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label{display:none}.monaco-editor .suggest-widget:not(.shows-details) .monaco-list .monaco-list-row.focused>.contents>.main>.right>.details-label,.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.string-label)>.contents>.main>.right>.details-label,.monaco-editor .suggest-widget.docs-side .monaco-list .monaco-list-row.focused:not(.string-label)>.contents>.main>.right>.details-label{display:inline}.monaco-editor .suggest-widget:not(.docs-side) .monaco-list .monaco-list-row.focused:hover>.contents>.main>.right.can-expand-details>.details-label{width:calc(100% - 26px)}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left{flex-grow:1;flex-shrink:1;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.monaco-icon-label{flex-shrink:0}.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.string-label)>.contents>.main>.left>.monaco-icon-label{max-width:100%}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.string-label>.contents>.main>.left>.monaco-icon-label{flex-shrink:1}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right{flex-shrink:4;max-width:70%;overflow:hidden}.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore{visibility:hidden;width:18px;height:18px;display:inline-block;position:absolute;right:10px}.monaco-editor .suggest-widget.docs-side .monaco-list .monaco-list-row>.contents>.main>.right>.readMore{display:none!important}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.string-label>.contents>.main>.right>.readMore{display:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused.string-label>.contents>.main>.right>.readMore{display:inline-block}.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused:hover>.contents>.main>.right>.readMore{visibility:visible}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label.deprecated{opacity:.66;text-decoration:unset}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label.deprecated>.monaco-icon-label-container>.monaco-icon-name-container{text-decoration:line-through}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label:before{height:100%}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon{background-position:50%;background-repeat:no-repeat;background-size:80%;width:16px;height:16px;margin-left:2px;display:block}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon.hide{display:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .suggest-icon{align-items:center;margin-right:4px;display:flex}.monaco-editor .suggest-widget.no-icons .monaco-list .monaco-list-row .icon,.monaco-editor .suggest-widget.no-icons .monaco-list .monaco-list-row .suggest-icon:before{display:none}.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon.customcolor .colorspan{border:.1em solid #000;width:.7em;height:.7em;margin:0 0 0 .3em;display:inline-block}.monaco-editor .suggest-details-container{z-index:41}.monaco-editor .suggest-details{cursor:default;color:var(--vscode-editorSuggestWidget-foreground);flex-direction:column;display:flex}.monaco-editor .suggest-details.focused{border-color:var(--vscode-focusBorder)}.monaco-editor .suggest-details a{color:var(--vscode-textLink-foreground)}.monaco-editor .suggest-details a:hover{color:var(--vscode-textLink-activeForeground)}.monaco-editor .suggest-details code{background-color:var(--vscode-textCodeBlock-background)}.monaco-editor .suggest-details.no-docs{display:none}.monaco-editor .suggest-details>.monaco-scrollable-element{flex:1}.monaco-editor .suggest-details>.monaco-scrollable-element>.body{box-sizing:border-box;width:100%;height:100%}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.type{text-overflow:ellipsis;opacity:.7;white-space:pre;flex:2;margin:0 24px 0 0;padding:4px 0 12px 5px;overflow:hidden}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.type.auto-wrap{white-space:normal;word-break:break-all}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs{white-space:pre-wrap;margin:0;padding:4px 5px}.monaco-editor .suggest-details.no-type>.monaco-scrollable-element>.body>.docs{margin-right:24px;overflow:hidden}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs{white-space:initial;min-height:calc(1rem + 8px);padding:0}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div,.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>span:not(:empty){padding:4px 5px}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div>p:first-child{margin-top:0}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div>p:last-child{margin-bottom:0}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs .monaco-tokenized-source{white-space:pre}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs .code{white-space:pre-wrap;word-wrap:break-word}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs .codicon{vertical-align:sub}.monaco-editor .suggest-details>.monaco-scrollable-element>.body>p:empty{display:none}.monaco-editor .suggest-details code{border-radius:3px;padding:0 .4em}.monaco-editor .suggest-details ul,.monaco-editor .suggest-details ol{padding-left:20px}.monaco-editor .suggest-details p code{font-family:var(--monaco-monospace-font)}.monaco-editor .goto-definition-link{cursor:pointer;text-decoration:underline;color:var(--vscode-editorLink-activeForeground)!important}.monaco-editor .peekview-widget .head .peekview-title .severity-icon{vertical-align:text-top;margin-right:4px;display:inline-block}.monaco-editor .marker-widget{text-overflow:ellipsis;white-space:nowrap}.monaco-editor .marker-widget>.stale{opacity:.6;font-style:italic}.monaco-editor .marker-widget .title{padding-right:5px;display:inline-block}.monaco-editor .marker-widget .descriptioncontainer{white-space:pre;user-select:text;padding:8px 12px 0 20px;position:absolute}.monaco-editor .marker-widget .descriptioncontainer .message{flex-direction:column;display:flex}.monaco-editor .marker-widget .descriptioncontainer .message .details{padding-left:6px}.monaco-editor .marker-widget .descriptioncontainer .message .source,.monaco-editor .marker-widget .descriptioncontainer .message span.code{opacity:.6}.monaco-editor .marker-widget .descriptioncontainer .message a.code-link{opacity:.6;color:inherit}.monaco-editor .marker-widget .descriptioncontainer .message a.code-link:before{content:"("}.monaco-editor .marker-widget .descriptioncontainer .message a.code-link:after{content:")"}.monaco-editor .marker-widget .descriptioncontainer .message a.code-link>span{text-underline-position:under;color:var(--vscode-textLink-activeForeground);border-bottom:1px solid transparent;text-decoration:underline}.monaco-editor .marker-widget .descriptioncontainer .filename{cursor:pointer;color:var(--vscode-textLink-activeForeground)}.monaco-editor .zone-widget .codicon.codicon-error,.markers-panel .marker-icon.error,.markers-panel .marker-icon .codicon.codicon-error,.text-search-provider-messages .providerMessage .codicon.codicon-error,.extensions-viewlet>.extensions .codicon.codicon-error,.extension-editor .codicon.codicon-error,.preferences-editor .codicon.codicon-error{color:var(--vscode-problemsErrorIcon-foreground)}.monaco-editor .zone-widget .codicon.codicon-warning,.markers-panel .marker-icon.warning,.markers-panel .marker-icon .codicon.codicon-warning,.text-search-provider-messages .providerMessage .codicon.codicon-warning,.extensions-viewlet>.extensions .codicon.codicon-warning,.extension-editor .codicon.codicon-warning,.preferences-editor .codicon.codicon-warning{color:var(--vscode-problemsWarningIcon-foreground)}.monaco-editor .zone-widget .codicon.codicon-info,.markers-panel .marker-icon.info,.markers-panel .marker-icon .codicon.codicon-info,.text-search-provider-messages .providerMessage .codicon.codicon-info,.extensions-viewlet>.extensions .codicon.codicon-info,.extension-editor .codicon.codicon-info,.preferences-editor .codicon.codicon-info{color:var(--vscode-problemsInfoIcon-foreground)}.monaco-editor.vs .valueSetReplacement{outline:solid 2px var(--vscode-editorBracketMatch-border)}.monaco-editor .linked-editing-decoration{background-color:var(--vscode-editor-linkedEditingBackground);min-width:1px}.monaco-editor .detected-link,.monaco-editor .detected-link-active{text-underline-position:under;text-decoration:underline}.monaco-editor .detected-link-active{cursor:pointer;color:var(--vscode-editorLink-activeForeground)!important}.monaco-editor .focused .selectionHighlight{background-color:var(--vscode-editor-selectionHighlightBackground);box-sizing:border-box;border:1px solid var(--vscode-editor-selectionHighlightBorder)}.monaco-editor.hc-black .focused .selectionHighlight,.monaco-editor.hc-light .focused .selectionHighlight{border-style:dotted}.monaco-editor .wordHighlight{background-color:var(--vscode-editor-wordHighlightBackground);box-sizing:border-box;border:1px solid var(--vscode-editor-wordHighlightBorder)}.monaco-editor.hc-black .wordHighlight,.monaco-editor.hc-light .wordHighlight{border-style:dotted}.monaco-editor .wordHighlightStrong{background-color:var(--vscode-editor-wordHighlightStrongBackground);box-sizing:border-box;border:1px solid var(--vscode-editor-wordHighlightStrongBorder)}.monaco-editor.hc-black .wordHighlightStrong,.monaco-editor.hc-light .wordHighlightStrong{border-style:dotted}.monaco-editor .wordHighlightText{background-color:var(--vscode-editor-wordHighlightTextBackground);box-sizing:border-box;border:1px solid var(--vscode-editor-wordHighlightTextBorder)}.monaco-editor.hc-black .wordHighlightText,.monaco-editor.hc-light .wordHighlightText{border-style:dotted}.monaco-editor .inline-edit-remove{background-color:var(--vscode-editorGhostText-background);font-style:italic}.monaco-editor .inline-edit-hidden{opacity:0;font-size:0}.monaco-editor .inline-edit-decoration,.monaco-editor .suggest-preview-text .inline-edit{font-style:italic}.monaco-editor .inline-completion-text-to-replace{text-underline-position:under;text-decoration:underline}.monaco-editor .inline-edit-decoration,.monaco-editor .inline-edit-decoration-preview,.monaco-editor .suggest-preview-text .inline-edit{background-color:var(--vscode-editorGhostText-background);border:1px solid var(--vscode-editorGhostText-border);color:var(--vscode-editorGhostText-foreground)!important}.monaco-editor .inlineEditHints.withBorder{z-index:39;color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border)}.monaco-editor .inlineEditHints a,.monaco-editor .inlineEditHints a:hover{color:var(--vscode-foreground)}.monaco-editor .inlineEditHints .keybinding{opacity:.6;margin-left:4px;display:flex}.monaco-editor .inlineEditHints .keybinding .monaco-keybinding-key{padding:2px 3px;font-size:8px}.monaco-editor .inlineEditStatusBarItemLabel{margin-right:2px}.monaco-editor .inlineEditSideBySide{z-index:39;color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border);white-space:pre}.monaco-editor div.inline-edits-widget{--widget-color:var(--vscode-notifications-background)}.monaco-editor div.inline-edits-widget .promptEditor .monaco-editor{--vscode-editor-placeholder-foreground:var(--vscode-editorGhostText-foreground)}.monaco-editor div.inline-edits-widget .toolbar{opacity:0;transition:opacity .2s ease-in-out}.monaco-editor div.inline-edits-widget .promptEditor{opacity:0;transition:opacity .2s ease-in-out}.monaco-editor div.inline-edits-widget:hover .toolbar{opacity:1}.monaco-editor div.inline-edits-widget:hover .promptEditor{opacity:1}.monaco-editor div.inline-edits-widget.focused .toolbar{opacity:1}.monaco-editor div.inline-edits-widget.focused .promptEditor{opacity:1}.monaco-editor div.inline-edits-widget .preview .monaco-editor{--vscode-editor-background:var(--widget-color)}.monaco-editor div.inline-edits-widget .preview .monaco-editor .mtk1{color:var(--vscode-editorGhostText-foreground)}.monaco-editor div.inline-edits-widget .preview .monaco-editor .view-overlays .current-line-exact{border:none}.monaco-editor div.inline-edits-widget .preview .monaco-editor .current-line-margin{border:none}.monaco-editor div.inline-edits-widget svg .gradient-start{stop-color:var(--vscode-editor-background)}.monaco-editor div.inline-edits-widget svg .gradient-stop{stop-color:var(--widget-color)}.monaco-editor .parameter-hints-widget{z-index:39;cursor:default;color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border);flex-direction:column;line-height:1.5em;display:flex}.hc-black .monaco-editor .parameter-hints-widget,.hc-light .monaco-editor .parameter-hints-widget{border-width:2px}.monaco-editor .parameter-hints-widget>.phwrapper{flex-direction:row;max-width:440px;display:flex}.monaco-editor .parameter-hints-widget.multiple{min-height:3.3em;padding:0}.monaco-editor .parameter-hints-widget.multiple .body:before{content:"";opacity:.5;border-left:1px solid var(--vscode-editorHoverWidget-border);height:100%;display:block;position:absolute}.monaco-editor .parameter-hints-widget p,.monaco-editor .parameter-hints-widget ul{margin:8px 0}.monaco-editor .parameter-hints-widget .monaco-scrollable-element,.monaco-editor .parameter-hints-widget .body{flex-direction:column;flex:1;min-height:100%;display:flex}.monaco-editor .parameter-hints-widget .signature{padding:4px 5px;position:relative}.monaco-editor .parameter-hints-widget .signature.has-docs:after{content:"";opacity:.5;border-bottom:1px solid var(--vscode-editorHoverWidget-border);width:100%;padding-top:4px;display:block;position:absolute;left:0}.monaco-editor .parameter-hints-widget .code{font-family:var(--vscode-parameterHintsWidget-editorFontFamily),var(--vscode-parameterHintsWidget-editorFontFamilyDefault)}.monaco-editor .parameter-hints-widget .docs{white-space:pre-wrap;padding:0 10px 0 5px}.monaco-editor .parameter-hints-widget .docs.empty{display:none}.monaco-editor .parameter-hints-widget .docs a{color:var(--vscode-textLink-foreground)}.monaco-editor .parameter-hints-widget .docs a:hover{color:var(--vscode-textLink-activeForeground);cursor:pointer}.monaco-editor .parameter-hints-widget .docs .markdown-docs{white-space:initial}.monaco-editor .parameter-hints-widget .docs code{font-family:var(--monaco-monospace-font);background-color:var(--vscode-textCodeBlock-background);border-radius:3px;padding:0 .4em}.monaco-editor .parameter-hints-widget .docs .monaco-tokenized-source,.monaco-editor .parameter-hints-widget .docs .code{white-space:pre-wrap}.monaco-editor .parameter-hints-widget .controls{flex-direction:column;justify-content:flex-end;align-items:center;min-width:22px;display:none}.monaco-editor .parameter-hints-widget.multiple .controls{padding:0 2px;display:flex}.monaco-editor .parameter-hints-widget.multiple .button{cursor:pointer;background-repeat:no-repeat;width:16px;height:16px}.monaco-editor .parameter-hints-widget .button.previous{bottom:24px}.monaco-editor .parameter-hints-widget .overloads{text-align:center;height:12px;line-height:12px;font-family:var(--monaco-monospace-font)}.monaco-editor .parameter-hints-widget .signature .parameter.active{color:var(--vscode-editorHoverWidget-highlightForeground);font-weight:700}.monaco-editor .parameter-hints-widget .documentation-parameter>.parameter{margin-right:.5em;font-weight:700}.monaco-editor{--vscode-editor-placeholder-foreground:var(--vscode-editorGhostText-foreground)}.monaco-editor .editorPlaceholder{text-overflow:ellipsis;text-wrap:nowrap;pointer-events:none;color:var(--vscode-editor-placeholder-foreground);position:absolute;top:0;overflow:hidden}.monaco-editor .rename-box{z-index:100;color:inherit;border-radius:4px}.monaco-editor .rename-box.preview{padding:4px 4px 0}.monaco-editor .rename-box .rename-input-with-button{border-radius:2px;width:calc(100% - 8px);padding:3px}.monaco-editor .rename-box .rename-input{width:calc(100% - 8px);padding:0}.monaco-editor .rename-box .rename-input:focus{outline:none}.monaco-editor .rename-box .rename-suggestions-button{cursor:pointer;background-color:transparent;border:none;border-radius:5px;align-items:center;padding:3px;display:flex}.monaco-editor .rename-box .rename-suggestions-button:hover{background-color:var(--vscode-toolbar-hoverBackground)}.monaco-editor .rename-box .rename-candidate-list-container .monaco-list-row{border-radius:2px}.monaco-editor .rename-box .rename-label{opacity:.8;display:none}.monaco-editor .rename-box.preview .rename-label{display:inherit}.monaco-editor .sticky-widget{overflow:hidden}.monaco-editor .sticky-widget-line-numbers{float:left;background-color:inherit}.monaco-editor .sticky-widget-lines-scrollable{width:var(--vscode-editorStickyScroll-scrollableWidth);background-color:inherit;display:inline-block;position:absolute;overflow:hidden}.monaco-editor .sticky-widget-lines{background-color:inherit;position:absolute}.monaco-editor .sticky-line-number,.monaco-editor .sticky-line-content{color:var(--vscode-editorLineNumber-foreground);white-space:nowrap;background-color:inherit;display:inline-block;position:absolute}.monaco-editor .sticky-line-number .codicon-folding-expanded,.monaco-editor .sticky-line-number .codicon-folding-collapsed{float:right;transition:var(--vscode-editorStickyScroll-foldingOpacityTransition)}.monaco-editor .sticky-line-content{width:var(--vscode-editorStickyScroll-scrollableWidth);background-color:inherit;white-space:nowrap}.monaco-editor .sticky-line-number-inner{text-align:right;display:inline-block}.monaco-editor .sticky-widget{border-bottom:1px solid var(--vscode-editorStickyScroll-border)}.monaco-editor .sticky-line-content:hover{background-color:var(--vscode-editorStickyScrollHover-background);cursor:pointer}.monaco-editor .sticky-widget{width:100%;box-shadow:var(--vscode-editorStickyScroll-shadow)0 4px 2px -2px;z-index:4;background-color:var(--vscode-editorStickyScroll-background);right:initial!important}.monaco-editor .sticky-widget.peek{background-color:var(--vscode-peekViewEditorStickyScroll-background)}.monaco-editor .unicode-highlight{border:1px solid var(--vscode-editorUnicodeHighlight-border);background-color:var(--vscode-editorUnicodeHighlight-background);box-sizing:border-box}.editor-banner{box-sizing:border-box;cursor:default;background:var(--vscode-banner-background);width:100%;height:26px;font-size:12px;display:flex;overflow:visible}.editor-banner .icon-container{flex-shrink:0;align-items:center;padding:0 6px 0 10px;display:flex}.editor-banner .icon-container.custom-icon{background-position:50%;background-repeat:no-repeat;background-size:16px;width:16px;margin:0 6px 0 10px;padding:0}.editor-banner .message-container{text-overflow:ellipsis;white-space:nowrap;align-items:center;line-height:26px;display:flex;overflow:hidden}.editor-banner .message-container p{margin-top:0;margin-bottom:0}.editor-banner .message-actions-container{flex-grow:1;flex-shrink:0;margin:0 4px;line-height:26px}.editor-banner .message-actions-container a.monaco-button{width:inherit;margin:2px 8px;padding:0 12px}.editor-banner .message-actions-container a{margin-left:12px;padding:3px;text-decoration:underline}.editor-banner .action-container{padding:0 10px 0 6px}.editor-banner{background-color:var(--vscode-banner-background)}.editor-banner,.editor-banner .action-container .codicon,.editor-banner .message-actions-container .monaco-link{color:var(--vscode-banner-foreground)}.editor-banner .icon-container .codicon{color:var(--vscode-banner-iconForeground)}.monaco-link{color:var(--vscode-textLink-foreground)}.monaco-link:hover{color:var(--vscode-textLink-activeForeground)}.monaco-editor .iPadShowKeyboard{resize:none;background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjNDI0MjQyIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==) 50% no-repeat;border:4px solid #f6f6f6;border-radius:4px;width:58px;min-width:0;height:36px;min-height:0;margin:0;padding:0;position:absolute;overflow:hidden}.monaco-editor.vs-dark .iPadShowKeyboard{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjQzVDNUM1Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==) 50% no-repeat;border:4px solid #252526}.monaco-editor .tokens-inspect-widget{z-index:50;user-select:text;color:var(--vscode-editorHoverWidget-foreground);background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border);padding:10px}.monaco-editor.hc-black .tokens-inspect-widget,.monaco-editor.hc-light .tokens-inspect-widget{border-width:2px}.monaco-editor .tokens-inspect-widget .tokens-inspect-separator{background-color:var(--vscode-editorHoverWidget-border);border:0;height:1px}.monaco-editor .tokens-inspect-widget .tm-token{font-family:var(--monaco-monospace-font)}.monaco-editor .tokens-inspect-widget .tm-token-length{float:right;font-size:60%;font-weight:400}.monaco-editor .tokens-inspect-widget .tm-metadata-table{width:100%}.monaco-editor .tokens-inspect-widget .tm-metadata-value{font-family:var(--monaco-monospace-font);text-align:right}.monaco-editor .tokens-inspect-widget .tm-token-type{font-family:var(--monaco-monospace-font)}\n/*$vite$:1*/',document.head.appendChild(Yn),e({a:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",i=t[n];if(void 0===i)throw new Error("[vueuc/".concat(e,"]: slot[").concat(n,"] is empty."));var r=pi(i());if(1===r.length)return r[0];throw new Error("[vueuc/".concat(e,"]: slot[").concat(n,"] should have exactly one child."))},b:ir,c:Ji,e:nr,f:Pi,g:vi,i:Zi,j:Ri,k:fr,l:Oi,n:Qn,t:tr});var $n=e("d",ae("n-drawer-body")),Jn=ae("n-drawer"),ei=e("m",ae("n-modal-body")),ti=e("p",ae("n-popover-body"));function ni(e,t,n){var i,r=d(e,null);if(null!==r){var o=null===(i=m())||void 0===i?void 0:i.proxy;a(n,s),s(n.value),y((function(){s(void 0,n.value)}))}function s(e,n){if(r){var i=r[t];void 0!==n&&function(e,t){e[t]||(e[t]=[]);e[t].splice(e[t].findIndex((function(e){return e===o})),1)}(i,n),void 0!==e&&function(e,t){e[t]||(e[t]=[]);~e[t].findIndex((function(e){return e===o}))||e[t].push(o)}(i,e)}}}var ii=n(!1);function ri(){ii.value=!0}function oi(){ii.value=!1}var ai=0;function si(){return se&&(w((function(){ai||(window.addEventListener("compositionstart",ri),window.addEventListener("compositionend",oi)),ai++})),y((function(){ai<=1?(window.removeEventListener("compositionstart",ri),window.removeEventListener("compositionend",oi),ai=0):ai--}))),ii}var li=0,ui="",ci="",di="",hi="",fi=n("0px");function gi(e){if("undefined"!=typeof document){var t,n=document.documentElement,i=!1,r=function(){n.style.marginRight=ui,n.style.overflow=ci,n.style.overflowX=di,n.style.overflowY=hi,fi.value="0px"};D((function(){t=a(e,(function(e){if(e){if(!li){var t=window.innerWidth-n.offsetWidth;t>0&&(ui=n.style.marginRight,n.style.marginRight="".concat(t,"px"),fi.value="".concat(t,"px")),ci=n.style.overflow,di=n.style.overflowX,hi=n.style.overflowY,n.style.overflow="hidden",n.style.overflowX="hidden",n.style.overflowY="hidden"}i=!0,li++}else--li||r(),i=!1}),{immediate:!0})})),y((function(){null==t||t(),i&&(--li||r(),i=!1)}))}}function vi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",i=t[n];if(void 0===i)throw new Error("[vueuc/".concat(e,"]: slot[").concat(n,"] is empty."));return i()}function pi(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.forEach((function(e){if(null!==e)if("object"===(void 0===e?"undefined":L(e)))if(Array.isArray(e))pi(e,t,n);else if(e.type===T){if(null===e.children)return;Array.isArray(e.children)&&pi(e.children,t,n)}else e.type!==R&&n.push(e);else"string"!=typeof e&&"number"!=typeof e||n.push(I(String(e)))})),n}var mi="@@coContext",yi=e("h",{mounted:function(e,t){var n=t.value,i=t.modifiers;e[mi]={handler:void 0},"function"==typeof n&&(e[mi].handler=n,le("clickoutside",e,n,{capture:i.capture}))},updated:function(e,t){var n=t.value,i=t.modifiers,r=e[mi];"function"==typeof n?r.handler?r.handler!==n&&(ue("clickoutside",e,r.handler,{capture:i.capture}),r.handler=n,le("clickoutside",e,n,{capture:i.capture})):(e[mi].handler=n,le("clickoutside",e,n,{capture:i.capture})):r.handler&&(ue("clickoutside",e,r.handler,{capture:i.capture}),r.handler=void 0)},unmounted:function(e,t){var n=t.modifiers,i=e[mi].handler;i&&ue("clickoutside",e,i,{capture:n.capture}),e[mi].handler=void 0}});var _i=function(){function e(){u(this,e),this.elementZIndex=new Map,this.nextZIndex=2e3}return h(e,[{key:"elementCount",get:function(){return this.elementZIndex.size}},{key:"ensureZIndex",value:function(e,t){var n=this.elementZIndex;if(void 0!==t)return e.style.zIndex="".concat(t),void n.delete(e);var i=this.nextZIndex;if(n.has(e)&&n.get(e)+1===this.nextZIndex)return;e.style.zIndex="".concat(i),n.set(e,i),this.nextZIndex=i+1,this.squashState()}},{key:"unregister",value:function(e,t){var n=this.elementZIndex;n.has(e)?n.delete(e):void 0===t&&function(e,t){console.error("[vdirs/".concat(e,"]: ").concat(t))}("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}},{key:"squashState",value:function(){var e=this.elementCount;e||(this.nextZIndex=2e3),this.nextZIndex-e>2500&&this.rearrange()}},{key:"rearrange",value:function(){var e=this,t=Array.from(this.elementZIndex.entries());t.sort((function(e,t){return e[1]-t[1]})),this.nextZIndex=2e3,t.forEach((function(t){var n=t[0],i=e.nextZIndex++;"".concat(i)!==n.style.zIndex&&(n.style.zIndex="".concat(i))}))}}]),e}(),bi=new _i,ki="@@ziContext",wi=e("z",{mounted:function(e,t){var n=t.value,i=void 0===n?{}:n,r=i.zIndex,o=i.enabled;e[ki]={enabled:!!o,initialized:!1},o&&(bi.ensureZIndex(e,r),e[ki].initialized=!0)},updated:function(e,t){var n=t.value,i=void 0===n?{}:n,r=i.zIndex,o=i.enabled,a=e[ki].enabled;o&&!a&&(bi.ensureZIndex(e,r),e[ki].initialized=!0),e[ki].enabled=!!o},unmounted:function(e,t){if(e[ki].initialized){var n=t.value,i=(void 0===n?{}:n).zIndex;bi.unregister(e,i)}}});function Ci(e){return"string"==typeof e?document.querySelector(e):e()}var Si=e("L",A({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup:function(e){return{showTeleport:Xn(P(e,"show")),mergedTo:O((function(){var t=e.to;return null!=t?t:"body"}))}},render:function(){return this.showTeleport?this.disabled?vi("lazy-teleport",this.$slots):F(W,{disabled:this.disabled,to:this.mergedTo},vi("lazy-teleport",this.$slots)):null}}));function xi(e){return e instanceof HTMLElement}function Li(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(xi(n)&&(Ni(n)||Li(n)))return!0}return!1}function Di(e){for(var t=e.childNodes.length-1;t>=0;t--){var n=e.childNodes[t];if(xi(n)&&(Ni(n)||Di(n)))return!0}return!1}function Ni(e){if(!function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.getAttribute("disabled"))return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}(e))return!1;try{e.focus({preventScroll:!0})}catch(e){}return document.activeElement===e}var Ii=[],Ei=e("F",A({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup:function(e){var t=Qn(),i=n(null),r=n(null),o=!1,s=!1,l="undefined"==typeof document?null:document.activeElement;function u(){return Ii[Ii.length-1]===t}function c(t){var n;"Escape"===t.code&&u()&&(null===(n=e.onEsc)||void 0===n||n.call(e,t))}function d(e){if(!s&&u()){var t=h();if(null===t)return;if(t.contains(ce(e)))return;v("first")}}function h(){var e=i.value;if(null===e)return null;for(var t=e;null!==(t=t.nextSibling)&&!(t instanceof Element&&"DIV"===t.tagName););return t}function f(){var n;if(!e.disabled){if(Ii.push(t),e.autoFocus){var i=e.initialFocusTo;void 0===i?v("first"):null===(n=Ci(i))||void 0===n||n.focus({preventScroll:!0})}o=!0,document.addEventListener("focus",d,!0)}}function g(){var n;if(!e.disabled&&(document.removeEventListener("focus",d,!0),Ii=Ii.filter((function(e){return e!==t})),!u())){var i=e.finalFocusTo;void 0!==i?null===(n=Ci(i))||void 0===n||n.focus({preventScroll:!0}):e.returnFocusOnDeactivated&&l instanceof HTMLElement&&(s=!0,l.focus({preventScroll:!0}),s=!1)}}function v(t){if(u()&&e.active){var n=i.value,o=r.value;if(null!==n&&null!==o){var a=h();if(null==a||a===o)return s=!0,n.focus({preventScroll:!0}),void(s=!1);s=!0;var l="first"===t?Li(a):Di(a);s=!1,l||(s=!0,n.focus({preventScroll:!0}),s=!1)}}}return D((function(){a((function(){return e.active}),(function(e){e?(f(),le("keydown",document,c)):(ue("keydown",document,c),o&&g())}),{immediate:!0})})),y((function(){ue("keydown",document,c),o&&g()})),{focusableStartRef:i,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:function(e){if(!s){var t=h();null!==t&&(null!==e.relatedTarget&&t.contains(e.relatedTarget)?v("last"):v("first"))}},handleEndFocus:function(e){s||(null!==e.relatedTarget&&e.relatedTarget===i.value?v("last"):v("first"))}}},render:function(){var e=this.$slots.default;if(void 0===e)return null;if(this.disabled)return e();var t=this.active,n=this.focusableStyle;return F(T,null,[F("div",{"aria-hidden":"true",tabindex:t?"0":"-1",ref:"focusableStartRef",style:n,onFocus:this.handleStartFocus}),e(),F("div",{"aria-hidden":"true",style:n,ref:"focusableEndRef",tabindex:t?"0":"-1",onFocus:this.handleEndFocus})])}})),Mi=/^(\d|\.)+$/,Ti=/(\d|\.)+/;function Ri(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.c,i=void 0===n?1:n,r=t.offset,o=void 0===r?0:r,a=t.attachPx,s=void 0===a||a;if("number"==typeof e){var l=(e+o)*i;return 0===l?"0":"".concat(l,"px")}if("string"==typeof e){if(Mi.test(e)){var u=(Number(e)+o)*i;return s?0===u?"0":"".concat(u,"px"):"".concat(u)}var c=Ti.exec(e);return c?e.replace(Ti,String((Number(c[0])+o)*i)):e}return e}var Ai=new WeakSet;function Pi(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.forEach((function(e){if(null!==e)if("object"===(void 0===e?"undefined":L(e)))if(Array.isArray(e))Pi(e,t,n);else if(e.type===T){if(null===e.children)return;Array.isArray(e.children)&&Pi(e.children,t,n)}else{if(e.type===R&&t)return;n.push(e)}else"string"!=typeof e&&"number"!=typeof e||n.push(I(String(e)))})),n}function Oi(e){return Object.keys(e)}function Fi(e,t){var n=d(de,null);return O((function(){return e.hljs||(null==n?void 0:n.mergedHljsRef.value)}))}var Wi=/\s/;var Bi=/^\s+/;function Hi(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Wi.test(e.charAt(t)););return t}(e)+1).replace(Bi,""):e}var Vi=/^[-+]0x[0-9a-f]+$/i,zi=/^0b[01]+$/i,Ui=/^0o[0-7]+$/i,ji=parseInt;function Ki(e){if("number"==typeof e)return e;if(he(e))return NaN;if(fe(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=fe(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Hi(e);var n=zi.test(e);return n||Ui.test(e)?ji(e.slice(2),n?2:8):Vi.test(e)?NaN:+e}var qi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gi=/^\w*$/;function Zi(e,t){if(ge(e))return!1;var n=void 0===e?"undefined":L(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!he(e))||(Gi.test(e)||!qi.test(e)||null!=t&&e in Object(t))}function Yi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(Yi.Cache||ve),n}Yi.Cache=ve;var Qi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xi=/\\(\\)?/g,$i=function(e){var t=Yi(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Qi,(function(e,n,i,r){t.push(i?r.replace(Xi,"$1"):n||e)})),t}));function Ji(e,t){return ge(e)?e:Zi(e,t)?[e]:$i(pe(e))}var er=1/0;function tr(e){if("string"==typeof e||he(e))return e;var t=e+"";return"0"==t&&1/e==-er?"-0":t}function nr(e,t){for(var n=0,i=(t=Ji(t,e)).length;null!=e&&n<i;)e=e[tr(t[n++])];return n&&n==i?e:void 0}function ir(e,t,n){var i=null==e?void 0:nr(e,t);return void 0===i?n:i}var rr=function(){return me.Date.now()},or=Math.max,ar=Math.min;function sr(e,t,n){var i,r,o,a,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=i,o=r;return i=r=void 0,u=t,a=e.apply(o,n)}function g(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=o}function v(){var e=rr();if(g(e))return p(e);s=setTimeout(v,function(e){var n=t-(e-l);return d?ar(n,o-(e-u)):n}(e))}function p(e){return s=void 0,h&&i?f(e):(i=r=void 0,a)}function m(){var e=rr(),n=g(e);if(i=arguments,r=this,l=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(v,t),c?f(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(v,t),f(l)}return void 0===s&&(s=setTimeout(v,t)),a}return t=Ki(t)||0,fe(n)&&(c=!!n.leading,o=(d="maxWait"in n)?or(Ki(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},m.flush=function(){return void 0===s?a:p(rr())},m}var lr=ye("close",F("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0},F("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},F("g",{fill:"currentColor","fill-rule":"nonzero"},F("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),ur=_e("base-close","\n display: flex;\n align-items: center;\n justify-content: center;\n cursor: pointer;\n background-color: transparent;\n color: var(--n-close-icon-color);\n border-radius: var(--n-close-border-radius);\n height: var(--n-close-size);\n width: var(--n-close-size);\n font-size: var(--n-close-icon-size);\n outline: none;\n border: none;\n position: relative;\n padding: 0;\n",[be("absolute","\n height: var(--n-close-icon-size);\n width: var(--n-close-icon-size);\n "),ke("&::before",'\n content: "";\n position: absolute;\n width: var(--n-close-size);\n height: var(--n-close-size);\n left: 50%;\n top: 50%;\n transform: translateY(-50%) translateX(-50%);\n transition: inherit;\n border-radius: inherit;\n '),we("disabled",[ke("&:hover","\n color: var(--n-close-icon-color-hover);\n "),ke("&:hover::before","\n background-color: var(--n-close-color-hover);\n "),ke("&:focus::before","\n background-color: var(--n-close-color-hover);\n "),ke("&:active","\n color: var(--n-close-icon-color-pressed);\n "),ke("&:active::before","\n background-color: var(--n-close-color-pressed);\n ")]),be("disabled","\n cursor: not-allowed;\n color: var(--n-close-icon-color-disabled);\n background-color: transparent;\n "),be("round",[ke("&::before","\n border-radius: 50%;\n ")])]),cr=A({name:"BaseClose",props:{isButtonTag:{type:Boolean,default:!0},clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},focusable:{type:Boolean,default:!0},round:Boolean,onClick:Function,absolute:Boolean},setup:function(e){return Ce("-base-close",ur,P(e,"clsPrefix")),function(){var t=e.clsPrefix,n=e.disabled,i=e.absolute,r=e.round,o=e.isButtonTag;return F(o?"button":"div",{type:o?"button":void 0,tabindex:n||!e.focusable?-1:0,"aria-disabled":n,"aria-label":"close",role:o?void 0:"button",disabled:n,class:["".concat(t,"-base-close"),i&&"".concat(t,"-base-close--absolute"),n&&"".concat(t,"-base-close--disabled"),r&&"".concat(t,"-base-close--round")],onMousedown:function(t){e.focusable||t.preventDefault()},onClick:e.onClick},F(Se,{clsPrefix:t},{default:function(){return F(lr,null)}}))}}}),dr=xe.cubicBezierEaseIn,hr=xe.cubicBezierEaseOut;function fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.transformOrigin,n=void 0===t?"inherit":t,i=e.duration,r=void 0===i?".2s":i,o=e.enterScale,a=void 0===o?".9":o,s=e.originalTransform,l=void 0===s?"":s,u=e.originalTransition,c=void 0===u?"":u;return[ke("&.fade-in-scale-up-transition-leave-active",{transformOrigin:n,transition:"opacity ".concat(r," ").concat(dr,", transform ").concat(r," ").concat(dr," ").concat(c&&",".concat(c))}),ke("&.fade-in-scale-up-transition-enter-active",{transformOrigin:n,transition:"opacity ".concat(r," ").concat(hr,", transform ").concat(r," ").concat(hr," ").concat(c&&",".concat(c))}),ke("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:"".concat(l," scale(").concat(a,")")}),ke("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:"".concat(l," scale(1)")})]}var gr={closeIconSizeTiny:"12px",closeIconSizeSmall:"12px",closeIconSizeMedium:"14px",closeIconSizeLarge:"14px",closeSizeTiny:"16px",closeSizeSmall:"16px",closeSizeMedium:"18px",closeSizeLarge:"18px",padding:"0 7px",closeMargin:"0 0 0 4px"};var vr,pr={name:"Tag",common:Le,self:function(e){var t=e.textColor2,n=e.primaryColorHover,i=e.primaryColorPressed,r=e.primaryColor,o=e.infoColor,a=e.successColor,s=e.warningColor,l=e.errorColor,u=e.baseColor,c=e.borderColor,d=e.opacityDisabled,h=e.tagColor,f=e.closeIconColor,g=e.closeIconColorHover,v=e.closeIconColorPressed,p=e.borderRadiusSmall,m=e.fontSizeMini,y=e.fontSizeTiny,_=e.fontSizeSmall,b=e.fontSizeMedium,k=e.heightMini,w=e.heightTiny,C=e.heightSmall,S=e.heightMedium,x=e.closeColorHover,L=e.closeColorPressed,D=e.buttonColor2Hover,N=e.buttonColor2Pressed,I=e.fontWeightStrong;return Object.assign(Object.assign({},gr),{closeBorderRadius:p,heightTiny:k,heightSmall:w,heightMedium:C,heightLarge:S,borderRadius:p,opacityDisabled:d,fontSizeTiny:m,fontSizeSmall:y,fontSizeMedium:_,fontSizeLarge:b,fontWeightStrong:I,textColorCheckable:t,textColorHoverCheckable:t,textColorPressedCheckable:t,textColorChecked:u,colorCheckable:"#0000",colorHoverCheckable:D,colorPressedCheckable:N,colorChecked:r,colorCheckedHover:n,colorCheckedPressed:i,border:"1px solid ".concat(c),textColor:t,color:h,colorBordered:"rgb(250, 250, 252)",closeIconColor:f,closeIconColorHover:g,closeIconColorPressed:v,closeColorHover:x,closeColorPressed:L,borderPrimary:"1px solid ".concat(De(r,{alpha:.3})),textColorPrimary:r,colorPrimary:De(r,{alpha:.12}),colorBorderedPrimary:De(r,{alpha:.1}),closeIconColorPrimary:r,closeIconColorHoverPrimary:r,closeIconColorPressedPrimary:r,closeColorHoverPrimary:De(r,{alpha:.12}),closeColorPressedPrimary:De(r,{alpha:.18}),borderInfo:"1px solid ".concat(De(o,{alpha:.3})),textColorInfo:o,colorInfo:De(o,{alpha:.12}),colorBorderedInfo:De(o,{alpha:.1}),closeIconColorInfo:o,closeIconColorHoverInfo:o,closeIconColorPressedInfo:o,closeColorHoverInfo:De(o,{alpha:.12}),closeColorPressedInfo:De(o,{alpha:.18}),borderSuccess:"1px solid ".concat(De(a,{alpha:.3})),textColorSuccess:a,colorSuccess:De(a,{alpha:.12}),colorBorderedSuccess:De(a,{alpha:.1}),closeIconColorSuccess:a,closeIconColorHoverSuccess:a,closeIconColorPressedSuccess:a,closeColorHoverSuccess:De(a,{alpha:.12}),closeColorPressedSuccess:De(a,{alpha:.18}),borderWarning:"1px solid ".concat(De(s,{alpha:.35})),textColorWarning:s,colorWarning:De(s,{alpha:.15}),colorBorderedWarning:De(s,{alpha:.12}),closeIconColorWarning:s,closeIconColorHoverWarning:s,closeIconColorPressedWarning:s,closeColorHoverWarning:De(s,{alpha:.12}),closeColorPressedWarning:De(s,{alpha:.18}),borderError:"1px solid ".concat(De(l,{alpha:.23})),textColorError:l,colorError:De(l,{alpha:.1}),colorBorderedError:De(l,{alpha:.08}),closeIconColorError:l,closeIconColorHoverError:l,closeIconColorPressedError:l,closeColorHoverError:De(l,{alpha:.12}),closeColorPressedError:De(l,{alpha:.18})})}},mr={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},yr=_e("tag","\n --n-close-margin: var(--n-close-margin-top) var(--n-close-margin-right) var(--n-close-margin-bottom) var(--n-close-margin-left);\n white-space: nowrap;\n position: relative;\n box-sizing: border-box;\n cursor: default;\n display: inline-flex;\n align-items: center;\n flex-wrap: nowrap;\n padding: var(--n-padding);\n border-radius: var(--n-border-radius);\n color: var(--n-text-color);\n background-color: var(--n-color);\n transition: \n border-color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n opacity .3s var(--n-bezier);\n line-height: 1;\n height: var(--n-height);\n font-size: var(--n-font-size);\n",[be("strong","\n font-weight: var(--n-font-weight-strong);\n "),Ne("border","\n pointer-events: none;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border-radius: inherit;\n border: var(--n-border);\n transition: border-color .3s var(--n-bezier);\n "),Ne("icon","\n display: flex;\n margin: 0 4px 0 0;\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n font-size: var(--n-avatar-size-override);\n "),Ne("avatar","\n display: flex;\n margin: 0 6px 0 0;\n "),Ne("close","\n margin: var(--n-close-margin);\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n "),be("round","\n padding: 0 calc(var(--n-height) / 3);\n border-radius: calc(var(--n-height) / 2);\n ",[Ne("icon","\n margin: 0 4px 0 calc((var(--n-height) - 8px) / -2);\n "),Ne("avatar","\n margin: 0 6px 0 calc((var(--n-height) - 8px) / -2);\n "),be("closable","\n padding: 0 calc(var(--n-height) / 4) 0 calc(var(--n-height) / 3);\n ")]),be("icon, avatar",[be("round","\n padding: 0 calc(var(--n-height) / 3) 0 calc(var(--n-height) / 2);\n ")]),be("disabled","\n cursor: not-allowed !important;\n opacity: var(--n-opacity-disabled);\n "),be("checkable","\n cursor: pointer;\n box-shadow: none;\n color: var(--n-text-color-checkable);\n background-color: var(--n-color-checkable);\n ",[we("disabled",[ke("&:hover","background-color: var(--n-color-hover-checkable);",[we("checked","color: var(--n-text-color-hover-checkable);")]),ke("&:active","background-color: var(--n-color-pressed-checkable);",[we("checked","color: var(--n-text-color-pressed-checkable);")])]),be("checked","\n color: var(--n-text-color-checked);\n background-color: var(--n-color-checked);\n ",[we("disabled",[ke("&:hover","background-color: var(--n-color-checked-hover);"),ke("&:active","background-color: var(--n-color-checked-pressed);")])])])]),_r=Object.assign(Object.assign(Object.assign({},Ie.props),mr),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,strong:Boolean,triggerClickOnClose:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalCloseFocusable:{type:Boolean,default:!0},internalCloseIsButtonTag:{type:Boolean,default:!0},onCheckedChange:Function}),br=ae("n-tag"),kr=A((f(vr={name:"Tag",props:_r},"setup",(function(e){var t=n(null),i=Ee(e),r=i.mergedBorderedRef,o=i.mergedClsPrefixRef,a=i.inlineThemeDisabled,s=i.mergedRtlRef,l=Ie("Tag","-tag",yr,pr,e,o);B(br,{roundRef:P(e,"round")});var u={setTextContent:function(e){var n=t.value;n&&(n.textContent=e)}},c=Me("Tag",s,o),d=O((function(){var t=e.type,n=e.size,i=e.color,o=void 0===i?{}:i,a=o.color,s=o.textColor,u=l.value,c=u.common.cubicBezierEaseInOut,d=u.self,h=d.padding,f=d.closeMargin,g=d.borderRadius,v=d.opacityDisabled,p=d.textColorCheckable,m=d.textColorHoverCheckable,y=d.textColorPressedCheckable,_=d.textColorChecked,b=d.colorCheckable,k=d.colorHoverCheckable,w=d.colorPressedCheckable,C=d.colorChecked,S=d.colorCheckedHover,x=d.colorCheckedPressed,L=d.closeBorderRadius,D=d.fontWeightStrong,N=d[Te("colorBordered",t)],I=d[Te("closeSize",n)],E=d[Te("closeIconSize",n)],M=d[Te("fontSize",n)],T=d[Te("height",n)],R=d[Te("color",t)],A=d[Te("textColor",t)],P=d[Te("border",t)],O=d[Te("closeIconColor",t)],F=d[Te("closeIconColorHover",t)],W=d[Te("closeIconColorPressed",t)],B=d[Te("closeColorHover",t)],H=d[Te("closeColorPressed",t)],V=Re(f);return{"--n-font-weight-strong":D,"--n-avatar-size-override":"calc(".concat(T," - 8px)"),"--n-bezier":c,"--n-border-radius":g,"--n-border":P,"--n-close-icon-size":E,"--n-close-color-pressed":H,"--n-close-color-hover":B,"--n-close-border-radius":L,"--n-close-icon-color":O,"--n-close-icon-color-hover":F,"--n-close-icon-color-pressed":W,"--n-close-icon-color-disabled":O,"--n-close-margin-top":V.top,"--n-close-margin-right":V.right,"--n-close-margin-bottom":V.bottom,"--n-close-margin-left":V.left,"--n-close-size":I,"--n-color":a||(r.value?N:R),"--n-color-checkable":b,"--n-color-checked":C,"--n-color-checked-hover":S,"--n-color-checked-pressed":x,"--n-color-hover-checkable":k,"--n-color-pressed-checkable":w,"--n-font-size":M,"--n-height":T,"--n-opacity-disabled":v,"--n-padding":h,"--n-text-color":s||A,"--n-text-color-checkable":p,"--n-text-color-checked":_,"--n-text-color-hover-checkable":m,"--n-text-color-pressed-checkable":y}})),h=a?Ae("tag",O((function(){var t="",n=e.type,i=e.size,o=e.color,a=void 0===o?{}:o,s=a.color,l=a.textColor;return t+=n[0],t+=i[0],s&&(t+="a".concat(Pe(s))),l&&(t+="b".concat(Pe(l))),r.value&&(t+="c"),t})),d,e):void 0;return Object.assign(Object.assign({},u),{rtlEnabled:c,mergedClsPrefix:o,contentRef:t,mergedBordered:r,handleClick:function(){if(!e.disabled&&e.checkable){var t=e.checked,n=e.onCheckedChange,i=e.onUpdateChecked,r=e["onUpdate:checked"];i&&i(!t),r&&r(!t),n&&n(!t)}},handleCloseClick:function(t){if(e.triggerClickOnClose||t.stopPropagation(),!e.disabled){var n=e.onClose;n&&Fe(n,t)}},cssVars:a?void 0:d,themeClass:null==h?void 0:h.themeClass,onRender:null==h?void 0:h.onRender})})),f(vr,"render",(function(){var e,t,n=this,i=n.mergedClsPrefix,r=n.rtlEnabled,o=n.closable,a=n.color,s=(void 0===a?{}:a).borderColor,l=n.round,u=n.onRender,c=n.$slots;null==u||u();var d,h=Oe(c.avatar,(function(e){return e&&F("div",{class:"".concat(i,"-tag__avatar")},e)})),g=Oe(c.icon,(function(e){return e&&F("div",{class:"".concat(i,"-tag__icon")},e)}));return F("div",{class:["".concat(i,"-tag"),this.themeClass,(d={},f(d,"".concat(i,"-tag--rtl"),r),f(d,"".concat(i,"-tag--strong"),this.strong),f(d,"".concat(i,"-tag--disabled"),this.disabled),f(d,"".concat(i,"-tag--checkable"),this.checkable),f(d,"".concat(i,"-tag--checked"),this.checkable&&this.checked),f(d,"".concat(i,"-tag--round"),l),f(d,"".concat(i,"-tag--avatar"),h),f(d,"".concat(i,"-tag--icon"),g),f(d,"".concat(i,"-tag--closable"),o),d)],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},g||h,F("span",{class:"".concat(i,"-tag__content"),ref:"contentRef"},null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e)),!this.checkable&&o?F(cr,{clsPrefix:i,class:"".concat(i,"-tag__close"),disabled:this.disabled,onClick:this.handleCloseClick,focusable:this.internalCloseFocusable,round:l,isButtonTag:this.internalCloseIsButtonTag,absolute:!0}):null,!this.checkable&&this.mergedBordered?F("div",{class:"".concat(i,"-tag__border"),style:{borderColor:s}}):null)})),vr)),wr={sizeSmall:"14px",sizeMedium:"16px",sizeLarge:"18px",labelPadding:"0 8px",labelFontWeight:"400"};var Cr,Sr={name:"Checkbox",common:Le,self:function(e){var t=e.baseColor,n=e.inputColorDisabled,i=e.cardColor,r=e.modalColor,o=e.popoverColor,a=e.textColorDisabled,s=e.borderColor,l=e.primaryColor,u=e.textColor2,c=e.fontSizeSmall,d=e.fontSizeMedium,h=e.fontSizeLarge,f=e.borderRadiusSmall,g=e.lineHeight;return Object.assign(Object.assign({},wr),{labelLineHeight:g,fontSizeSmall:c,fontSizeMedium:d,fontSizeLarge:h,borderRadius:f,color:t,colorChecked:l,colorDisabled:n,colorDisabledChecked:n,colorTableHeader:i,colorTableHeaderModal:r,colorTableHeaderPopover:o,checkMarkColor:t,checkMarkColorDisabled:a,checkMarkColorDisabledChecked:a,border:"1px solid ".concat(s),borderDisabled:"1px solid ".concat(s),borderDisabledChecked:"1px solid ".concat(s),borderChecked:"1px solid ".concat(l),borderFocus:"1px solid ".concat(l),boxShadowFocus:"0 0 0 2px ".concat(De(l,{alpha:.3})),textColor:u,textColorDisabled:a})}},xr=ae("n-checkbox-group"),Lr=F("svg",{viewBox:"0 0 64 64",class:"check-icon"},F("path",{d:"M50.42,16.76L22.34,39.45l-8.1-11.46c-1.12-1.58-3.3-1.96-4.88-0.84c-1.58,1.12-1.95,3.3-0.84,4.88l10.26,14.51  c0.56,0.79,1.42,1.31,2.38,1.45c0.16,0.02,0.32,0.03,0.48,0.03c0.8,0,1.57-0.27,2.2-0.78l30.99-25.03c1.5-1.21,1.74-3.42,0.52-4.92  C54.13,15.78,51.93,15.55,50.42,16.76z"})),Dr=F("svg",{viewBox:"0 0 100 100",class:"line-icon"},F("path",{d:"M80.2,55.5H21.4c-2.8,0-5.1-2.5-5.1-5.5l0,0c0-3,2.3-5.5,5.1-5.5h58.7c2.8,0,5.1,2.5,5.1,5.5l0,0C85.2,53.1,82.9,55.5,80.2,55.5z"})),Nr=ke([_e("checkbox","\n font-size: var(--n-font-size);\n outline: none;\n cursor: pointer;\n display: inline-flex;\n flex-wrap: nowrap;\n align-items: flex-start;\n word-break: break-word;\n line-height: var(--n-size);\n --n-merged-color-table: var(--n-color-table);\n ",[be("show-label","line-height: var(--n-label-line-height);"),ke("&:hover",[_e("checkbox-box",[Ne("border","border: var(--n-border-checked);")])]),ke("&:focus:not(:active)",[_e("checkbox-box",[Ne("border","\n border: var(--n-border-focus);\n box-shadow: var(--n-box-shadow-focus);\n ")])]),be("inside-table",[_e("checkbox-box","\n background-color: var(--n-merged-color-table);\n ")]),be("checked",[_e("checkbox-box","\n background-color: var(--n-color-checked);\n ",[_e("checkbox-icon",[ke(".check-icon","\n opacity: 1;\n transform: scale(1);\n ")])])]),be("indeterminate",[_e("checkbox-box",[_e("checkbox-icon",[ke(".check-icon","\n opacity: 0;\n transform: scale(.5);\n "),ke(".line-icon","\n opacity: 1;\n transform: scale(1);\n ")])])]),be("checked, indeterminate",[ke("&:focus:not(:active)",[_e("checkbox-box",[Ne("border","\n border: var(--n-border-checked);\n box-shadow: var(--n-box-shadow-focus);\n ")])]),_e("checkbox-box","\n background-color: var(--n-color-checked);\n border-left: 0;\n border-top: 0;\n ",[Ne("border",{border:"var(--n-border-checked)"})])]),be("disabled",{cursor:"not-allowed"},[be("checked",[_e("checkbox-box","\n background-color: var(--n-color-disabled-checked);\n ",[Ne("border",{border:"var(--n-border-disabled-checked)"}),_e("checkbox-icon",[ke(".check-icon, .line-icon",{fill:"var(--n-check-mark-color-disabled-checked)"})])])]),_e("checkbox-box","\n background-color: var(--n-color-disabled);\n ",[Ne("border","\n border: var(--n-border-disabled);\n "),_e("checkbox-icon",[ke(".check-icon, .line-icon","\n fill: var(--n-check-mark-color-disabled);\n ")])]),Ne("label","\n color: var(--n-text-color-disabled);\n ")]),_e("checkbox-box-wrapper","\n position: relative;\n width: var(--n-size);\n flex-shrink: 0;\n flex-grow: 0;\n user-select: none;\n -webkit-user-select: none;\n "),_e("checkbox-box","\n position: absolute;\n left: 0;\n top: 50%;\n transform: translateY(-50%);\n height: var(--n-size);\n width: var(--n-size);\n display: inline-block;\n box-sizing: border-box;\n border-radius: var(--n-border-radius);\n background-color: var(--n-color);\n transition: background-color 0.3s var(--n-bezier);\n ",[Ne("border","\n transition:\n border-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n border-radius: inherit;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border: var(--n-border);\n "),_e("checkbox-icon","\n display: flex;\n align-items: center;\n justify-content: center;\n position: absolute;\n left: 1px;\n right: 1px;\n top: 1px;\n bottom: 1px;\n ",[ke(".check-icon, .line-icon","\n width: 100%;\n fill: var(--n-check-mark-color);\n opacity: 0;\n transform: scale(0.5);\n transform-origin: center;\n transition:\n fill 0.3s var(--n-bezier),\n transform 0.3s var(--n-bezier),\n opacity 0.3s var(--n-bezier),\n border-color 0.3s var(--n-bezier);\n "),We({left:"1px",top:"1px"})])]),Ne("label","\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n user-select: none;\n -webkit-user-select: none;\n padding: var(--n-label-padding);\n font-weight: var(--n-label-font-weight);\n ",[ke("&:empty",{display:"none"})])]),Be(_e("checkbox","\n --n-merged-color-table: var(--n-color-table-modal);\n ")),He(_e("checkbox","\n --n-merged-color-table: var(--n-color-table-popover);\n "))]),Ir=Object.assign(Object.assign({},Ie.props),{size:String,checked:{type:[Boolean,String,Number],default:void 0},defaultChecked:{type:[Boolean,String,Number],default:!1},value:[String,Number],disabled:{type:Boolean,default:void 0},indeterminate:Boolean,label:String,focusable:{type:Boolean,default:!0},checkedValue:{type:[Boolean,String,Number],default:!0},uncheckedValue:{type:[Boolean,String,Number],default:!1},"onUpdate:checked":[Function,Array],onUpdateChecked:[Function,Array],privateInsideTable:Boolean,onChange:[Function,Array]}),Er=A((f(Cr={name:"Checkbox",props:Ir},"setup",(function(e){var t=d(xr,null),i=n(null),r=Ee(e),o=r.mergedClsPrefixRef,a=r.inlineThemeDisabled,s=r.mergedRtlRef,l=n(e.defaultChecked),u=P(e,"checked"),c=Ve(u,l),h=ze((function(){if(t){var n=t.valueSetRef.value;return!(!n||void 0===e.value)&&n.has(e.value)}return c.value===e.checkedValue})),f=Ue(e,{mergedSize:function(n){var i=e.size;if(void 0!==i)return i;if(t){var r=t.mergedSizeRef.value;if(void 0!==r)return r}if(n){var o=n.mergedSize;if(void 0!==o)return o.value}return"medium"},mergedDisabled:function(n){var i=e.disabled;if(void 0!==i)return i;if(t){if(t.disabledRef.value)return!0;var r=t.maxRef.value,o=t.checkedCountRef;if(void 0!==r&&o.value>=r&&!h.value)return!0;var a=t.minRef.value;if(void 0!==a&&o.value<=a&&h.value)return!0}return!!n&&n.disabled.value}}),g=f.mergedDisabledRef,v=f.mergedSizeRef,p=Ie("Checkbox","-checkbox",Nr,Sr,e,o);function m(n){if(t&&void 0!==e.value)t.toggleCheckbox(!h.value,e.value);else{var i=e.onChange,r=e["onUpdate:checked"],o=e.onUpdateChecked,a=f.nTriggerFormInput,s=f.nTriggerFormChange,u=h.value?e.uncheckedValue:e.checkedValue;r&&Fe(r,u,n),o&&Fe(o,u,n),i&&Fe(i,u,n),a(),s(),l.value=u}}var y={focus:function(){var e;null===(e=i.value)||void 0===e||e.focus()},blur:function(){var e;null===(e=i.value)||void 0===e||e.blur()}},_=Me("Checkbox",s,o),b=O((function(){var e=v.value,t=p.value,n=t.common.cubicBezierEaseInOut,i=t.self,r=i.borderRadius,o=i.color,a=i.colorChecked,s=i.colorDisabled,l=i.colorTableHeader,u=i.colorTableHeaderModal,c=i.colorTableHeaderPopover,d=i.checkMarkColor,h=i.checkMarkColorDisabled,f=i.border,g=i.borderFocus,m=i.borderDisabled,y=i.borderChecked,_=i.boxShadowFocus,b=i.textColor,k=i.textColorDisabled,w=i.checkMarkColorDisabledChecked,C=i.colorDisabledChecked,S=i.borderDisabledChecked,x=i.labelPadding,L=i.labelLineHeight,D=i.labelFontWeight,N=i[Te("fontSize",e)];return{"--n-label-line-height":L,"--n-label-font-weight":D,"--n-size":i[Te("size",e)],"--n-bezier":n,"--n-border-radius":r,"--n-border":f,"--n-border-checked":y,"--n-border-focus":g,"--n-border-disabled":m,"--n-border-disabled-checked":S,"--n-box-shadow-focus":_,"--n-color":o,"--n-color-checked":a,"--n-color-table":l,"--n-color-table-modal":u,"--n-color-table-popover":c,"--n-color-disabled":s,"--n-color-disabled-checked":C,"--n-text-color":b,"--n-text-color-disabled":k,"--n-check-mark-color":d,"--n-check-mark-color-disabled":h,"--n-check-mark-color-disabled-checked":w,"--n-font-size":N,"--n-label-padding":x}})),k=a?Ae("checkbox",O((function(){return v.value[0]})),b,e):void 0;return Object.assign(f,y,{rtlEnabled:_,selfRef:i,mergedClsPrefix:o,mergedDisabled:g,renderedChecked:h,mergedTheme:p,labelId:Qn(),handleClick:function(e){g.value||m(e)},handleKeyUp:function(e){if(!g.value)switch(e.key){case" ":case"Enter":m(e)}},handleKeyDown:function(e){if(" "===e.key)e.preventDefault()},cssVars:a?void 0:b,themeClass:null==k?void 0:k.themeClass,onRender:null==k?void 0:k.onRender})})),f(Cr,"render",(function(){var e,t=this,n=this,i=n.$slots,r=n.renderedChecked,o=n.mergedDisabled,a=n.indeterminate,s=n.privateInsideTable,l=n.cssVars,u=n.labelId,c=n.label,d=n.mergedClsPrefix,h=n.focusable,f=n.handleKeyUp,g=n.handleKeyDown,v=n.handleClick;null===(e=this.onRender)||void 0===e||e.call(this);var p=Oe(i.default,(function(e){return c||e?F("span",{class:"".concat(d,"-checkbox__label"),id:u},c||e):null}));return F("div",{ref:"selfRef",class:["".concat(d,"-checkbox"),this.themeClass,this.rtlEnabled&&"".concat(d,"-checkbox--rtl"),r&&"".concat(d,"-checkbox--checked"),o&&"".concat(d,"-checkbox--disabled"),a&&"".concat(d,"-checkbox--indeterminate"),s&&"".concat(d,"-checkbox--inside-table"),p&&"".concat(d,"-checkbox--show-label")],tabindex:o||!h?void 0:0,role:"checkbox","aria-checked":a?"mixed":r,"aria-labelledby":u,style:l,onKeyup:f,onKeydown:g,onClick:v,onMousedown:function(){le("selectstart",window,(function(e){e.preventDefault()}),{once:!0})}},F("div",{class:"".concat(d,"-checkbox-box-wrapper")}," ",F("div",{class:"".concat(d,"-checkbox-box")},F(je,null,{default:function(){return t.indeterminate?F("div",{key:"indeterminate",class:"".concat(d,"-checkbox-icon")},Dr):F("div",{key:"check",class:"".concat(d,"-checkbox-icon")},Lr)}}),F("div",{class:"".concat(d,"-checkbox-box__border")}))),p)})),Cr));var Mr={name:"Code",common:Le,self:function(e){return{textColor:e.textColor2,fontSize:e.fontSize,fontWeightStrong:e.fontWeightStrong,"mono-3":"#a0a1a7","hue-1":"#0184bb","hue-2":"#4078f2","hue-3":"#a626a4","hue-4":"#50a14f","hue-5":"#e45649","hue-5-2":"#c91243","hue-6":"#986801","hue-6-2":"#c18401",lineNumberTextColor:e.textColor3}}},Tr=ke([_e("code","\n font-size: var(--n-font-size);\n font-family: var(--n-font-family);\n ",[be("show-line-numbers","\n display: flex;\n "),Ne("line-numbers","\n user-select: none;\n padding-right: 12px;\n text-align: right;\n transition: color .3s var(--n-bezier);\n color: var(--n-line-number-text-color);\n "),be("word-wrap",[ke("pre","\n white-space: pre-wrap;\n word-break: break-all;\n ")]),ke("pre","\n margin: 0;\n line-height: inherit;\n font-size: inherit;\n font-family: inherit;\n "),ke("[class^=hljs]","\n color: var(--n-text-color);\n transition: \n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n ")]),function(e){var t=e.props,n="".concat(t.bPrefix,"code");return["".concat(n," .hljs-comment,\n ").concat(n," .hljs-quote {\n color: var(--n-mono-3);\n font-style: italic;\n }"),"".concat(n," .hljs-doctag,\n ").concat(n," .hljs-keyword,\n ").concat(n," .hljs-formula {\n color: var(--n-hue-3);\n }"),"".concat(n," .hljs-section,\n ").concat(n," .hljs-name,\n ").concat(n," .hljs-selector-tag,\n ").concat(n," .hljs-deletion,\n ").concat(n," .hljs-subst {\n color: var(--n-hue-5);\n }"),"".concat(n," .hljs-literal {\n color: var(--n-hue-1);\n }"),"".concat(n," .hljs-string,\n ").concat(n," .hljs-regexp,\n ").concat(n," .hljs-addition,\n ").concat(n," .hljs-attribute,\n ").concat(n," .hljs-meta-string {\n color: var(--n-hue-4);\n }"),"".concat(n," .hljs-built_in,\n ").concat(n," .hljs-class .hljs-title {\n color: var(--n-hue-6-2);\n }"),"".concat(n," .hljs-attr,\n ").concat(n," .hljs-variable,\n ").concat(n," .hljs-template-variable,\n ").concat(n," .hljs-type,\n ").concat(n," .hljs-selector-class,\n ").concat(n," .hljs-selector-attr,\n ").concat(n," .hljs-selector-pseudo,\n ").concat(n," .hljs-number {\n color: var(--n-hue-6);\n }"),"".concat(n," .hljs-symbol,\n ").concat(n," .hljs-bullet,\n ").concat(n," .hljs-link,\n ").concat(n," .hljs-meta,\n ").concat(n," .hljs-selector-id,\n ").concat(n," .hljs-title {\n color: var(--n-hue-2);\n }"),"".concat(n," .hljs-emphasis {\n font-style: italic;\n }"),"".concat(n," .hljs-strong {\n font-weight: var(--n-font-weight-strong);\n }"),"".concat(n," .hljs-link {\n text-decoration: underline;\n }")]}]),Rr=Object.assign(Object.assign({},Ie.props),{language:String,code:{type:String,default:""},trim:{type:Boolean,default:!0},hljs:Object,uri:Boolean,inline:Boolean,wordWrap:Boolean,showLineNumbers:Boolean,internalFontSize:Number,internalNoHighlight:Boolean}),Ar=A({name:"Code",props:Rr,setup:function(e,t){var i=t.slots,r=e.internalNoHighlight,o=Ee(),s=o.mergedClsPrefixRef,l=o.inlineThemeDisabled,u=n(null),c=r?{value:void 0}:Fi(e),d=function(e,t,n){var i=c.value;return i&&e&&i.getLanguage(e)?i.highlight(n?t.trim():t,{language:e}).value:null},h=O((function(){return!e.inline&&!e.wordWrap&&e.showLineNumbers})),f=function(){if(!i.default){var t=u.value;if(t){var n=e.language,r=e.uri?window.decodeURIComponent(e.code):e.code;if(n){var o=d(n,r,e.trim);if(null!==o){if(e.inline)t.innerHTML=o;else{var a=t.querySelector(".__code__");a&&t.removeChild(a);var s=document.createElement("pre");s.className="__code__",s.innerHTML=o,t.appendChild(s)}return}}if(e.inline)t.textContent=r;else{var l=t.querySelector(".__code__");if(l)l.textContent=r;else{var c=document.createElement("pre");c.className="__code__",c.textContent=r,t.innerHTML="",t.appendChild(c)}}}}};D(f),a(P(e,"language"),f),a(P(e,"code"),f),r||a(c,f);var g=Ie("Code","-code",Tr,Mr,e,s),v=O((function(){var t=g.value,n=t.common,i=n.cubicBezierEaseInOut,r=n.fontFamilyMono,o=t.self,a=o.textColor,s=o.fontSize,l=o.fontWeightStrong,u=o.lineNumberTextColor,c=o["mono-3"],d=o["hue-1"],h=o["hue-2"],f=o["hue-3"],v=o["hue-4"],p=o["hue-5"],m=o["hue-5-2"],y=o["hue-6"],_=o["hue-6-2"],b=e.internalFontSize;return{"--n-font-size":b?"".concat(b,"px"):s,"--n-font-family":r,"--n-font-weight-strong":l,"--n-bezier":i,"--n-text-color":a,"--n-mono-3":c,"--n-hue-1":d,"--n-hue-2":h,"--n-hue-3":f,"--n-hue-4":v,"--n-hue-5":p,"--n-hue-5-2":m,"--n-hue-6":y,"--n-hue-6-2":_,"--n-line-number-text-color":u}})),p=l?Ae("code",O((function(){return"".concat(e.internalFontSize||"a")})),v,e):void 0;return{mergedClsPrefix:s,codeRef:u,mergedShowLineNumbers:h,lineNumbers:O((function(){var t=1,n=[],i=!1,r=!0,o=!1,a=void 0;try{for(var s,l=e.code[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){"\n"===s.value?(i=!0,n.push(t++)):i=!1}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return i||n.push(t++),n.join("\n")})),cssVars:l?void 0:v,themeClass:null==p?void 0:p.themeClass,onRender:null==p?void 0:p.onRender}},render:function(){var e,t,n=this,i=n.mergedClsPrefix,r=n.wordWrap,o=n.mergedShowLineNumbers,a=n.onRender;return null==a||a(),F("code",{class:["".concat(i,"-code"),this.themeClass,r&&"".concat(i,"-code--word-wrap"),o&&"".concat(i,"-code--show-line-numbers")],style:this.cssVars,ref:"codeRef"},o?F("pre",{class:"".concat(i,"-code__line-numbers")},this.lineNumbers):null,null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e))}});var Pr=Ke({name:"Drawer",common:Le,peers:{Scrollbar:qe},self:function(e){var t=e.modalColor,n=e.textColor1,i=e.textColor2,r=e.boxShadow3,o=e.lineHeight,a=e.fontWeightStrong,s=e.dividerColor,l=e.closeColorHover,u=e.closeColorPressed,c=e.closeIconColor,d=e.closeIconColorHover,h=e.closeIconColorPressed,f=e.borderRadius,g=e.primaryColorHover;return{bodyPadding:"16px 24px",borderRadius:f,headerPadding:"16px 24px",footerPadding:"16px 24px",color:t,textColor:i,titleTextColor:n,titleFontSize:"18px",titleFontWeight:a,boxShadow:r,lineHeight:o,headerBorderBottom:"1px solid ".concat(s),footerBorderTop:"1px solid ".concat(s),closeIconColor:c,closeIconColorHover:d,closeIconColorPressed:h,closeSize:"22px",closeIconSize:"18px",closeColorHover:l,closeColorPressed:u,closeBorderRadius:f,resizableTriggerColorHover:g}}}),Or=A({name:"NDrawerContent",inheritAttrs:!1,props:{blockScroll:Boolean,show:{type:Boolean,default:void 0},displayDirective:{type:String,required:!0},placement:{type:String,required:!0},contentClass:String,contentStyle:[Object,String],nativeScrollbar:{type:Boolean,required:!0},scrollbarProps:Object,trapFocus:{type:Boolean,default:!0},autoFocus:{type:Boolean,default:!0},showMask:{type:[Boolean,String],required:!0},maxWidth:Number,maxHeight:Number,minWidth:Number,minHeight:Number,resizable:Boolean,onClickoutside:Function,onAfterLeave:Function,onAfterEnter:Function,onEsc:Function},setup:function(e){var t=n(!!e.show),i=n(null),r=d(Jn),o=0,s="",l=null,u=n(!1),c=n(!1),h=O((function(){return"top"===e.placement||"bottom"===e.placement})),f=Ee(e),g=f.mergedClsPrefixRef,v=f.mergedRtlRef,p=Me("Drawer",v,g),m=S,_=r.doUpdateHeight,b=r.doUpdateWidth,k=function(t){var n=e.maxWidth;if(n&&t>n)return n;var i=e.minWidth;return i&&t<i?i:t},w=function(t){var n=e.maxHeight;if(n&&t>n)return n;var i=e.minHeight;return i&&t<i?i:t};function C(t){var n,r;if(c.value)if(h.value){var a=(null===(n=i.value)||void 0===n?void 0:n.offsetHeight)||0,s=o-t.clientY;a+="bottom"===e.placement?s:-s,a=w(a),_(a),o=t.clientY}else{var l=(null===(r=i.value)||void 0===r?void 0:r.offsetWidth)||0,u=o-t.clientX;l+="right"===e.placement?u:-u,l=k(l),b(l),o=t.clientX}}function S(){c.value&&(o=0,c.value=!1,document.body.style.cursor=s,document.body.removeEventListener("mousemove",C),document.body.removeEventListener("mouseup",S),document.body.removeEventListener("mouseleave",m))}H((function(){e.show&&(t.value=!0)})),a((function(){return e.show}),(function(e){e||S()})),y((function(){S()}));var x=O((function(){var t=e.show,n=[[z,t]];return e.showMask||n.push([yi,e.onClickoutside,void 0,{capture:!0}]),n}));return gi(O((function(){return e.blockScroll&&t.value}))),B($n,i),B(ti,null),B(ei,null),{bodyRef:i,rtlEnabled:p,mergedClsPrefix:r.mergedClsPrefixRef,isMounted:r.isMountedRef,mergedTheme:r.mergedThemeRef,displayed:t,transitionName:O((function(){return{right:"slide-in-from-right-transition",left:"slide-in-from-left-transition",top:"slide-in-from-top-transition",bottom:"slide-in-from-bottom-transition"}[e.placement]})),handleAfterLeave:function(){var n;t.value=!1,null===(n=e.onAfterLeave)||void 0===n||n.call(e)},bodyDirectives:x,handleMousedownResizeTrigger:function(e){c.value=!0,o=h.value?e.clientY:e.clientX,s=document.body.style.cursor,document.body.style.cursor=h.value?"ns-resize":"ew-resize",document.body.addEventListener("mousemove",C),document.body.addEventListener("mouseleave",m),document.body.addEventListener("mouseup",S)},handleMouseenterResizeTrigger:function(){null!==l&&(window.clearTimeout(l),l=null),c.value?u.value=!0:l=window.setTimeout((function(){u.value=!0}),300)},handleMouseleaveResizeTrigger:function(){null!==l&&(window.clearTimeout(l),l=null),u.value=!1},isDragging:c,isHoverOnResizeTrigger:u}},render:function(){var e=this,t=this.$slots,n=this.mergedClsPrefix;return"show"===this.displayDirective||this.displayed||this.show?V(F("div",{role:"none"},F(Ei,{disabled:!this.showMask||!this.trapFocus,active:this.show,autoFocus:this.autoFocus,onEsc:this.onEsc},{default:function(){return F(U,{name:e.transitionName,appear:e.isMounted,onAfterEnter:e.onAfterEnter,onAfterLeave:e.handleAfterLeave},{default:function(){return V(F("div",j(e.$attrs,{role:"dialog",ref:"bodyRef","aria-modal":"true",class:["".concat(n,"-drawer"),e.rtlEnabled&&"".concat(n,"-drawer--rtl"),"".concat(n,"-drawer--").concat(e.placement,"-placement"),e.isDragging&&"".concat(n,"-drawer--unselectable"),e.nativeScrollbar&&"".concat(n,"-drawer--native-scrollbar")]}),[e.resizable?F("div",{class:["".concat(n,"-drawer__resize-trigger"),(e.isDragging||e.isHoverOnResizeTrigger)&&"".concat(n,"-drawer__resize-trigger--hover")],onMouseenter:e.handleMouseenterResizeTrigger,onMouseleave:e.handleMouseleaveResizeTrigger,onMousedown:e.handleMousedownResizeTrigger}):null,e.nativeScrollbar?F("div",{class:["".concat(n,"-drawer-content-wrapper"),e.contentClass],style:e.contentStyle,role:"none"},t):F(Ge,Object.assign({},e.scrollbarProps,{contentStyle:e.contentStyle,contentClass:["".concat(n,"-drawer-content-wrapper"),e.contentClass],theme:e.mergedTheme.peers.Scrollbar,themeOverrides:e.mergedTheme.peerOverrides.Scrollbar}),t)]),e.bodyDirectives)}})}})),[[z,"if"===this.displayDirective||this.displayed||this.show]]):null}}),Fr=xe.cubicBezierEaseIn,Wr=xe.cubicBezierEaseOut;var Br=xe.cubicBezierEaseIn,Hr=xe.cubicBezierEaseOut;var Vr=xe.cubicBezierEaseIn,zr=xe.cubicBezierEaseOut;var Ur=xe.cubicBezierEaseIn,jr=xe.cubicBezierEaseOut;var Kr=ke([_e("drawer","\n word-break: break-word;\n line-height: var(--n-line-height);\n position: absolute;\n pointer-events: all;\n box-shadow: var(--n-box-shadow);\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n background-color: var(--n-color);\n color: var(--n-text-color);\n box-sizing: border-box;\n ",[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.duration,n=void 0===t?"0.3s":t,i=e.leaveDuration,r=void 0===i?"0.2s":i,o=e.name,a=void 0===o?"slide-in-from-right":o;return[ke("&.".concat(a,"-transition-leave-active"),{transition:"transform ".concat(r," ").concat(Vr)}),ke("&.".concat(a,"-transition-enter-active"),{transition:"transform ".concat(n," ").concat(zr)}),ke("&.".concat(a,"-transition-enter-to"),{transform:"translateX(0)"}),ke("&.".concat(a,"-transition-enter-from"),{transform:"translateX(100%)"}),ke("&.".concat(a,"-transition-leave-from"),{transform:"translateX(0)"}),ke("&.".concat(a,"-transition-leave-to"),{transform:"translateX(100%)"})]}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.duration,n=void 0===t?"0.3s":t,i=e.leaveDuration,r=void 0===i?"0.2s":i,o=e.name,a=void 0===o?"slide-in-from-left":o;return[ke("&.".concat(a,"-transition-leave-active"),{transition:"transform ".concat(r," ").concat(Br)}),ke("&.".concat(a,"-transition-enter-active"),{transition:"transform ".concat(n," ").concat(Hr)}),ke("&.".concat(a,"-transition-enter-to"),{transform:"translateX(0)"}),ke("&.".concat(a,"-transition-enter-from"),{transform:"translateX(-100%)"}),ke("&.".concat(a,"-transition-leave-from"),{transform:"translateX(0)"}),ke("&.".concat(a,"-transition-leave-to"),{transform:"translateX(-100%)"})]}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.duration,n=void 0===t?"0.3s":t,i=e.leaveDuration,r=void 0===i?"0.2s":i,o=e.name,a=void 0===o?"slide-in-from-top":o;return[ke("&.".concat(a,"-transition-leave-active"),{transition:"transform ".concat(r," ").concat(Ur)}),ke("&.".concat(a,"-transition-enter-active"),{transition:"transform ".concat(n," ").concat(jr)}),ke("&.".concat(a,"-transition-enter-to"),{transform:"translateY(0)"}),ke("&.".concat(a,"-transition-enter-from"),{transform:"translateY(-100%)"}),ke("&.".concat(a,"-transition-leave-from"),{transform:"translateY(0)"}),ke("&.".concat(a,"-transition-leave-to"),{transform:"translateY(-100%)"})]}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.duration,n=void 0===t?"0.3s":t,i=e.leaveDuration,r=void 0===i?"0.2s":i,o=e.name,a=void 0===o?"slide-in-from-bottom":o;return[ke("&.".concat(a,"-transition-leave-active"),{transition:"transform ".concat(r," ").concat(Fr)}),ke("&.".concat(a,"-transition-enter-active"),{transition:"transform ".concat(n," ").concat(Wr)}),ke("&.".concat(a,"-transition-enter-to"),{transform:"translateY(0)"}),ke("&.".concat(a,"-transition-enter-from"),{transform:"translateY(100%)"}),ke("&.".concat(a,"-transition-leave-from"),{transform:"translateY(0)"}),ke("&.".concat(a,"-transition-leave-to"),{transform:"translateY(100%)"})]}(),be("unselectable","\n user-select: none; \n -webkit-user-select: none;\n "),be("native-scrollbar",[_e("drawer-content-wrapper","\n overflow: auto;\n height: 100%;\n ")]),Ne("resize-trigger","\n position: absolute;\n background-color: #0000;\n transition: background-color .3s var(--n-bezier);\n ",[be("hover","\n background-color: var(--n-resize-trigger-color-hover);\n ")]),_e("drawer-content-wrapper","\n box-sizing: border-box;\n "),_e("drawer-content","\n height: 100%;\n display: flex;\n flex-direction: column;\n ",[be("native-scrollbar",[_e("drawer-body-content-wrapper","\n height: 100%;\n overflow: auto;\n ")]),_e("drawer-body","\n flex: 1 0 0;\n overflow: hidden;\n "),_e("drawer-body-content-wrapper","\n box-sizing: border-box;\n padding: var(--n-body-padding);\n "),_e("drawer-header","\n font-weight: var(--n-title-font-weight);\n line-height: 1;\n font-size: var(--n-title-font-size);\n color: var(--n-title-text-color);\n padding: var(--n-header-padding);\n transition: border .3s var(--n-bezier);\n border-bottom: 1px solid var(--n-divider-color);\n border-bottom: var(--n-header-border-bottom);\n display: flex;\n justify-content: space-between;\n align-items: center;\n ",[Ne("main","\n flex: 1;\n "),Ne("close","\n margin-left: 6px;\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n ")]),_e("drawer-footer","\n display: flex;\n justify-content: flex-end;\n border-top: var(--n-footer-border-top);\n transition: border .3s var(--n-bezier);\n padding: var(--n-footer-padding);\n ")]),be("right-placement","\n top: 0;\n bottom: 0;\n right: 0;\n border-top-left-radius: var(--n-border-radius);\n border-bottom-left-radius: var(--n-border-radius);\n ",[Ne("resize-trigger","\n width: 3px;\n height: 100%;\n top: 0;\n left: 0;\n transform: translateX(-1.5px);\n cursor: ew-resize;\n ")]),be("left-placement","\n top: 0;\n bottom: 0;\n left: 0;\n border-top-right-radius: var(--n-border-radius);\n border-bottom-right-radius: var(--n-border-radius);\n ",[Ne("resize-trigger","\n width: 3px;\n height: 100%;\n top: 0;\n right: 0;\n transform: translateX(1.5px);\n cursor: ew-resize;\n ")]),be("top-placement","\n top: 0;\n left: 0;\n right: 0;\n border-bottom-left-radius: var(--n-border-radius);\n border-bottom-right-radius: var(--n-border-radius);\n ",[Ne("resize-trigger","\n width: 100%;\n height: 3px;\n bottom: 0;\n left: 0;\n transform: translateY(1.5px);\n cursor: ns-resize;\n ")]),be("bottom-placement","\n left: 0;\n bottom: 0;\n right: 0;\n border-top-left-radius: var(--n-border-radius);\n border-top-right-radius: var(--n-border-radius);\n ",[Ne("resize-trigger","\n width: 100%;\n height: 3px;\n top: 0;\n left: 0;\n transform: translateY(-1.5px);\n cursor: ns-resize;\n ")])]),ke("body",[ke(">",[_e("drawer-container","\n position: fixed;\n ")])]),_e("drawer-container","\n position: relative;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n pointer-events: none;\n ",[ke("> *","\n pointer-events: all;\n ")]),_e("drawer-mask","\n background-color: rgba(0, 0, 0, .3);\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ",[be("invisible","\n background-color: rgba(0, 0, 0, 0)\n "),Ze({enterDuration:"0.2s",leaveDuration:"0.2s",enterCubicBezier:"var(--n-bezier-in)",leaveCubicBezier:"var(--n-bezier-out)"})])]),qr=Object.assign(Object.assign({},Ie.props),{show:Boolean,width:[Number,String],height:[Number,String],placement:{type:String,default:"right"},maskClosable:{type:Boolean,default:!0},showMask:{type:[Boolean,String],default:!0},to:[String,Object],displayDirective:{type:String,default:"if"},nativeScrollbar:{type:Boolean,default:!0},zIndex:Number,onMaskClick:Function,scrollbarProps:Object,contentClass:String,contentStyle:[Object,String],trapFocus:{type:Boolean,default:!0},onEsc:Function,autoFocus:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},blockScroll:{type:Boolean,default:!0},maxWidth:Number,maxHeight:Number,minWidth:Number,minHeight:Number,resizable:Boolean,defaultWidth:{type:[Number,String],default:251},defaultHeight:{type:[Number,String],default:251},onUpdateWidth:[Function,Array],onUpdateHeight:[Function,Array],"onUpdate:width":[Function,Array],"onUpdate:height":[Function,Array],"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onAfterEnter:Function,onAfterLeave:Function,drawerStyle:[String,Object],drawerClass:String,target:null,onShow:Function,onHide:Function}),Gr=A({name:"Drawer",inheritAttrs:!1,props:qr,setup:function(e){var t=Ee(e),i=t.mergedClsPrefixRef,r=t.namespaceRef,o=t.inlineThemeDisabled,a=Ye(),s=Ie("Drawer","-drawer",Kr,Pr,e,i),l=n(e.defaultWidth),u=n(e.defaultHeight),c=Ve(P(e,"width"),l),d=Ve(P(e,"height"),u),h=O((function(){var t=e.placement;return"top"===t||"bottom"===t?"":Ri(c.value)})),f=O((function(){var t=e.placement;return"left"===t||"right"===t?"":Ri(d.value)})),g=O((function(){return[{width:h.value,height:f.value},e.drawerStyle||""]}));function v(t){var n=e.onMaskClick;e.maskClosable&&m(!1),n&&n(t)}var p=si();function m(t){var n=e.onHide,i=e.onUpdateShow,r=e["onUpdate:show"];i&&Fe(i,t),r&&Fe(r,t),n&&!t&&Fe(n,t)}B(Jn,{isMountedRef:a,mergedThemeRef:s,mergedClsPrefixRef:i,doUpdateShow:m,doUpdateHeight:function(t){var n=e.onUpdateHeight,i=e["onUpdate:width"];n&&Fe(n,t),i&&Fe(i,t),u.value=t},doUpdateWidth:function(t){var n=e.onUpdateWidth,i=e["onUpdate:width"];n&&Fe(n,t),i&&Fe(i,t),l.value=t}});var y=O((function(){var e=s.value,t=e.common,n=t.cubicBezierEaseInOut,i=t.cubicBezierEaseIn,r=t.cubicBezierEaseOut,o=e.self,a=o.color,l=o.textColor,u=o.boxShadow,c=o.lineHeight,d=o.headerPadding,h=o.footerPadding,f=o.borderRadius,g=o.bodyPadding,v=o.titleFontSize,p=o.titleTextColor,m=o.titleFontWeight,y=o.headerBorderBottom,_=o.footerBorderTop,b=o.closeIconColor,k=o.closeIconColorHover,w=o.closeIconColorPressed,C=o.closeColorHover,S=o.closeColorPressed,x=o.closeIconSize;return{"--n-line-height":c,"--n-color":a,"--n-border-radius":f,"--n-text-color":l,"--n-box-shadow":u,"--n-bezier":n,"--n-bezier-out":r,"--n-bezier-in":i,"--n-header-padding":d,"--n-body-padding":g,"--n-footer-padding":h,"--n-title-text-color":p,"--n-title-font-size":v,"--n-title-font-weight":m,"--n-header-border-bottom":y,"--n-footer-border-top":_,"--n-close-icon-color":b,"--n-close-icon-color-hover":k,"--n-close-icon-color-pressed":w,"--n-close-size":o.closeSize,"--n-close-color-hover":C,"--n-close-color-pressed":S,"--n-close-icon-size":x,"--n-close-border-radius":o.closeBorderRadius,"--n-resize-trigger-color-hover":o.resizableTriggerColorHover}})),_=o?Ae("drawer",void 0,y,e):void 0;return{mergedClsPrefix:i,namespace:r,mergedBodyStyle:g,handleOutsideClick:function(e){v(e)},handleMaskClick:v,handleEsc:function(t){var n;null===(n=e.onEsc)||void 0===n||n.call(e),e.show&&e.closeOnEsc&&function(e){return!Ai.has(e)}(t)&&(p.value||m(!1))},mergedTheme:s,cssVars:o?void 0:y,themeClass:null==_?void 0:_.themeClass,onRender:null==_?void 0:_.onRender,isMounted:a}},render:function(){var e=this,t=this.mergedClsPrefix;return F(Si,{to:this.to,show:this.show},{default:function(){var n;return null===(n=e.onRender)||void 0===n||n.call(e),V(F("div",{class:["".concat(t,"-drawer-container"),e.namespace,e.themeClass],style:e.cssVars,role:"none"},e.showMask?F(U,{name:"fade-in-transition",appear:e.isMounted},{default:function(){return e.show?F("div",{"aria-hidden":!0,class:["".concat(t,"-drawer-mask"),"transparent"===e.showMask&&"".concat(t,"-drawer-mask--invisible")],onClick:e.handleMaskClick}):null}}):null,F(Or,Object.assign({},e.$attrs,{class:[e.drawerClass,e.$attrs.class],style:[e.mergedBodyStyle,e.$attrs.style],blockScroll:e.blockScroll,contentStyle:e.contentStyle,contentClass:e.contentClass,placement:e.placement,scrollbarProps:e.scrollbarProps,show:e.show,displayDirective:e.displayDirective,nativeScrollbar:e.nativeScrollbar,onAfterEnter:e.onAfterEnter,onAfterLeave:e.onAfterLeave,trapFocus:e.trapFocus,autoFocus:e.autoFocus,resizable:e.resizable,maxHeight:e.maxHeight,minHeight:e.minHeight,maxWidth:e.maxWidth,minWidth:e.minWidth,showMask:e.showMask,onEsc:e.handleEsc,onClickoutside:e.handleOutsideClick}),e.$slots)),[[wi,{zIndex:e.zIndex,enabled:e.show}]])}})}}),Zr={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"};var Yr,Qr={name:"Space",self:function(){return Zr}};function Xr(){if(!se)return!0;if(void 0===Yr){var e=document.createElement("div");e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e);var t=1===e.scrollHeight;return document.body.removeChild(e),Yr=t}return Yr}var $r,Jr=Object.assign(Object.assign({},Ie.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrapItem:{type:Boolean,default:!0},itemClass:String,itemStyle:[String,Object],wrap:{type:Boolean,default:!0},internalUseGap:{type:Boolean,default:void 0}}),eo=e("_",A((f($r={name:"Space",props:Jr},"setup",(function(e){var t=Ee(e),n=t.mergedClsPrefixRef,i=t.mergedRtlRef,r=Ie("Space","-space",void 0,Qr,e,n),o=Me("Space",i,n);return f({useGap:Xr(),rtlEnabled:o,mergedClsPrefix:n},"margin",O((function(){var t=e.size;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};var n=r.value.self[Te("gap",t)],i=Qe(n),o=i.row,a=i.col;return{horizontal:Xe(a),vertical:Xe(o)}})))})),f($r,"render",(function(){var e=this,t=e.vertical,n=e.reverse,i=e.align,r=e.inline,o=e.justify,a=e.itemClass,s=e.itemStyle,l=e.margin,u=e.wrap,c=e.mergedClsPrefix,d=e.rtlEnabled,h=e.useGap,f=e.wrapItem,g=e.internalUseGap,v=Pi(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=e.$slots[t];return void 0===i?n:i()}(this),!1);if(!v.length)return null;var p="".concat(l.horizontal,"px"),m="".concat(l.horizontal/2,"px"),y="".concat(l.vertical,"px"),_="".concat(l.vertical/2,"px"),b=v.length-1,k=o.startsWith("space-");return F("div",{role:"none",class:["".concat(c,"-space"),d&&"".concat(c,"-space--rtl")],style:{display:r?"inline-flex":"flex",flexDirection:t&&!n?"column":t&&n?"column-reverse":!t&&n?"row-reverse":"row",justifyContent:["start","end"].includes(o)?"flex-".concat(o):o,flexWrap:!u||t?"nowrap":"wrap",marginTop:h||t?"":"-".concat(_),marginBottom:h||t?"":"-".concat(_),alignItems:i,gap:h?"".concat(l.vertical,"px ").concat(l.horizontal,"px"):""}},f||!h&&!g?v.map((function(e,n){return e.type===R?e:F("div",{role:"none",class:a,style:[s,{maxWidth:"100%"},h?"":t?{marginBottom:n!==b?y:""}:d?{marginLeft:k?"space-between"===o&&n===b?"":m:n!==b?p:"",marginRight:k?"space-between"===o&&0===n?"":m:"",paddingTop:_,paddingBottom:_}:{marginRight:k?"space-between"===o&&n===b?"":m:n!==b?p:"",marginLeft:k?"space-between"===o&&0===n?"":m:"",paddingTop:_,paddingBottom:_}]},e)})):v)})),$r))),to={feedbackPadding:"4px 0 0 2px",feedbackHeightSmall:"24px",feedbackHeightMedium:"24px",feedbackHeightLarge:"26px",feedbackFontSizeSmall:"13px",feedbackFontSizeMedium:"14px",feedbackFontSizeLarge:"14px",labelFontSizeLeftSmall:"14px",labelFontSizeLeftMedium:"14px",labelFontSizeLeftLarge:"15px",labelFontSizeTopSmall:"13px",labelFontSizeTopMedium:"14px",labelFontSizeTopLarge:"14px",labelHeightSmall:"24px",labelHeightMedium:"26px",labelHeightLarge:"28px",labelPaddingVertical:"0 0 6px 2px",labelPaddingHorizontal:"0 12px 0 0",labelTextAlignVertical:"left",labelTextAlignHorizontal:"right",labelFontWeight:"400"};var no={name:"Form",common:Le,self:function(e){var t=e.heightSmall,n=e.heightMedium,i=e.heightLarge,r=e.textColor1,o=e.errorColor,a=e.warningColor,s=e.lineHeight,l=e.textColor3;return Object.assign(Object.assign({},to),{blankHeightSmall:t,blankHeightMedium:n,blankHeightLarge:i,lineHeight:s,labelTextColor:r,asteriskColor:o,feedbackTextColorError:o,feedbackTextColorWarning:a,feedbackTextColor:l})}};var io=Ke({name:"Log",common:Le,peers:{Scrollbar:qe,Code:Mr},self:function(e){var t=e.textColor2,n=e.modalColor,i=e.borderColor,r=e.fontSize,o=e.primaryColor;return{loaderFontSize:r,loaderTextColor:t,loaderColor:n,loaderBorder:"1px solid ".concat(i),loadingColor:o}}}),ro=ae("n-form"),oo=ae("n-form-item-insts"),ao=_e("form",[be("inline","\n width: 100%;\n display: inline-flex;\n align-items: flex-start;\n align-content: space-around;\n ",[_e("form-item",{width:"auto",marginRight:"18px"},[ke("&:last-child",{marginRight:0})])])]),so=function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?n(e.value):r(e.value).then(a,s)}l((i=i.apply(e,t||[])).next())}))},lo=Object.assign(Object.assign({},Ie.props),{inline:Boolean,labelWidth:[Number,String],labelAlign:String,labelPlacement:{type:String,default:"top"},model:{type:Object,default:function(){}},rules:Object,disabled:Boolean,size:String,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:!0},onSubmit:{type:Function,default:function(e){e.preventDefault()}},showLabel:{type:Boolean,default:void 0},validateMessages:Object}),uo=A({name:"Form",props:lo,setup:function(e){var t=Ee(e).mergedClsPrefixRef;Ie("Form","-form",ao,no,e,t);var i={},r=n(void 0);B(ro,{props:e,maxChildLabelWidthRef:r,deriveMaxChildLabelWidth:function(e){var t=r.value;(void 0===t||e>=t)&&(r.value=e)}}),B(oo,{formItems:i});var o={validate:function(e){return so(this,arguments,void 0,(function(e){var t,n=arguments;return E(this,(function(r){switch(r.label){case 0:return t=n.length>1&&void 0!==n[1]?n[1]:function(){return!0},[4,new Promise((function(n,r){var o=[],a=!0,s=!1,l=void 0;try{for(var u,c=Oi(i)[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value,h=i[d],f=!0,g=!1,v=void 0;try{for(var p,m=h[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value;y.path&&o.push(y.internalValidate(null,t))}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}Promise.all(o).then((function(t){var i=t.some((function(e){return!e.valid})),o=[],a=[];t.forEach((function(e){var t,n;(null===(t=e.errors)||void 0===t?void 0:t.length)&&o.push(e.errors),(null===(n=e.warnings)||void 0===n?void 0:n.length)&&a.push(e.warnings)})),e&&e(o.length?o:void 0,{warnings:a.length?a:void 0}),i?r(o.length?o:void 0):n({warnings:a.length?a:void 0})}))}))];case 1:return[2,r.sent()]}}))}))},restoreValidation:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=Oi(i)[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=i[a],l=!0,u=!1,c=void 0;try{for(var d,h=s[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){d.value.restoreValidation()}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}};return Object.assign(o,{mergedClsPrefix:t})},render:function(){var e=this.mergedClsPrefix;return F("form",{class:["".concat(e,"-form"),this.inline&&"".concat(e,"-form--inline")],onSubmit:this.onSubmit},this.$slots)}});function co(){return co=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},co.apply(this,arguments)}function ho(e){return ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ho(e)}function fo(e,t){return fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fo(e,t)}function go(e,t,n){return go=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&fo(r,n.prototype),r},go.apply(null,arguments)}function vo(e){var t="function"==typeof Map?new Map:void 0;return vo=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return go(e,arguments,ho(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),fo(n,e)},vo(e)}var po=/%[sdj%]/g,mo=function(){};function yo(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function _o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=0,o=n.length;return"function"==typeof e?e.apply(null,n):"string"==typeof e?e.replace(po,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}break;default:return e}})):e}function bo(e,t){return null==e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!=typeof e||e))}function ko(e,t,n){var i=0,r=e.length;!function o(a){if(a&&a.length)n(a);else{var s=i;i+=1,s<r?t(e[s],o):n([])}}([])}var wo=function(e){function t(t,n){var i;return(i=e.call(this,"Async Validation Error")||this).errors=t,i.fields=n,i}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,fo(e,t)}(t,e),t}(vo(Error));function Co(e,t,n,i,r){if(t.first){var o=new Promise((function(t,o){var a=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n]||[])})),t}(e);ko(a,n,(function(e){return i(e),e.length?o(new wo(e,yo(e))):t(r)}))}));return o.catch((function(e){return e})),o}var a=!0===t.firstFields?Object.keys(e):t.firstFields||[],s=Object.keys(e),l=s.length,u=0,c=[],d=new Promise((function(t,o){var d=function(e){if(c.push.apply(c,e),++u===l)return i(c),c.length?o(new wo(c,yo(c))):t(r)};s.length||(i(c),t(r)),s.forEach((function(t){var i=e[t];-1!==a.indexOf(t)?ko(i,n,d):function(e,t,n){var i=[],r=0,o=e.length;function a(e){i.push.apply(i,e||[]),++r===o&&n(i)}e.forEach((function(e){t(e,a)}))}(i,n,d)}))}));return d.catch((function(e){return e})),d}function So(e,t){return function(n){var i;return i=e.fullFields?function(e,t){for(var n=e,i=0;i<t.length;i++){if(null==n)return n;n=n[t[i]]}return n}(t,e.fullFields):t[n.field||e.fullField],function(e){return!(!e||void 0===e.message)}(n)?(n.field=n.field||e.fullField,n.fieldValue=i,n):{message:"function"==typeof n?n():n,fieldValue:i,field:n.field||e.fullField}}}function xo(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];"object"===(void 0===i?"undefined":L(i))&&"object"===L(e[n])?e[n]=co({},e[n],i):e[n]=i}return e}var Lo,Do=function(e,t,n,i,r,o){!e.required||n.hasOwnProperty(e.field)&&!bo(t,o||e.type)||i.push(_o(r.messages.required,e.fullField))},No=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,Io=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,Eo={integer:function(e){return Eo.number(e)&&parseInt(e,10)===e},float:function(e){return Eo.number(e)&&!Eo.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(e){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===(void 0===e?"undefined":L(e))&&!Eo.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&e.length<=320&&!!e.match(No)},url:function(e){return"string"==typeof e&&e.length<=2048&&!!e.match(function(){if(Lo)return Lo;var e="[a-fA-F\\d:]",t=function(t){return t&&t.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",r=("\n(?:\n(?:"+i+":){7}(?:"+i+"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:"+i+":){6}(?:"+n+"|:"+i+"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:"+i+":){5}(?::"+n+"|(?::"+i+"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:"+i+":){4}(?:(?::"+i+"){0,1}:"+n+"|(?::"+i+"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:"+i+":){3}(?:(?::"+i+"){0,2}:"+n+"|(?::"+i+"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:"+i+":){2}(?:(?::"+i+"){0,3}:"+n+"|(?::"+i+"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:"+i+":){1}(?:(?::"+i+"){0,4}:"+n+"|(?::"+i+"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::"+i+"){0,5}:"+n+"|(?::"+i+"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp("(?:^"+n+"$)|(?:^"+r+"$)"),a=new RegExp("^"+n+"$"),s=new RegExp("^"+r+"$"),l=function(e){return e&&e.exact?o:new RegExp("(?:"+t(e)+n+t(e)+")|(?:"+t(e)+r+t(e)+")","g")};l.v4=function(e){return e&&e.exact?a:new RegExp(""+t(e)+n+t(e),"g")},l.v6=function(e){return e&&e.exact?s:new RegExp(""+t(e)+r+t(e),"g")};var u=l.v4().source,c=l.v6().source;return Lo=new RegExp("(?:^(?:(?:(?:[a-z]+:)?//)|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|"+u+"|"+c+'|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#][^\\s"]*)?$)',"i")}())},hex:function(e){return"string"==typeof e&&!!e.match(Io)}},Mo="enum",To={required:Do,whitespace:function(e,t,n,i,r){(/^\s+$/.test(t)||""===t)&&i.push(_o(r.messages.whitespace,e.fullField))},type:function(e,t,n,i,r){if(e.required&&void 0===t)Do(e,t,n,i,r);else{var o=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(o)>-1?Eo[o](t)||i.push(_o(r.messages.types[o],e.fullField,e.type)):o&&(void 0===t?"undefined":L(t))!==e.type&&i.push(_o(r.messages.types[o],e.fullField,e.type))}},range:function(e,t,n,i,r){var o="number"==typeof e.len,a="number"==typeof e.min,s="number"==typeof e.max,l=t,u=null,c="number"==typeof t,d="string"==typeof t,h=Array.isArray(t);if(c?u="number":d?u="string":h&&(u="array"),!u)return!1;h&&(l=t.length),d&&(l=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),o?l!==e.len&&i.push(_o(r.messages[u].len,e.fullField,e.len)):a&&!s&&l<e.min?i.push(_o(r.messages[u].min,e.fullField,e.min)):s&&!a&&l>e.max?i.push(_o(r.messages[u].max,e.fullField,e.max)):a&&s&&(l<e.min||l>e.max)&&i.push(_o(r.messages[u].range,e.fullField,e.min,e.max))},enum:function(e,t,n,i,r){e[Mo]=Array.isArray(e[Mo])?e[Mo]:[],-1===e[Mo].indexOf(t)&&i.push(_o(r.messages[Mo],e.fullField,e[Mo].join(", ")))},pattern:function(e,t,n,i,r){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(_o(r.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(t)||i.push(_o(r.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},Ro=function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(bo(t)&&!e.required)return n();To.required(e,t,i,o,r),void 0!==t&&To.type(e,t,i,o,r)}n(o)},Ao=function(e,t,n,i,r){var o=e.type,a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(bo(t,o)&&!e.required)return n();To.required(e,t,i,a,r,o),bo(t,o)||To.type(e,t,i,a,r)}n(a)},Po={string:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(bo(t,"string")&&!e.required)return n();To.required(e,t,i,o,r,"string"),bo(t,"string")||(To.type(e,t,i,o,r),To.range(e,t,i,o,r),To.pattern(e,t,i,o,r),!0===e.whitespace&&To.whitespace(e,t,i,o,r))}n(o)},method:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(bo(t)&&!e.required)return n();To.required(e,t,i,o,r),void 0!==t&&To.type(e,t,i,o,r)}n(o)},number:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(""===t&&(t=void 0),bo(t)&&!e.required)return n();To.required(e,t,i,o,r),void 0!==t&&(To.type(e,t,i,o,r),To.range(e,t,i,o,r))}n(o)},boolean:Ro,regexp:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(bo(t)&&!e.required)return n();To.required(e,t,i,o,r),bo(t)||To.type(e,t,i,o,r)}n(o)},integer:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(bo(t)&&!e.required)return n();To.required(e,t,i,o,r),void 0!==t&&(To.type(e,t,i,o,r),To.range(e,t,i,o,r))}n(o)},float:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(bo(t)&&!e.required)return n();To.required(e,t,i,o,r),void 0!==t&&(To.type(e,t,i,o,r),To.range(e,t,i,o,r))}n(o)},array:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(null==t&&!e.required)return n();To.required(e,t,i,o,r,"array"),null!=t&&(To.type(e,t,i,o,r),To.range(e,t,i,o,r))}n(o)},object:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(bo(t)&&!e.required)return n();To.required(e,t,i,o,r),void 0!==t&&To.type(e,t,i,o,r)}n(o)},enum:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(bo(t)&&!e.required)return n();To.required(e,t,i,o,r),void 0!==t&&To.enum(e,t,i,o,r)}n(o)},pattern:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(bo(t,"string")&&!e.required)return n();To.required(e,t,i,o,r),bo(t,"string")||To.pattern(e,t,i,o,r)}n(o)},date:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(bo(t,"date")&&!e.required)return n();var a;if(To.required(e,t,i,o,r),!bo(t,"date"))a=t instanceof Date?t:new Date(t),To.type(e,a,i,o,r),a&&To.range(e,a.getTime(),i,o,r)}n(o)},url:Ao,hex:Ao,email:Ao,required:function(e,t,n,i,r){var o=[],a=Array.isArray(t)?"array":void 0===t?"undefined":L(t);To.required(e,t,i,o,r,a),n(o)},any:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(bo(t)&&!e.required)return n();To.required(e,t,i,o,r)}n(o)}};function Oo(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Fo=Oo(),Wo=function(){function e(e){this.rules=null,this._messages=Fo,this.define(e)}var t=e.prototype;return t.define=function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==(void 0===e?"undefined":L(e))||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var i=e[n];t.rules[n]=Array.isArray(i)?i:[i]}))},t.messages=function(e){return e&&(this._messages=xo(Oo(),e)),this._messages},t.validate=function(t,n,i){var r=this;void 0===n&&(n={}),void 0===i&&(i=function(){});var o=t,a=n,s=i;if("function"==typeof a&&(s=a,a={}),!this.rules||0===Object.keys(this.rules).length)return s&&s(null,o),Promise.resolve(o);if(a.messages){var l=this.messages();l===Fo&&(l=Oo()),xo(l,a.messages),a.messages=l}else a.messages=this.messages();var u={};(a.keys||Object.keys(this.rules)).forEach((function(e){var n=r.rules[e],i=o[e];n.forEach((function(n){var a=n;"function"==typeof a.transform&&(o===t&&(o=co({},o)),i=o[e]=a.transform(i)),(a="function"==typeof a?{validator:a}:co({},a)).validator=r.getValidationMethod(a),a.validator&&(a.field=e,a.fullField=a.fullField||e,a.type=r.getType(a),u[e]=u[e]||[],u[e].push({rule:a,value:i,source:o,field:e}))}))}));var c={};return Co(u,a,(function(t,n){var i,r=t.rule,s=!("object"!==r.type&&"array"!==r.type||"object"!==L(r.fields)&&"object"!==L(r.defaultField));function l(e,t){return co({},t,{fullField:r.fullField+"."+e,fullFields:r.fullFields?[].concat(r.fullFields,[e]):[e]})}function u(i){void 0===i&&(i=[]);var u=Array.isArray(i)?i:[i];!a.suppressWarning&&u.length&&e.warning("async-validator:",u),u.length&&void 0!==r.message&&(u=[].concat(r.message));var d=u.map(So(r,o));if(a.first&&d.length)return c[r.field]=1,n(d);if(s){if(r.required&&!t.value)return void 0!==r.message?d=[].concat(r.message).map(So(r,o)):a.error&&(d=[a.error(r,_o(a.messages.required,r.field))]),n(d);var h={};r.defaultField&&Object.keys(t.value).map((function(e){h[e]=r.defaultField})),h=co({},h,t.rule.fields);var f={};Object.keys(h).forEach((function(e){var t=h[e],n=Array.isArray(t)?t:[t];f[e]=n.map(l.bind(null,e))}));var g=new e(f);g.messages(a.messages),t.rule.options&&(t.rule.options.messages=a.messages,t.rule.options.error=a.error),g.validate(t.value,t.rule.options||a,(function(e){var t=[];d&&d.length&&t.push.apply(t,d),e&&e.length&&t.push.apply(t,e),n(t.length?t:null)}))}else n(d)}if(s=s&&(r.required||!r.required&&t.value),r.field=t.field,r.asyncValidator)i=r.asyncValidator(r,t.value,u,t.source,a);else if(r.validator){try{i=r.validator(r,t.value,u,t.source,a)}catch(e){null==console.error||console.error(e),a.suppressValidatorError||setTimeout((function(){throw e}),0),u(e.message)}!0===i?u():!1===i?u("function"==typeof r.message?r.message(r.fullField||r.field):r.message||(r.fullField||r.field)+" fails"):i instanceof Array?u(i):i instanceof Error&&u(i.message)}i&&i.then&&i.then((function(){return u()}),(function(e){return u(e)}))}),(function(e){!function(e){var t=[],n={};function i(e){var n;Array.isArray(e)?t=(n=t).concat.apply(n,e):t.push(e)}for(var r=0;r<e.length;r++)i(e[r]);t.length?(n=yo(t),s(t,n)):s(null,o)}(e)}),o)},t.getType=function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!Po.hasOwnProperty(e.type))throw new Error(_o("Unknown rule type %s",e.type));return e.type||"string"},t.getValidationMethod=function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?Po.required:Po[this.getType(e)]||void 0},e}();Wo.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");Po[e]=t},Wo.warning=mo,Wo.messages=Fo,Wo.validators=Po;var Bo=xe.cubicBezierEaseInOut;var Ho=_e("form-item","\n display: grid;\n line-height: var(--n-line-height);\n",[_e("form-item-label","\n grid-area: label;\n align-items: center;\n line-height: 1.25;\n text-align: var(--n-label-text-align);\n font-size: var(--n-label-font-size);\n min-height: var(--n-label-height);\n padding: var(--n-label-padding);\n color: var(--n-label-text-color);\n transition: color .3s var(--n-bezier);\n box-sizing: border-box;\n font-weight: var(--n-label-font-weight);\n ",[Ne("asterisk","\n white-space: nowrap;\n user-select: none;\n -webkit-user-select: none;\n color: var(--n-asterisk-color);\n transition: color .3s var(--n-bezier);\n "),Ne("asterisk-placeholder","\n grid-area: mark;\n user-select: none;\n -webkit-user-select: none;\n visibility: hidden; \n ")]),_e("form-item-blank","\n grid-area: blank;\n min-height: var(--n-blank-height);\n "),be("auto-label-width",[_e("form-item-label","white-space: nowrap;")]),be("left-labelled",'\n grid-template-areas:\n "label blank"\n "label feedback";\n grid-template-columns: auto minmax(0, 1fr);\n grid-template-rows: auto 1fr;\n align-items: flex-start;\n ',[_e("form-item-label","\n display: grid;\n grid-template-columns: 1fr auto;\n min-height: var(--n-blank-height);\n height: auto;\n box-sizing: border-box;\n flex-shrink: 0;\n flex-grow: 0;\n ",[be("reverse-columns-space","\n grid-template-columns: auto 1fr;\n "),be("left-mark",'\n grid-template-areas:\n "mark text"\n ". text";\n '),be("right-mark",'\n grid-template-areas: \n "text mark"\n "text .";\n '),be("right-hanging-mark",'\n grid-template-areas: \n "text mark"\n "text .";\n '),Ne("text","\n grid-area: text; \n "),Ne("asterisk","\n grid-area: mark; \n align-self: end;\n ")])]),be("top-labelled",'\n grid-template-areas:\n "label"\n "blank"\n "feedback";\n grid-template-rows: minmax(var(--n-label-height), auto) 1fr;\n grid-template-columns: minmax(0, 100%);\n ',[be("no-label",'\n grid-template-areas:\n "blank"\n "feedback";\n grid-template-rows: 1fr;\n '),_e("form-item-label","\n display: flex;\n align-items: flex-start;\n justify-content: var(--n-label-text-align);\n ")]),_e("form-item-blank","\n box-sizing: border-box;\n display: flex;\n align-items: center;\n position: relative;\n "),_e("form-item-feedback-wrapper","\n grid-area: feedback;\n box-sizing: border-box;\n min-height: var(--n-feedback-height);\n font-size: var(--n-feedback-font-size);\n line-height: 1.25;\n transform-origin: top left;\n ",[ke("&:not(:empty)","\n padding: var(--n-feedback-padding);\n "),_e("form-item-feedback",{transition:"color .3s var(--n-bezier)",color:"var(--n-feedback-text-color)"},[be("warning",{color:"var(--n-feedback-text-color-warning)"}),be("error",{color:"var(--n-feedback-text-color-error)"}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?"fade-down":t,i=e.fromOffset,r=void 0===i?"-4px":i,o=e.enterDuration,a=void 0===o?".3s":o,s=e.leaveDuration,l=void 0===s?".3s":s,u=e.enterCubicBezier,c=void 0===u?Bo:u,d=e.leaveCubicBezier,h=void 0===d?Bo:d;return[ke("&.".concat(n,"-transition-enter-from, &.").concat(n,"-transition-leave-to"),{opacity:0,transform:"translateY(".concat(r,")")}),ke("&.".concat(n,"-transition-enter-to, &.").concat(n,"-transition-leave-from"),{opacity:1,transform:"translateY(0)"}),ke("&.".concat(n,"-transition-leave-active"),{transition:"opacity ".concat(l," ").concat(h,", transform ").concat(l," ").concat(h)}),ke("&.".concat(n,"-transition-enter-active"),{transition:"opacity ".concat(a," ").concat(c,", transform ").concat(a," ").concat(c)})]}({fromOffset:"-3px",enterDuration:".3s",leaveDuration:".2s"})])])]);var Vo,zo=function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?n(e.value):r(e.value).then(a,s)}l((i=i.apply(e,t||[])).next())}))},Uo=Object.assign(Object.assign({},Ie.props),{label:String,labelWidth:[Number,String],labelStyle:[String,Object],labelAlign:String,labelPlacement:String,path:String,first:Boolean,rulePath:String,required:Boolean,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:void 0},rule:[Object,Array],size:String,ignorePathChange:Boolean,validationStatus:String,feedback:String,feedbackClass:String,feedbackStyle:[String,Object],showLabel:{type:Boolean,default:void 0},labelProps:Object});function jo(e,t){return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];try{var o=e.apply(void 0,x(i));return!t&&("boolean"==typeof o||o instanceof Error||Array.isArray(o))||(null==o?void 0:o.then)?o:(void 0===o||Je("form-item/validate","You return a ".concat(void 0===o?"undefined":L(o)," ")+"typed value in the validator method, which is not recommended. Please use ".concat(t?"`Promise`":"`boolean`, `Error` or `Promise`"," typed value instead.")),!0)}catch(e){return Je("form-item/validate","An error is catched in the validation, so the validation won't be done. Your callback in `validate` method of `n-form` or `n-form-item` won't be called in this validation."),void console.error(e)}}}var Ko,qo=A((f(Vo={name:"FormItem",props:Uo},"setup",(function(e){var t=this;ni(oo,"formItems",P(e,"path"));var i=Ee(e),r=i.mergedClsPrefixRef,o=i.inlineThemeDisabled,s=d(ro,null),l=function(e){var t=d(ro,null);return{mergedSize:O((function(){return void 0!==e.size?e.size:void 0!==(null==t?void 0:t.props.size)?t.props.size:"medium"}))}}(e),u=function(e){var t=d(ro,null),i=O((function(){var n=e.labelPlacement;return void 0!==n?n:(null==t?void 0:t.props.labelPlacement)?t.props.labelPlacement:"top"})),r=O((function(){return"left"===i.value&&("auto"===e.labelWidth||"auto"===(null==t?void 0:t.props.labelWidth))})),o=O((function(){if("top"!==i.value){var n=e.labelWidth;if(void 0!==n&&"auto"!==n)return Ri(n);if(r.value){var o=null==t?void 0:t.maxChildLabelWidthRef.value;return void 0!==o?Ri(o):void 0}return void 0!==(null==t?void 0:t.props.labelWidth)?Ri(t.props.labelWidth):void 0}})),a=O((function(){return e.labelAlign||((null==t?void 0:t.props.labelAlign)?t.props.labelAlign:void 0)})),s=O((function(){var t;return[null===(t=e.labelProps)||void 0===t?void 0:t.style,e.labelStyle,{width:o.value}]})),l=O((function(){var n=e.showRequireMark;return void 0!==n?n:null==t?void 0:t.props.showRequireMark})),u=O((function(){var n=e.requireMarkPlacement;return void 0!==n?n:(null==t?void 0:t.props.requireMarkPlacement)||"right"})),c=n(!1),h=n(!1),f=O((function(){var t=e.validationStatus;return void 0!==t?t:c.value?"error":h.value?"warning":void 0})),g=O((function(){var n=e.showFeedback;return void 0!==n?n:void 0===(null==t?void 0:t.props.showFeedback)||t.props.showFeedback})),v=O((function(){var n=e.showLabel;return void 0!==n?n:void 0===(null==t?void 0:t.props.showLabel)||t.props.showLabel}));return{validationErrored:c,validationWarned:h,mergedLabelStyle:s,mergedLabelPlacement:i,mergedLabelAlign:a,mergedShowRequireMark:l,mergedRequireMarkPlacement:u,mergedValidationStatus:f,mergedShowFeedback:g,mergedShowLabel:v,isAutoLabelWidth:r}}(e),c=u.validationErrored,h=u.validationWarned,g=function(e){var t=d(ro,null),n=O((function(){var t=e.rulePath;if(void 0!==t)return t;var n=e.path;return void 0!==n?n:void 0})),i=O((function(){var i,r=[],o=e.rule;if(void 0!==o&&(Array.isArray(o)?(i=r).push.apply(i,x(o)):r.push(o)),t){var a=t.props.rules,s=n.value;if(void 0!==a&&void 0!==s){var l,u=ir(a,s);void 0!==u&&(Array.isArray(u)?(l=r).push.apply(l,x(u)):r.push(u))}}return r})),r=O((function(){return i.value.some((function(e){return e.required}))})),o=O((function(){return r.value||e.required}));return{mergedRules:i,mergedRequired:o}}(e),v=g.mergedRequired,p=g.mergedRules,m=l.mergedSize,y=u.mergedLabelPlacement,_=u.mergedLabelAlign,b=u.mergedRequireMarkPlacement,k=n([]),w=n(Qn()),C=s?P(s.props,"disabled"):n(!1),S=Ie("Form","-form-item",Ho,no,e,r);function N(){k.value=[],c.value=!1,h.value=!1,e.feedback&&(w.value=Qn())}a(P(e,"path"),(function(){e.ignorePathChange||N()}));var I=function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return zo(t,x(i),void 0,(function(){var t,n,i,r,o,a,l,u,d,g,v,m,y,_,b,w,C,S,x,L=arguments;return E(this,(function(D){switch(D.label){case 0:return t=L.length>0&&void 0!==L[0]?L[0]:null,n=L.length>1&&void 0!==L[1]?L[1]:function(){return!0},i=L.length>2&&void 0!==L[2]?L[2]:{suppressWarning:!0},r=e.path,i?i.first||(i.first=e.first):i={},o=p.value,a=s?ir(s.props.model,r||""):void 0,l={},u={},d=(t?o.filter((function(e){return Array.isArray(e.trigger)?e.trigger.includes(t):e.trigger===t})):o).filter(n).map((function(e,t){var n=Object.assign({},e);if(n.validator&&(n.validator=jo(n.validator,!1)),n.asyncValidator&&(n.asyncValidator=jo(n.asyncValidator,!0)),n.renderMessage){var i="__renderMessage__".concat(t);u[i]=n.message,n.message=i,l[i]=n.renderMessage}return n})),g=d.filter((function(e){return"warning"!==e.level})),v=d.filter((function(e){return"warning"===e.level})),m={valid:!0,errors:void 0,warnings:void 0},d.length?(_=new Wo(f({},y=null!=r?r:"__n_no_path__",g)),b=new Wo(f({},y,v)),(w=((null==s?void 0:s.props)||{}).validateMessages)&&(_.messages(w),b.messages(w)),C=function(e){k.value=e.map((function(e){var t=(null==e?void 0:e.message)||"";return{key:t,render:function(){return t.startsWith("__renderMessage__")?l[t]():t}}})),e.forEach((function(e){var t;(null===(t=e.message)||void 0===t?void 0:t.startsWith("__renderMessage__"))&&(e.message=u[e.message])}))},g.length?[4,new Promise((function(e){_.validate(f({},y,a),i,e)}))]:[3,2]):[2,m];case 1:(null==(S=D.sent())?void 0:S.length)&&(m.valid=!1,m.errors=S,C(S)),D.label=2;case 2:return!v.length||m.errors?[3,4]:[4,new Promise((function(e){b.validate(f({},y,a),i,e)}))];case 3:(null==(x=D.sent())?void 0:x.length)&&(C(x),m.warnings=x),D.label=4;case 4:return m.errors||m.warnings?(c.value=!!m.errors,h.value=!!m.warnings):N(),[2,m]}}))}))};B($e,{path:P(e,"path"),disabled:C,mergedSize:l.mergedSize,mergedValidationStatus:u.mergedValidationStatus,restoreValidation:N,handleContentBlur:function(){I("blur")},handleContentChange:function(){I("change")},handleContentFocus:function(){I("focus")},handleContentInput:function(){I("input")}});var M={validate:function(e,t){return zo(this,void 0,void 0,(function(){var n,i,r,o;return E(this,(function(a){switch(a.label){case 0:return"string"==typeof e?(n=e,i=t):null!==e&&"object"===(void 0===e?"undefined":L(e))&&(n=e.trigger,i=e.callback,r=e.shouldRuleBeApplied,o=e.options),[4,new Promise((function(e,t){I(n,r,o).then((function(n){var r=n.valid,o=n.errors,a=n.warnings;r?(i&&i(void 0,{warnings:a}),e({warnings:a})):(i&&i(o,{warnings:a}),t(o))}))}))];case 1:return[2,a.sent()]}}))}))},restoreValidation:N,internalValidate:I},T=n(null);D((function(){if(u.isAutoLabelWidth.value){var e=T.value;if(null!==e){var t=e.style.whiteSpace;e.style.whiteSpace="nowrap",e.style.width="",null==s||s.deriveMaxChildLabelWidth(Number(getComputedStyle(e).width.slice(0,-2))),e.style.whiteSpace=t}}}));var R=O((function(){var e,t=m.value,n=y.value,i="top"===n?"vertical":"horizontal",r=S.value,o=r.common.cubicBezierEaseInOut,a=r.self,s=a.labelTextColor,l=a.asteriskColor,u=a.lineHeight,c=a.feedbackTextColor,d=a.feedbackTextColorWarning,h=a.feedbackTextColorError,f=a.feedbackPadding,g=a.labelFontWeight,v=a[Te("labelHeight",t)],p=a[Te("blankHeight",t)],b=a[Te("feedbackFontSize",t)],k=a[Te("feedbackHeight",t)],w=a[Te("labelPadding",i)],C=a[Te("labelTextAlign",i)],x=a[Te(Te("labelFontSize",n),t)],L=null!==(e=_.value)&&void 0!==e?e:C;return"top"===n&&(L="right"===L?"flex-end":"flex-start"),{"--n-bezier":o,"--n-line-height":u,"--n-blank-height":p,"--n-label-font-size":x,"--n-label-text-align":L,"--n-label-height":v,"--n-label-padding":w,"--n-label-font-weight":g,"--n-asterisk-color":l,"--n-label-text-color":s,"--n-feedback-padding":f,"--n-feedback-font-size":b,"--n-feedback-height":k,"--n-feedback-text-color":c,"--n-feedback-text-color-warning":d,"--n-feedback-text-color-error":h}})),A=o?Ae("form-item",O((function(){var e;return"".concat(m.value[0]).concat(y.value[0]).concat((null===(e=_.value)||void 0===e?void 0:e[0])||"")})),R,e):void 0,F=O((function(){return"left"===y.value&&"left"===b.value&&"left"===_.value}));return Object.assign(Object.assign(Object.assign(Object.assign({labelElementRef:T,mergedClsPrefix:r,mergedRequired:v,feedbackId:w,renderExplains:k,reverseColSpace:F},u),l),M),{cssVars:o?void 0:R,themeClass:null==A?void 0:A.themeClass,onRender:null==A?void 0:A.onRender})})),f(Vo,"render",(function(){var e=this,t=this,n=t.$slots,i=t.mergedClsPrefix,r=t.mergedShowLabel,o=t.mergedShowRequireMark,a=t.mergedRequireMarkPlacement,s=t.onRender,l=void 0!==o?o:this.mergedRequired;null==s||s();return F("div",{class:["".concat(i,"-form-item"),this.themeClass,"".concat(i,"-form-item--").concat(this.mergedSize,"-size"),"".concat(i,"-form-item--").concat(this.mergedLabelPlacement,"-labelled"),this.isAutoLabelWidth&&"".concat(i,"-form-item--auto-label-width"),!r&&"".concat(i,"-form-item--no-label")],style:this.cssVars},r&&function(){var t=e.$slots.label?e.$slots.label():e.label;if(!t)return null;var n=F("span",{class:"".concat(i,"-form-item-label__text")},t),r=l?F("span",{class:"".concat(i,"-form-item-label__asterisk")},"left"!==a?" *":"* "):"right-hanging"===a&&F("span",{class:"".concat(i,"-form-item-label__asterisk-placeholder")}," *"),o=e.labelProps;return F("label",Object.assign({},o,{class:[null==o?void 0:o.class,"".concat(i,"-form-item-label"),"".concat(i,"-form-item-label--").concat(a,"-mark"),e.reverseColSpace&&"".concat(i,"-form-item-label--reverse-columns-space")],style:e.mergedLabelStyle,ref:"labelElementRef"}),"left"===a?[r,n]:[n,r])}(),F("div",{class:["".concat(i,"-form-item-blank"),this.mergedValidationStatus&&"".concat(i,"-form-item-blank--").concat(this.mergedValidationStatus)]},n),this.mergedShowFeedback?F("div",{key:this.feedbackId,style:this.feedbackStyle,class:["".concat(i,"-form-item-feedback-wrapper"),this.feedbackClass]},F(U,{name:"fade-down-transition",mode:"out-in"},{default:function(){var t=e.mergedValidationStatus;return Oe(n.feedback,(function(n){var r,o=e.feedback,a=n||o?F("div",{key:"__feedback__",class:"".concat(i,"-form-item-feedback__line")},n||o):e.renderExplains.length?null===(r=e.renderExplains)||void 0===r?void 0:r.map((function(e){var t=e.key,n=e.render;return F("div",{key:t,class:"".concat(i,"-form-item-feedback__line")},n())})):null;return a?F("div","warning"===t?{key:"controlled-warning",class:"".concat(i,"-form-item-feedback ").concat(i,"-form-item-feedback--warning")}:"error"===t?{key:"controlled-error",class:"".concat(i,"-form-item-feedback ").concat(i,"-form-item-feedback--error")}:"success"===t?{key:"controlled-success",class:"".concat(i,"-form-item-feedback ").concat(i,"-form-item-feedback--success")}:{key:"controlled-default",class:"".concat(i,"-form-item-feedback")},a):null}))}})):null)})),Vo)),Go=ae("n-log"),Zo=A({props:{line:{type:String,default:""}},setup:function(e){var t=d(Go),i=t.trimRef,r=t.highlightRef,o=t.languageRef,s=t.mergedHljsRef,l=n(null),u=O((function(){return i.value?e.line.trim():e.line}));function c(){l.value&&(l.value.innerHTML=function(e,t){var n=s.value;if(n&&e&&n.getLanguage(e))return n.highlight(t,{language:e}).value;return t}(o.value,u.value))}return D((function(){r.value&&c()})),a(P(e,"line"),(function(){r.value&&c()})),{highlight:r,selfRef:l,maybeTrimmedLines:u}},render:function(){var e=this.highlight,t=this.maybeTrimmedLines;return F("pre",{ref:"selfRef"},e?null:t)}}),Yo=A({name:"LogLoader",props:{clsPrefix:{type:String,required:!0}},setup:function(){return{locale:et("Log").localeRef}},render:function(){var e=this.clsPrefix;return F("div",{class:"".concat(e,"-log-loader")},F(tt,{clsPrefix:e,strokeWidth:24,scale:.85}),F("span",{class:"".concat(e,"-log-loader__content")},this.locale.loading))}}),Qo=_e("log","\n position: relative;\n box-sizing: border-box;\n transition: border-color .3s var(--n-bezier);\n",[ke("pre","\n white-space: pre-wrap;\n word-break: break-word;\n margin: 0;\n "),_e("log-loader","\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n box-sizing: border-box;\n position: absolute;\n right: 16px;\n top: 8px;\n height: 34px;\n border-radius: 17px;\n line-height: 34px;\n white-space: nowrap;\n overflow: hidden;\n border: var(--n-loader-border);\n color: var(--n-loader-text-color);\n background-color: var(--n-loader-color);\n font-size: var(--n-loader-font-size);\n ",[fr(),Ne("content","\n display: inline-block;\n vertical-align: bottom;\n line-height: 34px;\n padding-left: 40px;\n padding-right: 20px;\n white-space: nowrap;\n "),_e("base-loading","\n color: var(--n-loading-color);\n position: absolute;\n left: 12px;\n top: calc(50% - 10px);\n font-size: 20px;\n width: 20px;\n height: 20px;\n display: inline-block;\n ")])]),Xo=Object.assign(Object.assign({},Ie.props),{loading:Boolean,trim:Boolean,log:String,fontSize:{type:Number,default:14},lines:{type:Array,default:function(){return[]}},lineHeight:{type:Number,default:1.25},language:String,rows:{type:Number,default:15},offsetTop:{type:Number,default:0},offsetBottom:{type:Number,default:0},hljs:Object,onReachTop:Function,onReachBottom:Function,onRequireMore:Function}),$o=A({name:"Log",props:Xo,setup:function(e){var t=Ee(e),i=t.mergedClsPrefixRef,r=t.inlineThemeDisabled,o=n(!1),a=O((function(){return void 0!==e.language})),s=O((function(){return"calc(".concat(Math.round(e.rows*e.lineHeight*e.fontSize),"px)")})),l=O((function(){var t=e.log;return t?t.split("\n"):e.lines})),u=n(null),c=Ie("Log","-log",Qo,io,e,i);var d=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return fe(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),sr(e,t,{leading:i,maxWait:t,trailing:r})}((function(t){if(o.value)return void K((function(){o.value=!1}));if(u.value){var n=u.value,i=n.containerRef,r=n.contentRef;if(i&&r){var a=i.offsetHeight,s=i.scrollTop,l=s,c=r.offsetHeight-s-a,d=t.deltaY;if(0===l&&d<0){var h=e.onRequireMore;h&&h("top")}if(c<=0&&d>0){var f=e.onRequireMore;f&&f("bottom")}}}}),300);function h(e){var t=u.value;if(t){var n=e.silent,i=e.top,r=e.position;n&&(o.value=!0),void 0!==i?t.scrollTo({left:0,top:i}):"bottom"!==r&&"top"!==r||t.scrollTo({position:r})}}B(Go,{languageRef:P(e,"language"),mergedHljsRef:Fi(e),trimRef:P(e,"trim"),highlightRef:a});var f={scrollTo:h},g=O((function(){var e=c.value,t=e.self,n=t.loaderFontSize,i=t.loaderTextColor,r=t.loaderColor,o=t.loaderBorder,a=t.loadingColor;return{"--n-bezier":e.common.cubicBezierEaseInOut,"--n-loader-font-size":n,"--n-loader-border":o,"--n-loader-color":r,"--n-loader-text-color":i,"--n-loading-color":a}})),v=r?Ae("log",void 0,g,e):void 0;return Object.assign(Object.assign({},f),{mergedClsPrefix:i,scrollbarRef:u,mergedTheme:c,styleHeight:s,mergedLines:l,scrollToTop:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Je("log","`scrollToTop` is deprecated, please use `scrollTo({ position: 'top'})` instead."),h({position:"top",silent:e})},scrollToBottom:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Je("log","`scrollToTop` is deprecated, please use `scrollTo({ position: 'bottom'})` instead."),h({position:"bottom",silent:e})},handleWheel:d,handleScroll:function(t){var n=t.target,i=n.firstElementChild;if(o.value)K((function(){o.value=!1}));else{var r=n.offsetHeight,a=n.scrollTop,s=i.offsetHeight-a-r;if(a<=e.offsetTop){var l=e.onReachTop,u=e.onRequireMore;u&&u("top"),l&&l()}if(s<=e.offsetBottom){var c=e.onReachBottom,d=e.onRequireMore;d&&d("bottom"),c&&c()}}},cssVars:r?void 0:g,themeClass:null==v?void 0:v.themeClass,onRender:null==v?void 0:v.onRender})},render:function(){var e=this,t=this,n=t.mergedClsPrefix,i=t.mergedTheme,r=t.onRender;return null==r||r(),F("div",{class:["".concat(n,"-log"),this.themeClass],style:[{lineHeight:this.lineHeight,height:this.styleHeight},this.cssVars],onWheelPassive:this.handleWheel},[F(Ge,{ref:"scrollbarRef",theme:i.peers.Scrollbar,themeOverrides:i.peerOverrides.Scrollbar,onScroll:this.handleScroll},{default:function(){return F(Ar,{internalNoHighlight:!0,internalFontSize:e.fontSize,theme:i.peers.Code,themeOverrides:i.peerOverrides.Code},{default:function(){return e.mergedLines.map((function(e,t){return F(Zo,{key:t,line:e})}))}})}}),F(U,{name:"fade-in-scale-up-transition"},{default:function(){return e.loading?F(Yo,{clsPrefix:n}):null}})])}});function Jo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[e.length-(1+t)]}function ea(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return e===t};if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var i=0,r=e.length;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function ta(e,t,n){return function(e,t){var n=0,i=e-1;for(;n<=i;){var r=(n+i)/2|0,o=t(r);if(o<0)n=r+1;else{if(!(o>0))return r;i=r-1}}return-(n+1)}(e.length,(function(i){return n(e[i],t)}))}function na(e,t,n){if((e|=0)>=t.length)throw new TypeError("invalid index");var i=t[Math.floor(t.length*Math.random())],r=[],o=[],a=[],s=!0,l=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value,f=n(h,i);f<0?r.push(h):f>0?o.push(h):a.push(h)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return e<r.length?na(e,r,n):e<r.length+a.length?a[0]:na(e-(r.length+a.length),o,n)}function ia(e,t){var n=[],i=void 0,r=!0,o=!1,a=void 0;try{for(var s,l=e.slice(0).sort(t)[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i&&0===t(i[0],u)?i.push(u):(i=[u],n.push(i))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}function ra(e,t){var n,i,r,o,a,s,l,u,c;return E(this,(function(d){switch(d.label){case 0:r=!0,o=!1,a=void 0,d.label=1;case 1:d.trys.push([1,9,10,11]),s=e[Symbol.iterator](),d.label=2;case 2:return(r=(l=s.next()).done)?[3,8]:(u=l.value,void 0!==i&&t(i,u)?(n.push(u),[3,6]):[3,3]);case 3:return n?[4,n]:[3,5];case 4:d.sent(),d.label=5;case 5:n=[u],d.label=6;case 6:i=u,d.label=7;case 7:return r=!0,[3,2];case 8:return[3,11];case 9:return c=d.sent(),o=!0,a=c,[3,11];case 10:try{r||null==s.return||s.return()}finally{if(o)throw a}return[7];case 11:return n?[4,n]:[3,13];case 12:d.sent(),d.label=13;case 13:return[2]}}))}function oa(e,t){for(var n=0;n<=e.length;n++)t(0===n?void 0:e[n-1],n===e.length?void 0:e[n])}function aa(e){return e.filter((function(e){return!!e}))}function sa(e){for(var t=0,n=0;n<e.length;n++)e[n]&&(e[t]=e[n],t+=1);e.length=t}function la(e){return!Array.isArray(e)||0===e.length}function ua(e){return Array.isArray(e)&&e.length>0}function ca(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=new Set;return e.filter((function(e){var i=t(e);return!n.has(i)&&(n.add(i),!0)}))}function da(e,t){return e.length>0?e[0]:t}function ha(e,t){var n="number"==typeof t?e:0;"number"==typeof t?n=e:(n=0,t=e);var i=[];if(n<=t)for(var r=n;r<t;r++)i.push(r);else for(var o=n;o>t;o--)i.push(o);return i}function fa(e,t,n){var i=e.slice(0,t),r=e.slice(t);return i.concat(n,r)}function ga(e,t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),e.unshift(t))}function va(e,t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),e.push(t))}function pa(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.push(s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}function ma(e){return Array.isArray(e)?e:[e]}function ya(e,t,n,i){var r=_a(e,t),o=e.splice(r,n);return void 0===o&&(o=[]),function(e,t,n){var i=_a(e,t),r=e.length,o=n.length;e.length=r+o;for(var a=r-1;a>=i;a--)e[a+o]=e[a];for(var s=0;s<o;s++)e[s+i]=n[s]}(e,r,i),o}function _a(e,t){return t<0?Math.max(t+e.length,0):Math.min(t,e.length)}function ba(e,t){return function(n,i){return t(e(n),e(i))}}!function(e){e.isLessThan=function(e){return e<0},e.isLessThanOrEqual=function(e){return e<=0},e.isGreaterThan=function(e){return e>0},e.isNeitherLessOrGreaterThan=function(e){return 0===e},e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0}(Ko||(Ko={}));var ka=function(e,t){return e-t},wa=function(e,t){return ka(e?1:0,t?1:0)};function Ca(e){return function(t,n){return-e(t,n)}}var Sa=function(){function e(t){u(this,e),this.items=t,this.firstIdx=0,this.lastIdx=this.items.length-1}return h(e,[{key:"length",get:function(){return this.lastIdx-this.firstIdx+1}},{key:"takeWhile",value:function(e){for(var t=this.firstIdx;t<this.items.length&&e(this.items[t]);)t++;var n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}},{key:"takeFromEndWhile",value:function(e){for(var t=this.lastIdx;t>=0&&e(this.items[t]);)t--;var n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}},{key:"peek",value:function(){if(0!==this.length)return this.items[this.firstIdx]}},{key:"dequeue",value:function(){var e=this.items[this.firstIdx];return this.firstIdx++,e}},{key:"takeCount",value:function(e){var t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}]),e}(),xa=function(){function e(t){u(this,e),this.iterate=t}return h(e,[{key:"toArray",value:function(){var e=[];return this.iterate((function(t){return e.push(t),!0})),e}},{key:"filter",value:function(t){var n=this;return new e((function(e){return n.iterate((function(n){return!t(n)||e(n)}))}))}},{key:"map",value:function(t){var n=this;return new e((function(e){return n.iterate((function(n){return e(t(n))}))}))}},{key:"findLast",value:function(e){var t;return this.iterate((function(n){return e(n)&&(t=n),!0})),t}},{key:"findLastMaxBy",value:function(e){var t,n=!0;return this.iterate((function(i){return(n||Ko.isGreaterThan(e(i,t)))&&(n=!1,t=i),!0})),t}}]),e}();xa.empty=new xa((function(e){}));var La=function(){function e(t){u(this,e),this._indexMap=t}return h(e,[{key:"apply",value:function(e){var t=this;return e.map((function(n,i){return e[t._indexMap[i]]}))}},{key:"inverse",value:function(){for(var t=this._indexMap.slice(),n=0;n<this._indexMap.length;n++)t[this._indexMap[n]]=n;return new e(t)}}],[{key:"createSortPermutation",value:function(t,n){var i=Array.from(t.keys()).sort((function(e,i){return n(t[e],t[i])}));return new e(i)}}]),e}();function Da(e){return"string"==typeof e}function Na(e){return!("object"!==(void 0===e?"undefined":L(e))||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}function Ia(e){var t=Object.getPrototypeOf(Uint8Array);return"object"===(void 0===e?"undefined":L(e))&&e instanceof t}function Ea(e){return"number"==typeof e&&!isNaN(e)}function Ma(e){return!!e&&"function"==typeof e[Symbol.iterator]}function Ta(e){return!0===e||!1===e}function Ra(e){return void 0===e}function Aa(e){return!Pa(e)}function Pa(e){return Ra(e)||null===e}function Oa(e,t){if(!e)throw new Error(t?"Unexpected type, expected '".concat(t,"'"):"Unexpected type")}function Fa(e){if(Pa(e))throw new Error("Assertion Failed: argument is undefined or null");return e}function Wa(e){return"function"==typeof e}function Ba(e,t){if(Da(t)){if((void 0===e?"undefined":L(e))!==t)throw new Error("argument does not match constraint: typeof ".concat(t))}else if(Wa(t)){try{if(e instanceof t)return}catch(e){}if(!Pa(e)&&e.constructor===t)return;if(1===t.length&&!0===t.call(void 0,e))return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Ha(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return e;if(e instanceof RegExp)return e;var t=Array.isArray(e)?[]:{};return Object.entries(e).forEach((function(e){var n=C(e,2),i=n[0],r=n[1];t[i]=r&&"object"===(void 0===r?"undefined":L(r))?Ha(r):r})),t}var Va=Object.prototype.hasOwnProperty;function za(e,t){return Ua(e,t,new Set)}function Ua(e,t,n){if(Pa(e))return e;var i=t(e);if(void 0!==i)return i;if(Array.isArray(e)){var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r.push(Ua(c,t,n))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return r}if(Na(e)){if(n.has(e))throw new Error("Cannot clone recursive data-structure");n.add(e);var d={};for(var h in e)Va.call(e,h)&&(d[h]=Ua(e[h],t,n));return n.delete(e),d}return e}function ja(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Na(e)?(Na(t)&&Object.keys(t).forEach((function(i){i in e?n&&(Na(e[i])&&Na(t[i])?ja(e[i],t[i],n):e[i]=t[i]):e[i]=t[i]})),e):t}function Ka(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if((void 0===e?"undefined":L(e))!==(void 0===t?"undefined":L(t)))return!1;if("object"!==(void 0===e?"undefined":L(e)))return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;var n,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!Ka(e[n],t[n]))return!1}else{var r=[];for(i in e)r.push(i);r.sort();var o=[];for(i in t)o.push(i);if(o.sort(),!Ka(r,o))return!1;for(n=0;n<r.length;n++)if(!Ka(e[r[n]],t[r[n]]))return!1}return!0}function qa(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=function(e){for(var t=[];Object.prototype!==e;)t=t.concat(Object.getOwnPropertyNames(e)),e=Object.getPrototypeOf(e);return t}(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;"function"==typeof e[s]&&t.push(s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}function Ga(){return globalThis._VSCODE_NLS_MESSAGES}function Za(){return globalThis._VSCODE_NLS_LANGUAGE}var Ya="pseudo"===Za()||"undefined"!=typeof document&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function Qa(e,t){var n;return n=0===t.length?e:e.replace(/\{(\d+)\}/g,(function(e,n){var i=n[0],r=t[i],o=e;return"string"==typeof r?o=r:"number"!=typeof r&&"boolean"!=typeof r&&null!=r||(o=String(r)),o})),Ya&&(n="［"+n.replace(/[aouei]/g,"$&$&")+"］"),n}function Xa(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return Qa("number"==typeof e?$a(e,t):t,i)}function $a(e,t){var n,i=null===(n=Ga())||void 0===n?void 0:n[e];if("string"!=typeof i){if("string"==typeof t)return t;throw new Error("!!! NLS MISSING: ".concat(e," !!!"))}return i}function Ja(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var o,a=Qa(o="number"==typeof e?$a(e,t):t,i);return{value:a,original:t===o?a:Qa(t,i)}}var es="en",ts=!1,ns=!1,is=!1,rs=!1,os=!1,as=!1,ss=!1,ls=es,us=void 0,cs=globalThis,ds=void 0;void 0!==cs.vscode&&void 0!==cs.vscode.process?ds=cs.vscode.process:"undefined"!=typeof process&&"string"==typeof(null===(ot=process)||void 0===ot||null===(rt=ot.versions)||void 0===rt?void 0:rt.node)&&(ds=process);var hs="string"==typeof(null==ds||null===(at=ds.versions)||void 0===at?void 0:at.electron)&&"renderer"===(null==ds?void 0:ds.type);if("object"===(void 0===ds?"undefined":L(ds))){ts="win32"===ds.platform,ns="darwin"===ds.platform,(is="linux"===ds.platform)&&ds.env.SNAP&&ds.env.SNAP_REVISION,ds.env.CI||ds.env.BUILD_ARTIFACTSTAGINGDIRECTORY,ls=es;var fs=ds.env.VSCODE_NLS_CONFIG;if(fs)try{var gs,vs=JSON.parse(fs);vs.userLocale,vs.osLocale,ls=vs.resolvedLanguage||es,null===(gs=vs.languagePack)||void 0===gs?void 0:gs.translationsConfigFile}catch(e){}rs=!0}else"object"!==("undefined"==typeof navigator?"undefined":L(navigator))||hs?console.error("Unable to resolve platform."):(ts=(us=navigator.userAgent).indexOf("Windows")>=0,ns=us.indexOf("Macintosh")>=0,as=(us.indexOf("Macintosh")>=0||us.indexOf("iPad")>=0||us.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,is=us.indexOf("Linux")>=0,ss=(null==us?void 0:us.indexOf("Mobi"))>=0,os=!0,ls=Za()||es,navigator.language.toLowerCase());var ps=ts,ms=ns,ys=is,_s=rs,bs=os,ks=os&&"function"==typeof cs.importScripts?cs.origin:void 0,ws=as,Cs=ss,Ss=us,xs=ls,Ls="function"==typeof cs.postMessage&&!cs.importScripts,Ds=function(){if(Ls){var e=[];cs.addEventListener("message",(function(t){if(t.data&&t.data.vscodeScheduleAsyncWork)for(var n=0,i=e.length;n<i;n++){var r=e[n];if(r.id===t.data.vscodeScheduleAsyncWork)return e.splice(n,1),void r.callback()}}));var t=0;return function(n){var i=++t;e.push({id:i,callback:n}),cs.postMessage({vscodeScheduleAsyncWork:i},"*")}}return function(e){return setTimeout(e)}}(),Ns=ns||as?2:ts?1:3,Is=!0,Es=!1;function Ms(){if(!Es){Es=!0;var e=new Uint8Array(2);e[0]=1,e[1]=2;var t=new Uint16Array(e.buffer);Is=513===t[0]}return Is}var Ts,Rs=!!(Ss&&Ss.indexOf("Chrome")>=0),As=!!(Ss&&Ss.indexOf("Firefox")>=0),Ps=!!(!Rs&&Ss&&Ss.indexOf("Safari")>=0),Os=!!(Ss&&Ss.indexOf("Edg/")>=0),Fs=!!(Ss&&Ss.indexOf("Android")>=0),Ws={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};!function(e){function t(e){return e&&"object"===(void 0===e?"undefined":L(e))&&"function"==typeof e[Symbol.iterator]}e.is=t;var n=Object.freeze([]);function i(e){return E(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return t.sent(),[2]}}))}function o(){return o=s((function(e){var t,n,i,o,a,s,l,u,c;return E(this,(function(d){switch(d.label){case 0:t=[],n=!1,i=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),a=r(e),d.label=2;case 2:return[4,a.next()];case 3:if(!(n=!(s=d.sent()).done))return[3,5];l=s.value,u=l,t.push(u),d.label=4;case 4:return n=!1,[3,2];case 5:return[3,12];case 6:return c=d.sent(),i=!0,o=c,[3,12];case 7:return d.trys.push([7,,10,11]),n&&null!=a.return?[4,a.return()]:[3,9];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(i)throw o;return[7];case 11:return[7];case 12:return[2,Promise.resolve(t)]}}))})),o.apply(this,arguments)}e.empty=function(){return n},e.single=i,e.wrap=function(e){return t(e)?e:i(e)},e.from=function(e){return e||n},e.reverse=function(e){var t;return E(this,(function(n){switch(n.label){case 0:t=e.length-1,n.label=1;case 1:return t>=0?[4,e[t]]:[3,4];case 2:n.sent(),n.label=3;case 3:return t--,[3,1];case 4:return[2]}}))},e.isEmpty=function(e){return!e||!0===e[Symbol.iterator]().next().done},e.first=function(e){return e[Symbol.iterator]().next().value},e.some=function(e,t){var n=0,i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){if(t(a.value,n++))return!0}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return!1},e.find=function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(t(s))return s}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}},e.filter=function(e,t){var n,i,r,o,a,s,l;return E(this,(function(u){switch(u.label){case 0:n=!0,i=!1,r=void 0,u.label=1;case 1:u.trys.push([1,6,7,8]),o=e[Symbol.iterator](),u.label=2;case 2:return(n=(a=o.next()).done)?[3,5]:(s=a.value,t(s)?[4,s]:[3,4]);case 3:u.sent(),u.label=4;case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return l=u.sent(),i=!0,r=l,[3,8];case 7:try{n||null==o.return||o.return()}finally{if(i)throw r}return[7];case 8:return[2]}}))},e.map=function(e,t){var n,i,r,o,a,s,l,u;return E(this,(function(c){switch(c.label){case 0:n=0,i=!0,r=!1,o=void 0,c.label=1;case 1:c.trys.push([1,6,7,8]),a=e[Symbol.iterator](),c.label=2;case 2:return(i=(s=a.next()).done)?[3,5]:(l=s.value,[4,t(l,n++)]);case 3:c.sent(),c.label=4;case 4:return i=!0,[3,2];case 5:return[3,8];case 6:return u=c.sent(),r=!0,o=u,[3,8];case 7:try{i||null==a.return||a.return()}finally{if(r)throw o}return[7];case 8:return[2]}}))},e.flatMap=function(e,t){var n,i,r,o,a,s,l,u;return E(this,(function(c){switch(c.label){case 0:n=0,i=!0,r=!1,o=void 0,c.label=1;case 1:c.trys.push([1,6,7,8]),a=e[Symbol.iterator](),c.label=2;case 2:return(i=(s=a.next()).done)?[3,5]:(l=s.value,[5,M(t(l,n++))]);case 3:c.sent(),c.label=4;case 4:return i=!0,[3,2];case 5:return[3,8];case 6:return u=c.sent(),r=!0,o=u,[3,8];case 7:try{i||null==a.return||a.return()}finally{if(r)throw o}return[7];case 8:return[2]}}))},e.concat=function(){var e,t,n,i,r,o,a,s,l,u=arguments;return E(this,(function(c){switch(c.label){case 0:for(e=u.length,t=new Array(e),n=0;n<e;n++)t[n]=u[n];i=!0,r=!1,o=void 0,c.label=1;case 1:c.trys.push([1,6,7,8]),a=t[Symbol.iterator](),c.label=2;case 2:return(i=(s=a.next()).done)?[3,5]:[5,M(s.value)];case 3:c.sent(),c.label=4;case 4:return i=!0,[3,2];case 5:return[3,8];case 6:return l=c.sent(),r=!0,o=l,[3,8];case 7:try{i||null==a.return||a.return()}finally{if(r)throw o}return[7];case 8:return[2]}}))},e.reduce=function(e,t,n){var i=n,r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){i=t(i,s.value)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return i},e.slice=function(e,t){var n,i=arguments;return E(this,(function(r){switch(r.label){case 0:n=i.length>2&&void 0!==i[2]?i[2]:e.length,t<0&&(t+=e.length),n<0?n+=e.length:n>e.length&&(n=e.length),r.label=1;case 1:return t<n?[4,e[t]]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))},e.consume=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,i=[];if(0===n)return[i,t];for(var r=t[Symbol.iterator](),o=0;o<n;o++){var a=r.next();if(a.done)return[i,e.empty()];i.push(a.value)}return[i,f({},Symbol.iterator,(function(){return r}))]},e.asyncToArray=function(e){return o.apply(this,arguments)}}(Ts||(Ts={}));var Bs=(ut=function e(t){u(this,e),this.element=t,this.next=e.Undefined,this.prev=e.Undefined},ut.Undefined=new ut(void 0),ut),Hs=function(){function e(){u(this,e),this._first=Bs.Undefined,this._last=Bs.Undefined,this._size=0}return h(e,[{key:"size",get:function(){return this._size}},{key:"isEmpty",value:function(){return this._first===Bs.Undefined}},{key:"clear",value:function(){for(var e=this._first;e!==Bs.Undefined;){var t=e.next;e.prev=Bs.Undefined,e.next=Bs.Undefined,e=t}this._first=Bs.Undefined,this._last=Bs.Undefined,this._size=0}},{key:"unshift",value:function(e){return this._insert(e,!1)}},{key:"push",value:function(e){return this._insert(e,!0)}},{key:"_insert",value:function(e,t){var n=this,i=new Bs(e);if(this._first===Bs.Undefined)this._first=i,this._last=i;else if(t){var r=this._last;this._last=i,i.prev=r,r.next=i}else{var o=this._first;this._first=i,i.next=o,o.prev=i}this._size+=1;var a=!1;return function(){a||(a=!0,n._remove(i))}}},{key:"shift",value:function(){if(this._first!==Bs.Undefined){var e=this._first.element;return this._remove(this._first),e}}},{key:"pop",value:function(){if(this._last!==Bs.Undefined){var e=this._last.element;return this._remove(this._last),e}}},{key:"_remove",value:function(e){if(e.prev!==Bs.Undefined&&e.next!==Bs.Undefined){var t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Bs.Undefined&&e.next===Bs.Undefined?(this._first=Bs.Undefined,this._last=Bs.Undefined):e.next===Bs.Undefined?(this._last=this._last.prev,this._last.next=Bs.Undefined):e.prev===Bs.Undefined&&(this._first=this._first.next,this._first.prev=Bs.Undefined);this._size-=1}},{key:Symbol.iterator,value:function(){var e;return E(this,(function(t){switch(t.label){case 0:e=this._first,t.label=1;case 1:return e===Bs.Undefined?[3,3]:[4,e.element];case 2:return t.sent(),e=e.next,[3,1];case 3:return[2]}}))}}]),e}(),Vs="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";var zs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="(-?\\d*\\.\\d\\w*)|([^",n=!0,i=!1,r=void 0;try{for(var o,a=Vs[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.indexOf(s)>=0||(t+="\\"+s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t+="\\s]+)",new RegExp(t,"g")}();function Us(e){var t=zs;if(e&&e instanceof RegExp)if(e.global)t=e;else{var n="g";e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.unicode&&(n+="u"),t=new RegExp(e.source,n)}return t.lastIndex=0,t}var js=new Hs;function Ks(e,t,n,i,r){if(t=Us(t),r||(r=Ts.first(js)),n.length>r.maxLen){var o=e-r.maxLen/2;return o<0?o=0:i+=o,Ks(e,t,n=n.substring(o,e+r.maxLen/2),i,r)}for(var a=Date.now(),s=e-1-i,l=-1,u=null,c=1;!(Date.now()-a>=r.timeBudget);c++){var d=s-r.windowSize*c;t.lastIndex=Math.max(0,d);var h=qs(t,n,s,l);if(!h&&u)break;if(u=h,d<=0)break;l=d}if(u){var f={word:u[0],startColumn:i+1+u.index,endColumn:i+1+u.index+u[0].length};return t.lastIndex=0,f}return null}function qs(e,t,n,i){for(var r;r=e.exec(t);){var o=r.index||0;if(o<=n&&e.lastIndex>=n)return r;if(i>0&&o>i)return null}return null}js.unshift({maxLen:1e3,windowSize:15,timeBudget:150});var Gs=function(){function e(t){u(this,e),this._values=t}return h(e,[{key:"hasChanged",value:function(e){return this._values[e]}}]),e}(),Zs=function e(){u(this,e),this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0},Ys=function(){function e(t,n,i,r){u(this,e),this.id=t,this.name=n,this.defaultValue=i,this.schema=r}return h(e,[{key:"applyUpdate",value:function(e,t){return Xs(e,t)}},{key:"compute",value:function(e,t,n){return n}}]),e}(),Qs=function e(t,n){u(this,e),this.newValue=t,this.didChange=n};function Xs(e,t){if("object"!==(void 0===e?"undefined":L(e))||"object"!==(void 0===t?"undefined":L(t))||!e||!t)return new Qs(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){var n=Array.isArray(e)&&Array.isArray(t)&&ea(e,t);return new Qs(t,!n)}var i=!1;for(var r in t)if(t.hasOwnProperty(r)){var o=Xs(e[r],t[r]);o.didChange&&(e[r]=o.newValue,i=!0)}return new Qs(e,i)}var $s=function(){function e(t){u(this,e),this.schema=void 0,this.id=t,this.name="_never_",this.defaultValue=void 0}return h(e,[{key:"applyUpdate",value:function(e,t){return Xs(e,t)}},{key:"validate",value:function(e){return this.defaultValue}}]),e}(),Js=function(){function e(t,n,i,r){u(this,e),this.id=t,this.name=n,this.defaultValue=i,this.schema=r}return h(e,[{key:"applyUpdate",value:function(e,t){return Xs(e,t)}},{key:"validate",value:function(e){return void 0===e?this.defaultValue:e}},{key:"compute",value:function(e,t,n){return n}}]),e}();function Ro(e,t){return void 0===e?t:"false"!==e&&Boolean(e)}var el=function(e){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return u(this,t),void 0!==r&&(r.type="boolean",r.default=i),l(this,t,[e,n,i,r])}return p(t,e),h(t,[{key:"validate",value:function(e){return Ro(e,this.defaultValue)}}]),t}(Js);function tl(e,t,n,i){if(void 0===e)return t;var r=parseInt(e,10);return isNaN(r)?t:(r=Math.max(n,r),0|(r=Math.min(i,r)))}var nl=function(e){function t(e,n,i,r,o){var a,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;return u(this,t),void 0!==s&&(s.type="integer",s.default=i,s.minimum=r,s.maximum=o),(a=l(this,t,[e,n,i,s])).minimum=r,a.maximum=o,a}return p(t,e),h(t,[{key:"validate",value:function(e){return t.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}],[{key:"clampedInt",value:function(e,t,n,i){return tl(e,t,n,i)}}]),t}(Js);function il(e,t,n,i){if(void 0===e)return t;var r=rl.float(e,t);return rl.clamp(r,n,i)}var rl=function(e){function t(e,n,i,r,o){var a;return u(this,t),void 0!==o&&(o.type="number",o.default=i),(a=l(this,t,[e,n,i,o])).validationFn=r,a}return p(t,e),h(t,[{key:"validate",value:function(e){return this.validationFn(t.float(e,this.defaultValue))}}],[{key:"clamp",value:function(e,t,n){return e<t?t:e>n?n:e}},{key:"float",value:function(e,t){if("number"==typeof e)return e;if(void 0===e)return t;var n=parseFloat(e);return isNaN(n)?t:n}}]),t}(Js),ol=function(e){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return u(this,t),void 0!==r&&(r.type="string",r.default=i),l(this,t,[e,n,i,r])}return p(t,e),h(t,[{key:"validate",value:function(e){return t.string(e,this.defaultValue)}}],[{key:"string",value:function(e,t){return"string"!=typeof e?t:e}}]),t}(Js);function al(e,t,n,i){return"string"!=typeof e?t:i&&e in i?i[e]:-1===n.indexOf(e)?t:e}var sl=function(e){function t(e,n,i,r){var o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return u(this,t),void 0!==a&&(a.type="string",a.enum=r,a.default=i),(o=l(this,t,[e,n,i,a]))._allowedValues=r,o}return p(t,e),h(t,[{key:"validate",value:function(e){return al(e,this.defaultValue,this._allowedValues)}}]),t}(Js),ll=function(e){function t(e,n,i,r,o,a){var s,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return u(this,t),void 0!==c&&(c.type="string",c.enum=o,c.default=r),(s=l(this,t,[e,n,i,c]))._allowedValues=o,s._convert=a,s}return p(t,e),h(t,[{key:"validate",value:function(e){return"string"!=typeof e||-1===this._allowedValues.indexOf(e)?this.defaultValue:this._convert(e)}}]),t}(Ys);var ul,cl=function(e){function t(){return u(this,t),l(this,t,[2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[Xa("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),Xa("accessibilitySupport.on","Optimize for usage with a Screen Reader."),Xa("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:Xa("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")}])}return p(t,e),h(t,[{key:"validate",value:function(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}},{key:"compute",value:function(e,t,n){return 0===n?e.accessibilitySupport:n}}]),t}(Ys),dl=function(e){function t(){u(this,t);var e={insertSpace:!0,ignoreEmptyLines:!0};return l(this,t,[23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:Xa("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:Xa("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return{insertSpace:Ro(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Ro(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}]),t}(Ys);!function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"}(ul||(ul={}));var hl=function(e){function t(){return u(this,t),l(this,t,[143])}return p(t,e),h(t,[{key:"compute",value:function(e,t,n){var i=["monaco-editor"];return t.get(39)&&i.push(t.get(39)),e.extraEditorClassName&&i.push(e.extraEditorClassName),"default"===t.get(74)?i.push("mouse-default"):"copy"===t.get(74)&&i.push("mouse-copy"),t.get(112)&&i.push("showUnused"),t.get(141)&&i.push("showDeprecated"),i.join(" ")}}]),t}($s),fl=function(e){function t(){return u(this,t),l(this,t,[37,"emptySelectionClipboard",!0,{description:Xa("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")}])}return p(t,e),h(t,[{key:"compute",value:function(e,t,n){return n&&e.emptySelectionClipboard}}]),t}(el),gl=function(e){function t(){u(this,t);var e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};return l(this,t,[41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:Xa("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[Xa("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),Xa("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),Xa("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:Xa("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[Xa("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),Xa("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),Xa("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:Xa("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:Xa("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:ms},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:Xa("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:Xa("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return{cursorMoveOnType:Ro(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:"boolean"==typeof e.seedSearchStringFromSelection?e.seedSearchStringFromSelection?"always":"never":al(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:"boolean"==typeof e.autoFindInSelection?e.autoFindInSelection?"always":"never":al(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Ro(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Ro(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Ro(t.loop,this.defaultValue.loop)}}}]),t}(Ys),vl=function(e){function t(){return u(this,t),l(this,t,[51,"fontLigatures",t.OFF,{anyOf:[{type:"boolean",description:Xa("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:Xa("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:Xa("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1}])}return p(t,e),h(t,[{key:"validate",value:function(e){return void 0===e?this.defaultValue:"string"==typeof e?"false"===e||0===e.length?t.OFF:"true"===e?t.ON:e:Boolean(e)?t.ON:t.OFF}}]),t}(Ys);vl.OFF='"liga" off, "calt" off',vl.ON='"liga" on, "calt" on';var pl=function(e){function t(){return u(this,t),l(this,t,[54,"fontVariations",t.OFF,{anyOf:[{type:"boolean",description:Xa("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:Xa("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:Xa("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1}])}return p(t,e),h(t,[{key:"validate",value:function(e){return void 0===e?this.defaultValue:"string"==typeof e?"false"===e?t.OFF:"true"===e?t.TRANSLATE:e:Boolean(e)?t.TRANSLATE:t.OFF}},{key:"compute",value:function(e,t,n){return e.fontInfo.fontVariationSettings}}]),t}(Ys);pl.OFF="normal",pl.TRANSLATE="translate";var ml=function(e){function t(){return u(this,t),l(this,t,[50])}return p(t,e),h(t,[{key:"compute",value:function(e,t,n){return e.fontInfo}}]),t}($s),yl=function(e){function t(){return u(this,t),l(this,t,[52,"fontSize",uu.fontSize,{type:"number",minimum:6,maximum:100,default:uu.fontSize,description:Xa("fontSize","Controls the font size in pixels.")}])}return p(t,e),h(t,[{key:"validate",value:function(e){var t=rl.float(e,this.defaultValue);return 0===t?uu.fontSize:rl.clamp(t,6,100)}},{key:"compute",value:function(e,t,n){return e.fontInfo.fontSize}}]),t}(Js),_l=function(e){function t(){return u(this,t),l(this,t,[53,"fontWeight",uu.fontWeight,{anyOf:[{type:"number",minimum:t.MINIMUM_VALUE,maximum:t.MAXIMUM_VALUE,errorMessage:Xa("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:t.SUGGESTION_VALUES}],default:uu.fontWeight,description:Xa("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')}])}return p(t,e),h(t,[{key:"validate",value:function(e){return"normal"===e||"bold"===e?e:String(nl.clampedInt(e,uu.fontWeight,t.MINIMUM_VALUE,t.MAXIMUM_VALUE))}}]),t}(Ys);_l.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],_l.MINIMUM_VALUE=1,_l.MAXIMUM_VALUE=1e3;var bl,kl=function(e){function t(){u(this,t);var e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},n={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[Xa("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),Xa("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),Xa("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];return l(this,t,[58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:Xa("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":_({description:Xa("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},n),"editor.gotoLocation.multipleTypeDefinitions":_({description:Xa("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},n),"editor.gotoLocation.multipleDeclarations":_({description:Xa("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},n),"editor.gotoLocation.multipleImplementations":_({description:Xa("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},n),"editor.gotoLocation.multipleReferences":_({description:Xa("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},n),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:Xa("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:Xa("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:Xa("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:Xa("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:Xa("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t,n,i,r,o,a,s=e;return{multiple:al(s.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:null!==(t=s.multipleDefinitions)&&void 0!==t?t:al(s.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:null!==(n=s.multipleTypeDefinitions)&&void 0!==n?n:al(s.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:null!==(i=s.multipleDeclarations)&&void 0!==i?i:al(s.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:null!==(r=s.multipleImplementations)&&void 0!==r?r:al(s.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:null!==(o=s.multipleReferences)&&void 0!==o?o:al(s.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:null!==(a=s.multipleTests)&&void 0!==a?a:al(s.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:ol.string(s.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:ol.string(s.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:ol.string(s.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:ol.string(s.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:ol.string(s.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:ol.string(s.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}]),t}(Ys),wl=function(e){function t(){u(this,t);var e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};return l(this,t,[60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:Xa("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:Xa("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:Xa("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:Xa("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:Xa("hover.above","Prefer showing hovers above the line, if there's space.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return{enabled:Ro(t.enabled,this.defaultValue.enabled),delay:nl.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Ro(t.sticky,this.defaultValue.sticky),hidingDelay:nl.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Ro(t.above,this.defaultValue.above)}}}]),t}(Ys),Cl=function(e){function t(){return u(this,t),l(this,t,[146])}return p(t,e),h(t,[{key:"compute",value:function(e,n,i){return t.computeLayout(n,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}}],[{key:"computeContainedMinimapLineCount",value:function(e){var t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight),i=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(i=Math.max(i,t-1));var r=(n+e.viewLineCount+i)/(e.pixelRatio*e.height);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:i,desiredRatio:r,minimapLineCount:Math.floor(e.viewLineCount/r)}}},{key:"_computeMinimapLayout",value:function(e,n){var i=e.outerWidth,r=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*r),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:r};var a=n.stableMinimapLayoutInput,s=a&&e.outerHeight===a.outerHeight&&e.lineHeight===a.lineHeight&&e.typicalHalfwidthCharacterWidth===a.typicalHalfwidthCharacterWidth&&e.pixelRatio===a.pixelRatio&&e.scrollBeyondLastLine===a.scrollBeyondLastLine&&e.paddingTop===a.paddingTop&&e.paddingBottom===a.paddingBottom&&e.minimap.enabled===a.minimap.enabled&&e.minimap.side===a.minimap.side&&e.minimap.size===a.minimap.size&&e.minimap.showSlider===a.minimap.showSlider&&e.minimap.renderCharacters===a.minimap.renderCharacters&&e.minimap.maxColumn===a.minimap.maxColumn&&e.minimap.scale===a.minimap.scale&&e.verticalScrollbarWidth===a.verticalScrollbarWidth&&e.isViewportWrapping===a.isViewportWrapping,l=e.lineHeight,u=e.typicalHalfwidthCharacterWidth,c=e.scrollBeyondLastLine,d=e.minimap.renderCharacters,h=o>=2?Math.round(2*e.minimap.scale):e.minimap.scale,f=e.minimap.maxColumn,g=e.minimap.size,v=e.minimap.side,p=e.verticalScrollbarWidth,m=e.viewLineCount,y=e.remainingWidth,_=e.isViewportWrapping,b=d?2:3,k=Math.floor(o*r),w=k/o,C=!1,S=!1,x=b*h,L=h/o,D=1;if("fill"===g||"fit"===g){var N=t.computeContainedMinimapLineCount({viewLineCount:m,scrollBeyondLastLine:c,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:r,lineHeight:l,pixelRatio:o}),I=N.typicalViewportLineCount,E=N.extraLinesBeforeFirstLine,M=N.extraLinesBeyondLastLine,T=N.desiredRatio;if(m/N.minimapLineCount>1)C=!0,S=!0,x=1,L=(h=1)/o;else{var R=!1,A=h+1;if("fit"===g){var P=Math.ceil((E+m+M)*x);_&&s&&y<=n.stableFitRemainingWidth?(R=!0,A=n.stableFitMaxMinimapScale):R=P>k}if("fill"===g||R){C=!0;var O=h;x=Math.min(l*o,Math.max(1,Math.floor(1/T))),_&&s&&y<=n.stableFitRemainingWidth&&(A=n.stableFitMaxMinimapScale),(h=Math.min(A,Math.max(1,Math.floor(x/b))))>O&&(D=Math.min(2,h/O)),L=h/o/D,k=Math.ceil(Math.max(I,E+m+M)*x),_?(n.stableMinimapLayoutInput=e,n.stableFitRemainingWidth=y,n.stableFitMaxMinimapScale=h):(n.stableMinimapLayoutInput=null,n.stableFitRemainingWidth=0)}}}var F=Math.floor(f*L),W=Math.min(F,Math.max(0,Math.floor((y-p-2)*L/(u+L)))+8),B=Math.floor(o*W),H=B/o;return{renderMinimap:d?1:2,minimapLeft:"left"===v?0:i-W-p,minimapWidth:W,minimapHeightIsEditorHeight:C,minimapIsSampling:S,minimapScale:h,minimapLineHeight:x,minimapCanvasInnerWidth:B=Math.floor(B*D),minimapCanvasInnerHeight:k,minimapCanvasOuterWidth:H,minimapCanvasOuterHeight:w}}},{key:"computeLayout",value:function(e,n){var i=0|n.outerWidth,r=0|n.outerHeight,o=0|n.lineHeight,a=0|n.lineNumbersDigitCount,s=n.typicalHalfwidthCharacterWidth,l=n.maxDigitWidth,u=n.pixelRatio,c=n.viewLineCount,d=e.get(138),h="inherit"===d?e.get(137):d,f="inherit"===h?e.get(133):h,g=e.get(136),v=n.isDominatedByLongLines,p=e.get(57),m=0!==e.get(68).renderType,y=e.get(69),_=e.get(106),b=e.get(84),k=e.get(73),w=e.get(104),C=w.verticalScrollbarSize,S=w.verticalHasArrows,x=w.arrowSize,L=w.horizontalScrollbarSize,D=e.get(43),N="never"!==e.get(111),I=e.get(66);D&&N&&(I+=16);var E=0;if(m){var M=Math.max(a,y);E=Math.round(M*l)}var T=0;p&&(T=o*n.glyphMarginDecorationLaneCount);var R=0,A=R+T,P=A+E,O=P+I,F=i-T-E-I,W=!1,B=!1,H=-1;"inherit"===h&&v?(W=!0,B=!0):"on"===f||"bounded"===f?B=!0:"wordWrapColumn"===f&&(H=g);var V=t._computeMinimapLayout({outerWidth:i,outerHeight:r,lineHeight:o,typicalHalfwidthCharacterWidth:s,pixelRatio:u,scrollBeyondLastLine:_,paddingTop:b.top,paddingBottom:b.bottom,minimap:k,verticalScrollbarWidth:C,viewLineCount:c,remainingWidth:F,isViewportWrapping:B},n.memory||new Zs);0!==V.renderMinimap&&0===V.minimapLeft&&(R+=V.minimapWidth,A+=V.minimapWidth,P+=V.minimapWidth,O+=V.minimapWidth);var z=F-V.minimapWidth,U=Math.max(1,Math.floor((z-C-2)/s)),j=S?x:0;return B&&(H=Math.max(1,U),"bounded"===f&&(H=Math.min(H,g))),{width:i,height:r,glyphMarginLeft:R,glyphMarginWidth:T,glyphMarginDecorationLaneCount:n.glyphMarginDecorationLaneCount,lineNumbersLeft:A,lineNumbersWidth:E,decorationsLeft:P,decorationsWidth:I,contentLeft:O,contentWidth:z,minimap:V,viewportColumn:U,isWordWrapMinified:W,isViewportWrapping:B,wrappingColumn:H,verticalScrollbarWidth:C,horizontalScrollbarHeight:L,overviewRuler:{top:j,width:C,height:r-2*j,right:0}}}}]),t}($s),Sl=function(e){function t(){return u(this,t),l(this,t,[140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[Xa("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),Xa("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:Xa("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){return al(e,"simple",["simple","advanced"])}},{key:"compute",value:function(e,t,n){return 2===t.get(2)?"advanced":n}}]),t}(Ys);!function(e){e.Off="off",e.OnCode="onCode",e.On="on"}(bl||(bl={}));var xl=function(e){function t(){u(this,t);var e={enabled:bl.OnCode};return l(this,t,[65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[bl.Off,bl.OnCode,bl.On],default:e.enabled,enumDescriptions:[Xa("editor.lightbulb.enabled.off","Disable the code action menu."),Xa("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),Xa("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:Xa("enabled","Enables the Code Action lightbulb in the editor.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){return e&&"object"===(void 0===e?"undefined":L(e))?{enabled:al(e.enabled,this.defaultValue.enabled,[bl.Off,bl.OnCode,bl.On])}:this.defaultValue}}]),t}(Ys),Ll=function(e){function t(){u(this,t);var e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};return l(this,t,[116,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:Xa("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:Xa("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:Xa("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:Xa("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return{enabled:Ro(t.enabled,this.defaultValue.enabled),maxLineCount:nl.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:al(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Ro(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}]),t}(Ys),Dl=function(e){function t(){u(this,t);var e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};return l(this,t,[142,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:Xa("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[Xa("editor.inlayHints.on","Inlay hints are enabled"),Xa("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",ms?"Ctrl+Option":"Ctrl+Alt"),Xa("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",ms?"Ctrl+Option":"Ctrl+Alt"),Xa("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:Xa("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:Xa("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:Xa("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return"boolean"==typeof t.enabled&&(t.enabled=t.enabled?"on":"off"),{enabled:al(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:nl.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:ol.string(t.fontFamily,this.defaultValue.fontFamily),padding:Ro(t.padding,this.defaultValue.padding)}}}]),t}(Ys),Nl=function(e){function t(){return u(this,t),l(this,t,[66,"lineDecorationsWidth",10])}return p(t,e),h(t,[{key:"validate",value:function(e){return"string"==typeof e&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):nl.clampedInt(e,this.defaultValue,0,1e3)}},{key:"compute",value:function(e,t,n){return n<0?nl.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}}]),t}(Ys),Il=function(e){function t(){return u(this,t),l(this,t,[67,"lineHeight",uu.lineHeight,function(e){return rl.clamp(e,0,150)},{markdownDescription:Xa("lineHeight","Controls the line height. \n - Use 0 to automatically compute the line height from the font size.\n - Values between 0 and 8 will be used as a multiplier with the font size.\n - Values greater than or equal to 8 will be used as effective values.")}])}return p(t,e),h(t,[{key:"compute",value:function(e,t,n){return e.fontInfo.lineHeight}}]),t}(rl),El=function(e){function t(){u(this,t);var e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};return l(this,t,[73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:Xa("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:Xa("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[Xa("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),Xa("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),Xa("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:Xa("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:Xa("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:Xa("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:Xa("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:Xa("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:Xa("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:Xa("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:Xa("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:Xa("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:Xa("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t,n,i=e;return{enabled:Ro(i.enabled,this.defaultValue.enabled),autohide:Ro(i.autohide,this.defaultValue.autohide),size:al(i.size,this.defaultValue.size,["proportional","fill","fit"]),side:al(i.side,this.defaultValue.side,["right","left"]),showSlider:al(i.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Ro(i.renderCharacters,this.defaultValue.renderCharacters),scale:nl.clampedInt(i.scale,1,1,3),maxColumn:nl.clampedInt(i.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:Ro(i.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:Ro(i.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:rl.clamp(null!==(t=i.sectionHeaderFontSize)&&void 0!==t?t:this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:rl.clamp(null!==(n=i.sectionHeaderLetterSpacing)&&void 0!==n?n:this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}]),t}(Ys);var Ml=function(e){function t(){return u(this,t),l(this,t,[84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:Xa("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:Xa("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return{top:nl.clampedInt(t.top,0,0,1e3),bottom:nl.clampedInt(t.bottom,0,0,1e3)}}}]),t}(Ys),Tl=function(e){function t(){u(this,t);var e={enabled:!0,cycle:!0};return l(this,t,[86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:Xa("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:Xa("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return{enabled:Ro(t.enabled,this.defaultValue.enabled),cycle:Ro(t.cycle,this.defaultValue.cycle)}}}]),t}(Ys),Rl=function(e){function t(){return u(this,t),l(this,t,[144])}return p(t,e),h(t,[{key:"compute",value:function(e,t,n){return e.pixelRatio}}]),t}($s),Al=function(e){function t(){return u(this,t),l(this,t,[88,"placeholder",void 0])}return p(t,e),h(t,[{key:"validate",value:function(e){return void 0===e?this.defaultValue:"string"==typeof e?e:this.defaultValue}}]),t}(Ys),Pl=function(e){function t(){var e;u(this,t);var n={other:"on",comments:"off",strings:"off"},i=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[Xa("on","Quick suggestions show inside the suggest widget"),Xa("inline","Quick suggestions show as ghost text"),Xa("off","Quick suggestions are disabled")]}];return(e=l(this,t,[90,"quickSuggestions",n,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:i,default:n.strings,description:Xa("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:i,default:n.comments,description:Xa("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:i,default:n.other,description:Xa("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:n,markdownDescription:Xa("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}])).defaultValue=n,e}return p(t,e),h(t,[{key:"validate",value:function(e){if("boolean"==typeof e){var t=e?"on":"off";return{comments:t,strings:t,other:t}}if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var n=e.other,i=e.comments,r=e.strings,o=["on","inline","off"];return{other:"boolean"==typeof n?n?"on":"off":al(n,this.defaultValue.other,o),comments:"boolean"==typeof i?i?"on":"off":al(i,this.defaultValue.comments,o),strings:"boolean"==typeof r?r?"on":"off":al(r,this.defaultValue.strings,o)}}}]),t}(Ys),Ol=function(e){function t(){return u(this,t),l(this,t,[68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[Xa("lineNumbers.off","Line numbers are not rendered."),Xa("lineNumbers.on","Line numbers are rendered as absolute number."),Xa("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),Xa("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:Xa("lineNumbers","Controls the display of line numbers.")}])}return p(t,e),h(t,[{key:"validate",value:function(e){var t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return void 0!==e&&("function"==typeof e?(t=4,n=e):t="interval"===e?3:"relative"===e?2:"on"===e?1:0),{renderType:t,renderFn:n}}}]),t}(Ys);function Fl(e){var t=e.get(99);return"editable"===t?e.get(92):"on"!==t}var Wl=function(e){function t(){u(this,t);var e=[],n={type:"number",description:Xa("rulers.size","Number of monospace characters at which this editor ruler will render.")};return l(this,t,[103,"rulers",e,{type:"array",items:{anyOf:[n,{type:["object"],properties:{column:n,color:{type:"string",description:Xa("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:Xa("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(Array.isArray(e)){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if("number"==typeof s)t.push({column:nl.clampedInt(s,0,0,1e4),color:null});else if(s&&"object"===(void 0===s?"undefined":L(s))){var l=s;t.push({column:nl.clampedInt(l.column,0,0,1e4),color:l.color})}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t.sort((function(e,t){return e.column-t.column})),t}return this.defaultValue}}]),t}(Ys),Bl=function(e){function t(){u(this,t);return l(this,t,[93,"readOnlyMessage",undefined])}return p(t,e),h(t,[{key:"validate",value:function(e){return e&&"object"===(void 0===e?"undefined":L(e))?e:this.defaultValue}}]),t}(Ys);function Hl(e,t){if("string"!=typeof e)return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}var Vl=function(e){function t(){u(this,t);var e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};return l(this,t,[104,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[Xa("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),Xa("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),Xa("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:Xa("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[Xa("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),Xa("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),Xa("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:Xa("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:Xa("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:Xa("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:Xa("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:Xa("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e,n=nl.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=nl.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:nl.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:Hl(t.vertical,this.defaultValue.vertical),horizontal:Hl(t.horizontal,this.defaultValue.horizontal),useShadows:Ro(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Ro(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Ro(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Ro(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Ro(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:nl.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:nl.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:Ro(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Ro(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}}]),t}(Ys),zl="inUntrustedWorkspace",Ul="editor.unicodeHighlight.allowedCharacters",jl="editor.unicodeHighlight.invisibleCharacters",Kl="editor.unicodeHighlight.nonBasicASCII",ql="editor.unicodeHighlight.ambiguousCharacters",Gl="editor.unicodeHighlight.includeComments",Zl="editor.unicodeHighlight.includeStrings",Yl="editor.unicodeHighlight.allowedLocales",Ql=function(e){function t(){u(this,t);var e,n={nonBasicASCII:zl,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:zl,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};return l(this,t,[126,"unicodeHighlight",n,(e={},f(e,Kl,{restricted:!0,type:["boolean","string"],enum:[!0,!1,zl],default:n.nonBasicASCII,description:Xa("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")}),f(e,jl,{restricted:!0,type:"boolean",default:n.invisibleCharacters,description:Xa("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")}),f(e,ql,{restricted:!0,type:"boolean",default:n.ambiguousCharacters,description:Xa("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")}),f(e,Gl,{restricted:!0,type:["boolean","string"],enum:[!0,!1,zl],default:n.includeComments,description:Xa("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")}),f(e,Zl,{restricted:!0,type:["boolean","string"],enum:[!0,!1,zl],default:n.includeStrings,description:Xa("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")}),f(e,Ul,{restricted:!0,type:"object",default:n.allowedCharacters,description:Xa("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}}),f(e,Yl,{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:n.allowedLocales,description:Xa("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}),e)])}return p(t,e),h(t,[{key:"applyUpdate",value:function(e,n){var i=!1;n.allowedCharacters&&e&&(Ka(e.allowedCharacters,n.allowedCharacters)||(e=b(_({},e),{allowedCharacters:n.allowedCharacters}),i=!0)),n.allowedLocales&&e&&(Ka(e.allowedLocales,n.allowedLocales)||(e=b(_({},e),{allowedLocales:n.allowedLocales}),i=!0));var r=g(v(t.prototype),"applyUpdate",this).call(this,e,n);return i?new Qs(r.newValue,!0):r}},{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return{nonBasicASCII:tu(t.nonBasicASCII,zl,[!0,!1,zl]),invisibleCharacters:Ro(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Ro(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:tu(t.includeComments,zl,[!0,!1,zl]),includeStrings:tu(t.includeStrings,zl,[!0,!1,zl]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}},{key:"validateBooleanMap",value:function(e,t){if("object"!==(void 0===e?"undefined":L(e))||!e)return t;var n={},i=!0,r=!1,o=void 0;try{for(var a,s=Object.entries(e)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=C(a.value,2),u=l[0];!0===l[1]&&(n[u]=!0)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}]),t}(Ys),Xl=function(e){function t(){u(this,t);var e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};return l(this,t,[62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:Xa("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[Xa("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),Xa("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),Xa("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:Xa("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:Xa("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:Xa("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return{enabled:Ro(t.enabled,this.defaultValue.enabled),mode:al(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:al(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Ro(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Ro(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:ol.string(t.fontFamily,this.defaultValue.fontFamily)}}}]),t}(Ys),$l=function(e){function t(){u(this,t);var e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};return l(this,t,[63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:Xa("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[Xa("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),Xa("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),Xa("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:Xa("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:Xa("inlineEdit.fontFamily","Controls the font family of the inline edit.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return{enabled:Ro(t.enabled,this.defaultValue.enabled),showToolbar:al(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:ol.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:Ro(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}]),t}(Ys),Jl=function(e){function t(){u(this,t);var e={enabled:Ws.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Ws.bracketPairColorizationOptions.independentColorPoolPerBracketType};return l(this,t,[15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:Xa("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:Xa("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return{enabled:Ro(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Ro(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}]),t}(Ys),eu=function(e){function t(){u(this,t);var e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};return l(this,t,[16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[Xa("editor.guides.bracketPairs.true","Enables bracket pair guides."),Xa("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),Xa("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:Xa("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[Xa("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),Xa("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),Xa("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:Xa("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:Xa("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:Xa("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[Xa("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),Xa("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),Xa("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:Xa("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return{bracketPairs:tu(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:tu(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Ro(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Ro(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:tu(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}]),t}(Ys);function tu(e,t,n){var i=n.indexOf(e);return-1===i?t:n[i]}var nu=function(e){function t(){u(this,t);var e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};return l(this,t,[119,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[Xa("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),Xa("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:Xa("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:Xa("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:Xa("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:Xa("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[Xa("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),Xa("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),Xa("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),Xa("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:Xa("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:Xa("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:Xa("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:Xa("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:Xa("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:Xa("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:Xa("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:Xa("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:Xa("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return{insertMode:al(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Ro(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Ro(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Ro(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Ro(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:al(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Ro(t.showIcons,this.defaultValue.showIcons),showStatusBar:Ro(t.showStatusBar,this.defaultValue.showStatusBar),preview:Ro(t.preview,this.defaultValue.preview),previewMode:al(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Ro(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Ro(t.showMethods,this.defaultValue.showMethods),showFunctions:Ro(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Ro(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Ro(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Ro(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Ro(t.showFields,this.defaultValue.showFields),showVariables:Ro(t.showVariables,this.defaultValue.showVariables),showClasses:Ro(t.showClasses,this.defaultValue.showClasses),showStructs:Ro(t.showStructs,this.defaultValue.showStructs),showInterfaces:Ro(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Ro(t.showModules,this.defaultValue.showModules),showProperties:Ro(t.showProperties,this.defaultValue.showProperties),showEvents:Ro(t.showEvents,this.defaultValue.showEvents),showOperators:Ro(t.showOperators,this.defaultValue.showOperators),showUnits:Ro(t.showUnits,this.defaultValue.showUnits),showValues:Ro(t.showValues,this.defaultValue.showValues),showConstants:Ro(t.showConstants,this.defaultValue.showConstants),showEnums:Ro(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Ro(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Ro(t.showKeywords,this.defaultValue.showKeywords),showWords:Ro(t.showWords,this.defaultValue.showWords),showColors:Ro(t.showColors,this.defaultValue.showColors),showFiles:Ro(t.showFiles,this.defaultValue.showFiles),showReferences:Ro(t.showReferences,this.defaultValue.showReferences),showFolders:Ro(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Ro(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Ro(t.showSnippets,this.defaultValue.showSnippets),showUsers:Ro(t.showUsers,this.defaultValue.showUsers),showIssues:Ro(t.showIssues,this.defaultValue.showIssues)}}}]),t}(Ys),iu=function(e){function t(){return u(this,t),l(this,t,[114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:Xa("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:Xa("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}}])}return p(t,e),h(t,[{key:"validate",value:function(e){return e&&"object"===(void 0===e?"undefined":L(e))?{selectLeadingAndTrailingWhitespace:Ro(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Ro(e.selectSubwords,this.defaultValue.selectSubwords)}:this.defaultValue}}]),t}(Ys),ru=function(e){function t(){u(this,t);return l(this,t,[131,"wordSegmenterLocales",[],{anyOf:[{description:Xa("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:Xa("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]}])}return p(t,e),h(t,[{key:"validate",value:function(e){if("string"==typeof e&&(e=[e]),Array.isArray(e)){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if("string"==typeof s)try{Intl.Segmenter.supportedLocalesOf(s).length>0&&t.push(s)}catch(e){}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}return this.defaultValue}}]),t}(Ys),ou=function(e){function t(){return u(this,t),l(this,t,[139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[Xa("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),Xa("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),Xa("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),Xa("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:Xa("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}}])}return p(t,e),h(t,[{key:"validate",value:function(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}},{key:"compute",value:function(e,t,n){return 2===t.get(2)?0:n}}]),t}(Ys),au=function(e){function t(){return u(this,t),l(this,t,[147])}return p(t,e),h(t,[{key:"compute",value:function(e,t,n){var i=t.get(146);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}}]),t}($s),su=function(e){function t(){u(this,t);var e={enabled:!0,showDropSelector:"afterDrop"};return l(this,t,[36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:Xa("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:Xa("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[Xa("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),Xa("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return{enabled:Ro(t.enabled,this.defaultValue.enabled),showDropSelector:al(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}]),t}(Ys),lu=function(e){function t(){u(this,t);var e={enabled:!0,showPasteSelector:"afterPaste"};return l(this,t,[85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:Xa("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:Xa("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[Xa("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),Xa("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}}])}return p(t,e),h(t,[{key:"validate",value:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return this.defaultValue;var t=e;return{enabled:Ro(t.enabled,this.defaultValue.enabled),showPasteSelector:al(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}]),t}(Ys),uu={fontFamily:ms?"Menlo, Monaco, 'Courier New', monospace":ys?"'Droid Sans Mono', 'monospace', monospace":"Consolas, 'Courier New', monospace",fontWeight:"normal",fontSize:ms?12:14,lineHeight:0,letterSpacing:0},cu=[];function du(e){return cu[e.id]=e,e}var hu={acceptSuggestionOnCommitCharacter:du(new el(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:Xa("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:du(new sl(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",Xa("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:Xa("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:du(new cl),accessibilityPageSize:du(new nl(3,"accessibilityPageSize",10,1,1073741824,{description:Xa("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:du(new ol(4,"ariaLabel",Xa("editorViewAccessibleLabel","Editor content"))),ariaRequired:du(new el(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:du(new el(8,"screenReaderAnnounceInlineSuggestion",!0,{description:Xa("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:du(new sl(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",Xa("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),Xa("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:Xa("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:du(new sl(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",Xa("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),Xa("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:Xa("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:du(new sl(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",Xa("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:Xa("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:du(new sl(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",Xa("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:Xa("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:du(new sl(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",Xa("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),Xa("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:Xa("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:du(new ll(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],(function(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}),{enumDescriptions:[Xa("editor.autoIndent.none","The editor will not insert indentation automatically."),Xa("editor.autoIndent.keep","The editor will keep the current line's indentation."),Xa("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),Xa("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),Xa("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:Xa("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:du(new el(13,"automaticLayout",!1)),autoSurround:du(new sl(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[Xa("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),Xa("editor.autoSurround.quotes","Surround with quotes but not brackets."),Xa("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:Xa("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:du(new Jl),bracketPairGuides:du(new eu),stickyTabStops:du(new el(117,"stickyTabStops",!1,{description:Xa("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:du(new el(17,"codeLens",!0,{description:Xa("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:du(new ol(18,"codeLensFontFamily","",{description:Xa("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:du(new nl(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:Xa("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:du(new el(20,"colorDecorators",!0,{description:Xa("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:du(new sl(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[Xa("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),Xa("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),Xa("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:Xa("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:du(new nl(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:Xa("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:du(new el(22,"columnSelection",!1,{description:Xa("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:du(new dl),contextmenu:du(new el(24,"contextmenu",!0)),copyWithSyntaxHighlighting:du(new el(25,"copyWithSyntaxHighlighting",!0,{description:Xa("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:du(new ll(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],(function(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}),{description:Xa("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:du(new sl(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[Xa("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),Xa("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),Xa("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:Xa("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:du(new ll(28,"cursorStyle",ul.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],(function(e){switch(e){case"line":return ul.Line;case"block":return ul.Block;case"underline":return ul.Underline;case"line-thin":return ul.LineThin;case"block-outline":return ul.BlockOutline;case"underline-thin":return ul.UnderlineThin}}),{description:Xa("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:du(new nl(29,"cursorSurroundingLines",0,0,1073741824,{description:Xa("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:du(new sl(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[Xa("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),Xa("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:Xa("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:du(new nl(31,"cursorWidth",0,0,1073741824,{markdownDescription:Xa("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:du(new el(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:du(new el(33,"disableMonospaceOptimizations",!1)),domReadOnly:du(new el(34,"domReadOnly",!1)),dragAndDrop:du(new el(35,"dragAndDrop",!0,{description:Xa("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:du(new fl),dropIntoEditor:du(new su),stickyScroll:du(new Ll),experimentalWhitespaceRendering:du(new sl(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[Xa("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),Xa("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),Xa("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:Xa("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:du(new ol(39,"extraEditorClassName","")),fastScrollSensitivity:du(new rl(40,"fastScrollSensitivity",5,(function(e){return e<=0?5:e}),{markdownDescription:Xa("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:du(new gl),fixedOverflowWidgets:du(new el(42,"fixedOverflowWidgets",!1)),folding:du(new el(43,"folding",!0,{description:Xa("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:du(new sl(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[Xa("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),Xa("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:Xa("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:du(new el(45,"foldingHighlight",!0,{description:Xa("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:du(new el(46,"foldingImportsByDefault",!1,{description:Xa("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:du(new nl(47,"foldingMaximumRegions",5e3,10,65e3,{description:Xa("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:du(new el(48,"unfoldOnClickAfterEndOfLine",!1,{description:Xa("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:du(new ol(49,"fontFamily",uu.fontFamily,{description:Xa("fontFamily","Controls the font family.")})),fontInfo:du(new ml),fontLigatures2:du(new vl),fontSize:du(new yl),fontWeight:du(new _l),fontVariations:du(new pl),formatOnPaste:du(new el(55,"formatOnPaste",!1,{description:Xa("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:du(new el(56,"formatOnType",!1,{description:Xa("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:du(new el(57,"glyphMargin",!0,{description:Xa("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:du(new kl),hideCursorInOverviewRuler:du(new el(59,"hideCursorInOverviewRuler",!1,{description:Xa("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:du(new wl),inDiffEditor:du(new el(61,"inDiffEditor",!1)),letterSpacing:du(new rl(64,"letterSpacing",uu.letterSpacing,(function(e){return rl.clamp(e,-5,20)}),{description:Xa("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:du(new xl),lineDecorationsWidth:du(new Nl),lineHeight:du(new Il),lineNumbers:du(new Ol),lineNumbersMinChars:du(new nl(69,"lineNumbersMinChars",5,1,300)),linkedEditing:du(new el(70,"linkedEditing",!1,{description:Xa("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:du(new el(71,"links",!0,{description:Xa("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:du(new sl(72,"matchBrackets","always",["always","near","never"],{description:Xa("matchBrackets","Highlight matching brackets.")})),minimap:du(new El),mouseStyle:du(new sl(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:du(new rl(75,"mouseWheelScrollSensitivity",1,(function(e){return 0===e?1:e}),{markdownDescription:Xa("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:du(new el(76,"mouseWheelZoom",!1,{markdownDescription:ms?Xa("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):Xa("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:du(new el(77,"multiCursorMergeOverlapping",!0,{description:Xa("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:du(new ll(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],(function(e){return"ctrlCmd"===e?ms?"metaKey":"ctrlKey":"altKey"}),{markdownEnumDescriptions:[Xa("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),Xa("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:Xa({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:du(new sl(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[Xa("multiCursorPaste.spread","Each cursor pastes a single line of the text."),Xa("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:Xa("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:du(new nl(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:Xa("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:du(new sl(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[Xa("occurrencesHighlight.off","Does not highlight occurrences."),Xa("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),Xa("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:Xa("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:du(new el(82,"overviewRulerBorder",!0,{description:Xa("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:du(new nl(83,"overviewRulerLanes",3,0,3)),padding:du(new Ml),pasteAs:du(new lu),parameterHints:du(new Tl),peekWidgetDefaultFocus:du(new sl(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[Xa("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),Xa("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:Xa("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:du(new Al),definitionLinkOpensInPeek:du(new el(89,"definitionLinkOpensInPeek",!1,{description:Xa("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:du(new Pl),quickSuggestionsDelay:du(new nl(91,"quickSuggestionsDelay",10,0,1073741824,{description:Xa("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:du(new el(92,"readOnly",!1)),readOnlyMessage:du(new Bl),renameOnType:du(new el(94,"renameOnType",!1,{description:Xa("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:Xa("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:du(new el(95,"renderControlCharacters",!0,{description:Xa("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:du(new sl(96,"renderFinalNewline",ys?"dimmed":"on",["off","on","dimmed"],{description:Xa("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:du(new sl(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",Xa("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:Xa("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:du(new el(98,"renderLineHighlightOnlyWhenFocus",!1,{description:Xa("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:du(new sl(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:du(new sl(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",Xa("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),Xa("renderWhitespace.selection","Render whitespace characters only on selected text."),Xa("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:Xa("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:du(new nl(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:du(new el(102,"roundedSelection",!0,{description:Xa("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:du(new Wl),scrollbar:du(new Vl),scrollBeyondLastColumn:du(new nl(105,"scrollBeyondLastColumn",4,0,1073741824,{description:Xa("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:du(new el(106,"scrollBeyondLastLine",!0,{description:Xa("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:du(new el(107,"scrollPredominantAxis",!0,{description:Xa("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:du(new el(108,"selectionClipboard",!0,{description:Xa("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:ys})),selectionHighlight:du(new el(109,"selectionHighlight",!0,{description:Xa("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:du(new el(110,"selectOnLineNumbers",!0)),showFoldingControls:du(new sl(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[Xa("showFoldingControls.always","Always show the folding controls."),Xa("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),Xa("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:Xa("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:du(new el(112,"showUnused",!0,{description:Xa("showUnused","Controls fading out of unused code.")})),showDeprecated:du(new el(141,"showDeprecated",!0,{description:Xa("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:du(new Dl),snippetSuggestions:du(new sl(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[Xa("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),Xa("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),Xa("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),Xa("snippetSuggestions.none","Do not show snippet suggestions.")],description:Xa("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:du(new iu),smoothScrolling:du(new el(115,"smoothScrolling",!1,{description:Xa("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:du(new nl(118,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:du(new nu),inlineSuggest:du(new Xl),inlineEdit:du(new $l),inlineCompletionsAccessibilityVerbose:du(new el(150,"inlineCompletionsAccessibilityVerbose",!1,{description:Xa("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:du(new nl(120,"suggestFontSize",0,0,1e3,{markdownDescription:Xa("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:du(new nl(121,"suggestLineHeight",0,0,1e3,{markdownDescription:Xa("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:du(new el(122,"suggestOnTriggerCharacters",!0,{description:Xa("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:du(new sl(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[Xa("suggestSelection.first","Always select the first suggestion."),Xa("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),Xa("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:Xa("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:du(new sl(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[Xa("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),Xa("tabCompletion.off","Disable tab completions."),Xa("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:Xa("tabCompletion","Enables tab completions.")})),tabIndex:du(new nl(125,"tabIndex",0,-1,1073741824)),unicodeHighlight:du(new Ql),unusualLineTerminators:du(new sl(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[Xa("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),Xa("unusualLineTerminators.off","Unusual line terminators are ignored."),Xa("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:Xa("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:du(new el(128,"useShadowDOM",!0)),useTabStops:du(new el(129,"useTabStops",!0,{description:Xa("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:du(new sl(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[Xa("wordBreak.normal","Use the default line break rule."),Xa("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:Xa("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:du(new ru),wordSeparators:du(new ol(132,"wordSeparators",Vs,{description:Xa("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:du(new sl(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[Xa("wordWrap.off","Lines will never wrap."),Xa("wordWrap.on","Lines will wrap at the viewport width."),Xa({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),Xa({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:Xa({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:du(new ol(134,"wordWrapBreakAfterCharacters"," \t})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:du(new ol(135,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:du(new nl(136,"wordWrapColumn",80,1,1073741824,{markdownDescription:Xa({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:du(new sl(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:du(new sl(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:du(new hl),defaultColorDecorators:du(new el(148,"defaultColorDecorators",!1,{markdownDescription:Xa("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:du(new Rl),tabFocusMode:du(new el(145,"tabFocusMode",!1,{markdownDescription:Xa("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:du(new Cl),wrappingInfo:du(new au),wrappingIndent:du(new ou),wrappingStrategy:du(new Sl)},fu=function(){function e(){u(this,e),this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout((function(){if(e.stack){if(xu.isErrorNoTelemetry(e))throw new xu(e.message+"\n\n"+e.stack);throw new Error(e.message+"\n\n"+e.stack)}throw e}),0)}}return h(e,[{key:"emit",value:function(e){this.listeners.forEach((function(t){t(e)}))}},{key:"onUnexpectedError",value:function(e){this.unexpectedErrorHandler(e),this.emit(e)}},{key:"onUnexpectedExternalError",value:function(e){this.unexpectedErrorHandler(e)}}]),e}(),gu=new fu;function vu(e){_u(e)||gu.onUnexpectedError(e)}function pu(e){_u(e)||gu.onUnexpectedExternalError(e)}function mu(e){return e instanceof Error?{$isError:!0,name:e.name,message:e.message,stack:e.stacktrace||e.stack,noTelemetry:xu.isErrorNoTelemetry(e)}:e}var yu="Canceled";function _u(e){return e instanceof bu||e instanceof Error&&e.name===yu&&e.message===yu}var bu=function(e){function t(){var e;return u(this,t),(e=l(this,t,[yu])).name=e.message,e}return p(t,e),t}(N(Error));function ku(){var e=new Error(yu);return e.name=e.message,e}function wu(e){return e?new Error("Illegal argument: ".concat(e)):new Error("Illegal argument")}function Cu(e){return e?new Error("Illegal state: ".concat(e)):new Error("Illegal state")}var Su=function(e){function t(e){var n;return u(this,t),n=l(this,t,["NotSupported"]),e&&(n.message=e),n}return p(t,e),t}(N(Error)),xu=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e])).name="CodeExpectedError",n}return p(t,e),h(t,null,[{key:"fromError",value:function(e){if(e instanceof t)return e;var n=new t;return n.message=e.message,n.stack=e.stack,n}},{key:"isErrorNoTelemetry",value:function(e){return"CodeExpectedError"===e.name}}]),t}(N(Error)),Lu=function(e){function t(e){var n;return u(this,t),n=l(this,t,[e||"An unexpected bug occurred."]),Object.setPrototypeOf(n,t.prototype),n}return p(t,e),t}(N(Error));function Du(e,t){var n,i=this,r=!1;return function(){return r?n:(r=!0,n=e.apply(i,arguments))}}function Nu(e){return"object"===(void 0===e?"undefined":L(e))&&null!==e&&"function"==typeof e.dispose&&0===e.dispose.length}function Iu(e){if(Ts.is(e)){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s)try{s.dispose()}catch(e){t.push(e)}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}if(1===t.length)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}if(e)return e.dispose(),e}function Eu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Mu((function(){return Iu(t)}))}function Mu(e){return{dispose:Du((function(){e()}))}}var Tu=function(){function e(){u(this,e),this._toDispose=new Set,this._isDisposed=!1}return h(e,[{key:"dispose",value:function(){this._isDisposed||(this._isDisposed=!0,this.clear())}},{key:"isDisposed",get:function(){return this._isDisposed}},{key:"clear",value:function(){if(0!==this._toDispose.size)try{Iu(this._toDispose)}finally{this._toDispose.clear()}}},{key:"add",value:function(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?e.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}},{key:"deleteAndLeak",value:function(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}}]),e}();Tu.DISABLE_DISPOSED_WARNING=!1;var Ru=function(){function e(){u(this,e),this._store=new Tu,this._store}return h(e,[{key:"dispose",value:function(){this._store.dispose()}},{key:"_register",value:function(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}]),e}();Ru.None=Object.freeze({dispose:function(){}});var Au,Pu=function(){function e(){u(this,e),this._isDisposed=!1}return h(e,[{key:"value",get:function(){return this._isDisposed?void 0:this._value},set:function(e){var t;this._isDisposed||e===this._value||(null===(t=this._value)||void 0===t||t.dispose(),this._value=e)}},{key:"clear",value:function(){this.value=void 0}},{key:"dispose",value:function(){var e;this._isDisposed=!0,null===(e=this._value)||void 0===e||e.dispose(),this._value=void 0}}]),e}(),Ou=function(){function e(t){u(this,e),this._disposable=t,this._counter=1}return h(e,[{key:"acquire",value:function(){return this._counter++,this}},{key:"release",value:function(){return 0==--this._counter&&this._disposable.dispose(),this}}]),e}(),Fu=function(){function e(t){u(this,e),this.object=t}return h(e,[{key:"dispose",value:function(){}}]),e}(),Wu=function(){function e(){u(this,e),this._store=new Map,this._isDisposed=!1}return h(e,[{key:"dispose",value:function(){this._isDisposed=!0,this.clearAndDisposeAll()}},{key:"clearAndDisposeAll",value:function(){if(this._store.size)try{Iu(this._store.values())}finally{this._store.clear()}}},{key:"get",value:function(e){return this._store.get(e)}},{key:"set",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i)||(null===(n=this._store.get(e))||void 0===n||n.dispose());this._store.set(e,t)}},{key:"deleteAndDispose",value:function(e){var t;null===(t=this._store.get(e))||void 0===t||t.dispose(),this._store.delete(e)}},{key:Symbol.iterator,value:function(){return this._store[Symbol.iterator]()}}]),e}(),Bu=globalThis.performance&&"function"==typeof globalThis.performance.now,Hu=function(){function e(t){u(this,e),this._now=Bu&&!1===t?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}return h(e,[{key:"stop",value:function(){this._stopTime=this._now()}},{key:"reset",value:function(){this._startTime=this._now(),this._stopTime=-1}},{key:"elapsed",value:function(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}}],[{key:"create",value:function(t){return new e(t)}}]),e}();!function(e){function t(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=!1,r=void 0;return r=e((function(e){if(!i)return r?r.dispose():i=!0,t.call(n,e)}),null,arguments.length>2?arguments[2]:void 0),i&&r.dispose(),r}}function n(e,t,n){return r((function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e((function(e){return n.call(i,t(e))}),null,arguments.length>2?arguments[2]:void 0)}),n)}function i(e,t,n){return r((function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e((function(e){return t(e)&&n.call(i,e)}),null,arguments.length>2?arguments[2]:void 0)}),n)}function r(e,t){var n,i=new Zu({onWillAddFirstListener:function(){n=e(i.fire,i)},onDidRemoveLastListener:function(){null==n||n.dispose()}});return null==t||t.add(i),i.event}function o(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>6?arguments[6]:void 0,l=void 0,u=void 0,c=0,d=new Zu({leakWarningThreshold:arguments.length>5?arguments[5]:void 0,onWillAddFirstListener:function(){n=e((function(e){c++,l=t(l,e),o&&!u&&(d.fire(l),l=void 0),i=function(){var e=l;l=void 0,u=void 0,(!o||c>1)&&d.fire(e),c=0},"number"==typeof r?(clearTimeout(u),u=setTimeout(i,r)):void 0===u&&(u=0,queueMicrotask(i))}))},onWillRemoveListener:function(){a&&c>0&&(null==i||i())},onDidRemoveLastListener:function(){i=void 0,n.dispose()}});return null==s||s.add(d),d.event}e.None=function(){return Ru.None},e.defer=function(e,t){return o(e,(function(){}),0,void 0,!0,void 0,t)},e.once=t,e.onceIf=function(t,n){return e.once(e.filter(t,n))},e.map=n,e.forEach=function(e,t,n){return r((function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e((function(e){t(e),n.call(i,e)}),null,arguments.length>2?arguments[2]:void 0)}),n)},e.filter=i,e.signal=function(e){return e},e.any=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0,r=Eu.apply(void 0,x(t.map((function(t){return t((function(t){return e.call(n,t)}))}))));return function(e,t){t instanceof Array?t.push(e):t&&t.add(e);return e}(r,i)}},e.reduce=function(e,t,i,r){var o=i;return n(e,(function(e){return o=t(o,e)}),r)},e.debounce=o,e.accumulate=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return e.debounce(t,(function(e,t){return e?(e.push(t),e):[t]}),n,void 0,!0,void 0,i)},e.latch=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e===t},r=!0;return i(e,(function(e){var i=r||!n(e,t);return r=!1,t=e,i}),arguments.length>2?arguments[2]:void 0)},e.split=function(t,n,i){return[e.filter(t,n,i),e.filter(t,(function(e){return!n(e)}),i)]},e.buffer=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>3?arguments[3]:void 0,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).slice(),r=e((function(e){i?i.push(e):a.fire(e)}));n&&n.add(r);var o=function(){null==i||i.forEach((function(e){return a.fire(e)})),i=null},a=new Zu({onWillAddFirstListener:function(){r||(r=e((function(e){return a.fire(e)})),n&&n.add(r))},onDidAddFirstListener:function(){i&&(t?setTimeout(o):o())},onDidRemoveLastListener:function(){r&&r.dispose(),r=null}});return n&&n.add(a),a.event},e.chain=function(e,t){return function(n,i,r){var o=t(new s);return e((function(e){var t=o.evaluate(e);t!==a&&n.call(i,t)}),void 0,r)}};var a=Symbol("HaltChainable"),s=function(){function e(){u(this,e),this.steps=[]}return h(e,[{key:"map",value:function(e){return this.steps.push(e),this}},{key:"forEach",value:function(e){return this.steps.push((function(t){return e(t),t})),this}},{key:"filter",value:function(e){return this.steps.push((function(t){return e(t)?t:a})),this}},{key:"reduce",value:function(e,t){var n=t;return this.steps.push((function(t){return n=e(n,t)})),this}},{key:"latch",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e===t},n=!0;return this.steps.push((function(i){var r=n||!t(i,e);return n=!1,e=i,r?i:a})),this}},{key:"evaluate",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this.steps[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){if(e=(0,r.value)(e),e===a)break}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}}]),e}();e.fromNodeEventEmitter=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.fire(n.apply(void 0,x(t)))},r=new Zu({onWillAddFirstListener:function(){return e.on(t,i)},onDidRemoveLastListener:function(){return e.removeListener(t,i)}});return r.event},e.fromDOMEventEmitter=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.fire(n.apply(void 0,x(t)))},r=new Zu({onWillAddFirstListener:function(){return e.addEventListener(t,i)},onDidRemoveLastListener:function(){return e.removeEventListener(t,i)}});return r.event},e.toPromise=function(e){return new Promise((function(n){return t(e)(n)}))},e.fromPromise=function(e){var t=new Zu;return e.then((function(e){t.fire(e)}),(function(){t.fire(void 0)})).finally((function(){t.dispose()})),t.event},e.forward=function(e,t){return e((function(e){return t.fire(e)}))},e.runAndSubscribe=function(e,t,n){return t(n),e((function(e){return t(e)}))};var l=function(){function e(t,n){var i=this;u(this,e),this._observable=t,this._counter=0,this._hasChanged=!1;var r={onWillAddFirstListener:function(){t.addObserver(i),i._observable.reportChanges()},onDidRemoveLastListener:function(){t.removeObserver(i)}};this.emitter=new Zu(r),n&&n.add(this.emitter)}return h(e,[{key:"beginUpdate",value:function(e){this._counter++}},{key:"handlePossibleChange",value:function(e){}},{key:"handleChange",value:function(e,t){this._hasChanged=!0}},{key:"endUpdate",value:function(e){this._counter--,0===this._counter&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}]),e}();e.fromObservable=function(e,t){return new l(e,t).emitter.event},e.fromObservableLight=function(e){return function(t,n,i){var r=0,o=!1,a={beginUpdate:function(){r++},endUpdate:function(){0===--r&&(e.reportChanges(),o&&(o=!1,t.call(n)))},handlePossibleChange:function(){},handleChange:function(){o=!0}};e.addObserver(a),e.reportChanges();var s={dispose:function(){e.removeObserver(a)}};return i instanceof Tu?i.add(s):Array.isArray(i)&&i.push(s),s}}}(Au||(Au={}));var Vu=function(){function e(t){u(this,e),this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name="".concat(t,"_").concat(e._idPool++),e.all.add(this)}return h(e,[{key:"start",value:function(e){this._stopWatch=new Hu,this.listenerCount=e}},{key:"stop",value:function(){if(this._stopWatch){var e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}}]),e}();Vu.all=new Set,Vu._idPool=0;var zu=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e._idPool++).toString(16).padStart(3,"0");u(this,e),this._errorHandler=t,this.threshold=n,this.name=i,this._warnCountdown=0}return h(e,[{key:"dispose",value:function(){var e;null===(e=this._stacks)||void 0===e||e.clear()}},{key:"check",value:function(e,t){var n=this,i=this.threshold;if(!(i<=0||t<i)){this._stacks||(this._stacks=new Map);var r=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,r+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=.5*i;var o=C(this.getMostFrequentStack(),2),a=o[0],s=o[1],l="[".concat(this.name,"] potential listener LEAK detected, having ").concat(t," listeners already. MOST frequent listener (").concat(s,"):");console.warn(l),console.warn(a);var u=new Ku(l,a);this._errorHandler(u)}return function(){var t=n._stacks.get(e.value)||0;n._stacks.set(e.value,t-1)}}}},{key:"getMostFrequentStack",value:function(){if(this._stacks){var e,t=0,n=!0,i=!1,r=void 0;try{for(var o,a=this._stacks[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2),l=s[0],u=s[1];(!e||t<u)&&(e=[l,u],t=u)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return e}}}]),e}();zu._idPool=1;var Uu,ju=function(){function e(t){u(this,e),this.value=t}return h(e,[{key:"print",value:function(){console.warn(this.value.split("\n").slice(2).join("\n"))}}],[{key:"create",value:function(){var t,n=new Error;return new e(null!==(t=n.stack)&&void 0!==t?t:"")}}]),e}(),Ku=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[e])).name="ListenerLeakError",i.stack=n,i}return p(t,e),t}(N(Error)),qu=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[e])).name="ListenerRefusalError",i.stack=n,i}return p(t,e),t}(N(Error)),Gu=function e(t){u(this,e),this.value=t},Zu=function(){function e(t){var n,i,r,o,a,s;u(this,e),this._size=0,this._options=t,this._leakageMon=(null===(n=this._options)||void 0===n?void 0:n.leakWarningThreshold)?new zu(null!==(a=null==t?void 0:t.onListenerError)&&void 0!==a?a:vu,null!==(s=null===(i=this._options)||void 0===i?void 0:i.leakWarningThreshold)&&void 0!==s?s:-1):void 0,this._perfMon=(null===(r=this._options)||void 0===r?void 0:r._profName)?new Vu(this._options._profName):void 0,this._deliveryQueue=null===(o=this._options)||void 0===o?void 0:o.deliveryQueue}return h(e,[{key:"dispose",value:function(){var e,t,n,i;this._disposed||(this._disposed=!0,(null===(e=this._deliveryQueue)||void 0===e?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),null===(n=this._options)||void 0===n||null===(t=n.onDidRemoveLastListener)||void 0===t||t.call(n),null===(i=this._leakageMon)||void 0===i||i.dispose())}},{key:"event",get:function(){var e,t=this;return null!==(e=this._event)&&void 0!==e||(this._event=function(e,n,i){if(t._leakageMon&&t._size>Math.pow(t._leakageMon.threshold,2)){var r,o,a="[".concat(t._leakageMon.name,"] REFUSES to accept new listeners because it exceeded its threshold by far (").concat(t._size," vs ").concat(t._leakageMon.threshold,")");console.warn(a);var s=null!==(o=t._leakageMon.getMostFrequentStack())&&void 0!==o?o:["UNKNOWN stack",-1],l=new qu("".concat(a,". HINT: Stack shows most frequent listener (").concat(s[1],"-times)"),s[0]);return((null===(r=t._options)||void 0===r?void 0:r.onListenerError)||vu)(l),Ru.None}if(t._disposed)return Ru.None;n&&(e=e.bind(n));var u,c,d,h,f,g=new Gu(e);if(t._leakageMon&&t._size>=Math.ceil(.2*t._leakageMon.threshold)&&(g.stack=ju.create(),u=t._leakageMon.check(g.stack,t._size+1)),t._listeners)if(t._listeners instanceof Gu){var v;null!==(v=t._deliveryQueue)&&void 0!==v||(t._deliveryQueue=new Yu),t._listeners=[t._listeners,g]}else t._listeners.push(g);else null===(d=t._options)||void 0===d||null===(c=d.onWillAddFirstListener)||void 0===c||c.call(d,t),t._listeners=g,null===(f=t._options)||void 0===f||null===(h=f.onDidAddFirstListener)||void 0===h||h.call(f,t);t._size++;var p=Mu((function(){null==u||u(),t._removeListener(g)}));return i instanceof Tu?i.add(p):Array.isArray(i)&&i.push(p),p}),this._event}},{key:"_removeListener",value:function(e){var t,n;if(null===(n=this._options)||void 0===n||null===(t=n.onWillRemoveListener)||void 0===t||t.call(n,this),this._listeners){var i,r;if(1===this._size)return this._listeners=void 0,null===(r=this._options)||void 0===r||null===(i=r.onDidRemoveLastListener)||void 0===i||i.call(r,this),void(this._size=0);var o=this._listeners,a=o.indexOf(e);if(-1===a)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,o[a]=void 0;var s=this._deliveryQueue.current===this;if(2*this._size<=o.length){for(var l=0,u=0;u<o.length;u++)o[u]?o[l++]=o[u]:s&&(this._deliveryQueue.end--,l<this._deliveryQueue.i&&this._deliveryQueue.i--);o.length=l}}}},{key:"_deliver",value:function(e,t){var n;if(e){var i=(null===(n=this._options)||void 0===n?void 0:n.onListenerError)||vu;if(i)try{e.value(t)}catch(e){i(e)}else e.value(t)}}},{key:"_deliverQueue",value:function(e){for(var t=e.current._listeners;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}},{key:"fire",value:function(e){var t,n,i,r;(null===(t=this._deliveryQueue)||void 0===t?void 0:t.current)&&(this._deliverQueue(this._deliveryQueue),null===(r=this._perfMon)||void 0===r||r.stop());if(null===(n=this._perfMon)||void 0===n||n.start(this._size),this._listeners)if(this._listeners instanceof Gu)this._deliver(this._listeners,e);else{var o=this._deliveryQueue;o.enqueue(this,e,this._listeners.length),this._deliverQueue(o)}else;null===(i=this._perfMon)||void 0===i||i.stop()}},{key:"hasListeners",value:function(){return this._size>0}}]),e}(),Yu=function(){function e(){u(this,e),this.i=-1,this.end=0}return h(e,[{key:"enqueue",value:function(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}},{key:"reset",value:function(){this.i=this.end,this.current=void 0,this.value=void 0}}]),e}(),Qu=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._isPaused=0,n._eventQueue=new Hs,n._mergeFn=null==e?void 0:e.merge,n}return p(t,e),h(t,[{key:"pause",value:function(){this._isPaused++}},{key:"resume",value:function(){if(0!==this._isPaused&&0==--this._isPaused)if(this._mergeFn){if(this._eventQueue.size>0){var e=Array.from(this._eventQueue);this._eventQueue.clear(),g(v(t.prototype),"fire",this).call(this,this._mergeFn(e))}}else for(;!this._isPaused&&0!==this._eventQueue.size;)g(v(t.prototype),"fire",this).call(this,this._eventQueue.shift())}},{key:"fire",value:function(e){this._size&&(0!==this._isPaused?this._eventQueue.push(e):g(v(t.prototype),"fire",this).call(this,e))}}]),t}(Zu),Xu=function(e){function t(e){var n,i;return u(this,t),(n=l(this,t,[e]))._delay=null!==(i=e.delay)&&void 0!==i?i:100,n}return p(t,e),h(t,[{key:"fire",value:function(e){var n=this;this._handle||(this.pause(),this._handle=setTimeout((function(){n._handle=void 0,n.resume()}),this._delay)),g(v(t.prototype),"fire",this).call(this,e)}}]),t}(Qu),$u=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._queuedEvents=[],n._mergeFn=null==e?void 0:e.merge,n}return p(t,e),h(t,[{key:"fire",value:function(e){var n=this;this.hasListeners()&&(this._queuedEvents.push(e),1===this._queuedEvents.length&&queueMicrotask((function(){n._mergeFn?g(v(t.prototype),"fire",n).call(n,n._mergeFn(n._queuedEvents)):n._queuedEvents.forEach((function(e){return g(v(t.prototype),"fire",n).call(n,e)})),n._queuedEvents=[]})))}}]),t}(Zu),Ju=function(){function e(){var t=this;u(this,e),this.hasListeners=!1,this.events=[],this.emitter=new Zu({onWillAddFirstListener:function(){return t.onFirstListenerAdd()},onDidRemoveLastListener:function(){return t.onLastListenerRemove()}})}return h(e,[{key:"event",get:function(){return this.emitter.event}},{key:"add",value:function(e){var t=this,n={event:e,listener:null};this.events.push(n),this.hasListeners&&this.hook(n);return Mu(Du((function(){t.hasListeners&&t.unhook(n);var e=t.events.indexOf(n);t.events.splice(e,1)})))}},{key:"onFirstListenerAdd",value:function(){var e=this;this.hasListeners=!0,this.events.forEach((function(t){return e.hook(t)}))}},{key:"onLastListenerRemove",value:function(){var e=this;this.hasListeners=!1,this.events.forEach((function(t){return e.unhook(t)}))}},{key:"hook",value:function(e){var t=this;e.listener=e.event((function(e){return t.emitter.fire(e)}))}},{key:"unhook",value:function(e){var t;null===(t=e.listener)||void 0===t||t.dispose(),e.listener=null}},{key:"dispose",value:function(){this.emitter.dispose();var e=!0,t=!1,n=void 0;try{for(var i,r=this.events[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o;null===(o=i.value.listener)||void 0===o||o.dispose()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.events=[]}}]),e}(),ec=function(){function e(){u(this,e),this.data=[]}return h(e,[{key:"wrapEvent",value:function(e,t,n){var i=this;return function(r,o,a){return e((function(e){var a,s=i.data[i.data.length-1];if(t){var l,u=s;if(u)null!==(l=(a=u).items)&&void 0!==l||(a.items=[]),u.items.push(e),0===u.buffers.length&&s.buffers.push((function(){var e,i;null!==(i=(e=u).reducedResult)&&void 0!==i||(e.reducedResult=n?u.items.reduce(t,n):u.items.reduce(t)),r.call(o,u.reducedResult)}));else r.call(o,t(n,e))}else s?s.buffers.push((function(){return r.call(o,e)})):r.call(o,e)}),void 0,a)}}},{key:"bufferEvents",value:function(e){var t={buffers:new Array};this.data.push(t);var n=e();return this.data.pop(),t.buffers.forEach((function(e){return e()})),n}}]),e}(),tc=function(){function e(){var t=this;u(this,e),this.listening=!1,this.inputEvent=Au.None,this.inputEventListener=Ru.None,this.emitter=new Zu({onDidAddFirstListener:function(){t.listening=!0,t.inputEventListener=t.inputEvent(t.emitter.fire,t.emitter)},onDidRemoveLastListener:function(){t.listening=!1,t.inputEventListener.dispose()}}),this.event=this.emitter.event}return h(e,[{key:"input",set:function(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}},{key:"dispose",value:function(){this.inputEventListener.dispose(),this.emitter.dispose()}}]),e}(),nc=Object.freeze((function(e,t){var n=setTimeout(e.bind(t),0);return{dispose:function(){clearTimeout(n)}}}));!function(e){e.isCancellationToken=function(t){return t===e.None||t===e.Cancelled||(t instanceof ic||!(!t||"object"!==(void 0===t?"undefined":L(t)))&&("boolean"==typeof t.isCancellationRequested&&"function"==typeof t.onCancellationRequested))},e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Au.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:nc})}(Uu||(Uu={}));var ic=function(){function e(){u(this,e),this._isCancelled=!1,this._emitter=null}return h(e,[{key:"cancel",value:function(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}},{key:"isCancellationRequested",get:function(){return this._isCancelled}},{key:"onCancellationRequested",get:function(){return this._isCancelled?nc:(this._emitter||(this._emitter=new Zu),this._emitter.event)}},{key:"dispose",value:function(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}]),e}(),rc=function(){function e(t){u(this,e),this._token=void 0,this._parentListener=void 0,this._parentListener=t&&t.onCancellationRequested(this.cancel,this)}return h(e,[{key:"token",get:function(){return this._token||(this._token=new ic),this._token}},{key:"cancel",value:function(){this._token?this._token instanceof ic&&this._token.cancel():this._token=Uu.Cancelled}},{key:"dispose",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&this.cancel(),null===(e=this._parentListener)||void 0===e||e.dispose(),this._token?this._token instanceof ic&&this._token.dispose():this._token=Uu.None}}]),e}();function oc(e){var t=new rc;return e.add({dispose:function(){t.cancel()}}),t.token}for(var ac,sc=function(){function e(){u(this,e),this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}return h(e,[{key:"define",value:function(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}},{key:"keyCodeToStr",value:function(e){return this._keyCodeToStr[e]}},{key:"strToKeyCode",value:function(e){return this._strToKeyCode[e.toLowerCase()]||0}}]),e}(),lc=new sc,uc=new sc,cc=new sc,dc=new Array(230),hc=Object.create(null),fc=Object.create(null),gc=[],vc=0;vc<=193;vc++)gc[vc]=-1;function pc(e,t){return(e|(65535&t)<<16>>>0)>>>0}!function(){var e="",t=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",e,e],[1,1,"Hyper",0,e,0,e,e,e],[1,2,"Super",0,e,0,e,e,e],[1,3,"Fn",0,e,0,e,e,e],[1,4,"FnLock",0,e,0,e,e,e],[1,5,"Suspend",0,e,0,e,e,e],[1,6,"Resume",0,e,0,e,e,e],[1,7,"Turbo",0,e,0,e,e,e],[1,8,"Sleep",0,e,0,"VK_SLEEP",e,e],[1,9,"WakeUp",0,e,0,e,e,e],[0,10,"KeyA",31,"A",65,"VK_A",e,e],[0,11,"KeyB",32,"B",66,"VK_B",e,e],[0,12,"KeyC",33,"C",67,"VK_C",e,e],[0,13,"KeyD",34,"D",68,"VK_D",e,e],[0,14,"KeyE",35,"E",69,"VK_E",e,e],[0,15,"KeyF",36,"F",70,"VK_F",e,e],[0,16,"KeyG",37,"G",71,"VK_G",e,e],[0,17,"KeyH",38,"H",72,"VK_H",e,e],[0,18,"KeyI",39,"I",73,"VK_I",e,e],[0,19,"KeyJ",40,"J",74,"VK_J",e,e],[0,20,"KeyK",41,"K",75,"VK_K",e,e],[0,21,"KeyL",42,"L",76,"VK_L",e,e],[0,22,"KeyM",43,"M",77,"VK_M",e,e],[0,23,"KeyN",44,"N",78,"VK_N",e,e],[0,24,"KeyO",45,"O",79,"VK_O",e,e],[0,25,"KeyP",46,"P",80,"VK_P",e,e],[0,26,"KeyQ",47,"Q",81,"VK_Q",e,e],[0,27,"KeyR",48,"R",82,"VK_R",e,e],[0,28,"KeyS",49,"S",83,"VK_S",e,e],[0,29,"KeyT",50,"T",84,"VK_T",e,e],[0,30,"KeyU",51,"U",85,"VK_U",e,e],[0,31,"KeyV",52,"V",86,"VK_V",e,e],[0,32,"KeyW",53,"W",87,"VK_W",e,e],[0,33,"KeyX",54,"X",88,"VK_X",e,e],[0,34,"KeyY",55,"Y",89,"VK_Y",e,e],[0,35,"KeyZ",56,"Z",90,"VK_Z",e,e],[0,36,"Digit1",22,"1",49,"VK_1",e,e],[0,37,"Digit2",23,"2",50,"VK_2",e,e],[0,38,"Digit3",24,"3",51,"VK_3",e,e],[0,39,"Digit4",25,"4",52,"VK_4",e,e],[0,40,"Digit5",26,"5",53,"VK_5",e,e],[0,41,"Digit6",27,"6",54,"VK_6",e,e],[0,42,"Digit7",28,"7",55,"VK_7",e,e],[0,43,"Digit8",29,"8",56,"VK_8",e,e],[0,44,"Digit9",30,"9",57,"VK_9",e,e],[0,45,"Digit0",21,"0",48,"VK_0",e,e],[1,46,"Enter",3,"Enter",13,"VK_RETURN",e,e],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",e,e],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",e,e],[1,49,"Tab",2,"Tab",9,"VK_TAB",e,e],[1,50,"Space",10,"Space",32,"VK_SPACE",e,e],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,e,0,e,e,e],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",e,e],[1,64,"F1",59,"F1",112,"VK_F1",e,e],[1,65,"F2",60,"F2",113,"VK_F2",e,e],[1,66,"F3",61,"F3",114,"VK_F3",e,e],[1,67,"F4",62,"F4",115,"VK_F4",e,e],[1,68,"F5",63,"F5",116,"VK_F5",e,e],[1,69,"F6",64,"F6",117,"VK_F6",e,e],[1,70,"F7",65,"F7",118,"VK_F7",e,e],[1,71,"F8",66,"F8",119,"VK_F8",e,e],[1,72,"F9",67,"F9",120,"VK_F9",e,e],[1,73,"F10",68,"F10",121,"VK_F10",e,e],[1,74,"F11",69,"F11",122,"VK_F11",e,e],[1,75,"F12",70,"F12",123,"VK_F12",e,e],[1,76,"PrintScreen",0,e,0,e,e,e],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",e,e],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",e,e],[1,79,"Insert",19,"Insert",45,"VK_INSERT",e,e],[1,80,"Home",14,"Home",36,"VK_HOME",e,e],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",e,e],[1,82,"Delete",20,"Delete",46,"VK_DELETE",e,e],[1,83,"End",13,"End",35,"VK_END",e,e],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",e,e],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",e],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",e],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",e],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",e],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",e,e],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",e,e],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",e,e],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",e,e],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",e,e],[1,94,"NumpadEnter",3,e,0,e,e,e],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",e,e],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",e,e],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",e,e],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",e,e],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",e,e],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",e,e],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",e,e],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",e,e],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",e,e],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",e,e],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",e,e],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",e,e],[1,107,"ContextMenu",58,"ContextMenu",93,e,e,e],[1,108,"Power",0,e,0,e,e,e],[1,109,"NumpadEqual",0,e,0,e,e,e],[1,110,"F13",71,"F13",124,"VK_F13",e,e],[1,111,"F14",72,"F14",125,"VK_F14",e,e],[1,112,"F15",73,"F15",126,"VK_F15",e,e],[1,113,"F16",74,"F16",127,"VK_F16",e,e],[1,114,"F17",75,"F17",128,"VK_F17",e,e],[1,115,"F18",76,"F18",129,"VK_F18",e,e],[1,116,"F19",77,"F19",130,"VK_F19",e,e],[1,117,"F20",78,"F20",131,"VK_F20",e,e],[1,118,"F21",79,"F21",132,"VK_F21",e,e],[1,119,"F22",80,"F22",133,"VK_F22",e,e],[1,120,"F23",81,"F23",134,"VK_F23",e,e],[1,121,"F24",82,"F24",135,"VK_F24",e,e],[1,122,"Open",0,e,0,e,e,e],[1,123,"Help",0,e,0,e,e,e],[1,124,"Select",0,e,0,e,e,e],[1,125,"Again",0,e,0,e,e,e],[1,126,"Undo",0,e,0,e,e,e],[1,127,"Cut",0,e,0,e,e,e],[1,128,"Copy",0,e,0,e,e,e],[1,129,"Paste",0,e,0,e,e,e],[1,130,"Find",0,e,0,e,e,e],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",e,e],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",e,e],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",e,e],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",e,e],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",e,e],[1,136,"KanaMode",0,e,0,e,e,e],[0,137,"IntlYen",0,e,0,e,e,e],[1,138,"Convert",0,e,0,e,e,e],[1,139,"NonConvert",0,e,0,e,e,e],[1,140,"Lang1",0,e,0,e,e,e],[1,141,"Lang2",0,e,0,e,e,e],[1,142,"Lang3",0,e,0,e,e,e],[1,143,"Lang4",0,e,0,e,e,e],[1,144,"Lang5",0,e,0,e,e,e],[1,145,"Abort",0,e,0,e,e,e],[1,146,"Props",0,e,0,e,e,e],[1,147,"NumpadParenLeft",0,e,0,e,e,e],[1,148,"NumpadParenRight",0,e,0,e,e,e],[1,149,"NumpadBackspace",0,e,0,e,e,e],[1,150,"NumpadMemoryStore",0,e,0,e,e,e],[1,151,"NumpadMemoryRecall",0,e,0,e,e,e],[1,152,"NumpadMemoryClear",0,e,0,e,e,e],[1,153,"NumpadMemoryAdd",0,e,0,e,e,e],[1,154,"NumpadMemorySubtract",0,e,0,e,e,e],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",e,e],[1,156,"NumpadClearEntry",0,e,0,e,e,e],[1,0,e,5,"Ctrl",17,"VK_CONTROL",e,e],[1,0,e,4,"Shift",16,"VK_SHIFT",e,e],[1,0,e,6,"Alt",18,"VK_MENU",e,e],[1,0,e,57,"Meta",91,"VK_COMMAND",e,e],[1,157,"ControlLeft",5,e,0,"VK_LCONTROL",e,e],[1,158,"ShiftLeft",4,e,0,"VK_LSHIFT",e,e],[1,159,"AltLeft",6,e,0,"VK_LMENU",e,e],[1,160,"MetaLeft",57,e,0,"VK_LWIN",e,e],[1,161,"ControlRight",5,e,0,"VK_RCONTROL",e,e],[1,162,"ShiftRight",4,e,0,"VK_RSHIFT",e,e],[1,163,"AltRight",6,e,0,"VK_RMENU",e,e],[1,164,"MetaRight",57,e,0,"VK_RWIN",e,e],[1,165,"BrightnessUp",0,e,0,e,e,e],[1,166,"BrightnessDown",0,e,0,e,e,e],[1,167,"MediaPlay",0,e,0,e,e,e],[1,168,"MediaRecord",0,e,0,e,e,e],[1,169,"MediaFastForward",0,e,0,e,e,e],[1,170,"MediaRewind",0,e,0,e,e,e],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",e,e],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",e,e],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",e,e],[1,174,"Eject",0,e,0,e,e,e],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",e,e],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",e,e],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",e,e],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",e,e],[1,179,"LaunchApp1",0,e,0,"VK_MEDIA_LAUNCH_APP1",e,e],[1,180,"SelectTask",0,e,0,e,e,e],[1,181,"LaunchScreenSaver",0,e,0,e,e,e],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",e,e],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",e,e],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",e,e],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",e,e],[1,186,"BrowserStop",0,e,0,"VK_BROWSER_STOP",e,e],[1,187,"BrowserRefresh",0,e,0,"VK_BROWSER_REFRESH",e,e],[1,188,"BrowserFavorites",0,e,0,"VK_BROWSER_FAVORITES",e,e],[1,189,"ZoomToggle",0,e,0,e,e,e],[1,190,"MailReply",0,e,0,e,e,e],[1,191,"MailForward",0,e,0,e,e,e],[1,192,"MailSend",0,e,0,e,e,e],[1,0,e,114,"KeyInComposition",229,e,e,e],[1,0,e,116,"ABNT_C2",194,"VK_ABNT_C2",e,e],[1,0,e,96,"OEM_8",223,"VK_OEM_8",e,e],[1,0,e,0,e,0,"VK_KANA",e,e],[1,0,e,0,e,0,"VK_HANGUL",e,e],[1,0,e,0,e,0,"VK_JUNJA",e,e],[1,0,e,0,e,0,"VK_FINAL",e,e],[1,0,e,0,e,0,"VK_HANJA",e,e],[1,0,e,0,e,0,"VK_KANJI",e,e],[1,0,e,0,e,0,"VK_CONVERT",e,e],[1,0,e,0,e,0,"VK_NONCONVERT",e,e],[1,0,e,0,e,0,"VK_ACCEPT",e,e],[1,0,e,0,e,0,"VK_MODECHANGE",e,e],[1,0,e,0,e,0,"VK_SELECT",e,e],[1,0,e,0,e,0,"VK_PRINT",e,e],[1,0,e,0,e,0,"VK_EXECUTE",e,e],[1,0,e,0,e,0,"VK_SNAPSHOT",e,e],[1,0,e,0,e,0,"VK_HELP",e,e],[1,0,e,0,e,0,"VK_APPS",e,e],[1,0,e,0,e,0,"VK_PROCESSKEY",e,e],[1,0,e,0,e,0,"VK_PACKET",e,e],[1,0,e,0,e,0,"VK_DBE_SBCSCHAR",e,e],[1,0,e,0,e,0,"VK_DBE_DBCSCHAR",e,e],[1,0,e,0,e,0,"VK_ATTN",e,e],[1,0,e,0,e,0,"VK_CRSEL",e,e],[1,0,e,0,e,0,"VK_EXSEL",e,e],[1,0,e,0,e,0,"VK_EREOF",e,e],[1,0,e,0,e,0,"VK_PLAY",e,e],[1,0,e,0,e,0,"VK_ZOOM",e,e],[1,0,e,0,e,0,"VK_NONAME",e,e],[1,0,e,0,e,0,"VK_PA1",e,e],[1,0,e,0,e,0,"VK_OEM_CLEAR",e,e]],n=[],i=[],r=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=C(s.value,9),c=u[0],d=u[1],h=u[2],f=u[3],g=u[4],v=u[5],p=(u[6],u[7]),m=u[8];if(i[d]||(i[d]=!0,hc[h]=d,fc[h.toLowerCase()]=d,c&&(gc[d]=f)),!n[f]){if(n[f]=!0,!g)throw new Error("String representation missing for key code ".concat(f," around scan code ").concat(h));lc.define(f,g),uc.define(f,p||g),cc.define(f,m||p||g)}v&&(dc[v]=f)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}(),function(e){e.toString=function(e){return lc.keyCodeToStr(e)},e.fromString=function(e){return lc.strToKeyCode(e)},e.toUserSettingsUS=function(e){return uc.keyCodeToStr(e)},e.toUserSettingsGeneral=function(e){return cc.keyCodeToStr(e)},e.fromUserSettings=function(e){return uc.strToKeyCode(e)||cc.strToKeyCode(e)},e.toElectronAccelerator=function(e){if(e>=98&&e<=113)return null;switch(e){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return lc.keyCodeToStr(e)}}(ac||(ac={}));var mc,yc={},_c=globalThis.vscode;if(void 0!==_c&&void 0!==_c.process){var bc=_c.process;mc={get platform(){return bc.platform},get arch(){return bc.arch},get env(){return bc.env},cwd:function(){return bc.cwd()}}}else mc="undefined"!=typeof process&&"string"==typeof(null===(lt=process)||void 0===lt||null===(st=lt.versions)||void 0===st?void 0:st.node)?{get platform(){return process.platform},get arch(){return process.arch},get env(){return yc},cwd:function(){return yc.VSCODE_CWD||process.cwd()}}:{get platform(){return ps?"win32":ms?"darwin":"linux"},get arch(){},get env(){return{}},cwd:function(){return"/"}};var kc=mc.cwd,wc=mc.env,Cc=mc.platform,Sc=46,xc=47,Lc=92,Dc=58,Nc=function(e){function t(e,n,i){var r,o;u(this,t),"string"==typeof n&&0===n.indexOf("not ")?(o="must not be",n=n.replace(/^not /,"")):o="must be";var a=-1!==e.indexOf(".")?"property":"argument",s='The "'.concat(e,'" ').concat(a," ").concat(o," of type ").concat(n);return(r=l(this,t,[s+=". Received type ".concat(void 0===i?"undefined":L(i))])).code="ERR_INVALID_ARG_TYPE",r}return p(t,e),t}(N(Error));function Ic(e,t){if("string"!=typeof e)throw new Nc(t,"string",e)}var Ec="win32"===Cc;function Mc(e){return e===xc||e===Lc}function Tc(e){return e===xc}function Rc(e){return e>=65&&e<=90||e>=97&&e<=122}function Ac(e,t,n,i){for(var r="",o=0,a=-1,s=0,l=0,u=0;u<=e.length;++u){if(u<e.length)l=e.charCodeAt(u);else{if(i(l))break;l=xc}if(i(l)){if(a===u-1||1===s);else if(2===s){if(r.length<2||2!==o||r.charCodeAt(r.length-1)!==Sc||r.charCodeAt(r.length-2)!==Sc){if(r.length>2){var c=r.lastIndexOf(n);-1===c?(r="",o=0):o=(r=r.slice(0,c)).length-1-r.lastIndexOf(n),a=u,s=0;continue}if(0!==r.length){r="",o=0,a=u,s=0;continue}}t&&(r+=r.length>0?"".concat(n,".."):"..",o=2)}else r.length>0?r+="".concat(n).concat(e.slice(a+1,u)):r=e.slice(a+1,u),o=u-a-1;a=u,s=0}else l===Sc&&-1!==s?++s:s=-1}return r}function Pc(e,t){!function(e,t){if(null===e||"object"!==(void 0===e?"undefined":L(e)))throw new Nc(t,"Object",e)}(t,"pathObject");var n=t.dir||t.root,i=t.base||"".concat(t.name||"").concat(function(e){return e?"".concat("."===e[0]?"":".").concat(e):""}(t.ext));return n?n===t.root?"".concat(n).concat(i):"".concat(n).concat(e).concat(i):i}var Oc={resolve:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i="",r="",o=!1,a=t.length-1;a>=-1;a--){var s=void 0;if(a>=0){if(Ic(s=t[a],"paths[".concat(a,"]")),0===s.length)continue}else 0===i.length?s=kc():(void 0===(s=wc["=".concat(i)]||kc())||s.slice(0,2).toLowerCase()!==i.toLowerCase()&&s.charCodeAt(2)===Lc)&&(s="".concat(i,"\\"));var l=s.length,u=0,c="",d=!1,h=s.charCodeAt(0);if(1===l)Mc(h)&&(u=1,d=!0);else if(Mc(h))if(d=!0,Mc(s.charCodeAt(1))){for(var f=2,g=f;f<l&&!Mc(s.charCodeAt(f));)f++;if(f<l&&f!==g){var v=s.slice(g,f);for(g=f;f<l&&Mc(s.charCodeAt(f));)f++;if(f<l&&f!==g){for(g=f;f<l&&!Mc(s.charCodeAt(f));)f++;f!==l&&f===g||(c="\\\\".concat(v,"\\").concat(s.slice(g,f)),u=f)}}}else u=1;else Rc(h)&&s.charCodeAt(1)===Dc&&(c=s.slice(0,2),u=2,l>2&&Mc(s.charCodeAt(2))&&(d=!0,u=3));if(c.length>0)if(i.length>0){if(c.toLowerCase()!==i.toLowerCase())continue}else i=c;if(o){if(i.length>0)break}else if(r="".concat(s.slice(u),"\\").concat(r),o=d,d&&i.length>0)break}return r=Ac(r,!o,"\\",Mc),o?"".concat(i,"\\").concat(r):"".concat(i).concat(r)||"."},normalize:function(e){Ic(e,"path");var t=e.length;if(0===t)return".";var n,i=0,r=!1,o=e.charCodeAt(0);if(1===t)return Tc(o)?"\\":e;if(Mc(o))if(r=!0,Mc(e.charCodeAt(1))){for(var a=2,s=a;a<t&&!Mc(e.charCodeAt(a));)a++;if(a<t&&a!==s){var l=e.slice(s,a);for(s=a;a<t&&Mc(e.charCodeAt(a));)a++;if(a<t&&a!==s){for(s=a;a<t&&!Mc(e.charCodeAt(a));)a++;if(a===t)return"\\\\".concat(l,"\\").concat(e.slice(s),"\\");a!==s&&(n="\\\\".concat(l,"\\").concat(e.slice(s,a)),i=a)}}}else i=1;else Rc(o)&&e.charCodeAt(1)===Dc&&(n=e.slice(0,2),i=2,t>2&&Mc(e.charCodeAt(2))&&(r=!0,i=3));var u=i<t?Ac(e.slice(i),!r,"\\",Mc):"";return 0!==u.length||r||(u="."),u.length>0&&Mc(e.charCodeAt(t-1))&&(u+="\\"),void 0===n?r?"\\".concat(u):u:r?"".concat(n,"\\").concat(u):"".concat(n).concat(u)},isAbsolute:function(e){Ic(e,"path");var t=e.length;if(0===t)return!1;var n=e.charCodeAt(0);return Mc(n)||t>2&&Rc(n)&&e.charCodeAt(1)===Dc&&Mc(e.charCodeAt(2))},join:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return".";for(var i,r,o=0;o<t.length;++o){var a=t[o];Ic(a,"path"),a.length>0&&(void 0===i?i=r=a:i+="\\".concat(a))}if(void 0===i)return".";var s=!0,l=0;if("string"==typeof r&&Mc(r.charCodeAt(0))){++l;var u=r.length;u>1&&Mc(r.charCodeAt(1))&&(++l,u>2&&(Mc(r.charCodeAt(2))?++l:s=!1))}if(s){for(;l<i.length&&Mc(i.charCodeAt(l));)l++;l>=2&&(i="\\".concat(i.slice(l)))}return Oc.normalize(i)},relative:function(e,t){if(Ic(e,"from"),Ic(t,"to"),e===t)return"";var n=Oc.resolve(e),i=Oc.resolve(t);if(n===i)return"";if((e=n.toLowerCase())===(t=i.toLowerCase()))return"";for(var r=0;r<e.length&&e.charCodeAt(r)===Lc;)r++;for(var o=e.length;o-1>r&&e.charCodeAt(o-1)===Lc;)o--;for(var a=o-r,s=0;s<t.length&&t.charCodeAt(s)===Lc;)s++;for(var l=t.length;l-1>s&&t.charCodeAt(l-1)===Lc;)l--;for(var u=l-s,c=a<u?a:u,d=-1,h=0;h<c;h++){var f=e.charCodeAt(r+h);if(f!==t.charCodeAt(s+h))break;f===Lc&&(d=h)}if(h!==c){if(-1===d)return i}else{if(u>c){if(t.charCodeAt(s+h)===Lc)return i.slice(s+h+1);if(2===h)return i.slice(s+h)}a>c&&(e.charCodeAt(r+h)===Lc?d=h:2===h&&(d=3)),-1===d&&(d=0)}var g="";for(h=r+d+1;h<=o;++h)h!==o&&e.charCodeAt(h)!==Lc||(g+=0===g.length?"..":"\\..");return s+=d,g.length>0?"".concat(g).concat(i.slice(s,l)):(i.charCodeAt(s)===Lc&&++s,i.slice(s,l))},toNamespacedPath:function(e){if("string"!=typeof e||0===e.length)return e;var t=Oc.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===Lc){if(t.charCodeAt(1)===Lc){var n=t.charCodeAt(2);if(63!==n&&n!==Sc)return"\\\\?\\UNC\\".concat(t.slice(2))}}else if(Rc(t.charCodeAt(0))&&t.charCodeAt(1)===Dc&&t.charCodeAt(2)===Lc)return"\\\\?\\".concat(t);return e},dirname:function(e){Ic(e,"path");var t=e.length;if(0===t)return".";var n=-1,i=0,r=e.charCodeAt(0);if(1===t)return Mc(r)?e:".";if(Mc(r)){if(n=i=1,Mc(e.charCodeAt(1))){for(var o=2,a=o;o<t&&!Mc(e.charCodeAt(o));)o++;if(o<t&&o!==a){for(a=o;o<t&&Mc(e.charCodeAt(o));)o++;if(o<t&&o!==a){for(a=o;o<t&&!Mc(e.charCodeAt(o));)o++;if(o===t)return e;o!==a&&(n=i=o+1)}}}}else Rc(r)&&e.charCodeAt(1)===Dc&&(i=n=t>2&&Mc(e.charCodeAt(2))?3:2);for(var s=-1,l=!0,u=t-1;u>=i;--u)if(Mc(e.charCodeAt(u))){if(!l){s=u;break}}else l=!1;if(-1===s){if(-1===n)return".";s=n}return e.slice(0,s)},basename:function(e,t){void 0!==t&&Ic(t,"suffix"),Ic(e,"path");var n,i=0,r=-1,o=!0;if(e.length>=2&&Rc(e.charCodeAt(0))&&e.charCodeAt(1)===Dc&&(i=2),void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";var a=t.length-1,s=-1;for(n=e.length-1;n>=i;--n){var l=e.charCodeAt(n);if(Mc(l)){if(!o){i=n+1;break}}else-1===s&&(o=!1,s=n+1),a>=0&&(l===t.charCodeAt(a)?-1==--a&&(r=n):(a=-1,r=s))}return i===r?r=s:-1===r&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=i;--n)if(Mc(e.charCodeAt(n))){if(!o){i=n+1;break}}else-1===r&&(o=!1,r=n+1);return-1===r?"":e.slice(i,r)},extname:function(e){Ic(e,"path");var t=0,n=-1,i=0,r=-1,o=!0,a=0;e.length>=2&&e.charCodeAt(1)===Dc&&Rc(e.charCodeAt(0))&&(t=i=2);for(var s=e.length-1;s>=t;--s){var l=e.charCodeAt(s);if(Mc(l)){if(!o){i=s+1;break}}else-1===r&&(o=!1,r=s+1),l===Sc?-1===n?n=s:1!==a&&(a=1):-1!==n&&(a=-1)}return-1===n||-1===r||0===a||1===a&&n===r-1&&n===i+1?"":e.slice(n,r)},format:Pc.bind(null,"\\"),parse:function(e){Ic(e,"path");var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n=e.length,i=0,r=e.charCodeAt(0);if(1===n)return Mc(r)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(Mc(r)){if(i=1,Mc(e.charCodeAt(1))){for(var o=2,a=o;o<n&&!Mc(e.charCodeAt(o));)o++;if(o<n&&o!==a){for(a=o;o<n&&Mc(e.charCodeAt(o));)o++;if(o<n&&o!==a){for(a=o;o<n&&!Mc(e.charCodeAt(o));)o++;o===n?i=o:o!==a&&(i=o+1)}}}}else if(Rc(r)&&e.charCodeAt(1)===Dc){if(n<=2)return t.root=t.dir=e,t;if(i=2,Mc(e.charCodeAt(2))){if(3===n)return t.root=t.dir=e,t;i=3}}i>0&&(t.root=e.slice(0,i));for(var s=-1,l=i,u=-1,c=!0,d=e.length-1,h=0;d>=i;--d)if(Mc(r=e.charCodeAt(d))){if(!c){l=d+1;break}}else-1===u&&(c=!1,u=d+1),r===Sc?-1===s?s=d:1!==h&&(h=1):-1!==s&&(h=-1);return-1!==u&&(-1===s||0===h||1===h&&s===u-1&&s===l+1?t.base=t.name=e.slice(l,u):(t.name=e.slice(l,s),t.base=e.slice(l,u),t.ext=e.slice(s,u))),t.dir=l>0&&l!==i?e.slice(0,l-1):t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},Fc=function(){if(Ec){var e=/\\/g;return function(){var t=kc().replace(e,"/");return t.slice(t.indexOf("/"))}}return function(){return kc()}}(),Wc={resolve:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i="",r=!1,o=t.length-1;o>=-1&&!r;o--){var a=o>=0?t[o]:Fc();Ic(a,"paths[".concat(o,"]")),0!==a.length&&(i="".concat(a,"/").concat(i),r=a.charCodeAt(0)===xc)}return i=Ac(i,!r,"/",Tc),r?"/".concat(i):i.length>0?i:"."},normalize:function(e){if(Ic(e,"path"),0===e.length)return".";var t=e.charCodeAt(0)===xc,n=e.charCodeAt(e.length-1)===xc;return 0===(e=Ac(e,!t,"/",Tc)).length?t?"/":n?"./":".":(n&&(e+="/"),t?"/".concat(e):e)},isAbsolute:function(e){return Ic(e,"path"),e.length>0&&e.charCodeAt(0)===xc},join:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return".";for(var i,r=0;r<t.length;++r){var o=t[r];Ic(o,"path"),o.length>0&&(void 0===i?i=o:i+="/".concat(o))}return void 0===i?".":Wc.normalize(i)},relative:function(e,t){if(Ic(e,"from"),Ic(t,"to"),e===t)return"";if((e=Wc.resolve(e))===(t=Wc.resolve(t)))return"";for(var n=e.length,i=n-1,r=t.length-1,o=i<r?i:r,a=-1,s=0;s<o;s++){var l=e.charCodeAt(1+s);if(l!==t.charCodeAt(1+s))break;l===xc&&(a=s)}if(s===o)if(r>o){if(t.charCodeAt(1+s)===xc)return t.slice(1+s+1);if(0===s)return t.slice(1+s)}else i>o&&(e.charCodeAt(1+s)===xc?a=s:0===s&&(a=0));var u="";for(s=1+a+1;s<=n;++s)s!==n&&e.charCodeAt(s)!==xc||(u+=0===u.length?"..":"/..");return"".concat(u).concat(t.slice(1+a))},toNamespacedPath:function(e){return e},dirname:function(e){if(Ic(e,"path"),0===e.length)return".";for(var t=e.charCodeAt(0)===xc,n=-1,i=!0,r=e.length-1;r>=1;--r)if(e.charCodeAt(r)===xc){if(!i){n=r;break}}else i=!1;return-1===n?t?"/":".":t&&1===n?"//":e.slice(0,n)},basename:function(e,t){void 0!==t&&Ic(t,"ext"),Ic(e,"path");var n,i=0,r=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";var a=t.length-1,s=-1;for(n=e.length-1;n>=0;--n){var l=e.charCodeAt(n);if(l===xc){if(!o){i=n+1;break}}else-1===s&&(o=!1,s=n+1),a>=0&&(l===t.charCodeAt(a)?-1==--a&&(r=n):(a=-1,r=s))}return i===r?r=s:-1===r&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===xc){if(!o){i=n+1;break}}else-1===r&&(o=!1,r=n+1);return-1===r?"":e.slice(i,r)},extname:function(e){Ic(e,"path");for(var t=-1,n=0,i=-1,r=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(s!==xc)-1===i&&(r=!1,i=a+1),s===Sc?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!r){n=a+1;break}}return-1===t||-1===i||0===o||1===o&&t===i-1&&t===n+1?"":e.slice(t,i)},format:Pc.bind(null,"/"),parse:function(e){Ic(e,"path");var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,i=e.charCodeAt(0)===xc;i?(t.root="/",n=1):n=0;for(var r=-1,o=0,a=-1,s=!0,l=e.length-1,u=0;l>=n;--l){var c=e.charCodeAt(l);if(c!==xc)-1===a&&(s=!1,a=l+1),c===Sc?-1===r?r=l:1!==u&&(u=1):-1!==r&&(u=-1);else if(!s){o=l+1;break}}if(-1!==a){var d=0===o&&i?1:o;-1===r||0===u||1===u&&r===a-1&&r===o+1?t.base=t.name=e.slice(d,a):(t.name=e.slice(d,r),t.base=e.slice(d,a),t.ext=e.slice(r,a))}return o>0?t.dir=e.slice(0,o-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Wc.win32=Oc.win32=Oc,Wc.posix=Oc.posix=Wc;var Bc=Ec?Oc.normalize:Wc.normalize,Hc=Ec?Oc.join:Wc.join,Vc=Ec?Oc.resolve:Wc.resolve,zc=Ec?Oc.relative:Wc.relative,Uc=Ec?Oc.dirname:Wc.dirname,jc=Ec?Oc.basename:Wc.basename,Kc=Ec?Oc.extname:Wc.extname,qc=Ec?Oc.sep:Wc.sep,Gc=/^\w[\w\d+.-]*$/,Zc=/^\//,Yc=/^\/\//;var Qc,Xc="",$c="/",Jc=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,ed=function(){function e(t,n,i,r,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];u(this,e),"object"===(void 0===t?"undefined":L(t))?(this.scheme=t.scheme||Xc,this.authority=t.authority||Xc,this.path=t.path||Xc,this.query=t.query||Xc,this.fragment=t.fragment||Xc):(this.scheme=function(e,t){return e||t?e:"file"}(t,a),this.authority=n||Xc,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==$c&&(t=$c+t):t=$c}return t}(this.scheme,i||Xc),this.query=r||Xc,this.fragment=o||Xc,function(e,t){if(!e.scheme&&t)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(e.authority,'", path: "').concat(e.path,'", query: "').concat(e.query,'", fragment: "').concat(e.fragment,'"}'));if(e.scheme&&!Gc.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!Zc.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Yc.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,a))}return h(e,[{key:"fsPath",get:function(){return ad(this,!1)}},{key:"with",value:function(e){if(!e)return this;var t=e.scheme,n=e.authority,i=e.path,r=e.query,o=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=Xc),void 0===n?n=this.authority:null===n&&(n=Xc),void 0===i?i=this.path:null===i&&(i=Xc),void 0===r?r=this.query:null===r&&(r=Xc),void 0===o?o=this.fragment:null===o&&(o=Xc),t===this.scheme&&n===this.authority&&i===this.path&&r===this.query&&o===this.fragment?this:new nd(t,n,i,r,o)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return sd(this,e)}},{key:"toJSON",value:function(){return this}}],[{key:"isUri",value:function(t){return t instanceof e||!!t&&("string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"string"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString)}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Jc.exec(e);return n?new nd(n[2]||Xc,cd(n[4]||Xc),cd(n[5]||Xc),cd(n[7]||Xc),cd(n[9]||Xc),t):new nd(Xc,Xc,Xc,Xc,Xc)}},{key:"file",value:function(e){var t=Xc;if(ps&&(e=e.replace(/\\/g,$c)),e[0]===$c&&e[1]===$c){var n=e.indexOf($c,2);-1===n?(t=e.substring(2),e=$c):(t=e.substring(2,n),e=e.substring(n)||$c)}return new nd("file",t,e,Xc,Xc)}},{key:"from",value:function(e,t){return new nd(e.scheme,e.authority,e.path,e.query,e.fragment,t)}},{key:"joinPath",value:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");var o,a,s;ps&&"file"===t.scheme?o=e.file((a=Oc).join.apply(a,[ad(t,!0)].concat(x(i)))).path:o=(s=Wc).join.apply(s,[t.path].concat(x(i)));return t.with({path:o})}},{key:"revive",value:function(t){if(t){if(t instanceof e)return t;var n,i,r=new nd(t);return r._formatted=null!==(n=t.external)&&void 0!==n?n:null,r._fsPath=t._sep===td&&null!==(i=t.fsPath)&&void 0!==i?i:null,r}return t}}]),e}(),td=ps?1:void 0,nd=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments))._formatted=null,e._fsPath=null,e}return p(t,e),h(t,[{key:"fsPath",get:function(){return this._fsPath||(this._fsPath=ad(this,!1)),this._fsPath}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?sd(this,!0):(this._formatted||(this._formatted=sd(this,!1)),this._formatted)}},{key:"toJSON",value:function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=td),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}]),t}(ed),id=(f(Qc={},58,"%3A"),f(Qc,47,"%2F"),f(Qc,63,"%3F"),f(Qc,35,"%23"),f(Qc,91,"%5B"),f(Qc,93,"%5D"),f(Qc,64,"%40"),f(Qc,33,"%21"),f(Qc,36,"%24"),f(Qc,38,"%26"),f(Qc,39,"%27"),f(Qc,40,"%28"),f(Qc,41,"%29"),f(Qc,42,"%2A"),f(Qc,43,"%2B"),f(Qc,44,"%2C"),f(Qc,59,"%3B"),f(Qc,61,"%3D"),f(Qc,32,"%20"),Qc);function rd(e,t,n){for(var i=void 0,r=-1,o=0;o<e.length;o++){var a=e.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||45===a||46===a||95===a||126===a||t&&47===a||n&&91===a||n&&93===a||n&&58===a)-1!==r&&(i+=encodeURIComponent(e.substring(r,o)),r=-1),void 0!==i&&(i+=e.charAt(o));else{void 0===i&&(i=e.substr(0,o));var s=id[a];void 0!==s?(-1!==r&&(i+=encodeURIComponent(e.substring(r,o)),r=-1),i+=s):-1===r&&(r=o)}}return-1!==r&&(i+=encodeURIComponent(e.substring(r))),void 0!==i?i:e}function od(e){for(var t=void 0,n=0;n<e.length;n++){var i=e.charCodeAt(n);35===i||63===i?(void 0===t&&(t=e.substr(0,n)),t+=id[i]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function ad(e,t){var n;return n=e.authority&&e.path.length>1&&"file"===e.scheme?"//".concat(e.authority).concat(e.path):47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,ps&&(n=n.replace(/\//g,"\\")),n}function sd(e,t){var n=t?od:rd,i="",r=e.scheme,o=e.authority,a=e.path,s=e.query,l=e.fragment;if(r&&(i+=r,i+=":"),(o||"file"===r)&&(i+=$c,i+=$c),o){var u=o.indexOf("@");if(-1!==u){var c=o.substr(0,u);o=o.substr(u+1),-1===(u=c.lastIndexOf(":"))?i+=n(c,!1,!1):(i+=n(c.substr(0,u),!1,!1),i+=":",i+=n(c.substr(u+1),!1,!0)),i+="@"}-1===(u=(o=o.toLowerCase()).lastIndexOf(":"))?i+=n(o,!1,!0):(i+=n(o.substr(0,u),!1,!0),i+=o.substr(u))}if(a){if(a.length>=3&&47===a.charCodeAt(0)&&58===a.charCodeAt(2)){var d=a.charCodeAt(1);d>=65&&d<=90&&(a="/".concat(String.fromCharCode(d+32),":").concat(a.substr(3)))}else if(a.length>=2&&58===a.charCodeAt(1)){var h=a.charCodeAt(0);h>=65&&h<=90&&(a="".concat(String.fromCharCode(h+32),":").concat(a.substr(2)))}i+=n(a,!0,!1)}return s&&(i+="?",i+=n(s,!1,!1)),l&&(i+="#",i+=t?l:rd(l,!1,!1)),i}function ld(e){try{return decodeURIComponent(e)}catch(t){return e.length>3?e.substr(0,3)+ld(e.substr(3)):e}}var ud=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function cd(e){return e.match(ud)?e.replace(ud,(function(e){return ld(e)})):e}var dd=function(){function e(t,n){u(this,e),this.lineNumber=t,this.column=n}return h(e,[{key:"with",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lineNumber,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.column;return t===this.lineNumber&&n===this.column?this:new e(t,n)}},{key:"delta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.with(this.lineNumber+e,this.column+t)}},{key:"equals",value:function(t){return e.equals(this,t)}},{key:"isBefore",value:function(t){return e.isBefore(this,t)}},{key:"isBeforeOrEqual",value:function(t){return e.isBeforeOrEqual(this,t)}},{key:"clone",value:function(){return new e(this.lineNumber,this.column)}},{key:"toString",value:function(){return"("+this.lineNumber+","+this.column+")"}},{key:"toJSON",value:function(){return{lineNumber:this.lineNumber,column:this.column}}}],[{key:"equals",value:function(e,t){return!e&&!t||!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}},{key:"isBefore",value:function(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<t.column}},{key:"isBeforeOrEqual",value:function(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<=t.column}},{key:"compare",value:function(e,t){var n=0|e.lineNumber,i=0|t.lineNumber;return n===i?(0|e.column)-(0|t.column):n-i}},{key:"lift",value:function(t){return new e(t.lineNumber,t.column)}},{key:"isIPosition",value:function(e){return e&&"number"==typeof e.lineNumber&&"number"==typeof e.column}}]),e}(),hd=function(){function e(t,n,i,r){u(this,e),t>i||t===i&&n>r?(this.startLineNumber=i,this.startColumn=r,this.endLineNumber=t,this.endColumn=n):(this.startLineNumber=t,this.startColumn=n,this.endLineNumber=i,this.endColumn=r)}return h(e,[{key:"isEmpty",value:function(){return e.isEmpty(this)}},{key:"containsPosition",value:function(t){return e.containsPosition(this,t)}},{key:"containsRange",value:function(t){return e.containsRange(this,t)}},{key:"strictContainsRange",value:function(t){return e.strictContainsRange(this,t)}},{key:"plusRange",value:function(t){return e.plusRange(this,t)}},{key:"intersectRanges",value:function(t){return e.intersectRanges(this,t)}},{key:"equalsRange",value:function(t){return e.equalsRange(this,t)}},{key:"getEndPosition",value:function(){return e.getEndPosition(this)}},{key:"getStartPosition",value:function(){return e.getStartPosition(this)}},{key:"toString",value:function(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}},{key:"setEndPosition",value:function(t,n){return new e(this.startLineNumber,this.startColumn,t,n)}},{key:"setStartPosition",value:function(t,n){return new e(t,n,this.endLineNumber,this.endColumn)}},{key:"collapseToStart",value:function(){return e.collapseToStart(this)}},{key:"collapseToEnd",value:function(){return e.collapseToEnd(this)}},{key:"delta",value:function(t){return new e(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}},{key:"toJSON",value:function(){return this}}],[{key:"isEmpty",value:function(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}},{key:"containsPosition",value:function(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>e.endColumn))}},{key:"strictContainsPosition",value:function(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<=e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>=e.endColumn))}},{key:"containsRange",value:function(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)))}},{key:"strictContainsRange",value:function(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)))}},{key:"plusRange",value:function(t,n){var i,r,o,a;return n.startLineNumber<t.startLineNumber?(i=n.startLineNumber,r=n.startColumn):n.startLineNumber===t.startLineNumber?(i=n.startLineNumber,r=Math.min(n.startColumn,t.startColumn)):(i=t.startLineNumber,r=t.startColumn),n.endLineNumber>t.endLineNumber?(o=n.endLineNumber,a=n.endColumn):n.endLineNumber===t.endLineNumber?(o=n.endLineNumber,a=Math.max(n.endColumn,t.endColumn)):(o=t.endLineNumber,a=t.endColumn),new e(i,r,o,a)}},{key:"intersectRanges",value:function(t,n){var i=t.startLineNumber,r=t.startColumn,o=t.endLineNumber,a=t.endColumn,s=n.startLineNumber,l=n.startColumn,u=n.endLineNumber,c=n.endColumn;return i<s?(i=s,r=l):i===s&&(r=Math.max(r,l)),o>u?(o=u,a=c):o===u&&(a=Math.min(a,c)),i>o||i===o&&r>a?null:new e(i,r,o,a)}},{key:"equalsRange",value:function(e,t){return!e&&!t||!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}},{key:"getEndPosition",value:function(e){return new dd(e.endLineNumber,e.endColumn)}},{key:"getStartPosition",value:function(e){return new dd(e.startLineNumber,e.startColumn)}},{key:"collapseToStart",value:function(t){return new e(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}},{key:"collapseToEnd",value:function(t){return new e(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}},{key:"fromPositions",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return new e(t.lineNumber,t.column,n.lineNumber,n.column)}},{key:"lift",value:function(t){return t?new e(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}},{key:"isIRange",value:function(e){return e&&"number"==typeof e.startLineNumber&&"number"==typeof e.startColumn&&"number"==typeof e.endLineNumber&&"number"==typeof e.endColumn}},{key:"areIntersectingOrTouching",value:function(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}},{key:"areIntersecting",value:function(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}},{key:"compareRangesUsingStarts",value:function(e,t){if(e&&t){var n=0|e.startLineNumber,i=0|t.startLineNumber;if(n===i){var r=0|e.startColumn,o=0|t.startColumn;if(r===o){var a=0|e.endLineNumber,s=0|t.endLineNumber;return a===s?(0|e.endColumn)-(0|t.endColumn):a-s}return r-o}return n-i}return(e?1:0)-(t?1:0)}},{key:"compareRangesUsingEnds",value:function(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}},{key:"spansMultipleLines",value:function(e){return e.endLineNumber>e.startLineNumber}}]),e}(),fd=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t,[e,n,i,r])).selectionStartLineNumber=e,o.selectionStartColumn=n,o.positionLineNumber=i,o.positionColumn=r,o}return p(t,e),h(t,[{key:"toString",value:function(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}},{key:"equalsSelection",value:function(e){return t.selectionsEqual(this,e)}},{key:"getDirection",value:function(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}},{key:"setEndPosition",value:function(e,n){return 0===this.getDirection()?new t(this.startLineNumber,this.startColumn,e,n):new t(e,n,this.startLineNumber,this.startColumn)}},{key:"getPosition",value:function(){return new dd(this.positionLineNumber,this.positionColumn)}},{key:"getSelectionStart",value:function(){return new dd(this.selectionStartLineNumber,this.selectionStartColumn)}},{key:"setStartPosition",value:function(e,n){return 0===this.getDirection()?new t(e,n,this.endLineNumber,this.endColumn):new t(this.endLineNumber,this.endColumn,e,n)}}],[{key:"selectionsEqual",value:function(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}},{key:"fromPositions",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new t(e.lineNumber,e.column,n.lineNumber,n.column)}},{key:"fromRange",value:function(e,n){return 0===n?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new t(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}},{key:"liftSelection",value:function(e){return new t(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}},{key:"selectionsArrEqual",value:function(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}},{key:"isISelection",value:function(e){return e&&"number"==typeof e.selectionStartLineNumber&&"number"==typeof e.selectionStartColumn&&"number"==typeof e.positionLineNumber&&"number"==typeof e.positionColumn}},{key:"createWithDirection",value:function(e,n,i,r,o){return 0===o?new t(e,n,i,r):new t(i,r,e,n)}}]),t}(hd),gd=Object.create(null);function vd(e,t){if(Da(t)){var n=gd[t];if(void 0===n)throw new Error("".concat(e," references an unknown codicon: ").concat(t));t=n}return gd[e]=t,{id:e}}function pd(){return gd}var md,yd,_d,bd=_({},{add:vd("add",6e4),plus:vd("plus",6e4),gistNew:vd("gist-new",6e4),repoCreate:vd("repo-create",6e4),lightbulb:vd("lightbulb",60001),lightBulb:vd("light-bulb",60001),repo:vd("repo",60002),repoDelete:vd("repo-delete",60002),gistFork:vd("gist-fork",60003),repoForked:vd("repo-forked",60003),gitPullRequest:vd("git-pull-request",60004),gitPullRequestAbandoned:vd("git-pull-request-abandoned",60004),recordKeys:vd("record-keys",60005),keyboard:vd("keyboard",60005),tag:vd("tag",60006),gitPullRequestLabel:vd("git-pull-request-label",60006),tagAdd:vd("tag-add",60006),tagRemove:vd("tag-remove",60006),person:vd("person",60007),personFollow:vd("person-follow",60007),personOutline:vd("person-outline",60007),personFilled:vd("person-filled",60007),gitBranch:vd("git-branch",60008),gitBranchCreate:vd("git-branch-create",60008),gitBranchDelete:vd("git-branch-delete",60008),sourceControl:vd("source-control",60008),mirror:vd("mirror",60009),mirrorPublic:vd("mirror-public",60009),star:vd("star",60010),starAdd:vd("star-add",60010),starDelete:vd("star-delete",60010),starEmpty:vd("star-empty",60010),comment:vd("comment",60011),commentAdd:vd("comment-add",60011),alert:vd("alert",60012),warning:vd("warning",60012),search:vd("search",60013),searchSave:vd("search-save",60013),logOut:vd("log-out",60014),signOut:vd("sign-out",60014),logIn:vd("log-in",60015),signIn:vd("sign-in",60015),eye:vd("eye",60016),eyeUnwatch:vd("eye-unwatch",60016),eyeWatch:vd("eye-watch",60016),circleFilled:vd("circle-filled",60017),primitiveDot:vd("primitive-dot",60017),closeDirty:vd("close-dirty",60017),debugBreakpoint:vd("debug-breakpoint",60017),debugBreakpointDisabled:vd("debug-breakpoint-disabled",60017),debugHint:vd("debug-hint",60017),terminalDecorationSuccess:vd("terminal-decoration-success",60017),primitiveSquare:vd("primitive-square",60018),edit:vd("edit",60019),pencil:vd("pencil",60019),info:vd("info",60020),issueOpened:vd("issue-opened",60020),gistPrivate:vd("gist-private",60021),gitForkPrivate:vd("git-fork-private",60021),lock:vd("lock",60021),mirrorPrivate:vd("mirror-private",60021),close:vd("close",60022),removeClose:vd("remove-close",60022),x:vd("x",60022),repoSync:vd("repo-sync",60023),sync:vd("sync",60023),clone:vd("clone",60024),desktopDownload:vd("desktop-download",60024),beaker:vd("beaker",60025),microscope:vd("microscope",60025),vm:vd("vm",60026),deviceDesktop:vd("device-desktop",60026),file:vd("file",60027),fileText:vd("file-text",60027),more:vd("more",60028),ellipsis:vd("ellipsis",60028),kebabHorizontal:vd("kebab-horizontal",60028),mailReply:vd("mail-reply",60029),reply:vd("reply",60029),organization:vd("organization",60030),organizationFilled:vd("organization-filled",60030),organizationOutline:vd("organization-outline",60030),newFile:vd("new-file",60031),fileAdd:vd("file-add",60031),newFolder:vd("new-folder",60032),fileDirectoryCreate:vd("file-directory-create",60032),trash:vd("trash",60033),trashcan:vd("trashcan",60033),history:vd("history",60034),clock:vd("clock",60034),folder:vd("folder",60035),fileDirectory:vd("file-directory",60035),symbolFolder:vd("symbol-folder",60035),logoGithub:vd("logo-github",60036),markGithub:vd("mark-github",60036),github:vd("github",60036),terminal:vd("terminal",60037),console:vd("console",60037),repl:vd("repl",60037),zap:vd("zap",60038),symbolEvent:vd("symbol-event",60038),error:vd("error",60039),stop:vd("stop",60039),variable:vd("variable",60040),symbolVariable:vd("symbol-variable",60040),array:vd("array",60042),symbolArray:vd("symbol-array",60042),symbolModule:vd("symbol-module",60043),symbolPackage:vd("symbol-package",60043),symbolNamespace:vd("symbol-namespace",60043),symbolObject:vd("symbol-object",60043),symbolMethod:vd("symbol-method",60044),symbolFunction:vd("symbol-function",60044),symbolConstructor:vd("symbol-constructor",60044),symbolBoolean:vd("symbol-boolean",60047),symbolNull:vd("symbol-null",60047),symbolNumeric:vd("symbol-numeric",60048),symbolNumber:vd("symbol-number",60048),symbolStructure:vd("symbol-structure",60049),symbolStruct:vd("symbol-struct",60049),symbolParameter:vd("symbol-parameter",60050),symbolTypeParameter:vd("symbol-type-parameter",60050),symbolKey:vd("symbol-key",60051),symbolText:vd("symbol-text",60051),symbolReference:vd("symbol-reference",60052),goToFile:vd("go-to-file",60052),symbolEnum:vd("symbol-enum",60053),symbolValue:vd("symbol-value",60053),symbolRuler:vd("symbol-ruler",60054),symbolUnit:vd("symbol-unit",60054),activateBreakpoints:vd("activate-breakpoints",60055),archive:vd("archive",60056),arrowBoth:vd("arrow-both",60057),arrowDown:vd("arrow-down",60058),arrowLeft:vd("arrow-left",60059),arrowRight:vd("arrow-right",60060),arrowSmallDown:vd("arrow-small-down",60061),arrowSmallLeft:vd("arrow-small-left",60062),arrowSmallRight:vd("arrow-small-right",60063),arrowSmallUp:vd("arrow-small-up",60064),arrowUp:vd("arrow-up",60065),bell:vd("bell",60066),bold:vd("bold",60067),book:vd("book",60068),bookmark:vd("bookmark",60069),debugBreakpointConditionalUnverified:vd("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:vd("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:vd("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:vd("debug-breakpoint-data-unverified",60072),debugBreakpointData:vd("debug-breakpoint-data",60073),debugBreakpointDataDisabled:vd("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:vd("debug-breakpoint-log-unverified",60074),debugBreakpointLog:vd("debug-breakpoint-log",60075),debugBreakpointLogDisabled:vd("debug-breakpoint-log-disabled",60075),briefcase:vd("briefcase",60076),broadcast:vd("broadcast",60077),browser:vd("browser",60078),bug:vd("bug",60079),calendar:vd("calendar",60080),caseSensitive:vd("case-sensitive",60081),check:vd("check",60082),checklist:vd("checklist",60083),chevronDown:vd("chevron-down",60084),chevronLeft:vd("chevron-left",60085),chevronRight:vd("chevron-right",60086),chevronUp:vd("chevron-up",60087),chromeClose:vd("chrome-close",60088),chromeMaximize:vd("chrome-maximize",60089),chromeMinimize:vd("chrome-minimize",60090),chromeRestore:vd("chrome-restore",60091),circleOutline:vd("circle-outline",60092),circle:vd("circle",60092),debugBreakpointUnverified:vd("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:vd("terminal-decoration-incomplete",60092),circleSlash:vd("circle-slash",60093),circuitBoard:vd("circuit-board",60094),clearAll:vd("clear-all",60095),clippy:vd("clippy",60096),closeAll:vd("close-all",60097),cloudDownload:vd("cloud-download",60098),cloudUpload:vd("cloud-upload",60099),code:vd("code",60100),collapseAll:vd("collapse-all",60101),colorMode:vd("color-mode",60102),commentDiscussion:vd("comment-discussion",60103),creditCard:vd("credit-card",60105),dash:vd("dash",60108),dashboard:vd("dashboard",60109),database:vd("database",60110),debugContinue:vd("debug-continue",60111),debugDisconnect:vd("debug-disconnect",60112),debugPause:vd("debug-pause",60113),debugRestart:vd("debug-restart",60114),debugStart:vd("debug-start",60115),debugStepInto:vd("debug-step-into",60116),debugStepOut:vd("debug-step-out",60117),debugStepOver:vd("debug-step-over",60118),debugStop:vd("debug-stop",60119),debug:vd("debug",60120),deviceCameraVideo:vd("device-camera-video",60121),deviceCamera:vd("device-camera",60122),deviceMobile:vd("device-mobile",60123),diffAdded:vd("diff-added",60124),diffIgnored:vd("diff-ignored",60125),diffModified:vd("diff-modified",60126),diffRemoved:vd("diff-removed",60127),diffRenamed:vd("diff-renamed",60128),diff:vd("diff",60129),diffSidebyside:vd("diff-sidebyside",60129),discard:vd("discard",60130),editorLayout:vd("editor-layout",60131),emptyWindow:vd("empty-window",60132),exclude:vd("exclude",60133),extensions:vd("extensions",60134),eyeClosed:vd("eye-closed",60135),fileBinary:vd("file-binary",60136),fileCode:vd("file-code",60137),fileMedia:vd("file-media",60138),filePdf:vd("file-pdf",60139),fileSubmodule:vd("file-submodule",60140),fileSymlinkDirectory:vd("file-symlink-directory",60141),fileSymlinkFile:vd("file-symlink-file",60142),fileZip:vd("file-zip",60143),files:vd("files",60144),filter:vd("filter",60145),flame:vd("flame",60146),foldDown:vd("fold-down",60147),foldUp:vd("fold-up",60148),fold:vd("fold",60149),folderActive:vd("folder-active",60150),folderOpened:vd("folder-opened",60151),gear:vd("gear",60152),gift:vd("gift",60153),gistSecret:vd("gist-secret",60154),gist:vd("gist",60155),gitCommit:vd("git-commit",60156),gitCompare:vd("git-compare",60157),compareChanges:vd("compare-changes",60157),gitMerge:vd("git-merge",60158),githubAction:vd("github-action",60159),githubAlt:vd("github-alt",60160),globe:vd("globe",60161),grabber:vd("grabber",60162),graph:vd("graph",60163),gripper:vd("gripper",60164),heart:vd("heart",60165),home:vd("home",60166),horizontalRule:vd("horizontal-rule",60167),hubot:vd("hubot",60168),inbox:vd("inbox",60169),issueReopened:vd("issue-reopened",60171),issues:vd("issues",60172),italic:vd("italic",60173),jersey:vd("jersey",60174),json:vd("json",60175),kebabVertical:vd("kebab-vertical",60176),key:vd("key",60177),law:vd("law",60178),lightbulbAutofix:vd("lightbulb-autofix",60179),linkExternal:vd("link-external",60180),link:vd("link",60181),listOrdered:vd("list-ordered",60182),listUnordered:vd("list-unordered",60183),liveShare:vd("live-share",60184),loading:vd("loading",60185),location:vd("location",60186),mailRead:vd("mail-read",60187),mail:vd("mail",60188),markdown:vd("markdown",60189),megaphone:vd("megaphone",60190),mention:vd("mention",60191),milestone:vd("milestone",60192),gitPullRequestMilestone:vd("git-pull-request-milestone",60192),mortarBoard:vd("mortar-board",60193),move:vd("move",60194),multipleWindows:vd("multiple-windows",60195),mute:vd("mute",60196),noNewline:vd("no-newline",60197),note:vd("note",60198),octoface:vd("octoface",60199),openPreview:vd("open-preview",60200),package:vd("package",60201),paintcan:vd("paintcan",60202),pin:vd("pin",60203),play:vd("play",60204),run:vd("run",60204),plug:vd("plug",60205),preserveCase:vd("preserve-case",60206),preview:vd("preview",60207),project:vd("project",60208),pulse:vd("pulse",60209),question:vd("question",60210),quote:vd("quote",60211),radioTower:vd("radio-tower",60212),reactions:vd("reactions",60213),references:vd("references",60214),refresh:vd("refresh",60215),regex:vd("regex",60216),remoteExplorer:vd("remote-explorer",60217),remote:vd("remote",60218),remove:vd("remove",60219),replaceAll:vd("replace-all",60220),replace:vd("replace",60221),repoClone:vd("repo-clone",60222),repoForcePush:vd("repo-force-push",60223),repoPull:vd("repo-pull",60224),repoPush:vd("repo-push",60225),report:vd("report",60226),requestChanges:vd("request-changes",60227),rocket:vd("rocket",60228),rootFolderOpened:vd("root-folder-opened",60229),rootFolder:vd("root-folder",60230),rss:vd("rss",60231),ruby:vd("ruby",60232),saveAll:vd("save-all",60233),saveAs:vd("save-as",60234),save:vd("save",60235),screenFull:vd("screen-full",60236),screenNormal:vd("screen-normal",60237),searchStop:vd("search-stop",60238),server:vd("server",60240),settingsGear:vd("settings-gear",60241),settings:vd("settings",60242),shield:vd("shield",60243),smiley:vd("smiley",60244),sortPrecedence:vd("sort-precedence",60245),splitHorizontal:vd("split-horizontal",60246),splitVertical:vd("split-vertical",60247),squirrel:vd("squirrel",60248),starFull:vd("star-full",60249),starHalf:vd("star-half",60250),symbolClass:vd("symbol-class",60251),symbolColor:vd("symbol-color",60252),symbolConstant:vd("symbol-constant",60253),symbolEnumMember:vd("symbol-enum-member",60254),symbolField:vd("symbol-field",60255),symbolFile:vd("symbol-file",60256),symbolInterface:vd("symbol-interface",60257),symbolKeyword:vd("symbol-keyword",60258),symbolMisc:vd("symbol-misc",60259),symbolOperator:vd("symbol-operator",60260),symbolProperty:vd("symbol-property",60261),wrench:vd("wrench",60261),wrenchSubaction:vd("wrench-subaction",60261),symbolSnippet:vd("symbol-snippet",60262),tasklist:vd("tasklist",60263),telescope:vd("telescope",60264),textSize:vd("text-size",60265),threeBars:vd("three-bars",60266),thumbsdown:vd("thumbsdown",60267),thumbsup:vd("thumbsup",60268),tools:vd("tools",60269),triangleDown:vd("triangle-down",60270),triangleLeft:vd("triangle-left",60271),triangleRight:vd("triangle-right",60272),triangleUp:vd("triangle-up",60273),twitter:vd("twitter",60274),unfold:vd("unfold",60275),unlock:vd("unlock",60276),unmute:vd("unmute",60277),unverified:vd("unverified",60278),verified:vd("verified",60279),versions:vd("versions",60280),vmActive:vd("vm-active",60281),vmOutline:vd("vm-outline",60282),vmRunning:vd("vm-running",60283),watch:vd("watch",60284),whitespace:vd("whitespace",60285),wholeWord:vd("whole-word",60286),window:vd("window",60287),wordWrap:vd("word-wrap",60288),zoomIn:vd("zoom-in",60289),zoomOut:vd("zoom-out",60290),listFilter:vd("list-filter",60291),listFlat:vd("list-flat",60292),listSelection:vd("list-selection",60293),selection:vd("selection",60293),listTree:vd("list-tree",60294),debugBreakpointFunctionUnverified:vd("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:vd("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:vd("debug-breakpoint-function-disabled",60296),debugStackframeActive:vd("debug-stackframe-active",60297),circleSmallFilled:vd("circle-small-filled",60298),debugStackframeDot:vd("debug-stackframe-dot",60298),terminalDecorationMark:vd("terminal-decoration-mark",60298),debugStackframe:vd("debug-stackframe",60299),debugStackframeFocused:vd("debug-stackframe-focused",60299),debugBreakpointUnsupported:vd("debug-breakpoint-unsupported",60300),symbolString:vd("symbol-string",60301),debugReverseContinue:vd("debug-reverse-continue",60302),debugStepBack:vd("debug-step-back",60303),debugRestartFrame:vd("debug-restart-frame",60304),debugAlt:vd("debug-alt",60305),callIncoming:vd("call-incoming",60306),callOutgoing:vd("call-outgoing",60307),menu:vd("menu",60308),expandAll:vd("expand-all",60309),feedback:vd("feedback",60310),gitPullRequestReviewer:vd("git-pull-request-reviewer",60310),groupByRefType:vd("group-by-ref-type",60311),ungroupByRefType:vd("ungroup-by-ref-type",60312),account:vd("account",60313),gitPullRequestAssignee:vd("git-pull-request-assignee",60313),bellDot:vd("bell-dot",60314),debugConsole:vd("debug-console",60315),library:vd("library",60316),output:vd("output",60317),runAll:vd("run-all",60318),syncIgnored:vd("sync-ignored",60319),pinned:vd("pinned",60320),githubInverted:vd("github-inverted",60321),serverProcess:vd("server-process",60322),serverEnvironment:vd("server-environment",60323),pass:vd("pass",60324),issueClosed:vd("issue-closed",60324),stopCircle:vd("stop-circle",60325),playCircle:vd("play-circle",60326),record:vd("record",60327),debugAltSmall:vd("debug-alt-small",60328),vmConnect:vd("vm-connect",60329),cloud:vd("cloud",60330),merge:vd("merge",60331),export:vd("export",60332),graphLeft:vd("graph-left",60333),magnet:vd("magnet",60334),notebook:vd("notebook",60335),redo:vd("redo",60336),checkAll:vd("check-all",60337),pinnedDirty:vd("pinned-dirty",60338),passFilled:vd("pass-filled",60339),circleLargeFilled:vd("circle-large-filled",60340),circleLarge:vd("circle-large",60341),circleLargeOutline:vd("circle-large-outline",60341),combine:vd("combine",60342),gather:vd("gather",60342),table:vd("table",60343),variableGroup:vd("variable-group",60344),typeHierarchy:vd("type-hierarchy",60345),typeHierarchySub:vd("type-hierarchy-sub",60346),typeHierarchySuper:vd("type-hierarchy-super",60347),gitPullRequestCreate:vd("git-pull-request-create",60348),runAbove:vd("run-above",60349),runBelow:vd("run-below",60350),notebookTemplate:vd("notebook-template",60351),debugRerun:vd("debug-rerun",60352),workspaceTrusted:vd("workspace-trusted",60353),workspaceUntrusted:vd("workspace-untrusted",60354),workspaceUnknown:vd("workspace-unknown",60355),terminalCmd:vd("terminal-cmd",60356),terminalDebian:vd("terminal-debian",60357),terminalLinux:vd("terminal-linux",60358),terminalPowershell:vd("terminal-powershell",60359),terminalTmux:vd("terminal-tmux",60360),terminalUbuntu:vd("terminal-ubuntu",60361),terminalBash:vd("terminal-bash",60362),arrowSwap:vd("arrow-swap",60363),copy:vd("copy",60364),personAdd:vd("person-add",60365),filterFilled:vd("filter-filled",60366),wand:vd("wand",60367),debugLineByLine:vd("debug-line-by-line",60368),inspect:vd("inspect",60369),layers:vd("layers",60370),layersDot:vd("layers-dot",60371),layersActive:vd("layers-active",60372),compass:vd("compass",60373),compassDot:vd("compass-dot",60374),compassActive:vd("compass-active",60375),azure:vd("azure",60376),issueDraft:vd("issue-draft",60377),gitPullRequestClosed:vd("git-pull-request-closed",60378),gitPullRequestDraft:vd("git-pull-request-draft",60379),debugAll:vd("debug-all",60380),debugCoverage:vd("debug-coverage",60381),runErrors:vd("run-errors",60382),folderLibrary:vd("folder-library",60383),debugContinueSmall:vd("debug-continue-small",60384),beakerStop:vd("beaker-stop",60385),graphLine:vd("graph-line",60386),graphScatter:vd("graph-scatter",60387),pieChart:vd("pie-chart",60388),bracket:vd("bracket",60175),bracketDot:vd("bracket-dot",60389),bracketError:vd("bracket-error",60390),lockSmall:vd("lock-small",60391),azureDevops:vd("azure-devops",60392),verifiedFilled:vd("verified-filled",60393),newline:vd("newline",60394),layout:vd("layout",60395),layoutActivitybarLeft:vd("layout-activitybar-left",60396),layoutActivitybarRight:vd("layout-activitybar-right",60397),layoutPanelLeft:vd("layout-panel-left",60398),layoutPanelCenter:vd("layout-panel-center",60399),layoutPanelJustify:vd("layout-panel-justify",60400),layoutPanelRight:vd("layout-panel-right",60401),layoutPanel:vd("layout-panel",60402),layoutSidebarLeft:vd("layout-sidebar-left",60403),layoutSidebarRight:vd("layout-sidebar-right",60404),layoutStatusbar:vd("layout-statusbar",60405),layoutMenubar:vd("layout-menubar",60406),layoutCentered:vd("layout-centered",60407),target:vd("target",60408),indent:vd("indent",60409),recordSmall:vd("record-small",60410),errorSmall:vd("error-small",60411),terminalDecorationError:vd("terminal-decoration-error",60411),arrowCircleDown:vd("arrow-circle-down",60412),arrowCircleLeft:vd("arrow-circle-left",60413),arrowCircleRight:vd("arrow-circle-right",60414),arrowCircleUp:vd("arrow-circle-up",60415),layoutSidebarRightOff:vd("layout-sidebar-right-off",60416),layoutPanelOff:vd("layout-panel-off",60417),layoutSidebarLeftOff:vd("layout-sidebar-left-off",60418),blank:vd("blank",60419),heartFilled:vd("heart-filled",60420),map:vd("map",60421),mapHorizontal:vd("map-horizontal",60421),foldHorizontal:vd("fold-horizontal",60421),mapFilled:vd("map-filled",60422),mapHorizontalFilled:vd("map-horizontal-filled",60422),foldHorizontalFilled:vd("fold-horizontal-filled",60422),circleSmall:vd("circle-small",60423),bellSlash:vd("bell-slash",60424),bellSlashDot:vd("bell-slash-dot",60425),commentUnresolved:vd("comment-unresolved",60426),gitPullRequestGoToChanges:vd("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:vd("git-pull-request-new-changes",60428),searchFuzzy:vd("search-fuzzy",60429),commentDraft:vd("comment-draft",60430),send:vd("send",60431),sparkle:vd("sparkle",60432),insert:vd("insert",60433),mic:vd("mic",60434),thumbsdownFilled:vd("thumbsdown-filled",60435),thumbsupFilled:vd("thumbsup-filled",60436),coffee:vd("coffee",60437),snake:vd("snake",60438),game:vd("game",60439),vr:vd("vr",60440),chip:vd("chip",60441),piano:vd("piano",60442),music:vd("music",60443),micFilled:vd("mic-filled",60444),repoFetch:vd("repo-fetch",60445),copilot:vd("copilot",60446),lightbulbSparkle:vd("lightbulb-sparkle",60447),robot:vd("robot",60448),sparkleFilled:vd("sparkle-filled",60449),diffSingle:vd("diff-single",60450),diffMultiple:vd("diff-multiple",60451),surroundWith:vd("surround-with",60452),share:vd("share",60453),gitStash:vd("git-stash",60454),gitStashApply:vd("git-stash-apply",60455),gitStashPop:vd("git-stash-pop",60456),vscode:vd("vscode",60457),vscodeInsiders:vd("vscode-insiders",60458),codeOss:vd("code-oss",60459),runCoverage:vd("run-coverage",60460),runAllCoverage:vd("run-all-coverage",60461),coverage:vd("coverage",60462),githubProject:vd("github-project",60463),mapVertical:vd("map-vertical",60464),foldVertical:vd("fold-vertical",60464),mapVerticalFilled:vd("map-vertical-filled",60465),foldVerticalFilled:vd("fold-vertical-filled",60465),goToSearch:vd("go-to-search",60466),percentage:vd("percentage",60467),sortPercentage:vd("sort-percentage",60467),attach:vd("attach",60468)},{dialogError:vd("dialog-error","error"),dialogWarning:vd("dialog-warning","warning"),dialogInfo:vd("dialog-info","info"),dialogClose:vd("dialog-close","close"),treeItemExpanded:vd("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:vd("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:vd("tree-filter-on-type-off","list-selection"),treeFilterClear:vd("tree-filter-clear","close"),treeItemLoading:vd("tree-item-loading","loading"),menuSelection:vd("menu-selection","check"),menuSubmenu:vd("menu-submenu","chevron-right"),menuBarMore:vd("menubar-more","more"),scrollbarButtonLeft:vd("scrollbar-button-left","triangle-left"),scrollbarButtonRight:vd("scrollbar-button-right","triangle-right"),scrollbarButtonUp:vd("scrollbar-button-up","triangle-up"),scrollbarButtonDown:vd("scrollbar-button-down","triangle-down"),toolBarMore:vd("toolbar-more","more"),quickInputBack:vd("quick-input-back","arrow-left"),dropDownButton:vd("drop-down-button",60084),symbolCustomColor:vd("symbol-customcolor",60252),exportIcon:vd("export",60332),workspaceUnspecified:vd("workspace-unspecified",60355),newLine:vd("newline",60394),thumbsDownFilled:vd("thumbsdown-filled",60435),thumbsUpFilled:vd("thumbsup-filled",60436),gitFetch:vd("git-fetch",60445),lightbulbSparkleAutofix:vd("lightbulb-sparkle-autofix",60447),debugBreakpointPending:vd("debug-breakpoint-pending",60377)}),kd=function(){function e(){u(this,e),this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new Zu,this.onDidChange=this._onDidChange.event,this._colorMap=null}return h(e,[{key:"handleChange",value:function(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}},{key:"register",value:function(e,t){var n=this;return this._tokenizationSupports.set(e,t),this.handleChange([e]),Mu((function(){n._tokenizationSupports.get(e)===t&&(n._tokenizationSupports.delete(e),n.handleChange([e]))}))}},{key:"get",value:function(e){return this._tokenizationSupports.get(e)||null}},{key:"registerFactory",value:function(e,t){var n,i=this;null===(n=this._factories.get(e))||void 0===n||n.dispose();var r=new wd(this,e,t);return this._factories.set(e,r),Mu((function(){var t=i._factories.get(e);t&&t===r&&(i._factories.delete(e),t.dispose())}))}},{key:"getOrCreate",value:function(e){var t=this;return s((function(){var n,i;return E(this,(function(r){switch(r.label){case 0:return(n=t.get(e))?[2,n]:!(i=t._factories.get(e))||i.isResolved?[2,null]:[4,i.resolve()];case 1:return r.sent(),[2,t.get(e)]}}))}))()}},{key:"isResolved",value:function(e){if(this.get(e))return!0;var t=this._factories.get(e);return!(t&&!t.isResolved)}},{key:"setColorMap",value:function(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}},{key:"getColorMap",value:function(){return this._colorMap}},{key:"getDefaultBackground",value:function(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}]),e}(),wd=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._registry=e,r._languageId=n,r._factory=i,r._isDisposed=!1,r._resolvePromise=null,r._isResolved=!1,r}return p(t,e),h(t,[{key:"isResolved",get:function(){return this._isResolved}},{key:"dispose",value:function(){this._isDisposed=!0,g(v(t.prototype),"dispose",this).call(this)}},{key:"resolve",value:function(){var e=this;return s((function(){return E(this,(function(t){return e._resolvePromise||(e._resolvePromise=e._create()),[2,e._resolvePromise]}))}))()}},{key:"_create",value:function(){var e=this;return s((function(){var t;return E(this,(function(n){switch(n.label){case 0:return[4,e._factory.tokenizationSupport];case 1:return t=n.sent(),e._isResolved=!0,t&&!e._isDisposed&&e._register(e._registry.register(e._languageId,t)),[2]}}))}))()}}]),t}(Ru),Cd=function(){function e(t,n,i){u(this,e),this.offset=t,this.type=n,this.language=i,this._tokenBrand=void 0}return h(e,[{key:"toString",value:function(){return"("+this.offset+", "+this.type+")"}}]),e}(),Sd=function e(t,n){u(this,e),this.tokens=t,this.endState=n,this._tokenizationResultBrand=void 0},xd=function e(t,n){u(this,e),this.tokens=t,this.endState=n,this._encodedTokenizationResultBrand=void 0};!function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"}(md||(md={})),function(e){var t=new Map;t.set(0,bd.symbolMethod),t.set(1,bd.symbolFunction),t.set(2,bd.symbolConstructor),t.set(3,bd.symbolField),t.set(4,bd.symbolVariable),t.set(5,bd.symbolClass),t.set(6,bd.symbolStruct),t.set(7,bd.symbolInterface),t.set(8,bd.symbolModule),t.set(9,bd.symbolProperty),t.set(10,bd.symbolEvent),t.set(11,bd.symbolOperator),t.set(12,bd.symbolUnit),t.set(13,bd.symbolValue),t.set(15,bd.symbolEnum),t.set(14,bd.symbolConstant),t.set(15,bd.symbolEnum),t.set(16,bd.symbolEnumMember),t.set(17,bd.symbolKeyword),t.set(27,bd.symbolSnippet),t.set(18,bd.symbolText),t.set(19,bd.symbolColor),t.set(20,bd.symbolFile),t.set(21,bd.symbolReference),t.set(22,bd.symbolCustomColor),t.set(23,bd.symbolFolder),t.set(24,bd.symbolTypeParameter),t.set(25,bd.account),t.set(26,bd.issues),e.toIcon=function(e){var n=t.get(e);return n||(console.info("No codicon found for CompletionItemKind "+e),n=bd.symbolProperty),n};var n=new Map;n.set("method",0),n.set("function",1),n.set("constructor",2),n.set("field",3),n.set("variable",4),n.set("class",5),n.set("struct",6),n.set("interface",7),n.set("module",8),n.set("property",9),n.set("event",10),n.set("operator",11),n.set("unit",12),n.set("value",13),n.set("constant",14),n.set("enum",15),n.set("enum-member",16),n.set("enumMember",16),n.set("keyword",17),n.set("snippet",27),n.set("text",18),n.set("color",19),n.set("file",20),n.set("reference",21),n.set("customcolor",22),n.set("folder",23),n.set("type-parameter",24),n.set("typeParameter",24),n.set("account",25),n.set("issue",26),e.fromString=function(e,t){var i=n.get(e);return void 0!==i||t||(i=9),i}}(yd||(yd={})),function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"}(_d||(_d={}));var Ld,Dd,Nd,Id,Ed=function(){function e(t,n,i,r){u(this,e),this.range=t,this.text=n,this.completionKind=i,this.isSnippetText=r}return h(e,[{key:"equals",value:function(e){return hd.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}]),e}();!function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"}(Ld||(Ld={})),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(Dd||(Dd={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(Nd||(Nd={}));var Md,Td=(f(Id={},17,Xa("Array","array")),f(Id,16,Xa("Boolean","boolean")),f(Id,4,Xa("Class","class")),f(Id,13,Xa("Constant","constant")),f(Id,8,Xa("Constructor","constructor")),f(Id,9,Xa("Enum","enumeration")),f(Id,21,Xa("EnumMember","enumeration member")),f(Id,23,Xa("Event","event")),f(Id,7,Xa("Field","field")),f(Id,0,Xa("File","file")),f(Id,11,Xa("Function","function")),f(Id,10,Xa("Interface","interface")),f(Id,19,Xa("Key","key")),f(Id,5,Xa("Method","method")),f(Id,1,Xa("Module","module")),f(Id,2,Xa("Namespace","namespace")),f(Id,20,Xa("Null","null")),f(Id,15,Xa("Number","number")),f(Id,18,Xa("Object","object")),f(Id,24,Xa("Operator","operator")),f(Id,3,Xa("Package","package")),f(Id,6,Xa("Property","property")),f(Id,14,Xa("String","string")),f(Id,22,Xa("Struct","struct")),f(Id,25,Xa("TypeParameter","type parameter")),f(Id,12,Xa("Variable","variable")),Id);function Rd(e,t){return Xa("symbolAriaLabel","{0} ({1})",e,Td[t])}!function(e){var t=new Map;t.set(0,bd.symbolFile),t.set(1,bd.symbolModule),t.set(2,bd.symbolNamespace),t.set(3,bd.symbolPackage),t.set(4,bd.symbolClass),t.set(5,bd.symbolMethod),t.set(6,bd.symbolProperty),t.set(7,bd.symbolField),t.set(8,bd.symbolConstructor),t.set(9,bd.symbolEnum),t.set(10,bd.symbolInterface),t.set(11,bd.symbolFunction),t.set(12,bd.symbolVariable),t.set(13,bd.symbolConstant),t.set(14,bd.symbolString),t.set(15,bd.symbolNumber),t.set(16,bd.symbolBoolean),t.set(17,bd.symbolArray),t.set(18,bd.symbolObject),t.set(19,bd.symbolKey),t.set(20,bd.symbolNull),t.set(21,bd.symbolEnumMember),t.set(22,bd.symbolStruct),t.set(23,bd.symbolEvent),t.set(24,bd.symbolOperator),t.set(25,bd.symbolTypeParameter),e.toIcon=function(e){var n=t.get(e);return n||(console.info("No codicon found for SymbolKind "+e),n=bd.symbolProperty),n}}(Md||(Md={}));var Ad,Pd,Od,Fd,Wd=function(){function e(t){u(this,e),this.value=t}return h(e,null,[{key:"fromValue",value:function(t){switch(t){case"comment":return e.Comment;case"imports":return e.Imports;case"region":return e.Region}return new e(t)}}]),e}();Wd.Comment=new Wd("comment"),Wd.Imports=new Wd("imports"),Wd.Region=new Wd("region"),function(e){e[e.AIGenerated=1]="AIGenerated"}(Ad||(Ad={})),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(Pd||(Pd={})),function(e){e.is=function(e){return!(!e||"object"!==(void 0===e?"undefined":L(e)))&&("string"==typeof e.id&&"string"==typeof e.title)}}(Od||(Od={})),function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(Fd||(Fd={}));var Bd,Hd,Vd,zd,Ud,jd,Kd,qd,Gd,Zd,Yd,Qd,Xd,$d,Jd,eh,th,nh,ih,rh,oh,ah,sh,lh,uh,ch,dh,hh,fh,gh,vh,ph,mh,yh,_h,bh,kh,wh,Ch,Sh,xh,Lh,Dh,Nh,Ih,Eh,Mh,Th=function(){function e(t){u(this,e),this.createSupport=t,this._tokenizationSupport=null}return h(e,[{key:"dispose",value:function(){this._tokenizationSupport&&this._tokenizationSupport.then((function(e){e&&e.dispose()}))}},{key:"tokenizationSupport",get:function(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}]),e}(),Rh=new kd,Ah=new kd;!function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(Bd||(Bd={})),function(e){e[e.Unknown=0]="Unknown",e[e.Disabled=1]="Disabled",e[e.Enabled=2]="Enabled"}(Hd||(Hd={})),function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"}(Vd||(Vd={})),function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"}(zd||(zd={})),function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"}(Ud||(Ud={})),function(e){e[e.Deprecated=1]="Deprecated"}(jd||(jd={})),function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"}(Kd||(Kd={})),function(e){e[e.EXACT=0]="EXACT",e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW"}(qd||(qd={})),function(e){e[e.NotSet=0]="NotSet",e[e.ContentFlush=1]="ContentFlush",e[e.RecoverFromMarkers=2]="RecoverFromMarkers",e[e.Explicit=3]="Explicit",e[e.Paste=4]="Paste",e[e.Undo=5]="Undo",e[e.Redo=6]="Redo"}(Gd||(Gd={})),function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(Zd||(Zd={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(Yd||(Yd={})),function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"}(Qd||(Qd={})),function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.ariaLabel=4]="ariaLabel",e[e.ariaRequired=5]="ariaRequired",e[e.autoClosingBrackets=6]="autoClosingBrackets",e[e.autoClosingComments=7]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=9]="autoClosingDelete",e[e.autoClosingOvertype=10]="autoClosingOvertype",e[e.autoClosingQuotes=11]="autoClosingQuotes",e[e.autoIndent=12]="autoIndent",e[e.automaticLayout=13]="automaticLayout",e[e.autoSurround=14]="autoSurround",e[e.bracketPairColorization=15]="bracketPairColorization",e[e.guides=16]="guides",e[e.codeLens=17]="codeLens",e[e.codeLensFontFamily=18]="codeLensFontFamily",e[e.codeLensFontSize=19]="codeLensFontSize",e[e.colorDecorators=20]="colorDecorators",e[e.colorDecoratorsLimit=21]="colorDecoratorsLimit",e[e.columnSelection=22]="columnSelection",e[e.comments=23]="comments",e[e.contextmenu=24]="contextmenu",e[e.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",e[e.cursorBlinking=26]="cursorBlinking",e[e.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",e[e.cursorStyle=28]="cursorStyle",e[e.cursorSurroundingLines=29]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",e[e.cursorWidth=31]="cursorWidth",e[e.disableLayerHinting=32]="disableLayerHinting",e[e.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",e[e.domReadOnly=34]="domReadOnly",e[e.dragAndDrop=35]="dragAndDrop",e[e.dropIntoEditor=36]="dropIntoEditor",e[e.emptySelectionClipboard=37]="emptySelectionClipboard",e[e.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",e[e.extraEditorClassName=39]="extraEditorClassName",e[e.fastScrollSensitivity=40]="fastScrollSensitivity",e[e.find=41]="find",e[e.fixedOverflowWidgets=42]="fixedOverflowWidgets",e[e.folding=43]="folding",e[e.foldingStrategy=44]="foldingStrategy",e[e.foldingHighlight=45]="foldingHighlight",e[e.foldingImportsByDefault=46]="foldingImportsByDefault",e[e.foldingMaximumRegions=47]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=49]="fontFamily",e[e.fontInfo=50]="fontInfo",e[e.fontLigatures=51]="fontLigatures",e[e.fontSize=52]="fontSize",e[e.fontWeight=53]="fontWeight",e[e.fontVariations=54]="fontVariations",e[e.formatOnPaste=55]="formatOnPaste",e[e.formatOnType=56]="formatOnType",e[e.glyphMargin=57]="glyphMargin",e[e.gotoLocation=58]="gotoLocation",e[e.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",e[e.hover=60]="hover",e[e.inDiffEditor=61]="inDiffEditor",e[e.inlineSuggest=62]="inlineSuggest",e[e.inlineEdit=63]="inlineEdit",e[e.letterSpacing=64]="letterSpacing",e[e.lightbulb=65]="lightbulb",e[e.lineDecorationsWidth=66]="lineDecorationsWidth",e[e.lineHeight=67]="lineHeight",e[e.lineNumbers=68]="lineNumbers",e[e.lineNumbersMinChars=69]="lineNumbersMinChars",e[e.linkedEditing=70]="linkedEditing",e[e.links=71]="links",e[e.matchBrackets=72]="matchBrackets",e[e.minimap=73]="minimap",e[e.mouseStyle=74]="mouseStyle",e[e.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=76]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",e[e.multiCursorModifier=78]="multiCursorModifier",e[e.multiCursorPaste=79]="multiCursorPaste",e[e.multiCursorLimit=80]="multiCursorLimit",e[e.occurrencesHighlight=81]="occurrencesHighlight",e[e.overviewRulerBorder=82]="overviewRulerBorder",e[e.overviewRulerLanes=83]="overviewRulerLanes",e[e.padding=84]="padding",e[e.pasteAs=85]="pasteAs",e[e.parameterHints=86]="parameterHints",e[e.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",e[e.placeholder=88]="placeholder",e[e.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",e[e.quickSuggestions=90]="quickSuggestions",e[e.quickSuggestionsDelay=91]="quickSuggestionsDelay",e[e.readOnly=92]="readOnly",e[e.readOnlyMessage=93]="readOnlyMessage",e[e.renameOnType=94]="renameOnType",e[e.renderControlCharacters=95]="renderControlCharacters",e[e.renderFinalNewline=96]="renderFinalNewline",e[e.renderLineHighlight=97]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=99]="renderValidationDecorations",e[e.renderWhitespace=100]="renderWhitespace",e[e.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",e[e.roundedSelection=102]="roundedSelection",e[e.rulers=103]="rulers",e[e.scrollbar=104]="scrollbar",e[e.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=106]="scrollBeyondLastLine",e[e.scrollPredominantAxis=107]="scrollPredominantAxis",e[e.selectionClipboard=108]="selectionClipboard",e[e.selectionHighlight=109]="selectionHighlight",e[e.selectOnLineNumbers=110]="selectOnLineNumbers",e[e.showFoldingControls=111]="showFoldingControls",e[e.showUnused=112]="showUnused",e[e.snippetSuggestions=113]="snippetSuggestions",e[e.smartSelect=114]="smartSelect",e[e.smoothScrolling=115]="smoothScrolling",e[e.stickyScroll=116]="stickyScroll",e[e.stickyTabStops=117]="stickyTabStops",e[e.stopRenderingLineAfter=118]="stopRenderingLineAfter",e[e.suggest=119]="suggest",e[e.suggestFontSize=120]="suggestFontSize",e[e.suggestLineHeight=121]="suggestLineHeight",e[e.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",e[e.suggestSelection=123]="suggestSelection",e[e.tabCompletion=124]="tabCompletion",e[e.tabIndex=125]="tabIndex",e[e.unicodeHighlighting=126]="unicodeHighlighting",e[e.unusualLineTerminators=127]="unusualLineTerminators",e[e.useShadowDOM=128]="useShadowDOM",e[e.useTabStops=129]="useTabStops",e[e.wordBreak=130]="wordBreak",e[e.wordSegmenterLocales=131]="wordSegmenterLocales",e[e.wordSeparators=132]="wordSeparators",e[e.wordWrap=133]="wordWrap",e[e.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=136]="wordWrapColumn",e[e.wordWrapOverride1=137]="wordWrapOverride1",e[e.wordWrapOverride2=138]="wordWrapOverride2",e[e.wrappingIndent=139]="wrappingIndent",e[e.wrappingStrategy=140]="wrappingStrategy",e[e.showDeprecated=141]="showDeprecated",e[e.inlayHints=142]="inlayHints",e[e.editorClassName=143]="editorClassName",e[e.pixelRatio=144]="pixelRatio",e[e.tabFocusMode=145]="tabFocusMode",e[e.layoutInfo=146]="layoutInfo",e[e.wrappingInfo=147]="wrappingInfo",e[e.defaultColorDecorators=148]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"}(Xd||(Xd={})),function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}($d||($d={})),function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"}(Jd||(Jd={})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"}(eh||(eh={})),function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"}(th||(th={})),function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"}(nh||(nh={})),function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"}(ih||(ih={})),function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(rh||(rh={})),function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"}(oh||(oh={})),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(ah||(ah={})),function(e){e[e.DependsOnKbLayout=-1]="DependsOnKbLayout",e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",e[e.Digit0=21]="Digit0",e[e.Digit1=22]="Digit1",e[e.Digit2=23]="Digit2",e[e.Digit3=24]="Digit3",e[e.Digit4=25]="Digit4",e[e.Digit5=26]="Digit5",e[e.Digit6=27]="Digit6",e[e.Digit7=28]="Digit7",e[e.Digit8=29]="Digit8",e[e.Digit9=30]="Digit9",e[e.KeyA=31]="KeyA",e[e.KeyB=32]="KeyB",e[e.KeyC=33]="KeyC",e[e.KeyD=34]="KeyD",e[e.KeyE=35]="KeyE",e[e.KeyF=36]="KeyF",e[e.KeyG=37]="KeyG",e[e.KeyH=38]="KeyH",e[e.KeyI=39]="KeyI",e[e.KeyJ=40]="KeyJ",e[e.KeyK=41]="KeyK",e[e.KeyL=42]="KeyL",e[e.KeyM=43]="KeyM",e[e.KeyN=44]="KeyN",e[e.KeyO=45]="KeyO",e[e.KeyP=46]="KeyP",e[e.KeyQ=47]="KeyQ",e[e.KeyR=48]="KeyR",e[e.KeyS=49]="KeyS",e[e.KeyT=50]="KeyT",e[e.KeyU=51]="KeyU",e[e.KeyV=52]="KeyV",e[e.KeyW=53]="KeyW",e[e.KeyX=54]="KeyX",e[e.KeyY=55]="KeyY",e[e.KeyZ=56]="KeyZ",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.F20=78]="F20",e[e.F21=79]="F21",e[e.F22=80]="F22",e[e.F23=81]="F23",e[e.F24=82]="F24",e[e.NumLock=83]="NumLock",e[e.ScrollLock=84]="ScrollLock",e[e.Semicolon=85]="Semicolon",e[e.Equal=86]="Equal",e[e.Comma=87]="Comma",e[e.Minus=88]="Minus",e[e.Period=89]="Period",e[e.Slash=90]="Slash",e[e.Backquote=91]="Backquote",e[e.BracketLeft=92]="BracketLeft",e[e.Backslash=93]="Backslash",e[e.BracketRight=94]="BracketRight",e[e.Quote=95]="Quote",e[e.OEM_8=96]="OEM_8",e[e.IntlBackslash=97]="IntlBackslash",e[e.Numpad0=98]="Numpad0",e[e.Numpad1=99]="Numpad1",e[e.Numpad2=100]="Numpad2",e[e.Numpad3=101]="Numpad3",e[e.Numpad4=102]="Numpad4",e[e.Numpad5=103]="Numpad5",e[e.Numpad6=104]="Numpad6",e[e.Numpad7=105]="Numpad7",e[e.Numpad8=106]="Numpad8",e[e.Numpad9=107]="Numpad9",e[e.NumpadMultiply=108]="NumpadMultiply",e[e.NumpadAdd=109]="NumpadAdd",e[e.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",e[e.NumpadSubtract=111]="NumpadSubtract",e[e.NumpadDecimal=112]="NumpadDecimal",e[e.NumpadDivide=113]="NumpadDivide",e[e.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",e[e.ABNT_C1=115]="ABNT_C1",e[e.ABNT_C2=116]="ABNT_C2",e[e.AudioVolumeMute=117]="AudioVolumeMute",e[e.AudioVolumeUp=118]="AudioVolumeUp",e[e.AudioVolumeDown=119]="AudioVolumeDown",e[e.BrowserSearch=120]="BrowserSearch",e[e.BrowserHome=121]="BrowserHome",e[e.BrowserBack=122]="BrowserBack",e[e.BrowserForward=123]="BrowserForward",e[e.MediaTrackNext=124]="MediaTrackNext",e[e.MediaTrackPrevious=125]="MediaTrackPrevious",e[e.MediaStop=126]="MediaStop",e[e.MediaPlayPause=127]="MediaPlayPause",e[e.LaunchMediaPlayer=128]="LaunchMediaPlayer",e[e.LaunchMail=129]="LaunchMail",e[e.LaunchApp2=130]="LaunchApp2",e[e.Clear=131]="Clear",e[e.MAX_VALUE=132]="MAX_VALUE"}(sh||(sh={})),function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"}(lh||(lh={})),function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"}(uh||(uh={})),function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"}(ch||(ch={})),function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"}(dh||(dh={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXTAREA=1]="TEXTAREA",e[e.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",e[e.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",e[e.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",e[e.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",e[e.CONTENT_TEXT=6]="CONTENT_TEXT",e[e.CONTENT_EMPTY=7]="CONTENT_EMPTY",e[e.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",e[e.CONTENT_WIDGET=9]="CONTENT_WIDGET",e[e.OVERVIEW_RULER=10]="OVERVIEW_RULER",e[e.SCROLLBAR=11]="SCROLLBAR",e[e.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",e[e.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"}(hh||(hh={})),function(e){e[e.AIGenerated=1]="AIGenerated"}(fh||(fh={})),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(gh||(gh={})),function(e){e[e.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",e[e.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",e[e.TOP_CENTER=2]="TOP_CENTER"}(vh||(vh={})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(ph||(ph={})),function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"}(mh||(mh={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"}(yh||(yh={})),function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"}(_h||(_h={})),function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"}(bh||(bh={})),function(e){e[e.Smooth=0]="Smooth",e[e.Immediate=1]="Immediate"}(kh||(kh={})),function(e){e[e.Auto=1]="Auto",e[e.Hidden=2]="Hidden",e[e.Visible=3]="Visible"}(wh||(wh={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(Ch||(Ch={})),function(e){e.Off="off",e.OnCode="onCode",e.On="on"}(Sh||(Sh={})),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(xh||(xh={})),function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"}(Lh||(Lh={})),function(e){e[e.Deprecated=1]="Deprecated"}(Dh||(Dh={})),function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"}(Nh||(Nh={})),function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"}(Ih||(Ih={})),function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"}(Eh||(Eh={})),function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"}(Mh||(Mh={}));var Ph=(ct=function(){function e(){u(this,e)}return h(e,null,[{key:"chord",value:function(e,t){return pc(e,t)}}]),e}(),ct.CtrlCmd=2048,ct.Shift=1024,ct.Alt=512,ct.WinCtrl=256,ct);function Oh(){return{editor:void 0,languages:void 0,CancellationTokenSource:rc,Emitter:Zu,KeyCode:sh,KeyMod:Ph,Position:dd,Range:hd,Selection:fd,SelectionDirection:Ch,MarkerSeverity:lh,MarkerTag:uh,Uri:ed,Token:Cd}}var Fh=window;function Wh(e){return e}var Bh=function(){function e(t,n){u(this,e),this.lastCache=void 0,this.lastArgKey=void 0,"function"==typeof t?(this._fn=t,this._computeKey=Wh):(this._fn=n,this._computeKey=t.getCacheKey)}return h(e,[{key:"get",value:function(e){var t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}]),e}(),Hh=function(){function e(t,n){u(this,e),this._map=new Map,this._map2=new Map,"function"==typeof t?(this._fn=t,this._computeKey=Wh):(this._fn=n,this._computeKey=t.getCacheKey)}return h(e,[{key:"cachedValues",get:function(){return this._map}},{key:"get",value:function(e){var t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);var n=this._fn(e);return this._map.set(e,n),this._map2.set(t,n),n}}]),e}(),Vh=function(){function e(t){u(this,e),this.executor=t,this._didRun=!1}return h(e,[{key:"value",get:function e(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}},{key:"rawValue",get:function(){return this._value}}]),e}();function zh(e){return!e||"string"!=typeof e||0===e.trim().length}var Uh=/{(\d+)}/g;function jh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return 0===n.length?e:e.replace(Uh,(function(e,t){var i=parseInt(t,10);return isNaN(i)||i<0||i>=n.length?e:n[i]}))}function Kh(e){return e.replace(/[<>&]/g,(function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}}))}function qh(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function Gh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return Yh(Zh(e,t),t)}function Zh(e,t){if(!e||!t)return e;var n=t.length;if(0===n||0===e.length)return e;for(var i=0;e.indexOf(t,i)===i;)i+=n;return e.substring(i)}function Yh(e,t){if(!e||!t)return e;var n=t.length,i=e.length;if(0===n||0===i)return e;for(var r=i,o=-1;-1!==(o=e.lastIndexOf(t,r-1))&&o+n===r;){if(0===o)return"";r=o}return e.substring(0,r)}function Qh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("Cannot create regex from empty string");t||(e=qh(e)),n.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));var i="";return n.global&&(i+="g"),n.matchCase||(i+="i"),n.multiline&&(i+="m"),n.unicode&&(i+="u"),new RegExp(e,i)}function Xh(e){return e.split(/\r\n|\r|\n/)}function $h(e){for(var t=0,n=e.length;t<n;t++){var i=e.charCodeAt(t);if(32!==i&&9!==i)return t}return-1}function Jh(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i=t;i<n;i++){var r=e.charCodeAt(i);if(32!==r&&9!==r)return e.substring(t,i)}return e.substring(t,n)}function ef(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length-1;t>=0;t--){var n=e.charCodeAt(t);if(32!==n&&9!==n)return t}return-1}function tf(e,t){return e<t?-1:e>t?1:0}function nf(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.length;n<i&&r<o;n++,r++){var a=e.charCodeAt(n),s=t.charCodeAt(r);if(a<s)return-1;if(a>s)return 1}var l=i-n,u=o-r;return l<u?-1:l>u?1:0}function rf(e,t){return of(e,t,0,e.length,0,t.length)}function of(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.length;n<i&&r<o;n++,r++){var a=e.charCodeAt(n),s=t.charCodeAt(r);if(a!==s){if(a>=128||s>=128)return nf(e.toLowerCase(),t.toLowerCase(),n,i,r,o);sf(a)&&(a-=32),sf(s)&&(s-=32);var l=a-s;if(0!==l)return l}}var u=i-n,c=o-r;return u<c?-1:u>c?1:0}function af(e){return e>=48&&e<=57}function sf(e){return e>=97&&e<=122}function lf(e){return e>=65&&e<=90}function uf(e,t){return e.length===t.length&&0===of(e,t)}function cf(e,t){var n=t.length;return!(t.length>e.length)&&0===of(e,t,0,n)}function df(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n++)if(e.charCodeAt(n)!==t.charCodeAt(n))return n;return i}function hf(e,t){var n,i=Math.min(e.length,t.length),r=e.length-1,o=t.length-1;for(n=0;n<i;n++)if(e.charCodeAt(r-n)!==t.charCodeAt(o-n))return n;return i}function ff(e){return 55296<=e&&e<=56319}function gf(e){return 56320<=e&&e<=57343}function vf(e,t){return t-56320+(e-55296<<10)+65536}function pf(e,t,n){var i=e.charCodeAt(n);if(ff(i)&&n+1<t){var r=e.charCodeAt(n+1);if(gf(r))return vf(i,r)}return i}var mf=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,e),this._str=t,this._len=t.length,this._offset=n}return h(e,[{key:"offset",get:function(){return this._offset}},{key:"setOffset",value:function(e){this._offset=e}},{key:"prevCodePoint",value:function(){var e=function(e,t){var n=e.charCodeAt(t-1);if(gf(n)&&t>1){var i=e.charCodeAt(t-2);if(ff(i))return vf(i,n)}return n}(this._str,this._offset);return this._offset-=e>=65536?2:1,e}},{key:"nextCodePoint",value:function(){var e=pf(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}},{key:"eol",value:function(){return this._offset>=this._len}}]),e}(),yf=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,e),this._iterator=new mf(t,n)}return h(e,[{key:"offset",get:function(){return this._iterator.offset}},{key:"nextGraphemeLength",value:function(){for(var e=Rf.getInstance(),t=this._iterator,n=t.offset,i=e.getGraphemeBreakType(t.nextCodePoint());!t.eol();){var r=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());if(Tf(i,o)){t.setOffset(r);break}i=o}return t.offset-n}},{key:"prevGraphemeLength",value:function(){for(var e=Rf.getInstance(),t=this._iterator,n=t.offset,i=e.getGraphemeBreakType(t.prevCodePoint());t.offset>0;){var r=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());if(Tf(o,i)){t.setOffset(r);break}i=o}return n-t.offset}},{key:"eol",value:function(){return this._iterator.eol()}}]),e}();function _f(e,t){return new yf(e,t).nextGraphemeLength()}function bf(e,t){return new yf(e,t).prevGraphemeLength()}var kf=void 0;function wf(e){return kf||(kf=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/),kf.test(e)}var Cf=/^[\t\n\r\x20-\x7E]*$/;function Sf(e){return Cf.test(e)}var xf=/[\u2028\u2029]/;function Lf(e){return xf.test(e)}function Df(e){return e>=11904&&e<=55215||e>=63744&&e<=64255||e>=65281&&e<=65374}function Nf(e){return e>=127462&&e<=127487||8986===e||8987===e||9200===e||9203===e||e>=9728&&e<=10175||11088===e||11093===e||e>=127744&&e<=128591||e>=128640&&e<=128764||e>=128992&&e<=129008||e>=129280&&e<=129535||e>=129648&&e<=129782}var If=String.fromCharCode(65279);function Ef(e){return!!(e&&e.length>0&&65279===e.charCodeAt(0))}function Mf(e){return(e%=52)<26?String.fromCharCode(97+e):String.fromCharCode(65+e-26)}function Tf(e,t){return 0===e?5!==t&&7!==t:(2!==e||3!==t)&&(4===e||2===e||3===e||(4===t||2===t||3===t||(8!==e||8!==t&&9!==t&&11!==t&&12!==t)&&((11!==e&&9!==e||9!==t&&10!==t)&&((12!==e&&10!==e||10!==t)&&(5!==t&&13!==t&&(7!==t&&(1!==e&&((13!==e||14!==t)&&(6!==e||6!==t)))))))))}var Rf=function(){function e(){u(this,e),this._data=JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}return h(e,[{key:"getGraphemeBreakType",value:function(e){if(e<32)return 10===e?3:13===e?2:4;if(e<127)return 0;for(var t=this._data,n=t.length/3,i=1;i<=n;)if(e<t[3*i])i*=2;else{if(!(e>t[3*i+1]))return t[3*i+2];i=2*i+1}return 0}}],[{key:"getInstance",value:function(){return e._INSTANCE||(e._INSTANCE=new e),e._INSTANCE}}]),e}();function Af(e,t){if(0===e)return 0;var n=function(e,t){var n=new mf(t,e),i=n.prevCodePoint();for(;Pf(i)||65039===i||8419===i;){if(0===n.offset)return;i=n.prevCodePoint()}if(!Nf(i))return;var r=n.offset;if(r>0){8205===n.prevCodePoint()&&(r=n.offset)}return r}(e,t);if(void 0!==n)return n;var i=new mf(t,e);return i.prevCodePoint(),i.offset}function Pf(e){return 127995<=e&&e<=127999}Rf._INSTANCE=null;var Of=function(){function e(t){u(this,e),this.confusableDictionary=t}return h(e,[{key:"isAmbiguous",value:function(e){return this.confusableDictionary.has(e)}},{key:"getPrimaryConfusable",value:function(e){return this.confusableDictionary.get(e)}},{key:"getConfusableCodePoints",value:function(){return new Set(this.confusableDictionary.keys())}}],[{key:"getInstance",value:function(t){return e.cache.get(Array.from(t))}},{key:"getLocales",value:function(){return e._locales.value}}]),e}();Of.ambiguousCharacterData=new Vh((function(){return JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')})),Of.cache=new Bh({getCacheKey:JSON.stringify},(function(e){var t=function(e){for(var t=new Map,n=0;n<e.length;n+=2)t.set(e[n],e[n+1]);return t},n=function(e,t){if(!e)return t;var n=new Map,i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=C(a.value,2),u=l[0],c=l[1];t.has(u)&&n.set(u,c)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n},i=Of.ambiguousCharacterData.value,r=e.filter((function(e){return!e.startsWith("_")&&e in i}));0===r.length&&(r=["_default"]);var o=void 0,a=!0,s=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;o=n(o,t(i[d]))}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}var h=function(e,t){var n=new Map(e),i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=C(a.value,2),u=l[0],c=l[1];n.set(u,c)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t(i._common),o);return new Of(h)})),Of._locales=new Vh((function(){return Object.keys(Of.ambiguousCharacterData.value).filter((function(e){return!e.startsWith("_")}))}));var Ff=function(){function e(){u(this,e)}return h(e,null,[{key:"getRawData",value:function(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}},{key:"getData",value:function(){return this._data||(this._data=new Set(e.getRawData())),this._data}},{key:"isInvisibleCharacter",value:function(t){return e.getData().has(t)}},{key:"codePoints",get:function(){return e.getData()}}]),e}();Ff._data=void 0;var Wf=function(){function e(){u(this,e),this.mapWindowIdToZoomFactor=new Map}return h(e,[{key:"getZoomFactor",value:function(e){var t;return null!==(t=this.mapWindowIdToZoomFactor.get(this.getWindowId(e)))&&void 0!==t?t:1}},{key:"getWindowId",value:function(e){return e.vscodeWindowId}}]),e}();function Bf(e,t,n){"string"==typeof t&&(t=e.matchMedia(t)),t.addEventListener("change",n)}Wf.INSTANCE=new Wf;var Hf=navigator.userAgent,Vf=Hf.indexOf("Firefox")>=0,zf=Hf.indexOf("AppleWebKit")>=0,Uf=Hf.indexOf("Chrome")>=0,jf=!Uf&&Hf.indexOf("Safari")>=0,Kf=!Uf&&!jf&&zf;Hf.indexOf("Electron/");var qf=Hf.indexOf("Android")>=0,Gf=!1;if("function"==typeof Fh.matchMedia){var Zf=Fh.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),Yf=Fh.matchMedia("(display-mode: fullscreen)");Gf=Zf.matches,Bf(Fh,Zf,(function(e){var t=e.matches;Gf&&Yf.matches||(Gf=t)}))}_s||document.queryCommandSupported&&document.queryCommandSupported("copy")||navigator&&navigator.clipboard&&navigator.clipboard.writeText,_s||navigator&&navigator.clipboard&&navigator.clipboard.readText,_s||Gf||navigator.keyboard,"ontouchstart"in Fh||navigator.maxTouchPoints;var Qf=Fh.PointerEvent&&("ontouchstart"in Fh||navigator.maxTouchPoints>0);function Xf(e,t){if("number"==typeof e){if(0===e)return null;var n=(65535&e)>>>0,i=(4294901760&e)>>>16;return new eg(0!==i?[$f(n,t),$f(i,t)]:[$f(n,t)])}for(var r=[],o=0;o<e.length;o++)r.push($f(e[o],t));return new eg(r)}function $f(e,t){var n=!!(2048&e),i=!!(256&e);return new Jf(2===t?i:n,!!(1024&e),!!(512&e),2===t?n:i,255&e)}var Jf=function(){function e(t,n,i,r,o){u(this,e),this.ctrlKey=t,this.shiftKey=n,this.altKey=i,this.metaKey=r,this.keyCode=o}return h(e,[{key:"equals",value:function(t){return t instanceof e&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}},{key:"isModifierKey",value:function(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}},{key:"isDuplicateModifierCase",value:function(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}}]),e}(),eg=function e(t){if(u(this,e),0===t.length)throw wu("chords");this.chords=t},tg=function e(t,n,i,r,o,a){u(this,e),this.ctrlKey=t,this.shiftKey=n,this.altKey=i,this.metaKey=r,this.keyLabel=o,this.keyAriaLabel=a};var ng=ms?256:2048,ig=ms?2048:256,rg=function(){function e(t){var n;u(this,e),this._standardKeyboardEventBrand=!0;var i=t;this.browserEvent=i,this.target=i.target,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,this.altGraphKey=null===(n=i.getModifierState)||void 0===n?void 0:n.call(i,"AltGraph"),this.keyCode=function(e){if(e.charCode){var t=String.fromCharCode(e.charCode).toUpperCase();return ac.fromString(t)}var n=e.keyCode;if(3===n)return 7;if(Vf)switch(n){case 59:return 85;case 60:if(ys)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(ms)return 57}else if(zf){if(ms&&93===n)return 57;if(!ms&&92===n)return 57}return dc[n]||0}(i),this.code=i.code,this.ctrlKey=this.ctrlKey||5===this.keyCode,this.altKey=this.altKey||6===this.keyCode,this.shiftKey=this.shiftKey||4===this.keyCode,this.metaKey=this.metaKey||57===this.keyCode,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}return h(e,[{key:"preventDefault",value:function(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}},{key:"toKeyCodeChord",value:function(){return this._asKeyCodeChord}},{key:"equals",value:function(e){return this._asKeybinding===e}},{key:"_computeKeybinding",value:function(){var e=0;5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode);var t=0;return this.ctrlKey&&(t|=ng),this.altKey&&(t|=512),this.shiftKey&&(t|=1024),this.metaKey&&(t|=ig),t|=e}},{key:"_computeKeyCodeChord",value:function(){var e=0;return 5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode),new Jf(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}]),e}(),og=new WeakMap;function ag(e){if(!e.parent||e.parent===e)return null;try{var t=e.location,n=e.parent.location;if("null"!==t.origin&&"null"!==n.origin&&t.origin!==n.origin)return null}catch(e){return null}return e.parent}var sg=function(){function e(){u(this,e)}return h(e,null,[{key:"getSameOriginWindowChain",value:function(e){var t=og.get(e);if(!t){t=[],og.set(e,t);var n,i=e;do{(n=ag(i))?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=n}while(i)}return t.slice(0)}},{key:"getPositionOfChildWindowRelativeToAncestorWindow",value:function(e,t){if(!t||e===t)return{top:0,left:0};var n=0,i=0,r=this.getSameOriginWindowChain(e),o=!0,a=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c,d,h=l.value,f=h.window.deref();if(n+=null!==(c=null==f?void 0:f.scrollY)&&void 0!==c?c:0,i+=null!==(d=null==f?void 0:f.scrollX)&&void 0!==d?d:0,f===t)break;if(!h.iframeElement)break;var g=h.iframeElement.getBoundingClientRect();n+=g.top,i+=g.left}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return{top:n,left:i}}}]),e}(),lg=function(){function e(t,n){u(this,e),this.timestamp=Date.now(),this.browserEvent=n,this.leftButton=0===n.button,this.middleButton=1===n.button,this.rightButton=2===n.button,this.buttons=n.buttons,this.target=n.target,this.detail=n.detail||1,"dblclick"===n.type&&(this.detail=2),this.ctrlKey=n.ctrlKey,this.shiftKey=n.shiftKey,this.altKey=n.altKey,this.metaKey=n.metaKey,"number"==typeof n.pageX?(this.posx=n.pageX,this.posy=n.pageY):(this.posx=n.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=n.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);var i=sg.getPositionOfChildWindowRelativeToAncestorWindow(t,n.view);this.posx-=i.left,this.posy-=i.top}return h(e,[{key:"preventDefault",value:function(){this.browserEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.browserEvent.stopPropagation()}}]),e}(),ug=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;u(this,e),this.browserEvent=t||null,this.target=t?t.target||t.targetNode||t.srcElement:null,this.deltaY=i,this.deltaX=n;var r=!1;if(Uf){var o=navigator.userAgent.match(/Chrome\/(\d+)/);r=(o?parseInt(o[1]):123)<=122}if(t){var a,s=t,l=t,c=(null===(a=t.view)||void 0===a?void 0:a.devicePixelRatio)||1;if(void 0!==s.wheelDeltaY)this.deltaY=r?s.wheelDeltaY/(120*c):s.wheelDeltaY/120;else if(void 0!==l.VERTICAL_AXIS&&l.axis===l.VERTICAL_AXIS)this.deltaY=-l.detail/3;else if("wheel"===t.type){var d=t;d.deltaMode===d.DOM_DELTA_LINE?this.deltaY=Vf&&!ms?-t.deltaY/3:-t.deltaY:this.deltaY=-t.deltaY/40}if(void 0!==s.wheelDeltaX)this.deltaX=jf&&ps?-s.wheelDeltaX/120:r?s.wheelDeltaX/(120*c):s.wheelDeltaX/120;else if(void 0!==l.HORIZONTAL_AXIS&&l.axis===l.HORIZONTAL_AXIS)this.deltaX=-t.detail/3;else if("wheel"===t.type){var h=t;h.deltaMode===h.DOM_DELTA_LINE?this.deltaX=Vf&&!ms?-t.deltaX/3:-t.deltaX:this.deltaX=-t.deltaX/40}0===this.deltaY&&0===this.deltaX&&t.wheelDelta&&(this.deltaY=r?t.wheelDelta/(120*c):t.wheelDelta/120)}}return h(e,[{key:"preventDefault",value:function(){var e;null===(e=this.browserEvent)||void 0===e||e.preventDefault()}},{key:"stopPropagation",value:function(){var e;null===(e=this.browserEvent)||void 0===e||e.stopPropagation()}}]),e}(),cg=Symbol("MicrotaskDelay");function dg(e){return!!e&&"function"==typeof e.then}function hg(e){var t=new rc,n=e(t.token),i=new Promise((function(e,i){var r=t.token.onCancellationRequested((function(){r.dispose(),i(new bu)}));Promise.resolve(n).then((function(n){r.dispose(),t.dispose(),e(n)}),(function(e){r.dispose(),t.dispose(),i(e)}))}));return new(function(){function e(){u(this,e)}return h(e,[{key:"cancel",value:function(){t.cancel(),t.dispose()}},{key:"then",value:function(e,t){return i.then(e,t)}},{key:"catch",value:function(e){return this.then(void 0,e)}},{key:"finally",value:function(e){return i.finally(e)}}]),e}())}function fg(e,t,n){return new Promise((function(i,r){var o=t.onCancellationRequested((function(){o.dispose(),i(n)}));e.then(i,r).finally((function(){return o.dispose()}))}))}var gg=function(){function e(){u(this,e),this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}return h(e,[{key:"queue",value:function(e){var t=this;if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){var n=function(){if(t.queuedPromise=null,!t.isDisposed){var e=t.queue(t.queuedPromiseFactory);return t.queuedPromiseFactory=null,e}};this.queuedPromise=new Promise((function(e){t.activePromise.then(n,n).then(e)}))}return new Promise((function(e,n){t.queuedPromise.then(e,n)}))}return this.activePromise=e(),new Promise((function(e,n){t.activePromise.then((function(n){t.activePromise=null,e(n)}),(function(e){t.activePromise=null,n(e)}))}))}},{key:"dispose",value:function(){this.isDisposed=!0}}]),e}(),vg=function(){function e(t){u(this,e),this.defaultDelay=t,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}return h(e,[{key:"trigger",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultDelay;this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((function(e,n){t.doResolve=e,t.doReject=n})).then((function(){if(t.completionPromise=null,t.doResolve=null,t.task){var e=t.task;return t.task=null,e()}})));var i=function(){var e,n;t.deferred=null,null===(e=(n=t).doResolve)||void 0===e||e.call(n,null)};return this.deferred=n===cg?function(e){var t=!0;return queueMicrotask((function(){t&&(t=!1,e())})),{isTriggered:function(){return t},dispose:function(){t=!1}}}(i):function(e,t){var n=!0,i=setTimeout((function(){n=!1,t()}),e);return{isTriggered:function(){return n},dispose:function(){clearTimeout(i),n=!1}}}(n,i),this.completionPromise}},{key:"isTriggered",value:function(){var e;return!!(null===(e=this.deferred)||void 0===e?void 0:e.isTriggered())}},{key:"cancel",value:function(){var e;(this.cancelTimeout(),this.completionPromise)&&(null===(e=this.doReject)||void 0===e||e.call(this,new bu),this.completionPromise=null)}},{key:"cancelTimeout",value:function(){var e;null===(e=this.deferred)||void 0===e||e.dispose(),this.deferred=null}},{key:"dispose",value:function(){this.cancel()}}]),e}(),pg=function(){function e(t){u(this,e),this.delayer=new vg(t),this.throttler=new gg}return h(e,[{key:"trigger",value:function(e,t){var n=this;return this.delayer.trigger((function(){return n.throttler.queue(e)}),t)}},{key:"cancel",value:function(){this.delayer.cancel()}},{key:"dispose",value:function(){this.delayer.dispose(),this.throttler.dispose()}}]),e}();function mg(e,t){return t?new Promise((function(n,i){var r=setTimeout((function(){o.dispose(),n()}),e),o=t.onCancellationRequested((function(){clearTimeout(r),o.dispose(),i(new bu)}))})):hg((function(t){return mg(e,t)}))}function yg(e){var t=arguments.length>2?arguments[2]:void 0,n=setTimeout((function(){e(),t&&i.dispose()}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),i=Mu((function(){clearTimeout(n),null==t||t.deleteAndLeak(i)}));return null==t||t.add(i),i}function _g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return!!e},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=0,r=e.length,o=function(){if(i>=r)return Promise.resolve(n);var a=e[i++];return Promise.resolve(a()).then((function(e){return t(e)?Promise.resolve(e):o()}))};return o()}var bg,kg,wg=function(){function e(t,n){u(this,e),this._isDisposed=!1,this._token=-1,"function"==typeof t&&"number"==typeof n&&this.setIfNotSet(t,n)}return h(e,[{key:"dispose",value:function(){this.cancel(),this._isDisposed=!0}},{key:"cancel",value:function(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}},{key:"cancelAndSet",value:function(e,t){var n=this;if(this._isDisposed)throw new Lu("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout((function(){n._token=-1,e()}),t)}},{key:"setIfNotSet",value:function(e,t){var n=this;if(this._isDisposed)throw new Lu("Calling 'setIfNotSet' on a disposed TimeoutTimer");-1===this._token&&(this._token=setTimeout((function(){n._token=-1,e()}),t))}}]),e}(),Cg=function(){function e(){u(this,e),this.disposable=void 0,this.isDisposed=!1}return h(e,[{key:"cancel",value:function(){var e;null===(e=this.disposable)||void 0===e||e.dispose(),this.disposable=void 0}},{key:"cancelAndSet",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:globalThis;if(this.isDisposed)throw new Lu("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();var r=i.setInterval((function(){e()}),t);this.disposable=Mu((function(){i.clearInterval(r),n.disposable=void 0}))}},{key:"dispose",value:function(){this.cancel(),this.isDisposed=!0}}]),e}(),Sg=function(){function e(t,n){u(this,e),this.timeoutToken=-1,this.runner=t,this.timeout=n,this.timeoutHandler=this.onTimeout.bind(this)}return h(e,[{key:"dispose",value:function(){this.cancel(),this.runner=null}},{key:"cancel",value:function(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}},{key:"schedule",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}},{key:"delay",get:function(){return this.timeout},set:function(e){this.timeout=e}},{key:"isScheduled",value:function(){return-1!==this.timeoutToken}},{key:"onTimeout",value:function(){this.timeoutToken=-1,this.runner&&this.doRun()}},{key:"doRun",value:function(){var e;null===(e=this.runner)||void 0===e||e.call(this)}}]),e}();kg="function"!=typeof globalThis.requestIdleCallback||"function"!=typeof globalThis.cancelIdleCallback?function(e,t){Ds((function(){if(!n){var e=Date.now()+15,i={didTimeout:!0,timeRemaining:function(){return Math.max(0,e-Date.now())}};t(Object.freeze(i))}}));var n=!1;return{dispose:function(){n||(n=!0)}}}:function(e,t,n){var i=e.requestIdleCallback(t,"number"==typeof n?{timeout:n}:void 0),r=!1;return{dispose:function(){r||(r=!0,e.cancelIdleCallback(i))}}},bg=function(e){return kg(globalThis,e)};var xg,Lg=function(){function e(t,n){var i=this;u(this,e),this._didRun=!1,this._executor=function(){try{i._value=n()}catch(e){i._error=e}finally{i._didRun=!0}},this._handle=kg(t,(function(){return i._executor()}))}return h(e,[{key:"dispose",value:function(){this._handle.dispose()}},{key:"value",get:function(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}},{key:"isInitialized",get:function(){return this._didRun}}]),e}(),Dg=function(e){function t(e){return u(this,t),l(this,t,[globalThis,e])}return p(t,e),t}(Lg),Ng=function(){function e(){var t=this;u(this,e),this.p=new Promise((function(e,n){t.completeCallback=e,t.errorCallback=n}))}return h(e,[{key:"isRejected",get:function(){var e;return 1===(null===(e=this.outcome)||void 0===e?void 0:e.outcome)}},{key:"isSettled",get:function(){return!!this.outcome}},{key:"complete",value:function(e){var t=this;return new Promise((function(n){t.completeCallback(e),t.outcome={outcome:0,value:e},n()}))}},{key:"error",value:function(e){var t=this;return new Promise((function(n){t.errorCallback(e),t.outcome={outcome:1,value:e},n()}))}},{key:"cancel",value:function(){return this.error(new bu)}}]),e}();!function(e){function t(){return t=s((function(e){var t,n;return E(this,(function(i){switch(i.label){case 0:return t=void 0,[4,Promise.all(e.map((function(e){return e.then((function(e){return e}),(function(e){t||(t=e)}))})))];case 1:if(n=i.sent(),void 0!==t)throw t;return[2,n]}}))})),t.apply(this,arguments)}e.settled=function(e){return t.apply(this,arguments)},e.withAsyncBody=function(e){return new Promise(function(){var t=s((function(t,n){var i;return E(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e(t,n)];case 1:return r.sent(),[3,3];case 2:return i=r.sent(),n(i),[3,3];case 3:return[2]}}))}));return function(e,n){return t.apply(this,arguments)}}())}}(xg||(xg={}));var Ig=Symbol.asyncIterator,Eg=function(){function e(t,n){u(this,e);var i=this;this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new Zu,queueMicrotask(s((function(){var e,n;return E(this,(function(r){switch(r.label){case 0:e={emitOne:function(e){return i.emitOne(e)},emitMany:function(e){return i.emitMany(e)},reject:function(e){return i.reject(e)}},r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,Promise.resolve(t(e))];case 2:return r.sent(),i.resolve(),[3,5];case 3:return n=r.sent(),i.reject(n),[3,5];case 4:return e.emitOne=void 0,e.emitMany=void 0,e.reject=void 0,[7];case 5:return[2]}}))})))}return h(e,[{key:Ig,value:function(){var e=0,t=this;return{next:s((function(){return E(this,(function(n){switch(n.label){case 0:if(2===t._state)throw t._error;return e<t._results.length?[2,{done:!1,value:t._results[e++]}]:1===t._state?[2,{done:!0,value:void 0}]:[4,Au.toPromise(t._onStateChanged.event)];case 1:n.sent(),n.label=2;case 2:return[3,0];case 3:return[2]}}))})),return:s((function(){var e,n;return E(this,(function(i){return null===(e=(n=t)._onReturn)||void 0===e||e.call(n),[2,{done:!0,value:void 0}]}))}))}}},{key:"map",value:function(t){return e.map(this,t)}},{key:"filter",value:function(t){return e.filter(this,t)}},{key:"coalesce",value:function(){return e.coalesce(this)}},{key:"toPromise",value:function(){return e.toPromise(this)}},{key:"emitOne",value:function(e){0===this._state&&(this._results.push(e),this._onStateChanged.fire())}},{key:"emitMany",value:function(e){0===this._state&&(this._results=this._results.concat(e),this._onStateChanged.fire())}},{key:"resolve",value:function(){0===this._state&&(this._state=1,this._onStateChanged.fire())}},{key:"reject",value:function(e){0===this._state&&(this._state=2,this._error=e,this._onStateChanged.fire())}}],[{key:"fromArray",value:function(t){return new e((function(e){e.emitMany(t)}))}},{key:"fromPromise",value:function(t){return new e(function(){var e=s((function(e){var n;return E(this,(function(i){switch(i.label){case 0:return n=e.emitMany,[4,t];case 1:return n.apply(e,[i.sent()]),[2]}}))}));return function(t){return e.apply(this,arguments)}}())}},{key:"fromPromises",value:function(t){return new e(function(){var e=s((function(e){return E(this,(function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(){var t=s((function(t){var n;return E(this,(function(i){switch(i.label){case 0:return n=e.emitOne,[4,t];case 1:return[2,n.apply(e,[i.sent()])]}}))}));return function(e){return t.apply(this,arguments)}}()))];case 1:return n.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}())}},{key:"merge",value:function(t){return new e(function(){var e=s((function(e){return E(this,(function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(){var t=s((function(t){var n,i,o,a,s,l,u,c;return E(this,(function(d){switch(d.label){case 0:n=!1,i=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),a=r(t),d.label=2;case 2:return[4,a.next()];case 3:if(!(n=!(s=d.sent()).done))return[3,5];l=s.value,u=l,e.emitOne(u),d.label=4;case 4:return n=!1,[3,2];case 5:return[3,12];case 6:return c=d.sent(),i=!0,o=c,[3,12];case 7:return d.trys.push([7,,10,11]),n&&null!=a.return?[4,a.return()]:[3,9];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(i)throw o;return[7];case 11:return[7];case 12:return[2]}}))}));return function(e){return t.apply(this,arguments)}}()))];case 1:return n.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}())}},{key:"map",value:function(t,n){return new e(function(){var e=s((function(e){var i,o,a,s,l,u,c,d;return E(this,(function(h){switch(h.label){case 0:i=!1,o=!1,h.label=1;case 1:h.trys.push([1,6,7,12]),s=r(t),h.label=2;case 2:return[4,s.next()];case 3:if(!(i=!(l=h.sent()).done))return[3,5];u=l.value,c=u,e.emitOne(n(c)),h.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return d=h.sent(),o=!0,a=d,[3,12];case 7:return h.trys.push([7,,10,11]),i&&null!=s.return?[4,s.return()]:[3,9];case 8:h.sent(),h.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}}))}));return function(t){return e.apply(this,arguments)}}())}},{key:"filter",value:function(t,n){return new e(function(){var e=s((function(e){var i,o,a,s,l,u,c,d;return E(this,(function(h){switch(h.label){case 0:i=!1,o=!1,h.label=1;case 1:h.trys.push([1,6,7,12]),s=r(t),h.label=2;case 2:return[4,s.next()];case 3:if(!(i=!(l=h.sent()).done))return[3,5];u=l.value,n(c=u)&&e.emitOne(c),h.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return d=h.sent(),o=!0,a=d,[3,12];case 7:return h.trys.push([7,,10,11]),i&&null!=s.return?[4,s.return()]:[3,9];case 8:h.sent(),h.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}}))}));return function(t){return e.apply(this,arguments)}}())}},{key:"coalesce",value:function(t){return e.filter(t,(function(e){return!!e}))}},{key:"toPromise",value:function(e){return s((function(){var t,n,i,o,a,s,l,u,c;return E(this,(function(d){switch(d.label){case 0:t=[],n=!1,i=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),a=r(e),d.label=2;case 2:return[4,a.next()];case 3:if(!(n=!(s=d.sent()).done))return[3,5];l=s.value,u=l,t.push(u),d.label=4;case 4:return n=!1,[3,2];case 5:return[3,12];case 6:return c=d.sent(),i=!0,o=c,[3,12];case 7:return d.trys.push([7,,10,11]),n&&null!=a.return?[4,a.return()]:[3,9];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(i)throw o;return[7];case 11:return[7];case 12:return[2,t]}}))}))()}}]),e}();Eg.EMPTY=Eg.fromArray([]);var Mg=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[n]))._source=e,i}return p(t,e),h(t,[{key:"cancel",value:function(){this._source.cancel()}}]),t}(Eg);var Tg=Object.entries,Rg=Object.setPrototypeOf,Ag=Object.isFrozen,Pg=Object.getPrototypeOf,Og=Object.getOwnPropertyDescriptor,Fg=Object.freeze,Wg=Object.seal,Bg=Object.create,Hg="undefined"!=typeof Reflect&&Reflect,Vg=Hg.apply,zg=Hg.construct;Fg||(Fg=function(e){return e}),Wg||(Wg=function(e){return e}),Vg||(Vg=function(e,t,n){return e.apply(t,n)}),zg||(zg=function(e,t){return c(e,x(t))});var Ug=tv(Array.prototype.forEach),jg=tv(Array.prototype.pop),Kg=tv(Array.prototype.push),qg=tv(String.prototype.toLowerCase),Gg=tv(String.prototype.toString),Zg=tv(String.prototype.match),Yg=tv(String.prototype.replace),Qg=tv(String.prototype.indexOf),Xg=tv(String.prototype.trim),$g=tv(Object.prototype.hasOwnProperty),Jg=tv(RegExp.prototype.test),ev=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return zg(e,n)}}(TypeError);function tv(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return Vg(e,t,i)}}function nv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qg;Rg&&Rg(e,null);for(var i=t.length;i--;){var r=t[i];if("string"==typeof r){var o=n(r);o!==r&&(Ag(t)||(t[i]=o),r=o)}e[r]=!0}return e}function iv(e){for(var t=0;t<e.length;t++){$g(e,t)||(e[t]=null)}return e}function rv(e){var t=Bg(null),n=!0,i=!1,r=void 0;try{for(var o,a=Tg(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2),l=s[0],u=s[1];$g(e,l)&&(Array.isArray(u)?t[l]=iv(u):u&&"object"===(void 0===u?"undefined":L(u))&&u.constructor===Object?t[l]=rv(u):t[l]=u)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}function ov(e,t){for(;null!==e;){var n=Og(e,t);if(n){if(n.get)return tv(n.get);if("function"==typeof n.value)return tv(n.value)}e=Pg(e)}return function(){return null}}var av=Fg(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),sv=Fg(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),lv=Fg(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),uv=Fg(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),cv=Fg(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),dv=Fg(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),hv=Fg(["#text"]),fv=Fg(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),gv=Fg(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),vv=Fg(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),pv=Fg(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mv=Wg(/\{\{[\w\W]*|[\w\W]*\}\}/gm),yv=Wg(/<%[\w\W]*|[\w\W]*%>/gm),_v=Wg(/\${[\w\W]*}/gm),bv=Wg(/^data-[\-\w.\u00B7-\uFFFF]/),kv=Wg(/^aria-[\-\w]+$/),wv=Wg(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Cv=Wg(/^(?:\w+script|data):/i),Sv=Wg(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),xv=Wg(/^html$/i),Lv=Wg(/^[a-z][.\w]*(-[.\w]+)+$/i),Dv=Object.freeze({__proto__:null,MUSTACHE_EXPR:mv,ERB_EXPR:yv,TMPLIT_EXPR:_v,DATA_ATTR:bv,ARIA_ATTR:kv,IS_ALLOWED_URI:wv,IS_SCRIPT_OR_DATA:Cv,ATTR_WHITESPACE:Sv,DOCTYPE_NAME:xv,CUSTOM_ELEMENT:Lv}),Nv=1,Iv=3,Ev=7,Mv=8,Tv=9;var Rv=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,n=function(t){return e(t)};if(n.version="3.1.7",n.removed=[],!t||!t.document||t.document.nodeType!==Tv)return n.isSupported=!1,n;var i,r=t.document,o=r,a=o.currentScript,s=t.DocumentFragment,l=t.HTMLTemplateElement,u=t.Node,c=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,f=void 0===h?t.NamedNodeMap||t.MozNamedAttrMap:h,g=t.HTMLFormElement,v=t.DOMParser,p=t.trustedTypes,m=c.prototype,y=ov(m,"cloneNode"),_=ov(m,"remove"),b=ov(m,"nextSibling"),k=ov(m,"childNodes"),w=ov(m,"parentNode");if("function"==typeof l){var C=r.createElement("template");C.content&&C.content.ownerDocument&&(r=C.content.ownerDocument)}var S="",D=r.implementation,N=r.createNodeIterator,I=r.createDocumentFragment,E=r.getElementsByTagName,M=o.importNode,T={};n.isSupported="function"==typeof Tg&&"function"==typeof w&&D&&void 0!==D.createHTMLDocument;var R=Dv.MUSTACHE_EXPR,A=Dv.ERB_EXPR,P=Dv.TMPLIT_EXPR,O=Dv.DATA_ATTR,F=Dv.ARIA_ATTR,W=Dv.IS_SCRIPT_OR_DATA,B=Dv.ATTR_WHITESPACE,H=Dv.CUSTOM_ELEMENT,V=Dv.IS_ALLOWED_URI,z=null,U=nv({},x(av).concat(x(sv),x(lv),x(cv),x(hv))),j=null,K=nv({},x(fv).concat(x(gv),x(vv),x(pv))),q=Object.seal(Bg(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),G=null,Z=null,Y=!0,Q=!0,X=!1,$=!0,J=!1,ee=!0,te=!1,ne=!1,ie=!1,re=!1,oe=!1,ae=!1,se=!0,le=!1,ue=!0,ce=!1,de={},he=null,fe=nv({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ge=null,ve=nv({},["audio","video","img","source","image","track"]),pe=null,me=nv({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ye="http://www.w3.org/1998/Math/MathML",_e="http://www.w3.org/2000/svg",be="http://www.w3.org/1999/xhtml",ke=be,we=!1,Ce=null,Se=nv({},[ye,_e,be],Gg),xe=null,Le=["application/xhtml+xml","text/html"],De=null,Ne=null,Ie=r.createElement("form"),Ee=function(e){return e instanceof RegExp||e instanceof Function},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ne||Ne!==e){if(e&&"object"===(void 0===e?"undefined":L(e))||(e={}),e=rv(e),xe=-1===Le.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,De="application/xhtml+xml"===xe?Gg:qg,z=$g(e,"ALLOWED_TAGS")?nv({},e.ALLOWED_TAGS,De):U,j=$g(e,"ALLOWED_ATTR")?nv({},e.ALLOWED_ATTR,De):K,Ce=$g(e,"ALLOWED_NAMESPACES")?nv({},e.ALLOWED_NAMESPACES,Gg):Se,pe=$g(e,"ADD_URI_SAFE_ATTR")?nv(rv(me),e.ADD_URI_SAFE_ATTR,De):me,ge=$g(e,"ADD_DATA_URI_TAGS")?nv(rv(ve),e.ADD_DATA_URI_TAGS,De):ve,he=$g(e,"FORBID_CONTENTS")?nv({},e.FORBID_CONTENTS,De):fe,G=$g(e,"FORBID_TAGS")?nv({},e.FORBID_TAGS,De):{},Z=$g(e,"FORBID_ATTR")?nv({},e.FORBID_ATTR,De):{},de=!!$g(e,"USE_PROFILES")&&e.USE_PROFILES,Y=!1!==e.ALLOW_ARIA_ATTR,Q=!1!==e.ALLOW_DATA_ATTR,X=e.ALLOW_UNKNOWN_PROTOCOLS||!1,$=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,J=e.SAFE_FOR_TEMPLATES||!1,ee=!1!==e.SAFE_FOR_XML,te=e.WHOLE_DOCUMENT||!1,re=e.RETURN_DOM||!1,oe=e.RETURN_DOM_FRAGMENT||!1,ae=e.RETURN_TRUSTED_TYPE||!1,ie=e.FORCE_BODY||!1,se=!1!==e.SANITIZE_DOM,le=e.SANITIZE_NAMED_PROPS||!1,ue=!1!==e.KEEP_CONTENT,ce=e.IN_PLACE||!1,V=e.ALLOWED_URI_REGEXP||wv,ke=e.NAMESPACE||be,q=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Ee(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Ee(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(q.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),J&&(Q=!1),oe&&(re=!0),de&&(z=nv({},hv),j=[],!0===de.html&&(nv(z,av),nv(j,fv)),!0===de.svg&&(nv(z,sv),nv(j,gv),nv(j,pv)),!0===de.svgFilters&&(nv(z,lv),nv(j,gv),nv(j,pv)),!0===de.mathMl&&(nv(z,cv),nv(j,vv),nv(j,pv))),e.ADD_TAGS&&(z===U&&(z=rv(z)),nv(z,e.ADD_TAGS,De)),e.ADD_ATTR&&(j===K&&(j=rv(j)),nv(j,e.ADD_ATTR,De)),e.ADD_URI_SAFE_ATTR&&nv(pe,e.ADD_URI_SAFE_ATTR,De),e.FORBID_CONTENTS&&(he===fe&&(he=rv(he)),nv(he,e.FORBID_CONTENTS,De)),ue&&(z["#text"]=!0),te&&nv(z,["html","head","body"]),z.table&&(nv(z,["tbody"]),delete G.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw ev('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw ev('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');i=e.TRUSTED_TYPES_POLICY,S=i.createHTML("")}else void 0===i&&(i=function(e,t){if("object"!==(void 0===e?"undefined":L(e))||"function"!=typeof e.createPolicy)return null;var n=null,i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(p,a)),null!==i&&"string"==typeof S&&(S=i.createHTML(""));Fg&&Fg(e),Ne=e}},Te=nv({},["mi","mo","mn","ms","mtext"]),Re=nv({},["annotation-xml"]),Ae=nv({},["title","style","font","a","script"]),Pe=nv({},x(sv).concat(x(lv),x(uv))),Oe=nv({},x(cv).concat(x(dv))),Fe=function(e){Kg(n.removed,{element:e});try{w(e).removeChild(e)}catch(n){_(e)}},We=function(e,t){try{Kg(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){Kg(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!j[e])if(re||oe)try{Fe(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Be=function(e){var t=null,n=null;if(ie)e="<remove></remove>"+e;else{var o=Zg(e,/^[\r\n\t ]+/);n=o&&o[0]}"application/xhtml+xml"===xe&&ke===be&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var a=i?i.createHTML(e):e;if(ke===be)try{t=(new v).parseFromString(a,xe)}catch(e){}if(!t||!t.documentElement){t=D.createDocument(ke,"template",null);try{t.documentElement.innerHTML=we?S:a}catch(e){}}var s=t.body||t.documentElement;return e&&n&&s.insertBefore(r.createTextNode(n),s.childNodes[0]||null),ke===be?E.call(t,te?"html":"body")[0]:te?t.documentElement:s},He=function(e){return N.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Ve=function(e){return e instanceof g&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof f)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},ze=function(e){return"function"==typeof u&&e instanceof u},Ue=function(e,t,i){T[e]&&Ug(T[e],(function(e){e.call(n,t,i,Ne)}))},je=function(e){var t=null;if(Ue("beforeSanitizeElements",e,null),Ve(e))return Fe(e),!0;var i=De(e.nodeName);if(Ue("uponSanitizeElement",e,{tagName:i,allowedTags:z}),e.hasChildNodes()&&!ze(e.firstElementChild)&&Jg(/<[/\w]/g,e.innerHTML)&&Jg(/<[/\w]/g,e.textContent))return Fe(e),!0;if(e.nodeType===Ev)return Fe(e),!0;if(ee&&e.nodeType===Mv&&Jg(/<[/\w]/g,e.data))return Fe(e),!0;if(!z[i]||G[i]){if(!G[i]&&qe(i)){if(q.tagNameCheck instanceof RegExp&&Jg(q.tagNameCheck,i))return!1;if(q.tagNameCheck instanceof Function&&q.tagNameCheck(i))return!1}if(ue&&!he[i]){var r=w(e)||e.parentNode,o=k(e)||e.childNodes;if(o&&r)for(var a=o.length-1;a>=0;--a){var s=y(o[a],!0);s.__removalCount=(e.__removalCount||0)+1,r.insertBefore(s,b(e))}}return Fe(e),!0}return e instanceof c&&!function(e){var t=w(e);t&&t.tagName||(t={namespaceURI:ke,tagName:"template"});var n=qg(e.tagName),i=qg(t.tagName);return!!Ce[e.namespaceURI]&&(e.namespaceURI===_e?t.namespaceURI===be?"svg"===n:t.namespaceURI===ye?"svg"===n&&("annotation-xml"===i||Te[i]):Boolean(Pe[n]):e.namespaceURI===ye?t.namespaceURI===be?"math"===n:t.namespaceURI===_e?"math"===n&&Re[i]:Boolean(Oe[n]):e.namespaceURI===be?!(t.namespaceURI===_e&&!Re[i])&&!(t.namespaceURI===ye&&!Te[i])&&!Oe[n]&&(Ae[n]||!Pe[n]):!("application/xhtml+xml"!==xe||!Ce[e.namespaceURI]))}(e)?(Fe(e),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!Jg(/<\/no(script|embed|frames)/i,e.innerHTML)?(J&&e.nodeType===Iv&&(t=e.textContent,Ug([R,A,P],(function(e){t=Yg(t,e," ")})),e.textContent!==t&&(Kg(n.removed,{element:e.cloneNode()}),e.textContent=t)),Ue("afterSanitizeElements",e,null),!1):(Fe(e),!0)},Ke=function(e,t,n){if(se&&("id"===t||"name"===t)&&(n in r||n in Ie))return!1;if(Q&&!Z[t]&&Jg(O,t));else if(Y&&Jg(F,t));else if(!j[t]||Z[t]){if(!(qe(e)&&(q.tagNameCheck instanceof RegExp&&Jg(q.tagNameCheck,e)||q.tagNameCheck instanceof Function&&q.tagNameCheck(e))&&(q.attributeNameCheck instanceof RegExp&&Jg(q.attributeNameCheck,t)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(t))||"is"===t&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&Jg(q.tagNameCheck,n)||q.tagNameCheck instanceof Function&&q.tagNameCheck(n))))return!1}else if(pe[t]);else if(Jg(V,Yg(n,B,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Qg(n,"data:")||!ge[e]){if(X&&!Jg(W,Yg(n,B,"")));else if(n)return!1}else;return!0},qe=function(e){return"annotation-xml"!==e&&Zg(e,H)},Ge=function(e){var t=function(){var t=r[a],s=t.name,l=t.namespaceURI,u=t.value,c=De(s),d="value"===s?u:Xg(u);if(o.attrName=c,o.attrValue=d,o.keepAttr=!0,o.forceKeepAttr=void 0,Ue("uponSanitizeAttribute",e,o),d=o.attrValue,o.forceKeepAttr)return"continue";if(We(s,e),!o.keepAttr)return"continue";if(!$&&Jg(/\/>/i,d))return We(s,e),"continue";J&&Ug([R,A,P],(function(e){d=Yg(d,e," ")}));var h=De(e.nodeName);if(!Ke(h,c,d))return"continue";if(!le||"id"!==c&&"name"!==c||(We(s,e),d="user-content-"+d),ee&&Jg(/((--!?|])>)|<\/(style|title)/i,d))return We(s,e),"continue";if(i&&"object"===(void 0===p?"undefined":L(p))&&"function"==typeof p.getAttributeType)if(l);else switch(p.getAttributeType(h,c)){case"TrustedHTML":d=i.createHTML(d);break;case"TrustedScriptURL":d=i.createScriptURL(d)}try{l?e.setAttributeNS(l,s,d):e.setAttribute(s,d),Ve(e)?Fe(e):jg(n.removed)}catch(e){}};Ue("beforeSanitizeAttributes",e,null);var r=e.attributes;if(r){for(var o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:j},a=r.length;a--;)t();Ue("afterSanitizeAttributes",e,null)}},Ze=function e(t){var n=null,i=He(t);for(Ue("beforeSanitizeShadowDOM",t,null);n=i.nextNode();)Ue("uponSanitizeShadowNode",n,null),je(n)||(n.content instanceof s&&e(n.content),Ge(n));Ue("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,a=null,l=null,c=null;if((we=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!ze(e)){if("function"!=typeof e.toString)throw ev("toString is not a function");if("string"!=typeof(e=e.toString()))throw ev("dirty is not a string, aborting")}if(!n.isSupported)return e;if(ne||Me(t),n.removed=[],"string"==typeof e&&(ce=!1),ce){if(e.nodeName){var d=De(e.nodeName);if(!z[d]||G[d])throw ev("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof u)(a=(r=Be("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType===Nv&&"BODY"===a.nodeName||"HTML"===a.nodeName?r=a:r.appendChild(a);else{if(!re&&!J&&!te&&-1===e.indexOf("<"))return i&&ae?i.createHTML(e):e;if(!(r=Be(e)))return re?null:ae?S:""}r&&ie&&Fe(r.firstChild);for(var h=He(ce?e:r);l=h.nextNode();)je(l)||(l.content instanceof s&&Ze(l.content),Ge(l));if(ce)return e;if(re){if(oe)for(c=I.call(r.ownerDocument);r.firstChild;)c.appendChild(r.firstChild);else c=r;return(j.shadowroot||j.shadowrootmode)&&(c=M.call(o,c,!0)),c}var f=te?r.outerHTML:r.innerHTML;return te&&z["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&Jg(xv,r.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+f),J&&Ug([R,A,P],(function(e){f=Yg(f,e," ")})),i&&ae?i.createHTML(f):f},n.setConfig=function(){Me(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),ne=!0},n.clearConfig=function(){Ne=null,ne=!1},n.isValidAttribute=function(e,t,n){Ne||Me({});var i=De(e),r=De(t);return Ke(i,r,n)},n.addHook=function(e,t){"function"==typeof t&&(T[e]=T[e]||[],Kg(T[e],t))},n.removeHook=function(e){if(T[e])return jg(T[e])},n.removeHooks=function(e){T[e]&&(T[e]=[])},n.removeAllHooks=function(){T={}},n}();Rv.version,Rv.isSupported;var Av=Rv.sanitize;Rv.setConfig,Rv.clearConfig,Rv.isValidAttribute;var Pv,Ov=Rv.addHook,Fv=Rv.removeHook;function Wv(e,t){return ed.isUri(e)?uf(e.scheme,t):cf(e,t+":")}function Bv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.some((function(t){return Wv(e,t)}))}Rv.removeHooks,Rv.removeAllHooks,function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output"}(Pv||(Pv={}));var Hv=function(){function e(){u(this,e),this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}return h(e,[{key:"setPreferredWebSchema",value:function(e){this._preferredWebSchema=e}},{key:"_remoteResourcesPath",get:function(){return Wc.join(this._serverRootPath,Pv.vscodeRemoteResource)}},{key:"rewrite",value:function(e){if(this._delegate)try{return this._delegate(e)}catch(t){return vu(t),e}var t=e.authority,n=this._hosts[t];n&&-1!==n.indexOf(":")&&-1===n.indexOf("[")&&(n="[".concat(n,"]"));var i=this._ports[t],r=this._connectionTokens[t],o="path=".concat(encodeURIComponent(e.path));return"string"==typeof r&&(o+="&".concat("tkn","=").concat(encodeURIComponent(r))),ed.from({scheme:bs?this._preferredWebSchema:Pv.vscodeRemoteResource,authority:"".concat(n,":").concat(i),path:this._remoteResourcesPath,query:o})}}]),e}(),Vv=new Hv,zv=function(){function e(){u(this,e)}return h(e,[{key:"asBrowserUri",value:function(e){var t=this.toUri(e);return this.uriToBrowserUri(t)}},{key:"uriToBrowserUri",value:function(t){return t.scheme===Pv.vscodeRemote?Vv.rewrite(t):t.scheme!==Pv.file||!_s&&ks!=="".concat(Pv.vscodeFileResource,"://").concat(e.FALLBACK_AUTHORITY)?t:t.with({scheme:Pv.vscodeFileResource,authority:t.authority||e.FALLBACK_AUTHORITY,query:null,fragment:null})}},{key:"toUri",value:function(e,t){if(ed.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){var n=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(n))return ed.joinPath(ed.parse(n,!0),e);var i=Hc(n,e);return ed.file(i)}return ed.parse(t.toUrl(e))}}]),e}();zv.FALLBACK_AUTHORITY="vscode-app";var Uv,jv=new zv;function Kv(e){return qv(e,0)}function qv(e,t){switch(void 0===e?"undefined":L(e)){case"object":return null===e?Gv(349,t):Array.isArray(e)?function(e,t){return t=Gv(104579,t),e.reduce((function(e,t){return qv(t,e)}),t)}(e,t):function(e,t){return t=Gv(181387,t),Object.keys(e).sort().reduce((function(t,n){return t=Zv(n,t),qv(e[n],t)}),t)}(e,t);case"string":return Zv(e,t);case"boolean":return function(e,t){return Gv(e?433:863,t)}(e,t);case"number":return Gv(e,t);case"undefined":return Gv(937,t);default:return Gv(617,t)}}function Gv(e,t){return(t<<5)-t+e|0}function Zv(e,t){t=Gv(149417,t);for(var n=0,i=e.length;n<i;n++)t=Gv(e.charCodeAt(n),t);return t}function Yv(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:32)-t;return(e<<t|(~((1<<n)-1)&e)>>>n)>>>0}function Qv(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=0;r<n;r++)e[t+r]=i}function Xv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join(""):function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";e.length<t;)e=n+e;return e}((e>>>0).toString(16),t/4)}!function(e){var t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));var n="vscode-coi";e.getHeadersFromQuery=function(e){var i;"string"==typeof e?i=new URL(e).searchParams:e instanceof URL?i=e.searchParams:ed.isUri(e)&&(i=new URL(e.toString(!0)).searchParams);var r=null==i?void 0:i.get(n);if(r)return t.get(r)},e.addSearchParam=function(e,t,i){if(globalThis.crossOriginIsolated){var r=t&&i?"3":i?"2":"1";e instanceof URLSearchParams?e.set(n,r):e[n]=r}}}(Uv||(Uv={}));var $v=function(){function e(){u(this,e),this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}return h(e,[{key:"update",value:function(e){var t=e.length;if(0!==t){var n,i,r=this._buff,o=this._buffLen,a=this._leftoverHighSurrogate;for(0!==a?(n=a,i=-1,a=0):(n=e.charCodeAt(0),i=0);;){var s=n;if(ff(n)){if(!(i+1<t)){a=n;break}var l=e.charCodeAt(i+1);gf(l)?(i++,s=vf(n,l)):s=65533}else gf(n)&&(s=65533);if(o=this._push(r,o,s),!(++i<t))break;n=e.charCodeAt(i)}this._buffLen=o,this._leftoverHighSurrogate=a}}},{key:"_push",value:function(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(1984&n)>>>6,e[t++]=128|(63&n)>>>0):n<65536?(e[t++]=224|(61440&n)>>>12,e[t++]=128|(4032&n)>>>6,e[t++]=128|(63&n)>>>0):(e[t++]=240|(1835008&n)>>>18,e[t++]=128|(258048&n)>>>12,e[t++]=128|(4032&n)>>>6,e[t++]=128|(63&n)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}},{key:"digest",value:function(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Xv(this._h0)+Xv(this._h1)+Xv(this._h2)+Xv(this._h3)+Xv(this._h4)}},{key:"_wrapUp",value:function(){this._buff[this._buffLen++]=128,Qv(this._buff,this._buffLen),this._buffLen>56&&(this._step(),Qv(this._buff));var e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}},{key:"_step",value:function(){for(var t=e._bigBlock32,n=this._buffDV,i=0;i<64;i+=4)t.setUint32(i,n.getUint32(i,!1),!1);for(var r=64;r<320;r+=4)t.setUint32(r,Yv(t.getUint32(r-12,!1)^t.getUint32(r-32,!1)^t.getUint32(r-56,!1)^t.getUint32(r-64,!1),1),!1);for(var o,a,s,l=this._h0,u=this._h1,c=this._h2,d=this._h3,h=this._h4,f=0;f<80;f++)f<20?(o=u&c|~u&d,a=1518500249):f<40?(o=u^c^d,a=1859775393):f<60?(o=u&c|u&d|c&d,a=2400959708):(o=u^c^d,a=3395469782),s=Yv(l,5)+o+h+a+t.getUint32(4*f,!1)&4294967295,h=d,d=c,c=Yv(u,30),u=l,l=s;this._h0=this._h0+l&4294967295,this._h1=this._h1+u&4294967295,this._h2=this._h2+c&4294967295,this._h3=this._h3+d&4294967295,this._h4=this._h4+h&4294967295}}]),e}();$v._bigBlock32=new DataView(new ArrayBuffer(320));var Jv=function(){var e=new Map;!function(e,t){var n=e;"number"!=typeof n.vscodeWindowId&&Object.defineProperty(n,"vscodeWindowId",{get:function(){return t}})}(Fh,1);var t={window:Fh,disposables:new Tu};e.set(Fh.vscodeWindowId,t);var n=new Zu,i=new Zu,r=new Zu;return{onDidRegisterWindow:n.event,onWillUnregisterWindow:r.event,onDidUnregisterWindow:i.event,registerWindow:function(t){if(e.has(t.vscodeWindowId))return Ru.None;var o=new Tu,a={window:t,disposables:o.add(new Tu)};return e.set(t.vscodeWindowId,a),o.add(Mu((function(){e.delete(t.vscodeWindowId),i.fire(t)}))),o.add(cp(t,rm.BEFORE_UNLOAD,(function(){r.fire(t)}))),n.fire(a),o},getWindows:function(){return e.values()},getWindowsCount:function(){return e.size},getWindowId:function(e){return e.vscodeWindowId},hasWindow:function(t){return e.has(t)},getWindowById:function(n,i){var r="number"==typeof n?e.get(n):void 0;return null!=r?r:i?t:void 0},getWindow:function(e){var t,n=e;if(null==n||null===(t=n.ownerDocument)||void 0===t?void 0:t.defaultView)return n.ownerDocument.defaultView.window;var i=e;return(null==i?void 0:i.view)?i.view.window:Fh},getDocument:function(e){return ep(e).document}}}(),ep=(Jv.registerWindow,Jv.getWindow),tp=(Jv.getDocument,Jv.getWindows),np=Jv.getWindowsCount,ip=Jv.getWindowId,rp=Jv.getWindowById,op=(Jv.hasWindow,Jv.onDidRegisterWindow),ap=Jv.onWillUnregisterWindow,sp=Jv.onDidUnregisterWindow;function lp(e){for(;e.firstChild;)e.firstChild.remove()}var up=function(){function e(t,n,i,r){u(this,e),this._node=t,this._type=n,this._handler=i,this._options=r||!1,this._node.addEventListener(this._type,this._handler,this._options)}return h(e,[{key:"dispose",value:function(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}]),e}();function cp(e,t,n,i){return new up(e,t,n,i)}function dp(e,t){return function(n){return t(new lg(e,n))}}var hp=function(e,t,n,i){var r=n;return"click"===t||"mousedown"===t||"contextmenu"===t?r=dp(ep(e),n):"keydown"!==t&&"keypress"!==t&&"keyup"!==t||(r=function(e){return function(t){return e(new rg(t))}}(n)),cp(e,t,r,i)},fp=function(e,t,n){return function(e,t,n){return cp(e,ws&&Qf?rm.POINTER_DOWN:rm.MOUSE_DOWN,t,n)}(e,dp(ep(e),t),n)};function gp(e,t,n){return kg(e,t,n)}var vp,pp,mp=function(e){function t(e,n){return u(this,t),l(this,t,[e,n])}return p(t,e),t}(Lg),yp=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).defaultTarget=e&&ep(e),n}return p(t,e),h(t,[{key:"cancelAndSet",value:function(e,n,i){return g(v(t.prototype),"cancelAndSet",this).call(this,e,n,null!=i?i:this.defaultTarget)}}]),t}(Cg),_p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,e),this._runner=t,this.priority=n,this._canceled=!1}return h(e,[{key:"dispose",value:function(){this._canceled=!0}},{key:"execute",value:function e(){if(!this._canceled)try{this._runner()}catch(e){vu(e)}}}],[{key:"sort",value:function(e,t){return t.priority-e.priority}}]),e}();function bp(e){return ep(e).getComputedStyle(e,null)}function kp(e,t){var n=ep(e),i=n.document;if(e!==i.body)return new Cp(e.clientWidth,e.clientHeight);if(ws&&(null==n?void 0:n.visualViewport))return new Cp(n.visualViewport.width,n.visualViewport.height);if((null==n?void 0:n.innerWidth)&&n.innerHeight)return new Cp(n.innerWidth,n.innerHeight);if(i.body&&i.body.clientWidth&&i.body.clientHeight)return new Cp(i.body.clientWidth,i.body.clientHeight);if(i.documentElement&&i.documentElement.clientWidth&&i.documentElement.clientHeight)return new Cp(i.documentElement.clientWidth,i.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}!function(){var e=new Map,t=new Map,n=new Map,i=new Map,r=function(r){var o;n.set(r,!1);var a=null!==(o=e.get(r))&&void 0!==o?o:[];for(t.set(r,a),e.set(r,[]),i.set(r,!0);a.length>0;){a.sort(_p.sort),a.shift().execute()}i.set(r,!1)};pp=function(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=ip(t),s=new _p(i,o),l=e.get(a);return l||(l=[],e.set(a,l)),l.push(s),n.get(a)||(n.set(a,!0),t.requestAnimationFrame((function(){return r(a)}))),s},vp=function(e,n,r){var o=ip(e);if(i.get(o)){var a=new _p(n,r),s=t.get(o);return s||(s=[],t.set(o,s)),s.push(a),a}return pp(e,n,r)}}();var wp=function(){function e(){u(this,e)}return h(e,null,[{key:"convertToPixels",value:function(e,t){return parseFloat(t)||0}},{key:"getDimension",value:function(t,n,i){var r=bp(t),o=r?r.getPropertyValue(n):"0";return e.convertToPixels(t,o)}},{key:"getBorderLeftWidth",value:function(t){return e.getDimension(t,"border-left-width","borderLeftWidth")}},{key:"getBorderRightWidth",value:function(t){return e.getDimension(t,"border-right-width","borderRightWidth")}},{key:"getBorderTopWidth",value:function(t){return e.getDimension(t,"border-top-width","borderTopWidth")}},{key:"getBorderBottomWidth",value:function(t){return e.getDimension(t,"border-bottom-width","borderBottomWidth")}},{key:"getPaddingLeft",value:function(t){return e.getDimension(t,"padding-left","paddingLeft")}},{key:"getPaddingRight",value:function(t){return e.getDimension(t,"padding-right","paddingRight")}},{key:"getPaddingTop",value:function(t){return e.getDimension(t,"padding-top","paddingTop")}},{key:"getPaddingBottom",value:function(t){return e.getDimension(t,"padding-bottom","paddingBottom")}},{key:"getMarginLeft",value:function(t){return e.getDimension(t,"margin-left","marginLeft")}},{key:"getMarginTop",value:function(t){return e.getDimension(t,"margin-top","marginTop")}},{key:"getMarginRight",value:function(t){return e.getDimension(t,"margin-right","marginRight")}},{key:"getMarginBottom",value:function(t){return e.getDimension(t,"margin-bottom","marginBottom")}}]),e}(),Cp=function(){function e(t,n){u(this,e),this.width=t,this.height=n}return h(e,[{key:"with",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.width,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.height;return t!==this.width||n!==this.height?new e(t,n):this}}],[{key:"is",value:function(e){return"object"===(void 0===e?"undefined":L(e))&&"number"==typeof e.height&&"number"==typeof e.width}},{key:"lift",value:function(t){return t instanceof e?t:new e(t.width,t.height)}},{key:"equals",value:function(e,t){return e===t||!(!e||!t)&&(e.width===t.width&&e.height===t.height)}}]),e}();function Sp(e){for(var t=e.offsetParent,n=e.offsetTop,i=e.offsetLeft;null!==(e=e.parentNode)&&e!==e.ownerDocument.body&&e!==e.ownerDocument.documentElement;){n-=e.scrollTop;var r=Rp(e)?null:bp(e);r&&(i-="rtl"!==r.direction?e.scrollLeft:-e.scrollLeft),e===t&&(i+=wp.getBorderLeftWidth(e),n+=wp.getBorderTopWidth(e),n+=e.offsetTop,i+=e.offsetLeft,t=e.offsetParent)}return{left:i,top:n}}function xp(e){var t=e.getBoundingClientRect(),n=ep(e);return{left:t.left+n.scrollX,top:t.top+n.scrollY,width:t.width,height:t.height}}function Lp(e){var t=e,n=1;do{var i=bp(t).zoom;null!=i&&"1"!==i&&(n*=i),t=t.parentElement}while(null!==t&&t!==t.ownerDocument.documentElement);return n}function Dp(e){var t=wp.getMarginLeft(e)+wp.getMarginRight(e);return e.offsetWidth+t}function Np(e){var t=wp.getBorderLeftWidth(e)+wp.getBorderRightWidth(e),n=wp.getPaddingLeft(e)+wp.getPaddingRight(e);return e.offsetWidth-t-n}function Ip(e){var t=wp.getBorderTopWidth(e)+wp.getBorderBottomWidth(e),n=wp.getPaddingTop(e)+wp.getPaddingBottom(e);return e.offsetHeight-t-n}function Ep(e){var t=wp.getMarginTop(e)+wp.getMarginBottom(e);return e.offsetHeight+t}function Mp(e,t){return Boolean(null==t?void 0:t.contains(e))}function Tp(e,t,n){return!!function(e,t,n){for(;e&&e.nodeType===e.ELEMENT_NODE;){if(e.classList.contains(t))return e;if(n)if("string"==typeof n){if(e.classList.contains(n))return null}else if(e===n)return null;e=e.parentNode}return null}(e,t,n)}function Rp(e){return e&&!!e.host&&!!e.mode}function Ap(e){return!!Pp(e)}function Pp(e){for(;e.parentNode;){var t;if(e===(null===(t=e.ownerDocument)||void 0===t?void 0:t.body))return null;e=e.parentNode}return Rp(e)?e:null}function Op(){for(var e=Bp().activeElement;null==e?void 0:e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Fp(e){return Op()===e}function Wp(e){return Mp(Op(),e)}function Bp(){return np()<=1?Fh.document:null!==(e=Array.from(tp()).map((function(e){return e.window.document})).find((function(e){return e.hasFocus()})))&&void 0!==e?e:Fh.document;var e}function Hp(){var e,t;return null!==(t=null===(e=Bp().defaultView)||void 0===e?void 0:e.window)&&void 0!==t?t:Fh}Cp.None=new Cp(0,0);var Vp=new Map;function zp(){return new Up}var Up=function(){function e(){u(this,e),this._currentCssStyle="",this._styleSheet=void 0}return h(e,[{key:"setStyle",value:function(e){e!==this._currentCssStyle&&(this._currentCssStyle=e,this._styleSheet?this._styleSheet.innerText=e:this._styleSheet=jp(Fh.document.head,(function(t){return t.innerText=e})))}},{key:"dispose",value:function(){this._styleSheet&&(this._styleSheet.remove(),this._styleSheet=void 0)}}]),e}();function jp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fh.document.head,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=document.createElement("style");if(i.type="text/css",i.media="screen",null==t||t(i),e.appendChild(i),n&&n.add(Mu((function(){return i.remove()}))),e===Fh.document.head){var r=new Set;Vp.set(i,r);var o=!0,a=!1,s=void 0;try{for(var l,u=tp()[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=c.window,h=c.disposables;if(d!==Fh){var f=h.add(Kp(i,r,d));null==n||n.add(f)}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}return i}function Kp(e,t,n){var i=new Tu,r=e.cloneNode(!0);n.document.head.appendChild(r),i.add(Mu((function(){return r.remove()})));var o=!0,a=!1,s=void 0;try{for(var l,u=Yp(e)[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c,d,h=l.value;null===(d=r.sheet)||void 0===d||d.insertRule(h.cssText,null===(c=r.sheet)||void 0===c?void 0:c.cssRules.length)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return i.add(qp.observe(e,i,{childList:!0})((function(){r.textContent=e.textContent}))),t.add(r),i.add(Mu((function(){return t.delete(r)}))),i}var qp=new(function(){function e(){u(this,e),this.mutationObservers=new Map}return h(e,[{key:"observe",value:function(e,t,n){var i=this,r=this.mutationObservers.get(e);r||(r=new Map,this.mutationObservers.set(e,r));var o=Kv(n),a=r.get(o);if(a)a.users+=1;else{var s=new Zu,l=new MutationObserver((function(e){return s.fire(e)}));l.observe(e,n);var u=a={users:1,observer:l,onDidMutate:s.event};t.add(Mu((function(){u.users-=1,0===u.users&&(s.dispose(),l.disconnect(),null==r||r.delete(o),0===(null==r?void 0:r.size)&&i.mutationObservers.delete(e))}))),r.set(o,a)}return a.onDidMutate}}]),e}()),Gp=null;function Zp(){return Gp||(Gp=jp()),Gp}function Yp(e){var t,n;return(null==e||null===(t=e.sheet)||void 0===t?void 0:t.rules)?e.sheet.rules:(null==e||null===(n=e.sheet)||void 0===n?void 0:n.cssRules)?e.sheet.cssRules:[]}function Qp(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zp();if(i&&t){var r;null===(n=i.sheet)||void 0===n||n.insertRule("".concat(e," {").concat(t,"}"),0);var o=!0,a=!1,s=void 0;try{for(var l,u=(null!==(r=Vp.get(i))&&void 0!==r?r:[])[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){Qp(e,t,l.value)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}}function Xp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zp();if(t){for(var n,i=Yp(t),r=[],o=0;o<i.length;o++){var a=i[o];$p(a)&&-1!==a.selectorText.indexOf(e)&&r.push(o)}for(var s=r.length-1;s>=0;s--){var l;null===(l=t.sheet)||void 0===l||l.deleteRule(r[s])}var u=!0,c=!1,d=void 0;try{for(var h,f=(null!==(n=Vp.get(t))&&void 0!==n?n:[])[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){Xp(e,h.value)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}}function $p(e){return"string"==typeof e.selectorText}function Jp(e){return e instanceof HTMLElement||e instanceof ep(e).HTMLElement}function em(e){return e instanceof HTMLAnchorElement||e instanceof ep(e).HTMLAnchorElement}function tm(e){return e instanceof SVGElement||e instanceof ep(e).SVGElement}function nm(e){return e instanceof MouseEvent||e instanceof ep(e).MouseEvent}function im(e){return e instanceof KeyboardEvent||e instanceof ep(e).KeyboardEvent}var rm={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:zf?"webkitAnimationStart":"animationstart",ANIMATION_END:zf?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:zf?"webkitAnimationIteration":"animationiteration"};var om=function(e,t){return e.preventDefault(),t&&e.stopPropagation(),e};var am=function(e){function t(e){var n;u(this,t),(n=l(this,t))._onDidFocus=n._register(new Zu),n.onDidFocus=n._onDidFocus.event,n._onDidBlur=n._register(new Zu),n.onDidBlur=n._onDidBlur.event;var i=t.hasFocusWithin(e),r=!1,o=function(){r=!1,i||(i=!0,n._onDidFocus.fire())},a=function(){i&&(r=!0,(Jp(e)?ep(e):e).setTimeout((function(){r&&(r=!1,i=!1,n._onDidBlur.fire())}),0))};return n._refreshStateHandler=function(){t.hasFocusWithin(e)!==i&&(i?a():o())},n._register(cp(e,rm.FOCUS,o,!0)),n._register(cp(e,rm.BLUR,a,!0)),Jp(e)&&(n._register(cp(e,rm.FOCUS_IN,(function(){return n._refreshStateHandler()}))),n._register(cp(e,rm.FOCUS_OUT,(function(){return n._refreshStateHandler()})))),n}return p(t,e),h(t,null,[{key:"hasFocusWithin",value:function(e){if(Jp(e)){var t=Pp(e);return Mp(t?t.activeElement:e.ownerDocument.activeElement,e)}var n=e;return Mp(n.document.activeElement,n.document)}}]),t}(Ru);function sm(e){return new am(e)}function lm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r;if((r=e).append.apply(r,x(n)),1===n.length&&"string"!=typeof n[0])return n[0]}function um(e,t){return e.insertBefore(t,e.firstChild),t}function cm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e.innerText="",lm.apply(void 0,[e].concat(x(n)))}var dm,hm=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;function fm(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];var a,s=hm.exec(t);if(!s)throw new Error("Bad use of emmet");var l,u=s[1]||"div";return l=e!==dm.HTML?document.createElementNS(e,u):document.createElement(u),s[3]&&(l.id=s[3]),s[4]&&(l.className=s[4].replace(/\./g," ").trim()),n&&Object.entries(n).forEach((function(e){var t=C(e,2),n=t[0],i=t[1];void 0!==i&&(/^on\w+$/.test(n)?l[n]=i:"selected"===n?i&&l.setAttribute(n,"true"):l.setAttribute(n,i))})),(a=l).append.apply(a,x(r)),l}function gm(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return fm.apply(void 0,[dm.HTML,e,t].concat(x(i)))}function vm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l.style.display="",l.removeAttribute("aria-hidden")}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}function pm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l.style.display="none",l.setAttribute("aria-hidden","true")}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}function mm(e,t){var n=e.devicePixelRatio*t;return Math.max(1,Math.floor(n))/e.devicePixelRatio}function ym(e){Fh.open(e,"_blank","noopener")}function _m(e){return e?"url('".concat(jv.uriToBrowserUri(e).toString(!0).replace(/'/g,"%27"),"')"):"url('')"}function bm(e){return"'".concat(e.replace(/'/g,"%27"),"'")}function km(e,t){if(void 0!==e){var n=e.match(/^\s*var\((.+)\)$/);if(n){var i=n[1].split(",",2);return 2===i.length&&(t=km(i[1].trim(),t)),"var(".concat(i[0],", ").concat(t,")")}return e}return t}!function(e){e.HTML="http://www.w3.org/1999/xhtml",e.SVG="http://www.w3.org/2000/svg"}(dm||(dm={})),gm.SVG=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return fm.apply(void 0,[dm.SVG,e,t].concat(x(i)))},Vv.setPreferredWebSchema(/^https:/.test(Fh.location.href)?"https":"http");var wm=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]),Cm=function(e){function t(){var e;return u(this,t),(e=l(this,t))._subscriptions=new Tu,e._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},e._subscriptions.add(Au.runAndSubscribe(op,(function(t){var n=t.window,i=t.disposables;return e.registerListeners(n,i)}),{window:Fh,disposables:e._subscriptions})),e}return p(t,e),h(t,[{key:"registerListeners",value:function(e,t){var n=this;t.add(cp(e,"keydown",(function(e){if(!e.defaultPrevented){var t=new rg(e);if(6!==t.keyCode||!e.repeat){if(e.altKey&&!n._keyStatus.altKey)n._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!n._keyStatus.ctrlKey)n._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!n._keyStatus.metaKey)n._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!n._keyStatus.shiftKey)n._keyStatus.lastKeyPressed="shift";else{if(6===t.keyCode)return;n._keyStatus.lastKeyPressed=void 0}n._keyStatus.altKey=e.altKey,n._keyStatus.ctrlKey=e.ctrlKey,n._keyStatus.metaKey=e.metaKey,n._keyStatus.shiftKey=e.shiftKey,n._keyStatus.lastKeyPressed&&(n._keyStatus.event=e,n.fire(n._keyStatus))}}}),!0)),t.add(cp(e,"keyup",(function(e){e.defaultPrevented||(!e.altKey&&n._keyStatus.altKey?n._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&n._keyStatus.ctrlKey?n._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&n._keyStatus.metaKey?n._keyStatus.lastKeyReleased="meta":!e.shiftKey&&n._keyStatus.shiftKey?n._keyStatus.lastKeyReleased="shift":n._keyStatus.lastKeyReleased=void 0,n._keyStatus.lastKeyPressed!==n._keyStatus.lastKeyReleased&&(n._keyStatus.lastKeyPressed=void 0),n._keyStatus.altKey=e.altKey,n._keyStatus.ctrlKey=e.ctrlKey,n._keyStatus.metaKey=e.metaKey,n._keyStatus.shiftKey=e.shiftKey,n._keyStatus.lastKeyReleased&&(n._keyStatus.event=e,n.fire(n._keyStatus)))}),!0)),t.add(cp(e.document.body,"mousedown",(function(){n._keyStatus.lastKeyPressed=void 0}),!0)),t.add(cp(e.document.body,"mouseup",(function(){n._keyStatus.lastKeyPressed=void 0}),!0)),t.add(cp(e.document.body,"mousemove",(function(e){e.buttons&&(n._keyStatus.lastKeyPressed=void 0)}),!0)),t.add(cp(e,"blur",(function(){n.resetKeyStatus()})))}},{key:"keyStatus",get:function(){return this._keyStatus}},{key:"resetKeyStatus",value:function(){this.doResetKeyStatus(),this.fire(this._keyStatus)}},{key:"doResetKeyStatus",value:function(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._subscriptions.dispose()}}],[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}]),t}(Zu),Sm=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).element=e,i.callbacks=n,i.counter=0,i.dragStartTime=0,i.registerListeners(),i}return p(t,e),h(t,[{key:"registerListeners",value:function(){var e=this;this.callbacks.onDragStart&&this._register(cp(this.element,rm.DRAG_START,(function(t){var n,i;null===(n=(i=e.callbacks).onDragStart)||void 0===n||n.call(i,t)}))),this.callbacks.onDrag&&this._register(cp(this.element,rm.DRAG,(function(t){var n,i;null===(n=(i=e.callbacks).onDrag)||void 0===n||n.call(i,t)}))),this._register(cp(this.element,rm.DRAG_ENTER,(function(t){var n,i;e.counter++,e.dragStartTime=t.timeStamp,null===(n=(i=e.callbacks).onDragEnter)||void 0===n||n.call(i,t)}))),this._register(cp(this.element,rm.DRAG_OVER,(function(t){var n,i;t.preventDefault(),null===(n=(i=e.callbacks).onDragOver)||void 0===n||n.call(i,t,t.timeStamp-e.dragStartTime)}))),this._register(cp(this.element,rm.DRAG_LEAVE,(function(t){var n,i;(e.counter--,0===e.counter)&&(e.dragStartTime=0,null===(n=(i=e.callbacks).onDragLeave)||void 0===n||n.call(i,t))}))),this._register(cp(this.element,rm.DRAG_END,(function(t){var n,i;e.counter=0,e.dragStartTime=0,null===(n=(i=e.callbacks).onDragEnd)||void 0===n||n.call(i,t)}))),this._register(cp(this.element,rm.DROP,(function(t){var n,i;e.counter=0,e.dragStartTime=0,null===(n=(i=e.callbacks).onDrop)||void 0===n||n.call(i,t)})))}}]),t}(Ru),xm=RegExp("(?<tag>[\\w\\-]+)?(?:#(?<id>[\\w\\-]+))?(?<class>(?:\\.(?:[\\w\\-]+))*)(?:@(?<name>(?:[\\w\\_])+))?");function Lm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,o;Array.isArray(n[0])?(r={},o=n[0]):(r=n[0]||{},o=n[1]);var a=xm.exec(e);if(!a||!a.groups)throw new Error("Bad use of h");var s=a.groups.tag||"div",l=document.createElement(s);a.groups.id&&(l.id=a.groups.id);var u=[];if(a.groups.class){var c=!0,d=!1,h=void 0;try{for(var f,g=a.groups.class.split(".")[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;""!==v&&u.push(v)}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}}if(void 0!==r.className){var p=!0,m=!1,y=void 0;try{for(var _,b=r.className.split(".")[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){var k=_.value;""!==k&&u.push(k)}}catch(e){m=!0,y=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw y}}}u.length>0&&(l.className=u.join(" "));var w={};if(a.groups.name&&(w[a.groups.name]=l),o){var S=!0,x=!1,L=void 0;try{for(var D,N=o[Symbol.iterator]();!(S=(D=N.next()).done);S=!0){var I=D.value;Jp(I)?l.appendChild(I):"string"==typeof I?l.append(I):"root"in I&&(Object.assign(w,I),l.appendChild(I.root))}}catch(e){x=!0,L=e}finally{try{S||null==N.return||N.return()}finally{if(x)throw L}}}var E=!0,M=!1,T=void 0;try{for(var R,A=Object.entries(r)[Symbol.iterator]();!(E=(R=A.next()).done);E=!0){var P=C(R.value,2),O=P[0],F=P[1];if("className"!==O)if("style"===O){var W=!0,B=!1,H=void 0;try{for(var V,z=Object.entries(F)[Symbol.iterator]();!(W=(V=z.next()).done);W=!0){var U=C(V.value,2),j=U[0],K=U[1];l.style.setProperty(Nm(j),"number"==typeof K?K+"px":""+K)}}catch(e){B=!0,H=e}finally{try{W||null==z.return||z.return()}finally{if(B)throw H}}}else"tabIndex"===O?l.tabIndex=F:l.setAttribute(Nm(O),F.toString())}}catch(e){M=!0,T=e}finally{try{E||null==A.return||A.return()}finally{if(M)throw T}}return w.root=l,w}function Dm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,o;Array.isArray(n[0])?(r={},o=n[0]):(r=n[0]||{},o=n[1]);var a=xm.exec(e);if(!a||!a.groups)throw new Error("Bad use of h");var s=a.groups.tag||"div",l=document.createElementNS("http://www.w3.org/2000/svg",s);a.groups.id&&(l.id=a.groups.id);var u=[];if(a.groups.class){var c=!0,d=!1,h=void 0;try{for(var f,g=a.groups.class.split(".")[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;""!==v&&u.push(v)}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}}if(void 0!==r.className){var p=!0,m=!1,y=void 0;try{for(var _,b=r.className.split(".")[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){var k=_.value;""!==k&&u.push(k)}}catch(e){m=!0,y=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw y}}}u.length>0&&(l.className=u.join(" "));var w={};if(a.groups.name&&(w[a.groups.name]=l),o){var S=!0,x=!1,L=void 0;try{for(var D,N=o[Symbol.iterator]();!(S=(D=N.next()).done);S=!0){var I=D.value;Jp(I)?l.appendChild(I):"string"==typeof I?l.append(I):"root"in I&&(Object.assign(w,I),l.appendChild(I.root))}}catch(e){x=!0,L=e}finally{try{S||null==N.return||N.return()}finally{if(x)throw L}}}var E=!0,M=!1,T=void 0;try{for(var R,A=Object.entries(r)[Symbol.iterator]();!(E=(R=A.next()).done);E=!0){var P=C(R.value,2),O=P[0],F=P[1];if("className"!==O)if("style"===O){var W=!0,B=!1,H=void 0;try{for(var V,z=Object.entries(F)[Symbol.iterator]();!(W=(V=z.next()).done);W=!0){var U=C(V.value,2),j=U[0],K=U[1];l.style.setProperty(Nm(j),"number"==typeof K?K+"px":""+K)}}catch(e){B=!0,H=e}finally{try{W||null==z.return||z.return()}finally{if(B)throw H}}}else"tabIndex"===O?l.tabIndex=F:l.setAttribute(Nm(O),F.toString())}}catch(e){M=!0,T=e}finally{try{E||null==A.return||A.return()}finally{if(M)throw T}}return w.root=l,w}function Nm(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var Im=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._onDidChange=n._register(new Zu),n.onDidChange=n._onDidChange.event,n._listener=function(){return n._handleChange(e,!0)},n._mediaQueryList=null,n._handleChange(e,!1),n}return p(t,e),h(t,[{key:"_handleChange",value:function(e,t){var n;null===(n=this._mediaQueryList)||void 0===n||n.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia("(resolution: ".concat(e.devicePixelRatio,"dppx)")),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}]),t}(Ru),Em=function(e){function t(e){var n;u(this,t),(n=l(this,t))._onDidChange=n._register(new Zu),n.onDidChange=n._onDidChange.event,n._value=n._getPixelRatio(e);var i=n._register(new Im(e));return n._register(i.onDidChange((function(){n._value=n._getPixelRatio(e),n._onDidChange.fire(n._value)}))),n}return p(t,e),h(t,[{key:"value",get:function(){return this._value}},{key:"_getPixelRatio",value:function(e){var t=document.createElement("canvas").getContext("2d");return(e.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}}]),t}(Ru),Mm=function(){function e(){u(this,e),this.mapWindowIdToPixelRatioMonitor=new Map}return h(e,[{key:"_getOrCreatePixelRatioMonitor",value:function(e){var t=this,n=ip(e),i=this.mapWindowIdToPixelRatioMonitor.get(n);return i||(i=new Em(e),this.mapWindowIdToPixelRatioMonitor.set(n,i),Au.once(sp)((function(e){e.vscodeWindowId===n&&(null==i||i.dispose(),t.mapWindowIdToPixelRatioMonitor.delete(n))}))),i}},{key:"getInstance",value:function(e){return this._getOrCreatePixelRatioMonitor(e)}}]),e}(),Tm=new Mm,Rm=function(){function e(t){u(this,e),this.domNode=t,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}return h(e,[{key:"setMaxWidth",value:function(e){var t=Am(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}},{key:"setWidth",value:function(e){var t=Am(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}},{key:"setHeight",value:function(e){var t=Am(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}},{key:"setTop",value:function(e){var t=Am(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}},{key:"setLeft",value:function(e){var t=Am(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}},{key:"setBottom",value:function(e){var t=Am(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}},{key:"setRight",value:function(e){var t=Am(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}},{key:"setPaddingLeft",value:function(e){var t=Am(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}},{key:"setFontFamily",value:function(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}},{key:"setFontWeight",value:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}},{key:"setFontSize",value:function(e){var t=Am(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}},{key:"setFontStyle",value:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}},{key:"setFontFeatureSettings",value:function(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}},{key:"setFontVariationSettings",value:function(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}},{key:"setTextDecoration",value:function(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}},{key:"setLineHeight",value:function(e){var t=Am(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}},{key:"setLetterSpacing",value:function(e){var t=Am(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}},{key:"setClassName",value:function(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}},{key:"toggleClassName",value:function(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}},{key:"setDisplay",value:function(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}},{key:"setPosition",value:function(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}},{key:"setVisibility",value:function(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}},{key:"setColor",value:function(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}},{key:"setBackgroundColor",value:function(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}},{key:"setLayerHinting",value:function(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}},{key:"setBoxShadow",value:function(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}},{key:"setContain",value:function(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}},{key:"setAttribute",value:function(e,t){this.domNode.setAttribute(e,t)}},{key:"removeAttribute",value:function(e){this.domNode.removeAttribute(e)}},{key:"appendChild",value:function(e){this.domNode.appendChild(e.domNode)}},{key:"removeChild",value:function(e){this.domNode.removeChild(e.domNode)}}]),e}();function Am(e){return"number"==typeof e?"".concat(e,"px"):e}function Pm(e){return new Rm(e)}function Om(e,t){e instanceof Rm?(e.setFontFamily(t.getMassagedFontFamily()),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setFontVariationSettings(t.fontVariationSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)):(e.style.fontFamily=t.getMassagedFontFamily(),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.fontVariationSettings=t.fontVariationSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px")}var Fm=function(){function e(t,n){u(this,e),this.chr=t,this.type=n,this.width=0}return h(e,[{key:"fulfill",value:function(e){this.width=e}}]),e}(),Wm=function(){function e(t,n){u(this,e),this._bareFontInfo=t,this._requests=n,this._container=null,this._testElements=null}return h(e,[{key:"read",value:function(e){var t;this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),null===(t=this._container)||void 0===t||t.remove(),this._container=null,this._testElements=null}},{key:"_createDomElements",value:function(){var t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";var n=document.createElement("div");Om(n,this._bareFontInfo),t.appendChild(n);var i=document.createElement("div");Om(i,this._bareFontInfo),i.style.fontWeight="bold",t.appendChild(i);var r=document.createElement("div");Om(r,this._bareFontInfo),r.style.fontStyle="italic",t.appendChild(r);var o=[],a=!0,s=!1,l=void 0;try{for(var u,c=this._requests[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value,h=void 0;0===d.type&&(h=n),2===d.type&&(h=i),1===d.type&&(h=r),h.appendChild(document.createElement("br"));var f=document.createElement("span");e._render(f,d),h.appendChild(f),o.push(f)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}this._container=t,this._testElements=o}},{key:"_readFromDomElements",value:function(){for(var e=0,t=this._requests.length;e<t;e++){var n=this._requests[e],i=this._testElements[e];n.fulfill(i.offsetWidth/256)}}}],[{key:"_render",value:function(e,t){if(" "===t.chr){for(var n=" ",i=0;i<8;i++)n+=n;e.innerText=n}else{for(var r=t.chr,o=0;o<8;o++)r+=r;e.textContent=r}}}]),e}();var Bm,Hm=new(function(){function e(){u(this,e),this._zoomLevel=0,this._onDidChangeZoomLevel=new Zu,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}return h(e,[{key:"getZoomLevel",value:function(){return this._zoomLevel}},{key:"setZoomLevel",value:function(e){e=Math.min(Math.max(-5,e),20),this._zoomLevel!==e&&(this._zoomLevel=e,this._onDidChangeZoomLevel.fire(this._zoomLevel))}}]),e}()),Vm=ms?1.5:1.35,zm=function(){function e(t){u(this,e),this._bareFontInfoBrand=void 0,this.pixelRatio=t.pixelRatio,this.fontFamily=String(t.fontFamily),this.fontWeight=String(t.fontWeight),this.fontSize=t.fontSize,this.fontFeatureSettings=t.fontFeatureSettings,this.fontVariationSettings=t.fontVariationSettings,this.lineHeight=0|t.lineHeight,this.letterSpacing=t.letterSpacing}return h(e,[{key:"getId",value:function(){return"".concat(this.pixelRatio,"-").concat(this.fontFamily,"-").concat(this.fontWeight,"-").concat(this.fontSize,"-").concat(this.fontFeatureSettings,"-").concat(this.fontVariationSettings,"-").concat(this.lineHeight,"-").concat(this.letterSpacing)}},{key:"getMassagedFontFamily",value:function(){var t=uu.fontFamily,n=e._wrapInQuotes(this.fontFamily);return t&&this.fontFamily!==t?"".concat(n,", ").concat(t):n}}],[{key:"createFromValidatedSettings",value:function(t,n,i){var r=t.get(49),o=t.get(53),a=t.get(52),s=t.get(51),l=t.get(54),u=t.get(67),c=t.get(64);return e._create(r,o,a,s,l,u,c,n,i)}},{key:"_create",value:function(t,n,i,r,o,a,s,l,u){0===a?a=Vm*i:a<8&&(a*=i),(a=Math.round(a))<8&&(a=8);var c=1+(u?0:.1*Hm.getZoomLevel());if(i*=c,a*=c,o===pl.TRANSLATE)if("normal"===n||"bold"===n)o=pl.OFF;else{var d=parseInt(n,10);o="'wght' ".concat(d),n="normal"}return new e({pixelRatio:l,fontFamily:t,fontWeight:n,fontSize:i,fontFeatureSettings:r,fontVariationSettings:o,lineHeight:a,letterSpacing:s})}},{key:"_wrapInQuotes",value:function(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?'"'.concat(e,'"'):e}}]),e}(),Um=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[e]))._editorStylingBrand=void 0,i.version=2,i.isTrusted=n,i.isMonospace=e.isMonospace,i.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,i.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,i.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,i.spaceWidth=e.spaceWidth,i.middotWidth=e.middotWidth,i.wsmiddotWidth=e.wsmiddotWidth,i.maxDigitWidth=e.maxDigitWidth,i}return p(t,e),h(t,[{key:"equals",value:function(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}]),t}(zm),jm=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments))._cache=new Map,e._evictUntrustedReadingsTimeout=-1,e._onDidChange=e._register(new Zu),e.onDidChange=e._onDidChange.event,e}return p(t,e),h(t,[{key:"dispose",value:function(){-1!==this._evictUntrustedReadingsTimeout&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),g(v(t.prototype),"dispose",this).call(this)}},{key:"clearAllFontInfos",value:function(){this._cache.clear(),this._onDidChange.fire()}},{key:"_ensureCache",value:function(e){var t=ip(e),n=this._cache.get(t);return n||(n=new Km,this._cache.set(t,n)),n}},{key:"_writeToCache",value:function(e,t,n){var i=this;this._ensureCache(e).put(t,n),n.isTrusted||-1!==this._evictUntrustedReadingsTimeout||(this._evictUntrustedReadingsTimeout=e.setTimeout((function(){i._evictUntrustedReadingsTimeout=-1,i._evictUntrustedReadings(e)}),5e3))}},{key:"_evictUntrustedReadings",value:function(e){var t=this._ensureCache(e),n=t.getValues(),i=!1,r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;u.isTrusted||(i=!0,t.remove(u))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}i&&this._onDidChange.fire()}},{key:"readFontInfo",value:function(e,t){var n=this._ensureCache(e);if(!n.has(t)){var i=this._actualReadFontInfo(e,t);(i.typicalHalfwidthCharacterWidth<=2||i.typicalFullwidthCharacterWidth<=2||i.spaceWidth<=2||i.maxDigitWidth<=2)&&(i=new Um({pixelRatio:Tm.getInstance(e).value,fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontSize:i.fontSize,fontFeatureSettings:i.fontFeatureSettings,fontVariationSettings:i.fontVariationSettings,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,isMonospace:i.isMonospace,typicalHalfwidthCharacterWidth:Math.max(i.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(i.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:i.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(i.spaceWidth,5),middotWidth:Math.max(i.middotWidth,5),wsmiddotWidth:Math.max(i.wsmiddotWidth,5),maxDigitWidth:Math.max(i.maxDigitWidth,5)},!1)),this._writeToCache(e,t,i)}return n.get(t)}},{key:"_createRequest",value:function(e,t,n,i){var r=new Fm(e,t);return n.push(r),null==i||i.push(r),r}},{key:"_actualReadFontInfo",value:function(e,t){for(var n=[],i=[],r=this._createRequest("n",0,n,i),o=this._createRequest("ｍ",0,n,null),a=this._createRequest(" ",0,n,i),s=this._createRequest("0",0,n,i),l=this._createRequest("1",0,n,i),u=this._createRequest("2",0,n,i),c=this._createRequest("3",0,n,i),d=this._createRequest("4",0,n,i),h=this._createRequest("5",0,n,i),f=this._createRequest("6",0,n,i),g=this._createRequest("7",0,n,i),v=this._createRequest("8",0,n,i),p=this._createRequest("9",0,n,i),m=this._createRequest("→",0,n,i),y=this._createRequest("￫",0,n,null),_=this._createRequest("·",0,n,i),b=this._createRequest(String.fromCharCode(11825),0,n,null),k="|/-_ilm%",w=0;w<8;w++)this._createRequest(k.charAt(w),0,n,i),this._createRequest(k.charAt(w),1,n,i),this._createRequest(k.charAt(w),2,n,i);!function(e,t,n){new Wm(t,n).read(e)}(e,t,n);for(var C=Math.max(s.width,l.width,u.width,c.width,d.width,h.width,f.width,g.width,v.width,p.width),S=t.fontFeatureSettings===vl.OFF,x=i[0].width,L=1,D=i.length;S&&L<D;L++){var N=x-i[L].width;if(N<-.001||N>.001){S=!1;break}}var I=!0;return S&&y.width!==x&&(I=!1),y.width>m.width&&(I=!1),new Um({pixelRatio:Tm.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:S,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:I,spaceWidth:a.width,middotWidth:_.width,wsmiddotWidth:b.width,maxDigitWidth:C},!0)}}]),t}(Ru),Km=function(){function e(){u(this,e),this._keys=Object.create(null),this._values=Object.create(null)}return h(e,[{key:"has",value:function(e){var t=e.getId();return!!this._values[t]}},{key:"get",value:function(e){var t=e.getId();return this._values[t]}},{key:"put",value:function(e,t){var n=e.getId();this._keys[n]=e,this._values[n]=t}},{key:"remove",value:function(e){var t=e.getId();delete this._keys[t],delete this._values[t]}},{key:"getValues",value:function(){var e=this;return Object.keys(this._keys).map((function(t){return e._values[t]}))}}]),e}(),qm=new jm;!function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=function(t){return t[e.DI_DEPENDENCIES]||[]}}(Bm||(Bm={}));var Gm=Zm("instantiationService");function Zm(e){if(Bm.serviceIds.has(e))return Bm.serviceIds.get(e);var t=function(e,n,i){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function(e,t,n){t[Bm.DI_TARGET]===t?t[Bm.DI_DEPENDENCIES].push({id:e,index:n}):(t[Bm.DI_DEPENDENCIES]=[{id:e,index:n}],t[Bm.DI_TARGET]=t)}(t,e,i)};return t.toString=function(){return e},Bm.serviceIds.set(e,t),t}var Ym=Zm("codeEditorService"),Qm=Zm("modelService"),Xm=Zm("textModelService"),$m=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4?arguments[4]:void 0;return u(this,t),(n=l(this,t))._onDidChange=n._register(new Zu),n.onDidChange=n._onDidChange.event,n._enabled=!0,n._id=e,n._label=i,n._cssClass=r,n._enabled=o,n._actionCallback=a,n}return p(t,e),h(t,[{key:"id",get:function(){return this._id}},{key:"label",get:function(){return this._label},set:function(e){this._setLabel(e)}},{key:"_setLabel",value:function(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}},{key:"tooltip",get:function(){return this._tooltip||""},set:function(e){this._setTooltip(e)}},{key:"_setTooltip",value:function(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}},{key:"class",get:function(){return this._cssClass},set:function(e){this._setClass(e)}},{key:"_setClass",value:function(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._setEnabled(e)}},{key:"_setEnabled",value:function(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}},{key:"checked",get:function(){return this._checked},set:function(e){this._setChecked(e)}},{key:"_setChecked",value:function(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}},{key:"run",value:function(e,t){var n=this;return s((function(){return E(this,(function(t){switch(t.label){case 0:return n._actionCallback?[4,n._actionCallback(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))()}}]),t}(Ru),Jm=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments))._onWillRun=e._register(new Zu),e.onWillRun=e._onWillRun.event,e._onDidRun=e._register(new Zu),e.onDidRun=e._onDidRun.event,e}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=this;return s((function(){var i,r;return E(this,(function(o){switch(o.label){case 0:if(!e.enabled)return[2];n._onWillRun.fire({action:e}),i=void 0,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.runAction(e,t)];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),i=r,[3,4];case 4:return n._onDidRun.fire({action:e,error:i}),[2]}}))}))()}},{key:"runAction",value:function(e,t){return s((function(){return E(this,(function(n){switch(n.label){case 0:return[4,e.run(t)];case 1:return n.sent(),[2]}}))}))()}}]),t}(Ru),ey=function(){function e(){u(this,e),this.id=e.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}return h(e,[{key:"run",value:function(){return s((function(){return E(this,(function(e){return[2]}))}))()}}],[{key:"join",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;c.length&&(r=r.length?x(r).concat([new e],x(c)):c)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return r}}]),e}();ey.ID="vs.actions.separator";var ty,ny,iy=function(){function e(t,n,i,r){u(this,e),this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=t,this.label=n,this.class=r,this._actions=i}return h(e,[{key:"actions",get:function(){return this._actions}},{key:"run",value:function(){return s((function(){return E(this,(function(e){return[2]}))}))()}}]),e}(),ry=function(e){function t(){return u(this,t),l(this,t,[t.ID,Xa("submenu.empty","(empty)"),void 0,!1])}return p(t,e),t}($m);function oy(e){var t,n;return{id:e.id,label:e.label,tooltip:null!==(t=e.tooltip)&&void 0!==t?t:e.label,class:e.class,enabled:null===(n=e.enabled)||void 0===n||n,checked:e.checked,run:s((function(){var t,n,i,r,o=arguments;return E(this,(function(a){for(t=o.length,n=new Array(t),i=0;i<t;i++)n[i]=o[i];return[2,(r=e).run.apply(r,x(n))]}))}))}}ry.ID="vs.actions.empty",function(e){e.isThemeColor=function(e){return e&&"object"===(void 0===e?"undefined":L(e))&&"string"==typeof e.id}}(ty||(ty={})),function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";var t=new RegExp("^(".concat(e.iconNameExpression,")(").concat(e.iconModifierExpression,")?$"));function n(e){var i=t.exec(e.id);if(!i)return n(bd.error);var r=C(i,3),o=r[1],a=r[2],s=["codicon","codicon-"+o];return a&&s.push("codicon-modifier-"+a.substring(1)),s}e.asClassNameArray=n,e.asClassName=function(e){return n(e).join(" ")},e.asCSSSelector=function(e){return"."+n(e).join(".")},e.isThemeIcon=function(e){return e&&"object"===(void 0===e?"undefined":L(e))&&"string"==typeof e.id&&(void 0===e.color||ty.isThemeColor(e.color))};var i=new RegExp("^\\$\\((".concat(e.iconNameExpression,"(?:").concat(e.iconModifierExpression,")?)\\)$"));e.fromString=function(e){var t=i.exec(e);if(t)return{id:C(t,2)[1]}},e.fromId=function(e){return{id:e}},e.modify=function(e,t){var n=e.id,i=n.lastIndexOf("~");return-1!==i&&(n=n.substring(0,i)),t&&(n="".concat(n,"~").concat(t)),{id:n}},e.getModifier=function(e){var t=e.id.lastIndexOf("~");if(-1!==t)return e.id.substring(t+1)},e.isEqual=function(e,t){var n,i;return e.id===t.id&&(null===(n=e.color)||void 0===n?void 0:n.id)===(null===(i=t.color)||void 0===i?void 0:i.id)}}(ny||(ny={}));var ay=Zm("commandService"),sy=new(function(){function e(){u(this,e),this._commands=new Map,this._onDidRegisterCommand=new Zu,this.onDidRegisterCommand=this._onDidRegisterCommand.event}return h(e,[{key:"registerCommand",value:function(e,t){var n=this;if(!e)throw new Error("invalid command");if("string"==typeof e){if(!t)throw new Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.metadata&&Array.isArray(e.metadata.args)){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=e.metadata.args[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i.push(u.constraint)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}var c=e.handler;e.handler=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++)Ba(e[i],t[i])}(n,i),c.apply(void 0,[e].concat(x(n)))}}var d=e.id,h=this._commands.get(d);h||(h=new Hs,this._commands.set(d,h));var f=h.unshift(e),g=Mu((function(){f();var e=n._commands.get(d);(null==e?void 0:e.isEmpty())&&n._commands.delete(d)}));return this._onDidRegisterCommand.fire(d),g}},{key:"registerCommandAlias",value:function(e,t){var n;return sy.registerCommand(e,(function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return(n=e.get(ay)).executeCommand.apply(n,[t].concat(x(r)))}))}},{key:"getCommand",value:function(e){var t=this._commands.get(e);if(t&&!t.isEmpty())return Ts.first(t)}},{key:"getCommands",value:function(){var e=new Map,t=!0,n=!1,i=void 0;try{for(var r,o=this._commands.keys()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=this.getCommand(a);s&&e.set(a,s)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}}]),e}());function ly(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];switch(t.length){case 1:return Xa("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",t[0]);case 2:return Xa("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",t[0],t[1]);case 3:return Xa("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",t[0],t[1],t[2]);default:return}}sy.registerCommand("noop",(function(){}));var uy=Xa("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),cy=Xa("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'."),dy=(dt=function(){function e(){u(this,e),this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=RegExp('[a-zA-Z0-9_<>\\-\\./\\\\:\\*\\?\\+\\[\\]\\^,#@;"%\\$\\p{L}-]+',"uy")}return h(e,[{key:"reset",value:function(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}},{key:"scan",value:function(){for(;!this._isAtEnd();){this._start=this._current;var e=this._advance();switch(e){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){var t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){var n=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:n})}else this._match(126)?this._addToken(9):this._error(ly("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(ly("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(ly("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}},{key:"_match",value:function(e){return!this._isAtEnd()&&(this._input.charCodeAt(this._current)===e&&(this._current++,!0))}},{key:"_advance",value:function(){return this._input.charCodeAt(this._current++)}},{key:"_peek",value:function(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}},{key:"_addToken",value:function(e){this._tokens.push({type:e,offset:this._start})}},{key:"_error",value:function(e){var t=this._start,n=this._input.substring(this._start,this._current),i={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(i)}},{key:"_string",value:function(){this.stringRe.lastIndex=this._start;var t=this.stringRe.exec(this._input);if(t){this._current=this._start+t[0].length;var n=this._input.substring(this._start,this._current),i=e._keywords.get(n);i?this._addToken(i):this._tokens.push({type:17,lexeme:n,offset:this._start})}}},{key:"_quotedString",value:function(){for(;39!==this._peek()&&!this._isAtEnd();)this._advance();this._isAtEnd()?this._error(uy):(this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1}))}},{key:"_regex",value:function(){for(var t=this._current,n=!1,i=!1;;){if(t>=this._input.length)return this._current=t,void this._error(cy);var r=this._input.charCodeAt(t);if(n)n=!1;else{if(47===r&&!i){t++;break}91===r?i=!0:92===r?n=!0:93===r&&(i=!1)}t++}for(;t<this._input.length&&e._regexFlags.has(this._input.charCodeAt(t));)t++;this._current=t;var o=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:o,offset:this._start})}},{key:"_isAtEnd",value:function(){return this._current>=this._input.length}}],[{key:"getLexeme",value:function(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:case 8:return">=";case 9:return"=~";case 10:case 17:case 18:case 19:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 20:return"EOF";default:throw Cu("unhandled token type: ".concat(JSON.stringify(e),"; have you forgotten to add a case?"))}}}]),e}(),dt._regexFlags=new Set(["i","g","s","m","y","u"].map((function(e){return e.charCodeAt(0)}))),dt._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]),dt),hy=new Map;hy.set("false",!1),hy.set("true",!0),hy.set("isMac",ms),hy.set("isLinux",ys),hy.set("isWindows",ps),hy.set("isWeb",bs),hy.set("isMacNative",ms&&!bs),hy.set("isEdge",Os),hy.set("isFirefox",As),hy.set("isChrome",Rs),hy.set("isSafari",Ps);var fy=Object.prototype.hasOwnProperty,gy={regexParsingWithErrorRecovery:!0},vy=Xa("contextkey.parser.error.emptyString","Empty context key expression"),py=Xa("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),my=Xa("contextkey.parser.error.noInAfterNot","'in' after 'not'."),yy=Xa("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),_y=Xa("contextkey.parser.error.unexpectedToken","Unexpected token"),by=Xa("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),ky=Xa("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),wy=Xa("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?"),Cy=(ht=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gy;u(this,e),this._config=t,this._scanner=new dy,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}return h(e,[{key:"parse",value:function(t){if(""!==t){this._tokens=this._scanner.reset(t).scan(),this._current=0,this._parsingErrors=[];try{var n=this._expr();if(!this._isAtEnd()){var i=this._peek(),r=17===i.type?by:void 0;throw this._parsingErrors.push({message:_y,offset:i.offset,lexeme:dy.getLexeme(i),additionalInfo:r}),e._parseError}return n}catch(t){if(t!==e._parseError)throw t;return}}else this._parsingErrors.push({message:vy,offset:0,lexeme:"",additionalInfo:py})}},{key:"_expr",value:function(){return this._or()}},{key:"_or",value:function(){for(var e,t=[this._and()];this._matchOne(16);){var n=this._and();t.push(n)}return 1===t.length?t[0]:(e=Sy).or.apply(e,x(t))}},{key:"_and",value:function(){for(var e,t=[this._term()];this._matchOne(15);){var n=this._term();t.push(n)}return 1===t.length?t[0]:(e=Sy).and.apply(e,x(t))}},{key:"_term",value:function(){if(this._matchOne(2)){var e=this._peek();switch(e.type){case 11:return this._advance(),Ly.INSTANCE;case 12:return this._advance(),Dy.INSTANCE;case 0:this._advance();var t=this._expr();return this._consume(1,yy),null==t?void 0:t.negate();case 17:return this._advance(),Ry.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}},{key:"_primary",value:function(){var t=this._peek();switch(t.type){case 11:return this._advance(),Sy.true();case 12:return this._advance(),Sy.false();case 0:this._advance();var n=this._expr();return this._consume(1,yy),n;case 17:var i=t.lexeme;if(this._advance(),this._matchOne(9)){var r=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),10!==r.type)throw this._errExpectedButGot("REGEX",r);var o,a=r.lexeme,s=a.lastIndexOf("/"),l=s===a.length-1?void 0:this._removeFlagsGY(a.substring(s+1));try{o=new RegExp(a.substring(1,s),l)}catch(e){throw this._errExpectedButGot("REGEX",r)}return By.create(i,o)}switch(r.type){case 10:case 19:var u=[r.lexeme];this._advance();for(var c=this._peek(),d=0,h=0;h<r.lexeme.length;h++)40===r.lexeme.charCodeAt(h)?d++:41===r.lexeme.charCodeAt(h)&&d--;for(;!this._isAtEnd()&&15!==c.type&&16!==c.type;){switch(c.type){case 0:d++;break;case 1:d--;break;case 10:case 18:for(var f=0;f<c.lexeme.length;f++)40===c.lexeme.charCodeAt(f)?d++:41===r.lexeme.charCodeAt(f)&&d--}if(d<0)break;u.push(dy.getLexeme(c)),this._advance(),c=this._peek()}var g,v=u.join(""),p=v.lastIndexOf("/"),m=p===v.length-1?void 0:this._removeFlagsGY(v.substring(p+1));try{g=new RegExp(v.substring(1,p),m)}catch(e){throw this._errExpectedButGot("REGEX",r)}return Sy.regex(i,g);case 18:var y=r.lexeme;this._advance();var _=null;if(!zh(y)){var b=y.indexOf("/"),k=y.lastIndexOf("/");if(b!==k&&b>=0){var w=y.slice(b+1,k),C="i"===y[k+1]?"i":"";try{_=new RegExp(w,C)}catch(e){throw this._errExpectedButGot("REGEX",r)}}}if(null===_)throw this._errExpectedButGot("REGEX",r);return By.create(i,_);default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,my);var S=this._value();return Sy.notIn(i,S)}switch(this._peek().type){case 3:this._advance();var x=this._value();if(18===this._previous().type)return Sy.equals(i,x);switch(x){case"true":return Sy.has(i);case"false":return Sy.not(i);default:return Sy.equals(i,x)}case 4:this._advance();var L=this._value();if(18===this._previous().type)return Sy.notEquals(i,L);switch(L){case"true":return Sy.not(i);case"false":return Sy.has(i);default:return Sy.notEquals(i,L)}case 5:return this._advance(),Fy.create(i,this._value());case 6:return this._advance(),Wy.create(i,this._value());case 7:return this._advance(),Py.create(i,this._value());case 8:return this._advance(),Oy.create(i,this._value());case 13:return this._advance(),Sy.in(i,this._value());default:return Sy.has(i)}case 20:throw this._parsingErrors.push({message:ky,offset:t.offset,lexeme:"",additionalInfo:wy}),e._parseError;default:throw this._errExpectedButGot("true | false | KEY \n\t| KEY '=~' REGEX \n\t| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value",this._peek())}}},{key:"_value",value:function(){var e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}},{key:"_removeFlagsGY",value:function(e){return e.replaceAll(this._flagsGYRe,"")}},{key:"_previous",value:function(){return this._tokens[this._current-1]}},{key:"_matchOne",value:function(e){return!!this._check(e)&&(this._advance(),!0)}},{key:"_advance",value:function(){return this._isAtEnd()||this._current++,this._previous()}},{key:"_consume",value:function(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}},{key:"_errExpectedButGot",value:function(t,n,i){var r=Xa("contextkey.parser.error.expectedButGot","Expected: {0}\nReceived: '{1}'.",t,dy.getLexeme(n)),o=n.offset,a=dy.getLexeme(n);return this._parsingErrors.push({message:r,offset:o,lexeme:a,additionalInfo:i}),e._parseError}},{key:"_check",value:function(e){return this._peek().type===e}},{key:"_peek",value:function(){return this._tokens[this._current]}},{key:"_isAtEnd",value:function(){return 20===this._peek().type}}]),e}(),ht._parseError=new Error,ht),Sy=function(){function e(){u(this,e)}return h(e,null,[{key:"false",value:function(){return Ly.INSTANCE}},{key:"true",value:function(){return Dy.INSTANCE}},{key:"has",value:function(e){return Ny.create(e)}},{key:"equals",value:function(e,t){return Iy.create(e,t)}},{key:"notEquals",value:function(e,t){return Ty.create(e,t)}},{key:"regex",value:function(e,t){return By.create(e,t)}},{key:"in",value:function(e,t){return Ey.create(e,t)}},{key:"notIn",value:function(e,t){return My.create(e,t)}},{key:"not",value:function(e){return Ry.create(e)}},{key:"and",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zy.create(t,null,!0)}},{key:"or",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Uy.create(t,null,!0)}},{key:"deserialize",value:function(e){if(null!=e)return this._parser.parse(e)}}]),e}();function xy(e,t){return e.cmp(t)}Sy._parser=new Cy({regexParsingWithErrorRecovery:!1});var Ly=function(){function e(){u(this,e),this.type=0}return h(e,[{key:"cmp",value:function(e){return this.type-e.type}},{key:"equals",value:function(e){return e.type===this.type}},{key:"substituteConstants",value:function(){return this}},{key:"evaluate",value:function(e){return!1}},{key:"serialize",value:function(){return"false"}},{key:"keys",value:function(){return[]}},{key:"negate",value:function(){return Dy.INSTANCE}}]),e}();Ly.INSTANCE=new Ly;var Dy=function(){function e(){u(this,e),this.type=1}return h(e,[{key:"cmp",value:function(e){return this.type-e.type}},{key:"equals",value:function(e){return e.type===this.type}},{key:"substituteConstants",value:function(){return this}},{key:"evaluate",value:function(e){return!0}},{key:"serialize",value:function(){return"true"}},{key:"keys",value:function(){return[]}},{key:"negate",value:function(){return Ly.INSTANCE}}]),e}();Dy.INSTANCE=new Dy;var Ny=function(){function e(t,n){u(this,e),this.key=t,this.negated=n,this.type=2}return h(e,[{key:"cmp",value:function(e){return e.type!==this.type?this.type-e.type:qy(this.key,e.key)}},{key:"equals",value:function(e){return e.type===this.type&&this.key===e.key}},{key:"substituteConstants",value:function(){var e=hy.get(this.key);return"boolean"==typeof e?e?Dy.INSTANCE:Ly.INSTANCE:this}},{key:"evaluate",value:function(e){return!!e.getValue(this.key)}},{key:"serialize",value:function(){return this.key}},{key:"keys",value:function(){return[this.key]}},{key:"negate",value:function(){return this.negated||(this.negated=Ry.create(this.key,this)),this.negated}}],[{key:"create",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=hy.get(t);return"boolean"==typeof i?i?Dy.INSTANCE:Ly.INSTANCE:new e(t,n)}}]),e}(),Iy=function(){function e(t,n,i){u(this,e),this.key=t,this.value=n,this.negated=i,this.type=4}return h(e,[{key:"cmp",value:function(e){return e.type!==this.type?this.type-e.type:Gy(this.key,this.value,e.key,e.value)}},{key:"equals",value:function(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}},{key:"substituteConstants",value:function(){var e=hy.get(this.key);if("boolean"==typeof e){var t=e?"true":"false";return this.value===t?Dy.INSTANCE:Ly.INSTANCE}return this}},{key:"evaluate",value:function(e){return e.getValue(this.key)==this.value}},{key:"serialize",value:function(){return"".concat(this.key," == '").concat(this.value,"'")}},{key:"keys",value:function(){return[this.key]}},{key:"negate",value:function(){return this.negated||(this.negated=Ty.create(this.key,this.value,this)),this.negated}}],[{key:"create",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("boolean"==typeof n)return n?Ny.create(t,i):Ry.create(t,i);var r=hy.get(t);return"boolean"==typeof r?n===(r?"true":"false")?Dy.INSTANCE:Ly.INSTANCE:new e(t,n,i)}}]),e}(),Ey=function(){function e(t,n){u(this,e),this.key=t,this.valueKey=n,this.type=10,this.negated=null}return h(e,[{key:"cmp",value:function(e){return e.type!==this.type?this.type-e.type:Gy(this.key,this.valueKey,e.key,e.valueKey)}},{key:"equals",value:function(e){return e.type===this.type&&(this.key===e.key&&this.valueKey===e.valueKey)}},{key:"substituteConstants",value:function(){return this}},{key:"evaluate",value:function(e){var t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):"string"==typeof n&&"object"===(void 0===t?"undefined":L(t))&&null!==t&&fy.call(t,n)}},{key:"serialize",value:function(){return"".concat(this.key," in '").concat(this.valueKey,"'")}},{key:"keys",value:function(){return[this.key,this.valueKey]}},{key:"negate",value:function(){return this.negated||(this.negated=My.create(this.key,this.valueKey)),this.negated}}],[{key:"create",value:function(t,n){return new e(t,n)}}]),e}(),My=function(){function e(t,n){u(this,e),this.key=t,this.valueKey=n,this.type=11,this._negated=Ey.create(t,n)}return h(e,[{key:"cmp",value:function(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}},{key:"equals",value:function(e){return e.type===this.type&&this._negated.equals(e._negated)}},{key:"substituteConstants",value:function(){return this}},{key:"evaluate",value:function(e){return!this._negated.evaluate(e)}},{key:"serialize",value:function(){return"".concat(this.key," not in '").concat(this.valueKey,"'")}},{key:"keys",value:function(){return this._negated.keys()}},{key:"negate",value:function(){return this._negated}}],[{key:"create",value:function(t,n){return new e(t,n)}}]),e}(),Ty=function(){function e(t,n,i){u(this,e),this.key=t,this.value=n,this.negated=i,this.type=5}return h(e,[{key:"cmp",value:function(e){return e.type!==this.type?this.type-e.type:Gy(this.key,this.value,e.key,e.value)}},{key:"equals",value:function(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}},{key:"substituteConstants",value:function(){var e=hy.get(this.key);if("boolean"==typeof e){var t=e?"true":"false";return this.value===t?Ly.INSTANCE:Dy.INSTANCE}return this}},{key:"evaluate",value:function(e){return e.getValue(this.key)!=this.value}},{key:"serialize",value:function(){return"".concat(this.key," != '").concat(this.value,"'")}},{key:"keys",value:function(){return[this.key]}},{key:"negate",value:function(){return this.negated||(this.negated=Iy.create(this.key,this.value,this)),this.negated}}],[{key:"create",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("boolean"==typeof n)return n?Ry.create(t,i):Ny.create(t,i);var r=hy.get(t);return"boolean"==typeof r?n===(r?"true":"false")?Ly.INSTANCE:Dy.INSTANCE:new e(t,n,i)}}]),e}(),Ry=function(){function e(t,n){u(this,e),this.key=t,this.negated=n,this.type=3}return h(e,[{key:"cmp",value:function(e){return e.type!==this.type?this.type-e.type:qy(this.key,e.key)}},{key:"equals",value:function(e){return e.type===this.type&&this.key===e.key}},{key:"substituteConstants",value:function(){var e=hy.get(this.key);return"boolean"==typeof e?e?Ly.INSTANCE:Dy.INSTANCE:this}},{key:"evaluate",value:function(e){return!e.getValue(this.key)}},{key:"serialize",value:function(){return"!".concat(this.key)}},{key:"keys",value:function(){return[this.key]}},{key:"negate",value:function(){return this.negated||(this.negated=Ny.create(this.key,this)),this.negated}}],[{key:"create",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=hy.get(t);return"boolean"==typeof i?i?Ly.INSTANCE:Dy.INSTANCE:new e(t,n)}}]),e}();function Ay(e,t){if("string"==typeof e){var n=parseFloat(e);isNaN(n)||(e=n)}return"string"==typeof e||"number"==typeof e?t(e):Ly.INSTANCE}var Py=function(){function e(t,n,i){u(this,e),this.key=t,this.value=n,this.negated=i,this.type=12}return h(e,[{key:"cmp",value:function(e){return e.type!==this.type?this.type-e.type:Gy(this.key,this.value,e.key,e.value)}},{key:"equals",value:function(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}},{key:"substituteConstants",value:function(){return this}},{key:"evaluate",value:function(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))>this.value}},{key:"serialize",value:function(){return"".concat(this.key," > ").concat(this.value)}},{key:"keys",value:function(){return[this.key]}},{key:"negate",value:function(){return this.negated||(this.negated=Wy.create(this.key,this.value,this)),this.negated}}],[{key:"create",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Ay(n,(function(n){return new e(t,n,i)}))}}]),e}(),Oy=function(){function e(t,n,i){u(this,e),this.key=t,this.value=n,this.negated=i,this.type=13}return h(e,[{key:"cmp",value:function(e){return e.type!==this.type?this.type-e.type:Gy(this.key,this.value,e.key,e.value)}},{key:"equals",value:function(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}},{key:"substituteConstants",value:function(){return this}},{key:"evaluate",value:function(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))>=this.value}},{key:"serialize",value:function(){return"".concat(this.key," >= ").concat(this.value)}},{key:"keys",value:function(){return[this.key]}},{key:"negate",value:function(){return this.negated||(this.negated=Fy.create(this.key,this.value,this)),this.negated}}],[{key:"create",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Ay(n,(function(n){return new e(t,n,i)}))}}]),e}(),Fy=function(){function e(t,n,i){u(this,e),this.key=t,this.value=n,this.negated=i,this.type=14}return h(e,[{key:"cmp",value:function(e){return e.type!==this.type?this.type-e.type:Gy(this.key,this.value,e.key,e.value)}},{key:"equals",value:function(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}},{key:"substituteConstants",value:function(){return this}},{key:"evaluate",value:function(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))<this.value}},{key:"serialize",value:function(){return"".concat(this.key," < ").concat(this.value)}},{key:"keys",value:function(){return[this.key]}},{key:"negate",value:function(){return this.negated||(this.negated=Oy.create(this.key,this.value,this)),this.negated}}],[{key:"create",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Ay(n,(function(n){return new e(t,n,i)}))}}]),e}(),Wy=function(){function e(t,n,i){u(this,e),this.key=t,this.value=n,this.negated=i,this.type=15}return h(e,[{key:"cmp",value:function(e){return e.type!==this.type?this.type-e.type:Gy(this.key,this.value,e.key,e.value)}},{key:"equals",value:function(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}},{key:"substituteConstants",value:function(){return this}},{key:"evaluate",value:function(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))<=this.value}},{key:"serialize",value:function(){return"".concat(this.key," <= ").concat(this.value)}},{key:"keys",value:function(){return[this.key]}},{key:"negate",value:function(){return this.negated||(this.negated=Py.create(this.key,this.value,this)),this.negated}}],[{key:"create",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Ay(n,(function(n){return new e(t,n,i)}))}}]),e}(),By=function(){function e(t,n){u(this,e),this.key=t,this.regexp=n,this.type=7,this.negated=null}return h(e,[{key:"cmp",value:function(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;var t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}},{key:"equals",value:function(e){if(e.type===this.type){var t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}},{key:"substituteConstants",value:function(){return this}},{key:"evaluate",value:function(e){var t=e.getValue(this.key);return!!this.regexp&&this.regexp.test(t)}},{key:"serialize",value:function(){var e=this.regexp?"/".concat(this.regexp.source,"/").concat(this.regexp.flags):"/invalid/";return"".concat(this.key," =~ ").concat(e)}},{key:"keys",value:function(){return[this.key]}},{key:"negate",value:function(){return this.negated||(this.negated=Hy.create(this)),this.negated}}],[{key:"create",value:function(t,n){return new e(t,n)}}]),e}(),Hy=function(){function e(t){u(this,e),this._actual=t,this.type=8}return h(e,[{key:"cmp",value:function(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}},{key:"equals",value:function(e){return e.type===this.type&&this._actual.equals(e._actual)}},{key:"substituteConstants",value:function(){return this}},{key:"evaluate",value:function(e){return!this._actual.evaluate(e)}},{key:"serialize",value:function(){return"!(".concat(this._actual.serialize(),")")}},{key:"keys",value:function(){return this._actual.keys()}},{key:"negate",value:function(){return this._actual}}],[{key:"create",value:function(t){return new e(t)}}]),e}();function Vy(e){for(var t=null,n=0,i=e.length;n<i;n++){var r=e[n].substituteConstants();if(e[n]!==r&&null===t){t=[];for(var o=0;o<n;o++)t[o]=e[o]}null!==t&&(t[n]=r)}return null===t?e:t}var zy=function(){function e(t,n){u(this,e),this.expr=t,this.negated=n,this.type=6}return h(e,[{key:"cmp",value:function(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(var t=0,n=this.expr.length;t<n;t++){var i=xy(this.expr[t],e.expr[t]);if(0!==i)return i}return 0}},{key:"equals",value:function(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(var t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}},{key:"substituteConstants",value:function(){var t=Vy(this.expr);return t===this.expr?this:e.create(t,this.negated,!1)}},{key:"evaluate",value:function(e){for(var t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}},{key:"serialize",value:function(){return this.expr.map((function(e){return e.serialize()})).join(" && ")}},{key:"keys",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this.expr[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a,s=r.value;(a=e).push.apply(a,x(s.keys()))}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}},{key:"negate",value:function(){if(!this.negated){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this.expr[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;e.push(a.negate())}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}this.negated=Uy.create(e,this,!0)}return this.negated}}],[{key:"create",value:function(t,n,i){return e._normalizeArr(t,n,i)}},{key:"_normalizeArr",value:function(t,n,i){var r=function(){var t=o[o.length-1];if(9!==t.type)return"break";o.pop();var n=o.pop(),r=0===o.length,a=Uy.create(t.expr.map((function(t){return e.create([t,n],null,i)})),null,r);a&&(o.push(a),o.sort(xy))},o=[],a=!1,s=!0,l=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;if(h)if(1!==h.type){if(0===h.type)return Ly.INSTANCE;var f;if(6!==h.type)o.push(h);else(f=o).push.apply(f,x(h.expr))}else a=!0}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}if(0===o.length&&a)return Dy.INSTANCE;if(0!==o.length){if(1===o.length)return o[0];o.sort(xy);for(var g=1;g<o.length;g++)o[g-1].equals(o[g])&&(o.splice(g,1),g--);if(1===o.length)return o[0];for(;o.length>1;){if("break"===r())break}if(1===o.length)return o[0];if(i){for(var v=0;v<o.length;v++)for(var p=v+1;p<o.length;p++)if(o[v].negate().equals(o[p]))return Ly.INSTANCE;if(1===o.length)return o[0]}return new e(o,n)}}}]),e}(),Uy=function(){function e(t,n){u(this,e),this.expr=t,this.negated=n,this.type=9}return h(e,[{key:"cmp",value:function(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(var t=0,n=this.expr.length;t<n;t++){var i=xy(this.expr[t],e.expr[t]);if(0!==i)return i}return 0}},{key:"equals",value:function(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(var t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}},{key:"substituteConstants",value:function(){var t=Vy(this.expr);return t===this.expr?this:e.create(t,this.negated,!1)}},{key:"evaluate",value:function(e){for(var t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}},{key:"serialize",value:function(){return this.expr.map((function(e){return e.serialize()})).join(" || ")}},{key:"keys",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this.expr[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a,s=r.value;(a=e).push.apply(a,x(s.keys()))}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}},{key:"negate",value:function(){if(!this.negated){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=this.expr[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.push(s.negate())}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}for(;t.length>1;){var l=t.shift(),u=t.shift(),c=[],d=!0,h=!1,f=void 0;try{for(var g,v=Qy(l)[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value,m=!0,y=!1,_=void 0;try{for(var b,k=Qy(u)[Symbol.iterator]();!(m=(b=k.next()).done);m=!0){var w=b.value;c.push(zy.create([p,w],null,!1))}}catch(e){y=!0,_=e}finally{try{m||null==k.return||k.return()}finally{if(y)throw _}}}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}t.unshift(e.create(c,null,!1))}this.negated=e.create(t,this,!0)}return this.negated}}],[{key:"create",value:function(t,n,i){return e._normalizeArr(t,n,i)}},{key:"_normalizeArr",value:function(t,n,i){var r=[],o=!1;if(t){for(var a=0,s=t.length;a<s;a++){var l=t[a];if(l)if(0!==l.type){if(1===l.type)return Dy.INSTANCE;9!==l.type?r.push(l):r=r.concat(l.expr)}else o=!0}if(0===r.length&&o)return Ly.INSTANCE;r.sort(xy)}if(0!==r.length){if(1===r.length)return r[0];for(var u=1;u<r.length;u++)r[u-1].equals(r[u])&&(r.splice(u,1),u--);if(1===r.length)return r[0];if(i){for(var c=0;c<r.length;c++)for(var d=c+1;d<r.length;d++)if(r[c].negate().equals(r[d]))return Dy.INSTANCE;if(1===r.length)return r[0]}return new e(r,n)}}}]),e}(),jy=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[e,null]))._defaultValue=n,"object"===(void 0===i?"undefined":L(i))?t._info.push(b(_({},i),{key:e})):!0!==i&&t._info.push({key:e,description:i,type:null!=n?void 0===n?"undefined":L(n):void 0}),r}return p(t,e),h(t,[{key:"bindTo",value:function(e){return e.createKey(this.key,this._defaultValue)}},{key:"getValue",value:function(e){return e.getContextKeyValue(this.key)}},{key:"toNegated",value:function(){return this.negate()}},{key:"isEqualTo",value:function(e){return Iy.create(this.key,e)}}],[{key:"all",value:function(){return t._info.values()}}]),t}(Ny);jy._info=[];var Ky=Zm("contextKeyService");function qy(e,t){return e<t?-1:e>t?1:0}function Gy(e,t,n,i){return e<n?-1:e>n?1:t<i?-1:t>i?1:0}function Zy(e,t){if(0===e.type||1===t.type)return!0;if(9===e.type)return 9===t.type&&Yy(e.expr,t.expr);if(9===t.type){var n=!0,i=!1,r=void 0;try{for(var o,a=t.expr[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){if(Zy(e,o.value))return!0}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return!1}if(6===e.type){if(6===t.type)return Yy(t.expr,e.expr);var s=!0,l=!1,u=void 0;try{for(var c,d=e.expr[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){if(Zy(c.value,t))return!0}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return!1}return e.equals(t)}function Yy(e,t){for(var n=0,i=0;n<e.length&&i<t.length;){var r=e[n].cmp(t[i]);if(r<0)return!1;0===r?(n++,i++):i++}return n===e.length}function Qy(e){return 9===e.type?e.expr:[e]}function Xy(e,t){if(!e)throw new Error(t?"Assertion failed (".concat(t,")"):"Assertion Failed")}function $y(e){throw new Error(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unreachable")}function Jy(e){e||vu(new Lu("Soft Assertion Failed"))}function e_(e){e()||(e(),vu(new Lu("Assertion Failed")))}function t_(e,t){for(var n=0;n<e.length-1;){if(!t(e[n],e[n+1]))return!1;n++}return!0}var n_=function(){function e(){u(this,e),this.data=new Map}return h(e,[{key:"add",value:function(e,t){Xy(Da(e)),Xy(Na(t)),Xy(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}},{key:"as",value:function(e){return this.data.get(e)||null}}]),e}(),i_=new n_,r_=function(){function e(){u(this,e),this._coreKeybindings=new Hs,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}return h(e,[{key:"registerKeybindingRule",value:function(t){var n=e.bindToCurrentPlatform(t),i=new Tu;if(n&&n.primary){var r=Xf(n.primary,Ns);r&&i.add(this._registerDefaultKeybinding(r,t.id,t.args,t.weight,0,t.when))}if(n&&Array.isArray(n.secondary))for(var o=0,a=n.secondary.length;o<a;o++){var s=Xf(n.secondary[o],Ns);s&&i.add(this._registerDefaultKeybinding(s,t.id,t.args,t.weight,-o-1,t.when))}return i}},{key:"registerCommandAndKeybindingRule",value:function(e){return Eu(this.registerKeybindingRule(e),sy.registerCommand(e))}},{key:"_registerDefaultKeybinding",value:function(e,t,n,i,r,o){var a=this,s=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:o,weight1:i,weight2:r,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,Mu((function(){s(),a._cachedMergedKeybindings=null}))}},{key:"getDefaultKeybindings",value:function(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(a_)),this._cachedMergedKeybindings.slice(0)}}],[{key:"bindToCurrentPlatform",value:function(e){if(1===Ns){if(e&&e.win)return e.win}else if(2===Ns){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}}]),e}(),o_=new r_;function a_(e,t){if(e.weight1!==t.weight1)return e.weight1-t.weight1;if(e.command&&t.command){if(e.command<t.command)return-1;if(e.command>t.command)return 1}return e.weight2-t.weight2}i_.add("platform.keybindingsRegistry",o_);var s_,l_=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},u_=function(e,t){return function(n,i){t(n,i,e)}};function c_(e){return void 0!==e.command}var d_=function e(t){if(u(this,e),e._instances.has(t))throw new TypeError("MenuId with identifier '".concat(t,"' already exists. Use MenuId.for(ident) or a unique identifier"));e._instances.set(t,this),this.id=t};d_._instances=new Map,d_.CommandPalette=new d_("CommandPalette"),d_.DebugBreakpointsContext=new d_("DebugBreakpointsContext"),d_.DebugCallStackContext=new d_("DebugCallStackContext"),d_.DebugConsoleContext=new d_("DebugConsoleContext"),d_.DebugVariablesContext=new d_("DebugVariablesContext"),d_.NotebookVariablesContext=new d_("NotebookVariablesContext"),d_.DebugHoverContext=new d_("DebugHoverContext"),d_.DebugWatchContext=new d_("DebugWatchContext"),d_.DebugToolBar=new d_("DebugToolBar"),d_.DebugToolBarStop=new d_("DebugToolBarStop"),d_.DebugCallStackToolbar=new d_("DebugCallStackToolbar"),d_.DebugCreateConfiguration=new d_("DebugCreateConfiguration"),d_.EditorContext=new d_("EditorContext"),d_.SimpleEditorContext=new d_("SimpleEditorContext"),d_.EditorContent=new d_("EditorContent"),d_.EditorLineNumberContext=new d_("EditorLineNumberContext"),d_.EditorContextCopy=new d_("EditorContextCopy"),d_.EditorContextPeek=new d_("EditorContextPeek"),d_.EditorContextShare=new d_("EditorContextShare"),d_.EditorTitle=new d_("EditorTitle"),d_.EditorTitleRun=new d_("EditorTitleRun"),d_.EditorTitleContext=new d_("EditorTitleContext"),d_.EditorTitleContextShare=new d_("EditorTitleContextShare"),d_.EmptyEditorGroup=new d_("EmptyEditorGroup"),d_.EmptyEditorGroupContext=new d_("EmptyEditorGroupContext"),d_.EditorTabsBarContext=new d_("EditorTabsBarContext"),d_.EditorTabsBarShowTabsSubmenu=new d_("EditorTabsBarShowTabsSubmenu"),d_.EditorTabsBarShowTabsZenModeSubmenu=new d_("EditorTabsBarShowTabsZenModeSubmenu"),d_.EditorActionsPositionSubmenu=new d_("EditorActionsPositionSubmenu"),d_.ExplorerContext=new d_("ExplorerContext"),d_.ExplorerContextShare=new d_("ExplorerContextShare"),d_.ExtensionContext=new d_("ExtensionContext"),d_.GlobalActivity=new d_("GlobalActivity"),d_.CommandCenter=new d_("CommandCenter"),d_.CommandCenterCenter=new d_("CommandCenterCenter"),d_.LayoutControlMenuSubmenu=new d_("LayoutControlMenuSubmenu"),d_.LayoutControlMenu=new d_("LayoutControlMenu"),d_.MenubarMainMenu=new d_("MenubarMainMenu"),d_.MenubarAppearanceMenu=new d_("MenubarAppearanceMenu"),d_.MenubarDebugMenu=new d_("MenubarDebugMenu"),d_.MenubarEditMenu=new d_("MenubarEditMenu"),d_.MenubarCopy=new d_("MenubarCopy"),d_.MenubarFileMenu=new d_("MenubarFileMenu"),d_.MenubarGoMenu=new d_("MenubarGoMenu"),d_.MenubarHelpMenu=new d_("MenubarHelpMenu"),d_.MenubarLayoutMenu=new d_("MenubarLayoutMenu"),d_.MenubarNewBreakpointMenu=new d_("MenubarNewBreakpointMenu"),d_.PanelAlignmentMenu=new d_("PanelAlignmentMenu"),d_.PanelPositionMenu=new d_("PanelPositionMenu"),d_.ActivityBarPositionMenu=new d_("ActivityBarPositionMenu"),d_.MenubarPreferencesMenu=new d_("MenubarPreferencesMenu"),d_.MenubarRecentMenu=new d_("MenubarRecentMenu"),d_.MenubarSelectionMenu=new d_("MenubarSelectionMenu"),d_.MenubarShare=new d_("MenubarShare"),d_.MenubarSwitchEditorMenu=new d_("MenubarSwitchEditorMenu"),d_.MenubarSwitchGroupMenu=new d_("MenubarSwitchGroupMenu"),d_.MenubarTerminalMenu=new d_("MenubarTerminalMenu"),d_.MenubarViewMenu=new d_("MenubarViewMenu"),d_.MenubarHomeMenu=new d_("MenubarHomeMenu"),d_.OpenEditorsContext=new d_("OpenEditorsContext"),d_.OpenEditorsContextShare=new d_("OpenEditorsContextShare"),d_.ProblemsPanelContext=new d_("ProblemsPanelContext"),d_.SCMInputBox=new d_("SCMInputBox"),d_.SCMChangesSeparator=new d_("SCMChangesSeparator"),d_.SCMChangesContext=new d_("SCMChangesContext"),d_.SCMIncomingChanges=new d_("SCMIncomingChanges"),d_.SCMIncomingChangesContext=new d_("SCMIncomingChangesContext"),d_.SCMIncomingChangesSetting=new d_("SCMIncomingChangesSetting"),d_.SCMOutgoingChanges=new d_("SCMOutgoingChanges"),d_.SCMOutgoingChangesContext=new d_("SCMOutgoingChangesContext"),d_.SCMOutgoingChangesSetting=new d_("SCMOutgoingChangesSetting"),d_.SCMIncomingChangesAllChangesContext=new d_("SCMIncomingChangesAllChangesContext"),d_.SCMIncomingChangesHistoryItemContext=new d_("SCMIncomingChangesHistoryItemContext"),d_.SCMOutgoingChangesAllChangesContext=new d_("SCMOutgoingChangesAllChangesContext"),d_.SCMOutgoingChangesHistoryItemContext=new d_("SCMOutgoingChangesHistoryItemContext"),d_.SCMChangeContext=new d_("SCMChangeContext"),d_.SCMResourceContext=new d_("SCMResourceContext"),d_.SCMResourceContextShare=new d_("SCMResourceContextShare"),d_.SCMResourceFolderContext=new d_("SCMResourceFolderContext"),d_.SCMResourceGroupContext=new d_("SCMResourceGroupContext"),d_.SCMSourceControl=new d_("SCMSourceControl"),d_.SCMSourceControlInline=new d_("SCMSourceControlInline"),d_.SCMSourceControlTitle=new d_("SCMSourceControlTitle"),d_.SCMHistoryTitle=new d_("SCMHistoryTitle"),d_.SCMTitle=new d_("SCMTitle"),d_.SearchContext=new d_("SearchContext"),d_.SearchActionMenu=new d_("SearchActionContext"),d_.StatusBarWindowIndicatorMenu=new d_("StatusBarWindowIndicatorMenu"),d_.StatusBarRemoteIndicatorMenu=new d_("StatusBarRemoteIndicatorMenu"),d_.StickyScrollContext=new d_("StickyScrollContext"),d_.TestItem=new d_("TestItem"),d_.TestItemGutter=new d_("TestItemGutter"),d_.TestProfilesContext=new d_("TestProfilesContext"),d_.TestMessageContext=new d_("TestMessageContext"),d_.TestMessageContent=new d_("TestMessageContent"),d_.TestPeekElement=new d_("TestPeekElement"),d_.TestPeekTitle=new d_("TestPeekTitle"),d_.TestCallStack=new d_("TestCallStack"),d_.TouchBarContext=new d_("TouchBarContext"),d_.TitleBarContext=new d_("TitleBarContext"),d_.TitleBarTitleContext=new d_("TitleBarTitleContext"),d_.TunnelContext=new d_("TunnelContext"),d_.TunnelPrivacy=new d_("TunnelPrivacy"),d_.TunnelProtocol=new d_("TunnelProtocol"),d_.TunnelPortInline=new d_("TunnelInline"),d_.TunnelTitle=new d_("TunnelTitle"),d_.TunnelLocalAddressInline=new d_("TunnelLocalAddressInline"),d_.TunnelOriginInline=new d_("TunnelOriginInline"),d_.ViewItemContext=new d_("ViewItemContext"),d_.ViewContainerTitle=new d_("ViewContainerTitle"),d_.ViewContainerTitleContext=new d_("ViewContainerTitleContext"),d_.ViewTitle=new d_("ViewTitle"),d_.ViewTitleContext=new d_("ViewTitleContext"),d_.CommentEditorActions=new d_("CommentEditorActions"),d_.CommentThreadTitle=new d_("CommentThreadTitle"),d_.CommentThreadActions=new d_("CommentThreadActions"),d_.CommentThreadAdditionalActions=new d_("CommentThreadAdditionalActions"),d_.CommentThreadTitleContext=new d_("CommentThreadTitleContext"),d_.CommentThreadCommentContext=new d_("CommentThreadCommentContext"),d_.CommentTitle=new d_("CommentTitle"),d_.CommentActions=new d_("CommentActions"),d_.CommentsViewThreadActions=new d_("CommentsViewThreadActions"),d_.InteractiveToolbar=new d_("InteractiveToolbar"),d_.InteractiveCellTitle=new d_("InteractiveCellTitle"),d_.InteractiveCellDelete=new d_("InteractiveCellDelete"),d_.InteractiveCellExecute=new d_("InteractiveCellExecute"),d_.InteractiveInputExecute=new d_("InteractiveInputExecute"),d_.InteractiveInputConfig=new d_("InteractiveInputConfig"),d_.ReplInputExecute=new d_("ReplInputExecute"),d_.IssueReporter=new d_("IssueReporter"),d_.NotebookToolbar=new d_("NotebookToolbar"),d_.NotebookStickyScrollContext=new d_("NotebookStickyScrollContext"),d_.NotebookCellTitle=new d_("NotebookCellTitle"),d_.NotebookCellDelete=new d_("NotebookCellDelete"),d_.NotebookCellInsert=new d_("NotebookCellInsert"),d_.NotebookCellBetween=new d_("NotebookCellBetween"),d_.NotebookCellListTop=new d_("NotebookCellTop"),d_.NotebookCellExecute=new d_("NotebookCellExecute"),d_.NotebookCellExecuteGoTo=new d_("NotebookCellExecuteGoTo"),d_.NotebookCellExecutePrimary=new d_("NotebookCellExecutePrimary"),d_.NotebookDiffCellInputTitle=new d_("NotebookDiffCellInputTitle"),d_.NotebookDiffCellMetadataTitle=new d_("NotebookDiffCellMetadataTitle"),d_.NotebookDiffCellOutputsTitle=new d_("NotebookDiffCellOutputsTitle"),d_.NotebookOutputToolbar=new d_("NotebookOutputToolbar"),d_.NotebookOutlineFilter=new d_("NotebookOutlineFilter"),d_.NotebookOutlineActionMenu=new d_("NotebookOutlineActionMenu"),d_.NotebookEditorLayoutConfigure=new d_("NotebookEditorLayoutConfigure"),d_.NotebookKernelSource=new d_("NotebookKernelSource"),d_.BulkEditTitle=new d_("BulkEditTitle"),d_.BulkEditContext=new d_("BulkEditContext"),d_.TimelineItemContext=new d_("TimelineItemContext"),d_.TimelineTitle=new d_("TimelineTitle"),d_.TimelineTitleContext=new d_("TimelineTitleContext"),d_.TimelineFilterSubMenu=new d_("TimelineFilterSubMenu"),d_.AccountsContext=new d_("AccountsContext"),d_.SidebarTitle=new d_("SidebarTitle"),d_.PanelTitle=new d_("PanelTitle"),d_.AuxiliaryBarTitle=new d_("AuxiliaryBarTitle"),d_.AuxiliaryBarHeader=new d_("AuxiliaryBarHeader"),d_.TerminalInstanceContext=new d_("TerminalInstanceContext"),d_.TerminalEditorInstanceContext=new d_("TerminalEditorInstanceContext"),d_.TerminalNewDropdownContext=new d_("TerminalNewDropdownContext"),d_.TerminalTabContext=new d_("TerminalTabContext"),d_.TerminalTabEmptyAreaContext=new d_("TerminalTabEmptyAreaContext"),d_.TerminalStickyScrollContext=new d_("TerminalStickyScrollContext"),d_.WebviewContext=new d_("WebviewContext"),d_.InlineCompletionsActions=new d_("InlineCompletionsActions"),d_.InlineEditsActions=new d_("InlineEditsActions"),d_.InlineEditActions=new d_("InlineEditActions"),d_.NewFile=new d_("NewFile"),d_.MergeInput1Toolbar=new d_("MergeToolbar1Toolbar"),d_.MergeInput2Toolbar=new d_("MergeToolbar2Toolbar"),d_.MergeBaseToolbar=new d_("MergeBaseToolbar"),d_.MergeInputResultToolbar=new d_("MergeToolbarResultToolbar"),d_.InlineSuggestionToolbar=new d_("InlineSuggestionToolbar"),d_.InlineEditToolbar=new d_("InlineEditToolbar"),d_.ChatContext=new d_("ChatContext"),d_.ChatCodeBlock=new d_("ChatCodeblock"),d_.ChatCompareBlock=new d_("ChatCompareBlock"),d_.ChatMessageTitle=new d_("ChatMessageTitle"),d_.ChatExecute=new d_("ChatExecute"),d_.ChatExecuteSecondary=new d_("ChatExecuteSecondary"),d_.ChatInputSide=new d_("ChatInputSide"),d_.AccessibleView=new d_("AccessibleView"),d_.MultiDiffEditorFileToolbar=new d_("MultiDiffEditorFileToolbar"),d_.DiffEditorHunkToolbar=new d_("DiffEditorHunkToolbar"),d_.DiffEditorSelectionToolbar=new d_("DiffEditorSelectionToolbar");var h_=Zm("menuService"),f_=function(){function e(t){u(this,e),this.id=t,this.has=function(e){return e===t}}return h(e,null,[{key:"for",value:function(t){var n=this._all.get(t);return n||(n=new e(t),this._all.set(t,n)),n}},{key:"merge",value:function(t){var n=new Set,i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l instanceof e&&n.add(l.id)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}]),e}();f_._all=new Map;var g_=new(function(){function e(){u(this,e),this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new $u({merge:f_.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}return h(e,[{key:"addCommand",value:function(e){var t=this;return this._commands.set(e.id,e),this._onDidChangeMenu.fire(f_.for(d_.CommandPalette)),Mu((function(){t._commands.delete(e.id)&&t._onDidChangeMenu.fire(f_.for(d_.CommandPalette))}))}},{key:"getCommand",value:function(e){return this._commands.get(e)}},{key:"getCommands",value:function(){var e=new Map;return this._commands.forEach((function(t,n){return e.set(n,t)})),e}},{key:"appendMenuItem",value:function(e,t){var n=this,i=this._menuItems.get(e);i||(i=new Hs,this._menuItems.set(e,i));var r=i.push(t);return this._onDidChangeMenu.fire(f_.for(e)),Mu((function(){r(),n._onDidChangeMenu.fire(f_.for(e))}))}},{key:"appendMenuItems",value:function(e){var t=new Tu,n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=s.id,u=s.item;t.add(this.appendMenuItem(l,u))}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}},{key:"getMenuItems",value:function(e){var t;return t=this._menuItems.has(e)?x(this._menuItems.get(e)):[],e===d_.CommandPalette&&this._appendImplicitItems(t),t}},{key:"_appendImplicitItems",value:function(e){var t=new Set,n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;c_(s)&&(t.add(s.command.id),s.alt&&t.add(s.alt.id))}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this._commands.forEach((function(n,i){t.has(i)||e.push({command:n})}))}}]),e}()),v_=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,["submenuitem.".concat(e.submenu.id),"string"==typeof e.title?e.title:e.title.value,i,"submenu"])).item=e,r.hideActions=n,r}return p(t,e),t}(iy),p_=s_=function(){function e(t,n,i,r,o,a,s){var l,c,d;if(u(this,e),this.hideActions=r,this.menuKeybinding=o,this._commandService=s,this.id=t.id,this.label=s_.label(t,i),this.tooltip=null!==(c="string"==typeof t.tooltip?t.tooltip:null===(l=t.tooltip)||void 0===l?void 0:l.value)&&void 0!==c?c:"",this.enabled=!t.precondition||a.contextMatchesRules(t.precondition),this.checked=void 0,t.toggled){var h=t.toggled.condition?t.toggled:{condition:t.toggled};this.checked=a.contextMatchesRules(h.condition),this.checked&&h.tooltip&&(this.tooltip="string"==typeof h.tooltip?h.tooltip:h.tooltip.value),this.checked&&ny.isThemeIcon(h.icon)&&(d=h.icon),this.checked&&h.title&&(this.label="string"==typeof h.title?h.title:h.title.value)}d||(d=ny.isThemeIcon(t.icon)?t.icon:void 0),this.item=t,this.alt=n?new s_(n,void 0,i,r,void 0,a,s):void 0,this._options=i,this.class=d&&ny.asClassName(d)}return h(e,[{key:"run",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,r,o,a=[];return(null===(r=this._options)||void 0===r?void 0:r.arg)&&(a=x(a).concat([this._options.arg])),(null===(o=this._options)||void 0===o?void 0:o.shouldForwardArgs)&&(a=x(a).concat(x(t))),(i=this._commandService).executeCommand.apply(i,[this.id].concat(x(a)))}}],[{key:"label",value:function(e,t){return(null==t?void 0:t.renderShortTitle)&&e.shortTitle?"string"==typeof e.shortTitle?e.shortTitle:e.shortTitle.value:"string"==typeof e.title?e.title:e.title.value}}]),e}();p_=s_=l_([u_(5,Ky),u_(6,ay)],p_);var m_=function e(t){u(this,e),this.desc=t};function y_(e){var t,n=[],i=new e,r=i.desc,o=r.f1,a=r.menu,s=r.keybinding,l=k(r,["f1","menu","keybinding"]);if(sy.getCommand(l.id))throw new Error("Cannot register two commands with the same id: ".concat(l.id));if(n.push(sy.registerCommand({id:l.id,handler:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=i).run.apply(t,[e].concat(x(r)))},metadata:l.metadata})),Array.isArray(a)){var u=!0,c=!1,d=void 0;try{for(var h,f=a[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;n.push(g_.appendMenuItem(g.id,_({command:b(_({},l),{precondition:null===g.precondition?void 0:l.precondition})},g)))}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}else a&&n.push(g_.appendMenuItem(a.id,_({command:b(_({},l),{precondition:null===a.precondition?void 0:l.precondition})},a)));if(o&&(n.push(g_.appendMenuItem(d_.CommandPalette,{command:l,when:l.precondition})),n.push(g_.addCommand(l))),Array.isArray(s)){var v=!0,p=!1,m=void 0;try{for(var y,w=s[Symbol.iterator]();!(v=(y=w.next()).done);v=!0){var C=y.value;n.push(o_.registerKeybindingRule(b(_({},C),{id:l.id,when:l.precondition?Sy.and(l.precondition,C.when):C.when})))}}catch(e){p=!0,m=e}finally{try{v||null==w.return||w.return()}finally{if(p)throw m}}}else s&&n.push(o_.registerKeybindingRule(b(_({},s),{id:l.id,when:l.precondition?Sy.and(l.precondition,s.when):s.when})));return{dispose:function(){Iu(n)}}}var __,b_=Zm("telemetryService"),k_=Zm("logService");!function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"}(__||(__={}));var w_=__.Info,C_=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments)).level=w_,e._onDidChangeLogLevel=e._register(new Zu),e.onDidChangeLogLevel=e._onDidChangeLogLevel.event,e}return p(t,e),h(t,[{key:"setLevel",value:function(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}},{key:"getLevel",value:function(){return this.level}},{key:"checkLogLevel",value:function(e){return this.level!==__.Off&&this.level<=e}}]),t}(Ru),S_=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w_,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u(this,t),(e=l(this,t)).useColors=i,e.setLevel(n),e}return p(t,e),h(t,[{key:"trace",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,o;this.checkLogLevel(__.Trace)&&(this.useColors?(r=console).log.apply(r,["%cTRACE","color: #888",e].concat(x(n))):(o=console).log.apply(o,[e].concat(x(n))))}},{key:"debug",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,o;this.checkLogLevel(__.Debug)&&(this.useColors?(r=console).log.apply(r,["%cDEBUG","background: #eee; color: #888",e].concat(x(n))):(o=console).log.apply(o,[e].concat(x(n))))}},{key:"info",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,o;this.checkLogLevel(__.Info)&&(this.useColors?(r=console).log.apply(r,["%c INFO","color: #33f",e].concat(x(n))):(o=console).log.apply(o,[e].concat(x(n))))}},{key:"warn",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,o;this.checkLogLevel(__.Warning)&&(this.useColors?(r=console).log.apply(r,["%c WARN","color: #993",e].concat(x(n))):(o=console).log.apply(o,[e].concat(x(n))))}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,o;this.checkLogLevel(__.Error)&&(this.useColors?(r=console).log.apply(r,["%c  ERR","color: #f33",e].concat(x(n))):(o=console).error.apply(o,[e].concat(x(n))))}}]),t}(C_),x_=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).loggers=e,e.length&&n.setLevel(e[0].getLevel()),n}return p(t,e),h(t,[{key:"setLevel",value:function(e){var n=!0,i=!1,r=void 0;try{for(var o,a=this.loggers[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.setLevel(e)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}g(v(t.prototype),"setLevel",this).call(this,e)}},{key:"trace",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=!0,o=!1,a=void 0;try{for(var s,l=this.loggers[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u;(u=s.value).trace.apply(u,[e].concat(x(n)))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}},{key:"debug",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=!0,o=!1,a=void 0;try{for(var s,l=this.loggers[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u;(u=s.value).debug.apply(u,[e].concat(x(n)))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}},{key:"info",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=!0,o=!1,a=void 0;try{for(var s,l=this.loggers[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u;(u=s.value).info.apply(u,[e].concat(x(n)))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}},{key:"warn",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=!0,o=!1,a=void 0;try{for(var s,l=this.loggers[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u;(u=s.value).warn.apply(u,[e].concat(x(n)))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=!0,o=!1,a=void 0;try{for(var s,l=this.loggers[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u;(u=s.value).error.apply(u,[e].concat(x(n)))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}},{key:"dispose",value:function(){var e=!0,n=!1,i=void 0;try{for(var r,o=this.loggers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){r.value.dispose()}}catch(e){n=!0,i=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}g(v(t.prototype),"dispose",this).call(this)}}]),t}(C_);new jy("logLevel",function(e){switch(e){case __.Trace:return"trace";case __.Debug:return"debug";case __.Info:return"info";case __.Warning:return"warn";case __.Error:return"error";case __.Off:return"off"}}(__.Info));var L_,D_=function(){function e(t){u(this,e),this.id=t.id,this.precondition=t.precondition,this._kbOpts=t.kbOpts,this._menuOpts=t.menuOpts,this.metadata=t.metadata}return h(e,[{key:"register",value:function(){var e=this;if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){var t=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts],n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=s.kbExpr;this.precondition&&(l=l?Sy.and(l,this.precondition):this.precondition);var u={id:this.id,weight:s.weight,args:s.args,when:l,primary:s.primary,secondary:s.secondary,win:s.win,linux:s.linux,mac:s.mac};o_.registerKeybindingRule(u)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}sy.registerCommand({id:this.id,handler:function(t,n){return e.runCommand(t,n)},metadata:this.metadata})}},{key:"_registerMenuItem",value:function(e){g_.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}]),e}(),N_=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments))._implementations=[],e}return p(t,e),h(t,[{key:"addImplementation",value:function(e,t,n,i){var r=this;return this._implementations.push({priority:e,name:t,implementation:n,when:i}),this._implementations.sort((function(e,t){return t.priority-e.priority})),{dispose:function(){for(var e=0;e<r._implementations.length;e++)if(r._implementations[e].implementation===n)return void r._implementations.splice(e,1)}}}},{key:"runCommand",value:function(e,t){var n=e.get(k_),i=e.get(Ky);n.trace("Executing Command '".concat(this.id,"' which has ").concat(this._implementations.length," bound."));var r=!0,o=!1,a=void 0;try{for(var s,l=this._implementations[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;if(u.when){var c=i.getContext(Op());if(!u.when.evaluate(c))continue}var d=u.implementation(e,t);if(d){if(n.trace("Command '".concat(this.id,"' was handled by '").concat(u.name,"'.")),"boolean"==typeof d)return;return d}}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}n.trace("The Command '".concat(this.id,"' was not handled by any implementation."))}}]),t}(D_),I_=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[n])).command=e,i}return p(t,e),h(t,[{key:"runCommand",value:function(e,t){return this.command.runCommand(e,t)}}]),t}(D_),E_=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"runCommand",value:function(e,n){var i=this;return t.runEditorCommand(e,n,this.precondition,(function(e,t,n){return i.runEditorCommand(e,t,n)}))}}],[{key:"bindToContribution",value:function(e){return function(t){function n(e){var t;return u(this,n),(t=l(this,n,[e]))._callback=e.handler,t}return p(n,t),h(n,[{key:"runEditorCommand",value:function(t,n,i){var r=e(n);r&&this._callback(r,i)}}]),n}(t)}},{key:"runEditorCommand",value:function(e,t,n,i){var r=e.get(Ym),o=r.getFocusedCodeEditor()||r.getActiveCodeEditor();if(o)return o.invokeWithinContext((function(e){if(e.get(Ky).contextMatchesRules(null!=n?n:void 0))return i(e,o,t)}))}}]),t}(D_),M_=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[t.convertOptions(e)])).label=e.label,n.alias=e.alias,n}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}},{key:"reportTelemetry",value:function(e,t){e.get(b_).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}],[{key:"convertOptions",value:function(e){var t,n;function i(t){return t.menuId||(t.menuId=d_.EditorContext),t.title||(t.title=e.label),t.when=Sy.and(e.precondition,t.when),t}(t=Array.isArray(e.menuOpts)?e.menuOpts:e.menuOpts?[e.menuOpts]:[],Array.isArray(e.contextMenuOpts))?(n=t).push.apply(n,x(e.contextMenuOpts.map(i))):e.contextMenuOpts&&t.push(i(e.contextMenuOpts));return e.menuOpts=t,e}}]),t}(E_),T_=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments))._implementations=[],e}return p(t,e),h(t,[{key:"addImplementation",value:function(e,t){var n=this;return this._implementations.push([e,t]),this._implementations.sort((function(e,t){return t[0]-e[0]})),{dispose:function(){for(var e=0;e<n._implementations.length;e++)if(n._implementations[e][1]===t)return void n._implementations.splice(e,1)}}}},{key:"run",value:function(e,t,n){var i=!0,r=!1,o=void 0;try{for(var a,s=this._implementations[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value[1](e,t,n);if(l){if("boolean"==typeof l)return;return l}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}}]),t}(M_),R_=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"run",value:function(e){for(var t=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=e.get(Ym),a=o.getFocusedCodeEditor()||o.getActiveCodeEditor();if(a)return a.invokeWithinContext((function(e){var n,r,o=e.get(Ky),s=e.get(k_);if(o.contextMatchesRules(null!==(n=t.desc.precondition)&&void 0!==n?n:void 0))return t.runEditorCommand.apply(t,[e,a].concat(x(i)));s.debug("[EditorAction2] NOT running command because its precondition is FALSE",t.desc.id,null===(r=t.desc.precondition)||void 0===r?void 0:r.serialize())}))}}]),t}(m_);function A_(e,t){sy.registerCommand(e,(function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=e.get(Gm),a=C(i,2),s=a[0],l=a[1];Oa(ed.isUri(s)),Oa(dd.isIPosition(l));var u=e.get(Qm).getModel(s);if(u){var c,d=dd.lift(l);return(c=o).invokeFunction.apply(c,[t,u,d].concat(x(i.slice(2))))}return e.get(Xm).createModelReference(s).then((function(e){return new Promise((function(n,r){try{n(o.invokeFunction(t,e.object.textEditorModel,dd.lift(l),i.slice(2)))}catch(e){r(e)}})).finally((function(){e.dispose()}))}))}))}function P_(e){return H_.INSTANCE.registerEditorCommand(e),e}function O_(e){var t=new e;return H_.INSTANCE.registerEditorAction(t),t}function F_(e){return H_.INSTANCE.registerEditorAction(e),e}function W_(e){H_.INSTANCE.registerEditorAction(e)}function B_(e,t,n){H_.INSTANCE.registerEditorContribution(e,t,n)}!function(e){e.getEditorCommand=function(e){return H_.INSTANCE.getEditorCommand(e)},e.getEditorActions=function(){return H_.INSTANCE.getEditorActions()},e.getEditorContributions=function(){return H_.INSTANCE.getEditorContributions()},e.getSomeEditorContributions=function(e){return H_.INSTANCE.getEditorContributions().filter((function(t){return e.indexOf(t.id)>=0}))},e.getDiffEditorContributions=function(){return H_.INSTANCE.getDiffEditorContributions()}}(L_||(L_={}));var H_=function(){function e(){u(this,e),this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}return h(e,[{key:"registerEditorContribution",value:function(e,t,n){this.editorContributions.push({id:e,ctor:t,instantiation:n})}},{key:"getEditorContributions",value:function(){return this.editorContributions.slice(0)}},{key:"getDiffEditorContributions",value:function(){return this.diffEditorContributions.slice(0)}},{key:"registerEditorAction",value:function(e){e.register(),this.editorActions.push(e)}},{key:"getEditorActions",value:function(){return this.editorActions}},{key:"registerEditorCommand",value:function(e){e.register(),this.editorCommands[e.id]=e}},{key:"getEditorCommand",value:function(e){return this.editorCommands[e]||null}}]),e}();function V_(e){return e.register(),e}H_.INSTANCE=new H_,i_.add("editor.contributions",H_.INSTANCE);var z_=V_(new N_({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:d_.MenubarEditMenu,group:"1_do",title:Xa({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:d_.CommandPalette,group:"",title:Xa("undo","Undo"),order:1}]}));V_(new I_(z_,{id:"default:undo",precondition:void 0}));var U_=V_(new N_({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:d_.MenubarEditMenu,group:"1_do",title:Xa({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:d_.CommandPalette,group:"",title:Xa("redo","Redo"),order:1}]}));V_(new I_(U_,{id:"default:redo",precondition:void 0}));var j_=V_(new N_({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:d_.MenubarSelectionMenu,group:"1_basic",title:Xa({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:d_.CommandPalette,group:"",title:Xa("selectAll","Select All"),order:1}]})),K_="default",q_=!1;function G_(e){bs&&(q_||(q_=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(e.message))}var Z_,Y_=function e(t,n,i,r,o){u(this,e),this.vsWorker=t,this.req=n,this.channel=i,this.method=r,this.args=o,this.type=0},Q_=function e(t,n,i,r){u(this,e),this.vsWorker=t,this.seq=n,this.res=i,this.err=r,this.type=1},X_=function e(t,n,i,r,o){u(this,e),this.vsWorker=t,this.req=n,this.channel=i,this.eventName=r,this.arg=o,this.type=2},$_=function e(t,n,i){u(this,e),this.vsWorker=t,this.req=n,this.event=i,this.type=3},J_=function e(t,n){u(this,e),this.vsWorker=t,this.req=n,this.type=4},eb=function(){function e(t){u(this,e),this._workerId=-1,this._handler=t,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}return h(e,[{key:"setWorkerId",value:function(e){this._workerId=e}},{key:"sendMessage",value:function(e,t,n){var i=this,r=String(++this._lastSentReq);return new Promise((function(o,a){i._pendingReplies[r]={resolve:o,reject:a},i._send(new Y_(i._workerId,r,e,t,n))}))}},{key:"listen",value:function(e,t,n){var i=this,r=null,o=new Zu({onWillAddFirstListener:function(){r=String(++i._lastSentReq),i._pendingEmitters.set(r,o),i._send(new X_(i._workerId,r,e,t,n))},onDidRemoveLastListener:function(){i._pendingEmitters.delete(r),i._send(new J_(i._workerId,r)),r=null}});return o.event}},{key:"handleMessage",value:function(e){e&&e.vsWorker&&(-1!==this._workerId&&e.vsWorker!==this._workerId||this._handleMessage(e))}},{key:"createProxyToRemoteChannel",value:function(e,t){var n=this,i={get:function(i,r){if("string"==typeof r&&!i[r])if(ib(r))i[r]=function(t){return n.listen(e,r,t)};else if(nb(r))i[r]=n.listen(e,r,void 0);else if(36===r.charCodeAt(0)){var o=n;i[r]=s((function(){var n,i,a,s=arguments;return E(this,(function(l){switch(l.label){case 0:for(n=s.length,i=new Array(n),a=0;a<n;a++)i[a]=s[a];return[4,null==t?void 0:t()];case 1:return l.sent(),[2,o.sendMessage(e,r,i)]}}))}))}return i[r]}};return new Proxy(Object.create(null),i)}},{key:"_handleMessage",value:function(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}},{key:"_handleReplyMessage",value:function(e){if(this._pendingReplies[e.seq]){var t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){var n=e.err;return e.err.$isError&&((n=new Error).name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),void t.reject(n)}t.resolve(e.res)}else console.warn("Got reply to unknown seq")}},{key:"_handleRequestMessage",value:function(e){var t=this,n=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then((function(e){t._send(new Q_(t._workerId,n,e,void 0))}),(function(e){e.detail instanceof Error&&(e.detail=mu(e.detail)),t._send(new Q_(t._workerId,n,void 0,mu(e)))}))}},{key:"_handleSubscribeEventMessage",value:function(e){var t=this,n=e.req,i=this._handler.handleEvent(e.channel,e.eventName,e.arg)((function(e){t._send(new $_(t._workerId,n,e))}));this._pendingEvents.set(n,i)}},{key:"_handleEventMessage",value:function(e){this._pendingEmitters.has(e.req)?this._pendingEmitters.get(e.req).fire(e.event):console.warn("Got event for unknown req")}},{key:"_handleUnsubscribeEventMessage",value:function(e){this._pendingEvents.has(e.req)?(this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)):console.warn("Got unsubscribe for unknown req")}},{key:"_send",value:function(e){var t=[];if(0===e.type)for(var n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else 1===e.type&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}]),e}(),tb=function(e){function t(e,n){var i,r;u(this,t),i=l(this,t),r=i,i._localChannels=new Map,i._worker=i._register(e.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:n.esmModuleLocation,label:n.label},(function(e){i._protocol.handleMessage(e)}),(function(e){vu(e)}))),i._protocol=new eb({sendMessage:function(e,t){i._worker.postMessage(e,t)},handleMessage:function(e,t,n){return i._handleMessage(e,t,n)},handleEvent:function(e,t,n){return i._handleEvent(e,t,n)}}),i._protocol.setWorkerId(i._worker.getId());var o=null,a=globalThis.require;return void 0!==a&&"function"==typeof a.getConfig?o=a.getConfig():void 0!==globalThis.requirejs&&(o=globalThis.requirejs.s.contexts._.config),i._onModuleLoaded=i._protocol.sendMessage(K_,"$initialize",[i._worker.getId(),JSON.parse(JSON.stringify(o)),n.amdModuleId]),i.proxy=i._protocol.createProxyToRemoteChannel(K_,s((function(){return E(this,(function(e){switch(e.label){case 0:return[4,r._onModuleLoaded];case 1:return e.sent(),[2]}}))}))),i._onModuleLoaded.catch((function(e){i._onError("Worker failed to load "+n.amdModuleId,e)})),i}return p(t,e),h(t,[{key:"_handleMessage",value:function(e,t,n){var i=this._localChannels.get(e);if(!i)return Promise.reject(new Error("Missing channel ".concat(e," on main thread")));if("function"!=typeof i[t])return Promise.reject(new Error("Missing method ".concat(t," on main thread channel ").concat(e)));try{return Promise.resolve(i[t].apply(i,n))}catch(e){return Promise.reject(e)}}},{key:"_handleEvent",value:function(e,t,n){var i=this._localChannels.get(e);if(!i)throw new Error("Missing channel ".concat(e," on main thread"));if(ib(t)){var r=i[t].call(i,n);if("function"!=typeof r)throw new Error("Missing dynamic event ".concat(t," on main thread channel ").concat(e,"."));return r}if(nb(t)){var o=i[t];if("function"!=typeof o)throw new Error("Missing event ".concat(t," on main thread channel ").concat(e,"."));return o}throw new Error("Malformed event name ".concat(t))}},{key:"setChannel",value:function(e,t){this._localChannels.set(e,t)}},{key:"_onError",value:function(e,t){console.error(e),console.info(t)}}]),t}(Ru);function nb(e){return"o"===e[0]&&"n"===e[1]&&lf(e.charCodeAt(2))}function ib(e){return/^onDynamic/.test(e)&&lf(e.charCodeAt(9))}function rb(e,t){var n=globalThis.MonacoEnvironment;if(null==n?void 0:n.createTrustedTypesPolicy)try{return n.createTrustedTypesPolicy(e,t)}catch(e){return void vu(e)}try{var i;return null===(i=globalThis.trustedTypes)||void 0===i?void 0:i.createPolicy(e,t)}catch(e){return void vu(e)}}function ob(e,t){var n=globalThis.MonacoEnvironment;if(n){if("function"==typeof n.getWorker)return n.getWorker("workerMain.js",t);if("function"==typeof n.getWorkerUrl){var i=n.getWorkerUrl("workerMain.js",t);return new Worker(Z_?Z_.createScriptURL(i):i,{name:t,type:"module"})}}if(e){var r=function(e,t){var n=/^((http:)|(https:)|(file:)|(vscode-file:))/.test(t);if(n&&t.substring(0,globalThis.origin.length)!==globalThis.origin);else{var i=t.lastIndexOf("?"),r=t.lastIndexOf("#",i),o=i>0?new URLSearchParams(t.substring(i+1,~r?r:void 0)):new URLSearchParams;Uv.addSearchParam(o,!0,!0),t=o.toString()?"".concat(t,"?").concat(o.toString(),"#").concat(e):"".concat(t,"#").concat(e)}var a=new Blob([aa(["/*".concat(e,"*/"),void 0,"globalThis._VSCODE_NLS_MESSAGES = ".concat(JSON.stringify(Ga()),";"),"globalThis._VSCODE_NLS_LANGUAGE = ".concat(JSON.stringify(Za()),";"),"globalThis._VSCODE_FILE_ROOT = '".concat(globalThis._VSCODE_FILE_ROOT,"';"),"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;","await import(ttPolicy?.createScriptURL('".concat(t,"') ?? '").concat(t,"');"),"globalThis.postMessage({ type: 'vscode-worker-ready' });","/*".concat(e,"*/")]).join("")],{type:"application/javascript"});return URL.createObjectURL(a)}(t,e.toString(!0));return function(e){return new Promise((function(t,n){e.onmessage=function(n){"vscode-worker-ready"===n.data.type&&(e.onmessage=null,t(e))},e.onerror=n}))}(new Worker(Z_?Z_.createScriptURL(r):r,{name:t,type:"module"}))}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}Z_="object"===("undefined"==typeof self?"undefined":L(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name&&void 0!==globalThis.workerttPolicy?globalThis.workerttPolicy:rb("defaultWorkerFactory",{createScriptURL:function(e){return e}});var ab,sb=function(e){function t(e,n,i,r,o,a){var s;u(this,t),(s=l(this,t)).id=i,s.label=r;var c=ob(e,r);return!function(e){return"function"==typeof e.then}(c)?s.worker=Promise.resolve(c):s.worker=c,s.postMessage(n,[]),s.worker.then((function(e){e.onmessage=function(e){o(e.data)},e.onmessageerror=a,"function"==typeof e.addEventListener&&e.addEventListener("error",a)})),s._register(Mu((function(){var e;null===(e=s.worker)||void 0===e||e.then((function(e){e.onmessage=null,e.onmessageerror=null,e.removeEventListener("error",a),e.terminate()})),s.worker=null}))),s}return p(t,e),h(t,[{key:"getId",value:function(){return this.id}},{key:"postMessage",value:function(e,t){var n,i=this;null===(n=this.worker)||void 0===n||n.then((function(n){try{n.postMessage(e,t)}catch(e){vu(e),vu(new Error("FAILED to post message to '".concat(i.label,"'-worker"),{cause:e}))}}))}}]),t}(Ru),lb=function e(t,n){u(this,e),this.amdModuleId=t,this.label=n,this.esmModuleLocation=jv.asBrowserUri("".concat(t,".esm.js"))},ub=function(){function e(){u(this,e),this._webWorkerFailedBeforeError=!1}return h(e,[{key:"create",value:function(t,n,i){var r=this,o=++e.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new sb(t.esmModuleLocation,t.amdModuleId,o,t.label||"anonymous"+o,n,(function(e){G_(e),r._webWorkerFailedBeforeError=e,i(e)}))}}]),e}();ub.LAST_WORKER_ID=0,function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"}(ab||(ab={}));var cb=function(){function e(t){if(u(this,e),this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=t.open,this.close=t.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(t.notIn))for(var n=0,i=t.notIn.length;n<i;n++){switch(t.notIn[n]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1}}}return h(e,[{key:"isOK",value:function(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}},{key:"shouldAutoClose",value:function(e,t){if(0===e.getTokenCount())return!0;var n=e.findTokenIndexAtOffset(t-2),i=e.getStandardTokenType(n);return this.isOK(i)}},{key:"_findNeutralCharacterInRange",value:function(e,t){for(var n=e;n<=t;n++){var i=String.fromCharCode(n);if(!this.open.includes(i)&&!this.close.includes(i))return i}return null}},{key:"findNeutralCharacter",value:function(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}]),e}(),db=function e(t){u(this,e),this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;var n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;hb(this.autoClosingPairsOpenByStart,s.open.charAt(0),s),hb(this.autoClosingPairsOpenByEnd,s.open.charAt(s.open.length-1),s),hb(this.autoClosingPairsCloseByStart,s.close.charAt(0),s),hb(this.autoClosingPairsCloseByEnd,s.close.charAt(s.close.length-1),s),1===s.close.length&&1===s.open.length&&hb(this.autoClosingPairsCloseSingleChar,s.close,s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}};function hb(e,t,n){e.has(t)?e.get(t).push(n):e.set(t,[n])}var fb=function(){function e(t){if(u(this,e),t.autoClosingPairs?this._autoClosingPairs=t.autoClosingPairs.map((function(e){return new cb(e)})):t.brackets?this._autoClosingPairs=t.brackets.map((function(e){return new cb({open:e[0],close:e[1]})})):this._autoClosingPairs=[],t.__electricCharacterSupport&&t.__electricCharacterSupport.docComment){var n=t.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new cb({open:n.open,close:n.close||""}))}this._autoCloseBeforeForQuotes="string"==typeof t.autoCloseBefore?t.autoCloseBefore:e.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets="string"==typeof t.autoCloseBefore?t.autoCloseBefore:e.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=t.surroundingPairs||this._autoClosingPairs}return h(e,[{key:"getAutoClosingPairs",value:function(){return this._autoClosingPairs}},{key:"getAutoCloseBeforeSet",value:function(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}},{key:"getSurroundingPairs",value:function(){return this._surroundingPairs}}]),e}();function gb(e,t){for(var n=e.getCount(),i=e.findTokenIndexAtOffset(t),r=e.getLanguageId(i),o=i;o+1<n&&e.getLanguageId(o+1)===r;)o++;for(var a=i;a>0&&e.getLanguageId(a-1)===r;)a--;return new vb(e,r,a,o+1,e.getStartOffset(a),e.getEndOffset(o))}fb.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=";:.,=}])> \n\t",fb.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS="'\"`;:.,=}])> \n\t";var vb=function(){function e(t,n,i,r,o,a){u(this,e),this._scopedLineTokensBrand=void 0,this._actual=t,this.languageId=n,this._firstTokenIndex=i,this._lastTokenIndex=r,this.firstCharOffset=o,this._lastCharOffset=a,this.languageIdCodec=t.languageIdCodec}return h(e,[{key:"getLineContent",value:function(){var e=this._actual.getLineContent();return e.substring(this.firstCharOffset,this._lastCharOffset)}},{key:"getLineLength",value:function(){return this._lastCharOffset-this.firstCharOffset}},{key:"getActualLineContentBefore",value:function(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}},{key:"getTokenCount",value:function(){return this._lastTokenIndex-this._firstTokenIndex}},{key:"findTokenIndexAtOffset",value:function(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}},{key:"getStandardTokenType",value:function(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}},{key:"toIViewLineTokens",value:function(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}]),e}();function pb(e){return!!(3&e)}var mb,yb,_b,bb,kb="undefined"!=typeof Buffer,wb=function(){function e(t){u(this,e),this.buffer=t,this.byteLength=this.buffer.byteLength}return h(e,[{key:"toString",value:function(){return kb?this.buffer.toString():(mb||(mb=new TextDecoder),mb.decode(this.buffer))}}],[{key:"wrap",value:function(t){return kb&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new e(t)}}]),e}();function Cb(e,t){return(e[t+0]|0)>>>0|e[t+1]<<8>>>0}function Sb(e,t,n){e[n+0]=255&t,t>>>=8,e[n+1]=255&t}function xb(e,t){return e[t]*Math.pow(2,24)+e[t+1]*Math.pow(2,16)+e[t+2]*Math.pow(2,8)+e[t+3]}function Lb(e,t,n){e[n+3]=t,t>>>=8,e[n+2]=t,t>>>=8,e[n+1]=t,t>>>=8,e[n]=t}function Db(e,t){return e[t]}function Nb(e,t,n){e[n]=t}function Ib(){return yb||(yb=new TextDecoder("UTF-16LE")),yb}function Eb(){return bb||(bb=Ms()?Ib():(_b||(_b=new TextDecoder("UTF-16BE")),_b)),bb}function Mb(e,t,n){var i=new Uint16Array(e.buffer,t,n);return n>0&&(65279===i[0]||65534===i[0])?function(e,t,n){for(var i=[],r=0,o=0;o<n;o++){var a=Cb(e,t);t+=2,i[r++]=String.fromCharCode(a)}return i.join("")}(e,t,n):Ib().decode(i)}var Tb=function(){function e(t){u(this,e),this._capacity=0|t,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}return h(e,[{key:"reset",value:function(){this._completedStrings=null,this._bufferLength=0}},{key:"build",value:function(){return null!==this._completedStrings?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}},{key:"_buildBuffer",value:function(){if(0===this._bufferLength)return"";var e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return Eb().decode(e)}},{key:"_flushBuffer",value:function(){var e=this._buildBuffer();this._bufferLength=0,null===this._completedStrings?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}},{key:"appendCharCode",value:function(e){var t=this._capacity-this._bufferLength;t<=1&&(0===t||ff(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}},{key:"appendASCIICharCode",value:function(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}},{key:"appendString",value:function(e){var t=e.length;if(this._bufferLength+t>=this._capacity)return this._flushBuffer(),void(this._completedStrings[this._completedStrings.length]=e);for(var n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}]),e}(),Rb=function(){function e(t,n,i,r,o,a){u(this,e),this._richEditBracketBrand=void 0,this.languageId=t,this.index=n,this.open=i,this.close=r,this.forwardRegex=o,this.reversedRegex=a,this._openSet=e._toSet(this.open),this._closeSet=e._toSet(this.close)}return h(e,[{key:"isOpen",value:function(e){return this._openSet.has(e)}},{key:"isClose",value:function(e){return this._closeSet.has(e)}}],[{key:"_toSet",value:function(e){var t=new Set,n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.add(s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}}]),e}();var Ab=function e(t,n){u(this,e),this._richEditBracketsBrand=void 0;var i=function(e){var t=e.length;e=e.map((function(e){return[e[0].toLowerCase(),e[1].toLowerCase()]}));for(var n=[],i=0;i<t;i++)n[i]=i;for(var r=function(e,t){var n=C(e,2),i=n[0],r=n[1],o=C(t,2),a=o[0],s=o[1];return i===a||i===s||r===a||r===s},o=function(e,i){for(var r=Math.min(e,i),o=Math.max(e,i),a=0;a<t;a++)n[a]===o&&(n[a]=r)},a=0;a<t;a++)for(var s=e[a],l=a+1;l<t;l++)r(s,e[l])&&o(n[a],n[l]);for(var u=[],c=0;c<t;c++){for(var d=[],h=[],f=0;f<t;f++)if(n[f]===c){var g=C(e[f],2),v=g[0],p=g[1];d.push(v),h.push(p)}d.length>0&&u.push({open:d,close:h})}return u}(n);this.brackets=i.map((function(e,n){return new Rb(t,n,e.open,e.close,function(e,t,n,i){var r=[];r=r.concat(e),r=r.concat(t);for(var o=0,a=r.length;o<a;o++)Pb(r[o],n,i,r);return r=Fb(r),r.sort(Ob),r.reverse(),Bb(r)}(e.open,e.close,i,n),function(e,t,n,i){var r=[];r=r.concat(e),r=r.concat(t);for(var o=0,a=r.length;o<a;o++)Pb(r[o],n,i,r);return r=Fb(r),r.sort(Ob),r.reverse(),Bb(r.map(Hb))}(e.open,e.close,i,n))})),this.forwardRegex=function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=!0,u=!1,c=void 0;try{for(var d,h=s.open[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;t.push(f)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}var g=!0,v=!1,p=void 0;try{for(var m,y=s.close[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var _=m.value;t.push(_)}}catch(e){v=!0,p=e}finally{try{g||null==y.return||y.return()}finally{if(v)throw p}}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t=Fb(t),Bb(t)}(this.brackets),this.reversedRegex=function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=!0,u=!1,c=void 0;try{for(var d,h=s.open[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;t.push(f)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}var g=!0,v=!1,p=void 0;try{for(var m,y=s.close[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var _=m.value;t.push(_)}}catch(e){v=!0,p=e}finally{try{g||null==y.return||y.return()}finally{if(v)throw p}}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t=Fb(t),Bb(t.map(Hb))}(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;var r=!0,o=!1,a=void 0;try{for(var s,l=this.brackets[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value,d=!0,h=!1,f=void 0;try{for(var g,v=c.open[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;this.textIsBracket[p]=c,this.textIsOpenBracket[p]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,p.length)}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}var m=!0,y=!1,_=void 0;try{for(var b,k=c.close[Symbol.iterator]();!(m=(b=k.next()).done);m=!0){var w=b.value;this.textIsBracket[w]=c,this.textIsOpenBracket[w]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,w.length)}}catch(e){y=!0,_=e}finally{try{m||null==k.return||k.return()}finally{if(y)throw _}}}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}};function Pb(e,t,n,i){for(var r=0,o=t.length;r<o;r++)if(r!==n){var a=t[r],s=!0,l=!1,u=void 0;try{for(var c,d=a.open[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;h.indexOf(e)>=0&&i.push(h)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}var f=!0,g=!1,v=void 0;try{for(var p,m=a.close[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value;y.indexOf(e)>=0&&i.push(y)}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}}}function Ob(e,t){return e.length-t.length}function Fb(e){if(e.length<=1)return e;var t=[],n=new Set,i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;n.has(l)||(t.push(l),n.add(l))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return t}function Wb(e){var t=/^[\w ]+$/.test(e);return e=qh(e),t?"\\b".concat(e,"\\b"):e}function Bb(e,t){return Qh("(".concat(e.map(Wb).join(")|("),")"),!0,t)}var Hb=function(){var e=null,t=null;return function(n){return e!==n&&(t=function(e){for(var t=new Uint16Array(e.length),n=0,i=e.length-1;i>=0;i--)t[n++]=e.charCodeAt(i);return Eb().decode(t)}(e=n)),t}}(),Vb=function(){function e(){u(this,e)}return h(e,null,[{key:"_findPrevBracketInText",value:function(e,t,n,i){var r=n.match(e);if(!r)return null;var o=n.length-(r.index||0),a=r[0].length,s=i+o;return new hd(t,s-a+1,t,s+1)}},{key:"findPrevBracketInRange",value:function(e,t,n,i,r){var o=Hb(n).substring(n.length-r,n.length-i);return this._findPrevBracketInText(e,t,o,i)}},{key:"findNextBracketInText",value:function(e,t,n,i){var r=n.match(e);if(!r)return null;var o=r.index||0,a=r[0].length;if(0===a)return null;var s=i+o;return new hd(t,s+1,t,s+1+a)}},{key:"findNextBracketInRange",value:function(e,t,n,i,r){var o=n.substring(i,r);return this.findNextBracketInText(e,t,o,i)}}]),e}(),zb=function(){function e(t){u(this,e),this._richEditBrackets=t}return h(e,[{key:"getElectricCharacters",value:function(){var e=[];if(this._richEditBrackets){var t=!0,n=!1,i=void 0;try{for(var r,o=this._richEditBrackets.brackets[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=!0,l=!1,u=void 0;try{for(var c,d=a.close[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value,f=h.charAt(h.length-1);e.push(f)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}return ca(e)}},{key:"onElectricCharacter",value:function(e,t,n){if(!this._richEditBrackets||0===this._richEditBrackets.brackets.length)return null;var i=t.findTokenIndexAtOffset(n-1);if(pb(t.getStandardTokenType(i)))return null;var r=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,n-1)+e,a=Vb.findPrevBracketInRange(r,1,o,0,o.length);if(!a)return null;var s=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[s])return null;var l=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(l)?{matchOpenBracket:s}:null}}]),e}();function Ub(e){return e.global&&(e.lastIndex=0),!0}var jb=function(){function e(t){u(this,e),this._indentationRules=t}return h(e,[{key:"shouldIncrease",value:function(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Ub(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}},{key:"shouldDecrease",value:function(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Ub(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}},{key:"shouldIndentNextLine",value:function(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Ub(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}},{key:"shouldIgnore",value:function(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Ub(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}},{key:"getIndentMetadata",value:function(e){var t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}]),e}(),Kb=function(){function e(t){var n=this;u(this,e),(t=t||{}).brackets=t.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],t.brackets.forEach((function(t){var i=e._createOpenBracketRegExp(t[0]),r=e._createCloseBracketRegExp(t[1]);i&&r&&n._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:r})})),this._regExpRules=t.onEnterRules||[]}return h(e,[{key:"onEnter",value:function(e,t,n,i){if(e>=3)for(var r=0,o=this._regExpRules.length;r<o;r++){var a=this._regExpRules[r],s=[{reg:a.beforeText,text:n},{reg:a.afterText,text:i},{reg:a.previousLineText,text:t}].every((function(e){return!e.reg||(e.reg.lastIndex=0,e.reg.test(e.text))}));if(s)return a.action}if(e>=2&&n.length>0&&i.length>0)for(var l=0,u=this._brackets.length;l<u;l++){var c=this._brackets[l];if(c.openRegExp.test(n)&&c.closeRegExp.test(i))return{indentAction:ab.IndentOutdent}}if(e>=2&&n.length>0)for(var d=0,h=this._brackets.length;d<h;d++){if(this._brackets[d].openRegExp.test(n))return{indentAction:ab.Indent}}return null}}],[{key:"_createOpenBracketRegExp",value:function(t){var n=qh(t);return/\B/.test(n.charAt(0))||(n="\\b"+n),n+="\\s*$",e._safeRegExp(n)}},{key:"_createCloseBracketRegExp",value:function(t){var n=qh(t);return/\B/.test(n.charAt(n.length-1))||(n+="\\b"),n="^\\s*"+n,e._safeRegExp(n)}},{key:"_safeRegExp",value:function(e){try{return new RegExp(e)}catch(e){return vu(e),null}}}]),e}(),qb=Zm("configurationService");function Gb(e,t){var n=Object.create(null);for(var i in e)Zb(n,i,e[i],t);return n}function Zb(e,t,n,i){for(var r=t.split("."),o=r.pop(),a=e,s=0;s<r.length;s++){var l=r[s],u=a[l];switch(void 0===u?"undefined":L(u)){case"undefined":u=a[l]=Object.create(null);break;case"object":if(null===u)return void i("Ignoring ".concat(t," as ").concat(r.slice(0,s+1).join(".")," is null"));break;default:return void i("Ignoring ".concat(t," as ").concat(r.slice(0,s+1).join(".")," is ").concat(JSON.stringify(u)))}a=u}if("object"===(void 0===a?"undefined":L(a))&&null!==a)try{a[o]=n}catch(e){i("Ignoring ".concat(t," as ").concat(r.join(".")," is ").concat(JSON.stringify(a)))}else i("Ignoring ".concat(t," as ").concat(r.join(".")," is ").concat(JSON.stringify(a)))}function Yb(e,t){Qb(e,t.split("."))}function Qb(e,t){var n=t.shift();if(0!==t.length){if(-1!==Object.keys(e).indexOf(n)){var i=e[n];"object"!==(void 0===i?"undefined":L(i))||Array.isArray(i)||(Qb(i,t),0===Object.keys(i).length&&delete e[n])}}else delete e[n]}function Xb(e,t,n){var i=function(e,t){var n=e,i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if("object"!==(void 0===n?"undefined":L(n))||null===n)return;n=n[l]}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t.split("."));return void 0===i?n:i}function $b(e){return e.replace(/[\[\]]/g,"")}var Jb=Zm("languageService"),ek=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];u(this,e),this.ctor=t,this.staticArguments=n,this.supportsDelayedInstantiation=i},tk=[];function nk(e,t,n){t instanceof ek||(t=new ek(t,[],Boolean(n))),tk.push([e,t])}function ik(){return tk}var rk=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),ok="base.contributions.json";var ak=function(){function e(){u(this,e),this._onDidChangeSchema=new Zu,this.schemasById={}}return h(e,[{key:"registerSchema",value:function(e,t){this.schemasById[function(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e}(e)]=t,this._onDidChangeSchema.fire(e)}},{key:"notifySchemaChanged",value:function(e){this._onDidChangeSchema.fire(e)}}]),e}(),sk=new ak;i_.add(ok,sk);var lk="base.contributions.configuration",uk="vscode://schemas/settings/resourceLanguage",ck=i_.as(ok),dk=function(){function e(){u(this,e),this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=new Zu,this._onDidUpdateConfiguration=new Zu,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:Xa("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},ck.registerSchema(uk,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}return h(e,[{key:"registerConfiguration",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.registerConfigurations([e],t)}},{key:"registerConfigurations",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Set;this.doRegisterConfigurations(e,t,n),ck.registerSchema(uk,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}},{key:"registerDefaultConfigurations",value:function(e){var t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}},{key:"doRegisterDefaultConfigurations",value:function(e,t){var n;(n=this.registeredConfigurationDefaults).push.apply(n,x(e));var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=u.overrides,d=u.source;for(var h in c){var f;t.add(h);var g=null!==(f=this.configurationDefaultsOverrides.get(h))&&void 0!==f?f:this.configurationDefaultsOverrides.set(h,{configurationDefaultOverrides:[]}).get(h),v=c[h];if(g.configurationDefaultOverrides.push({value:v,source:d}),vk.test(h)){var p,m=this.mergeDefaultConfigurationsForOverrideIdentifier(h,v,d,g.configurationDefaultOverrideValue);if(!m)continue;g.configurationDefaultOverrideValue=m,this.updateDefaultOverrideProperty(h,m,d),(p=i).push.apply(p,x(pk(h)))}else{var y=this.mergeDefaultConfigurationsForConfigurationProperty(h,v,d,g.configurationDefaultOverrideValue);if(!y)continue;g.configurationDefaultOverrideValue=y;var _=this.configurationProperties[h];_&&(this.updatePropertyDefaultValue(h,_),this.updateSchema(h,_))}}}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}this.doRegisterOverrideIdentifiers(i)}},{key:"updateDefaultOverrideProperty",value:function(e,t,n){var i={type:"object",default:t.value,description:Xa("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",$b(e)),$ref:uk,defaultDefaultValue:t.value,source:n,defaultValueSource:n};this.configurationProperties[e]=i,this.defaultLanguageConfigurationOverridesNode.properties[e]=i}},{key:"mergeDefaultConfigurationsForOverrideIdentifier",value:function(e,t,n,i){var r,o=(null==i?void 0:i.value)||{},a=null!==(r=null==i?void 0:i.source)&&void 0!==r?r:new Map;if(a instanceof Map){var s=!0,l=!1,u=void 0;try{for(var c,d=Object.keys(t)[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h,f=c.value,g=t[f];if(Na(g)&&(Ra(o[f])||Na(o[f]))){if(o[f]=_({},null!==(h=o[f])&&void 0!==h?h:{},g),n)for(var v in g)a.set("".concat(f,".").concat(v),n)}else o[f]=g,n?a.set(f,n):a.delete(f)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return{value:o,source:a}}console.error("objectConfigurationSources is not a Map")}},{key:"mergeDefaultConfigurationsForConfigurationProperty",value:function(e,t,n,i){var r,o=this.configurationProperties[e],a=null!==(r=null==i?void 0:i.value)&&void 0!==r?r:null==o?void 0:o.defaultDefaultValue,s=n;if(Na(t)&&(void 0!==o&&"object"===o.type||void 0===o&&(Ra(a)||Na(a)))){var l;if(!((s=null!==(l=null==i?void 0:i.source)&&void 0!==l?l:new Map)instanceof Map))return void console.error("defaultValueSource is not a Map");for(var u in t)n&&s.set("".concat(e,".").concat(u),n);t=_({},Na(a)?a:{},t)}return{value:t,source:s}}},{key:"registerOverrideIdentifiers",value:function(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}},{key:"doRegisterOverrideIdentifiers",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this.overrideIdentifiers.add(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}this.updateOverridePropertyPatternKey()}},{key:"doRegisterConfigurations",value:function(e,t,n){var i=this;e.forEach((function(e){i.validateAndRegisterProperties(e,t,e.extensionInfo,e.restrictedProperties,void 0,n),i.configurationContributors.push(e),i.registerJSONConfiguration(e)}))}},{key:"validateAndRegisterProperties",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,o=arguments.length>5?arguments[5]:void 0;r=Pa(e.scope)?r:e.scope;var a=e.properties;if(a)for(var s in a){var l,u=a[s];if(t&&yk(s,u))delete a[s];else if(u.source=n,u.defaultDefaultValue=a[s].default,this.updatePropertyDefaultValue(s,u),vk.test(s)?u.scope=void 0:(u.scope=Pa(u.scope)?r:u.scope,u.restricted=Pa(u.restricted)?!!(null==i?void 0:i.includes(s)):u.restricted),!a[s].hasOwnProperty("included")||a[s].included)this.configurationProperties[s]=a[s],(null===(l=a[s].policy)||void 0===l?void 0:l.name)&&this.policyConfigurations.set(a[s].policy.name,s),!a[s].deprecationMessage&&a[s].markdownDeprecationMessage&&(a[s].deprecationMessage=a[s].markdownDeprecationMessage),o.add(s);else this.excludedConfigurationProperties[s]=a[s],delete a[s]}var c=e.allOf;if(c){var d=!0,h=!1,f=void 0;try{for(var g,v=c[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;this.validateAndRegisterProperties(p,t,n,i,r,o)}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}}}},{key:"getConfigurationProperties",value:function(){return this.configurationProperties}},{key:"getPolicyConfigurations",value:function(){return this.policyConfigurations}},{key:"registerJSONConfiguration",value:function(e){var t=this,n=function(e){var i=e.properties;if(i)for(var r in i)t.updateSchema(r,i[r]);var o=e.allOf;null==o||o.forEach(n)};n(e)}},{key:"updateSchema",value:function(e,t){switch(t.scope){case 1:case 2:case 6:case 3:case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t}}},{key:"updateOverridePropertyPatternKey",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.overrideIdentifiers.values()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value,a="[".concat(o,"]"),s={type:"object",description:Xa("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:Xa("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:uk};this.updatePropertyDefaultValue(a,s)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"registerOverridePropertyPatternKey",value:function(){Xa("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),Xa("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}},{key:"updatePropertyDefaultValue",value:function(e,t){var n,i=null===(n=this.configurationDefaultsOverrides.get(e))||void 0===n?void 0:n.configurationDefaultOverrideValue,r=void 0,o=void 0;!i||t.disallowConfigurationDefault&&i.source||(r=i.value,o=i.source),Ra(r)&&(r=t.defaultDefaultValue,o=void 0),Ra(r)&&(r=function(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(t.type)),t.default=r,t.defaultValueSource=o}}]),e}(),hk="\\[([^\\]]+)\\]",fk=new RegExp(hk,"g"),gk="^(".concat(hk,")+$"),vk=new RegExp(gk);function pk(e){var t=[];if(vk.test(e))for(var n=fk.exec(e);null==n?void 0:n.length;){var i=n[1].trim();i&&t.push(i),n=fk.exec(e)}return ca(t)}var mk=new dk;function yk(e,t){var n,i,r,o;return e.trim()?vk.test(e)?Xa("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",e):void 0!==mk.getConfigurationProperties()[e]?Xa("config.property.duplicate","Cannot register '{0}'. This property is already registered.",e):(null===(n=t.policy)||void 0===n?void 0:n.name)&&void 0!==mk.getPolicyConfigurations().get(null===(i=t.policy)||void 0===i?void 0:i.name)?Xa("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",e,null===(r=t.policy)||void 0===r?void 0:r.name,mk.getPolicyConfigurations().get(null===(o=t.policy)||void 0===o?void 0:o.name)):null:Xa("config.property.empty","Cannot register an empty property")}i_.add(lk,mk);var _k=function(){function e(){u(this,e),this._onDidChangeLanguages=new Zu,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}return h(e,[{key:"registerLanguage",value:function(e){var t=this;return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:function(){for(var n=0,i=t._languages.length;n<i;n++)if(t._languages[n]===e)return void t._languages.splice(n,1)}}}},{key:"getLanguages",value:function(){return this._languages}}]),e}(),bk=new _k;i_.add("editor.modesRegistry",bk);var kk="plaintext";bk.registerLanguage({id:kk,extensions:[".txt"],aliases:[Xa("plainText.alias","Plain Text"),"text"],mimetypes:[rk.text]}),i_.as(lk).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);var wk=function(){function e(t,n){var i=this;u(this,e),this.languageId=t;var r=n.brackets?Ck(n.brackets):[],o=new Hh((function(e){var t=new Set;return{info:new xk(i,e,t),closing:t}})),a=new Hh((function(e){var t=new Set,n=new Set;return{info:new Lk(i,e,t,n),opening:t,openingColorized:n}})),s=!0,l=!1,c=void 0;try{for(var d,h=r[Symbol.iterator]();!(s=(d=h.next()).done);s=!0){var f=C(d.value,2),g=f[0],v=f[1],p=o.get(g),m=a.get(v);p.closing.add(m.info),m.opening.add(p.info)}}catch(e){l=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}var y=n.colorizedBracketPairs?Ck(n.colorizedBracketPairs):r.filter((function(e){return!("<"===e[0]&&">"===e[1])})),_=!0,b=!1,k=void 0;try{for(var w,S=y[Symbol.iterator]();!(_=(w=S.next()).done);_=!0){var L=C(w.value,2),D=L[0],N=L[1],I=o.get(D),E=a.get(N);I.closing.add(E.info),E.openingColorized.add(I.info),E.opening.add(I.info)}}catch(e){b=!0,k=e}finally{try{_||null==S.return||S.return()}finally{if(b)throw k}}this._openingBrackets=new Map(x(o.cachedValues).map((function(e){var t=C(e,2);return[t[0],t[1].info]}))),this._closingBrackets=new Map(x(a.cachedValues).map((function(e){var t=C(e,2);return[t[0],t[1].info]})))}return h(e,[{key:"openingBrackets",get:function(){return x(this._openingBrackets.values())}},{key:"closingBrackets",get:function(){return x(this._closingBrackets.values())}},{key:"getOpeningBracketInfo",value:function(e){return this._openingBrackets.get(e)}},{key:"getClosingBracketInfo",value:function(e){return this._closingBrackets.get(e)}},{key:"getBracketInfo",value:function(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}},{key:"getBracketRegExp",value:function(e){return Bb(Array.from(x(this._openingBrackets.keys()).concat(x(this._closingBrackets.keys()))),e)}}]),e}();function Ck(e){return e.filter((function(e){var t=C(e,2),n=t[0],i=t[1];return""!==n&&""!==i}))}var Sk=function(){function e(t,n){u(this,e),this.config=t,this.bracketText=n}return h(e,[{key:"languageId",get:function(){return this.config.languageId}}]),e}(),xk=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[e,n])).openedBrackets=i,r.isOpeningBracket=!0,r}return p(t,e),t}(Sk),Lk=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t,[e,n])).openingBrackets=i,o.openingColorizedBrackets=r,o.isOpeningBracket=!1,o}return p(t,e),h(t,[{key:"closes",value:function(e){return e.config===this.config&&this.openingBrackets.has(e)}},{key:"closesColorized",value:function(e){return e.config===this.config&&this.openingColorizedBrackets.has(e)}},{key:"getOpeningBrackets",value:function(){return x(this.openingBrackets)}}]),t}(Sk),Dk=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Nk=function(e,t){return function(n,i){t(n,i,e)}},Ik=function(){function e(t){u(this,e),this.languageId=t}return h(e,[{key:"affects",value:function(e){return!this.languageId||this.languageId===e}}]),e}(),Ek=Zm("languageConfigurationService"),Mk=function(e){function t(e,n){var i;u(this,t),(i=l(this,t)).configurationService=e,i.languageService=n,i._registry=i._register(new Bk),i.onDidChangeEmitter=i._register(new Zu),i.onDidChange=i.onDidChangeEmitter.event,i.configurations=new Map;var r=new Set(Object.values(Tk));return i._register(i.configurationService.onDidChangeConfiguration((function(e){var t=e.change.keys.some((function(e){return r.has(e)})),n=e.change.overrides.filter((function(e){var t=C(e,2);t[0];return t[1].some((function(e){return r.has(e)}))})).map((function(e){return C(e,1)[0]}));if(t)i.configurations.clear(),i.onDidChangeEmitter.fire(new Ik(void 0));else{var o=!0,a=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;i.languageService.isRegisteredLanguageId(c)&&(i.configurations.delete(c),i.onDidChangeEmitter.fire(new Ik(c)))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}}))),i._register(i._registry.onDidChange((function(e){i.configurations.delete(e.languageId),i.onDidChangeEmitter.fire(new Ik(e.languageId))}))),i}return p(t,e),h(t,[{key:"register",value:function(e,t,n){return this._registry.register(e,t,n)}},{key:"getLanguageConfiguration",value:function(e){var t=this.configurations.get(e);return t||(t=function(e,t,n,i){var r=t.getLanguageConfiguration(e);if(!r){if(!i.isRegisteredLanguageId(e))return new Hk(e,{});r=new Hk(e,{})}var o=function(e,t){var n=t.getValue(Tk.brackets,{overrideIdentifier:e}),i=t.getValue(Tk.colorizedBracketPairs,{overrideIdentifier:e});return{brackets:Rk(n),colorizedBracketPairs:Rk(i)}}(r.languageId,n),a=Ok([r.underlyingConfig,o]),s=new Hk(r.languageId,a);return s}(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}}]),t}(Ru);Mk=Dk([Nk(0,qb),Nk(1,Jb)],Mk);var Tk={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function Rk(e){if(Array.isArray(e))return e.map((function(e){if(Array.isArray(e)&&2===e.length)return[e[0],e[1]]})).filter((function(e){return!!e}))}function Ak(e,t,n){var i=Jh(e.getLineContent(t));return i.length>n-1&&(i=i.substring(0,n-1)),i}var Pk=function(){function e(t){u(this,e),this.languageId=t,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}return h(e,[{key:"register",value:function(e,t){var n=this,i=new Fk(e,t,++this._order);return this._entries.push(i),this._resolved=null,Mu((function(){for(var e=0;e<n._entries.length;e++)if(n._entries[e]===i){n._entries.splice(e,1),n._resolved=null;break}}))}},{key:"getResolvedConfiguration",value:function(){if(!this._resolved){var e=this._resolve();e&&(this._resolved=new Hk(this.languageId,e))}return this._resolved}},{key:"_resolve",value:function(){return 0===this._entries.length?null:(this._entries.sort(Fk.cmp),Ok(this._entries.map((function(e){return e.configuration}))))}}]),e}();function Ok(e){var t={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0},n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t={comments:s.comments||t.comments,brackets:s.brackets||t.brackets,wordPattern:s.wordPattern||t.wordPattern,indentationRules:s.indentationRules||t.indentationRules,onEnterRules:s.onEnterRules||t.onEnterRules,autoClosingPairs:s.autoClosingPairs||t.autoClosingPairs,surroundingPairs:s.surroundingPairs||t.surroundingPairs,autoCloseBefore:s.autoCloseBefore||t.autoCloseBefore,folding:s.folding||t.folding,colorizedBracketPairs:s.colorizedBracketPairs||t.colorizedBracketPairs,__electricCharacterSupport:s.__electricCharacterSupport||t.__electricCharacterSupport}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}var Fk=function(){function e(t,n,i){u(this,e),this.configuration=t,this.priority=n,this.order=i}return h(e,null,[{key:"cmp",value:function(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}]),e}(),Wk=function e(t){u(this,e),this.languageId=t},Bk=function(e){function t(){var e;return u(this,t),(e=l(this,t))._entries=new Map,e._onDidChange=e._register(new Zu),e.onDidChange=e._onDidChange.event,e._register(e.register(kk,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0)),e}return p(t,e),h(t,[{key:"register",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._entries.get(e);r||(r=new Pk(e),this._entries.set(e,r));var o=r.register(t,i);return this._onDidChange.fire(new Wk(e)),Mu((function(){o.dispose(),n._onDidChange.fire(new Wk(e))}))}},{key:"getLanguageConfiguration",value:function(e){var t=this._entries.get(e);return(null==t?void 0:t.getResolvedConfiguration())||null}}]),t}(Ru),Hk=function(){function e(t,n){u(this,e),this.languageId=t,this.underlyingConfig=n,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Kb(this.underlyingConfig):null,this.comments=e._handleComments(this.underlyingConfig),this.characterPair=new fb(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||zs,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new jb(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new wk(t,this.underlyingConfig)}return h(e,[{key:"getWordDefinition",value:function(){return Us(this.wordDefinition)}},{key:"brackets",get:function(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new Ab(this.languageId,this.underlyingConfig.brackets)),this._brackets}},{key:"electricCharacter",get:function(){return this._electricCharacter||(this._electricCharacter=new zb(this.brackets)),this._electricCharacter}},{key:"onEnter",value:function(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}},{key:"getAutoClosingPairs",value:function(){return new db(this.characterPair.getAutoClosingPairs())}},{key:"getAutoCloseBeforeSet",value:function(e){return this.characterPair.getAutoCloseBeforeSet(e)}},{key:"getSurroundingPairs",value:function(){return this.characterPair.getSurroundingPairs()}}],[{key:"_handleComments",value:function(e){var t=e.comments;if(!t)return null;var n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){var i=C(t.blockComment,2),r=i[0],o=i[1];n.blockCommentStartToken=r,n.blockCommentEndToken=o}return n}}]),e}();nk(Ek,Mk,1);var Vk=function(){function e(t,n,i,r){u(this,e),this.originalStart=t,this.originalLength=n,this.modifiedStart=i,this.modifiedLength=r}return h(e,[{key:"getOriginalEnd",value:function(){return this.originalStart+this.originalLength}},{key:"getModifiedEnd",value:function(){return this.modifiedStart+this.modifiedLength}}]),e}(),zk=function(){function e(t){u(this,e),this.source=t}return h(e,[{key:"getElements",value:function(){for(var e=this.source,t=new Int32Array(e.length),n=0,i=e.length;n<i;n++)t[n]=e.charCodeAt(n);return t}}]),e}();function Uk(e,t,n){return new Gk(new zk(e),new zk(t)).ComputeDiff(n).changes}var jk=function(){function e(){u(this,e)}return h(e,null,[{key:"Assert",value:function(e,t){if(!e)throw new Error(t)}}]),e}(),Kk=function(){function e(){u(this,e)}return h(e,null,[{key:"Copy",value:function(e,t,n,i,r){for(var o=0;o<r;o++)n[i+o]=e[t+o]}},{key:"Copy2",value:function(e,t,n,i,r){for(var o=0;o<r;o++)n[i+o]=e[t+o]}}]),e}(),qk=function(){function e(){u(this,e),this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}return h(e,[{key:"MarkNextChange",value:function(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Vk(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}},{key:"AddOriginalElement",value:function(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}},{key:"AddModifiedElement",value:function(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}},{key:"getChanges",value:function(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}},{key:"getReverseChanges",value:function(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}]),e}(),Gk=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;u(this,e),this.ContinueProcessingPredicate=i,this._originalSequence=t,this._modifiedSequence=n;var r=C(e._getElements(t),3),o=r[0],a=r[1],s=r[2],l=C(e._getElements(n),3),c=l[0],d=l[1],h=l[2];this._hasStrings=s&&h,this._originalStringElements=o,this._originalElementsOrHash=a,this._modifiedStringElements=c,this._modifiedElementsOrHash=d,this.m_forwardHistory=[],this.m_reverseHistory=[]}return h(e,[{key:"ElementsAreEqual",value:function(e,t){return this._originalElementsOrHash[e]===this._modifiedElementsOrHash[t]&&(!this._hasStrings||this._originalStringElements[e]===this._modifiedStringElements[t])}},{key:"ElementsAreStrictEqual",value:function(t,n){return!!this.ElementsAreEqual(t,n)&&e._getStrictElement(this._originalSequence,t)===e._getStrictElement(this._modifiedSequence,n)}},{key:"OriginalElementsAreEqual",value:function(e,t){return this._originalElementsOrHash[e]===this._originalElementsOrHash[t]&&(!this._hasStrings||this._originalStringElements[e]===this._originalStringElements[t])}},{key:"ModifiedElementsAreEqual",value:function(e,t){return this._modifiedElementsOrHash[e]===this._modifiedElementsOrHash[t]&&(!this._hasStrings||this._modifiedStringElements[e]===this._modifiedStringElements[t])}},{key:"ComputeDiff",value:function(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}},{key:"_ComputeDiff",value:function(e,t,n,i,r){var o=[!1],a=this.ComputeDiffRecursive(e,t,n,i,o);return r&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}},{key:"ComputeDiffRecursive",value:function(e,t,n,i,r){for(r[0]=!1;e<=t&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&i>=n&&this.ElementsAreEqual(t,i);)t--,i--;var o;if(e>t||n>i)return n<=i?(jk.Assert(e===t+1,"originalStart should only be one more than originalEnd"),o=[new Vk(e,0,n,i-n+1)]):e<=t?(jk.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),o=[new Vk(e,t-e+1,n,0)]):(jk.Assert(e===t+1,"originalStart should only be one more than originalEnd"),jk.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),o=[]),o;var a=[0],s=[0],l=this.ComputeRecursionPoint(e,t,n,i,a,s,r),u=a[0],c=s[0];if(null!==l)return l;if(!r[0]){var d=this.ComputeDiffRecursive(e,u,n,c,r),h=[];return h=r[0]?[new Vk(u+1,t-(u+1)+1,c+1,i-(c+1)+1)]:this.ComputeDiffRecursive(u+1,t,c+1,i,r),this.ConcatenateChanges(d,h)}return[new Vk(e,t-e+1,n,i-n+1)]}},{key:"WALKTRACE",value:function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,g,v,p,m){var y,_=null,b=new qk,k=t,w=n,C=h[0]-v[0]-i,S=-1073741824,x=this.m_forwardHistory.length-1;do{var L=C+e;L===k||L<w&&l[L-1]<l[L+1]?(f=(c=l[L+1])-C-i,c<S&&b.MarkNextChange(),S=c,b.AddModifiedElement(c+1,f),C=L+1-e):(f=(c=l[L-1]+1)-C-i,c<S&&b.MarkNextChange(),S=c-1,b.AddOriginalElement(c,f+1),C=L-1-e),x>=0&&(e=(l=this.m_forwardHistory[x])[0],k=1,w=l.length-1)}while(--x>=-1);if(y=b.getReverseChanges(),m[0]){var D=h[0]+1,N=v[0]+1;if(null!==y&&y.length>0){var I=y[y.length-1];D=Math.max(D,I.getOriginalEnd()),N=Math.max(N,I.getModifiedEnd())}_=[new Vk(D,d-D+1,N,g-N+1)]}else{b=new qk,k=o,w=a,C=h[0]-v[0]-s,S=1073741824,x=p?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{var E=C+r;E===k||E<w&&u[E-1]>=u[E+1]?(f=(c=u[E+1]-1)-C-s,c>S&&b.MarkNextChange(),S=c+1,b.AddOriginalElement(c+1,f+1),C=E+1-r):(f=(c=u[E-1])-C-s,c>S&&b.MarkNextChange(),S=c,b.AddModifiedElement(c+1,f+1),C=E-1-r),x>=0&&(r=(u=this.m_reverseHistory[x])[0],k=1,w=u.length-1)}while(--x>=-1);_=b.getChanges()}return this.ConcatenateChanges(y,_)}},{key:"ComputeRecursionPoint",value:function(e,t,n,i,r,o,a){var s=0,l=0,u=0,c=0,d=0,h=0;e--,n--,r[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];var f=t-e+(i-n),g=f+1,v=new Int32Array(g),p=new Int32Array(g),m=i-n,y=t-e,_=e-n,b=t-i,k=(y-m)%2==0;v[m]=e,p[y]=t,a[0]=!1;for(var w=1;w<=f/2+1;w++){var C=0,S=0;u=this.ClipDiagonalBound(m-w,w,m,g),c=this.ClipDiagonalBound(m+w,w,m,g);for(var x=u;x<=c;x+=2){l=(s=x===u||x<c&&v[x-1]<v[x+1]?v[x+1]:v[x-1]+1)-(x-m)-_;for(var L=s;s<t&&l<i&&this.ElementsAreEqual(s+1,l+1);)s++,l++;if(v[x]=s,s+l>C+S&&(C=s,S=l),!k&&Math.abs(x-y)<=w-1&&s>=p[x])return r[0]=s,o[0]=l,L<=p[x]&&w<=1448?this.WALKTRACE(m,u,c,_,y,d,h,b,v,p,s,t,r,l,i,o,k,a):null}var D=(C-e+(S-n)-w)/2;if(null!==this.ContinueProcessingPredicate&&!this.ContinueProcessingPredicate(C,D))return a[0]=!0,r[0]=C,o[0]=S,D>0&&w<=1448?this.WALKTRACE(m,u,c,_,y,d,h,b,v,p,s,t,r,l,i,o,k,a):(e++,n++,[new Vk(e,t-e+1,n,i-n+1)]);d=this.ClipDiagonalBound(y-w,w,y,g),h=this.ClipDiagonalBound(y+w,w,y,g);for(var N=d;N<=h;N+=2){l=(s=N===d||N<h&&p[N-1]>=p[N+1]?p[N+1]-1:p[N-1])-(N-y)-b;for(var I=s;s>e&&l>n&&this.ElementsAreEqual(s,l);)s--,l--;if(p[N]=s,k&&Math.abs(N-m)<=w&&s<=v[N])return r[0]=s,o[0]=l,I>=v[N]&&w<=1448?this.WALKTRACE(m,u,c,_,y,d,h,b,v,p,s,t,r,l,i,o,k,a):null}if(w<=1447){var E=new Int32Array(c-u+2);E[0]=m-u+1,Kk.Copy2(v,u,E,1,c-u+1),this.m_forwardHistory.push(E),(E=new Int32Array(h-d+2))[0]=y-d+1,Kk.Copy2(p,d,E,1,h-d+1),this.m_reverseHistory.push(E)}}return this.WALKTRACE(m,u,c,_,y,d,h,b,v,p,s,t,r,l,i,o,k,a)}},{key:"PrettifyChanges",value:function(e){for(var t=0;t<e.length;t++){for(var n=e[t],i=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=n.originalLength>0,a=n.modifiedLength>0;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<r&&(!o||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){var s=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!s)break;n.originalStart++,n.modifiedStart++}var l=[null];t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)&&(e[t]=l[0],e.splice(t+1,1),t--)}for(var u=e.length-1;u>=0;u--){var c=e[u],d=0,h=0;if(u>0){var f=e[u-1];d=f.originalStart+f.originalLength,h=f.modifiedStart+f.modifiedLength}for(var g=c.originalLength>0,v=c.modifiedLength>0,p=0,m=this._boundaryScore(c.originalStart,c.originalLength,c.modifiedStart,c.modifiedLength),y=1;;y++){var _=c.originalStart-y,b=c.modifiedStart-y;if(_<d||b<h)break;if(g&&!this.OriginalElementsAreEqual(_,_+c.originalLength))break;if(v&&!this.ModifiedElementsAreEqual(b,b+c.modifiedLength))break;var k=(_===d&&b===h?5:0)+this._boundaryScore(_,c.originalLength,b,c.modifiedLength);k>m&&(m=k,p=y)}c.originalStart-=p,c.modifiedStart-=p;var w=[null];u>0&&this.ChangesOverlap(e[u-1],e[u],w)&&(e[u-1]=w[0],e.splice(u,1),u++)}if(this._hasStrings)for(var S=1,x=e.length;S<x;S++){var L=e[S-1],D=e[S],N=D.originalStart-L.originalStart-L.originalLength,I=L.originalStart,E=D.originalStart+D.originalLength,M=E-I,T=L.modifiedStart,R=D.modifiedStart+D.modifiedLength,A=R-T;if(N<5&&M<20&&A<20){var P=this._findBetterContiguousSequence(I,M,T,A,N);if(P){var O=C(P,2),F=O[0],W=O[1];F===L.originalStart+L.originalLength&&W===L.modifiedStart+L.modifiedLength||(L.originalLength=F-L.originalStart,L.modifiedLength=W-L.modifiedStart,D.originalStart=F+N,D.modifiedStart=W+N,D.originalLength=E-D.originalStart,D.modifiedLength=R-D.modifiedStart)}}}return e}},{key:"_findBetterContiguousSequence",value:function(e,t,n,i,r){if(t<r||i<r)return null;for(var o=e+t-r+1,a=n+i-r+1,s=0,l=0,u=0,c=e;c<o;c++)for(var d=n;d<a;d++){var h=this._contiguousSequenceScore(c,d,r);h>0&&h>s&&(s=h,l=c,u=d)}return s>0?[l,u]:null}},{key:"_contiguousSequenceScore",value:function(e,t,n){for(var i=0,r=0;r<n;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;i+=this._originalStringElements[e+r].length}return i}},{key:"_OriginalIsBoundary",value:function(e){return e<=0||e>=this._originalElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}},{key:"_OriginalRegionIsBoundary",value:function(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){var n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}},{key:"_ModifiedIsBoundary",value:function(e){return e<=0||e>=this._modifiedElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}},{key:"_ModifiedRegionIsBoundary",value:function(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){var n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}},{key:"_boundaryScore",value:function(e,t,n,i){return(this._OriginalRegionIsBoundary(e,t)?1:0)+(this._ModifiedRegionIsBoundary(n,i)?1:0)}},{key:"ConcatenateChanges",value:function(e,t){var n=[];if(0===e.length||0===t.length)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){var i=new Array(e.length+t.length-1);return Kk.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],Kk.Copy(t,1,i,e.length,t.length-1),i}var r=new Array(e.length+t.length);return Kk.Copy(e,0,r,0,e.length),Kk.Copy(t,0,r,e.length,t.length),r}},{key:"ChangesOverlap",value:function(e,t,n){if(jk.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),jk.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){var i=e.originalStart,r=e.originalLength,o=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Vk(i,r,o,a),!0}return n[0]=null,!1}},{key:"ClipDiagonalBound",value:function(e,t,n,i){if(e>=0&&e<i)return e;var r=t%2==0;return e<0?r===(n%2==0)?0:1:r===((i-n-1)%2==0)?i-1:i-2}}],[{key:"_isStringArray",value:function(e){return e.length>0&&"string"==typeof e[0]}},{key:"_getElements",value:function(t){var n=t.getElements();if(e._isStringArray(n)){for(var i=new Int32Array(n.length),r=0,o=n.length;r<o;r++)i[r]=Zv(n[r],0);return[n,i,!0]}return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}},{key:"_getStrictElement",value:function(e,t){return"function"==typeof e.getStrictElement?e.getStrictElement(t):null}}]),e}();function Zk(e){return e<0?0:e>255?255:0|e}function Yk(e){return e<0?0:e>4294967295?4294967295:0|e}var Qk=function(){function e(t){u(this,e);var n=Zk(t);this._defaultValue=n,this._asciiMap=e._createAsciiMap(n),this._map=new Map}return h(e,[{key:"set",value:function(e,t){var n=Zk(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}},{key:"get",value:function(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}},{key:"clear",value:function(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}],[{key:"_createAsciiMap",value:function(e){var t=new Uint8Array(256);return t.fill(e),t}}]),e}(),Xk=function(){function e(){u(this,e),this._actual=new Qk(0)}return h(e,[{key:"add",value:function(e){this._actual.set(e,1)}},{key:"has",value:function(e){return 1===this._actual.get(e)}},{key:"clear",value:function(){return this._actual.clear()}}]),e}(),$k=function(){function e(t,n,i){u(this,e);for(var r=new Uint8Array(t*n),o=0,a=t*n;o<a;o++)r[o]=i;this._data=r,this.rows=t,this.cols=n}return h(e,[{key:"get",value:function(e,t){return this._data[e*this.cols+t]}},{key:"set",value:function(e,t,n){this._data[e*this.cols+t]=n}}]),e}(),Jk=function(){function e(t){u(this,e);for(var n=0,i=0,r=0,o=t.length;r<o;r++){var a=C(t[r],3),s=a[0],l=a[1],c=a[2];l>n&&(n=l),s>i&&(i=s),c>i&&(i=c)}n++,i++;for(var d=new $k(i,n,0),h=0,f=t.length;h<f;h++){var g=C(t[h],3),v=g[0],p=g[1],m=g[2];d.set(v,p,m)}this._states=d,this._maxCharCode=n}return h(e,[{key:"nextState",value:function(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}]),e}(),ew=null;var tw=null;var nw=function(){function e(){u(this,e)}return h(e,null,[{key:"_createLink",value:function(e,t,n,i,r){var o=r-1;do{var a=t.charCodeAt(o);if(2!==e.get(a))break;o--}while(o>i);if(i>0){var s=t.charCodeAt(i-1),l=t.charCodeAt(o);(40===s&&41===l||91===s&&93===l||123===s&&125===l)&&o--}return{range:{startLineNumber:n,startColumn:i+1,endLineNumber:n,endColumn:o+2},url:t.substring(i,o+1)}}},{key:"computeLinks",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(null===ew&&(ew=new Jk([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),ew),i=function(){if(null===tw){tw=new Qk(0);for(var e=" \t<>'\"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…",t=0;t<35;t++)tw.set(e.charCodeAt(t),1);for(var n=".,;:",i=0;i<4;i++)tw.set(n.charCodeAt(i),2)}return tw}(),r=[],o=1,a=t.getLineCount();o<=a;o++){for(var s=t.getLineContent(o),l=s.length,u=0,c=0,d=0,h=1,f=!1,g=!1,v=!1,p=!1;u<l;){var m=!1,y=s.charCodeAt(u);if(13===h){var _=void 0;switch(y){case 40:f=!0,_=0;break;case 41:_=f?0:1;break;case 91:v=!0,g=!0,_=0;break;case 93:v=!1,_=g?0:1;break;case 123:p=!0,_=0;break;case 125:_=p?0:1;break;case 39:case 34:case 96:_=d===y?1:39===d||34===d||96===d?0:1;break;case 42:_=42===d?1:0;break;case 124:_=124===d?1:0;break;case 32:_=v?0:1;break;default:_=i.get(y)}1===_&&(r.push(e._createLink(i,s,o,c,u)),m=!0)}else if(12===h){var b=void 0;91===y?(g=!0,b=0):b=i.get(y),1===b?m=!0:h=13}else 0===(h=n.nextState(h,y))&&(m=!0);m&&(h=1,f=!1,g=!1,p=!1,c=u+1,d=y),u++}13===h&&r.push(e._createLink(i,s,o,c,l))}return r}}]),e}();function iw(e){return e&&"function"==typeof e.getLineCount&&"function"==typeof e.getLineContent?nw.computeLinks(e):[]}var rw=function(){function e(){u(this,e),this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}return h(e,[{key:"navigateValueSet",value:function(e,t,n,i,r){if(e&&t){var o=this.doNavigateValueSet(t,r);if(o)return{range:e,value:o}}if(n&&i){var a=this.doNavigateValueSet(i,r);if(a)return{range:n,value:a}}return null}},{key:"doNavigateValueSet",value:function(e,t){var n=this.numberReplace(e,t);return null!==n?n:this.textReplace(e,t)}},{key:"numberReplace",value:function(e,t){var n=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),i=Number(e),r=parseFloat(e);return isNaN(i)||isNaN(r)||i!==r?null:0!==i||t?(i=Math.floor(i*n),i+=t?n:-n,String(i/n)):null}},{key:"textReplace",value:function(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}},{key:"valueSetsReplace",value:function(e,t,n){for(var i=null,r=0,o=e.length;null===i&&r<o;r++)i=this.valueSetReplace(e[r],t,n);return i}},{key:"valueSetReplace",value:function(e,t,n){var i=e.indexOf(t);return i>=0?((i+=n?1:-1)<0?i=e.length-1:i%=e.length,e[i]):null}}]),e}();rw.INSTANCE=new rw;var ow,aw,sw=function(){function e(){u(this,e)}return h(e,null,[{key:"getChannel",value:function(t){return t.getChannel(e.CHANNEL_NAME)}},{key:"setChannel",value:function(t,n){t.setChannel(e.CHANNEL_NAME,n)}}]),e}();sw.CHANNEL_NAME="editorWorkerHost";var lw=function e(t,n){u(this,e),this.uri=t,this.value=n};var uw=(ow=Symbol.toStringTag,Symbol.iterator),cw=function(){function e(t,n){if(u(this,e),this[ow]="ResourceMap",t instanceof e)this.map=new Map(t.map),this.toKey=null!=n?n:e.defaultToKey;else if(function(e){return Array.isArray(e)}(t)){this.map=new Map,this.toKey=null!=n?n:e.defaultToKey;var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=C(a.value,2),c=l[0],d=l[1];this.set(c,d)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}else this.map=new Map,this.toKey=null!=t?t:e.defaultToKey}return h(e,[{key:"set",value:function(e,t){return this.map.set(this.toKey(e),new lw(e,t)),this}},{key:"get",value:function(e){var t;return null===(t=this.map.get(this.toKey(e)))||void 0===t?void 0:t.value}},{key:"has",value:function(e){return this.map.has(this.toKey(e))}},{key:"size",get:function(){return this.map.size}},{key:"clear",value:function(){this.map.clear()}},{key:"delete",value:function(e){return this.map.delete(this.toKey(e))}},{key:"forEach",value:function(e,t){void 0!==t&&(e=e.bind(t));var n=!0,i=!1,r=void 0;try{for(var o,a=this.map[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2),l=(s[0],s[1]);e(l.value,l.uri,this)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},{key:"values",value:function(){var e,t,n,i,r,o;return E(this,(function(a){switch(a.label){case 0:e=!0,t=!1,n=void 0,a.label=1;case 1:a.trys.push([1,6,7,8]),i=this.map.values()[Symbol.iterator](),a.label=2;case 2:return(e=(r=i.next()).done)?[3,5]:[4,r.value.value];case 3:a.sent(),a.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return o=a.sent(),t=!0,n=o,[3,8];case 7:try{e||null==i.return||i.return()}finally{if(t)throw n}return[7];case 8:return[2]}}))}},{key:"keys",value:function(){var e,t,n,i,r,o;return E(this,(function(a){switch(a.label){case 0:e=!0,t=!1,n=void 0,a.label=1;case 1:a.trys.push([1,6,7,8]),i=this.map.values()[Symbol.iterator](),a.label=2;case 2:return(e=(r=i.next()).done)?[3,5]:[4,r.value.uri];case 3:a.sent(),a.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return o=a.sent(),t=!0,n=o,[3,8];case 7:try{e||null==i.return||i.return()}finally{if(t)throw n}return[7];case 8:return[2]}}))}},{key:"entries",value:function(){var e,t,n,i,r,o,a;return E(this,(function(s){switch(s.label){case 0:e=!0,t=!1,n=void 0,s.label=1;case 1:s.trys.push([1,6,7,8]),i=this.map.values()[Symbol.iterator](),s.label=2;case 2:return(e=(r=i.next()).done)?[3,5]:[4,[(o=r.value).uri,o.value]];case 3:s.sent(),s.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=s.sent(),t=!0,n=a,[3,8];case 7:try{e||null==i.return||i.return()}finally{if(t)throw n}return[7];case 8:return[2]}}))}},{key:uw,value:function(){var e,t,n,i,r,o,a,s;return E(this,(function(l){switch(l.label){case 0:e=!0,t=!1,n=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),i=this.map[Symbol.iterator](),l.label=2;case 2:return(e=(r=i.next()).done)?[3,5]:(o=C(r.value,2),[4,[(a=o[1]).uri,a.value]]);case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=l.sent(),t=!0,n=s,[3,8];case 7:try{e||null==i.return||i.return()}finally{if(t)throw n}return[7];case 8:return[2]}}))}}]),e}();cw.defaultToKey=function(e){return e.toString()};var dw,hw,fw,gw=function(){function e(){u(this,e),this[aw]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}return h(e,[{key:"clear",value:function(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}},{key:"isEmpty",value:function(){return!this._head&&!this._tail}},{key:"size",get:function(){return this._size}},{key:"first",get:function(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}},{key:"last",get:function(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}},{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._map.get(e);if(n)return 0!==t&&this.touch(n,t),n.value}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._map.get(e);if(i)i.value=t,0!==n&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:case 2:default:this.addItemLast(i);break;case 1:this.addItemFirst(i)}this._map.set(e,i),this._size++}return this}},{key:"delete",value:function(e){return!!this.remove(e)}},{key:"remove",value:function(e){var t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}},{key:"shift",value:function(){if(this._head||this._tail){if(!this._head||!this._tail)throw new Error("Invalid list");var e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}}},{key:"forEach",value:function(e,t){for(var n=this._state,i=this._head;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}},{key:"keys",value:function(){var e,t=this,n=this._state,i=this._head,r=(f(e={},Symbol.iterator,(function(){return r})),f(e,"next",(function(){if(t._state!==n)throw new Error("LinkedMap got modified during iteration.");if(i){var e={value:i.key,done:!1};return i=i.next,e}return{value:void 0,done:!0}})),e);return r}},{key:"values",value:function(){var e,t=this,n=this._state,i=this._head,r=(f(e={},Symbol.iterator,(function(){return r})),f(e,"next",(function(){if(t._state!==n)throw new Error("LinkedMap got modified during iteration.");if(i){var e={value:i.value,done:!1};return i=i.next,e}return{value:void 0,done:!0}})),e);return r}},{key:"entries",value:function(){var e,t=this,n=this._state,i=this._head,r=(f(e={},Symbol.iterator,(function(){return r})),f(e,"next",(function(){if(t._state!==n)throw new Error("LinkedMap got modified during iteration.");if(i){var e={value:[i.key,i.value],done:!1};return i=i.next,e}return{value:void 0,done:!0}})),e);return r}},{key:(aw=Symbol.toStringTag,Symbol.iterator),value:function(){return this.entries()}},{key:"trimOld",value:function(e){if(!(e>=this.size))if(0!==e){for(var t=this._head,n=this.size;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}else this.clear()}},{key:"trimNew",value:function(e){if(!(e>=this.size))if(0!==e){for(var t=this._tail,n=this.size;t&&n>e;)this._map.delete(t.key),t=t.previous,n--;this._tail=t,this._size=n,t&&(t.next=void 0),this._state++}else this.clear()}},{key:"addItemFirst",value:function(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}},{key:"addItemLast",value:function(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}},{key:"removeItem",value:function(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{var t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}},{key:"touch",value:function(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(1===t||2===t)if(1===t){if(e===this._head)return;var n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(2===t){if(e===this._tail)return;var r=e.next,o=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=o,o.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}},{key:"toJSON",value:function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),e}},{key:"fromJSON",value:function(e){this.clear();var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=C(r.value,2),s=a[0],l=a[1];this.set(s,l)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}]),e}(),vw=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return u(this,t),(n=l(this,t))._limit=e,n._ratio=Math.min(Math.max(0,i),1),n}return p(t,e),h(t,[{key:"limit",get:function(){return this._limit},set:function(e){this._limit=e,this.checkTrim()}},{key:"get",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return g(v(t.prototype),"get",this).call(this,e,n)}},{key:"peek",value:function(e){return g(v(t.prototype),"get",this).call(this,e,0)}},{key:"set",value:function(e,n){return g(v(t.prototype),"set",this).call(this,e,n,2),this}},{key:"checkTrim",value:function(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}]),t}(gw),pw=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return u(this,t),l(this,t,[e,n])}return p(t,e),h(t,[{key:"trim",value:function(e){this.trimOld(e)}},{key:"set",value:function(e,n){return g(v(t.prototype),"set",this).call(this,e,n),this.checkTrim(),this}}]),t}(N(vw)),mw=function(){function e(t){if(u(this,e),this._m1=new Map,this._m2=new Map,t){var n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2),l=s[0],c=s[1];this.set(l,c)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}return h(e,[{key:"clear",value:function(){this._m1.clear(),this._m2.clear()}},{key:"set",value:function(e,t){this._m1.set(e,t),this._m2.set(t,e)}},{key:"get",value:function(e){return this._m1.get(e)}},{key:"getKey",value:function(e){return this._m2.get(e)}},{key:"delete",value:function(e){var t=this._m1.get(e);return void 0!==t&&(this._m1.delete(e),this._m2.delete(t),!0)}},{key:"keys",value:function(){return this._m1.keys()}},{key:"values",value:function(){return this._m1.values()}}]),e}(),yw=function(){function e(){u(this,e),this.map=new Map}return h(e,[{key:"add",value:function(e,t){var n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}},{key:"delete",value:function(e,t){var n=this.map.get(e);n&&(n.delete(t),0===n.size&&this.map.delete(e))}},{key:"forEach",value:function(e,t){var n=this.map.get(e);n&&n.forEach(t)}},{key:"get",value:function(e){var t=this.map.get(e);return t||new Set}}]),e}(),_w=function(e){function t(e,n){var i;u(this,t),(i=l(this,t,[0]))._segmenter=null,i._cachedLine=null,i._cachedSegments=[],i.intlSegmenterLocales=n,i.intlSegmenterLocales.length>0?i._segmenter=new Intl.Segmenter(i.intlSegmenterLocales,{granularity:"word"}):i._segmenter=null;for(var r=0,o=e.length;r<o;r++)i.set(e.charCodeAt(r),2);return i.set(32,1),i.set(9,1),i}return p(t,e),h(t,[{key:"findPrevIntlWordBeforeOrAtOffset",value:function(e,t){var n=null,i=!0,r=!1,o=void 0;try{for(var a,s=this._getIntlSegmenterWordsOnLine(e)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(l.index>t)break;n=l}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}},{key:"findNextIntlWordAtOrAfterOffset",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=this._getIntlSegmenterWordsOnLine(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(!(s.index<t))return s}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return null}},{key:"_getIntlSegmenterWordsOnLine",value:function(e){return this._segmenter?(this._cachedLine===e||(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e))),this._cachedSegments):[]}},{key:"_filterWordSegments",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._isWordLike(s)&&t.push(s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}},{key:"_isWordLike",value:function(e){return!!e.isWordLike}}]),t}(Qk),bw=new pw(10);function kw(e,t){var n="".concat(e,"/").concat(t.join(",")),i=bw.get(n);return i||(i=new _w(e,t),bw.set(n,i)),i}!function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(dw||(dw={})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"}(hw||(hw={})),function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"}(fw||(fw={}));var ww=function(){function e(t){u(this,e),this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,0|t.tabSize),"tabSize"===t.indentSize?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,0|t.indentSize),this._indentSizeIsTabSize=!1),this.insertSpaces=Boolean(t.insertSpaces),this.defaultEOL=0|t.defaultEOL,this.trimAutoWhitespace=Boolean(t.trimAutoWhitespace),this.bracketPairColorizationOptions=t.bracketPairColorizationOptions}return h(e,[{key:"originalIndentSize",get:function(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}},{key:"equals",value:function(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Ka(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}},{key:"createChangeEvent",value:function(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}]),e}(),Cw=function e(t,n){u(this,e),this._findMatchBrand=void 0,this.range=t,this.matches=n};var Sw=function e(t,n,i,r,o,a){u(this,e),this.identifier=t,this.range=n,this.text=i,this.forceMoveMarkers=r,this.isAutoWhitespaceEdit=o,this._isTracked=a},xw=function e(t,n,i){u(this,e),this.regex=t,this.wordSeparators=n,this.simpleSearch=i},Lw=function e(t,n,i){u(this,e),this.reverseEdits=t,this.changes=n,this.trimAutoWhitespaceLineNumbers=i};function Dw(e){return!e.isTooLargeForSyncing()&&!e.isForSimpleWidget}var Nw=function(){function e(t,n,i,r){u(this,e),this.searchString=t,this.isRegex=n,this.matchCase=i,this.wordSeparators=r}return h(e,[{key:"parseSearchRequest",value:function(){if(""===this.searchString)return null;var e;e=this.isRegex?function(e){if(!e||0===e.length)return!1;for(var t=0,n=e.length;t<n;t++){var i=e.charCodeAt(t);if(10===i)return!0;if(92===i){if(++t>=n)break;var r=e.charCodeAt(t);if(110===r||114===r||87===r)return!0}}return!1}(this.searchString):this.searchString.indexOf("\n")>=0;var t=null;try{t=Qh(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch(e){return null}if(!t)return null;var n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new xw(t,this.wordSeparators?kw(this.wordSeparators,[]):null,n?this.searchString:null)}}]),e}();function Iw(e,t,n){if(!n)return new Cw(e,null);for(var i=[],r=0,o=t.length;r<o;r++)i[r]=t[r];return new Cw(e,i)}var Ew=function(){function e(t){u(this,e);for(var n=[],i=0,r=0,o=t.length;r<o;r++)10===t.charCodeAt(r)&&(n[i++]=r);this._lineFeedsOffsets=n}return h(e,[{key:"findLineFeedCountBeforeOffset",value:function(e){var t=this._lineFeedsOffsets,n=0,i=t.length-1;if(-1===i)return 0;if(e<=t[0])return 0;for(;n<i;){var r=n+((i-n)/2|0);t[r]>=e?i=r-1:t[r+1]>=e?(n=r,i=r):n=r+1}return n+1}}]),e}(),Mw=function(){function e(){u(this,e)}return h(e,null,[{key:"findMatches",value:function(e,t,n,i,r){var o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,n,new Rw(o.wordSeparators,o.regex),i,r):this._doFindMatchesLineByLine(e,n,o,i,r):[]}},{key:"_getMultilineMatchRange",value:function(e,t,n,i,r,o){var a,s,l=0;if(a=i?t+r+(l=i.findLineFeedCountBeforeOffset(r)):t+r,i){var u=i.findLineFeedCountBeforeOffset(r+o.length)-l;s=a+o.length+u}else s=a+o.length;var c=e.getPositionAt(a),d=e.getPositionAt(s);return new hd(c.lineNumber,c.column,d.lineNumber,d.column)}},{key:"_doFindMatchesMultiline",value:function(e,t,n,i,r){var o,a=e.getOffsetAt(t.getStartPosition()),s=e.getValueInRange(t,1),l="\r\n"===e.getEOL()?new Ew(s):null,u=[],c=0;for(n.reset(0);o=n.next(s);)if(u[c++]=Iw(this._getMultilineMatchRange(e,a,s,l,o.index,o[0]),o,i),c>=r)return u;return u}},{key:"_doFindMatchesLineByLine",value:function(e,t,n,i,r){var o=[],a=0;if(t.startLineNumber===t.endLineNumber){var s=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,s,t.startLineNumber,t.startColumn-1,a,o,i,r),o}var l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,o,i,r);for(var u=t.startLineNumber+1;u<t.endLineNumber&&a<r;u++)a=this._findMatchesInLine(n,e.getLineContent(u),u,0,a,o,i,r);if(a<r){var c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,c,t.endLineNumber,0,a,o,i,r)}return o}},{key:"_findMatchesInLine",value:function(e,t,n,i,r,o,a,s){var l=e.wordSeparators;if(!a&&e.simpleSearch){for(var u=e.simpleSearch,c=u.length,d=t.length,h=-c;-1!==(h=t.indexOf(u,h+c));)if((!l||Tw(l,t,d,h,c))&&(o[r++]=new Cw(new hd(n,h+1+i,n,h+1+c+i),null),r>=s))return r;return r}var f,g=new Rw(e.wordSeparators,e.regex);g.reset(0);do{if((f=g.next(t))&&(o[r++]=Iw(new hd(n,f.index+1+i,n,f.index+1+f[0].length+i),f,a),r>=s))return r}while(f);return r}},{key:"findNextMatch",value:function(e,t,n,i){var r=t.parseSearchRequest();if(!r)return null;var o=new Rw(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,n,o,i):this._doFindNextMatchLineByLine(e,n,o,i)}},{key:"_doFindNextMatchMultiline",value:function(e,t,n,i){var r=new dd(t.lineNumber,1),o=e.getOffsetAt(r),a=e.getLineCount(),s=e.getValueInRange(new hd(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),1),l="\r\n"===e.getEOL()?new Ew(s):null;n.reset(t.column-1);var u=n.next(s);return u?Iw(this._getMultilineMatchRange(e,o,s,l,u.index,u[0]),u,i):1!==t.lineNumber||1!==t.column?this._doFindNextMatchMultiline(e,new dd(1,1),n,i):null}},{key:"_doFindNextMatchLineByLine",value:function(e,t,n,i){var r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),s=this._findFirstMatchInLine(n,a,o,t.column,i);if(s)return s;for(var l=1;l<=r;l++){var u=(o+l-1)%r,c=e.getLineContent(u+1),d=this._findFirstMatchInLine(n,c,u+1,1,i);if(d)return d}return null}},{key:"_findFirstMatchInLine",value:function(e,t,n,i,r){e.reset(i-1);var o=e.next(t);return o?Iw(new hd(n,o.index+1,n,o.index+1+o[0].length),o,r):null}},{key:"findPreviousMatch",value:function(e,t,n,i){var r=t.parseSearchRequest();if(!r)return null;var o=new Rw(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,n,o,i):this._doFindPreviousMatchLineByLine(e,n,o,i)}},{key:"_doFindPreviousMatchMultiline",value:function(e,t,n,i){var r=this._doFindMatchesMultiline(e,new hd(1,1,t.lineNumber,t.column),n,i,9990);if(r.length>0)return r[r.length-1];var o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new dd(o,e.getLineMaxColumn(o)),n,i):null}},{key:"_doFindPreviousMatchLineByLine",value:function(e,t,n,i){var r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),s=this._findLastMatchInLine(n,a,o,i);if(s)return s;for(var l=1;l<=r;l++){var u=(r+o-l-1)%r,c=e.getLineContent(u+1),d=this._findLastMatchInLine(n,c,u+1,i);if(d)return d}return null}},{key:"_findLastMatchInLine",value:function(e,t,n,i){var r,o=null;for(e.reset(0);r=e.next(t);)o=Iw(new hd(n,r.index+1,n,r.index+1+r[0].length),r,i);return o}}]),e}();function Tw(e,t,n,i,r){return function(e,t,n,i,r){if(0===i)return!0;var o=t.charCodeAt(i-1);if(0!==e.get(o))return!0;if(13===o||10===o)return!0;if(r>0){var a=t.charCodeAt(i);if(0!==e.get(a))return!0}return!1}(e,t,0,i,r)&&function(e,t,n,i,r){if(i+r===n)return!0;var o=t.charCodeAt(i+r);if(0!==e.get(o))return!0;if(13===o||10===o)return!0;if(r>0){var a=t.charCodeAt(i+r-1);if(0!==e.get(a))return!0}return!1}(e,t,n,i,r)}var Rw=function(){function e(t,n){u(this,e),this._wordSeparators=t,this._searchRegex=n,this._prevMatchStartIndex=-1,this._prevMatchLength=0}return h(e,[{key:"reset",value:function(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}},{key:"next",value:function(e){var t,n=e.length;do{if(this._prevMatchStartIndex+this._prevMatchLength===n)return null;if(!(t=this._searchRegex.exec(e)))return null;var i=t.index,r=t[0].length;if(i===this._prevMatchStartIndex&&r===this._prevMatchLength){if(0===r){pf(e,n,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=r,!this._wordSeparators||Tw(this._wordSeparators,e,n,i,r))return t}while(t);return null}}]),e}(),Aw=function(){function e(){u(this,e)}return h(e,null,[{key:"computeUnicodeHighlights",value:function(e,t,n){var i,r=n?n.startLineNumber:1,o=n?n.endLineNumber:e.getLineCount(),a=new Pw(t),s=a.getCandidateCodePoints();i="allNonBasicAscii"===s?new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):new RegExp("".concat(function(e){var t="[".concat(qh(e.map((function(e){return String.fromCodePoint(e)})).join("")),"]");return t}(Array.from(s))),"g");var l,u=new Rw(null,i),c=[],d=!1,h=0,f=0,g=0;e:for(var v=r,p=o;v<=p;v++){var m=e.getLineContent(v),y=m.length;u.reset(0);do{if(l=u.next(m)){var _=l.index,b=l.index+l[0].length;if(_>0)ff(m.charCodeAt(_-1))&&_--;if(b+1<y)ff(m.charCodeAt(b-1))&&b++;var k=m.substring(_,b),w=Ks(_+1,zs,m,0);w&&w.endColumn<=_+1&&(w=null);var C=a.shouldHighlightNonBasicASCII(k,w?w.word:null);if(0!==C){3===C?h++:2===C?f++:1===C?g++:$y();if(c.length>=1e3){d=!0;break e}c.push(new hd(v,_+1,v,b+1))}}}while(l)}return{ranges:c,hasMore:d,ambiguousCharacterCount:h,invisibleCharacterCount:f,nonBasicAsciiCharacterCount:g}}},{key:"computeUnicodeHighlightReason",value:function(e,t){var n=new Pw(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:var i=e.codePointAt(0),r=n.ambiguousCharacters.getPrimaryConfusable(i),o=Of.getLocales().filter((function(e){return!Of.getInstance(new Set(x(t.allowedLocales).concat([e]))).isAmbiguous(i)}));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:o};case 1:return{kind:2}}}}]),e}();var Pw=function(){function e(t){u(this,e),this.options=t,this.allowedCodePoints=new Set(t.allowedCodePoints),this.ambiguousCharacters=Of.getInstance(new Set(t.allowedLocales))}return h(e,[{key:"getCandidateCodePoints",value:function(){if(this.options.nonBasicASCII)return"allNonBasicAscii";var e=new Set;if(this.options.invisibleCharacters){var t=!0,n=!1,i=void 0;try{for(var r,o=Ff.codePoints[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;Ow(String.fromCodePoint(a))||e.add(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}if(this.options.ambiguousCharacters){var s=!0,l=!1,u=void 0;try{for(var c,d=this.ambiguousCharacters.getConfusableCodePoints()[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;e.add(h)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}var f=!0,g=!1,v=void 0;try{for(var p,m=this.allowedCodePoints[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value;e.delete(y)}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}return e}},{key:"shouldHighlightNonBasicASCII",value:function(e,t){var n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return 0;if(this.options.nonBasicASCII)return 1;var i=!1,r=!1;if(t){var o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=c.codePointAt(0),h=Sf(c);i=i||h,h||this.ambiguousCharacters.isAmbiguous(d)||Ff.isInvisibleCharacter(d)||(r=!0)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}return!i&&r?0:this.options.invisibleCharacters&&!Ow(e)&&Ff.isInvisibleCharacter(n)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?3:0}}]),e}();function Ow(e){return" "===e||"\n"===e||"\t"===e}var Fw=function e(t,n,i){u(this,e),this.changes=t,this.moves=n,this.hitTimeout=i},Ww=function e(t,n){u(this,e),this.lineRangeMapping=t,this.changes=n},Bw=function(){function e(t,n){if(u(this,e),this.start=t,this.endExclusive=n,t>n)throw new Lu("Invalid range: ".concat(this.toString()))}return h(e,[{key:"isEmpty",get:function(){return this.start===this.endExclusive}},{key:"delta",value:function(t){return new e(this.start+t,this.endExclusive+t)}},{key:"deltaStart",value:function(t){return new e(this.start+t,this.endExclusive)}},{key:"deltaEnd",value:function(t){return new e(this.start,this.endExclusive+t)}},{key:"length",get:function(){return this.endExclusive-this.start}},{key:"toString",value:function(){return"[".concat(this.start,", ").concat(this.endExclusive,")")}},{key:"contains",value:function(e){return this.start<=e&&e<this.endExclusive}},{key:"join",value:function(t){return new e(Math.min(this.start,t.start),Math.max(this.endExclusive,t.endExclusive))}},{key:"intersect",value:function(t){var n=Math.max(this.start,t.start),i=Math.min(this.endExclusive,t.endExclusive);if(n<=i)return new e(n,i)}},{key:"intersects",value:function(e){return Math.max(this.start,e.start)<Math.min(this.endExclusive,e.endExclusive)}},{key:"isBefore",value:function(e){return this.endExclusive<=e.start}},{key:"isAfter",value:function(e){return this.start>=e.endExclusive}},{key:"slice",value:function(e){return e.slice(this.start,this.endExclusive)}},{key:"substring",value:function(e){return e.substring(this.start,this.endExclusive)}},{key:"clip",value:function(e){if(this.isEmpty)throw new Lu("Invalid clipping range: ".concat(this.toString()));return Math.max(this.start,Math.min(this.endExclusive-1,e))}},{key:"clipCyclic",value:function(e){if(this.isEmpty)throw new Lu("Invalid clipping range: ".concat(this.toString()));return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}},{key:"forEach",value:function(e){for(var t=this.start;t<this.endExclusive;t++)e(t)}}],[{key:"addRange",value:function(t,n){for(var i=0;i<n.length&&n[i].endExclusive<t.start;)i++;for(var r=i;r<n.length&&n[r].start<=t.endExclusive;)r++;if(i===r)n.splice(i,0,t);else{var o=Math.min(t.start,n[i].start),a=Math.max(t.endExclusive,n[r-1].endExclusive);n.splice(i,r-i,new e(o,a))}}},{key:"tryCreate",value:function(t,n){if(!(t>n))return new e(t,n)}},{key:"ofLength",value:function(t){return new e(0,t)}},{key:"ofStartAndLength",value:function(t,n){return new e(t,t+n)}}]),e}(),Hw=function(){function e(){u(this,e),this._sortedRanges=[]}return h(e,[{key:"addRange",value:function(e){for(var t=0;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;for(var n=t;n<this._sortedRanges.length&&this._sortedRanges[n].start<=e.endExclusive;)n++;if(t===n)this._sortedRanges.splice(t,0,e);else{var i=Math.min(e.start,this._sortedRanges[t].start),r=Math.max(e.endExclusive,this._sortedRanges[n-1].endExclusive);this._sortedRanges.splice(t,n-t,new Bw(i,r))}}},{key:"toString",value:function(){return this._sortedRanges.map((function(e){return e.toString()})).join(", ")}},{key:"intersectsStrict",value:function(e){for(var t=0;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}},{key:"intersectWithRange",value:function(t){var n=new e,i=!0,r=!1,o=void 0;try{for(var a,s=this._sortedRanges[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value.intersect(t);l&&n.addRange(l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}},{key:"intersectWithRangeLength",value:function(e){return this.intersectWithRange(e).length}},{key:"length",get:function(){return this._sortedRanges.reduce((function(e,t){return e+t.length}),0)}}]),e}();function Vw(e,t){var n=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length-1;n>=0;n--){if(t(e[n]))return n}return-1}(e,t);if(-1!==n)return e[n]}function zw(e,t){var n=Uw(e,t);return-1===n?void 0:e[n]}function Uw(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;n<i;){var r=Math.floor((n+i)/2);t(e[r])?n=r+1:i=r}return n-1}function jw(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;n<i;){var r=Math.floor((n+i)/2);t(e[r])?i=r:n=r+1}return n}var Kw=function(){function e(t){u(this,e),this._array=t,this._findLastMonotonousLastIdx=0}return h(e,[{key:"findLastMonotonous",value:function(t){if(e.assertInvariants){if(this._prevFindLastPredicate){var n=!0,i=!1,r=void 0;try{for(var o,a=this._array[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(this._prevFindLastPredicate(s)&&!t(s))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}this._prevFindLastPredicate=t}var l=Uw(this._array,t,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=l+1,-1===l?void 0:this._array[l]}}]),e}();function qw(e,t){if(0!==e.length){for(var n=e[0],i=1;i<e.length;i++){var r=e[i];t(r,n)>0&&(n=r)}return n}}Kw.assertInvariants=!1;var Gw=function(){function e(t,n){if(u(this,e),t>n)throw new Lu("startLineNumber ".concat(t," cannot be after endLineNumberExclusive ").concat(n));this.startLineNumber=t,this.endLineNumberExclusive=n}return h(e,[{key:"contains",value:function(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}},{key:"isEmpty",get:function(){return this.startLineNumber===this.endLineNumberExclusive}},{key:"delta",value:function(t){return new e(this.startLineNumber+t,this.endLineNumberExclusive+t)}},{key:"deltaLength",value:function(t){return new e(this.startLineNumber,this.endLineNumberExclusive+t)}},{key:"length",get:function(){return this.endLineNumberExclusive-this.startLineNumber}},{key:"join",value:function(t){return new e(Math.min(this.startLineNumber,t.startLineNumber),Math.max(this.endLineNumberExclusive,t.endLineNumberExclusive))}},{key:"toString",value:function(){return"[".concat(this.startLineNumber,",").concat(this.endLineNumberExclusive,")")}},{key:"intersect",value:function(t){var n=Math.max(this.startLineNumber,t.startLineNumber),i=Math.min(this.endLineNumberExclusive,t.endLineNumberExclusive);if(n<=i)return new e(n,i)}},{key:"intersectsStrict",value:function(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}},{key:"overlapOrTouch",value:function(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}},{key:"equals",value:function(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}},{key:"toInclusiveRange",value:function(){return this.isEmpty?null:new hd(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}},{key:"toExclusiveRange",value:function(){return new hd(this.startLineNumber,1,this.endLineNumberExclusive,1)}},{key:"mapToLineArray",value:function(e){for(var t=[],n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}},{key:"forEach",value:function(e){for(var t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}},{key:"serialize",value:function(){return[this.startLineNumber,this.endLineNumberExclusive]}},{key:"includes",value:function(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}},{key:"toOffsetRange",value:function(){return new Bw(this.startLineNumber-1,this.endLineNumberExclusive-1)}}],[{key:"fromRangeInclusive",value:function(t){return new e(t.startLineNumber,t.endLineNumber+1)}},{key:"joinMany",value:function(e){if(0===e.length)return[];for(var t=new Zw(e[0].slice()),n=1;n<e.length;n++)t=t.getUnion(new Zw(e[n].slice()));return t.ranges}},{key:"join",value:function(t){if(0===t.length)throw new Lu("lineRanges cannot be empty");for(var n=t[0].startLineNumber,i=t[0].endLineNumberExclusive,r=1;r<t.length;r++)n=Math.min(n,t[r].startLineNumber),i=Math.max(i,t[r].endLineNumberExclusive);return new e(n,i)}},{key:"ofLength",value:function(t,n){return new e(t,t+n)}},{key:"deserialize",value:function(t){return new e(t[0],t[1])}}]),e}(),Zw=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];u(this,e),this._normalizedRanges=t}return h(e,[{key:"ranges",get:function(){return this._normalizedRanges}},{key:"addRange",value:function(e){if(0!==e.length){var t=jw(this._normalizedRanges,(function(t){return t.endLineNumberExclusive>=e.startLineNumber})),n=Uw(this._normalizedRanges,(function(t){return t.startLineNumber<=e.endLineNumberExclusive}))+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){var i=this._normalizedRanges[t];this._normalizedRanges[t]=i.join(e)}else{var r=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,r)}}}},{key:"contains",value:function(e){var t=zw(this._normalizedRanges,(function(t){return t.startLineNumber<=e}));return!!t&&t.endLineNumberExclusive>e}},{key:"intersects",value:function(e){var t=zw(this._normalizedRanges,(function(t){return t.startLineNumber<e.endLineNumberExclusive}));return!!t&&t.endLineNumberExclusive>e.startLineNumber}},{key:"getUnion",value:function(t){if(0===this._normalizedRanges.length)return t;if(0===t._normalizedRanges.length)return this;for(var n=[],i=0,r=0,o=null;i<this._normalizedRanges.length||r<t._normalizedRanges.length;){var a=null;if(i<this._normalizedRanges.length&&r<t._normalizedRanges.length){var s=this._normalizedRanges[i],l=t._normalizedRanges[r];s.startLineNumber<l.startLineNumber?(a=s,i++):(a=l,r++)}else i<this._normalizedRanges.length?(a=this._normalizedRanges[i],i++):(a=t._normalizedRanges[r],r++);null===o?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new Gw(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(n.push(o),o=a)}return null!==o&&n.push(o),new e(n)}},{key:"subtractFrom",value:function(t){var n=jw(this._normalizedRanges,(function(e){return e.endLineNumberExclusive>=t.startLineNumber})),i=Uw(this._normalizedRanges,(function(e){return e.startLineNumber<=t.endLineNumberExclusive}))+1;if(n===i)return new e([t]);for(var r=[],o=t.startLineNumber,a=n;a<i;a++){var s=this._normalizedRanges[a];s.startLineNumber>o&&r.push(new Gw(o,s.startLineNumber)),o=s.endLineNumberExclusive}return o<t.endLineNumberExclusive&&r.push(new Gw(o,t.endLineNumberExclusive)),new e(r)}},{key:"toString",value:function(){return this._normalizedRanges.map((function(e){return e.toString()})).join(", ")}},{key:"getIntersection",value:function(t){for(var n=[],i=0,r=0;i<this._normalizedRanges.length&&r<t._normalizedRanges.length;){var o=this._normalizedRanges[i],a=t._normalizedRanges[r],s=o.intersect(a);s&&!s.isEmpty&&n.push(s),o.endLineNumberExclusive<a.endLineNumberExclusive?i++:r++}return new e(n)}},{key:"getWithDelta",value:function(t){return new e(this._normalizedRanges.map((function(e){return e.delta(t)})))}}]),e}(),Yw=function(){function e(t,n){u(this,e),this.lineCount=t,this.columnCount=n}return h(e,[{key:"isGreaterThanOrEqualTo",value:function(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}},{key:"createRange",value:function(e){return 0===this.lineCount?new hd(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new hd(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}},{key:"addToPosition",value:function(e){return 0===this.lineCount?new dd(e.lineNumber,e.column+this.columnCount):new dd(e.lineNumber+this.lineCount,this.columnCount+1)}},{key:"toString",value:function(){return"".concat(this.lineCount,",").concat(this.columnCount)}}],[{key:"betweenPositions",value:function(t,n){return t.lineNumber===n.lineNumber?new e(0,n.column-t.column):new e(n.lineNumber-t.lineNumber,n.column-1)}},{key:"ofRange",value:function(t){return e.betweenPositions(t.getStartPosition(),t.getEndPosition())}},{key:"ofText",value:function(t){var n=0,i=0,r=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){"\n"===s.value?(n++,i=0):i++}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return new e(n,i)}}]),e}();Yw.zero=new Yw(0,0);var Qw=function(){function e(t){u(this,e),this.text=t,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(var n=0;n<t.length;n++)"\n"===t.charAt(n)&&this.lineStartOffsetByLineIdx.push(n+1)}return h(e,[{key:"getOffset",value:function(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}},{key:"getOffsetRange",value:function(e){return new Bw(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}},{key:"textLength",get:function(){var e=this.lineStartOffsetByLineIdx.length-1;return new Yw(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}]),e}(),Xw=function(){function e(t){u(this,e),this.edits=t,e_((function(){return t_(t,(function(e,t){return e.range.getEndPosition().isBeforeOrEqual(t.range.getStartPosition())}))}))}return h(e,[{key:"apply",value:function(e){var t="",n=new dd(1,1),i=!0,r=!1,o=void 0;try{for(var a,s=this.edits[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=l.range,c=u.getStartPosition(),d=u.getEndPosition(),h=Jw(n,c);h.isEmpty()||(t+=e.getValueOfRange(h)),t+=l.text,n=d}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}var f=Jw(n,e.endPositionExclusive);return f.isEmpty()||(t+=e.getValueOfRange(f)),t}},{key:"applyToString",value:function(e){var t=new tC(e);return this.apply(t)}},{key:"getNewRanges",value:function(){var e=[],t=0,n=0,i=0,r=!0,o=!1,a=void 0;try{for(var s,l=this.edits[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=Yw.ofText(u.text),d=dd.lift({lineNumber:u.range.startLineNumber+n,column:u.range.startColumn+(u.range.startLineNumber===t?i:0)}),h=c.createRange(d);e.push(h),n=h.endLineNumber-u.range.endLineNumber,i=h.endColumn-u.range.endColumn,t=u.range.endLineNumber}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return e}}]),e}(),$w=function(){function e(t,n){u(this,e),this.range=t,this.text=n}return h(e,[{key:"toSingleEditOperation",value:function(){return{range:this.range,text:this.text}}}]),e}();function Jw(e,t){if(e.lineNumber===t.lineNumber&&e.column===Number.MAX_SAFE_INTEGER)return hd.fromPositions(t,t);if(!e.isBeforeOrEqual(t))throw new Lu("start must be before end");return new hd(e.lineNumber,e.column,t.lineNumber,t.column)}var eC=function(){function e(){u(this,e)}return h(e,[{key:"endPositionExclusive",get:function(){return this.length.addToPosition(new dd(1,1))}}]),e}(),tC=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).value=e,n._t=new Qw(n.value),n}return p(t,e),h(t,[{key:"getValueOfRange",value:function(e){return this._t.getOffsetRange(e).substring(this.value)}},{key:"length",get:function(){return this._t.textLength}}]),t}(eC),nC=function(){function e(t,n){u(this,e),this.original=t,this.modified=n}return h(e,[{key:"toString",value:function(){return"{".concat(this.original.toString(),"->").concat(this.modified.toString(),"}")}},{key:"flip",value:function(){return new e(this.modified,this.original)}},{key:"join",value:function(t){return new e(this.original.join(t.original),this.modified.join(t.modified))}},{key:"toRangeMapping",value:function(){var e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new aC(e,t);if(1===this.original.startLineNumber||1===this.modified.startLineNumber){if(1!==this.modified.startLineNumber||1!==this.original.startLineNumber)throw new Lu("not a valid diff");return new aC(new hd(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new hd(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}return new aC(new hd(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new hd(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}},{key:"toRangeMapping2",value:function(e,t){if(rC(this.original.endLineNumberExclusive,e)&&rC(this.modified.endLineNumberExclusive,t))return new aC(new hd(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new hd(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new aC(hd.fromPositions(new dd(this.original.startLineNumber,1),iC(new dd(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),hd.fromPositions(new dd(this.modified.startLineNumber,1),iC(new dd(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new aC(hd.fromPositions(iC(new dd(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),iC(new dd(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),hd.fromPositions(iC(new dd(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),iC(new dd(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new Lu}}],[{key:"inverse",value:function(t,n,i){var r=[],o=1,a=1,s=!0,l=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value,f=new e(new Gw(o,h.original.startLineNumber),new Gw(a,h.modified.startLineNumber));f.modified.isEmpty||r.push(f),o=h.original.endLineNumberExclusive,a=h.modified.endLineNumberExclusive}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}var g=new e(new Gw(o,n+1),new Gw(a,i+1));return g.modified.isEmpty||r.push(g),r}},{key:"clip",value:function(t,n,i){var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=c.original.intersect(n),h=c.modified.intersect(i);d&&!d.isEmpty&&h&&!h.isEmpty&&r.push(new e(d,h))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return r}}]),e}();function iC(e,t){if(e.lineNumber<1)return new dd(1,1);if(e.lineNumber>t.length)return new dd(t.length,t[t.length-1].length+1);var n=t[e.lineNumber-1];return e.column>n.length+1?new dd(e.lineNumber,n.length+1):e}function rC(e,t){return e>=1&&e<=t.length}var oC=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[e,n])).innerChanges=i,r}return p(t,e),h(t,[{key:"flip",value:function(){var e;return new t(this.modified,this.original,null===(e=this.innerChanges)||void 0===e?void 0:e.map((function(e){return e.flip()})))}},{key:"withInnerChangesFromLineRanges",value:function(){return new t(this.original,this.modified,[this.toRangeMapping()])}}],[{key:"fromRangeMappings",value:function(e){return new t(Gw.join(e.map((function(e){return Gw.fromRangeInclusive(e.originalRange)}))),Gw.join(e.map((function(e){return Gw.fromRangeInclusive(e.modifiedRange)}))),e)}}]),t}(nC),aC=function(){function e(t,n){u(this,e),this.originalRange=t,this.modifiedRange=n}return h(e,[{key:"toString",value:function(){return"{".concat(this.originalRange.toString(),"->").concat(this.modifiedRange.toString(),"}")}},{key:"flip",value:function(){return new e(this.modifiedRange,this.originalRange)}},{key:"toTextEdit",value:function(e){var t=e.getValueOfRange(this.modifiedRange);return new $w(this.originalRange,t)}}],[{key:"assertSorted",value:function(e){for(var t=1;t<e.length;t++){var n=e[t-1],i=e[t];if(!n.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())||!n.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition()))throw new Lu("Range mappings must be sorted")}}}]),e}(),sC=function(){function e(){u(this,e)}return h(e,[{key:"computeDiff",value:function(e,t,n){var i=new fC(e,t,{maxComputationTime:n.maxComputationTimeMs,shouldIgnoreTrimWhitespace:n.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),r=[],o=null,a=!0,s=!1,l=void 0;try{for(var u,c=i.changes[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d,h=u.value,f=void 0;f=0===h.originalEndLineNumber?new Gw(h.originalStartLineNumber+1,h.originalStartLineNumber+1):new Gw(h.originalStartLineNumber,h.originalEndLineNumber+1);var g=void 0;g=0===h.modifiedEndLineNumber?new Gw(h.modifiedStartLineNumber+1,h.modifiedStartLineNumber+1):new Gw(h.modifiedStartLineNumber,h.modifiedEndLineNumber+1);var v=new oC(f,g,null===(d=h.charChanges)||void 0===d?void 0:d.map((function(e){return new aC(new hd(e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn),new hd(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn))})));o&&(o.modified.endLineNumberExclusive!==v.modified.startLineNumber&&o.original.endLineNumberExclusive!==v.original.startLineNumber||(v=new oC(o.original.join(v.original),o.modified.join(v.modified),o.innerChanges&&v.innerChanges?o.innerChanges.concat(v.innerChanges):void 0),r.pop())),r.push(v),o=v}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return e_((function(){return t_(r,(function(e,t){return t.original.startLineNumber-e.original.endLineNumberExclusive==t.modified.startLineNumber-e.modified.endLineNumberExclusive&&e.original.endLineNumberExclusive<t.original.startLineNumber&&e.modified.endLineNumberExclusive<t.modified.startLineNumber}))})),new Fw(r,[],i.quitEarly)}}]),e}();function lC(e,t,n,i){return new Gk(e,t,n).ComputeDiff(i)}var uC=function(){function e(t){u(this,e);for(var n=[],i=[],r=0,o=t.length;r<o;r++)n[r]=gC(t[r],1),i[r]=vC(t[r],1);this.lines=t,this._startColumns=n,this._endColumns=i}return h(e,[{key:"getElements",value:function(){for(var e=[],t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}},{key:"getStrictElement",value:function(e){return this.lines[e]}},{key:"getStartLineNumber",value:function(e){return e+1}},{key:"getEndLineNumber",value:function(e){return e+1}},{key:"createCharSequence",value:function(e,t,n){for(var i=[],r=[],o=[],a=0,s=t;s<=n;s++){for(var l=this.lines[s],u=e?this._startColumns[s]:1,c=e?this._endColumns[s]:l.length+1,d=u;d<c;d++)i[a]=l.charCodeAt(d-1),r[a]=s+1,o[a]=d,a++;!e&&s<n&&(i[a]=10,r[a]=s+1,o[a]=l.length+1,a++)}return new cC(i,r,o)}}]),e}(),cC=function(){function e(t,n,i){u(this,e),this._charCodes=t,this._lineNumbers=n,this._columns=i}return h(e,[{key:"toString",value:function(){var e=this;return"["+this._charCodes.map((function(t,n){return(10===t?"\\n":String.fromCharCode(t))+"-(".concat(e._lineNumbers[n],",").concat(e._columns[n],")")})).join(", ")+"]"}},{key:"_assertIndex",value:function(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}},{key:"getElements",value:function(){return this._charCodes}},{key:"getStartLineNumber",value:function(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}},{key:"getEndLineNumber",value:function(e){return-1===e?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),10===this._charCodes[e]?this._lineNumbers[e]+1:this._lineNumbers[e])}},{key:"getStartColumn",value:function(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}},{key:"getEndColumn",value:function(e){return-1===e?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),10===this._charCodes[e]?1:this._columns[e]+1)}}]),e}(),dC=function(){function e(t,n,i,r,o,a,s,l){u(this,e),this.originalStartLineNumber=t,this.originalStartColumn=n,this.originalEndLineNumber=i,this.originalEndColumn=r,this.modifiedStartLineNumber=o,this.modifiedStartColumn=a,this.modifiedEndLineNumber=s,this.modifiedEndColumn=l}return h(e,null,[{key:"createFromDiffChange",value:function(t,n,i){return new e(n.getStartLineNumber(t.originalStart),n.getStartColumn(t.originalStart),n.getEndLineNumber(t.originalStart+t.originalLength-1),n.getEndColumn(t.originalStart+t.originalLength-1),i.getStartLineNumber(t.modifiedStart),i.getStartColumn(t.modifiedStart),i.getEndLineNumber(t.modifiedStart+t.modifiedLength-1),i.getEndColumn(t.modifiedStart+t.modifiedLength-1))}}]),e}();var hC=function(){function e(t,n,i,r,o){u(this,e),this.originalStartLineNumber=t,this.originalEndLineNumber=n,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=r,this.charChanges=o}return h(e,null,[{key:"createFromDiffResult",value:function(t,n,i,r,o,a,s){var l,u,c,d,h=void 0;if(0===n.originalLength?(l=i.getStartLineNumber(n.originalStart)-1,u=0):(l=i.getStartLineNumber(n.originalStart),u=i.getEndLineNumber(n.originalStart+n.originalLength-1)),0===n.modifiedLength?(c=r.getStartLineNumber(n.modifiedStart)-1,d=0):(c=r.getStartLineNumber(n.modifiedStart),d=r.getEndLineNumber(n.modifiedStart+n.modifiedLength-1)),a&&n.originalLength>0&&n.originalLength<20&&n.modifiedLength>0&&n.modifiedLength<20&&o()){var f=i.createCharSequence(t,n.originalStart,n.originalStart+n.originalLength-1),g=r.createCharSequence(t,n.modifiedStart,n.modifiedStart+n.modifiedLength-1);if(f.getElements().length>0&&g.getElements().length>0){var v=lC(f,g,o,!0).changes;s&&(v=function(e){if(e.length<=1)return e;for(var t=[e[0]],n=t[0],i=1,r=e.length;i<r;i++){var o=e[i],a=o.originalStart-(n.originalStart+n.originalLength),s=o.modifiedStart-(n.modifiedStart+n.modifiedLength);Math.min(a,s)<3?(n.originalLength=o.originalStart+o.originalLength-n.originalStart,n.modifiedLength=o.modifiedStart+o.modifiedLength-n.modifiedStart):(t.push(o),n=o)}return t}(v)),h=[];for(var p=0,m=v.length;p<m;p++)h.push(dC.createFromDiffChange(v[p],f,g))}}return new e(l,u,c,d,h)}}]),e}(),fC=function(){function e(t,n,i){u(this,e),this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=t,this.modifiedLines=n,this.original=new uC(t),this.modified=new uC(n),this.continueLineDiff=pC(i.maxComputationTime),this.continueCharDiff=pC(0===i.maxComputationTime?0:Math.min(i.maxComputationTime,5e3))}return h(e,[{key:"computeDiff",value:function(){if(1===this.original.lines.length&&0===this.original.lines[0].length)return 1===this.modified.lines.length&&0===this.modified.lines[0].length?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(1===this.modified.lines.length&&0===this.modified.lines[0].length)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};var e=lC(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){for(var i=[],r=0,o=t.length;r<o;r++)i.push(hC.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[r],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:i}}for(var a=[],s=0,l=0,u=-1,c=t.length;u<c;u++){for(var d=u+1<c?t[u+1]:null,h=d?d.originalStart:this.originalLines.length,f=d?d.modifiedStart:this.modifiedLines.length;s<h&&l<f;){var g=this.originalLines[s],v=this.modifiedLines[l];if(g!==v){for(var p=gC(g,1),m=gC(v,1);p>1&&m>1;){if(g.charCodeAt(p-2)!==v.charCodeAt(m-2))break;p--,m--}(p>1||m>1)&&this._pushTrimWhitespaceCharChange(a,s+1,1,p,l+1,1,m);for(var y=vC(g,1),_=vC(v,1),b=g.length+1,k=v.length+1;y<b&&_<k;){if(g.charCodeAt(y-1)!==g.charCodeAt(_-1))break;y++,_++}(y<b||_<k)&&this._pushTrimWhitespaceCharChange(a,s+1,y,b,l+1,_,k)}s++,l++}d&&(a.push(hC.createFromDiffResult(this.shouldIgnoreTrimWhitespace,d,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=d.originalLength,l+=d.modifiedLength)}return{quitEarly:n,changes:a}}},{key:"_pushTrimWhitespaceCharChange",value:function(e,t,n,i,r,o,a){if(!this._mergeTrimWhitespaceCharChange(e,t,n,i,r,o,a)){var s=void 0;this.shouldComputeCharChanges&&(s=[new dC(t,n,t,i,r,o,r,a)]),e.push(new hC(t,t,r,r,s))}}},{key:"_mergeTrimWhitespaceCharChange",value:function(e,t,n,i,r,o,a){var s=e.length;if(0===s)return!1;var l=e[s-1];return 0!==l.originalEndLineNumber&&0!==l.modifiedEndLineNumber&&(l.originalEndLineNumber===t&&l.modifiedEndLineNumber===r?(this.shouldComputeCharChanges&&l.charChanges&&l.charChanges.push(new dC(t,n,t,i,r,o,r,a)),!0):l.originalEndLineNumber+1===t&&l.modifiedEndLineNumber+1===r&&(l.originalEndLineNumber=t,l.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&l.charChanges&&l.charChanges.push(new dC(t,n,t,i,r,o,r,a)),!0))}}]),e}();function gC(e,t){var n=$h(e);return-1===n?t:n+1}function vC(e,t){var n=ef(e);return-1===n?t:n+2}function pC(e){if(0===e)return function(){return!0};var t=Date.now();return function(){return Date.now()-t<e}}var mC=function(){function e(t,n){u(this,e),this.diffs=t,this.hitTimeout=n}return h(e,null,[{key:"trivial",value:function(t,n){return new e([new yC(Bw.ofLength(t.length),Bw.ofLength(n.length))],!1)}},{key:"trivialTimedOut",value:function(t,n){return new e([new yC(Bw.ofLength(t.length),Bw.ofLength(n.length))],!0)}}]),e}(),yC=function(){function e(t,n){u(this,e),this.seq1Range=t,this.seq2Range=n}return h(e,[{key:"swap",value:function(){return new e(this.seq2Range,this.seq1Range)}},{key:"toString",value:function(){return"".concat(this.seq1Range," <-> ").concat(this.seq2Range)}},{key:"join",value:function(t){return new e(this.seq1Range.join(t.seq1Range),this.seq2Range.join(t.seq2Range))}},{key:"delta",value:function(t){return 0===t?this:new e(this.seq1Range.delta(t),this.seq2Range.delta(t))}},{key:"deltaStart",value:function(t){return 0===t?this:new e(this.seq1Range.deltaStart(t),this.seq2Range.deltaStart(t))}},{key:"deltaEnd",value:function(t){return 0===t?this:new e(this.seq1Range.deltaEnd(t),this.seq2Range.deltaEnd(t))}},{key:"intersect",value:function(t){var n=this.seq1Range.intersect(t.seq1Range),i=this.seq2Range.intersect(t.seq2Range);if(n&&i)return new e(n,i)}},{key:"getStarts",value:function(){return new _C(this.seq1Range.start,this.seq2Range.start)}},{key:"getEndExclusives",value:function(){return new _C(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}],[{key:"invert",value:function(t,n){var i=[];return oa(t,(function(t,r){i.push(e.fromOffsetPairs(t?t.getEndExclusives():_C.zero,r?r.getStarts():new _C(n,(t?t.seq2Range.endExclusive-t.seq1Range.endExclusive:0)+n)))})),i}},{key:"fromOffsetPairs",value:function(t,n){return new e(new Bw(t.offset1,n.offset1),new Bw(t.offset2,n.offset2))}},{key:"assertSorted",value:function(e){var t=void 0,n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(t&&!(t.seq1Range.endExclusive<=s.seq1Range.start&&t.seq2Range.endExclusive<=s.seq2Range.start))throw new Lu("Sequence diffs must be sorted");t=s}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}]),e}(),_C=function(){function e(t,n){u(this,e),this.offset1=t,this.offset2=n}return h(e,[{key:"toString",value:function(){return"".concat(this.offset1," <-> ").concat(this.offset2)}},{key:"delta",value:function(t){return 0===t?this:new e(this.offset1+t,this.offset2+t)}},{key:"equals",value:function(e){return this.offset1===e.offset1&&this.offset2===e.offset2}}]),e}();_C.zero=new _C(0,0),_C.max=new _C(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);var bC=function(){function e(){u(this,e)}return h(e,[{key:"isValid",value:function(){return!0}}]),e}();bC.instance=new bC;var kC=function(){function e(t){if(u(this,e),this.timeout=t,this.startTime=Date.now(),this.valid=!0,t<=0)throw new Lu("timeout must be positive")}return h(e,[{key:"isValid",value:function(){var e=Date.now()-this.startTime<this.timeout;return!e&&this.valid&&(this.valid=!1),this.valid}}]),e}(),wC=function(){function e(t,n){u(this,e),this.width=t,this.height=n,this.array=[],this.array=new Array(t*n)}return h(e,[{key:"get",value:function(e,t){return this.array[e+t*this.width]}},{key:"set",value:function(e,t,n){this.array[e+t*this.width]=n}}]),e}();function CC(e){return 32===e||9===e}var SC=function(){function e(t,n,i){u(this,e),this.range=t,this.lines=n,this.source=i,this.histogram=[];for(var r=0,o=t.startLineNumber-1;o<t.endLineNumberExclusive-1;o++){for(var a=n[o],s=0;s<a.length;s++){r++;var l=a[s],c=e.getKey(l);this.histogram[c]=(this.histogram[c]||0)+1}r++;var d=e.getKey("\n");this.histogram[d]=(this.histogram[d]||0)+1}this.totalCount=r}return h(e,[{key:"computeSimilarity",value:function(e){for(var t=0,n=Math.max(this.histogram.length,e.histogram.length),i=0;i<n;i++){var r,o;t+=Math.abs((null!==(r=this.histogram[i])&&void 0!==r?r:0)-(null!==(o=e.histogram[i])&&void 0!==o?o:0))}return 1-t/(this.totalCount+e.totalCount)}}],[{key:"getKey",value:function(e){var t=this.chrKeys.get(e);return void 0===t&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}}]),e}();SC.chrKeys=new Map;var xC,LC=function(){function e(){u(this,e)}return h(e,[{key:"compute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bC.instance,i=arguments.length>3?arguments[3]:void 0;if(0===e.length||0===t.length)return mC.trivial(e,t);for(var r=new wC(e.length,t.length),o=new wC(e.length,t.length),a=new wC(e.length,t.length),s=0;s<e.length;s++)for(var l=0;l<t.length;l++){if(!n.isValid())return mC.trivialTimedOut(e,t);var u=0===s?0:r.get(s-1,l),c=0===l?0:r.get(s,l-1),d=void 0;e.getElement(s)===t.getElement(l)?(d=0===s||0===l?0:r.get(s-1,l-1),s>0&&l>0&&3===o.get(s-1,l-1)&&(d+=a.get(s-1,l-1)),d+=i?i(s,l):1):d=-1;var h=Math.max(u,c,d);if(h===d){var f=s>0&&l>0?a.get(s-1,l-1):0;a.set(s,l,f+1),o.set(s,l,3)}else h===u?(a.set(s,l,0),o.set(s,l,1)):h===c&&(a.set(s,l,0),o.set(s,l,2));r.set(s,l,h)}var g=[],v=e.length,p=t.length;function m(e,t){e+1===v&&t+1===p||g.push(new yC(new Bw(e+1,v),new Bw(t+1,p))),v=e,p=t}for(var y=e.length-1,_=t.length-1;y>=0&&_>=0;)3===o.get(y,_)?(m(y,_),y--,_--):1===o.get(y,_)?y--:_--;return m(-1,-1),g.reverse(),new mC(g,!1)}}]),e}(),DC=function(){function e(){u(this,e)}return h(e,[{key:"compute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bC.instance;if(0===e.length||0===t.length)return mC.trivial(e,t);var i=e,r=t;function o(e,t){for(;e<i.length&&t<r.length&&i.getElement(e)===r.getElement(t);)e++,t++;return e}var a=0,s=new IC;s.set(0,o(0,0));var l=new EC;l.set(0,0===s.get(0)?null:new NC(null,0,0,s.get(0)));var u=0;e:for(;;){if(a++,!n.isValid())return mC.trivialTimedOut(i,r);var c=-Math.min(a,r.length+a%2),d=Math.min(a,i.length+a%2);for(u=c;u<=d;u+=2){var h=u===d?-1:s.get(u+1),f=u===c?-1:s.get(u-1)+1,g=Math.min(Math.max(h,f),i.length),v=g-u;if(!(g>i.length||v>r.length)){var p=o(g,v);s.set(u,p);var m=g===h?l.get(u+1):l.get(u-1);if(l.set(u,p!==g?new NC(m,g,v,p-g):m),s.get(u)===i.length&&s.get(u)-u===r.length)break e}}}for(var y=l.get(u),_=[],b=i.length,k=r.length;;){var w=y?y.x+y.length:0,C=y?y.y+y.length:0;if(w===b&&C===k||_.push(new yC(new Bw(w,b),new Bw(C,k))),!y)break;b=y.x,k=y.y,y=y.prev}return _.reverse(),new mC(_,!1)}}]),e}(),NC=function e(t,n,i,r){u(this,e),this.prev=t,this.x=n,this.y=i,this.length=r},IC=function(){function e(){u(this,e),this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}return h(e,[{key:"get",value:function(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}},{key:"set",value:function(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){var n=this.negativeArr;this.negativeArr=new Int32Array(2*n.length),this.negativeArr.set(n)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){var i=this.positiveArr;this.positiveArr=new Int32Array(2*i.length),this.positiveArr.set(i)}this.positiveArr[e]=t}}}]),e}(),EC=function(){function e(){u(this,e),this.positiveArr=[],this.negativeArr=[]}return h(e,[{key:"get",value:function(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}},{key:"set",value:function(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}]),e}(),MC=function(){function e(t,n,i){u(this,e),this.lines=t,this.range=n,this.considerWhitespaceChanges=i,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(var r=this.range.startLineNumber;r<=this.range.endLineNumber;r++){var o=t[r-1],a=0;r===this.range.startLineNumber&&this.range.startColumn>1&&(a=this.range.startColumn-1,o=o.substring(a)),this.lineStartOffsets.push(a);var s=0;if(!i){var l=o.trimStart();s=o.length-l.length,o=l.trimEnd()}this.trimmedWsLengthsByLineIdx.push(s);for(var c=r===this.range.endLineNumber?Math.min(this.range.endColumn-1-a-s,o.length):o.length,d=0;d<c;d++)this.elements.push(o.charCodeAt(d));r<this.range.endLineNumber&&(this.elements.push("\n".charCodeAt(0)),this.firstElementOffsetByLineIdx.push(this.elements.length))}}return h(e,[{key:"toString",value:function(){return'Slice: "'.concat(this.text,'"')}},{key:"text",get:function(){return this.getText(new Bw(0,this.length))}},{key:"getText",value:function(e){return this.elements.slice(e.start,e.endExclusive).map((function(e){return String.fromCharCode(e)})).join("")}},{key:"getElement",value:function(e){return this.elements[e]}},{key:"length",get:function(){return this.elements.length}},{key:"getBoundaryScore",value:function(e){var t=PC(e>0?this.elements[e-1]:-1),n=PC(e<this.elements.length?this.elements[e]:-1);if(7===t&&8===n)return 0;if(8===t)return 150;var i=0;return t!==n&&(i+=10,0===t&&1===n&&(i+=1)),i+=AC(t),i+=AC(n)}},{key:"translateOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right",n=Uw(this.firstElementOffsetByLineIdx,(function(t){return t<=e})),i=e-this.firstElementOffsetByLineIdx[n];return new dd(this.range.startLineNumber+n,1+this.lineStartOffsets[n]+i+(0===i&&"left"===t?0:this.trimmedWsLengthsByLineIdx[n]))}},{key:"translateRange",value:function(e){var t=this.translateOffset(e.start,"right"),n=this.translateOffset(e.endExclusive,"left");return n.isBefore(t)?hd.fromPositions(n,n):hd.fromPositions(t,n)}},{key:"findWordContaining",value:function(e){if(!(e<0||e>=this.elements.length)&&TC(this.elements[e])){for(var t=e;t>0&&TC(this.elements[t-1]);)t--;for(var n=e;n<this.elements.length&&TC(this.elements[n]);)n++;return new Bw(t,n)}}},{key:"countLinesIn",value:function(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}},{key:"isStronglyEqual",value:function(e,t){return this.elements[e]===this.elements[t]}},{key:"extendToFullLines",value:function(e){var t,n,i=null!==(t=zw(this.firstElementOffsetByLineIdx,(function(t){return t<=e.start})))&&void 0!==t?t:0,r=null!==(n=function(e,t){var n=jw(e,t);return n===e.length?void 0:e[n]}(this.firstElementOffsetByLineIdx,(function(t){return e.endExclusive<=t})))&&void 0!==n?n:this.elements.length;return new Bw(i,r)}}]),e}();function TC(e){return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57}var RC=(f(xC={},0,0),f(xC,1,0),f(xC,2,0),f(xC,3,10),f(xC,4,2),f(xC,5,30),f(xC,6,3),f(xC,7,10),f(xC,8,10),xC);function AC(e){return RC[e]}function PC(e){return 10===e?8:13===e?7:CC(e)?6:e>=97&&e<=122?0:e>=65&&e<=90?1:e>=48&&e<=57?2:-1===e?3:44===e||59===e?5:4}function OC(e,t,n,i,r,o){var a=function(e,t,n,i){var r=[],o=e.filter((function(e){return e.modified.isEmpty&&e.original.length>=3})).map((function(e){return new SC(e.original,t,e)})),a=new Set(e.filter((function(e){return e.original.isEmpty&&e.modified.length>=3})).map((function(e){return new SC(e.modified,n,e)}))),s=new Set,l=!0,u=!1,c=void 0;try{for(var d,h=o[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value,g=-1,v=void 0,p=!0,m=!1,y=void 0;try{for(var _,b=a[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){var k=_.value,w=f.computeSimilarity(k);w>g&&(g=w,v=k)}}catch(e){m=!0,y=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw y}}if(g>.9&&v&&(a.delete(v),r.push(new nC(f.range,v.range)),s.add(f.source),s.add(v.source)),!i.isValid())return{moves:r,excludedChanges:s}}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return{moves:r,excludedChanges:s}}(e,t,n,o),s=a.moves,l=a.excludedChanges;if(!o.isValid())return[];var u=function(e,t,n,i,r,o){var a=function(t){var n=s[t],a=q.findLastMonotonous((function(e){return e.original.startLineNumber<=n.original.startLineNumber})),l=zw(e,(function(e){return e.modified.startLineNumber<=n.modified.startLineNumber})),u=Math.max(n.original.startLineNumber-a.original.startLineNumber,n.modified.startLineNumber-l.modified.startLineNumber),c=q.findLastMonotonous((function(e){return e.original.startLineNumber<n.original.endLineNumberExclusive})),d=zw(e,(function(e){return e.modified.startLineNumber<n.modified.endLineNumberExclusive})),h=Math.max(c.original.endLineNumberExclusive-n.original.endLineNumberExclusive,d.modified.endLineNumberExclusive-n.modified.endLineNumberExclusive),f=void 0;for(f=0;f<u;f++){var g=n.original.startLineNumber-f-1,v=n.modified.startLineNumber-f-1;if(g>i.length||v>r.length)break;if(x.contains(v)||D.contains(g))break;if(!FC(i[g-1],r[v-1],o))break}f>0&&(D.addRange(new Gw(n.original.startLineNumber-f,n.original.startLineNumber)),x.addRange(new Gw(n.modified.startLineNumber-f,n.modified.startLineNumber)));var p=void 0;for(p=0;p<h;p++){var m=n.original.endLineNumberExclusive+p,y=n.modified.endLineNumberExclusive+p;if(m>i.length||y>r.length)break;if(x.contains(y)||D.contains(m))break;if(!FC(i[m-1],r[y-1],o))break}p>0&&(D.addRange(new Gw(n.original.endLineNumberExclusive,n.original.endLineNumberExclusive+p)),x.addRange(new Gw(n.modified.endLineNumberExclusive,n.modified.endLineNumberExclusive+p))),(f>0||p>0)&&(s[t]=new nC(new Gw(n.original.startLineNumber-f,n.original.endLineNumberExclusive+p),new Gw(n.modified.startLineNumber-f,n.modified.endLineNumberExclusive+p)))},s=[],l=new yw,u=!0,c=!1,d=void 0;try{for(var h,f=e[Symbol.iterator]();!(u=(h=f.next()).done);u=!0)for(var g=h.value,v=g.original.startLineNumber;v<g.original.endLineNumberExclusive-2;v++){var p="".concat(t[v-1],":").concat(t[v+1-1],":").concat(t[v+2-1]);l.add(p,{range:new Gw(v,v+3)})}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}var m=[];e.sort(ba((function(e){return e.modified.startLineNumber}),ka));var y=!0,_=!1,b=void 0;try{for(var k,w=function(){for(var e=function(e){var t="".concat(n[e-1],":").concat(n[e+1-1],":").concat(n[e+2-1]),r=new Gw(e,e+3),o=[];l.forEach(t,(function(e){var t=e.range,n=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value;if(c.originalLineRange.endLineNumberExclusive+1===t.endLineNumberExclusive&&c.modifiedLineRange.endLineNumberExclusive+1===r.endLineNumberExclusive)return c.originalLineRange=new Gw(c.originalLineRange.startLineNumber,t.endLineNumberExclusive),c.modifiedLineRange=new Gw(c.modifiedLineRange.startLineNumber,r.endLineNumberExclusive),void o.push(c)}}catch(e){a=!0,s=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw s}}var d={modifiedLineRange:r,originalLineRange:t};m.push(d),o.push(d)})),i=o},t=k.value,i=[],r=t.modified.startLineNumber;r<t.modified.endLineNumberExclusive-2;r++)e(r);if(!o.isValid())return{v:[]}},C=e[Symbol.iterator]();!(y=(k=C.next()).done);y=!0){var S=w();if("object"===L(S))return S.v}}catch(e){_=!0,b=e}finally{try{y||null==C.return||C.return()}finally{if(_)throw b}}m.sort(Ca(ba((function(e){return e.modifiedLineRange.length}),ka)));var x=new Zw,D=new Zw,N=!0,I=!1,E=void 0;try{for(var M,T=m[Symbol.iterator]();!(N=(M=T.next()).done);N=!0){var R=M.value,A=R.modifiedLineRange.startLineNumber-R.originalLineRange.startLineNumber,P=x.subtractFrom(R.modifiedLineRange),O=D.subtractFrom(R.originalLineRange).getWithDelta(A),F=P.getIntersection(O),W=!0,B=!1,H=void 0;try{for(var V,z=F.ranges[Symbol.iterator]();!(W=(V=z.next()).done);W=!0){var U=V.value;if(!(U.length<3)){var j=U,K=U.delta(-A);s.push(new nC(K,j)),x.addRange(j),D.addRange(K)}}}catch(e){B=!0,H=e}finally{try{W||null==z.return||z.return()}finally{if(B)throw H}}}}catch(e){I=!0,E=e}finally{try{N||null==T.return||T.return()}finally{if(I)throw E}}s.sort(ba((function(e){return e.original.startLineNumber}),ka));for(var q=new Kw(e),G=0;G<s.length;G++)a(G);return s}(e.filter((function(e){return!l.has(e)})),i,r,t,n,o);return pa(s,u),s=function(e){if(0===e.length)return e;e.sort(ba((function(e){return e.original.startLineNumber}),ka));for(var t=[e[0]],n=1;n<e.length;n++){var i=t[t.length-1],r=e[n],o=r.original.startLineNumber-i.original.endLineNumberExclusive,a=r.modified.startLineNumber-i.modified.endLineNumberExclusive;o>=0&&a>=0&&o+a<=2?t[t.length-1]=i.join(r):t.push(r)}return t}(s),s=s.filter((function(e){var n=e.original.toOffsetRange().slice(t).map((function(e){return e.trim()}));return n.join("\n").length>=15&&function(e,t){var n=0,i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){t(a.value)&&n++}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(n,(function(e){return e.length>=2}))>=2})),s=function(e,t){var n=new Kw(e);return t=t.filter((function(t){var i=n.findLastMonotonous((function(e){return e.original.startLineNumber<t.original.endLineNumberExclusive}))||new nC(new Gw(1,1),new Gw(1,1)),r=zw(e,(function(e){return e.modified.startLineNumber<t.modified.endLineNumberExclusive}));return i!==r})),t}(e,s),s}function FC(e,t,n){if(e.trim()===t.trim())return!0;if(e.length>300&&t.length>300)return!1;var i=(new DC).compute(new MC([e],new hd(1,1,1,e.length),!1),new MC([t],new hd(1,1,1,t.length),!1),n),r=0,o=yC.invert(i.diffs,e.length),a=!0,s=!1,l=void 0;try{for(var u,c=o[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){u.value.seq1Range.forEach((function(t){CC(e.charCodeAt(t))||r++}))}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}var d=function(t){for(var n=0,i=0;i<e.length;i++)CC(t.charCodeAt(i))||n++;return n}(e.length>t.length?e:t);return r/d>.6&&d>10}function WC(e,t,n){var i=n;return i=BC(e,t,i),i=function(e,t,n){if(!e.getBoundaryScore||!t.getBoundaryScore)return n;for(var i=0;i<n.length;i++){var r=i>0?n[i-1]:void 0,o=n[i],a=i+1<n.length?n[i+1]:void 0,s=new Bw(r?r.seq1Range.endExclusive+1:0,a?a.seq1Range.start-1:e.length),l=new Bw(r?r.seq2Range.endExclusive+1:0,a?a.seq2Range.start-1:t.length);o.seq1Range.isEmpty?n[i]=HC(o,e,t,s,l):o.seq2Range.isEmpty&&(n[i]=HC(o.swap(),t,e,l,s).swap())}return n}(e,t,i=BC(e,t,i)),i}function BC(e,t,n){if(0===n.length)return n;var i=[];i.push(n[0]);for(var r=1;r<n.length;r++){var o=i[i.length-1],a=n[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){var s=a.seq1Range.start-o.seq1Range.endExclusive,l=void 0;for(l=1;l<=s&&(e.getElement(a.seq1Range.start-l)===e.getElement(a.seq1Range.endExclusive-l)&&t.getElement(a.seq2Range.start-l)===t.getElement(a.seq2Range.endExclusive-l));l++);if(--l===s){i[i.length-1]=new yC(new Bw(o.seq1Range.start,a.seq1Range.endExclusive-s),new Bw(o.seq2Range.start,a.seq2Range.endExclusive-s));continue}a=a.delta(-l)}i.push(a)}for(var u=[],c=0;c<i.length-1;c++){var d=i[c+1],h=i[c];if(h.seq1Range.isEmpty||h.seq2Range.isEmpty){var f=d.seq1Range.start-h.seq1Range.endExclusive,g=void 0;for(g=0;g<f&&(e.isStronglyEqual(h.seq1Range.start+g,h.seq1Range.endExclusive+g)&&t.isStronglyEqual(h.seq2Range.start+g,h.seq2Range.endExclusive+g));g++);if(g===f){i[c+1]=new yC(new Bw(h.seq1Range.start+f,d.seq1Range.endExclusive),new Bw(h.seq2Range.start+f,d.seq2Range.endExclusive));continue}g>0&&(h=h.delta(g))}u.push(h)}return i.length>0&&u.push(i[i.length-1]),u}function HC(e,t,n,i,r){for(var o=1;e.seq1Range.start-o>=i.start&&e.seq2Range.start-o>=r.start&&n.isStronglyEqual(e.seq2Range.start-o,e.seq2Range.endExclusive-o)&&o<100;)o++;o--;for(var a=0;e.seq1Range.start+a<i.endExclusive&&e.seq2Range.endExclusive+a<r.endExclusive&&n.isStronglyEqual(e.seq2Range.start+a,e.seq2Range.endExclusive+a)&&a<100;)a++;if(0===o&&0===a)return e;for(var s=0,l=-1,u=-o;u<=a;u++){var c=e.seq2Range.start+u,d=e.seq2Range.endExclusive+u,h=e.seq1Range.start+u,f=t.getBoundaryScore(h)+n.getBoundaryScore(c)+n.getBoundaryScore(d);f>l&&(l=f,s=u)}return e.delta(s)}var VC=function(){function e(t,n){u(this,e),this.trimmedHash=t,this.lines=n}return h(e,[{key:"getElement",value:function(e){return this.trimmedHash[e]}},{key:"length",get:function(){return this.trimmedHash.length}},{key:"getBoundaryScore",value:function(e){return 1e3-((0===e?0:zC(this.lines[e-1]))+(e===this.lines.length?0:zC(this.lines[e])))}},{key:"getText",value:function(e){return this.lines.slice(e.start,e.endExclusive).join("\n")}},{key:"isStronglyEqual",value:function(e,t){return this.lines[e]===this.lines[t]}}]),e}();function zC(e){for(var t=0;t<e.length&&(32===e.charCodeAt(t)||9===e.charCodeAt(t));)t++;return t}var UC=function(){function e(){u(this,e),this.dynamicProgrammingDiffing=new LC,this.myersDiffingAlgorithm=new DC}return h(e,[{key:"computeDiff",value:function(e,t,n){var i=this;if(e.length<=1&&ea(e,t,(function(e,t){return e===t})))return new Fw([],[],!1);if(1===e.length&&0===e[0].length||1===t.length&&0===t[0].length)return new Fw([new oC(new Gw(1,e.length+1),new Gw(1,t.length+1),[new aC(new hd(1,1,e.length,e[e.length-1].length+1),new hd(1,1,t.length,t[t.length-1].length+1))])],[],!1);var r=0===n.maxComputationTimeMs?bC.instance:new kC(n.maxComputationTimeMs),o=!n.ignoreTrimWhitespace,a=new Map;function s(e){var t=a.get(e);return void 0===t&&(t=a.size,a.set(e,t)),t}var l=e.map((function(e){return s(e.trim())})),u=t.map((function(e){return s(e.trim())})),c=new VC(l,e),d=new VC(u,t),h=c.length+d.length<1700?i.dynamicProgrammingDiffing.compute(c,d,r,(function(n,i){return e[n]===t[i]?0===t[i].length?.1:1+Math.log(1+t[i].length):.99})):i.myersDiffingAlgorithm.compute(c,d,r),f=h.diffs,g=h.hitTimeout;f=WC(c,d,f),f=function(e,t,n){var i=n;if(0===i.length)return i;var r,o=0;do{r=!1;for(var a=[i[0]],s=1;s<i.length;s++){var l=i[s],u=a[a.length-1],c=function(t,n){var i=new Bw(u.seq1Range.endExclusive,l.seq1Range.start);return e.getText(i).replace(/\s/g,"").length<=4&&(t.seq1Range.length+t.seq2Range.length>5||n.seq1Range.length+n.seq2Range.length>5)}(u,l);c?(r=!0,a[a.length-1]=a[a.length-1].join(l)):a.push(l)}i=a}while(o++<10&&r);return i}(c,0,f);var v=[],p=function(n){if(o)for(var a=0;a<n;a++){var s=m+a,l=y+a;if(e[s]!==t[l]){var u=i.refineDiff(e,t,new yC(new Bw(s,s+1),new Bw(l,l+1)),r,o),c=!0,d=!1,h=void 0;try{for(var f,p=u.mappings[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var _=f.value;v.push(_)}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}u.hitTimeout&&(g=!0)}}},m=0,y=0,_=!0,b=!1,k=void 0;try{for(var w,C,S=function(){var n=C.value;e_((function(){return n.seq1Range.start-m==n.seq2Range.start-y}));var i=n.seq1Range.start-m;p(i),m=n.seq1Range.endExclusive,y=n.seq2Range.endExclusive;var a=w.refineDiff(e,t,n,r,o);a.hitTimeout&&(g=!0);var s=!0,l=!1,u=void 0;try{for(var c,d=a.mappings[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;v.push(h)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}},x=f[Symbol.iterator]();!(_=(C=x.next()).done);_=!0)w=this,S()}catch(e){b=!0,k=e}finally{try{_||null==x.return||x.return()}finally{if(b)throw k}}p(e.length-m);var L=jC(v,e,t),D=[];return n.computeMoves&&(D=this.computeMoves(L,e,t,l,u,r,o)),e_((function(){var n=function(e,t){if(e.lineNumber<1||e.lineNumber>t.length)return!1;var n=t[e.lineNumber-1];return!(e.column<1||e.column>n.length+1)},i=function(e,t){return!(e.startLineNumber<1||e.startLineNumber>t.length+1)&&!(e.endLineNumberExclusive<1||e.endLineNumberExclusive>t.length+1)},r=!0,o=!1,a=void 0;try{for(var s,l=L[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;if(!u.innerChanges)return!1;var c=!0,d=!1,h=void 0;try{for(var f,g=u.innerChanges[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;if(!(n(v.modifiedRange.getStartPosition(),t)&&n(v.modifiedRange.getEndPosition(),t)&&n(v.originalRange.getStartPosition(),e)&&n(v.originalRange.getEndPosition(),e)))return!1}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}if(!i(u.modified,t)||!i(u.original,e))return!1}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return!0})),new Fw(L,D,g)}},{key:"computeMoves",value:function(e,t,n,i,r,o,a){var s=this,l=OC(e,t,n,i,r,o).map((function(e){var i=jC(s.refineDiff(t,n,new yC(e.original.toOffsetRange(),e.modified.toOffsetRange()),o,a).mappings,t,n,!0);return new Ww(e,i)}));return l}},{key:"refineDiff",value:function(e,t,n,i,r){var o=function(e){return new nC(new Gw(e.seq1Range.start+1,e.seq1Range.endExclusive+1),new Gw(e.seq2Range.start+1,e.seq2Range.endExclusive+1))}(n),a=o.toRangeMapping2(e,t),s=new MC(e,a.originalRange,r),l=new MC(t,a.modifiedRange,r),u=s.length+l.length<500?this.dynamicProgrammingDiffing.compute(s,l,i):this.myersDiffingAlgorithm.compute(s,l,i),c=u.diffs;c=WC(s,l,c),c=function(e,t,n){var i=yC.invert(n,e.length),r=[],o=new _C(0,0);function a(n,a){if(!(n.offset1<o.offset1||n.offset2<o.offset2)){var s=e.findWordContaining(n.offset1),l=t.findWordContaining(n.offset2);if(s&&l){for(var u=new yC(s,l),c=u.intersect(a),d=c.seq1Range.length,h=c.seq2Range.length;i.length>0;){var f=i[0];if(!f.seq1Range.intersects(u.seq1Range)&&!f.seq2Range.intersects(u.seq2Range))break;var g=e.findWordContaining(f.seq1Range.start),v=t.findWordContaining(f.seq2Range.start),p=new yC(g,v),m=p.intersect(f);if(d+=m.seq1Range.length,h+=m.seq2Range.length,!((u=u.join(p)).seq1Range.endExclusive>=f.seq1Range.endExclusive))break;i.shift()}d+h<2*(u.seq1Range.length+u.seq2Range.length)/3&&r.push(u),o=u.getEndExclusives()}}}for(;i.length>0;){var s=i.shift();s.seq1Range.isEmpty||(a(s.getStarts(),s),a(s.getEndExclusives().delta(-1),s))}var l=function(e,t){for(var n=[];e.length>0||t.length>0;){var i=e[0],r=t[0],o=void 0;o=i&&(!r||i.seq1Range.start<r.seq1Range.start)?e.shift():t.shift(),n.length>0&&n[n.length-1].seq1Range.endExclusive>=o.seq1Range.start?n[n.length-1]=n[n.length-1].join(o):n.push(o)}return n}(n,r);return l}(s,l,c),c=function(e,t,n){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=i[i.length-1];c&&(u.seq1Range.start-c.seq1Range.endExclusive<=2||u.seq2Range.start-c.seq2Range.endExclusive<=2)?i[i.length-1]=new yC(c.seq1Range.join(u.seq1Range),c.seq2Range.join(u.seq2Range)):i.push(u)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return i}(s,0,c),c=function(e,t,n){var i=n;if(0===i.length)return i;var r,o=0;do{r=!1;for(var a=[i[0]],s=1;s<i.length;s++){var l=i[s],u=a[a.length-1],c=function(n,i){var r=new Bw(u.seq1Range.endExclusive,l.seq1Range.start);if(e.countLinesIn(r)>5||r.length>500)return!1;var o=e.getText(r).trim();if(o.length>20||o.split(/\r\n|\r|\n/).length>1)return!1;var a=e.countLinesIn(n.seq1Range),s=n.seq1Range.length,c=t.countLinesIn(n.seq2Range),d=n.seq2Range.length,h=e.countLinesIn(i.seq1Range),f=i.seq1Range.length,g=t.countLinesIn(i.seq2Range),v=i.seq2Range.length;function p(e){return Math.min(e,130)}return Math.pow(Math.pow(p(40*a+s),1.5)+Math.pow(p(40*c+d),1.5),1.5)+Math.pow(Math.pow(p(40*h+f),1.5)+Math.pow(p(40*g+v),1.5),1.5)>1.3*Math.pow(Math.pow(130,1.5),1.5)}(u,l);c?(r=!0,a[a.length-1]=a[a.length-1].join(l)):a.push(l)}i=a}while(o++<10&&r);var d=[];return function(e,t){for(var n=0;n<e.length;n++)t(0===n?void 0:e[n-1],e[n],n+1===e.length?void 0:e[n+1])}(i,(function(t,n,i){var r=function(e){return e.length>0&&e.trim().length<=3&&n.seq1Range.length+n.seq2Range.length>100},o=n,a=e.extendToFullLines(n.seq1Range),s=e.getText(new Bw(a.start,n.seq1Range.start));r(s)&&(o=o.deltaStart(-s.length));var l=e.getText(new Bw(n.seq1Range.endExclusive,a.endExclusive));r(l)&&(o=o.deltaEnd(l.length));var u=yC.fromOffsetPairs(t?t.getEndExclusives():_C.zero,i?i.getStarts():_C.max),c=o.intersect(u);d.length>0&&c.getStarts().equals(d[d.length-1].getEndExclusives())?d[d.length-1]=d[d.length-1].join(c):d.push(c)})),d}(s,l,c);var d=c.map((function(e){return new aC(s.translateRange(e.seq1Range),l.translateRange(e.seq2Range))}));return{mappings:d,hitTimeout:u.hitTimeout}}}]),e}();function jC(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=[],o=!0,a=!1,s=void 0;try{for(var l,u=ra(e.map((function(e){return function(e,t,n){var i=0,r=0;1===e.modifiedRange.endColumn&&1===e.originalRange.endColumn&&e.originalRange.startLineNumber+i<=e.originalRange.endLineNumber&&e.modifiedRange.startLineNumber+i<=e.modifiedRange.endLineNumber&&(r=-1);e.modifiedRange.startColumn-1>=n[e.modifiedRange.startLineNumber-1].length&&e.originalRange.startColumn-1>=t[e.originalRange.startLineNumber-1].length&&e.originalRange.startLineNumber<=e.originalRange.endLineNumber+r&&e.modifiedRange.startLineNumber<=e.modifiedRange.endLineNumber+r&&(i=1);var o=new Gw(e.originalRange.startLineNumber+i,e.originalRange.endLineNumber+1+r),a=new Gw(e.modifiedRange.startLineNumber+i,e.modifiedRange.endLineNumber+1+r);return new oC(o,a,[e])}(e,t,n)})),(function(e,t){return e.original.overlapOrTouch(t.original)||e.modified.overlapOrTouch(t.modified)}))[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=c[0],h=c[c.length-1];r.push(new oC(d.original.join(h.original),d.modified.join(h.modified),c.map((function(e){return e.innerChanges[0]}))))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return e_((function(){if(!i&&r.length>0){if(r[0].modified.startLineNumber!==r[0].original.startLineNumber)return!1;if(n.length-r[r.length-1].modified.endLineNumberExclusive!=t.length-r[r.length-1].original.endLineNumberExclusive)return!1}return t_(r,(function(e,t){return t.original.startLineNumber-e.original.endLineNumberExclusive==t.modified.startLineNumber-e.modified.endLineNumberExclusive&&e.original.endLineNumberExclusive<t.original.startLineNumber&&e.modified.endLineNumberExclusive<t.modified.startLineNumber}))})),r}var KC=function(){return new sC},qC=function(){return new UC};function GC(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}var ZC=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;u(this,e),this._rgbaBrand=void 0,this.r=0|Math.min(255,Math.max(0,t)),this.g=0|Math.min(255,Math.max(0,n)),this.b=0|Math.min(255,Math.max(0,i)),this.a=GC(Math.max(Math.min(1,r),0),3)}return h(e,null,[{key:"equals",value:function(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}]),e}(),YC=function(){function e(t,n,i,r){u(this,e),this._hslaBrand=void 0,this.h=0|Math.max(Math.min(360,t),0),this.s=GC(Math.max(Math.min(1,n),0),3),this.l=GC(Math.max(Math.min(1,i),0),3),this.a=GC(Math.max(Math.min(1,r),0),3)}return h(e,null,[{key:"equals",value:function(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}},{key:"fromRGBA",value:function(t){var n=t.r/255,i=t.g/255,r=t.b/255,o=t.a,a=Math.max(n,i,r),s=Math.min(n,i,r),l=0,u=0,c=(s+a)/2,d=a-s;if(d>0){switch(u=Math.min(c<=.5?d/(2*c):d/(2-2*c),1),a){case n:l=(i-r)/d+(i<r?6:0);break;case i:l=(r-n)/d+2;break;case r:l=(n-i)/d+4}l*=60,l=Math.round(l)}return new e(l,u,c,o)}},{key:"_hue2rgb",value:function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}},{key:"toRGBA",value:function(t){var n,i,r,o=t.h/360,a=t.s,s=t.l,l=t.a;if(0===a)n=i=r=s;else{var u=s<.5?s*(1+a):s+a-s*a,c=2*s-u;n=e._hue2rgb(c,u,o+1/3),i=e._hue2rgb(c,u,o),r=e._hue2rgb(c,u,o-1/3)}return new ZC(Math.round(255*n),Math.round(255*i),Math.round(255*r),l)}}]),e}(),QC=function(){function e(t,n,i,r){u(this,e),this._hsvaBrand=void 0,this.h=0|Math.max(Math.min(360,t),0),this.s=GC(Math.max(Math.min(1,n),0),3),this.v=GC(Math.max(Math.min(1,i),0),3),this.a=GC(Math.max(Math.min(1,r),0),3)}return h(e,null,[{key:"equals",value:function(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}},{key:"fromRGBA",value:function(t){var n,i=t.r/255,r=t.g/255,o=t.b/255,a=Math.max(i,r,o),s=a-Math.min(i,r,o),l=0===a?0:s/a;return n=0===s?0:a===i?((r-o)/s%6+6)%6:a===r?(o-i)/s+2:(i-r)/s+4,new e(Math.round(60*n),l,a,t.a)}},{key:"toRGBA",value:function(e){var t=e.h,n=e.s,i=e.v,r=e.a,o=i*n,a=o*(1-Math.abs(t/60%2-1)),s=i-o,l=0,u=0,c=0;return t<60?(l=o,u=a):t<120?(l=a,u=o):t<180?(u=o,c=a):t<240?(u=a,c=o):t<300?(l=a,c=o):t<=360&&(l=o,c=a),l=Math.round(255*(l+s)),u=Math.round(255*(u+s)),c=Math.round(255*(c+s)),new ZC(l,u,c,r)}}]),e}(),XC=function(){function e(t){if(u(this,e),!t)throw new Error("Color needs a value");if(t instanceof ZC)this.rgba=t;else if(t instanceof YC)this._hsla=t,this.rgba=YC.toRGBA(t);else{if(!(t instanceof QC))throw new Error("Invalid color ctor argument");this._hsva=t,this.rgba=QC.toRGBA(t)}}return h(e,[{key:"hsla",get:function(){return this._hsla?this._hsla:YC.fromRGBA(this.rgba)}},{key:"hsva",get:function(){return this._hsva?this._hsva:QC.fromRGBA(this.rgba)}},{key:"equals",value:function(e){return!!e&&ZC.equals(this.rgba,e.rgba)&&YC.equals(this.hsla,e.hsla)&&QC.equals(this.hsva,e.hsva)}},{key:"getRelativeLuminance",value:function(){var t=e._relativeLuminanceForComponent(this.rgba.r);return GC(.2126*t+.7152*e._relativeLuminanceForComponent(this.rgba.g)+.0722*e._relativeLuminanceForComponent(this.rgba.b),4)}},{key:"isLighter",value:function(){var e=(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3;return e>=128}},{key:"isLighterThan",value:function(e){return this.getRelativeLuminance()>e.getRelativeLuminance()}},{key:"isDarkerThan",value:function(e){return this.getRelativeLuminance()<e.getRelativeLuminance()}},{key:"lighten",value:function(t){return new e(new YC(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*t,this.hsla.a))}},{key:"darken",value:function(t){return new e(new YC(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*t,this.hsla.a))}},{key:"transparent",value:function(t){var n=this.rgba,i=n.r,r=n.g,o=n.b,a=n.a;return new e(new ZC(i,r,o,a*t))}},{key:"isTransparent",value:function(){return 0===this.rgba.a}},{key:"isOpaque",value:function(){return 1===this.rgba.a}},{key:"opposite",value:function(){return new e(new ZC(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}},{key:"makeOpaque",value:function(t){if(this.isOpaque()||1!==t.rgba.a)return this;var n=this.rgba,i=n.r,r=n.g,o=n.b,a=n.a;return new e(new ZC(t.rgba.r-a*(t.rgba.r-i),t.rgba.g-a*(t.rgba.g-r),t.rgba.b-a*(t.rgba.b-o),1))}},{key:"toString",value:function(){return this._toString||(this._toString=e.Format.CSS.format(this)),this._toString}}],[{key:"fromHex",value:function(t){return e.Format.CSS.parseHex(t)||e.red}},{key:"equals",value:function(e,t){return!e&&!t||!(!e||!t)&&e.equals(t)}},{key:"_relativeLuminanceForComponent",value:function(e){var t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}},{key:"getLighterColor",value:function(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;var i=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(r-i)/r,e.lighten(n)}},{key:"getDarkerColor",value:function(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;var i=e.getRelativeLuminance();return n=n*(i-t.getRelativeLuminance())/i,e.darken(n)}}]),e}();function $C(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=Number(s);(l||0===l&&""!==s.replace(/\s/g,""))&&t.push(l)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}function JC(e,t,n,i){return{red:e/255,blue:n/255,green:t/255,alpha:i}}function eS(e,t){var n=t.index,i=t[0].length;if(n){var r=e.positionAt(n);return{startLineNumber:r.lineNumber,startColumn:r.column,endLineNumber:r.lineNumber,endColumn:r.column+i}}}function tS(e,t){if(e){var n=XC.Format.CSS.parseHex(t);if(n)return{range:e,color:JC(n.rgba.r,n.rgba.g,n.rgba.b,n.rgba.a)}}}function nS(e,t,n){if(e&&1===t.length){var i=$C(t[0].values());return{range:e,color:JC(i[0],i[1],i[2],n?i[3]:1)}}}function iS(e,t,n){if(e&&1===t.length){var i=$C(t[0].values()),r=new XC(new YC(i[0],i[1]/100,i[2]/100,n?i[3]:1));return{range:e,color:JC(r.rgba.r,r.rgba.g,r.rgba.b,r.rgba.a)}}}function rS(e,t){return"string"==typeof e?x(e.matchAll(t)):e.findMatches(t)}function oS(e){return e&&"function"==typeof e.getValue&&"function"==typeof e.positionAt?function(e){var t=[],n=rS(e,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(n.length>0){var i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=l.filter((function(e){return void 0!==e})),c=u[1],d=u[2];if(d){var h=void 0;"rgb"===c?h=nS(eS(e,l),rS(d,/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm),!1):"rgba"===c?h=nS(eS(e,l),rS(d,/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm),!0):"hsl"===c?h=iS(eS(e,l),rS(d,/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm),!1):"hsla"===c?h=iS(eS(e,l),rS(d,/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm),!0):"#"===c&&(h=tS(eS(e,l),c+d)),h&&t.push(h)}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}return t}(e):[]}XC.white=new XC(new ZC(255,255,255,1)),XC.black=new XC(new ZC(0,0,0,1)),XC.red=new XC(new ZC(255,0,0,1)),XC.blue=new XC(new ZC(0,0,255,1)),XC.green=new XC(new ZC(0,255,0,1)),XC.cyan=new XC(new ZC(0,255,255,1)),XC.lightgrey=new XC(new ZC(211,211,211,1)),XC.transparent=new XC(new ZC(0,0,0,0)),function(e){!function(t){!function(t){function n(e){var t=e.toString(16);return 2!==t.length?"0"+t:t}function i(e){switch(e){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:case 65:return 10;case 98:case 66:return 11;case 99:case 67:return 12;case 100:case 68:return 13;case 101:case 69:return 14;case 102:case 70:return 15}return 0}t.formatRGB=function(t){return 1===t.rgba.a?"rgb(".concat(t.rgba.r,", ").concat(t.rgba.g,", ").concat(t.rgba.b,")"):e.Format.CSS.formatRGBA(t)},t.formatRGBA=function(e){return"rgba(".concat(e.rgba.r,", ").concat(e.rgba.g,", ").concat(e.rgba.b,", ").concat(+e.rgba.a.toFixed(2),")")},t.formatHSL=function(t){return 1===t.hsla.a?"hsl(".concat(t.hsla.h,", ").concat((100*t.hsla.s).toFixed(2),"%, ").concat((100*t.hsla.l).toFixed(2),"%)"):e.Format.CSS.formatHSLA(t)},t.formatHSLA=function(e){return"hsla(".concat(e.hsla.h,", ").concat((100*e.hsla.s).toFixed(2),"%, ").concat((100*e.hsla.l).toFixed(2),"%, ").concat(e.hsla.a.toFixed(2),")")},t.formatHex=function(e){return"#".concat(n(e.rgba.r)).concat(n(e.rgba.g)).concat(n(e.rgba.b))},t.formatHexA=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&1===t.rgba.a?e.Format.CSS.formatHex(t):"#".concat(n(t.rgba.r)).concat(n(t.rgba.g)).concat(n(t.rgba.b)).concat(n(Math.round(255*t.rgba.a)))},t.format=function(t){return t.isOpaque()?e.Format.CSS.formatHex(t):e.Format.CSS.formatRGBA(t)},t.parseHex=function(t){var n=t.length;if(0===n)return null;if(35!==t.charCodeAt(0))return null;if(7===n){var r=16*i(t.charCodeAt(1))+i(t.charCodeAt(2)),o=16*i(t.charCodeAt(3))+i(t.charCodeAt(4)),a=16*i(t.charCodeAt(5))+i(t.charCodeAt(6));return new e(new ZC(r,o,a,1))}if(9===n){var s=16*i(t.charCodeAt(1))+i(t.charCodeAt(2)),l=16*i(t.charCodeAt(3))+i(t.charCodeAt(4)),u=16*i(t.charCodeAt(5))+i(t.charCodeAt(6)),c=16*i(t.charCodeAt(7))+i(t.charCodeAt(8));return new e(new ZC(s,l,u,c/255))}if(4===n){var d=i(t.charCodeAt(1)),h=i(t.charCodeAt(2)),f=i(t.charCodeAt(3));return new e(new ZC(16*d+d,16*h+h,16*f+f))}if(5===n){var g=i(t.charCodeAt(1)),v=i(t.charCodeAt(2)),p=i(t.charCodeAt(3)),m=i(t.charCodeAt(4));return new e(new ZC(16*g+g,16*v+v,16*p+p,(16*m+m)/255))}return null}}(t.CSS||(t.CSS={}))}(e.Format||(e.Format={}))}(XC||(XC={}));var aS=new RegExp("\\bMARK:\\s*(.*)$","d"),sS=/^-+|-+$/g;function lS(e,t){var n,i=[];if(t.findRegionSectionHeaders&&(null===(n=t.foldingRules)||void 0===n?void 0:n.markers)){var r=function(e,t){for(var n=[],i=e.getLineCount(),r=1;r<=i;r++){var o=e.getLineContent(r),a=o.match(t.foldingRules.markers.start);if(a){var s={startLineNumber:r,startColumn:a[0].length+1,endLineNumber:r,endColumn:o.length+1};if(s.endColumn>s.startColumn){var l=b(_({range:s},cS(o.substring(a[0].length))),{shouldBeInComments:!1});(l.text||l.hasSeparatorLine)&&n.push(l)}}}return n}(e,t);i=i.concat(r)}if(t.findMarkSectionHeaders){var o=function(e){for(var t=[],n=e.getLineCount(),i=1;i<=n;i++){uS(e.getLineContent(i),i,t)}return t}(e);i=i.concat(o)}return i}function uS(e,t,n){aS.lastIndex=0;var i=aS.exec(e);if(i){var r={startLineNumber:t,startColumn:i.indices[1][0]+1,endLineNumber:t,endColumn:i.indices[1][1]+1};if(r.endColumn>r.startColumn){var o=b(_({range:r},cS(i[1])),{shouldBeInComments:!0});(o.text||o.hasSeparatorLine)&&n.push(o)}}}function cS(e){var t=(e=e.trim()).startsWith("-");return{text:e=e.replace(sS,""),hasSeparatorLine:t}}var dS=function(){function e(t){u(this,e),this.values=t,this.prefixSum=new Uint32Array(t.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}return h(e,[{key:"insertValues",value:function(e,t){e=Yk(e);var n=this.values,i=this.prefixSum,r=t.length;return 0!==r&&(this.values=new Uint32Array(n.length+r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}},{key:"setValue",value:function(e,t){return e=Yk(e),t=Yk(t),this.values[e]!==t&&(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}},{key:"removeValues",value:function(e,t){e=Yk(e),t=Yk(t);var n=this.values,i=this.prefixSum;if(e>=n.length)return!1;var r=n.length-e;return t>=r&&(t=r),0!==t&&(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}},{key:"getTotalSum",value:function(){return 0===this.values.length?0:this._getPrefixSum(this.values.length-1)}},{key:"getPrefixSum",value:function(e){return e<0?0:(e=Yk(e),this._getPrefixSum(e))}},{key:"_getPrefixSum",value:function(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];var t=this.prefixSumValidIndex[0]+1;0===t&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(var n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}},{key:"getIndexOf",value:function(e){e=Math.floor(e),this.getTotalSum();for(var t=0,n=this.values.length-1,i=0,r=0,o=0;t<=n;)if(i=t+(n-t)/2|0,e<(o=(r=this.prefixSum[i])-this.values[i]))n=i-1;else{if(!(e>=r))break;t=i+1}return new fS(i,e-o)}}]),e}(),hS=function(){function e(t){u(this,e),this._values=t,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}return h(e,[{key:"getTotalSum",value:function(){return this._ensureValid(),this._indexBySum.length}},{key:"getPrefixSum",value:function(e){return this._ensureValid(),0===e?0:this._prefixSum[e-1]}},{key:"getIndexOf",value:function(e){this._ensureValid();var t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new fS(t,e-n)}},{key:"removeValues",value:function(e,t){this._values.splice(e,t),this._invalidate(e)}},{key:"insertValues",value:function(e,t){this._values=fa(this._values,e,t),this._invalidate(e)}},{key:"_invalidate",value:function(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}},{key:"_ensureValid",value:function(){if(!this._isValid){for(var e=this._validEndIndex+1,t=this._values.length;e<t;e++){var n=this._values[e],i=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=i+n;for(var r=0;r<n;r++)this._indexBySum[i+r]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}},{key:"setValue",value:function(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}]),e}(),fS=function e(t,n){u(this,e),this.index=t,this.remainder=n,this._prefixSumIndexOfResultBrand=void 0,this.index=t,this.remainder=n},gS=function(){function e(t,n,i,r){u(this,e),this._uri=t,this._lines=n,this._eol=i,this._versionId=r,this._lineStarts=null,this._cachedTextValue=null}return h(e,[{key:"dispose",value:function(){this._lines.length=0}},{key:"version",get:function(){return this._versionId}},{key:"getText",value:function(){return null===this._cachedTextValue&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}},{key:"onEvents",value:function(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);var t=e.changes,n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._acceptDeleteRange(s.range),this._acceptInsertText(new dd(s.range.startLineNumber,s.range.startColumn),s.text)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this._versionId=e.versionId,this._cachedTextValue=null}},{key:"_ensureLineStarts",value:function(){if(!this._lineStarts){for(var e=this._eol.length,t=this._lines.length,n=new Uint32Array(t),i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new dS(n)}}},{key:"_setLineText",value:function(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}},{key:"_acceptDeleteRange",value:function(e){if(e.startLineNumber!==e.endLineNumber)this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber);else{if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1))}}},{key:"_acceptInsertText",value:function(e,t){if(0!==t.length){var n=Xh(t);if(1!==n.length){n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);for(var i=new Uint32Array(n.length-1),r=1;r<n.length;r++)this._lines.splice(e.lineNumber+r-1,0,n[r]),i[r-1]=n[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}else this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1))}}}]),e}(),vS=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(u(this,t),(i=l(this,t))._syncedModels=Object.create(null),i._syncedModelsLastUsedTime=Object.create(null),i._proxy=e,i._modelService=n,!r){var o=new Cg;o.cancelAndSet((function(){return i._checkStopModelSync()}),Math.round(3e4)),i._register(o)}return i}return p(t,e),h(t,[{key:"dispose",value:function(){for(var e in this._syncedModels)Iu(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),g(v(t.prototype),"dispose",this).call(this)}},{key:"ensureSyncedResources",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=s.toString();this._syncedModels[l]||this._beginModelSync(s,t),this._syncedModels[l]&&(this._syncedModelsLastUsedTime[l]=(new Date).getTime())}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},{key:"_checkStopModelSync",value:function(){var e=(new Date).getTime(),t=[];for(var n in this._syncedModelsLastUsedTime){e-this._syncedModelsLastUsedTime[n]>6e4&&t.push(n)}var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;this._stopModelSync(l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}},{key:"_beginModelSync",value:function(e,t){var n=this,i=this._modelService.getModel(e);if(i&&(t||!i.isTooLargeForSyncing())){var r=e.toString();this._proxy.$acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});var o=new Tu;o.add(i.onDidChangeContent((function(e){n._proxy.$acceptModelChanged(r.toString(),e)}))),o.add(i.onWillDispose((function(){n._stopModelSync(r)}))),o.add(Mu((function(){n._proxy.$acceptRemovedModel(r)}))),this._syncedModels[r]=o}}},{key:"_stopModelSync",value:function(e){var t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],Iu(t)}}]),t}(Ru),pS=function(){function e(){u(this,e),this._models=Object.create(null)}return h(e,[{key:"getModel",value:function(e){return this._models[e]}},{key:"getModels",value:function(){var e=this,t=[];return Object.keys(this._models).forEach((function(n){return t.push(e._models[n])})),t}},{key:"$acceptNewModel",value:function(e){this._models[e.url]=new mS(ed.parse(e.url),e.lines,e.EOL,e.versionId)}},{key:"$acceptModelChanged",value:function(e,t){this._models[e]&&this._models[e].onEvents(t)}},{key:"$acceptRemovedModel",value:function(e){this._models[e]&&delete this._models[e]}}]),e}(),mS=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"uri",get:function(){return this._uri}},{key:"eol",get:function(){return this._eol}},{key:"getValue",value:function(){return this.getText()}},{key:"findMatches",value:function(e){for(var t=[],n=0;n<this._lines.length;n++){var i=this._lines[n],r=this.offsetAt(new dd(n+1,1)),o=i.matchAll(e),a=!0,s=!1,l=void 0;try{for(var u,c=o[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;(d.index||0===d.index)&&(d.index=d.index+r),t.push(d)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}}return t}},{key:"getLinesContent",value:function(){return this._lines.slice(0)}},{key:"getLineCount",value:function(){return this._lines.length}},{key:"getLineContent",value:function(e){return this._lines[e-1]}},{key:"getWordAtPosition",value:function(e,t){var n=Ks(e.column,Us(t),this._lines[e.lineNumber-1],0);return n?new hd(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}},{key:"words",value:function(e){var t=this._lines,n=this._wordenize.bind(this),i=0,r="",o=0,a=[];return f({},Symbol.iterator,(function(){var s;return E(this,(function(l){switch(l.label){case 0:return o<a.length?(s=r.substring(a[o].start,a[o].end),o+=1,[4,s]):[3,2];case 1:return l.sent(),[3,3];case 2:if(!(i<t.length))return[3,4];r=t[i],a=n(r,e),o=0,i+=1,l.label=3;case 3:return[3,0];case 4:return[2]}}))}))}},{key:"getLineWords",value:function(e,t){var n=this._lines[e-1],i=this._wordenize(n,t),r=[],o=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r.push({word:n.substring(c.start,c.end),startColumn:c.start+1,endColumn:c.end+1})}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return r}},{key:"_wordenize",value:function(e,t){var n,i=[];for(t.lastIndex=0;(n=t.exec(e))&&0!==n[0].length;)i.push({start:n.index,end:n.index+n[0].length});return i}},{key:"getValueInRange",value:function(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);var t=this._eol,n=e.startLineNumber-1,i=e.endLineNumber-1,r=[];r.push(this._lines[n].substring(e.startColumn-1));for(var o=n+1;o<i;o++)r.push(this._lines[o]);return r.push(this._lines[i].substring(0,e.endColumn-1)),r.join(t)}},{key:"offsetAt",value:function(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}},{key:"positionAt",value:function(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();var t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}},{key:"_validateRange",value:function(e){var t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}},{key:"_validatePosition",value:function(e){if(!dd.isIPosition(e))throw new Error("bad position");var t=e.lineNumber,n=e.column,i=!1;if(t<1)t=1,n=1,i=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,i=!0;else{var r=this._lines[t-1].length+1;n<1?(n=1,i=!0):n>r&&(n=r,i=!0)}return i?{lineNumber:t,column:n}:e}}]),t}(gS),yS=function(){function e(){u(this,e),this._workerTextModelSyncServer=new pS}return h(e,[{key:"dispose",value:function(){}},{key:"_getModel",value:function(e){return this._workerTextModelSyncServer.getModel(e)}},{key:"_getModels",value:function(){return this._workerTextModelSyncServer.getModels()}},{key:"$acceptNewModel",value:function(e){this._workerTextModelSyncServer.$acceptNewModel(e)}},{key:"$acceptModelChanged",value:function(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t)}},{key:"$acceptRemovedModel",value:function(e){this._workerTextModelSyncServer.$acceptRemovedModel(e)}},{key:"$computeUnicodeHighlights",value:function(e,t,n){var i=this;return s((function(){var r;return E(this,(function(o){return(r=i._getModel(e))?[2,Aw.computeUnicodeHighlights(r,t,n)]:[2,{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}]}))}))()}},{key:"$findSectionHeaders",value:function(e,t){var n=this;return s((function(){var i;return E(this,(function(r){return(i=n._getModel(e))?[2,lS(i,t)]:[2,[]]}))}))()}},{key:"$computeDiff",value:function(e,t,n,i){var r=this;return s((function(){var o,a;return E(this,(function(s){return o=r._getModel(e),a=r._getModel(t),o&&a?[2,_S.computeDiff(o,a,n,i)]:[2,null]}))}))()}},{key:"$computeMoreMinimalEdits",value:function(e,t,n){var i=this;return s((function(){var r,o,a,s,l,u,c,d,h,f,g,v,p,m,y,_,b,k,w,C,S,x,L,D,N,I;return E(this,(function(E){if(!(r=i._getModel(e)))return[2,t];for(o=[],a=void 0,t=t.slice(0).sort((function(e,t){return e.range&&t.range?hd.compareRangesUsingStarts(e.range,t.range):(e.range?0:1)-(t.range?0:1)})),s=0,l=1;l<t.length;l++)hd.getEndPosition(t[s].range).equals(hd.getStartPosition(t[l].range))?(t[s].range=hd.fromPositions(hd.getStartPosition(t[s].range),hd.getEndPosition(t[l].range)),t[s].text+=t[l].text):(s++,t[s]=t[l]);t.length=s+1,u=!0,c=!1,d=void 0;try{for(h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0)if(g=f.value,v=g.range,p=g.text,"number"==typeof(m=g.eol)&&(a=m),(!hd.isEmpty(v)||p)&&(y=r.getValueInRange(v),p=p.replace(/\r\n|\n|\r/g,r.eol),y!==p))if(Math.max(p.length,y.length)>_S._diffLimit)o.push({range:v,text:p});else{_=Uk(y,p,n),b=r.offsetAt(hd.lift(v).getStartPosition()),k=!0,w=!1,C=void 0;try{for(S=_[Symbol.iterator]();!(k=(x=S.next()).done);k=!0)L=x.value,D=r.positionAt(b+L.originalStart),N=r.positionAt(b+L.originalStart+L.originalLength),I={text:p.substr(L.modifiedStart,L.modifiedLength),range:{startLineNumber:D.lineNumber,startColumn:D.column,endLineNumber:N.lineNumber,endColumn:N.column}},r.getValueInRange(I.range)!==I.text&&o.push(I)}catch(e){w=!0,C=e}finally{try{k||null==S.return||S.return()}finally{if(w)throw C}}}}catch(e){c=!0,d=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}return"number"==typeof a&&o.push({eol:a,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),[2,o]}))}))()}},{key:"$computeLinks",value:function(e){var t=this;return s((function(){var n;return E(this,(function(i){return(n=t._getModel(e))?[2,iw(n)]:[2,null]}))}))()}},{key:"$computeDefaultDocumentColors",value:function(e){var t=this;return s((function(){var n;return E(this,(function(i){return(n=t._getModel(e))?[2,oS(n)]:[2,null]}))}))()}},{key:"$textualSuggest",value:function(e,t,n,i){var r=this;return s((function(){var o,a,s,l,u,c,d,h,f,g,v,p,m,y,_,b;return E(this,(function(k){o=new Hu,a=new RegExp(n,i),s=new Set,l=!0,u=!1,c=void 0;try{e:for(d=e[Symbol.iterator]();!(l=(h=d.next()).done);l=!0)if(f=h.value,g=r._getModel(f)){v=!0,p=!1,m=void 0;try{for(y=g.words(a)[Symbol.iterator]();!(v=(_=y.next()).done);v=!0)if((b=_.value)!==t&&isNaN(Number(b))&&(s.add(b),s.size>_S._suggestionsLimit))break e}catch(e){p=!0,m=e}finally{try{v||null==y.return||y.return()}finally{if(p)throw m}}}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}return[2,{words:Array.from(s),duration:o.elapsed()}]}))}))()}},{key:"$computeWordRanges",value:function(e,t,n,i){var r=this;return s((function(){var o,a,s,l,u,c,d,h,f,g,v,p;return E(this,(function(m){if(!(o=r._getModel(e)))return[2,Object.create(null)];for(a=new RegExp(n,i),s=Object.create(null),l=t.startLineNumber;l<t.endLineNumber;l++){u=o.getLineWords(l,a),c=!0,d=!1,h=void 0;try{for(f=u[Symbol.iterator]();!(c=(g=f.next()).done);c=!0)v=g.value,isNaN(Number(v.word))&&((p=s[v.word])||(p=[],s[v.word]=p),p.push({startLineNumber:l,startColumn:v.startColumn,endLineNumber:l,endColumn:v.endColumn}))}catch(e){d=!0,h=e}finally{try{c||null==f.return||f.return()}finally{if(d)throw h}}}return[2,s]}))}))()}},{key:"$navigateValueSet",value:function(e,t,n,i,r){var o=this;return s((function(){var a,s,l,u,c;return E(this,(function(d){return(a=o._getModel(e))?(s=new RegExp(i,r),t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1}),l=a.getValueInRange(t),(u=a.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},s))?(c=a.getValueInRange(u),[2,rw.INSTANCE.navigateValueSet(t,l,u,c,n)]):[2,null]):[2,null]}))}))()}}],[{key:"computeDiff",value:function(e,t,n,i){var r="advanced"===i?qC():KC(),o=e.getLinesContent(),a=t.getLinesContent(),s=r.computeDiff(o,a,n);function l(e){return e.map((function(e){var t;return[e.original.startLineNumber,e.original.endLineNumberExclusive,e.modified.startLineNumber,e.modified.endLineNumberExclusive,null===(t=e.innerChanges)||void 0===t?void 0:t.map((function(e){return[e.originalRange.startLineNumber,e.originalRange.startColumn,e.originalRange.endLineNumber,e.originalRange.endColumn,e.modifiedRange.startLineNumber,e.modifiedRange.startColumn,e.modifiedRange.endLineNumber,e.modifiedRange.endColumn]}))]}))}return{identical:!(s.changes.length>0)&&this._modelsAreIdentical(e,t),quitEarly:s.hitTimeout,changes:l(s.changes),moves:s.moves.map((function(e){return[e.lineRangeMapping.original.startLineNumber,e.lineRangeMapping.original.endLineNumberExclusive,e.lineRangeMapping.modified.startLineNumber,e.lineRangeMapping.modified.endLineNumberExclusive,l(e.changes)]}))}}},{key:"_modelsAreIdentical",value:function(e,t){var n=e.getLineCount();if(n!==t.getLineCount())return!1;for(var i=1;i<=n;i++){if(e.getLineContent(i)!==t.getLineContent(i))return!1}return!0}}]),e}();yS._diffLimit=1e5,yS._suggestionsLimit=1e4;var _S=function(e){function n(e,t){var i;return u(this,n),(i=l(this,n))._host=e,i._foreignModuleFactory=t,i._foreignModule=null,i}return p(n,e),h(n,[{key:"$ping",value:function(){return s((function(){return E(this,(function(e){return[2,"pong"]}))}))()}},{key:"$loadForeignModule",value:function(e,n,i){var r=this,o=function(e,t){var n=function(e){return function(){var n=Array.prototype.slice.call(arguments,0);return t(e,n)}},i={},r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i[u]=n(u)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return i}(i,(function(e,t){return r._host.$fhr(e,t)})),a={host:o,getMirrorModels:function(){return r._getModels()}};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(a,n),Promise.resolve(qa(this._foreignModule))):new Promise((function(i,o){var s=jv.asBrowserUri("".concat(e,".js")).toString(!0);q((function(){return t.import("".concat(s))}),void 0).then((function(e){r._foreignModule=e.create(a,n),i(qa(r._foreignModule))})).catch(o)}))}},{key:"$fmr",value:function(e,t){if(!this._foreignModule||"function"!=typeof this._foreignModule[e])return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(e){return Promise.reject(e)}}}]),n}(yS);"function"==typeof importScripts&&(globalThis.monaco=Oh());var bS=Zm("textResourceConfigurationService"),kS=Zm("textResourcePropertiesService"),wS=Zm("ILanguageFeaturesService"),CS=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},SS=function(e,t){return function(n,i){t(n,i,e)}},xS=3e5;function LS(e,t){var n=e.getModel(t);return!!n&&!n.isTooLargeForSyncing()}var DS=function(e){function t(e,n,i,r,o,a){var c,d;return u(this,t),c=l(this,t),d=c,c._languageConfigurationService=o,c._modelService=n,c._workerManager=c._register(new IS(e,c._modelService)),c._logService=r,c._register(a.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:function(){var e=s((function(e,t){var n;return E(this,(function(t){switch(t.label){case 0:return LS(d._modelService,e.uri)?[4,d._workerWithResources([e.uri])]:[2,Promise.resolve({links:[]})];case 1:return[4,t.sent().$computeLinks(e.uri.toString())];case 2:return[2,(n=t.sent())&&{links:n}]}}))}));return function(t,n){return e.apply(this,arguments)}}()})),c._register(a.completionProvider.register("*",new NS(c._workerManager,i,c._modelService,c._languageConfigurationService))),c}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}},{key:"canComputeUnicodeHighlights",value:function(e){return LS(this._modelService,e)}},{key:"computedUnicodeHighlights",value:function(e,t,n){var i=this;return s((function(){return E(this,(function(r){switch(r.label){case 0:return[4,i._workerWithResources([e])];case 1:return[2,r.sent().$computeUnicodeHighlights(e.toString(),t,n)]}}))}))()}},{key:"computeDiff",value:function(e,t,n,i){var r=this;return s((function(){var o,a;function s(e){return e.map((function(e){var t;return new oC(new Gw(e[0],e[1]),new Gw(e[2],e[3]),null===(t=e[4])||void 0===t?void 0:t.map((function(e){return new aC(new hd(e[0],e[1],e[2],e[3]),new hd(e[4],e[5],e[6],e[7]))})))}))}return E(this,(function(l){switch(l.label){case 0:return[4,r._workerWithResources([e,t],!0)];case 1:return[4,l.sent().$computeDiff(e.toString(),t.toString(),n,i)];case 2:return(o=l.sent())?(a={identical:o.identical,quitEarly:o.quitEarly,changes:s(o.changes),moves:o.moves.map((function(e){return new Ww(new nC(new Gw(e[0],e[1]),new Gw(e[2],e[3])),s(e[4]))}))},[2,a]):[2,null]}}))}))()}},{key:"computeMoreMinimalEdits",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this;return s((function(){var r,o;return E(this,(function(a){return ua(t)?LS(i._modelService,e)?(r=Hu.create(),o=i._workerWithResources([e]).then((function(i){return i.$computeMoreMinimalEdits(e.toString(),t,n)})),o.finally((function(){return i._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),r.elapsed())})),[2,Promise.race([o,mg(1e3).then((function(){return t}))])]):[2,Promise.resolve(t)]:[2,Promise.resolve(void 0)]}))}))()}},{key:"canNavigateValueSet",value:function(e){return LS(this._modelService,e)}},{key:"navigateValueSet",value:function(e,t,n){var i=this;return s((function(){var r,o,a,s;return E(this,(function(l){switch(l.label){case 0:return(r=i._modelService.getModel(e))?(o=i._languageConfigurationService.getLanguageConfiguration(r.getLanguageId()).getWordDefinition(),a=o.source,s=o.flags,[4,i._workerWithResources([e])]):[2,null];case 1:return[2,l.sent().$navigateValueSet(e.toString(),t,n,a,s)]}}))}))()}},{key:"canComputeWordRanges",value:function(e){return LS(this._modelService,e)}},{key:"computeWordRanges",value:function(e,t){var n=this;return s((function(){var i,r,o,a;return E(this,(function(s){switch(s.label){case 0:return(i=n._modelService.getModel(e))?(r=n._languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),o=r.source,a=r.flags,[4,n._workerWithResources([e])]):[2,Promise.resolve(null)];case 1:return[2,s.sent().$computeWordRanges(e.toString(),t,o,a)]}}))}))()}},{key:"findSectionHeaders",value:function(e,t){var n=this;return s((function(){return E(this,(function(i){switch(i.label){case 0:return[4,n._workerWithResources([e])];case 1:return[2,i.sent().$findSectionHeaders(e.toString(),t)]}}))}))()}},{key:"computeDefaultDocumentColors",value:function(e){var t=this;return s((function(){return E(this,(function(n){switch(n.label){case 0:return[4,t._workerWithResources([e])];case 1:return[2,n.sent().$computeDefaultDocumentColors(e.toString())]}}))}))()}},{key:"_workerWithResources",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return s((function(){return E(this,(function(i){switch(i.label){case 0:return[4,n._workerManager.withWorker()];case 1:return[4,i.sent().workerWithSyncedResources(e,t)];case 2:return[2,i.sent()]}}))}))()}}]),t}(Ru);DS=CS([SS(1,Qm),SS(2,bS),SS(3,k_),SS(4,Ek),SS(5,wS)],DS);var NS=function(){function e(t,n,i,r){u(this,e),this.languageConfigurationService=r,this._debugDisplayName="wordbasedCompletions",this._workerManager=t,this._configurationService=n,this._modelService=i}return h(e,[{key:"provideCompletionItems",value:function(e,t){var n=this;return s((function(){var i,r,o,a,s,l,u,c,d,h,f,g,v;return E(this,(function(p){switch(p.label){case 0:if("off"===(i=n._configurationService.getValue(e.uri,t,"editor")).wordBasedSuggestions)return[2,void 0];if(r=[],"currentDocument"===i.wordBasedSuggestions)LS(n._modelService,e.uri)&&r.push(e.uri);else{o=!0,a=!1,s=void 0;try{for(l=n._modelService.getModels()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0)c=u.value,LS(n._modelService,c.uri)&&(c===e?r.unshift(c.uri):"allDocuments"!==i.wordBasedSuggestions&&c.getLanguageId()!==e.getLanguageId()||r.push(c.uri))}catch(e){a=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}}return 0===r.length?[2,void 0]:(d=n.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),h=e.getWordAtPosition(t),f=h?new hd(t.lineNumber,h.startColumn,t.lineNumber,h.endColumn):hd.fromPositions(t),g=f.setEndPosition(t.lineNumber,t.column),[4,n._workerManager.withWorker()]);case 1:return[4,p.sent().textualSuggest(r,null==h?void 0:h.word,d)];case 2:return(v=p.sent())?[2,{duration:v.duration,suggestions:v.words.map((function(e){return{kind:18,label:e,insertText:e,range:{insert:g,replace:f}}}))}]:[2,void 0]}}))}))()}}]),e}(),IS=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._workerDescriptor=e,i._modelService=n,i._editorWorkerClient=null,i._lastWorkerUsedTime=(new Date).getTime(),i._register(new yp).cancelAndSet((function(){return i._checkStopIdleWorker()}),Math.round(xS/2),Fh),i._register(i._modelService.onModelRemoved((function(e){return i._checkStopEmptyWorker()}))),i}return p(t,e),h(t,[{key:"dispose",value:function(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),g(v(t.prototype),"dispose",this).call(this)}},{key:"_checkStopEmptyWorker",value:function(){if(this._editorWorkerClient){var e=this._modelService.getModels();0===e.length&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}}},{key:"_checkStopIdleWorker",value:function(){if(this._editorWorkerClient){var e=(new Date).getTime()-this._lastWorkerUsedTime;e>xS&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}}},{key:"withWorker",value:function(){return this._lastWorkerUsedTime=(new Date).getTime(),this._editorWorkerClient||(this._editorWorkerClient=new TS(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}}]),t}(Ru);IS=CS([SS(1,Qm)],IS);var ES,MS=function(){function e(t){u(this,e),this._instance=t,this.proxy=this._instance}return h(e,[{key:"dispose",value:function(){this._instance.dispose()}},{key:"setChannel",value:function(e,t){throw new Error("Not supported")}}]),e}(),TS=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._workerDescriptor=e,r._disposed=!1,r._modelService=i,r._keepIdleModels=n,r._worker=null,r._modelManager=null,r}return p(t,e),h(t,[{key:"fhr",value:function(e,t){throw new Error("Not implemented!")}},{key:"_getOrCreateWorker",value:function e(){if(!this._worker)try{this._worker=this._register(function(e,t){var n="string"==typeof e?new lb(e,t):e;return new tb(new ub,n)}(this._workerDescriptor)),sw.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){G_(e),this._worker=this._createFallbackLocalWorker()}return this._worker}},{key:"_getProxy",value:function(){var e=this;return s((function(){var t;return E(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(t=e._getOrCreateWorker().proxy).$ping()];case 1:return n.sent(),[2,t];case 2:return G_(n.sent()),e._worker=e._createFallbackLocalWorker(),[2,e._worker.proxy];case 3:return[2]}}))}))()}},{key:"_createFallbackLocalWorker",value:function(){return new MS(new _S(this._createEditorWorkerHost(),null))}},{key:"_createEditorWorkerHost",value:function(){var e=this;return{$fhr:function(t,n){return e.fhr(t,n)}}}},{key:"_getOrCreateModelManager",value:function(e){return this._modelManager||(this._modelManager=this._register(new vS(e,this._modelService,this._keepIdleModels))),this._modelManager}},{key:"workerWithSyncedResources",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return s((function(){var i;return E(this,(function(r){switch(r.label){case 0:return n._disposed?[2,Promise.reject(ku())]:[4,n._getProxy()];case 1:return i=r.sent(),n._getOrCreateModelManager(i).ensureSyncedResources(e,t),[2,i]}}))}))()}},{key:"textualSuggest",value:function(e,t,n){var i=this;return s((function(){var r,o,a;return E(this,(function(s){switch(s.label){case 0:return[4,i.workerWithSyncedResources(e)];case 1:return r=s.sent(),o=n.source,a=n.flags,[2,r.$textualSuggest(e.map((function(e){return e.toString()})),t,o,a)]}}))}))()}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._disposed=!0}}]),t}(Ru);function RS(e){return e===ES.HIGH_CONTRAST_DARK||e===ES.HIGH_CONTRAST_LIGHT}function AS(e){return e===ES.DARK||e===ES.HIGH_CONTRAST_DARK}TS=CS([SS(2,Qm)],TS),function(e){e.DARK="dark",e.LIGHT="light",e.HIGH_CONTRAST_DARK="hcDark",e.HIGH_CONTRAST_LIGHT="hcLight"}(ES||(ES={}));var PS=Zm("themeService");function OS(e){return{id:e}}function FS(e){switch(e){case ES.DARK:return"vs-dark";case ES.HIGH_CONTRAST_DARK:return"hc-black";case ES.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}var WS="base.contributions.theming",BS=function(){function e(){u(this,e),this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new Zu}return h(e,[{key:"onColorThemeChange",value:function(e){var t=this;return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Mu((function(){var n=t.themingParticipants.indexOf(e);t.themingParticipants.splice(n,1)}))}},{key:"getThemingParticipants",value:function(){return this.themingParticipants}}]),e}(),HS=new BS;function VS(e){return HS.onColorThemeChange(e)}i_.add(WS,HS);var zS=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).themeService=e,n.theme=e.getColorTheme(),n._register(n.themeService.onDidColorThemeChange((function(e){return n.onThemeChange(e)}))),n}return p(t,e),h(t,[{key:"onThemeChange",value:function(e){this.theme=e,this.updateStyles()}},{key:"updateStyles",value:function(){}}]),t}(Ru),US=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},jS=function(e,t){return function(n,i){t(n,i,e)}},KS=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._themeService=e,n._onWillCreateCodeEditor=n._register(new Zu),n._onCodeEditorAdd=n._register(new Zu),n.onCodeEditorAdd=n._onCodeEditorAdd.event,n._onCodeEditorRemove=n._register(new Zu),n.onCodeEditorRemove=n._onCodeEditorRemove.event,n._onWillCreateDiffEditor=n._register(new Zu),n._onDiffEditorAdd=n._register(new Zu),n.onDiffEditorAdd=n._onDiffEditorAdd.event,n._onDiffEditorRemove=n._register(new Zu),n.onDiffEditorRemove=n._onDiffEditorRemove.event,n._decorationOptionProviders=new Map,n._codeEditorOpenHandlers=new Hs,n._modelProperties=new Map,n._codeEditors=Object.create(null),n._diffEditors=Object.create(null),n._globalStyleSheet=null,n}return p(t,e),h(t,[{key:"willCreateCodeEditor",value:function(){this._onWillCreateCodeEditor.fire()}},{key:"addCodeEditor",value:function(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}},{key:"removeCodeEditor",value:function(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}},{key:"listCodeEditors",value:function(){var e=this;return Object.keys(this._codeEditors).map((function(t){return e._codeEditors[t]}))}},{key:"willCreateDiffEditor",value:function(){this._onWillCreateDiffEditor.fire()}},{key:"addDiffEditor",value:function(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}},{key:"listDiffEditors",value:function(){var e=this;return Object.keys(this._diffEditors).map((function(t){return e._diffEditors[t]}))}},{key:"getFocusedCodeEditor",value:function(){var e=null,t=this.listCodeEditors(),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s.hasTextFocus())return s;s.hasWidgetFocus()&&(e=s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return e}},{key:"removeDecorationType",value:function(e){var t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach((function(t){return t.removeDecorationsByType(e)}))))}},{key:"setModelProperty",value:function(e,t,n){var i,r=e.toString();this._modelProperties.has(r)?i=this._modelProperties.get(r):(i=new Map,this._modelProperties.set(r,i)),i.set(t,n)}},{key:"getModelProperty",value:function(e,t){var n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}},{key:"openCodeEditor",value:function(e,t,n){var i=this;return s((function(){var r,o,a,s,l,u,c;return E(this,(function(d){switch(d.label){case 0:r=!0,o=!1,a=void 0,d.label=1;case 1:d.trys.push([1,6,7,8]),s=i._codeEditorOpenHandlers[Symbol.iterator](),d.label=2;case 2:return(r=(l=s.next()).done)?[3,5]:[4,(0,l.value)(e,t,n)];case 3:if(null!==(u=d.sent()))return[2,u];d.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return c=d.sent(),o=!0,a=c,[3,8];case 7:try{r||null==s.return||s.return()}finally{if(o)throw a}return[7];case 8:return[2,null]}}))}))()}},{key:"registerCodeEditorOpenHandler",value:function(e){return Mu(this._codeEditorOpenHandlers.unshift(e))}}]),t}(Ru),qS=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},GS=function(e,t){return function(n,i){t(n,i,e)}},ZS=function(e){function t(e,n){var i,r;return u(this,t),i=l(this,t,[n]),r=i,i._register(i.onCodeEditorAdd((function(){return i._checkContextKey()}))),i._register(i.onCodeEditorRemove((function(){return i._checkContextKey()}))),i._editorIsOpen=e.createKey("editorIsOpen",!1),i._activeCodeEditor=null,i._register(i.registerCodeEditorOpenHandler(function(){var e=s((function(e,t,n){return E(this,(function(n){return t?[2,r.doOpenEditor(t,e)]:[2,null]}))}));return function(t,n,i){return e.apply(this,arguments)}}())),i}return p(t,e),h(t,[{key:"_checkContextKey",value:function(){var e=!1,t=!0,n=!1,i=void 0;try{for(var r,o=this.listCodeEditors()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){if(!r.value.isSimpleWidget){e=!0;break}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}this._editorIsOpen.set(e)}},{key:"setActiveCodeEditor",value:function(e){this._activeCodeEditor=e}},{key:"getActiveCodeEditor",value:function(){return this._activeCodeEditor}},{key:"doOpenEditor",value:function(e,t){if(!this.findModel(e,t.resource)){if(t.resource){var n=t.resource.scheme;if(n===Pv.http||n===Pv.https)return ym(t.resource.toString()),e}return null}var i=t.options?t.options.selection:null;if(i)if("number"==typeof i.endLineNumber&&"number"==typeof i.endColumn)e.setSelection(i),e.revealRangeInCenter(i,1);else{var r={lineNumber:i.startLineNumber,column:i.startColumn};e.setPosition(r),e.revealPositionInCenter(r,1)}return e}},{key:"findModel",value:function(e,t){var n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}}]),t}(KS=US([jS(0,PS)],KS));ZS=qS([GS(0,Ky),GS(1,PS)],ZS),nk(Ym,ZS,0);var YS,QS=Zm("layoutService"),XS=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},$S=function(e,t){return function(n,i){t(n,i,e)}},JS=function(){function e(t){u(this,e),this._codeEditorService=t,this.onDidLayoutMainContainer=Au.None,this.onDidLayoutActiveContainer=Au.None,this.onDidLayoutContainer=Au.None,this.onDidChangeActiveContainer=Au.None,this.onDidAddContainer=Au.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}return h(e,[{key:"mainContainer",get:function(){var e,t;return null!==(t=null===(e=da(this._codeEditorService.listCodeEditors()))||void 0===e?void 0:e.getContainerDomNode())&&void 0!==t?t:Fh.document.body}},{key:"activeContainer",get:function(){var e,t,n=null!==(e=this._codeEditorService.getFocusedCodeEditor())&&void 0!==e?e:this._codeEditorService.getActiveCodeEditor();return null!==(t=null==n?void 0:n.getContainerDomNode())&&void 0!==t?t:this.mainContainer}},{key:"mainContainerDimension",get:function(){return kp(this.mainContainer)}},{key:"activeContainerDimension",get:function(){return kp(this.activeContainer)}},{key:"containers",get:function(){return aa(this._codeEditorService.listCodeEditors().map((function(e){return e.getContainerDomNode()})))}},{key:"getContainer",value:function(){return this.activeContainer}},{key:"whenContainerStylesLoaded",value:function(){}},{key:"focus",value:function(){var e;null===(e=this._codeEditorService.getFocusedCodeEditor())||void 0===e||e.focus()}}]),e}(),ex=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[n]))._container=e,i}return p(t,e),h(t,[{key:"mainContainer",get:function(){return this._container}}]),t}(JS=XS([$S(0,Ym)],JS));ex=XS([$S(1,Ym)],ex),nk(QS,JS,1),function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(YS||(YS={})),function(e){var t="error",n="warning",i="info";e.fromValue=function(r){return r?uf(t,r)?e.Error:uf(n,r)||uf("warn",r)?e.Warning:uf(i,r)?e.Info:e.Ignore:e.Ignore},e.toString=function(r){switch(r){case e.Error:return t;case e.Warning:return n;case e.Info:return i;default:return"ignore"}}}(YS||(YS={}));var tx=YS,nx=Zm("dialogService"),ix=tx,rx=Zm("notificationService"),ox=Zm("undoRedoService"),ax=function e(t,n){u(this,e),this.resource=t,this.elements=n},sx=function(){function e(){u(this,e),this.id=e._ID++,this.order=1}return h(e,[{key:"nextOrder",value:function(){return 0===this.id?0:this.order++}}]),e}();sx._ID=0,sx.None=new sx;var lx=function(){function e(){u(this,e),this.id=e._ID++,this.order=1}return h(e,[{key:"nextOrder",value:function(){return 0===this.id?0:this.order++}}]),e}();lx._ID=0,lx.None=new lx;var ux=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},cx=function(e,t){return function(n,i){t(n,i,e)}};function dx(e){return e.scheme===Pv.file?e.fsPath:e.path}var hx=0,fx=function(){function e(t,n,i,r,o,a,s){u(this,e),this.id=++hx,this.type=0,this.actual=t,this.label=t.label,this.confirmBeforeUndo=t.confirmBeforeUndo||!1,this.resourceLabel=n,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=r,this.groupOrder=o,this.sourceId=a,this.sourceOrder=s,this.isValid=!0}return h(e,[{key:"setValid",value:function(e){this.isValid=e}},{key:"toString",value:function(){return"[id:".concat(this.id,"] [group:").concat(this.groupId,"] [").concat(this.isValid?"  VALID":"INVALID","] ").concat(this.actual.constructor.name," - ").concat(this.actual)}}]),e}(),gx=function e(t,n){u(this,e),this.resourceLabel=t,this.reason=n},vx=function(){function e(){u(this,e),this.elements=new Map}return h(e,[{key:"createMessage",value:function(){var e=[],t=[],n=!0,i=!1,r=void 0;try{for(var o,a=this.elements[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2)[1];(0===s.reason?e:t).push(s.resourceLabel)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}var l=[];return e.length>0&&l.push(Xa({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&l.push(Xa({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),l.join("\n")}},{key:"size",get:function(){return this.elements.size}},{key:"has",value:function(e){return this.elements.has(e)}},{key:"set",value:function(e,t){this.elements.set(e,t)}},{key:"delete",value:function(e){return this.elements.delete(e)}}]),e}(),px=function(){function e(t,n,i,r,o,a,s){u(this,e),this.id=++hx,this.type=1,this.actual=t,this.label=t.label,this.confirmBeforeUndo=t.confirmBeforeUndo||!1,this.resourceLabels=n,this.strResources=i,this.groupId=r,this.groupOrder=o,this.sourceId=a,this.sourceOrder=s,this.removedResources=null,this.invalidatedResources=null}return h(e,[{key:"canSplit",value:function(){return"function"==typeof this.actual.split}},{key:"removeResource",value:function(e,t,n){this.removedResources||(this.removedResources=new vx),this.removedResources.has(t)||this.removedResources.set(t,new gx(e,n))}},{key:"setValid",value:function(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),0===this.invalidatedResources.size&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new vx),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new gx(e,0)))}},{key:"toString",value:function(){return"[id:".concat(this.id,"] [group:").concat(this.groupId,"] [").concat(this.invalidatedResources?"INVALID":"  VALID","] ").concat(this.actual.constructor.name," - ").concat(this.actual)}}]),e}(),mx=function(){function e(t,n){u(this,e),this.resourceLabel=t,this.strResource=n,this._past=[],this._future=[],this.locked=!1,this.versionId=1}return h(e,[{key:"dispose",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this._past[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;1===o.type&&o.removeResource(this.resourceLabel,this.strResource,0)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}var a=!0,s=!1,l=void 0;try{for(var u,c=this._future[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;1===d.type&&d.removeResource(this.resourceLabel,this.strResource,0)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}this.versionId++}},{key:"toString",value:function(){var e=[];e.push("* ".concat(this.strResource,":"));for(var t=0;t<this._past.length;t++)e.push("   * [UNDO] ".concat(this._past[t]));for(var n=this._future.length-1;n>=0;n--)e.push("   * [REDO] ".concat(this._future[n]));return e.join("\n")}},{key:"flushAllElements",value:function(){this._past=[],this._future=[],this.versionId++}},{key:"_setElementValidFlag",value:function(e,t){1===e.type?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}},{key:"setElementsValidFlag",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=this._past[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t(s.actual)&&this._setElementValidFlag(s,e)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}var l=!0,u=!1,c=void 0;try{for(var d,h=this._future[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;t(f.actual)&&this._setElementValidFlag(f,e)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}},{key:"pushElement",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._future[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;1===a.type&&a.removeResource(this.resourceLabel,this.strResource,1)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}this._future=[],this._past.push(e),this.versionId++}},{key:"createSnapshot",value:function(e){for(var t=[],n=0,i=this._past.length;n<i;n++)t.push(this._past[n].id);for(var r=this._future.length-1;r>=0;r--)t.push(this._future[r].id);return new ax(e,t)}},{key:"restoreSnapshot",value:function(e){for(var t=e.elements.length,n=!0,i=0,r=-1,o=0,a=this._past.length;o<a;o++,i++){var s=this._past[o];n&&(i>=t||s.id!==e.elements[i])&&(n=!1,r=0),n||1!==s.type||s.removeResource(this.resourceLabel,this.strResource,0)}for(var l=-1,u=this._future.length-1;u>=0;u--,i++){var c=this._future[u];n&&(i>=t||c.id!==e.elements[i])&&(n=!1,l=u),n||1!==c.type||c.removeResource(this.resourceLabel,this.strResource,0)}-1!==r&&(this._past=this._past.slice(0,r)),-1!==l&&(this._future=this._future.slice(l+1)),this.versionId++}},{key:"getElements",value:function(){var e=[],t=[],n=!0,i=!1,r=void 0;try{for(var o,a=this._past[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.push(s.actual)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}var l=!0,u=!1,c=void 0;try{for(var d,h=this._future[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;t.push(f.actual)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return{past:e,future:t}}},{key:"getClosestPastElement",value:function(){return 0===this._past.length?null:this._past[this._past.length-1]}},{key:"getSecondClosestPastElement",value:function(){return this._past.length<2?null:this._past[this._past.length-2]}},{key:"getClosestFutureElement",value:function(){return 0===this._future.length?null:this._future[this._future.length-1]}},{key:"hasPastElements",value:function(){return this._past.length>0}},{key:"hasFutureElements",value:function(){return this._future.length>0}},{key:"splitPastWorkspaceElement",value:function(e,t){for(var n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}},{key:"splitFutureWorkspaceElement",value:function(e,t){for(var n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}},{key:"moveBackward",value:function(e){this._past.pop(),this._future.push(e),this.versionId++}},{key:"moveForward",value:function(e){this._future.pop(),this._past.push(e),this.versionId++}}]),e}(),yx=function(){function e(t){u(this,e),this.editStacks=t,this._versionIds=[];for(var n=0,i=this.editStacks.length;n<i;n++)this._versionIds[n]=this.editStacks[n].versionId}return h(e,[{key:"isValid",value:function(){for(var e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}]),e}(),_x=new mx("","");_x.locked=!0;var bx=function(){function e(t,n){u(this,e),this._dialogService=t,this._notificationService=n,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}return h(e,[{key:"getUriComparisonKey",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._uriComparisonKeyComputers[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(a[0]===e.scheme)return a[1].getComparisonKey(e)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e.toString()}},{key:"_print",value:function(e){console.log("------------------------------------"),console.log("AFTER ".concat(e,": "));var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=this._editStacks[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.push(s[1].toString())}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}console.log(t.join("\n"))}},{key:"pushElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sx.None,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lx.None;if(0===e.type){var i=dx(e.resource),r=this.getUriComparisonKey(e.resource);this._pushElement(new fx(e,i,r,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{var o=new Set,a=[],s=[],l=!0,u=!1,c=void 0;try{for(var d,h=e.resources[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value,g=dx(f),v=this.getUriComparisonKey(f);o.has(v)||(o.add(v),a.push(g),s.push(v))}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}1===a.length?this._pushElement(new fx(e,a[0],s[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new px(e,a,s,t.id,t.nextOrder(),n.id,n.nextOrder()))}}},{key:"_pushElement",value:function(e){for(var t=0,n=e.strResources.length;t<n;t++){var i=e.resourceLabels[t],r=e.strResources[t],o=void 0;this._editStacks.has(r)?o=this._editStacks.get(r):(o=new mx(i,r),this._editStacks.set(r,o)),o.pushElement(e)}}},{key:"getLastElement",value:function(e){var t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){var n=this._editStacks.get(t);if(n.hasFutureElements())return null;var i=n.getClosestPastElement();return i?i.actual:null}return null}},{key:"_splitPastWorkspaceElement",value:function(e,t){var n=e.actual.split(),i=new Map,r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=dx(u.resource),d=this.getUriComparisonKey(u.resource),h=new fx(u,c,d,0,0,0,0);i.set(h.strResource,h)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}var f=!0,g=!1,v=void 0;try{for(var p,m=e.strResources[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value;if(!t||!t.has(y))this._editStacks.get(y).splitPastWorkspaceElement(e,i)}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}}},{key:"_splitFutureWorkspaceElement",value:function(e,t){var n=e.actual.split(),i=new Map,r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=dx(u.resource),d=this.getUriComparisonKey(u.resource),h=new fx(u,c,d,0,0,0,0);i.set(h.strResource,h)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}var f=!0,g=!1,v=void 0;try{for(var p,m=e.strResources[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value;if(!t||!t.has(y))this._editStacks.get(y).splitFutureWorkspaceElement(e,i)}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}}},{key:"removeElements",value:function(e){var t="string"==typeof e?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}},{key:"setElementsValidFlag",value:function(e,t,n){var i=this.getUriComparisonKey(e);this._editStacks.has(i)&&this._editStacks.get(i).setElementsValidFlag(t,n)}},{key:"createSnapshot",value:function(e){var t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new ax(e,[])}},{key:"restoreSnapshot",value:function(e){var t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){var n=this._editStacks.get(t);n.restoreSnapshot(e),n.hasPastElements()||n.hasFutureElements()||(n.dispose(),this._editStacks.delete(t))}}},{key:"getElements",value:function(e){var t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}},{key:"_findClosestUndoElementWithSource",value:function(e){if(!e)return[null,null];var t=null,n=null,i=!0,r=!1,o=void 0;try{for(var a,s=this._editStacks[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=C(a.value,2),u=l[0],c=l[1].getClosestPastElement();c&&(c.sourceId===e&&(!t||c.sourceOrder>t.sourceOrder)&&(t=c,n=u))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return[t,n]}},{key:"canUndo",value:function(e){if(e instanceof lx)return!!C(this._findClosestUndoElementWithSource(e.id),2)[1];var t=this.getUriComparisonKey(e);return!!this._editStacks.has(t)&&this._editStacks.get(t).hasPastElements()}},{key:"_onError",value:function(e,t){vu(e);var n=!0,i=!1,r=void 0;try{for(var o,a=t.strResources[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this.removeElements(s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this._notificationService.error(e)}},{key:"_acquireLocks",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e.editStacks[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){if(r.value.locked)throw new Error("Cannot acquire edit stack lock")}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}var a=!0,s=!1,l=void 0;try{for(var u,c=e.editStacks[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){u.value.locked=!0}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return function(){var t=!0,n=!1,i=void 0;try{for(var r,o=e.editStacks[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.locked=!1}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}},{key:"_safeInvokeWithLocks",value:function(e,t,n,i,r){var o,a=this,s=this._acquireLocks(n);try{o=t()}catch(t){return s(),i.dispose(),this._onError(t,e)}return o?o.then((function(){return s(),i.dispose(),r()}),(function(t){return s(),i.dispose(),a._onError(t,e)})):(s(),i.dispose(),r())}},{key:"_invokeWorkspacePrepare",value:function(e){return s((function(){var t;return E(this,(function(n){return void 0===e.actual.prepareUndoRedo||void 0===(t=e.actual.prepareUndoRedo())?[2,Ru.None]:[2,t]}))}))()}},{key:"_invokeResourcePrepare",value:function(e,t){if(1!==e.actual.type||void 0===e.actual.prepareUndoRedo)return t(Ru.None);var n=e.actual.prepareUndoRedo();return n?Nu(n)?t(n):n.then((function(e){return t(e)})):t(Ru.None)}},{key:"_getAffectedEditStacks",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e.strResources[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.push(this._editStacks.get(s)||_x)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return new yx(t)}},{key:"_tryToSplitAndUndo",value:function(e,t,n,i){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(i),new kx(this._undo(e,0,!0));var r=!0,o=!1,a=void 0;try{for(var s,l=t.strResources[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;this.removeElements(u)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return this._notificationService.warn(i),new kx}},{key:"_checkWorkspaceUndo",value:function(e,t,n,i){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,Xa({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,Xa({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=n.editStacks[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;c.getClosestPastElement()!==t&&r.push(c.resourceLabel)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}if(r.length>0)return this._tryToSplitAndUndo(e,t,null,Xa({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));var d=[],h=!0,f=!1,g=void 0;try{for(var v,p=n.editStacks[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var m=v.value;m.locked&&d.push(m.resourceLabel)}}catch(e){f=!0,g=e}finally{try{h||null==p.return||p.return()}finally{if(f)throw g}}return d.length>0?this._tryToSplitAndUndo(e,t,null,Xa({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,d.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,Xa({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}},{key:"_workspaceUndo",value:function(e,t,n){var i=this._getAffectedEditStacks(t),r=this._checkWorkspaceUndo(e,t,i,!1);return r?r.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,i,n)}},{key:"_isPartOfUndoGroup",value:function(e){if(!e.groupId)return!1;var t=!0,n=!1,i=void 0;try{for(var r,o=this._editStacks[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=C(r.value,2)[1],s=a.getClosestPastElement();if(s){if(s===e){var l=a.getSecondClosestPastElement();if(l&&l.groupId===e.groupId)return!0}if(s.groupId===e.groupId)return!0}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return!1}},{key:"_confirmAndExecuteWorkspaceUndo",value:function(e,t,n,i){var r=this;return s((function(){var o,a,s,l,u,c,d,h,f,g,v;return E(this,(function(p){switch(p.label){case 0:return!t.canSplit()||r._isPartOfUndoGroup(t)?[3,2]:(function(e){e[e.All=0]="All",e[e.This=1]="This",e[e.Cancel=2]="Cancel"}(o||(o={})),[4,r._dialogService.prompt({type:tx.Info,message:Xa("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:Xa({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",n.editStacks.length),run:function(){return o.All}},{label:Xa({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:function(){return o.This}}],cancelButton:{run:function(){return o.Cancel}}})]);case 1:if((a=p.sent().result)===o.Cancel)return[2];if(a===o.This)return r._splitPastWorkspaceElement(t,null),[2,r._undo(e,0,!0)];if(s=r._checkWorkspaceUndo(e,t,n,!1))return[2,s.returnValue];i=!0,p.label=2;case 2:return p.trys.push([2,4,,5]),[4,r._invokeWorkspacePrepare(t)];case 3:return l=p.sent(),[3,5];case 4:return u=p.sent(),[2,r._onError(u,t)];case 5:if(c=r._checkWorkspaceUndo(e,t,n,!0))return l.dispose(),[2,c.returnValue];d=!0,h=!1,f=void 0;try{for(g=n.editStacks[Symbol.iterator]();!(d=(v=g.next()).done);d=!0)v.value.moveBackward(t)}catch(e){h=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(h)throw f}}return[2,r._safeInvokeWithLocks(t,(function(){return t.actual.undo()}),n,l,(function(){return r._continueUndoInGroup(t.groupId,i)}))]}}))}))()}},{key:"_resourceUndo",value:function(e,t,n){var i=this;if(t.isValid){if(!e.locked)return this._invokeResourcePrepare(t,(function(r){return e.moveBackward(t),i._safeInvokeWithLocks(t,(function(){return t.actual.undo()}),new yx([e]),r,(function(){return i._continueUndoInGroup(t.groupId,n)}))}));var r=Xa({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(r)}else e.flushAllElements()}},{key:"_findClosestUndoElementInGroup",value:function(e){if(!e)return[null,null];var t=null,n=null,i=!0,r=!1,o=void 0;try{for(var a,s=this._editStacks[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=C(a.value,2),u=l[0],c=l[1].getClosestPastElement();c&&(c.groupId===e&&(!t||c.groupOrder>t.groupOrder)&&(t=c,n=u))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return[t,n]}},{key:"_continueUndoInGroup",value:function(e,t){if(e){var n=C(this._findClosestUndoElementInGroup(e),2)[1];return n?this._undo(n,0,t):void 0}}},{key:"undo",value:function(e){if(e instanceof lx){var t=C(this._findClosestUndoElementWithSource(e.id),2)[1];return t?this._undo(t,e.id,!1):void 0}return"string"==typeof e?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}},{key:"_undo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(this._editStacks.has(e)){var i=this._editStacks.get(e),r=i.getClosestPastElement();if(r){if(r.groupId){var o=C(this._findClosestUndoElementInGroup(r.groupId),2),a=o[0],s=o[1];if(r!==a&&s)return this._undo(s,t,n)}if((r.sourceId!==t||r.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,r);try{return 1===r.type?this._workspaceUndo(e,r,n):this._resourceUndo(i,r,n)}finally{}}}}},{key:"_confirmAndContinueUndo",value:function(e,t,n){var i=this;return s((function(){return E(this,(function(r){switch(r.label){case 0:return[4,i._dialogService.confirm({message:Xa("confirmDifferentSource","Would you like to undo '{0}'?",n.label),primaryButton:Xa({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:Xa("confirmDifferentSource.no","No")})];case 1:return r.sent().confirmed?[2,i._undo(e,t,!0)]:[2]}}))}))()}},{key:"_findClosestRedoElementWithSource",value:function(e){if(!e)return[null,null];var t=null,n=null,i=!0,r=!1,o=void 0;try{for(var a,s=this._editStacks[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=C(a.value,2),u=l[0],c=l[1].getClosestFutureElement();c&&(c.sourceId===e&&(!t||c.sourceOrder<t.sourceOrder)&&(t=c,n=u))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return[t,n]}},{key:"canRedo",value:function(e){if(e instanceof lx)return!!C(this._findClosestRedoElementWithSource(e.id),2)[1];var t=this.getUriComparisonKey(e);return!!this._editStacks.has(t)&&this._editStacks.get(t).hasFutureElements()}},{key:"_tryToSplitAndRedo",value:function(e,t,n,i){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(i),new kx(this._redo(e));var r=!0,o=!1,a=void 0;try{for(var s,l=t.strResources[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;this.removeElements(u)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return this._notificationService.warn(i),new kx}},{key:"_checkWorkspaceRedo",value:function(e,t,n,i){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,Xa({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,Xa({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=n.editStacks[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;c.getClosestFutureElement()!==t&&r.push(c.resourceLabel)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}if(r.length>0)return this._tryToSplitAndRedo(e,t,null,Xa({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));var d=[],h=!0,f=!1,g=void 0;try{for(var v,p=n.editStacks[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var m=v.value;m.locked&&d.push(m.resourceLabel)}}catch(e){f=!0,g=e}finally{try{h||null==p.return||p.return()}finally{if(f)throw g}}return d.length>0?this._tryToSplitAndRedo(e,t,null,Xa({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,d.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,Xa({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}},{key:"_workspaceRedo",value:function(e,t){var n=this._getAffectedEditStacks(t),i=this._checkWorkspaceRedo(e,t,n,!1);return i?i.returnValue:this._executeWorkspaceRedo(e,t,n)}},{key:"_executeWorkspaceRedo",value:function(e,t,n){var i=this;return s((function(){var r,o,a,s,l,u,c,d;return E(this,(function(h){switch(h.label){case 0:return h.trys.push([0,2,,3]),[4,i._invokeWorkspacePrepare(t)];case 1:return r=h.sent(),[3,3];case 2:return o=h.sent(),[2,i._onError(o,t)];case 3:if(a=i._checkWorkspaceRedo(e,t,n,!0))return r.dispose(),[2,a.returnValue];s=!0,l=!1,u=void 0;try{for(c=n.editStacks[Symbol.iterator]();!(s=(d=c.next()).done);s=!0)d.value.moveForward(t)}catch(e){l=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(l)throw u}}return[2,i._safeInvokeWithLocks(t,(function(){return t.actual.redo()}),n,r,(function(){return i._continueRedoInGroup(t.groupId)}))]}}))}))()}},{key:"_resourceRedo",value:function(e,t){var n=this;if(t.isValid){if(!e.locked)return this._invokeResourcePrepare(t,(function(i){return e.moveForward(t),n._safeInvokeWithLocks(t,(function(){return t.actual.redo()}),new yx([e]),i,(function(){return n._continueRedoInGroup(t.groupId)}))}));var i=Xa({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i)}else e.flushAllElements()}},{key:"_findClosestRedoElementInGroup",value:function(e){if(!e)return[null,null];var t=null,n=null,i=!0,r=!1,o=void 0;try{for(var a,s=this._editStacks[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=C(a.value,2),u=l[0],c=l[1].getClosestFutureElement();c&&(c.groupId===e&&(!t||c.groupOrder<t.groupOrder)&&(t=c,n=u))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return[t,n]}},{key:"_continueRedoInGroup",value:function(e){if(e){var t=C(this._findClosestRedoElementInGroup(e),2)[1];return t?this._redo(t):void 0}}},{key:"redo",value:function(e){if(e instanceof lx){var t=C(this._findClosestRedoElementWithSource(e.id),2)[1];return t?this._redo(t):void 0}return"string"==typeof e?this._redo(e):this._redo(this.getUriComparisonKey(e))}},{key:"_redo",value:function(e){if(this._editStacks.has(e)){var t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){var i=C(this._findClosestRedoElementInGroup(n.groupId),2),r=i[0],o=i[1];if(n!==r&&o)return this._redo(o)}try{return 1===n.type?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}}}]),e}();bx=ux([cx(0,nx),cx(1,rx)],bx);var kx=function e(t){u(this,e),this.returnValue=t};function wx(e,t,n){return Math.min(Math.max(e,t),n)}nk(ox,bx,1);var Cx,Sx=function(){function e(){u(this,e),this._n=1,this._val=0}return h(e,[{key:"update",value:function(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}},{key:"value",get:function(){return this._val}}]),e}(),xx=function(){function e(t){u(this,e),this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(t),this._values.fill(0,0,t)}return h(e,[{key:"update",value:function(e){var t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}},{key:"value",get:function(){return this._val}}]),e}(),Lx=Zm("environmentService"),Dx=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Nx=function(e,t){return function(n,i){t(n,i,e)}},Ix=Zm("ILanguageFeatureDebounceService");!function(e){var t=new WeakMap,n=0;e.of=function(e){var i=t.get(e);return void 0===i&&(i=++n,t.set(e,i)),i}}(Cx||(Cx={}));var Ex=function(){function e(t){u(this,e),this._default=t}return h(e,[{key:"get",value:function(e){return this._default}},{key:"update",value:function(e,t){return this._default}},{key:"default",value:function(){return this._default}}]),e}(),Mx=function(){function e(t,n,i,r,o,a){u(this,e),this._logService=t,this._name=n,this._registry=i,this._default=r,this._min=o,this._max=a,this._cache=new pw(50,.7)}return h(e,[{key:"_key",value:function(e){return e.id+this._registry.all(e).reduce((function(e,t){return qv(Cx.of(t),e)}),0)}},{key:"get",value:function(e){var t=this._key(e),n=this._cache.get(t);return n?wx(n.value,this._min,this._max):this.default()}},{key:"update",value:function(e,t){var n=this._key(e),i=this._cache.get(n);i||(i=new xx(6),this._cache.set(n,i));var r=wx(i.update(t),this._min,this._max);return Wv(e.uri,"output")||this._logService.trace("[DEBOUNCE: ".concat(this._name,"] for ").concat(e.uri.toString()," is ").concat(r,"ms")),r}},{key:"_overall",value:function(){var e=new Sx,t=!0,n=!1,i=void 0;try{for(var r,o=this._cache[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=C(r.value,2)[1];e.update(a.value)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e.value}},{key:"default",value:function(){var e=0|this._overall()||this._default;return wx(e,this._min,this._max)}}]),e}(),Tx=function(){function e(t,n){u(this,e),this._logService=t,this._data=new Map,this._isDev=n.isExtensionDevelopment||!n.isBuilt}return h(e,[{key:"for",value:function(e,t,n){var i,r,o,a=null!==(i=null==n?void 0:n.min)&&void 0!==i?i:50,s=null!==(r=null==n?void 0:n.max)&&void 0!==r?r:Math.pow(a,2),l=null!==(o=null==n?void 0:n.key)&&void 0!==o?o:void 0,u="".concat(Cx.of(e),",").concat(a).concat(l?","+l:""),c=this._data.get(u);return c||(this._isDev?(this._logService.debug("[DEBOUNCE: ".concat(t,"] is disabled in developed mode")),c=new Ex(1.5*a)):c=new Mx(this._logService,t,e,0|this._overallAverage()||1.5*a,a,s),this._data.set(u,c)),c}},{key:"_overallAverage",value:function(){var e=new Sx,t=!0,n=!1,i=void 0;try{for(var r,o=this._data.values()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;e.update(a.default())}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e.value}}]),e}();nk(Ix,Tx=Dx([Nx(0,k_),Nx(1,Lx)],Tx),1);var Rx=function(){function e(){u(this,e)}return h(e,null,[{key:"getLanguageId",value:function(e){return(255&e)>>>0}},{key:"getTokenType",value:function(e){return(768&e)>>>8}},{key:"containsBalancedBrackets",value:function(e){return!!(1024&e)}},{key:"getFontStyle",value:function(e){return(30720&e)>>>11}},{key:"getForeground",value:function(e){return(16744448&e)>>>15}},{key:"getBackground",value:function(e){return(4278190080&e)>>>24}},{key:"getClassNameFromMetadata",value:function(e){var t="mtk"+this.getForeground(e),n=this.getFontStyle(e);return 1&n&&(t+=" mtki"),2&n&&(t+=" mtkb"),4&n&&(t+=" mtku"),8&n&&(t+=" mtks"),t}},{key:"getInlineStyleFromMetadata",value:function(e,t){var n=this.getForeground(e),i=this.getFontStyle(e),r="color: ".concat(t[n],";");1&i&&(r+="font-style: italic;"),2&i&&(r+="font-weight: bold;");var o="";return 4&i&&(o+=" underline"),8&i&&(o+=" line-through"),o&&(r+="text-decoration:".concat(o,";")),r}},{key:"getPresentationFromMetadata",value:function(e){var t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:Boolean(1&n),bold:Boolean(2&n),underline:Boolean(4&n),strikethrough:Boolean(8&n)}}}]),e}();function Ax(e){for(var t=0,n=0,i=0,r=0,o=0,a=e.length;o<a;o++){var s=e.charCodeAt(o);13===s?(0===t&&(n=o),t++,o+1<a&&10===e.charCodeAt(o+1)?(r|=2,o++):r|=3,i=o+1):10===s&&(r|=1,0===t&&(n=o),t++,i=o+1)}return 0===t&&(n=e.length),[t,n,e.length-i,r]}var Px=function(){function e(t,n){u(this,e),this._startLineNumber=t,this._tokens=n,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}return h(e,[{key:"startLineNumber",get:function(){return this._startLineNumber}},{key:"endLineNumber",get:function(){return this._endLineNumber}},{key:"toString",value:function(){return this._tokens.toString(this._startLineNumber)}},{key:"_updateEndLineNumber",value:function(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}},{key:"isEmpty",value:function(){return this._tokens.isEmpty()}},{key:"getLineTokens",value:function(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}},{key:"getRange",value:function(){var e=this._tokens.getRange();return e?new hd(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn):e}},{key:"removeTokens",value:function(e){var t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}},{key:"split",value:function(t){var n=t.startLineNumber-this._startLineNumber,i=t.endLineNumber-this._startLineNumber,r=C(this._tokens.split(n,t.startColumn-1,i,t.endColumn-1),3),o=r[0],a=r[1],s=r[2];return[new e(this._startLineNumber,o),new e(this._startLineNumber+s,a)]}},{key:"applyEdit",value:function(e,t){var n=C(Ax(t),3),i=n[0],r=n[1],o=n[2];this.acceptEdit(e,i,r,o,t.length>0?t.charCodeAt(0):0)}},{key:"acceptEdit",value:function(e,t,n,i,r){this._acceptDeleteRange(e),this._acceptInsertText(new dd(e.startLineNumber,e.startColumn),t,n,i,r),this._updateEndLineNumber()}},{key:"_acceptDeleteRange",value:function(e){if(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn){var t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){var i=n-t;this._startLineNumber-=i}else{var r=this._tokens.getMaxDeltaLine();if(!(t>=r+1)){if(t<0&&n>=r+1)return this._startLineNumber=0,void this._tokens.clear();if(t<0){var o=-t;this._startLineNumber-=o,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}}}},{key:"_acceptInsertText",value:function(e,t,n,i,r){if(0!==t||0!==n){var o=e.lineNumber-this._startLineNumber;if(o<0)this._startLineNumber+=t;else o>=this._tokens.getMaxDeltaLine()+1||this._tokens.acceptInsertText(o,e.column-1,t,n,i,r)}}}],[{key:"create",value:function(t,n){return new e(t,new Ox(n))}}]),e}(),Ox=function(){function e(t){u(this,e),this._tokens=t,this._tokenCount=t.length/4}return h(e,[{key:"toString",value:function(e){for(var t=[],n=0;n<this._tokenCount;n++)t.push("(".concat(this._getDeltaLine(n)+e,",").concat(this._getStartCharacter(n),"-").concat(this._getEndCharacter(n),")"));return"[".concat(t.join(","),"]")}},{key:"getMaxDeltaLine",value:function(){var e=this._getTokenCount();return 0===e?-1:this._getDeltaLine(e-1)}},{key:"getRange",value:function(){var e=this._getTokenCount();if(0===e)return null;var t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new hd(0,t+1,n,i+1)}},{key:"_getTokenCount",value:function(){return this._tokenCount}},{key:"_getDeltaLine",value:function(e){return this._tokens[4*e]}},{key:"_getStartCharacter",value:function(e){return this._tokens[4*e+1]}},{key:"_getEndCharacter",value:function(e){return this._tokens[4*e+2]}},{key:"isEmpty",value:function(){return 0===this._getTokenCount()}},{key:"getLineTokens",value:function(e){for(var t=0,n=this._getTokenCount()-1;t<n;){var i=t+Math.floor((n-t)/2),r=this._getDeltaLine(i);if(r<e)t=i+1;else{if(!(r>e)){for(var o=i;o>t&&this._getDeltaLine(o-1)===e;)o--;for(var a=i;a<n&&this._getDeltaLine(a+1)===e;)a++;return new Fx(this._tokens.subarray(4*o,4*a+4))}n=i-1}}return this._getDeltaLine(t)===e?new Fx(this._tokens.subarray(4*t,4*t+4)):null}},{key:"clear",value:function(){this._tokenCount=0}},{key:"removeTokens",value:function(e,t,n,i){for(var r=this._tokens,o=this._tokenCount,a=0,s=!1,l=0,u=0;u<o;u++){var c=4*u,d=r[c],h=r[c+1],f=r[c+2],g=r[c+3];if((d>e||d===e&&f>=t)&&(d<n||d===n&&h<=i))s=!0;else{if(0===a&&(l=d),s){var v=4*a;r[v]=d-l,r[v+1]=h,r[v+2]=f,r[v+3]=g}a++}}return this._tokenCount=a,l}},{key:"split",value:function(t,n,i,r){for(var o=this._tokens,a=this._tokenCount,s=[],l=[],u=s,c=0,d=0,h=0;h<a;h++){var f=4*h,g=o[f],v=o[f+1],p=o[f+2],m=o[f+3];if(g>t||g===t&&p>=n){if(g<i||g===i&&v<=r)continue;u!==l&&(u=l,c=0,d=g)}u[c++]=g-d,u[c++]=v,u[c++]=p,u[c++]=m}return[new e(new Uint32Array(s)),new e(new Uint32Array(l)),d]}},{key:"acceptDeleteRange",value:function(e,t,n,i,r){for(var o=this._tokens,a=this._tokenCount,s=i-t,l=0,u=!1,c=0;c<a;c++){var d=4*c,h=o[d],f=o[d+1],g=o[d+2],v=o[d+3];if(h<t||h===t&&g<=n)l++;else{if(h===t&&f<n)h===i&&g>r?g-=r-n:g=n;else if(h===t&&f===n){if(!(h===i&&g>r)){u=!0;continue}g-=r-n}else if(h<i||h===i&&f<r){if(!(h===i&&g>r)){u=!0;continue}h=t,g=(f=n)+(g-r)}else if(h>i){if(0===s&&!u){l=a;break}h-=s}else{if(!(h===i&&f>=r))throw new Error("Not possible!");e&&0===h&&(f+=e,g+=e),h-=s,f-=r-n,g-=r-n}var p=4*l;o[p]=h,o[p+1]=f,o[p+2]=g,o[p+3]=v,l++}}this._tokenCount=l}},{key:"acceptInsertText",value:function(e,t,n,i,r,o){for(var a=0===n&&1===i&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),s=this._tokens,l=this._tokenCount,u=0;u<l;u++){var c=4*u,d=s[c],h=s[c+1],f=s[c+2];if(!(d<e||d===e&&f<t)){if(d===e&&f===t){if(!a)continue;f+=1}else if(d===e&&h<t&&t<f)0===n?f+=i:f=t;else{if(d===e&&h===t&&a)continue;if(d===e)if(d+=n,0===n)h+=i,f+=i;else{var g=f-h;f=(h=r+(h-t))+g}else d+=n}s[c]=d,s[c+1]=h,s[c+2]=f}}}}]),e}(),Fx=function(){function e(t){u(this,e),this._tokens=t}return h(e,[{key:"getCount",value:function(){return this._tokens.length/4}},{key:"getStartCharacter",value:function(e){return this._tokens[4*e+1]}},{key:"getEndCharacter",value:function(e){return this._tokens[4*e+2]}},{key:"getMetadata",value:function(e){return this._tokens[4*e+3]}}]),e}(),Wx=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Bx=function(e,t){return function(n,i){t(n,i,e)}},Hx=function(){function e(t,n,i,r){u(this,e),this._legend=t,this._themeService=n,this._languageService=i,this._logService=r,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new Ux}return h(e,[{key:"getMetadata",value:function(e,t,n){var i,r=this._languageService.languageIdCodec.encodeLanguageId(n),o=this._hashTable.get(e,t,r);if(o)i=o.metadata;else{var a=this._legend.tokenTypes[e],s=[];if(a){for(var l=t,u=0;l>0&&u<this._legend.tokenModifiers.length;u++)1&l&&s.push(this._legend.tokenModifiers[u]),l>>=1;var c=this._themeService.getColorTheme().getTokenStyleMetadata(a,s,n);if(void 0===c)i=2147483647;else{if(i=0,void 0!==c.italic)i|=1|(c.italic?1:0)<<11;if(void 0!==c.bold)i|=2|(c.bold?2:0)<<11;if(void 0!==c.underline)i|=4|(c.underline?4:0)<<11;if(void 0!==c.strikethrough)i|=8|(c.strikethrough?8:0)<<11;if(c.foreground)i|=16|c.foreground<<15;0===i&&(i=2147483647)}}else i=2147483647,a="not-in-legend";this._hashTable.add(e,t,r,i)}return i}},{key:"warnOverlappingSemanticTokens",value:function(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn("Overlapping semantic tokens detected at lineNumber ".concat(e,", column ").concat(t)))}},{key:"warnInvalidLengthSemanticTokens",value:function(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn("Semantic token with invalid length detected at lineNumber ".concat(e,", column ").concat(t)))}},{key:"warnInvalidEditStart",value:function(e,t,n,i,r){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn("Invalid semantic tokens edit detected (previousResultId: ".concat(e,", resultId: ").concat(t,") at edit #").concat(n,": The provided start offset ").concat(i," is outside the previous data (length ").concat(r,").")))}}]),e}();function Vx(e,t,n){for(var i=e.data,r=e.data.length/5|0,o=Math.max(Math.ceil(r/1024),400),a=[],s=0,l=1,u=0;s<r;){var c=s,d=Math.min(c+o,r);if(d<r){for(var h=d;h-1>c&&0===i[5*h];)h--;if(h-1===c){for(var f=d;f+1<r&&0===i[5*f];)f++;d=f}else d=h}for(var g=new Uint32Array(4*(d-c)),v=0,p=0,m=0,y=0;s<d;){var _=5*s,b=i[_],k=i[_+1],w=l+b|0,C=0===b?u+k|0:k,S=C+i[_+2]|0,x=i[_+3],L=i[_+4];if(S<=C)t.warnInvalidLengthSemanticTokens(w,C+1);else if(m===w&&y>C)t.warnOverlappingSemanticTokens(w,C+1);else{var D=t.getMetadata(x,L,n);2147483647!==D&&(0===p&&(p=w),g[v]=w-p,g[v+1]=C,g[v+2]=S,g[v+3]=D,v+=4,m=w,y=S)}l=w,u=C,s++}v!==g.length&&(g=g.subarray(0,v));var N=Px.create(p,g);a.push(N)}return a}Hx=Wx([Bx(1,PS),Bx(2,Jb),Bx(3,k_)],Hx);var zx=function e(t,n,i,r){u(this,e),this.tokenTypeIndex=t,this.tokenModifierSet=n,this.languageId=i,this.metadata=r,this.next=null},Ux=function(){function e(){u(this,e),this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=e._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<e._SIZES.length?2/3*this._currentLength:0),this._elements=[],e._nullOutEntries(this._elements,this._currentLength)}return h(e,[{key:"_hash2",value:function(e,t){return(e<<5)-e+t|0}},{key:"_hashFunc",value:function(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}},{key:"get",value:function(e,t,n){for(var i=this._hashFunc(e,t,n),r=this._elements[i];r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===n)return r;r=r.next}return null}},{key:"add",value:function(t,n,i,r){if(this._elementsCount++,0!==this._growCount&&this._elementsCount>=this._growCount){var o=this._elements;this._currentLengthIndex++,this._currentLength=e._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<e._SIZES.length?2/3*this._currentLength:0),this._elements=[],e._nullOutEntries(this._elements,this._currentLength);var a=!0,s=!1,l=void 0;try{for(var u,c=o[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)for(var d=u.value;d;){var h=d.next;d.next=null,this._add(d),d=h}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}}this._add(new zx(t,n,i,r))}},{key:"_add",value:function(e){var t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}],[{key:"_nullOutEntries",value:function(e,t){for(var n=0;n<t;n++)e[n]=null}}]),e}();Ux._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];var jx=Zm("semanticTokensStylingService"),Kx=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},qx=function(e,t){return function(n,i){t(n,i,e)}},Gx=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._themeService=e,r._logService=n,r._languageService=i,r._caches=new WeakMap,r._register(r._themeService.onDidColorThemeChange((function(){r._caches=new WeakMap}))),r}return p(t,e),h(t,[{key:"getStyling",value:function(e){return this._caches.has(e)||this._caches.set(e,new Hx(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}}]),t}(Ru);function Zx(e){return 47===e||92===e}function Yx(e){return e.replace(/[\\/]/g,Wc.sep)}function Qx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wc.sep;if(!e)return"";var n=e.length,i=e.charCodeAt(0);if(Zx(i)){if(Zx(e.charCodeAt(1))&&!Zx(e.charCodeAt(2))){for(var r=3,o=r;r<n&&!Zx(e.charCodeAt(r));r++);if(o!==r&&!Zx(e.charCodeAt(r+1)))for(r+=1;r<n;r++)if(Zx(e.charCodeAt(r)))return e.slice(0,r+1).replace(/[\\/]/g,t)}return t}if($x(i)&&58===e.charCodeAt(1))return Zx(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);var a=e.indexOf("://");if(-1!==a)for(a+=3;a<n;a++)if(Zx(e.charCodeAt(a)))return e.slice(0,a+1);return""}function Xx(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:qc;if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(n){if(!cf(e,t))return!1;if(t.length===e.length)return!0;var r=t.length;return t.charAt(t.length-1)===i&&r--,e.charAt(r)===i}return t.charAt(t.length-1)!==i&&(t+=i),0===e.indexOf(t)}function $x(e){return e>=65&&e<=90||e>=97&&e<=122}nk(jx,Gx=Kx([qx(0,PS),qx(1,k_),qx(2,Jb)],Gx),1);var Jx="**",eL="[/\\\\]",tL="[^/\\\\]",nL=/\//g;function iL(e,t){switch(e){case 0:return"";case 1:return"".concat(tL,"*?");default:return"(?:".concat(eL,"|").concat(tL,"+").concat(eL).concat(t?"|".concat(eL).concat(tL,"+"):"",")*?")}}function rL(e,t){if(!e)return[];var n=[],i=!1,r=!1,o="",a=!0,s=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;switch(d){case t:if(!i&&!r){n.push(o),o="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":r=!0;break;case"]":r=!1}o+=d}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return o&&n.push(o),n}function oL(e){if(!e)return"";var t="",n=rL(e,"/");if(n.every((function(e){return e===Jx})))t=".*";else{var i=!1;n.forEach((function(e,r){if(e===Jx){if(i)return;t+=iL(2,r===n.length-1)}else{var o=!1,a="",s=!1,l="",u=!0,c=!1,d=void 0;try{for(var h,f=e[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;if("}"!==g&&o)a+=g;else if(!s||"]"===g&&l)switch(g){case"{":o=!0;continue;case"[":s=!0;continue;case"}":var v=rL(a,","),p="(?:".concat(v.map((function(e){return oL(e)})).join("|"),")");t+=p,o=!1,a="";break;case"]":t+="["+l+"]",s=!1,l="";break;case"?":t+=tL;continue;case"*":t+=iL(1);continue;default:t+=qh(g)}else{l+="-"===g?g:"^"!==g&&"!"!==g||l?"/"===g?"":qh(g):"^"}}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}r<n.length-1&&(n[r+1]!==Jx||r+2<n.length)&&(t+=eL)}i=e===Jx}))}return t}var aL=/^\*\*\/\*\.[\w\.-]+$/,sL=/^\*\*\/([\w\.-]+)\/?$/,lL=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,uL=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,cL=/^\*\*((\/[\w\.-]+)+)\/?$/,dL=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,hL=new pw(1e4),fL=function(){return!1},gL=function(){return null};function vL(e,t){if(!e)return gL;var n;n=(n="string"!=typeof e?e.pattern:e).trim();var i,r="".concat(n,"_").concat(!!t.trimForExclusions),o=hL.get(r);return o||(o=aL.test(n)?function(e,t){return function(n,i){return"string"==typeof n&&n.endsWith(e)?t:null}}(n.substr(4),n):(i=sL.exec(mL(n,t)))?function(e,t){var n="/".concat(e),i="\\".concat(e),r=function(r,o){return"string"!=typeof r?null:o?o===e?t:null:r===e||r.endsWith(n)||r.endsWith(i)?t:null},o=[e];return r.basenames=o,r.patterns=[t],r.allBasenames=o,r}(i[1],n):(t.trimForExclusions?uL:lL).test(n)?function(e,t){var n=bL(e.slice(1,-1).split(",").map((function(e){return vL(e,t)})).filter((function(e){return e!==gL})),e),i=n.length;if(!i)return gL;if(1===i)return n[0];var r=function(t,i){for(var r=0,o=n.length;r<o;r++)if(n[r](t,i))return e;return null},o=n.find((function(e){return!!e.allBasenames}));o&&(r.allBasenames=o.allBasenames);var a=n.reduce((function(e,t){return t.allPaths?e.concat(t.allPaths):e}),[]);a.length&&(r.allPaths=a);return r}(n,t):(i=cL.exec(mL(n,t)))?yL(i[1].substr(1),n,!0):(i=dL.exec(mL(n,t)))?yL(i[1],n,!1):function(e){try{var t=new RegExp("^".concat(oL(e),"$"));return function(n){return t.lastIndex=0,"string"==typeof n&&t.test(n)?e:null}}catch(e){return gL}}(n),hL.set(r,o)),pL(o,e)}function pL(e,t){if("string"==typeof t)return e;var n=function(n,i){return Xx(n,t.base,!ys)?e(Zh(n.substr(t.base.length),qc),i):null};return n.allBasenames=e.allBasenames,n.allPaths=e.allPaths,n.basenames=e.basenames,n.patterns=e.patterns,n}function mL(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function yL(e,t,n){var i,r=qc===Wc.sep,o=r?e:e.replace(nL,qc),a=qc+o,s=Wc.sep+e;return i=n?function(n,i){return"string"!=typeof n||n!==o&&!n.endsWith(a)&&(r||n!==e&&!n.endsWith(s))?null:t}:function(n,i){return"string"!=typeof n||n!==o&&(r||n!==e)?null:t},i.allPaths=[(n?"*/":"./")+e],i}function _L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return fL;if("string"==typeof e||function(e){var t=e;if(!t)return!1;return"string"==typeof t.base&&"string"==typeof t.pattern}(e)){var n=vL(e,t);if(n===gL)return fL;var i=function(e,t){return!!n(e,t)};return n.allBasenames&&(i.allBasenames=n.allBasenames),n.allPaths&&(i.allPaths=n.allPaths),i}return function(e,t){var n=bL(Object.getOwnPropertyNames(e).map((function(n){return function(e,t,n){if(!1===t)return gL;var i=vL(e,n);if(i===gL)return gL;if("boolean"==typeof t)return i;if(t){var r=t.when;if("string"==typeof r){var o=function(t,n,o,a){if(!a||!i(t,n))return null;var s=a(r.replace("$(basename)",(function(){return o})));return dg(s)?s.then((function(t){return t?e:null})):s?e:null};return o.requiresSiblings=!0,o}}return i}(n,e[n],t)})).filter((function(e){return e!==gL}))),i=n.length;if(!i)return gL;if(!n.some((function(e){return!!e.requiresSiblings}))){if(1===i)return n[0];var r=function(e,t){for(var i=void 0,r=0,o=n.length;r<o;r++){var a=n[r](e,t);if("string"==typeof a)return a;dg(a)&&(i||(i=[]),i.push(a))}return i?s((function(){var e,t,n,r,o,a,s;return E(this,(function(l){switch(l.label){case 0:e=!0,t=!1,n=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=i[Symbol.iterator](),l.label=2;case 2:return(e=(o=r.next()).done)?[3,5]:[4,o.value];case 3:if("string"==typeof(a=l.sent()))return[2,a];l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=l.sent(),t=!0,n=s,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2,null]}}))}))():null},o=n.find((function(e){return!!e.allBasenames}));o&&(r.allBasenames=o.allBasenames);var a=n.reduce((function(e,t){return t.allPaths?e.concat(t.allPaths):e}),[]);return a.length&&(r.allPaths=a),r}var l=function(e,t,i){for(var r=void 0,o=void 0,a=0,l=n.length;a<l;a++){var u=n[a];u.requiresSiblings&&i&&(t||(t=jc(e)),r||(r=t.substr(0,t.length-Kc(e).length)));var c=u(e,t,r,i);if("string"==typeof c)return c;dg(c)&&(o||(o=[]),o.push(c))}return o?s((function(){var e,t,n,i,r,a,s;return E(this,(function(l){switch(l.label){case 0:e=!0,t=!1,n=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),i=o[Symbol.iterator](),l.label=2;case 2:return(e=(r=i.next()).done)?[3,5]:[4,r.value];case 3:if("string"==typeof(a=l.sent()))return[2,a];l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=l.sent(),t=!0,n=s,[3,8];case 7:try{e||null==i.return||i.return()}finally{if(t)throw n}return[7];case 8:return[2,null]}}))}))():null},u=n.find((function(e){return!!e.allBasenames}));u&&(l.allBasenames=u.allBasenames);var c=n.reduce((function(e,t){return t.allPaths?e.concat(t.allPaths):e}),[]);c.length&&(l.allPaths=c);return l}(e,t)}function bL(e,t){var n=e.filter((function(e){return!!e.basenames}));if(n.length<2)return e;var i,r=n.reduce((function(e,t){var n=t.basenames;return n?e.concat(n):e}),[]);if(t){i=[];for(var o=0,a=r.length;o<a;o++)i.push(t)}else i=n.reduce((function(e,t){var n=t.patterns;return n?e.concat(n):e}),[]);var s=function(e,t){if("string"!=typeof e)return null;if(!t){var n;for(n=e.length;n>0;n--){var o=e.charCodeAt(n-1);if(47===o||92===o)break}t=e.substr(n)}var a=r.indexOf(t);return-1!==a?i[a]:null};s.basenames=r,s.patterns=i,s.allBasenames=r;var l=e.filter((function(e){return!e.basenames}));return l.push(s),l}function kL(e,t,n,i,r,o){if(Array.isArray(e)){var a=0,s=!0,l=!1,u=void 0;try{for(var c,d=e[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=kL(c.value,t,n,i,r,o);if(10===h)return h;h>a&&(a=h)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return a}if("string"==typeof e)return i?"*"===e?5:e===n?10:0:0;if(e){var f=e.language,g=e.pattern,v=e.scheme,p=e.hasAccessToAllModels,m=e.notebookType;if(!i&&!p)return 0;m&&r&&(t=r);var y=0;if(v)if(v===t.scheme)y=10;else{if("*"!==v)return 0;y=5}if(f)if(f===n)y=10;else{if("*"!==f)return 0;y=Math.max(y,5)}if(m)if(m===o)y=10;else{if("*"!==m||void 0===o)return 0;y=Math.max(y,5)}if(g){var k;if((k="string"==typeof g?g:b(_({},g),{base:Bc(g.base)}))!==t.fsPath&&!function(e,t,n){return!(!e||"string"!=typeof t)&&_L(e)(t,void 0,n)}(k,t.fsPath))return 0;y=10}return y}return 0}function wL(e){return"string"!=typeof e&&(Array.isArray(e)?e.every(wL):!!e.exclusive)}var CL=function(){function e(t,n,i,r,o){u(this,e),this.uri=t,this.languageId=n,this.notebookUri=i,this.notebookType=r,this.recursive=o}return h(e,[{key:"equals",value:function(e){var t,n;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&(null===(t=this.notebookUri)||void 0===t?void 0:t.toString())===(null===(n=e.notebookUri)||void 0===n?void 0:n.toString())&&this.recursive===e.recursive}}]),e}(),SL=function(){function e(t){u(this,e),this._notebookInfoResolver=t,this._clock=0,this._entries=[],this._onDidChange=new Zu,this.onDidChange=this._onDidChange.event}return h(e,[{key:"register",value:function(e,t){var n=this,i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Mu((function(){if(i){var e=n._entries.indexOf(i);e>=0&&(n._entries.splice(e,1),n._lastCandidate=void 0,n._onDidChange.fire(n._entries.length),i=void 0)}}))}},{key:"has",value:function(e){return this.all(e).length>0}},{key:"all",value:function(e){if(!e)return[];this._updateScores(e,!1);var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=this._entries[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s._score>0&&t.push(s.provider)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}},{key:"ordered",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];return this._orderedForEach(e,t,(function(e){return n.push(e.provider)})),n}},{key:"orderedGroups",value:function(e){var t,n,i=[];return this._orderedForEach(e,!1,(function(e){t&&n===e._score?t.push(e.provider):(n=e._score,t=[e.provider],i.push(t))})),i}},{key:"_orderedForEach",value:function(e,t,n){this._updateScores(e,t);var i=!0,r=!1,o=void 0;try{for(var a,s=this._entries[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l._score>0&&n(l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}},{key:"_updateScores",value:function(t,n){var i,r,o=null===(i=this._notebookInfoResolver)||void 0===i?void 0:i.call(this,t.uri),a=o?new CL(t.uri,t.getLanguageId(),o.uri,o.type,n):new CL(t.uri,t.getLanguageId(),void 0,void 0,n);if(!(null===(r=this._lastCandidate)||void 0===r?void 0:r.equals(a))){this._lastCandidate=a;var s=!0,l=!1,u=void 0;try{for(var c,d=this._entries[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;if(h._score=kL(h.selector,a.uri,a.languageId,Dw(t),a.notebookUri,a.notebookType),wL(h.selector)&&h._score>0){if(!n){var f=!0,g=!1,v=void 0;try{for(var p,m=this._entries[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){p.value._score=0}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}h._score=1e3;break}h._score=0}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}this._entries.sort(e._compareByScoreAndTime)}}}],[{key:"_compareByScoreAndTime",value:function(e,t){return e._score<t._score?1:e._score>t._score?-1:xL(e.selector)&&!xL(t.selector)?1:!xL(e.selector)&&xL(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}]),e}();function xL(e){return"string"!=typeof e&&(Array.isArray(e)?e.some(xL):Boolean(e.isBuiltin))}var LL=function(){function e(){u(this,e),this.referenceProvider=new SL(this._score.bind(this)),this.renameProvider=new SL(this._score.bind(this)),this.newSymbolNamesProvider=new SL(this._score.bind(this)),this.codeActionProvider=new SL(this._score.bind(this)),this.definitionProvider=new SL(this._score.bind(this)),this.typeDefinitionProvider=new SL(this._score.bind(this)),this.declarationProvider=new SL(this._score.bind(this)),this.implementationProvider=new SL(this._score.bind(this)),this.documentSymbolProvider=new SL(this._score.bind(this)),this.inlayHintsProvider=new SL(this._score.bind(this)),this.colorProvider=new SL(this._score.bind(this)),this.codeLensProvider=new SL(this._score.bind(this)),this.documentFormattingEditProvider=new SL(this._score.bind(this)),this.documentRangeFormattingEditProvider=new SL(this._score.bind(this)),this.onTypeFormattingEditProvider=new SL(this._score.bind(this)),this.signatureHelpProvider=new SL(this._score.bind(this)),this.hoverProvider=new SL(this._score.bind(this)),this.documentHighlightProvider=new SL(this._score.bind(this)),this.multiDocumentHighlightProvider=new SL(this._score.bind(this)),this.selectionRangeProvider=new SL(this._score.bind(this)),this.foldingRangeProvider=new SL(this._score.bind(this)),this.linkProvider=new SL(this._score.bind(this)),this.inlineCompletionsProvider=new SL(this._score.bind(this)),this.inlineEditProvider=new SL(this._score.bind(this)),this.completionProvider=new SL(this._score.bind(this)),this.linkedEditingRangeProvider=new SL(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new SL(this._score.bind(this)),this.documentSemanticTokensProvider=new SL(this._score.bind(this)),this.documentDropEditProvider=new SL(this._score.bind(this)),this.documentPasteEditProvider=new SL(this._score.bind(this))}return h(e,[{key:"_score",value:function(e){var t;return null===(t=this._notebookTypeResolver)||void 0===t?void 0:t.call(this,e)}}]),e}();function DL(e){return"--vscode-".concat(e.replace(/\./g,"-"))}function NL(e){return"var(".concat(DL(e),")")}nk(wS,LL,1);var IL="base.contributions.colors",EL=function(){function e(){u(this,e),this._onDidChangeSchema=new Zu,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}return h(e,[{key:"registerColor",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0,o={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:r};this.colorsById[e]=o;var a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),i&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=Xa("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:n,oneOf:[a,{type:"string",const:"default",description:Xa("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}},{key:"getColors",value:function(){var e=this;return Object.keys(this.colorsById).map((function(t){return e.colorsById[t]}))}},{key:"resolveDefaultColor",value:function(e,t){var n=this.colorsById[e];if(null==n?void 0:n.defaults){var i=function(e){return null!==e&&"object"===(void 0===e?"undefined":L(e))&&"light"in e&&"dark"in e}(n.defaults)?n.defaults[t.type]:n.defaults;return WL(i,t)}}},{key:"getColorSchema",value:function(){return this.colorSchema}},{key:"toString",value:function(){var e=this;return Object.keys(this.colorsById).sort((function(e,t){var n=-1===e.indexOf(".")?0:1,i=-1===t.indexOf(".")?0:1;return n!==i?n-i:e.localeCompare(t)})).map((function(t){return"- `".concat(t,"`: ").concat(e.colorsById[t].description)})).join("\n")}}]),e}(),ML=new EL;function TL(e,t,n,i,r){return ML.registerColor(e,t,n,i,r)}function RL(e,t){return{op:0,value:e,factor:t}}function AL(e,t){return{op:1,value:e,factor:t}}function PL(e,t){return{op:2,value:e,factor:t}}function OL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{op:4,values:t}}function FL(e,t,n,i){return{op:5,value:e,background:t,factor:n,transparency:i}}function WL(e,t){if(null!==e)return"string"==typeof e?"#"===e[0]?XC.fromHex(e):t.getColor(e):e instanceof XC?e:"object"===(void 0===e?"undefined":L(e))?function(e,t){switch(e.op){case 0:var n;return null===(n=WL(e.value,t))||void 0===n?void 0:n.darken(e.factor);case 1:var i;return null===(i=WL(e.value,t))||void 0===i?void 0:i.lighten(e.factor);case 2:var r;return null===(r=WL(e.value,t))||void 0===r?void 0:r.transparent(e.factor);case 3:var o,a=WL(e.background,t);return a?null===(o=WL(e.value,t))||void 0===o?void 0:o.makeOpaque(a):WL(e.value,t);case 4:var s=!0,l=!1,u=void 0;try{for(var c,d=e.values[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=WL(c.value,t);if(h)return h}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return;case 6:return WL(t.defines(e.if)?e.then:e.else,t);case 5:var f=WL(e.value,t);if(!f)return;var g=WL(e.background,t);return g?f.isDarkerThan(g)?XC.getLighterColor(f,g,e.factor).transparent(e.transparency):XC.getDarkerColor(f,g,e.factor).transparent(e.transparency):f.transparent(e.factor*e.transparency);default:throw $y()}}(e,t):void 0}i_.add(IL,ML);var BL="vscode://schemas/workbench-colors",HL=i_.as(ok);HL.registerSchema(BL,ML.getColorSchema());var VL=new Sg((function(){return HL.notifySchemaChanged(BL)}),200);ML.onDidChangeSchema((function(){VL.isScheduled()||VL.schedule()}));var zL=TL("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},Xa("foreground","Overall foreground color. This color is only used if not overridden by a component."));TL("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},Xa("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component.")),TL("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},Xa("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),TL("descriptionForeground",{light:"#717171",dark:PL(zL,.7),hcDark:PL(zL,.7),hcLight:PL(zL,.7)},Xa("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));var UL=TL("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},Xa("iconForeground","The default color for icons in the workbench.")),jL=TL("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},Xa("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),KL=TL("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},Xa("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),qL=TL("contrastActiveBorder",{light:null,dark:null,hcDark:jL,hcLight:jL},Xa("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));TL("selection.background",null,Xa("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));var GL=TL("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},Xa("textLinkForeground","Foreground color for links in text."));TL("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},Xa("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),TL("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:XC.black,hcLight:"#292929"},Xa("textSeparatorForeground","Color for text separators.")),TL("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},Xa("textPreformatForeground","Foreground color for preformatted text segments.")),TL("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},Xa("textPreformatBackground","Background color for preformatted text segments.")),TL("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},Xa("textBlockQuoteBackground","Background color for block quotes in text.")),TL("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:XC.white,hcLight:"#292929"},Xa("textBlockQuoteBorder","Border color for block quotes in text.")),TL("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:XC.black,hcLight:"#F2F2F2"},Xa("textCodeBlockBackground","Background color for code blocks in text.")),TL("sash.hoverBorder",jL,Xa("sashActiveBorder","Border color of active sashes."));var ZL=TL("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:XC.black,hcLight:"#0F4A85"},Xa("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),YL=TL("badge.foreground",{dark:XC.white,light:"#333",hcDark:XC.white,hcLight:XC.white},Xa("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),QL=TL("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},Xa("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),XL=TL("scrollbarSlider.background",{dark:XC.fromHex("#797979").transparent(.4),light:XC.fromHex("#646464").transparent(.4),hcDark:PL(KL,.6),hcLight:PL(KL,.4)},Xa("scrollbarSliderBackground","Scrollbar slider background color.")),$L=TL("scrollbarSlider.hoverBackground",{dark:XC.fromHex("#646464").transparent(.7),light:XC.fromHex("#646464").transparent(.7),hcDark:PL(KL,.8),hcLight:PL(KL,.8)},Xa("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),JL=TL("scrollbarSlider.activeBackground",{dark:XC.fromHex("#BFBFBF").transparent(.4),light:XC.fromHex("#000000").transparent(.6),hcDark:KL,hcLight:KL},Xa("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),eD=TL("progressBar.background",{dark:XC.fromHex("#0E70C0"),light:XC.fromHex("#0E70C0"),hcDark:KL,hcLight:KL},Xa("progressBarBackground","Background color of the progress bar that can show for long running operations.")),tD=TL("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:XC.black,hcLight:XC.white},Xa("editorBackground","Editor background color.")),nD=TL("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:XC.white,hcLight:zL},Xa("editorForeground","Editor default foreground color."));TL("editorStickyScroll.background",tD,Xa("editorStickyScrollBackground","Background color of sticky scroll in the editor")),TL("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:XC.fromHex("#0F4A85").transparent(.1)},Xa("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor")),TL("editorStickyScroll.border",{dark:null,light:null,hcDark:KL,hcLight:KL},Xa("editorStickyScrollBorder","Border color of sticky scroll in the editor")),TL("editorStickyScroll.shadow",QL,Xa("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));var iD=TL("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:XC.white},Xa("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),rD=TL("editorWidget.foreground",zL,Xa("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),oD=TL("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:KL,hcLight:KL},Xa("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));TL("editorWidget.resizeBorder",null,Xa("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),TL("editorError.background",null,Xa("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);var aD=TL("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},Xa("editorError.foreground","Foreground color of error squigglies in the editor.")),sD=TL("editorError.border",{dark:null,light:null,hcDark:XC.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},Xa("errorBorder","If set, color of double underlines for errors in the editor.")),lD=TL("editorWarning.background",null,Xa("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),uD=TL("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},Xa("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),cD=TL("editorWarning.border",{dark:null,light:null,hcDark:XC.fromHex("#FFCC00").transparent(.8),hcLight:XC.fromHex("#FFCC00").transparent(.8)},Xa("warningBorder","If set, color of double underlines for warnings in the editor."));TL("editorInfo.background",null,Xa("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);var dD=TL("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},Xa("editorInfo.foreground","Foreground color of info squigglies in the editor.")),hD=TL("editorInfo.border",{dark:null,light:null,hcDark:XC.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},Xa("infoBorder","If set, color of double underlines for infos in the editor.")),fD=TL("editorHint.foreground",{dark:XC.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},Xa("editorHint.foreground","Foreground color of hint squigglies in the editor."));TL("editorHint.border",{dark:null,light:null,hcDark:XC.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},Xa("hintBorder","If set, color of double underlines for hints in the editor."));var gD=TL("editorLink.activeForeground",{dark:"#4E94CE",light:XC.blue,hcDark:XC.cyan,hcLight:"#292929"},Xa("activeLinkForeground","Color of active links.")),vD=TL("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},Xa("editorSelectionBackground","Color of the editor selection.")),pD=TL("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:XC.white},Xa("editorSelectionForeground","Color of the selected text for high contrast.")),mD=TL("editor.inactiveSelectionBackground",{light:PL(vD,.5),dark:PL(vD,.5),hcDark:PL(vD,.7),hcLight:PL(vD,.5)},Xa("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),yD=TL("editor.selectionHighlightBackground",{light:FL(vD,tD,.3,.6),dark:FL(vD,tD,.3,.6),hcDark:null,hcLight:null},Xa("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);TL("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:qL,hcLight:qL},Xa("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),TL("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},Xa("editorFindMatch","Color of the current search match."));var _D=TL("editor.findMatchForeground",null,Xa("editorFindMatchForeground","Text color of the current search match.")),bD=TL("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},Xa("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),kD=TL("editor.findMatchHighlightForeground",null,Xa("findMatchHighlightForeground","Foreground color of the other search matches."),!0);TL("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},Xa("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),TL("editor.findMatchBorder",{light:null,dark:null,hcDark:qL,hcLight:qL},Xa("editorFindMatchBorder","Border color of the current search match."));var wD=TL("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:qL,hcLight:qL},Xa("findMatchHighlightBorder","Border color of the other search matches.")),CD=TL("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:PL(qL,.4),hcLight:PL(qL,.4)},Xa("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);TL("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},Xa("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);var SD=TL("editorHoverWidget.background",iD,Xa("hoverBackground","Background color of the editor hover."));TL("editorHoverWidget.foreground",rD,Xa("hoverForeground","Foreground color of the editor hover."));var xD=TL("editorHoverWidget.border",oD,Xa("hoverBorder","Border color of the editor hover."));TL("editorHoverWidget.statusBarBackground",{dark:AL(SD,.2),light:RL(SD,.05),hcDark:iD,hcLight:iD},Xa("statusBarBackground","Background color of the editor hover status bar."));var LD=TL("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:XC.white,hcLight:XC.black},Xa("editorInlayHintForeground","Foreground color of inline hints")),DD=TL("editorInlayHint.background",{dark:PL(ZL,.1),light:PL(ZL,.1),hcDark:PL(XC.white,.1),hcLight:PL(ZL,.1)},Xa("editorInlayHintBackground","Background color of inline hints")),ND=TL("editorInlayHint.typeForeground",LD,Xa("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),ID=TL("editorInlayHint.typeBackground",DD,Xa("editorInlayHintBackgroundTypes","Background color of inline hints for types")),ED=TL("editorInlayHint.parameterForeground",LD,Xa("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),MD=TL("editorInlayHint.parameterBackground",DD,Xa("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),TD=TL("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},Xa("editorLightBulbForeground","The color used for the lightbulb actions icon."));TL("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},Xa("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),TL("editorLightBulbAi.foreground",TD,Xa("editorLightBulbAiForeground","The color used for the lightbulb AI icon.")),TL("editor.snippetTabstopHighlightBackground",{dark:new XC(new ZC(124,124,124,.3)),light:new XC(new ZC(10,50,100,.2)),hcDark:new XC(new ZC(124,124,124,.3)),hcLight:new XC(new ZC(10,50,100,.2))},Xa("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),TL("editor.snippetTabstopHighlightBorder",null,Xa("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),TL("editor.snippetFinalTabstopHighlightBackground",null,Xa("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),TL("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new XC(new ZC(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},Xa("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));var RD=new XC(new ZC(155,185,85,.2)),AD=new XC(new ZC(255,0,0,.2)),PD=TL("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},Xa("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),OD=TL("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},Xa("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);TL("diffEditor.insertedLineBackground",{dark:RD,light:RD,hcDark:null,hcLight:null},Xa("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),TL("diffEditor.removedLineBackground",{dark:AD,light:AD,hcDark:null,hcLight:null},Xa("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),TL("diffEditorGutter.insertedLineBackground",null,Xa("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),TL("diffEditorGutter.removedLineBackground",null,Xa("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));var FD=TL("diffEditorOverview.insertedForeground",null,Xa("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),WD=TL("diffEditorOverview.removedForeground",null,Xa("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));TL("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},Xa("diffEditorInsertedOutline","Outline color for the text that got inserted.")),TL("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},Xa("diffEditorRemovedOutline","Outline color for text that got removed.")),TL("diffEditor.border",{dark:null,light:null,hcDark:KL,hcLight:KL},Xa("diffEditorBorder","Border color between the two text editors.")),TL("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},Xa("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),TL("diffEditor.unchangedRegionBackground","sideBar.background",Xa("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor.")),TL("diffEditor.unchangedRegionForeground","foreground",Xa("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor.")),TL("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},Xa("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));var BD=TL("widget.shadow",{dark:PL(XC.black,.36),light:PL(XC.black,.16),hcDark:null,hcLight:null},Xa("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),HD=TL("widget.border",{dark:null,light:null,hcDark:KL,hcLight:KL},Xa("widgetBorder","Border color of widgets such as find/replace inside the editor.")),VD=TL("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},Xa("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));TL("toolbar.hoverOutline",{dark:null,light:null,hcDark:qL,hcLight:qL},Xa("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse")),TL("toolbar.activeBackground",{dark:AL(VD,.1),light:RL(VD,.1),hcDark:null,hcLight:null},Xa("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));var zD=TL("breadcrumb.foreground",PL(zL,.8),Xa("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),UD=TL("breadcrumb.background",tD,Xa("breadcrumbsBackground","Background color of breadcrumb items.")),jD=TL("breadcrumb.focusForeground",{light:RL(zL,.2),dark:AL(zL,.1),hcDark:AL(zL,.1),hcLight:AL(zL,.1)},Xa("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),KD=TL("breadcrumb.activeSelectionForeground",{light:RL(zL,.2),dark:AL(zL,.1),hcDark:AL(zL,.1),hcLight:AL(zL,.1)},Xa("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));TL("breadcrumbPicker.background",iD,Xa("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));var qD=XC.fromHex("#40C8AE").transparent(.5),GD=XC.fromHex("#40A6FF").transparent(.5),ZD=XC.fromHex("#606060").transparent(.4),YD=TL("merge.currentHeaderBackground",{dark:qD,light:qD,hcDark:null,hcLight:null},Xa("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);TL("merge.currentContentBackground",PL(YD,.4),Xa("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);var QD=TL("merge.incomingHeaderBackground",{dark:GD,light:GD,hcDark:null,hcLight:null},Xa("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);TL("merge.incomingContentBackground",PL(QD,.4),Xa("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);var XD=TL("merge.commonHeaderBackground",{dark:ZD,light:ZD,hcDark:null,hcLight:null},Xa("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);TL("merge.commonContentBackground",PL(XD,.4),Xa("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);var $D=TL("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},Xa("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));TL("editorOverviewRuler.currentContentForeground",{dark:PL(YD,1),light:PL(YD,1),hcDark:$D,hcLight:$D},Xa("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts.")),TL("editorOverviewRuler.incomingContentForeground",{dark:PL(QD,1),light:PL(QD,1),hcDark:$D,hcLight:$D},Xa("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts.")),TL("editorOverviewRuler.commonContentForeground",{dark:PL(XD,1),light:PL(XD,1),hcDark:$D,hcLight:$D},Xa("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));var JD=TL("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},Xa("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),eN=TL("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",Xa("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),tN=TL("problemsErrorIcon.foreground",aD,Xa("problemsErrorIconForeground","The color used for the problems error icon.")),nN=TL("problemsWarningIcon.foreground",uD,Xa("problemsWarningIconForeground","The color used for the problems warning icon.")),iN=TL("problemsInfoIcon.foreground",dD,Xa("problemsInfoIconForeground","The color used for the problems info icon.")),rN=TL("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},Xa("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),oN=TL("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},Xa("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),aN=TL("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},Xa("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),sN=TL("minimap.infoHighlight",{dark:dD,light:dD,hcDark:hD,hcLight:hD},Xa("minimapInfo","Minimap marker color for infos.")),lN=TL("minimap.warningHighlight",{dark:uD,light:uD,hcDark:cD,hcLight:cD},Xa("overviewRuleWarning","Minimap marker color for warnings.")),uN=TL("minimap.errorHighlight",{dark:new XC(new ZC(255,18,18,.7)),light:new XC(new ZC(255,18,18,.7)),hcDark:new XC(new ZC(255,50,50,1)),hcLight:"#B5200D"},Xa("minimapError","Minimap marker color for errors.")),cN=TL("minimap.background",null,Xa("minimapBackground","Minimap background color.")),dN=TL("minimap.foregroundOpacity",XC.fromHex("#000f"),Xa("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));TL("minimapSlider.background",PL(XL,.5),Xa("minimapSliderBackground","Minimap slider background color.")),TL("minimapSlider.hoverBackground",PL($L,.5),Xa("minimapSliderHoverBackground","Minimap slider background color when hovering.")),TL("minimapSlider.activeBackground",PL(JL,.5),Xa("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),TL("charts.foreground",zL,Xa("chartsForeground","The foreground color used in charts.")),TL("charts.lines",PL(zL,.5),Xa("chartsLines","The color used for horizontal lines in charts.")),TL("charts.red",aD,Xa("chartsRed","The red color used in chart visualizations.")),TL("charts.blue",dD,Xa("chartsBlue","The blue color used in chart visualizations.")),TL("charts.yellow",uD,Xa("chartsYellow","The yellow color used in chart visualizations.")),TL("charts.orange",rN,Xa("chartsOrange","The orange color used in chart visualizations.")),TL("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},Xa("chartsGreen","The green color used in chart visualizations.")),TL("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},Xa("chartsPurple","The purple color used in chart visualizations."));var hN=TL("input.background",{dark:"#3C3C3C",light:XC.white,hcDark:XC.black,hcLight:XC.white},Xa("inputBoxBackground","Input box background.")),fN=TL("input.foreground",zL,Xa("inputBoxForeground","Input box foreground.")),gN=TL("input.border",{dark:null,light:null,hcDark:KL,hcLight:KL},Xa("inputBoxBorder","Input box border.")),vN=TL("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:KL,hcLight:KL},Xa("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),pN=TL("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},Xa("inputOption.hoverBackground","Background color of activated options in input fields.")),mN=TL("inputOption.activeBackground",{dark:PL(jL,.4),light:PL(jL,.2),hcDark:XC.transparent,hcLight:XC.transparent},Xa("inputOption.activeBackground","Background hover color of options in input fields.")),yN=TL("inputOption.activeForeground",{dark:XC.white,light:XC.black,hcDark:zL,hcLight:zL},Xa("inputOption.activeForeground","Foreground color of activated options in input fields."));TL("input.placeholderForeground",{light:PL(zL,.5),dark:PL(zL,.5),hcDark:PL(zL,.7),hcLight:PL(zL,.7)},Xa("inputPlaceholderForeground","Input box foreground color for placeholder text."));var _N=TL("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:XC.black,hcLight:XC.white},Xa("inputValidationInfoBackground","Input validation background color for information severity.")),bN=TL("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:zL},Xa("inputValidationInfoForeground","Input validation foreground color for information severity.")),kN=TL("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:KL,hcLight:KL},Xa("inputValidationInfoBorder","Input validation border color for information severity.")),wN=TL("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:XC.black,hcLight:XC.white},Xa("inputValidationWarningBackground","Input validation background color for warning severity.")),CN=TL("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:zL},Xa("inputValidationWarningForeground","Input validation foreground color for warning severity.")),SN=TL("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:KL,hcLight:KL},Xa("inputValidationWarningBorder","Input validation border color for warning severity.")),xN=TL("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:XC.black,hcLight:XC.white},Xa("inputValidationErrorBackground","Input validation background color for error severity.")),LN=TL("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:zL},Xa("inputValidationErrorForeground","Input validation foreground color for error severity.")),DN=TL("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:KL,hcLight:KL},Xa("inputValidationErrorBorder","Input validation border color for error severity.")),NN=TL("dropdown.background",{dark:"#3C3C3C",light:XC.white,hcDark:XC.black,hcLight:XC.white},Xa("dropdownBackground","Dropdown background.")),IN=TL("dropdown.listBackground",{dark:null,light:null,hcDark:XC.black,hcLight:XC.white},Xa("dropdownListBackground","Dropdown list background.")),EN=TL("dropdown.foreground",{dark:"#F0F0F0",light:zL,hcDark:XC.white,hcLight:zL},Xa("dropdownForeground","Dropdown foreground.")),MN=TL("dropdown.border",{dark:NN,light:"#CECECE",hcDark:KL,hcLight:KL},Xa("dropdownBorder","Dropdown border.")),TN=TL("button.foreground",XC.white,Xa("buttonForeground","Button foreground color.")),RN=TL("button.separator",PL(TN,.4),Xa("buttonSeparator","Button separator color.")),AN=TL("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},Xa("buttonBackground","Button background color.")),PN=TL("button.hoverBackground",{dark:AL(AN,.2),light:RL(AN,.2),hcDark:AN,hcLight:AN},Xa("buttonHoverBackground","Button background color when hovering.")),ON=TL("button.border",KL,Xa("buttonBorder","Button border color.")),FN=TL("button.secondaryForeground",{dark:XC.white,light:XC.white,hcDark:XC.white,hcLight:zL},Xa("buttonSecondaryForeground","Secondary button foreground color.")),WN=TL("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:XC.white},Xa("buttonSecondaryBackground","Secondary button background color.")),BN=TL("button.secondaryHoverBackground",{dark:AL(WN,.2),light:RL(WN,.2),hcDark:null,hcLight:null},Xa("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),HN=TL("radio.activeForeground",yN,Xa("radioActiveForeground","Foreground color of active radio option.")),VN=TL("radio.activeBackground",mN,Xa("radioBackground","Background color of active radio option.")),zN=TL("radio.activeBorder",vN,Xa("radioActiveBorder","Border color of the active radio option.")),UN=TL("radio.inactiveForeground",null,Xa("radioInactiveForeground","Foreground color of inactive radio option.")),jN=TL("radio.inactiveBackground",null,Xa("radioInactiveBackground","Background color of inactive radio option.")),KN=TL("radio.inactiveBorder",{light:PL(HN,.2),dark:PL(HN,.2),hcDark:PL(HN,.4),hcLight:PL(HN,.2)},Xa("radioInactiveBorder","Border color of the inactive radio option.")),qN=TL("radio.inactiveHoverBackground",pN,Xa("radioHoverBackground","Background color of inactive active radio option when hovering.")),GN=TL("checkbox.background",NN,Xa("checkbox.background","Background color of checkbox widget."));TL("checkbox.selectBackground",iD,Xa("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));var ZN=TL("checkbox.foreground",EN,Xa("checkbox.foreground","Foreground color of checkbox widget.")),YN=TL("checkbox.border",MN,Xa("checkbox.border","Border color of checkbox widget."));TL("checkbox.selectBorder",UL,Xa("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));var QN=TL("keybindingLabel.background",{dark:new XC(new ZC(128,128,128,.17)),light:new XC(new ZC(221,221,221,.4)),hcDark:XC.transparent,hcLight:XC.transparent},Xa("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),XN=TL("keybindingLabel.foreground",{dark:XC.fromHex("#CCCCCC"),light:XC.fromHex("#555555"),hcDark:XC.white,hcLight:zL},Xa("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),$N=TL("keybindingLabel.border",{dark:new XC(new ZC(51,51,51,.6)),light:new XC(new ZC(204,204,204,.4)),hcDark:new XC(new ZC(111,195,223)),hcLight:KL},Xa("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),JN=TL("keybindingLabel.bottomBorder",{dark:new XC(new ZC(68,68,68,.6)),light:new XC(new ZC(187,187,187,.4)),hcDark:new XC(new ZC(111,195,223)),hcLight:zL},Xa("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),eI=TL("list.focusBackground",null,Xa("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),tI=TL("list.focusForeground",null,Xa("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),nI=TL("list.focusOutline",{dark:jL,light:jL,hcDark:qL,hcLight:qL},Xa("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),iI=TL("list.focusAndSelectionOutline",null,Xa("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),rI=TL("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:XC.fromHex("#0F4A85").transparent(.1)},Xa("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),oI=TL("list.activeSelectionForeground",{dark:XC.white,light:XC.white,hcDark:null,hcLight:null},Xa("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),aI=TL("list.activeSelectionIconForeground",null,Xa("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),sI=TL("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:XC.fromHex("#0F4A85").transparent(.1)},Xa("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),lI=TL("list.inactiveSelectionForeground",null,Xa("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),uI=TL("list.inactiveSelectionIconForeground",null,Xa("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),cI=TL("list.inactiveFocusBackground",null,Xa("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),dI=TL("list.inactiveFocusOutline",null,Xa("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),hI=TL("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:XC.white.transparent(.1),hcLight:XC.fromHex("#0F4A85").transparent(.1)},Xa("listHoverBackground","List/Tree background when hovering over items using the mouse.")),fI=TL("list.hoverForeground",null,Xa("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),gI=TL("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},Xa("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),vI=TL("list.dropBetweenBackground",{dark:UL,light:UL,hcDark:null,hcLight:null},Xa("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),pI=TL("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:jL,hcLight:jL},Xa("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),mI=TL("list.focusHighlightForeground",{dark:pI,light:function(e,t,n){return{op:6,if:e,then:t,else:n}}(rI,pI,"#BBE7FF"),hcDark:pI,hcLight:pI},Xa("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));TL("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},Xa("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),TL("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},Xa("listErrorForeground","Foreground color of list items containing errors.")),TL("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},Xa("listWarningForeground","Foreground color of list items containing warnings."));var yI=TL("listFilterWidget.background",{light:RL(iD,0),dark:AL(iD,0),hcDark:iD,hcLight:iD},Xa("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),_I=TL("listFilterWidget.outline",{dark:XC.transparent,light:XC.transparent,hcDark:"#f38518",hcLight:"#007ACC"},Xa("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),bI=TL("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:KL,hcLight:KL},Xa("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),kI=TL("listFilterWidget.shadow",BD,Xa("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));TL("list.filterMatchBackground",{dark:bD,light:bD,hcDark:null,hcLight:null},Xa("listFilterMatchHighlight","Background color of the filtered match.")),TL("list.filterMatchBorder",{dark:wD,light:wD,hcDark:KL,hcLight:qL},Xa("listFilterMatchHighlightBorder","Border color of the filtered match.")),TL("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},Xa("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));var wI=TL("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},Xa("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),CI=TL("tree.inactiveIndentGuidesStroke",PL(wI,.4),Xa("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),SI=TL("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},Xa("tableColumnsBorder","Table border color between columns.")),xI=TL("tree.tableOddRowsBackground",{dark:PL(zL,.04),light:PL(zL,.04),hcDark:null,hcLight:null},Xa("tableOddRowsBackgroundColor","Background color for odd table rows."));TL("editorActionList.background",iD,Xa("editorActionListBackground","Action List background color.")),TL("editorActionList.foreground",rD,Xa("editorActionListForeground","Action List foreground color.")),TL("editorActionList.focusForeground",oI,Xa("editorActionListFocusForeground","Action List foreground color for the focused item.")),TL("editorActionList.focusBackground",rI,Xa("editorActionListFocusBackground","Action List background color for the focused item."));var LI=TL("menu.border",{dark:null,light:null,hcDark:KL,hcLight:KL},Xa("menuBorder","Border color of menus.")),DI=TL("menu.foreground",EN,Xa("menuForeground","Foreground color of menu items.")),NI=TL("menu.background",NN,Xa("menuBackground","Background color of menu items.")),II=TL("menu.selectionForeground",oI,Xa("menuSelectionForeground","Foreground color of the selected menu item in menus.")),EI=TL("menu.selectionBackground",rI,Xa("menuSelectionBackground","Background color of the selected menu item in menus.")),MI=TL("menu.selectionBorder",{dark:null,light:null,hcDark:qL,hcLight:qL},Xa("menuSelectionBorder","Border color of the selected menu item in menus.")),TI=TL("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:KL,hcLight:KL},Xa("menuSeparatorBackground","Color of a separator menu item in menus.")),RI=TL("quickInput.background",iD,Xa("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),AI=TL("quickInput.foreground",rD,Xa("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),PI=TL("quickInputTitle.background",{dark:new XC(new ZC(255,255,255,.105)),light:new XC(new ZC(0,0,0,.06)),hcDark:"#000000",hcLight:XC.white},Xa("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),OI=TL("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:XC.white,hcLight:"#0F4A85"},Xa("pickerGroupForeground","Quick picker color for grouping labels.")),FI=TL("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:XC.white,hcLight:"#0F4A85"},Xa("pickerGroupBorder","Quick picker color for grouping borders.")),WI=TL("quickInput.list.focusBackground",null,"",void 0,Xa("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),BI=TL("quickInputList.focusForeground",oI,Xa("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),HI=TL("quickInputList.focusIconForeground",aI,Xa("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),VI=TL("quickInputList.focusBackground",{dark:OL(WI,rI),light:OL(WI,rI),hcDark:null,hcLight:null},Xa("quickInput.listFocusBackground","Quick picker background color for the focused item."));TL("search.resultsInfoForeground",{light:zL,dark:PL(zL,.65),hcDark:zL,hcLight:zL},Xa("search.resultsInfoForeground","Color of the text in the search viewlet's completion message.")),TL("searchEditor.findMatchBackground",{light:PL(bD,.66),dark:PL(bD,.66),hcDark:bD,hcLight:bD},Xa("searchEditor.queryMatch","Color of the Search Editor query matches.")),TL("searchEditor.findMatchBorder",{light:PL(wD,.66),dark:PL(wD,.66),hcDark:wD,hcLight:wD},Xa("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var zI=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},UI=function(e,t){return function(n,i){t(n,i,e)}},jI=Zm("hoverService"),KI=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return u(this,t),(i=l(this,t)).placement=e,i.instantHover=n,i.overrideOptions=r,i.configurationService=o,i.hoverService=a,i.lastHoverHideTime=0,i.timeLimit=200,i.hoverDisposables=i._register(new Tu),i._delay=i.configurationService.getValue("workbench.hover.delay"),i._register(i.configurationService.onDidChangeConfiguration((function(e){e.affectsConfiguration("workbench.hover.delay")&&(i._delay=i.configurationService.getValue("workbench.hover.delay"))}))),i}return p(t,e),h(t,[{key:"delay",get:function(){return this.isInstantlyHovering()?0:this._delay}},{key:"showHover",value:function(e,t){var n=this,i="function"==typeof this.overrideOptions?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();var r=Jp(e.target)?[e.target]:e.target.targetElements,o=!0,a=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;this.hoverDisposables.add(hp(c,"keydown",(function(e){e.equals(9)&&n.hoverService.hideHover()})))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var d=Jp(e.content)?void 0:e.content.toString();return this.hoverService.showHover(b(_({},e,i),{persistence:_({hideOnKeyDown:!0},i.persistence),id:d,appearance:_(b(_({},e.appearance),{compact:!0,skipFadeInAnimation:this.isInstantlyHovering()}),i.appearance)}),t)}},{key:"isInstantlyHovering",value:function(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}},{key:"onDidHideHover",value:function(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}}]),t}(Ru);KI=zI([UI(3,qb),UI(4,jI)],KI);var qI=Zm("contextViewService"),GI=Zm("contextMenuService"),ZI=Zm("keybindingService"),YI=function(){function e(){u(this,e),this._hooks=new Tu,this._pointerMoveCallback=null,this._onStopCallback=null}return h(e,[{key:"dispose",value:function(){this.stopMonitoring(!1),this._hooks.dispose()}},{key:"stopMonitoring",value:function(e,t){if(this.isMonitoring()){this._hooks.clear(),this._pointerMoveCallback=null;var n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}}},{key:"isMonitoring",value:function(){return!!this._pointerMoveCallback}},{key:"startMonitoring",value:function(e,t,n,i,r){var o=this;this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=i,this._onStopCallback=r;var a=e;try{e.setPointerCapture(t),this._hooks.add(Mu((function(){try{e.releasePointerCapture(t)}catch(e){}})))}catch(t){a=ep(e)}this._hooks.add(cp(a,rm.POINTER_MOVE,(function(e){e.buttons===n?(e.preventDefault(),o._pointerMoveCallback(e)):o.stopMonitoring(!0)}))),this._hooks.add(cp(a,rm.POINTER_UP,(function(e){return o.stopMonitoring(!0)})))}}]),e}();function QI(e,t,n){var i=null,r=null;if("function"==typeof n.value?(i="value",0!==(r=n.value).length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"==typeof n.get&&(i="get",r=n.get),!r)throw new Error("not supported");var o="$memoize$".concat(t);n[i]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,t)}),this[o]}}var XI,$I=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.Tap="-monaco-gesturetap",e.Change="-monaco-gesturechange",e.Start="-monaco-gesturestart",e.End="-monaco-gesturesend",e.Contextmenu="-monaco-gesturecontextmenu"}(XI||(XI={}));var JI=function(e){function t(){var e;return u(this,t),(e=l(this,t)).dispatched=!1,e.targets=new Hs,e.ignoreTargets=new Hs,e.activeTouches={},e.handle=null,e._lastSetTapCountTime=0,e._register(Au.runAndSubscribe(op,(function(t){var n=t.window,i=t.disposables;i.add(cp(n.document,"touchstart",(function(t){return e.onTouchStart(t)}),{passive:!1})),i.add(cp(n.document,"touchend",(function(t){return e.onTouchEnd(n,t)}))),i.add(cp(n.document,"touchmove",(function(t){return e.onTouchMove(t)}),{passive:!1}))}),{window:Fh,disposables:e._store})),e}return p(t,e),h(t,[{key:"dispose",value:function(){this.handle&&(this.handle.dispose(),this.handle=null),g(v(t.prototype),"dispose",this).call(this)}},{key:"onTouchStart",value:function(e){var t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(var n=0,i=e.targetTouches.length;n<i;n++){var r=e.targetTouches.item(n);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};var o=this.newGestureEvent(XI.Start,r.target);o.pageX=r.pageX,o.pageY=r.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}},{key:"onTouchEnd",value:function(e,n){for(var i,r=function(r,s){var l=n.changedTouches.item(r);if(!i.activeTouches.hasOwnProperty(String(l.identifier)))return console.warn("move of an UNKNOWN touch",l),"continue";var u=i.activeTouches[l.identifier],c=Date.now()-u.initialTimeStamp;if(c<t.HOLD_DELAY&&Math.abs(u.initialPageX-Jo(u.rollingPageX))<30&&Math.abs(u.initialPageY-Jo(u.rollingPageY))<30){var d=i.newGestureEvent(XI.Tap,u.initialTarget);d.pageX=Jo(u.rollingPageX),d.pageY=Jo(u.rollingPageY),i.dispatchEvent(d)}else if(c>=t.HOLD_DELAY&&Math.abs(u.initialPageX-Jo(u.rollingPageX))<30&&Math.abs(u.initialPageY-Jo(u.rollingPageY))<30){var h=i.newGestureEvent(XI.Contextmenu,u.initialTarget);h.pageX=Jo(u.rollingPageX),h.pageY=Jo(u.rollingPageY),i.dispatchEvent(h)}else if(1===a){var f=Jo(u.rollingPageX),g=Jo(u.rollingPageY),v=Jo(u.rollingTimestamps)-u.rollingTimestamps[0],p=f-u.rollingPageX[0],m=g-u.rollingPageY[0],y=x(i.targets).filter((function(e){return u.initialTarget instanceof Node&&e.contains(u.initialTarget)}));i.inertia(e,y,o,Math.abs(p)/v,p>0?1:-1,f,Math.abs(m)/v,m>0?1:-1,g)}i.dispatchEvent(i.newGestureEvent(XI.End,u.initialTarget)),delete i.activeTouches[l.identifier]},o=Date.now(),a=Object.keys(this.activeTouches).length,s=0,l=n.changedTouches.length;s<l;s++)i=this,r(s);this.dispatched&&(n.preventDefault(),n.stopPropagation(),this.dispatched=!1)}},{key:"newGestureEvent",value:function(e,t){var n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}},{key:"dispatchEvent",value:function(e){if(e.type===XI.Tap){var n=(new Date).getTime(),i=0;i=n-this._lastSetTapCountTime>t.CLEAR_TAP_COUNT_TIME?1:2,this._lastSetTapCountTime=n,e.tapCount=i}else e.type!==XI.Change&&e.type!==XI.Contextmenu||(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){var r=!0,o=!1,a=void 0;try{for(var s,l=this.ignoreTargets[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){if(s.value.contains(e.initialTarget))return}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}var u=[],c=!0,d=!1,h=void 0;try{for(var f,g=this.targets[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;if(v.contains(e.initialTarget)){for(var p=0,m=e.initialTarget;m&&m!==v;)p++,m=m.parentElement;u.push([p,v])}}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}u.sort((function(e,t){return e[0]-t[0]}));var y=!0,_=!1,b=void 0;try{for(var k,w=u[Symbol.iterator]();!(y=(k=w.next()).done);y=!0){var S=C(k.value,2);S[0];S[1].dispatchEvent(e),this.dispatched=!0}}catch(e){_=!0,b=e}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}}}},{key:"inertia",value:function(e,n,i,r,o,a,s,l,u){var c=this;this.handle=pp(e,(function(){var d=Date.now(),h=d-i,f=0,g=0,v=!0;r+=t.SCROLL_FRICTION*h,s+=t.SCROLL_FRICTION*h,r>0&&(v=!1,f=o*r*h),s>0&&(v=!1,g=l*s*h);var p=c.newGestureEvent(XI.Change);p.translationX=f,p.translationY=g,n.forEach((function(e){return e.dispatchEvent(p)})),v||c.inertia(e,n,d,r,o,a+f,s,l,u+g)}))}},{key:"onTouchMove",value:function(e){for(var t=Date.now(),n=0,i=e.changedTouches.length;n<i;n++){var r=e.changedTouches.item(n);if(this.activeTouches.hasOwnProperty(String(r.identifier))){var o=this.activeTouches[r.identifier],a=this.newGestureEvent(XI.Change,o.initialTarget);a.translationX=r.pageX-Jo(o.rollingPageX),a.translationY=r.pageY-Jo(o.rollingPageY),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(r.pageX),o.rollingPageY.push(r.pageY),o.rollingTimestamps.push(t)}else console.warn("end of an UNKNOWN touch",r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}],[{key:"addTarget",value:function(e){return t.isTouchDevice()?(t.INSTANCE||(t.INSTANCE=new t),Mu(t.INSTANCE.targets.push(e))):Ru.None}},{key:"ignoreTarget",value:function(e){return t.isTouchDevice()?(t.INSTANCE||(t.INSTANCE=new t),Mu(t.INSTANCE.ignoreTargets.push(e))):Ru.None}},{key:"isTouchDevice",value:function(){return"ontouchstart"in Fh||navigator.maxTouchPoints>0}}]),t}(Ru);JI.SCROLL_FRICTION=-.005,JI.HOLD_DELAY=700,JI.CLEAR_TAP_COUNT_TIME=400,$I([QI],JI,"isTouchDevice",null);var eE=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"onclick",value:function(e,t){this._register(cp(e,rm.CLICK,(function(n){return t(new lg(ep(e),n))})))}},{key:"onmousedown",value:function(e,t){this._register(cp(e,rm.MOUSE_DOWN,(function(n){return t(new lg(ep(e),n))})))}},{key:"onmouseover",value:function(e,t){this._register(cp(e,rm.MOUSE_OVER,(function(n){return t(new lg(ep(e),n))})))}},{key:"onmouseleave",value:function(e,t){this._register(cp(e,rm.MOUSE_LEAVE,(function(n){return t(new lg(ep(e),n))})))}},{key:"onkeydown",value:function(e,t){this._register(cp(e,rm.KEY_DOWN,(function(e){return t(new rg(e))})))}},{key:"onkeyup",value:function(e,t){this._register(cp(e,rm.KEY_UP,(function(e){return t(new rg(e))})))}},{key:"oninput",value:function(e,t){this._register(cp(e,rm.INPUT,t))}},{key:"onblur",value:function(e,t){this._register(cp(e,rm.BLUR,t))}},{key:"onfocus",value:function(e,t){this._register(cp(e,rm.FOCUS,t))}},{key:"ignoreGesture",value:function(e){return JI.ignoreTarget(e)}}]),t}(Ru),tE=11,nE=function(e){function t(e){var n,i;return u(this,t),(i=l(this,t))._onActivate=e.onActivate,i.bgDomNode=document.createElement("div"),i.bgDomNode.className="arrow-background",i.bgDomNode.style.position="absolute",i.bgDomNode.style.width=e.bgWidth+"px",i.bgDomNode.style.height=e.bgHeight+"px",void 0!==e.top&&(i.bgDomNode.style.top="0px"),void 0!==e.left&&(i.bgDomNode.style.left="0px"),void 0!==e.bottom&&(i.bgDomNode.style.bottom="0px"),void 0!==e.right&&(i.bgDomNode.style.right="0px"),i.domNode=document.createElement("div"),i.domNode.className=e.className,(n=i.domNode.classList).add.apply(n,x(ny.asClassNameArray(e.icon))),i.domNode.style.position="absolute",i.domNode.style.width="11px",i.domNode.style.height="11px",void 0!==e.top&&(i.domNode.style.top=e.top+"px"),void 0!==e.left&&(i.domNode.style.left=e.left+"px"),void 0!==e.bottom&&(i.domNode.style.bottom=e.bottom+"px"),void 0!==e.right&&(i.domNode.style.right=e.right+"px"),i._pointerMoveMonitor=i._register(new YI),i._register(hp(i.bgDomNode,rm.POINTER_DOWN,(function(e){return i._arrowPointerDown(e)}))),i._register(hp(i.domNode,rm.POINTER_DOWN,(function(e){return i._arrowPointerDown(e)}))),i._pointerdownRepeatTimer=i._register(new yp),i._pointerdownScheduleRepeatTimer=i._register(new wg),i}return p(t,e),h(t,[{key:"_arrowPointerDown",value:function(e){var t=this;if(e.target&&e.target instanceof Element){this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet((function(){t._pointerdownRepeatTimer.cancelAndSet((function(){return t._onActivate()}),1e3/24,ep(e))}),200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,(function(e){}),(function(){t._pointerdownRepeatTimer.cancel(),t._pointerdownScheduleRepeatTimer.cancel()})),e.preventDefault()}}}]),t}(eE),iE=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._visibility=e,r._visibleClassName=n,r._invisibleClassName=i,r._domNode=null,r._isVisible=!1,r._isNeeded=!1,r._rawShouldBeVisible=!1,r._shouldBeVisible=!1,r._revealTimer=r._register(new wg),r}return p(t,e),h(t,[{key:"setVisibility",value:function(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}},{key:"setShouldBeVisible",value:function(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}},{key:"_applyVisibilitySetting",value:function(){return 2!==this._visibility&&(3===this._visibility||this._rawShouldBeVisible)}},{key:"_updateShouldBeVisible",value:function(){var e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}},{key:"setIsNeeded",value:function(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}},{key:"setDomNode",value:function(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}},{key:"ensureVisibility",value:function(){this._isNeeded?this._shouldBeVisible?this._reveal():this._hide(!0):this._hide(!1)}},{key:"_reveal",value:function(){var e=this;this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet((function(){var t;null===(t=e._domNode)||void 0===t||t.setClassName(e._visibleClassName)}),0))}},{key:"_hide",value:function(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,null===(t=this._domNode)||void 0===t||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}]),t}(Ru),rE=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._lazyRender=e.lazyRender,n._host=e.host,n._scrollable=e.scrollable,n._scrollByPage=e.scrollByPage,n._scrollbarState=e.scrollbarState,n._visibilityController=n._register(new iE(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),n._visibilityController.setIsNeeded(n._scrollbarState.isNeeded()),n._pointerMoveMonitor=n._register(new YI),n._shouldRender=!0,n.domNode=Pm(document.createElement("div")),n.domNode.setAttribute("role","presentation"),n.domNode.setAttribute("aria-hidden","true"),n._visibilityController.setDomNode(n.domNode),n.domNode.setPosition("absolute"),n._register(cp(n.domNode.domNode,rm.POINTER_DOWN,(function(e){return n._domNodePointerDown(e)}))),n}return p(t,e),h(t,[{key:"_createArrow",value:function(e){var t=this._register(new nE(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}},{key:"_createSlider",value:function(e,t,n,i){var r=this;this.slider=Pm(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),"number"==typeof n&&this.slider.setWidth(n),"number"==typeof i&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(cp(this.slider.domNode,rm.POINTER_DOWN,(function(e){0===e.button&&(e.preventDefault(),r._sliderPointerDown(e))}))),this.onclick(this.slider.domNode,(function(e){e.leftButton&&e.stopPropagation()}))}},{key:"_onElementSize",value:function(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}},{key:"_onElementScrollSize",value:function(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}},{key:"_onElementScrollPosition",value:function(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}},{key:"beginReveal",value:function(){this._visibilityController.setShouldBeVisible(!0)}},{key:"beginHide",value:function(){this._visibilityController.setShouldBeVisible(!1)}},{key:"render",value:function(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}},{key:"_domNodePointerDown",value:function(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}},{key:"delegatePointerDown",value:function(e){var t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(e);n<=r&&r<=i?0===e.button&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}},{key:"_onPointerDown",value:function(e){var t,n;if(e.target===this.domNode.domNode&&"number"==typeof e.offsetX&&"number"==typeof e.offsetY)t=e.offsetX,n=e.offsetY;else{var i=xp(this.domNode.domNode);t=e.pageX-i.left,n=e.pageY-i.top}var r=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(r):this._scrollbarState.getDesiredScrollPositionFromOffset(r)),0===e.button&&(e.preventDefault(),this._sliderPointerDown(e))}},{key:"_sliderPointerDown",value:function(e){var t=this;if(e.target&&e.target instanceof Element){var n=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),r=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,(function(e){var o=t._sliderOrthogonalPointerPosition(e),a=Math.abs(o-i);if(ps&&a>140)t._setDesiredScrollPositionNow(r.getScrollPosition());else{var s=t._sliderPointerPosition(e)-n;t._setDesiredScrollPositionNow(r.getDesiredScrollPositionFromDelta(s))}}),(function(){t.slider.toggleClassName("active",!1),t._host.onDragEnd()})),this._host.onDragStart()}}},{key:"_setDesiredScrollPositionNow",value:function(e){var t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}},{key:"updateScrollbarSize",value:function(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}},{key:"isNeeded",value:function(){return this._scrollbarState.isNeeded()}}]),t}(eE),oE=function(){function e(t,n,i,r,o,a){u(this,e),this._scrollbarSize=Math.round(n),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(t),this._visibleSize=r,this._scrollSize=o,this._scrollPosition=a,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}return h(e,[{key:"clone",value:function(){return new e(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}},{key:"setVisibleSize",value:function(e){var t=Math.round(e);return this._visibleSize!==t&&(this._visibleSize=t,this._refreshComputedValues(),!0)}},{key:"setScrollSize",value:function(e){var t=Math.round(e);return this._scrollSize!==t&&(this._scrollSize=t,this._refreshComputedValues(),!0)}},{key:"setScrollPosition",value:function(e){var t=Math.round(e);return this._scrollPosition!==t&&(this._scrollPosition=t,this._refreshComputedValues(),!0)}},{key:"setScrollbarSize",value:function(e){this._scrollbarSize=Math.round(e)}},{key:"setOppositeScrollbarSize",value:function(e){this._oppositeScrollbarSize=Math.round(e)}},{key:"_refreshComputedValues",value:function(){var t=e._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=t.computedAvailableSize,this._computedIsNeeded=t.computedIsNeeded,this._computedSliderSize=t.computedSliderSize,this._computedSliderRatio=t.computedSliderRatio,this._computedSliderPosition=t.computedSliderPosition}},{key:"getArrowSize",value:function(){return this._arrowSize}},{key:"getScrollPosition",value:function(){return this._scrollPosition}},{key:"getRectangleLargeSize",value:function(){return this._computedAvailableSize}},{key:"getRectangleSmallSize",value:function(){return this._scrollbarSize}},{key:"isNeeded",value:function(){return this._computedIsNeeded}},{key:"getSliderSize",value:function(){return this._computedSliderSize}},{key:"getSliderPosition",value:function(){return this._computedSliderPosition}},{key:"getDesiredScrollPositionFromOffset",value:function(e){if(!this._computedIsNeeded)return 0;var t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}},{key:"getDesiredScrollPositionFromOffsetPaged",value:function(e){if(!this._computedIsNeeded)return 0;var t=e-this._arrowSize,n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}},{key:"getDesiredScrollPositionFromDelta",value:function(e){if(!this._computedIsNeeded)return 0;var t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}],[{key:"_computeValues",value:function(e,t,n,i,r){var o=Math.max(0,n-e),a=Math.max(0,o-2*t),s=i>0&&i>n;if(!s)return{computedAvailableSize:Math.round(o),computedIsNeeded:s,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};var l=Math.round(Math.max(20,Math.floor(n*a/i))),u=(a-l)/(i-n),c=r*u;return{computedAvailableSize:Math.round(o),computedIsNeeded:s,computedSliderSize:Math.round(l),computedSliderRatio:u,computedSliderPosition:Math.round(c)}}}]),e}(),aE=function(e){function t(e,n,i){var r;u(this,t);var o=e.getScrollDimensions(),a=e.getCurrentScrollPosition();if(r=l(this,t,[{lazyRender:n.lazyRender,host:i,scrollbarState:new oE(n.horizontalHasArrows?n.arrowSize:0,2===n.horizontal?0:n.horizontalScrollbarSize,2===n.vertical?0:n.verticalScrollbarSize,o.width,o.scrollWidth,a.scrollLeft),visibility:n.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:n.scrollByPage}]),n.horizontalHasArrows){var s=(n.arrowSize-tE)/2,c=(n.horizontalScrollbarSize-tE)/2;r._createArrow({className:"scra",icon:bd.scrollbarButtonLeft,top:c,left:s,bottom:void 0,right:void 0,bgWidth:n.arrowSize,bgHeight:n.horizontalScrollbarSize,onActivate:function(){return r._host.onMouseWheel(new ug(null,1,0))}}),r._createArrow({className:"scra",icon:bd.scrollbarButtonRight,top:c,left:void 0,bottom:void 0,right:s,bgWidth:n.arrowSize,bgHeight:n.horizontalScrollbarSize,onActivate:function(){return r._host.onMouseWheel(new ug(null,-1,0))}})}return r._createSlider(Math.floor((n.horizontalScrollbarSize-n.horizontalSliderSize)/2),0,void 0,n.horizontalSliderSize),r}return p(t,e),h(t,[{key:"_updateSlider",value:function(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}},{key:"_renderDomNode",value:function(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}},{key:"onDidScroll",value:function(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}},{key:"_pointerDownRelativePosition",value:function(e,t){return e}},{key:"_sliderPointerPosition",value:function(e){return e.pageX}},{key:"_sliderOrthogonalPointerPosition",value:function(e){return e.pageY}},{key:"_updateScrollbarSize",value:function(e){this.slider.setHeight(e)}},{key:"writeScrollPosition",value:function(e,t){e.scrollLeft=t}},{key:"updateOptions",value:function(e){this.updateScrollbarSize(2===e.horizontal?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(2===e.vertical?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}]),t}(rE),sE=function(e){function t(e,n,i){var r;u(this,t);var o=e.getScrollDimensions(),a=e.getCurrentScrollPosition();if(r=l(this,t,[{lazyRender:n.lazyRender,host:i,scrollbarState:new oE(n.verticalHasArrows?n.arrowSize:0,2===n.vertical?0:n.verticalScrollbarSize,0,o.height,o.scrollHeight,a.scrollTop),visibility:n.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:n.scrollByPage}]),n.verticalHasArrows){var s=(n.arrowSize-tE)/2,c=(n.verticalScrollbarSize-tE)/2;r._createArrow({className:"scra",icon:bd.scrollbarButtonUp,top:s,left:c,bottom:void 0,right:void 0,bgWidth:n.verticalScrollbarSize,bgHeight:n.arrowSize,onActivate:function(){return r._host.onMouseWheel(new ug(null,0,1))}}),r._createArrow({className:"scra",icon:bd.scrollbarButtonDown,top:void 0,left:c,bottom:s,right:void 0,bgWidth:n.verticalScrollbarSize,bgHeight:n.arrowSize,onActivate:function(){return r._host.onMouseWheel(new ug(null,0,-1))}})}return r._createSlider(0,Math.floor((n.verticalScrollbarSize-n.verticalSliderSize)/2),n.verticalSliderSize,void 0),r}return p(t,e),h(t,[{key:"_updateSlider",value:function(e,t){this.slider.setHeight(e),this.slider.setTop(t)}},{key:"_renderDomNode",value:function(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}},{key:"onDidScroll",value:function(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}},{key:"_pointerDownRelativePosition",value:function(e,t){return t}},{key:"_sliderPointerPosition",value:function(e){return e.pageY}},{key:"_sliderOrthogonalPointerPosition",value:function(e){return e.pageX}},{key:"_updateScrollbarSize",value:function(e){this.slider.setWidth(e)}},{key:"writeScrollPosition",value:function(e,t){e.scrollTop=t}},{key:"updateOptions",value:function(e){this.updateScrollbarSize(2===e.vertical?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}]),t}(rE),lE=function(){function e(t,n,i,r,o,a,s){u(this,e),this._forceIntegerValues=t,this._scrollStateBrand=void 0,this._forceIntegerValues&&(n|=0,i|=0,r|=0,o|=0,a|=0,s|=0),this.rawScrollLeft=r,this.rawScrollTop=s,n<0&&(n=0),r+n>i&&(r=i-n),r<0&&(r=0),o<0&&(o=0),s+o>a&&(s=a-o),s<0&&(s=0),this.width=n,this.scrollWidth=i,this.scrollLeft=r,this.height=o,this.scrollHeight=a,this.scrollTop=s}return h(e,[{key:"equals",value:function(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}},{key:"withScrollDimensions",value:function(t,n){return new e(this._forceIntegerValues,void 0!==t.width?t.width:this.width,void 0!==t.scrollWidth?t.scrollWidth:this.scrollWidth,n?this.rawScrollLeft:this.scrollLeft,void 0!==t.height?t.height:this.height,void 0!==t.scrollHeight?t.scrollHeight:this.scrollHeight,n?this.rawScrollTop:this.scrollTop)}},{key:"withScrollPosition",value:function(t){return new e(this._forceIntegerValues,this.width,this.scrollWidth,void 0!==t.scrollLeft?t.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,void 0!==t.scrollTop?t.scrollTop:this.rawScrollTop)}},{key:"createScrollEvent",value:function(e,t){var n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,s=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:r,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:s}}}]),e}(),uE=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._scrollableBrand=void 0,n._onScroll=n._register(new Zu),n.onScroll=n._onScroll.event,n._smoothScrollDuration=e.smoothScrollDuration,n._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,n._state=new lE(e.forceIntegerValues,0,0,0,0,0,0),n._smoothScrolling=null,n}return p(t,e),h(t,[{key:"dispose",value:function(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),g(v(t.prototype),"dispose",this).call(this)}},{key:"setSmoothScrollDuration",value:function(e){this._smoothScrollDuration=e}},{key:"validateScrollPosition",value:function(e){return this._state.withScrollPosition(e)}},{key:"getScrollDimensions",value:function(){return this._state}},{key:"setScrollDimensions",value:function(e,t){var n,i=this._state.withScrollDimensions(e,t);this._setState(i,Boolean(this._smoothScrolling)),null===(n=this._smoothScrolling)||void 0===n||n.acceptScrollDimensions(this._state)}},{key:"getFutureScrollPosition",value:function(){return this._smoothScrolling?this._smoothScrolling.to:this._state}},{key:"getCurrentScrollPosition",value:function(){return this._state}},{key:"setScrollPositionNow",value:function(e){var t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}},{key:"setScrollPositionSmooth",value:function(e,t){var n=this;if(0===this._smoothScrollDuration)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:void 0===e.scrollLeft?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:void 0===e.scrollTop?this._smoothScrolling.to.scrollTop:e.scrollTop};var i,r=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===r.scrollLeft&&this._smoothScrolling.to.scrollTop===r.scrollTop)return;i=t?new hE(this._smoothScrolling.from,r,this._smoothScrolling.startTime,this._smoothScrolling.duration):this._smoothScrolling.combine(this._state,r,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{var o=this._state.withScrollPosition(e);this._smoothScrolling=hE.start(this._state,o,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((function(){n._smoothScrolling&&(n._smoothScrolling.animationFrameDisposable=null,n._performSmoothScrolling())}))}},{key:"hasPendingScrollAnimation",value:function(){return Boolean(this._smoothScrolling)}},{key:"_performSmoothScrolling",value:function(){var e=this;if(this._smoothScrolling){var t=this._smoothScrolling.tick(),n=this._state.withScrollPosition(t);if(this._setState(n,!0),this._smoothScrolling)return t.isDone?(this._smoothScrolling.dispose(),void(this._smoothScrolling=null)):void(this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((function(){e._smoothScrolling&&(e._smoothScrolling.animationFrameDisposable=null,e._performSmoothScrolling())})))}}},{key:"_setState",value:function(e,t){var n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}]),t}(Ru),cE=function e(t,n,i){u(this,e),this.scrollLeft=t,this.scrollTop=n,this.isDone=i};function dE(e,t){var n=t-e;return function(t){return e+n*function(e){return 1-function(e){return Math.pow(e,3)}(1-e)}(t)}}var hE=function(){function e(t,n,i,r){u(this,e),this.from=t,this.to=n,this.duration=r,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}return h(e,[{key:"_initAnimations",value:function(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}},{key:"_initAnimation",value:function(e,t,n){var i,r;return Math.abs(e-t)>2.5*n?(e<t?(i=e+.75*n,r=t-.75*n):(i=e-.75*n,r=t+.75*n),function(e,t,n){return function(i){return i<n?e(i/n):t((i-n)/(1-n))}}(dE(e,i),dE(r,t),.33)):dE(e,t)}},{key:"dispose",value:function(){null!==this.animationFrameDisposable&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}},{key:"acceptScrollDimensions",value:function(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}},{key:"tick",value:function(){return this._tick(Date.now())}},{key:"_tick",value:function(e){var t=(e-this.startTime)/this.duration;if(t<1){var n=this.scrollLeft(t),i=this.scrollTop(t);return new cE(n,i,!1)}return new cE(this.to.scrollLeft,this.to.scrollTop,!0)}},{key:"combine",value:function(t,n,i){return e.start(t,n,i)}}],[{key:"start",value:function(t,n,i){return i+=10,new e(t,n,Date.now()-10,i)}}]),e}();var fE=function e(t,n,i){u(this,e),this.timestamp=t,this.deltaX=n,this.deltaY=i,this.score=0},gE=function(){function e(){u(this,e),this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}return h(e,[{key:"isPhysicalMouseWheel",value:function(){if(-1===this._front&&-1===this._rear)return!1;for(var e=1,t=0,n=1,i=this._rear;;){var r=i===this._front?e:Math.pow(2,-n);if(e-=r,t+=this._memory[i].score*r,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}return t<=.5}},{key:"acceptStandardWheelEvent",value:function(e){if(Uf){var t=function(e){return Wf.INSTANCE.getZoomFactor(e)}(ep(e.browserEvent));this.accept(Date.now(),e.deltaX*t,e.deltaY*t)}else this.accept(Date.now(),e.deltaX,e.deltaY)}},{key:"accept",value:function(e,t,n){var i=null,r=new fE(e,t,n);-1===this._front&&-1===this._rear?(this._memory[0]=r,this._front=0,this._rear=0):(i=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r),r.score=this._computeScore(r,i)}},{key:"_computeScore",value:function(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;var n=.5;if(this._isAlmostInt(e.deltaX)&&this._isAlmostInt(e.deltaY)||(n+=.25),t){var i=Math.abs(e.deltaX),r=Math.abs(e.deltaY),o=Math.abs(t.deltaX),a=Math.abs(t.deltaY),s=Math.max(Math.min(i,o),1),l=Math.max(Math.min(r,a),1),u=Math.max(i,o),c=Math.max(r,a);u%s==0&&c%l==0&&(n-=.5)}return Math.min(Math.max(n,0),1)}},{key:"_isAlmostInt",value:function(e){return Math.abs(Math.round(e)-e)<.01}}]),e}();gE.INSTANCE=new gE;var vE=function(e){function t(e,n,i){var r;u(this,t),(r=l(this,t))._onScroll=r._register(new Zu),r.onScroll=r._onScroll.event,r._onWillScroll=r._register(new Zu),e.style.overflow="hidden",r._options=function(e){var t={lazyRender:void 0!==e.lazyRender&&e.lazyRender,className:void 0!==e.className?e.className:"",useShadows:void 0===e.useShadows||e.useShadows,handleMouseWheel:void 0===e.handleMouseWheel||e.handleMouseWheel,flipAxes:void 0!==e.flipAxes&&e.flipAxes,consumeMouseWheelIfScrollbarIsNeeded:void 0!==e.consumeMouseWheelIfScrollbarIsNeeded&&e.consumeMouseWheelIfScrollbarIsNeeded,alwaysConsumeMouseWheel:void 0!==e.alwaysConsumeMouseWheel&&e.alwaysConsumeMouseWheel,scrollYToX:void 0!==e.scrollYToX&&e.scrollYToX,mouseWheelScrollSensitivity:void 0!==e.mouseWheelScrollSensitivity?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:void 0!==e.fastScrollSensitivity?e.fastScrollSensitivity:5,scrollPredominantAxis:void 0===e.scrollPredominantAxis||e.scrollPredominantAxis,mouseWheelSmoothScroll:void 0===e.mouseWheelSmoothScroll||e.mouseWheelSmoothScroll,arrowSize:void 0!==e.arrowSize?e.arrowSize:11,listenOnDomNode:void 0!==e.listenOnDomNode?e.listenOnDomNode:null,horizontal:void 0!==e.horizontal?e.horizontal:1,horizontalScrollbarSize:void 0!==e.horizontalScrollbarSize?e.horizontalScrollbarSize:10,horizontalSliderSize:void 0!==e.horizontalSliderSize?e.horizontalSliderSize:0,horizontalHasArrows:void 0!==e.horizontalHasArrows&&e.horizontalHasArrows,vertical:void 0!==e.vertical?e.vertical:1,verticalScrollbarSize:void 0!==e.verticalScrollbarSize?e.verticalScrollbarSize:10,verticalHasArrows:void 0!==e.verticalHasArrows&&e.verticalHasArrows,verticalSliderSize:void 0!==e.verticalSliderSize?e.verticalSliderSize:0,scrollByPage:void 0!==e.scrollByPage&&e.scrollByPage};t.horizontalSliderSize=void 0!==e.horizontalSliderSize?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize=void 0!==e.verticalSliderSize?e.verticalSliderSize:t.verticalScrollbarSize,ms&&(t.className+=" mac");return t}(n),r._scrollable=i,r._register(r._scrollable.onScroll((function(e){r._onWillScroll.fire(e),r._onDidScroll(e),r._onScroll.fire(e)})));var o={onMouseWheel:function(e){return r._onMouseWheel(e)},onDragStart:function(){return r._onDragStart()},onDragEnd:function(){return r._onDragEnd()}};return r._verticalScrollbar=r._register(new sE(r._scrollable,r._options,o)),r._horizontalScrollbar=r._register(new aE(r._scrollable,r._options,o)),r._domNode=document.createElement("div"),r._domNode.className="monaco-scrollable-element "+r._options.className,r._domNode.setAttribute("role","presentation"),r._domNode.style.position="relative",r._domNode.style.overflow="hidden",r._domNode.appendChild(e),r._domNode.appendChild(r._horizontalScrollbar.domNode.domNode),r._domNode.appendChild(r._verticalScrollbar.domNode.domNode),r._options.useShadows?(r._leftShadowDomNode=Pm(document.createElement("div")),r._leftShadowDomNode.setClassName("shadow"),r._domNode.appendChild(r._leftShadowDomNode.domNode),r._topShadowDomNode=Pm(document.createElement("div")),r._topShadowDomNode.setClassName("shadow"),r._domNode.appendChild(r._topShadowDomNode.domNode),r._topLeftShadowDomNode=Pm(document.createElement("div")),r._topLeftShadowDomNode.setClassName("shadow"),r._domNode.appendChild(r._topLeftShadowDomNode.domNode)):(r._leftShadowDomNode=null,r._topShadowDomNode=null,r._topLeftShadowDomNode=null),r._listenOnDomNode=r._options.listenOnDomNode||r._domNode,r._mouseWheelToDispose=[],r._setListeningToMouseWheel(r._options.handleMouseWheel),r.onmouseover(r._listenOnDomNode,(function(e){return r._onMouseOver(e)})),r.onmouseleave(r._listenOnDomNode,(function(e){return r._onMouseLeave(e)})),r._hideTimeout=r._register(new wg),r._isDragging=!1,r._mouseIsOver=!1,r._shouldRender=!0,r._revealOnScroll=!0,r}return p(t,e),h(t,[{key:"options",get:function(){return this._options}},{key:"dispose",value:function(){this._mouseWheelToDispose=Iu(this._mouseWheelToDispose),g(v(t.prototype),"dispose",this).call(this)}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getOverviewRulerLayoutInfo",value:function(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}},{key:"delegateVerticalScrollbarPointerDown",value:function(e){this._verticalScrollbar.delegatePointerDown(e)}},{key:"getScrollDimensions",value:function(){return this._scrollable.getScrollDimensions()}},{key:"setScrollDimensions",value:function(e){this._scrollable.setScrollDimensions(e,!1)}},{key:"updateClassName",value:function(e){this._options.className=e,ms&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}},{key:"updateOptions",value:function(e){void 0!==e.handleMouseWheel&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),void 0!==e.mouseWheelScrollSensitivity&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),void 0!==e.fastScrollSensitivity&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),void 0!==e.scrollPredominantAxis&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),void 0!==e.horizontal&&(this._options.horizontal=e.horizontal),void 0!==e.vertical&&(this._options.vertical=e.vertical),void 0!==e.horizontalScrollbarSize&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),void 0!==e.verticalScrollbarSize&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),void 0!==e.scrollByPage&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}},{key:"delegateScrollFromMouseWheelEvent",value:function(e){this._onMouseWheel(new ug(e))}},{key:"_setListeningToMouseWheel",value:function(e){var t=this;if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Iu(this._mouseWheelToDispose),e)){this._mouseWheelToDispose.push(cp(this._listenOnDomNode,rm.MOUSE_WHEEL,(function(e){t._onMouseWheel(new ug(e))}),{passive:!1}))}}},{key:"_onMouseWheel",value:function(e){var t;if(!(null===(t=e.browserEvent)||void 0===t?void 0:t.defaultPrevented)){var n=gE.INSTANCE;n.acceptStandardWheelEvent(e);var i=!1;if(e.deltaY||e.deltaX){var r,o=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;if(this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+o===0?a=o=0:Math.abs(o)>=Math.abs(a)?a=0:o=0),this._options.flipAxes)o=(r=[a,o])[0],a=r[1];var s=!ms&&e.browserEvent&&e.browserEvent.shiftKey;!this._options.scrollYToX&&!s||a||(a=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(a*=this._options.fastScrollSensitivity,o*=this._options.fastScrollSensitivity);var l=this._scrollable.getFutureScrollPosition(),u={};if(o){var c=50*o,d=l.scrollTop-(c<0?Math.floor(c):Math.ceil(c));this._verticalScrollbar.writeScrollPosition(u,d)}if(a){var h=50*a,f=l.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(u,f)}if(u=this._scrollable.validateScrollPosition(u),l.scrollLeft!==u.scrollLeft||l.scrollTop!==u.scrollTop)this._options.mouseWheelSmoothScroll&&n.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(u):this._scrollable.setScrollPositionNow(u),i=!0}var g=i;!g&&this._options.alwaysConsumeMouseWheel&&(g=!0),!g&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(g=!0),g&&(e.preventDefault(),e.stopPropagation())}}},{key:"_onDidScroll",value:function(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}},{key:"renderNow",value:function(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}},{key:"_render",value:function(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){var e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",r=t?" top":"",o=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName("shadow".concat(i)),this._topShadowDomNode.setClassName("shadow".concat(r)),this._topLeftShadowDomNode.setClassName("shadow".concat(o).concat(r).concat(i))}}},{key:"_onDragStart",value:function(){this._isDragging=!0,this._reveal()}},{key:"_onDragEnd",value:function(){this._isDragging=!1,this._hide()}},{key:"_onMouseLeave",value:function(e){this._mouseIsOver=!1,this._hide()}},{key:"_onMouseOver",value:function(e){this._mouseIsOver=!0,this._reveal()}},{key:"_reveal",value:function(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}},{key:"_hide",value:function(){this._mouseIsOver||this._isDragging||(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}},{key:"_scheduleHide",value:function(){var e=this;this._mouseIsOver||this._isDragging||this._hideTimeout.cancelAndSet((function(){return e._hide()}),500)}}]),t}(eE),pE=function(e){function t(e,n){var i;u(this,t),(n=n||{}).mouseWheelSmoothScroll=!1;var r=new uE({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:function(t){return pp(ep(e),t)}});return(i=l(this,t,[e,n,r]))._register(r),i}return p(t,e),h(t,[{key:"setScrollPosition",value:function(e){this._scrollable.setScrollPositionNow(e)}}]),t}(vE),mE=function(e){function t(e,n,i){return u(this,t),l(this,t,[e,n,i])}return p(t,e),h(t,[{key:"setScrollPosition",value:function(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}},{key:"getScrollPosition",value:function(){return this._scrollable.getCurrentScrollPosition()}}]),t}(vE),yE=function(e){function t(e,n){var i;u(this,t),(n=n||{}).mouseWheelSmoothScroll=!1;var r=new uE({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:function(t){return pp(ep(e),t)}});return(i=l(this,t,[e,n,r]))._register(r),i._element=e,i._register(i.onScroll((function(e){e.scrollTopChanged&&(i._element.scrollTop=e.scrollTop),e.scrollLeftChanged&&(i._element.scrollLeft=e.scrollLeft)}))),i.scanDomNode(),i}return p(t,e),h(t,[{key:"setScrollPosition",value:function(e){this._scrollable.setScrollPositionNow(e)}},{key:"getScrollPosition",value:function(){return this._scrollable.getCurrentScrollPosition()}},{key:"scanDomNode",value:function(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}]),t}(vE);var _E=gm,bE=function(e){function t(){var e;return u(this,t),(e=l(this,t)).containerDomNode=document.createElement("div"),e.containerDomNode.className="monaco-hover",e.containerDomNode.tabIndex=0,e.containerDomNode.setAttribute("role","tooltip"),e.contentsDomNode=document.createElement("div"),e.contentsDomNode.className="monaco-hover-content",e.scrollbar=e._register(new yE(e.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),e.containerDomNode.appendChild(e.scrollbar.getDomNode()),e}return p(t,e),h(t,[{key:"onContentsChanged",value:function(){this.scrollbar.scanDomNode()}}]),t}(Ru),kE=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t)).actionLabel=n.label,r.actionKeybindingLabel=i,r.actionContainer=lm(e,_E("div.action-container")),r.actionContainer.setAttribute("tabindex","0"),r.action=lm(r.actionContainer,_E("a.action")),r.action.setAttribute("role","button"),n.iconClass&&lm(r.action,_E("span.icon.".concat(n.iconClass))),lm(r.action,_E("span")).textContent=i?"".concat(n.label," (").concat(i,")"):n.label,r._store.add(new CE(r.actionContainer,n.run)),r._store.add(new SE(r.actionContainer,n.run,[3,10])),r.setEnabled(!0),r}return p(t,e),h(t,[{key:"setEnabled",value:function(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}],[{key:"render",value:function(e,n,i){return new t(e,n,i)}}]),t}(Ru);function wE(e,t){return e&&t?Xa("acessibleViewHint","Inspect this in the accessible view with {0}.",t):e?Xa("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}var CE=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._register(cp(e,rm.CLICK,(function(t){t.stopPropagation(),t.preventDefault(),n(e)}))),i}return p(t,e),t}(Ru),SE=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._register(cp(e,rm.KEY_DOWN,(function(t){var r=new rg(t);i.some((function(e){return r.equals(e)}))&&(t.stopPropagation(),t.preventDefault(),n(e))}))),r}return p(t,e),t}(Ru),xE=Zm("openerService");var LE=function(){function e(t,n,i){var r=this;u(this,e);var o=function(e){return r.emitter.fire(e)};this.emitter=new Zu({onWillAddFirstListener:function(){return t.addEventListener(n,o,i)},onDidRemoveLastListener:function(){return t.removeEventListener(n,o,i)}})}return h(e,[{key:"event",get:function(){return this.emitter.event}},{key:"dispose",value:function(){this.emitter.dispose()}}]),e}();function DE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=NE(t);return EE(n,function(e,t){var n={type:1,children:[]},i=0,r=n,o=[],a=new IE(e);for(;!a.eos();){var s=a.next(),l="\\"===s&&0!==TE(a.peek(),t);if(l&&(s=a.next()),!l&&ME(s,t)&&s===a.peek()){a.advance(),2===r.type&&(r=o.pop());var u=TE(s,t);if(r.type===u||5===r.type&&6===u)r=o.pop();else{var c={type:u,children:[]};5===u&&(c.index=i,i++),r.children.push(c),o.push(r),r=c}}else if("\n"===s)2===r.type&&(r=o.pop()),r.children.push({type:8});else if(2!==r.type){var d={type:2,content:s};r.children.push(d),o.push(r),r=d}else r.content+=s}2===r.type&&(r=o.pop());return n}(e,!!t.renderCodeSegments),t.actionHandler,t.renderCodeSegments),n}function NE(e){var t=e.inline?"span":"div",n=document.createElement(t);return e.className&&(n.className=e.className),n}var IE=function(){function e(t){u(this,e),this.source=t,this.index=0}return h(e,[{key:"eos",value:function(){return this.index>=this.source.length}},{key:"next",value:function(){var e=this.peek();return this.advance(),e}},{key:"peek",value:function(){return this.source[this.index]}},{key:"advance",value:function(){this.index++}}]),e}();function EE(e,t,n,i){var r;if(2===t.type)r=document.createTextNode(t.content||"");else if(3===t.type)r=document.createElement("b");else if(4===t.type)r=document.createElement("i");else if(7===t.type&&i)r=document.createElement("code");else if(5===t.type&&n){var o=document.createElement("a");n.disposables.add(hp(o,"click",(function(e){n.callback(String(t.index),e)}))),r=o}else 8===t.type?r=document.createElement("br"):1===t.type&&(r=e);r&&e!==r&&e.appendChild(r),r&&Array.isArray(t.children)&&t.children.forEach((function(e){EE(r,e,n,i)}))}function ME(e,t){return 0!==TE(e,t)}function TE(e,t){switch(e){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return t?7:0;default:return 0}}var RE=new RegExp("(\\\\)?\\$\\((".concat(ny.iconNameExpression,"(?:").concat(ny.iconModifierExpression,")?)\\)"),"g");function AE(e){for(var t,n=new Array,i=0,r=0;null!==(t=RE.exec(e));){i<(r=t.index||0)&&n.push(e.substring(i,r)),i=(t.index||0)+t[0].length;var o=C(t,3),a=o[1],s=o[2];n.push(a?"$(".concat(s,")"):PE({id:s}))}return i<e.length&&n.push(e.substring(i)),n}function PE(e){var t,n=gm("span");return(t=n.classList).add.apply(t,x(ny.asClassNameArray(e))),n}function OE(e){var t=function(e){if(FE=0,BE(e,HE,4352),FE>0)return WE.subarray(0,FE);if(BE(e,VE,4449),FE>0)return WE.subarray(0,FE);if(BE(e,zE,4520),FE>0)return WE.subarray(0,FE);if(BE(e,UE,12593),FE)return WE.subarray(0,FE);if(e>=44032&&e<=55203){var t=e-44032,n=t%588,i=Math.floor(t/588),r=Math.floor(n/28),o=n%28-1;if(i<HE.length?BE(i,HE,0):4352+i-12593<UE.length&&BE(4352+i,UE,12593),r<VE.length?BE(r,VE,0):4449+r-12593<UE.length&&BE(4449+r-12593,UE,12593),o>=0&&(o<zE.length?BE(o,zE,0):4520+o-12593<UE.length&&BE(4520+o-12593,UE,12593)),FE>0)return WE.subarray(0,FE)}return}(e);if(t&&t.length>0)return new Uint32Array(t)}var FE=0,WE=new Uint32Array(10);function BE(e,t,n){e>=n&&e<n+t.length&&function(e){if(0===e)return;WE[FE++]=255&e,e>>8&&(WE[FE++]=e>>8&255);e>>16&&(WE[FE++]=e>>16&255)}(t[e-n])}var HE=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),VE=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),zE=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),UE=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function jE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){for(var i=0,r=t.length;i<r;i++){var o=t[i](e,n);if(o)return o}return null}}qE.bind(void 0,!1);var KE=qE.bind(void 0,!0);function qE(e,t,n){return!n||n.length<t.length?null:(e?cf(n,t):0===n.indexOf(t))?t.length>0?[{start:0,end:t.length}]:[]:null}function GE(e,t){var n=t.toLowerCase().indexOf(e.toLowerCase());return-1===n?null:[{start:n,end:n+e.length}]}function ZE(e,t){return YE(e.toLowerCase(),t.toLowerCase(),0,0)}function YE(e,t,n,i){if(n===e.length)return[];if(i===t.length)return null;if(e[n]===t[i]){var r;return(r=YE(e,t,n+1,i+1))?aM({start:i,end:i+1},r):null}return YE(e,t,n,i+1)}function QE(e){return 97<=e&&e<=122}function XE(e){return 65<=e&&e<=90}function $E(e){return 48<=e&&e<=57}function JE(e){return 32===e||9===e||10===e||13===e}var eM=new Set;function tM(e){return JE(e)||eM.has(e)}function nM(e,t){return e===t||tM(e)&&tM(t)}"()[]{}<>`'\"-/;:,.?!".split("").forEach((function(e){return eM.add(e.charCodeAt(0))}));var iM=new Map;function rM(e){if(iM.has(e))return iM.get(e);var t,n=OE(e);return n&&(t=n),iM.set(e,t),t}function oM(e){return QE(e)||XE(e)||$E(e)}function aM(e,t){return 0===t.length?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function sM(e,t){for(var n=t;n<e.length;n++){var i=e.charCodeAt(n);if(XE(i)||$E(i)||n>0&&!oM(e.charCodeAt(n-1)))return n}return e.length}function lM(e,t,n,i){if(n===e.length)return[];if(i===t.length)return null;if(e[n]!==t[i].toLowerCase())return null;var r=null,o=i+1;for(r=lM(e,t,n+1,i+1);!r&&(o=sM(t,o))<t.length;)r=lM(e,t,n+1,o),o++;return null===r?null:aM({start:i,end:i+1},r)}function uM(e,t){if(!t)return null;if(0===(t=t.trim()).length)return null;if(!function(e){for(var t=0,n=0,i=0,r=0,o=0;o<e.length;o++)XE(i=e.charCodeAt(o))&&t++,QE(i)&&n++,JE(i)&&r++;return 0!==t&&0!==n||0!==r?t<=5:e.length<=30}(e))return null;t.length>60&&(t=t.substring(0,60));var n=function(e){for(var t=0,n=0,i=0,r=0,o=0,a=0;a<e.length;a++)XE(o=e.charCodeAt(a))&&t++,QE(o)&&n++,oM(o)&&i++,$E(o)&&r++;return{upperPercent:t/e.length,lowerPercent:n/e.length,alphaPercent:i/e.length,numericPercent:r/e.length}}(t);if(!function(e){var t=e.upperPercent,n=e.lowerPercent,i=e.alphaPercent,r=e.numericPercent;return n>.2&&t<.8&&i>.6&&r<.2}(n)){if(!function(e){var t=e.upperPercent;return 0===e.lowerPercent&&t>.6}(n))return null;t=t.toLowerCase()}var i=null,r=0;for(e=e.toLowerCase();r<t.length&&null===(i=lM(e,t,0,r));)r=sM(t,r+1);return i}function cM(e,t,n,i,r){var o=0;if(n===e.length)return[];if(i===t.length)return null;if(!nM(e.charCodeAt(n),t.charCodeAt(i))){var a=rM(e.charCodeAt(n));if(!a)return null;for(var s=0;s<a.length;s++)if(!nM(a[s],t.charCodeAt(i+s)))return null;o+=a.length-1}var l=null,u=i+o+1;if(l=cM(e,t,n+1,u,r),!r)for(;!l&&(u=dM(t,u))<t.length;)l=cM(e,t,n+1,u,r),u++;if(!l)return null;if(e.charCodeAt(n)!==t.charCodeAt(i)){var c=rM(e.charCodeAt(n));if(!c)return l;for(var d=0;d<c.length;d++)if(c[d]!==t.charCodeAt(i+d))return l}return aM({start:i,end:i+o+1},l)}function dM(e,t){for(var n=t;n<e.length;n++)if(tM(e.charCodeAt(n))||n>0&&tM(e.charCodeAt(n-1)))return n;return e.length}var hM=jE(KE,uM,GE),fM=jE(KE,uM,ZE),gM=new pw(1e4);function vM(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e||"string"!=typeof t)return null;var i=gM.get(e);i||(i=new RegExp(function(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}(e),"i"),gM.set(e,i));var r=i.exec(t);return r?[{start:r.index,end:r.index+r[0].length}]:n?fM(e,t):hM(e,t)}function pM(e,t){var n=TM(e,e.toLowerCase(),0,t,t.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return n?yM(n):null}function mM(e,t,n,i,r,o){for(var a=Math.min(13,e.length);n<a;n++){var s=TM(e,t,n,i,r,o,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(s)return s}return[0,o]}function yM(e){if(void 0===e)return[];for(var t=[],n=e[1],i=e.length-1;i>1;i--){var r=e[i]+n,o=t[t.length-1];o&&o.end===r?o.end=r+1:t.push({start:r,end:r+1})}return t}var _M=128;function bM(){for(var e=[],t=[],n=0;n<=_M;n++)t[n]=0;for(var i=0;i<=_M;i++)e.push(t.slice(0));return e}function kM(e){for(var t=[],n=0;n<=e;n++)t[n]=0;return t}var wM,CM=kM(2*_M),SM=kM(2*_M),xM=bM(),LM=bM(),DM=bM();function NM(e,t){if(t<0||t>=e.length)return!1;var n=e.codePointAt(t);switch(n){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!Nf(n)}}function IM(e,t){if(t<0||t>=e.length)return!1;switch(e.charCodeAt(t)){case 32:case 9:return!0;default:return!1}}function EM(e,t,n){return t[e]!==n[e]}!function(e){e.Default=[-100,0],e.isDefault=function(e){return!e||2===e.length&&-100===e[0]&&0===e[1]}}(wM||(wM={}));var MM=function e(t,n){u(this,e),this.firstMatchCanBeWeak=t,this.boostFullMatch=n};function TM(e,t,n,i,r,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:MM.default,s=e.length>_M?_M:e.length,l=i.length>_M?_M:i.length;if(!(n>=s||o>=l||s-n>l-o)&&function(e,t,n,i,r,o){for(var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];t<n&&r<o;)e[t]===i[r]&&(a&&(CM[t]=r),t+=1),r+=1;return t===n}(t,n,s,r,o,l,!0)){!function(e,t,n,i,r,o){var a=e-1,s=t-1;for(;a>=n&&s>=i;)r[a]===o[s]&&(SM[a]=s,a--),s--}(s,l,n,o,t,r);var u=1,c=1,d=n,h=o,f=[!1];for(u=1,d=n;d<s;u++,d++){var g=CM[d],v=SM[d],p=d+1<s?SM[d+1]:l;for(c=g-o+1,h=g;h<p;c++,h++){var m=Number.MIN_SAFE_INTEGER,y=!1;h<=v&&(m=RM(e,t,d,n,i,r,h,l,o,0===xM[u-1][c-1],f));var _=0;m!==Number.MAX_SAFE_INTEGER&&(y=!0,_=m+LM[u-1][c-1]);var b=h>g,k=b?LM[u][c-1]+(xM[u][c-1]>0?-5:0):0,w=h>g+1&&xM[u][c-1]>0,C=w?LM[u][c-2]+(xM[u][c-2]>0?-5:0):0;if(w&&(!b||C>=k)&&(!y||C>=_))LM[u][c]=C,DM[u][c]=3,xM[u][c]=0;else if(b&&(!y||k>=_))LM[u][c]=k,DM[u][c]=2,xM[u][c]=0;else{if(!y)throw new Error("not possible");LM[u][c]=_,DM[u][c]=1,xM[u][c]=xM[u-1][c-1]+1}}}if(f[0]||a.firstMatchCanBeWeak){u--,c--;for(var S=[LM[u][c],o],x=0,L=0;u>=1;){var D=c;do{var N=DM[u][D];if(3===N)D-=2;else{if(2!==N)break;D-=1}}while(D>=1);x>1&&t[n+u-1]===r[o+c-1]&&!EM(D+o-1,i,r)&&x+1>xM[u][D]&&(D=c),D===c?x++:x=1,L||(L=D),u--,c=D-1,S.push(c)}l-o===s&&a.boostFullMatch&&(S[0]+=2);var I=L-s;return S[0]-=I,S}}}function RM(e,t,n,i,r,o,a,s,l,u,c){if(t[n]!==o[a])return Number.MIN_SAFE_INTEGER;var d=1,h=!1;return a===n-i?d=e[n]===r[a]?7:5:!EM(a,r,o)||0!==a&&EM(a-1,r,o)?!NM(o,a)||0!==a&&NM(o,a-1)?(NM(o,a-1)||IM(o,a-1))&&(d=5,h=!0):d=5:(d=e[n]===r[a]?7:5,h=!0),d>1&&n===i&&(c[0]=!0),h||(h=EM(a,r,o)||NM(o,a-1)||IM(o,a-1)),n===i?a>l&&(d-=h?3:5):d+=u?h?2:0:h?0:1,a+1===s&&(d-=h?3:5),d}function AM(e,t,n,i,r,o,a){return function(e,t,n,i,r,o,a,s){var l=TM(e,t,n,i,r,o,s);if(l&&!a)return l;if(e.length>=3)for(var u=Math.min(7,e.length-1),c=n+1;c<u;c++){var d=PM(e,c);if(d){var h=TM(d,d.toLowerCase(),n,i,r,o,s);h&&(h[0]-=3,(!l||h[0]>l[0])&&(l=h))}}return l}(e,t,n,i,r,o,!0,a)}function PM(e,t){if(!(t+1>=e.length)){var n=e[t],i=e[t+1];if(n!==i)return e.slice(0,t)+i+n+e.slice(t+2)}}MM.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};var OM=new RegExp("\\$\\(".concat(ny.iconNameExpression,"(?:").concat(ny.iconModifierExpression,")?\\)"),"g"),FM=new RegExp("(\\\\)?".concat(OM.source),"g");var WM=new RegExp("\\\\".concat(OM.source),"g");var BM=new RegExp("(\\s)?(\\\\)?".concat(OM.source,"(\\s)?"),"g");function HM(e){return-1===e.indexOf("$(")?e:e.replace(BM,(function(e,t,n,i){return n?e:t||i||""}))}var VM=new RegExp("\\$\\(".concat(ny.iconNameCharacter,"+\\)"),"g");function zM(e){VM.lastIndex=0;for(var t="",n=[],i=0;;){var r=VM.lastIndex,o=VM.exec(e),a=e.substring(r,null==o?void 0:o.index);if(a.length>0){t+=a;for(var s=0;s<a.length;s++)n.push(i)}if(!o)break;i+=o[0].length}return{text:t,iconOffsets:n}}function UM(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.text,r=t.iconOffsets;if(!r||0===r.length)return vM(e,i,n);var o=Zh(i," "),a=i.length-o.length,s=vM(e,o,n);if(s){var l=!0,u=!1,c=void 0;try{for(var d,h=s[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value,g=r[f.start+a]+a;f.start+=g,f.end+=g}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}return s}function jM(e){return ad(e,!0)}var KM=function(){function e(t){u(this,e),this._ignorePathCasing=t}return h(e,[{key:"compare",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t?0:tf(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}},{key:"isEqual",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t||!(!e||!t)&&this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}},{key:"getComparisonKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}},{key:"isEqualOrParent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.scheme===t.scheme){if(e.scheme===Pv.file)return Xx(jM(e),jM(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(iT(e.authority,t.authority))return Xx(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}},{key:"joinPath",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r;return(r=ed).joinPath.apply(r,[e].concat(x(n)))}},{key:"basenameOrAuthority",value:function(e){return YM(e)||e.authority}},{key:"basename",value:function(e){return Wc.basename(e.path)}},{key:"extname",value:function(e){return Wc.extname(e.path)}},{key:"dirname",value:function(e){return 0===e.path.length?e:(e.scheme===Pv.file?t=ed.file(Uc(jM(e))).path:(t=Wc.dirname(e.path),e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error('dirname("'.concat(e.toString,")) resulted in a relative path")),t="/")),e.with({path:t}));var t}},{key:"normalizePath",value:function(e){return e.path.length?(t=e.scheme===Pv.file?ed.file(Bc(jM(e))).path:Wc.normalize(e.path),e.with({path:t})):e;var t}},{key:"relativePath",value:function(e,t){if(e.scheme===t.scheme&&iT(e.authority,t.authority)){if(e.scheme===Pv.file){var n=zc(jM(e),jM(t));return ps?Yx(n):n}var i=e.path||"/",r=t.path||"/";if(this._ignorePathCasing(e)){for(var o=0,a=Math.min(i.length,r.length);o<a&&(i.charCodeAt(o)===r.charCodeAt(o)||i.charAt(o).toLowerCase()===r.charAt(o).toLowerCase());o++);i=r.substr(0,o)+i.substr(o)}return Wc.relative(i,r)}}},{key:"resolvePath",value:function(e,t){if(e.scheme===Pv.file){var n=ed.file(Vc(jM(e),t));return e.with({authority:n.authority,path:n.path})}return t=function(e){return-1===e.indexOf("/")&&(e=Yx(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}(t),e.with({path:Wc.resolve(e.path,t)})}},{key:"isAbsolutePath",value:function(e){return!!e.path&&"/"===e.path[0]}},{key:"isEqualAuthority",value:function(e,t){return e===t||void 0!==e&&void 0!==t&&uf(e,t)}},{key:"hasTrailingPathSeparator",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qc;if(e.scheme===Pv.file){var n=jM(e);return n.length>Qx(n).length&&n[n.length-1]===t}var i=e.path;return i.length>1&&47===i.charCodeAt(i.length-1)&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}},{key:"removeTrailingPathSeparator",value:function(e){return rT(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:qc)?e.with({path:e.path.substr(0,e.path.length-1)}):e}},{key:"addTrailingPathSeparator",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qc,n=!1;if(e.scheme===Pv.file){var i=jM(e);n=void 0!==i&&i.length===Qx(i).length&&i[i.length-1]===t}else{t="/";var r=e.path;n=1===r.length&&47===r.charCodeAt(r.length-1)}return n||rT(e,t)?e:e.with({path:e.path+"/"})}}]),e}(),qM=new KM((function(){return!1})),GM=qM.isEqual.bind(qM);qM.isEqualOrParent.bind(qM),qM.getComparisonKey.bind(qM);var ZM=qM.basenameOrAuthority.bind(qM),YM=qM.basename.bind(qM),QM=qM.extname.bind(qM),XM=qM.dirname.bind(qM),$M=qM.joinPath.bind(qM),JM=qM.normalizePath.bind(qM),eT=qM.relativePath.bind(qM),tT=qM.resolvePath.bind(qM);qM.isAbsolutePath.bind(qM);var nT,iT=qM.isEqualAuthority.bind(qM),rT=qM.hasTrailingPathSeparator.bind(qM);qM.removeTrailingPathSeparator.bind(qM),qM.addTrailingPathSeparator.bind(qM),function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){var n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach((function(e){var t=C(e.split(":"),2),i=t[0],r=t[1];i&&r&&n.set(i,r)}));var i=t.path.substring(0,t.path.indexOf(";"));return i&&n.set(e.META_DATA_MIME,i),n}}(nT||(nT={}));var oT=function(){function e(){var t,n,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(u(this,e),this.value=r,"string"!=typeof this.value)throw wu("value");"boolean"==typeof o?(this.isTrusted=o,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=null!==(t=o.isTrusted)&&void 0!==t?t:void 0,this.supportThemeIcons=null!==(n=o.supportThemeIcons)&&void 0!==n&&n,this.supportHtml=null!==(i=o.supportHtml)&&void 0!==i&&i)}return h(e,[{key:"appendText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.value+=function(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}(this.supportThemeIcons?function(e){return e.replace(FM,(function(e,t){return t?e:"\\".concat(e)}))}(e):e).replace(/([ \t]+)/g,(function(e,t){return"&nbsp;".repeat(t.length)})).replace(/\>/gm,"\\>").replace(/\n/g,1===t?"\\\n":"\n\n"),this}},{key:"appendMarkdown",value:function(e){return this.value+=e,this}},{key:"appendCodeblock",value:function(e,t){return this.value+="\n".concat(function(e,t){var n,i,r=null!==(i=null===(n=e.match(/^`+/gm))||void 0===n?void 0:n.reduce((function(e,t){return e.length>t.length?e:t})).length)&&void 0!==i?i:0,o=r>=3?r+1:3;return["".concat("`".repeat(o)).concat(t),e,"".concat("`".repeat(o))].join("\n")}(t,e),"\n"),this}},{key:"appendLink",value:function(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=' "'.concat(this._escape(this._escape(n,'"'),")"),'"')),this.value+=")",this}},{key:"_escape",value:function(e,t){var n=new RegExp(qh(t),"g");return e.replace(n,(function(t,n){return"\\"!==e.charAt(n-1)?"\\".concat(t):t}))}}]),e}();function aT(e){return sT(e)?!e.value:!Array.isArray(e)||e.every(aT)}function sT(e){return e instanceof oT||!(!e||"object"!==(void 0===e?"undefined":L(e)))&&!("string"!=typeof e.value||"boolean"!=typeof e.isTrusted&&"object"!==L(e.isTrusted)&&void 0!==e.isTrusted||"boolean"!=typeof e.supportThemeIcons&&void 0!==e.supportThemeIcons)}function lT(e){return e.replace(/"/g,"&quot;")}function uT(e){return e?e.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1"):e}var cT=function(){function e(t){u(this,e),this._prefix=t,this._lastId=0}return h(e,[{key:"nextId",value:function(){return this._prefix+ ++this._lastId}}]),e}(),dT=new cT("id#"),hT={};!function(){function n(e,t){t(hT)}n.amd=!0,function(i,r){n.amd?n(0,r):"object"===(void 0===e?"undefined":L(e))&&void 0!==t?r(e):r((i="undefined"!=typeof globalThis?globalThis:i||self).marked={})}(this,(function(e){function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}function n(t){e.defaults=t}e.defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};var i=/[&<>"']/,r=new RegExp(i.source,"g"),o=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(o.source,"g"),s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l=function(e){return s[e]};function c(e,t){if(t){if(i.test(e))return e.replace(r,l)}else if(o.test(e))return e.replace(a,l);return e}var d=/(^|[^\[])\^/g;function g(e,t){var n="string"==typeof e?e:e.source;t=t||"";var i={replace:function(e,t){var r="string"==typeof t?t:t.source;return r=r.replace(d,"$1"),n=n.replace(e,r),i},getRegex:function(){return new RegExp(n,t)}};return i}function v(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return null}return e}var p={exec:function(){return null}};function m(e,t){var n=e.replace(/\|/g,(function(e,t,n){for(var i=!1,r=t;--r>=0&&"\\"===n[r];)i=!i;return i?"|":" |"})),i=n.split(/ \|/),r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function y(e,t,n){var i=e.length;if(0===i)return"";for(var r=0;r<i;){var o=e.charAt(i-r-1);if(o!==t||n){if(o===t||!n)break;r++}else r++}return e.slice(0,i-r)}function k(e,t,n,i){var r=t.href,o=t.title?c(t.title):null,a=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){i.state.inLink=!0;var s={type:"link",raw:n,href:r,title:o,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,s}return{type:"image",raw:n,href:r,title:o,text:c(a)}}var w=function(){function t(n){u(this,t),f(this,"options",void 0),f(this,"rules",void 0),f(this,"lexer",void 0),this.options=n||e.defaults}return h(t,[{key:"space",value:function(e){var t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}},{key:"code",value:function(e){var t=this.rules.block.code.exec(e);if(t){var n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:y(n,"\n")}}}},{key:"fences",value:function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],i=function(e,t){var n=e.match(/^(\s+)(?:```)/);if(null===n)return t;var i=n[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:C(t,1)[0].length>=i.length?e.slice(i.length):e})).join("\n")}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}},{key:"heading",value:function(e){var t=this.rules.block.heading.exec(e);if(t){var n=t[2].trim();if(/#$/.test(n)){var i=y(n,"#");this.options.pedantic?n=i.trim():i&&!/ $/.test(i)||(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}},{key:"hr",value:function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:y(t[0],"\n")}}},{key:"blockquote",value:function(e){var t=this.rules.block.blockquote.exec(e);if(t){for(var n=y(t[0],"\n").split("\n"),i="",r="",o=[];n.length>0;){var a=!1,s=[],l=void 0;for(l=0;l<n.length;l++)if(/^ {0,3}>/.test(n[l]))s.push(n[l]),a=!0;else{if(a)break;s.push(n[l])}n=n.slice(l);var u=s.join("\n"),c=u.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1").replace(/^ {0,3}>[ \t]?/gm,"");i=i?"".concat(i,"\n").concat(u):u,r=r?"".concat(r,"\n").concat(c):c;var d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,o,!0),this.lexer.state.top=d,0===n.length)break;var h=o[o.length-1];if("code"===(null==h?void 0:h.type))break;if("blockquote"===(null==h?void 0:h.type)){var f=h,g=f.raw+"\n"+n.join("\n"),v=this.blockquote(g);o[o.length-1]=v,i=i.substring(0,i.length-f.raw.length)+v.raw,r=r.substring(0,r.length-f.text.length)+v.text;break}if("list"!==(null==h?void 0:h.type));else{var p=h,m=p.raw+"\n"+n.join("\n"),_=this.list(m);o[o.length-1]=_,i=i.substring(0,i.length-h.raw.length)+_.raw,r=r.substring(0,r.length-p.raw.length)+_.raw,n=m.substring(o[o.length-1].raw.length).split("\n")}}return{type:"blockquote",raw:i,tokens:o,text:r}}}},{key:"list",value:function(e){var t=this.rules.block.list.exec(e);if(t){var n=t[1].trim(),i=n.length>1,r={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?"\\d{1,9}\\".concat(n.slice(-1)):"\\".concat(n),this.options.pedantic&&(n=i?n:"[*+-]");for(var o=new RegExp("^( {0,3}".concat(n,")((?:[\t ][^\\n]*)?(?:\\n|$))")),a=!1;e;){var s=!1,l="",u="";if(!(t=o.exec(e)))break;if(this.rules.block.hr.test(e))break;l=t[0],e=e.substring(l.length);var c=t[2].split("\n",1)[0].replace(/^\t+/,(function(e){return" ".repeat(3*e.length)})),d=e.split("\n",1)[0],h=!c.trim(),f=0;if(this.options.pedantic?(f=2,u=c.trimStart()):h?f=t[1].length+1:(f=(f=t[2].search(/[^ ]/))>4?1:f,u=c.slice(f),f+=t[1].length),h&&/^ *$/.test(d)&&(l+=d+"\n",e=e.substring(d.length+1),s=!0),!s)for(var g=new RegExp("^ {0,".concat(Math.min(3,f-1),"}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))")),v=new RegExp("^ {0,".concat(Math.min(3,f-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),p=new RegExp("^ {0,".concat(Math.min(3,f-1),"}(?:```|~~~)")),m=new RegExp("^ {0,".concat(Math.min(3,f-1),"}#"));e;){var y=e.split("\n",1)[0];if(d=y,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),p.test(d))break;if(m.test(d))break;if(g.test(d))break;if(v.test(e))break;if(d.search(/[^ ]/)>=f||!d.trim())u+="\n"+d.slice(f);else{if(h)break;if(c.search(/[^ ]/)>=4)break;if(p.test(c))break;if(m.test(c))break;if(v.test(c))break;u+="\n"+d}h||d.trim()||(h=!0),l+=y+"\n",e=e.substring(y.length+1),c=d.slice(f)}r.loose||(a?r.loose=!0:/\n *\n *$/.test(l)&&(a=!0));var _=null,b=void 0;this.options.gfm&&(_=/^\[[ xX]\] /.exec(u))&&(b="[ ] "!==_[0],u=u.replace(/^\[[ xX]\] +/,"")),r.items.push({type:"list_item",raw:l,task:!!_,checked:b,loose:!1,text:u,tokens:[]}),r.raw+=l}r.items[r.items.length-1].raw=r.items[r.items.length-1].raw.trimEnd(),r.items[r.items.length-1].text=r.items[r.items.length-1].text.trimEnd(),r.raw=r.raw.trimEnd();for(var k=0;k<r.items.length;k++)if(this.lexer.state.top=!1,r.items[k].tokens=this.lexer.blockTokens(r.items[k].text,[]),!r.loose){var w=r.items[k].tokens.filter((function(e){return"space"===e.type})),C=w.length>0&&w.some((function(e){return/\n.*\n/.test(e.raw)}));r.loose=C}if(r.loose)for(var S=0;S<r.items.length;S++)r.items[S].loose=!0;return r}}},{key:"html",value:function(e){var t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}},{key:"def",value:function(e){var t=this.rules.block.def.exec(e);if(t){var n=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:i,title:r}}}},{key:"table",value:function(e){var t=this,n=this.rules.block.table.exec(e);if(n&&/[:|]/.test(n[2])){var i=m(n[1]),r=n[2].replace(/^\||\| *$/g,"").split("|"),o=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split("\n"):[],a={type:"table",raw:n[0],header:[],align:[],rows:[]};if(i.length===r.length){var s=!0,l=!1,u=void 0;try{for(var c,d=r[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;/^ *-+: *$/.test(h)?a.align.push("right"):/^ *:-+: *$/.test(h)?a.align.push("center"):/^ *:-+ *$/.test(h)?a.align.push("left"):a.align.push(null)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}for(var f=0;f<i.length;f++)a.header.push({text:i[f],tokens:this.lexer.inline(i[f]),header:!0,align:a.align[f]});var g=!0,v=!1,p=void 0;try{for(var y,_=o[Symbol.iterator]();!(g=(y=_.next()).done);g=!0){var b=y.value;a.rows.push(m(b,a.header.length).map((function(e,n){return{text:e,tokens:t.lexer.inline(e),header:!1,align:a.align[n]}})))}}catch(e){v=!0,p=e}finally{try{g||null==_.return||_.return()}finally{if(v)throw p}}return a}}}},{key:"lheading",value:function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}},{key:"paragraph",value:function(e){var t=this.rules.block.paragraph.exec(e);if(t){var n="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}},{key:"text",value:function(e){var t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}},{key:"escape",value:function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:c(t[1])}}},{key:"tag",value:function(e){var t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}},{key:"link",value:function(e){var t=this.rules.inline.link.exec(e);if(t){var n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var i=y(n.slice(0,-1),"\\");if((n.length-i.length)%2==0)return}else{var r=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=0,i=0;i<e.length;i++)if("\\"===e[i])i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&--n<0)return i;return-1}(t[2],"()");if(r>-1){var o=(0===t[0].indexOf("!")?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,o).trim(),t[3]=""}}var a=t[2],s="";if(this.options.pedantic){var l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);l&&(a=l[1],s=l[3])}else s=t[3]?t[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(a=this.options.pedantic&&!/>$/.test(n)?a.slice(1):a.slice(1,-1)),k(t,{href:a?a.replace(this.rules.inline.anyPunctuation,"$1"):a,title:s?s.replace(this.rules.inline.anyPunctuation,"$1"):s},t[0],this.lexer)}}},{key:"reflink",value:function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var i=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!i){var r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return k(n,i,n[0],this.lexer)}}},{key:"emStrong",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=this.rules.inline.emStrongLDelim.exec(e);if(i&&((!i[3]||!n.match(RegExp("[\\p{L}\\p{N}]","u")))&&(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)))){var r,o,a=x(i[0]).length-1,s=a,l=0,u="*"===i[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+a);null!=(i=u.exec(t));)if(r=i[1]||i[2]||i[3]||i[4]||i[5]||i[6])if(o=x(r).length,i[3]||i[4])s+=o;else if(!((i[5]||i[6])&&a%3)||(a+o)%3){if(!((s-=o)>0)){o=Math.min(o,o+s+l);var c=x(i[0])[0].length,d=e.slice(0,a+i.index+c+o);if(Math.min(a,o)%2){var h=d.slice(1,-1);return{type:"em",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}var f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}else l+=o}}},{key:"codespan",value:function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\n/g," "),i=/[^ ]/.test(n),r=/^ /.test(n)&&/ $/.test(n);return i&&r&&(n=n.substring(1,n.length-1)),n=c(n,!0),{type:"codespan",raw:t[0],text:n}}}},{key:"br",value:function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}},{key:"del",value:function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}},{key:"autolink",value:function(e){var t,n,i=this.rules.inline.autolink.exec(e);if(i)return n="@"===i[2]?"mailto:"+(t=c(i[1])):t=c(i[1]),{type:"link",raw:i[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}},{key:"url",value:function(e){var t;if(t=this.rules.inline.url.exec(e)){var n,i;if("@"===t[2])i="mailto:"+(n=c(t[0]));else{var r;do{var o,a;r=t[0],t[0]=null!==(a=null===(o=this.rules.inline._backpedal.exec(t[0]))||void 0===o?void 0:o[0])&&void 0!==a?a:""}while(r!==t[0]);n=c(t[0]),i="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}},{key:"inlineText",value:function(e){var t,n=this.rules.inline.text.exec(e);if(n)return t=this.lexer.state.inRawBlock?n[0]:c(n[0]),{type:"text",raw:n[0],text:t}}}]),t}(),S=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,L=/(?:[*+-]|\d{1,9}[.)])/,D=g(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,L).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),N=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,I=/(?!\s*\])(?:\\.|[^\[\]\\])+/,E=g(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",I).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),M=g(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,L).getRegex(),T="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",R=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,A=g("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",R).replace("tag",T).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),P=g(N).replace("hr",S).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T).getRegex(),O={blockquote:g(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",P).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:E,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:S,html:A,lheading:D,list:M,newline:/^(?: *(?:\n|$))+/,paragraph:P,table:p,text:/^[^\n]+/},F=g("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",S).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T).getRegex(),W=b(_({},O),{table:F,paragraph:g(N).replace("hr",S).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",F).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T).getRegex()}),B=b(_({},O),{html:g("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",R).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:p,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:g(N).replace("hr",S).replace("heading"," *#{1,6} *[^\n]").replace("lheading",D).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),H=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,V=/^( {2,}|\\)\n(?!\s*$)/,z="\\p{P}\\p{S}",U=g(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,z).getRegex(),j=g(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,z).getRegex(),K=g("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,z).getRegex(),q=g("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,z).getRegex(),G=g(/\\([punct])/,"gu").replace(/punct/g,z).getRegex(),Z=g(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Y=g(R).replace("(?:--\x3e|$)","--\x3e").getRegex(),Q=g("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Y).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),X=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$=g(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",X).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),J=g(/^!?\[(label)\]\[(ref)\]/).replace("label",X).replace("ref",I).getRegex(),ee=g(/^!?\[(ref)\](?:\[\])?/).replace("ref",I).getRegex(),te={_backpedal:p,anyPunctuation:G,autolink:Z,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:V,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:p,emStrongLDelim:j,emStrongRDelimAst:K,emStrongRDelimUnd:q,escape:H,link:$,nolink:ee,punctuation:U,reflink:J,reflinkSearch:g("reflink|nolink(?!\\()","g").replace("reflink",J).replace("nolink",ee).getRegex(),tag:Q,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:p},ne=b(_({},te),{link:g(/^!?\[(label)\]\((.*?)\)/).replace("label",X).getRegex(),reflink:g(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",X).getRegex()}),ie=b(_({},te),{escape:g(H).replace("])","~|])").getRegex(),url:g(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),re=b(_({},ie),{br:g(V).replace("{2,}","*").getRegex(),text:g(ie.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),oe={normal:O,gfm:W,pedantic:B},ae={normal:te,gfm:ie,breaks:re,pedantic:ne},se=function(){function t(n){u(this,t),f(this,"tokens",void 0),f(this,"options",void 0),f(this,"state",void 0),f(this,"tokenizer",void 0),f(this,"inlineQueue",void 0),this.tokens=[],this.tokens.links=Object.create(null),this.options=n||e.defaults,this.options.tokenizer=this.options.tokenizer||new w,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var i={block:oe.normal,inline:ae.normal};this.options.pedantic?(i.block=oe.pedantic,i.inline=ae.pedantic):this.options.gfm&&(i.block=oe.gfm,this.options.breaks?i.inline=ae.breaks:i.inline=ae.gfm),this.tokenizer.rules=i}return h(t,[{key:"lex",value:function(e){e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);for(var t=0;t<this.inlineQueue.length;t++){var n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}},{key:"blockTokens",value:function(e){var t,n,i,r,o=function(){if(t.options.extensions&&t.options.extensions.block&&t.options.extensions.block.some((function(t){return!!(n=t.call({lexer:a},e,s))&&(e=e.substring(n.raw.length),s.push(n),!0)})))return"continue";if(n=t.tokenizer.space(e))return e=e.substring(n.raw.length),1===n.raw.length&&s.length>0?s[s.length-1].raw+="\n":s.push(n),"continue";if(n=t.tokenizer.code(e))return e=e.substring(n.raw.length),!(i=s[s.length-1])||"paragraph"!==i.type&&"text"!==i.type?s.push(n):(i.raw+="\n"+n.raw,i.text+="\n"+n.text,t.inlineQueue[t.inlineQueue.length-1].src=i.text),"continue";if(n=t.tokenizer.fences(e))return e=e.substring(n.raw.length),s.push(n),"continue";if(n=t.tokenizer.heading(e))return e=e.substring(n.raw.length),s.push(n),"continue";if(n=t.tokenizer.hr(e))return e=e.substring(n.raw.length),s.push(n),"continue";if(n=t.tokenizer.blockquote(e))return e=e.substring(n.raw.length),s.push(n),"continue";if(n=t.tokenizer.list(e))return e=e.substring(n.raw.length),s.push(n),"continue";if(n=t.tokenizer.html(e))return e=e.substring(n.raw.length),s.push(n),"continue";if(n=t.tokenizer.def(e))return e=e.substring(n.raw.length),!(i=s[s.length-1])||"paragraph"!==i.type&&"text"!==i.type?t.tokens.links[n.tag]||(t.tokens.links[n.tag]={href:n.href,title:n.title}):(i.raw+="\n"+n.raw,i.text+="\n"+n.raw,t.inlineQueue[t.inlineQueue.length-1].src=i.text),"continue";if(n=t.tokenizer.table(e))return e=e.substring(n.raw.length),s.push(n),"continue";if(n=t.tokenizer.lheading(e))return e=e.substring(n.raw.length),s.push(n),"continue";if(r=e,t.options.extensions&&t.options.extensions.startBlock){var o=1/0,u=e.slice(1),c=void 0;t.options.extensions.startBlock.forEach((function(e){"number"==typeof(c=e.call({lexer:a},u))&&c>=0&&(o=Math.min(o,c))})),o<1/0&&o>=0&&(r=e.substring(0,o+1))}if(t.state.top&&(n=t.tokenizer.paragraph(r)))return i=s[s.length-1],l&&"paragraph"===(null==i?void 0:i.type)?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,t.inlineQueue.pop(),t.inlineQueue[t.inlineQueue.length-1].src=i.text):s.push(n),l=r.length!==e.length,e=e.substring(n.raw.length),"continue";if(n=t.tokenizer.text(e))return e=e.substring(n.raw.length),(i=s[s.length-1])&&"text"===i.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,t.inlineQueue.pop(),t.inlineQueue[t.inlineQueue.length-1].src=i.text):s.push(n),"continue";if(e){var d="Infinite loop on byte: "+e.charCodeAt(0);if(t.options.silent)return console.error(d),"break";throw new Error(d)}},a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(function(e,t,n){return t+"    ".repeat(n.length)}));e;){if("break"===(t=this,o()))break}return this.state.top=!0,s}},{key:"inline",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.inlineQueue.push({src:e,tokens:t}),t}},{key:"inlineTokens",value:function(e){var t,n,i,r,o,a,s,l=function(){if(a||(s=""),a=!1,t.options.extensions&&t.options.extensions.inline&&t.options.extensions.inline.some((function(t){return!!(n=t.call({lexer:u},e,c))&&(e=e.substring(n.raw.length),c.push(n),!0)})))return"continue";if(n=t.tokenizer.escape(e))return e=e.substring(n.raw.length),c.push(n),"continue";if(n=t.tokenizer.tag(e))return e=e.substring(n.raw.length),(i=c[c.length-1])&&"text"===n.type&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):c.push(n),"continue";if(n=t.tokenizer.link(e))return e=e.substring(n.raw.length),c.push(n),"continue";if(n=t.tokenizer.reflink(e,t.tokens.links))return e=e.substring(n.raw.length),(i=c[c.length-1])&&"text"===n.type&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):c.push(n),"continue";if(n=t.tokenizer.emStrong(e,d,s))return e=e.substring(n.raw.length),c.push(n),"continue";if(n=t.tokenizer.codespan(e))return e=e.substring(n.raw.length),c.push(n),"continue";if(n=t.tokenizer.br(e))return e=e.substring(n.raw.length),c.push(n),"continue";if(n=t.tokenizer.del(e))return e=e.substring(n.raw.length),c.push(n),"continue";if(n=t.tokenizer.autolink(e))return e=e.substring(n.raw.length),c.push(n),"continue";if(!t.state.inLink&&(n=t.tokenizer.url(e)))return e=e.substring(n.raw.length),c.push(n),"continue";if(r=e,t.options.extensions&&t.options.extensions.startInline){var o=1/0,l=e.slice(1),h=void 0;t.options.extensions.startInline.forEach((function(e){"number"==typeof(h=e.call({lexer:u},l))&&h>=0&&(o=Math.min(o,h))})),o<1/0&&o>=0&&(r=e.substring(0,o+1))}if(n=t.tokenizer.inlineText(r))return e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(s=n.raw.slice(-1)),a=!0,(i=c[c.length-1])&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):c.push(n),"continue";if(e){var f="Infinite loop on byte: "+e.charCodeAt(0);if(t.options.silent)return console.error(f),"break";throw new Error(f)}},u=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],d=e;if(this.tokens.links){var h=Object.keys(this.tokens.links);if(h.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(d));)h.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(d=d.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+d.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(d));)d=d.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+d.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.anyPunctuation.exec(d));)d=d.slice(0,o.index)+"++"+d.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;){if("break"===(t=this,l()))break}return c}}],[{key:"rules",get:function(){return{block:oe,inline:ae}}},{key:"lex",value:function(e,n){return new t(n).lex(e)}},{key:"lexInline",value:function(e,n){return new t(n).inlineTokens(e)}}]),t}(),le=function(){function t(n){u(this,t),f(this,"options",void 0),f(this,"parser",void 0),this.options=n||e.defaults}return h(t,[{key:"space",value:function(e){return""}},{key:"code",value:function(e){var t,n=e.text,i=e.lang,r=e.escaped,o=null===(t=(i||"").match(/^\S*/))||void 0===t?void 0:t[0],a=n.replace(/\n$/,"")+"\n";return o?'<pre><code class="language-'+c(o)+'">'+(r?a:c(a,!0))+"</code></pre>\n":"<pre><code>"+(r?a:c(a,!0))+"</code></pre>\n"}},{key:"blockquote",value:function(e){var t=e.tokens,n=this.parser.parse(t);return"<blockquote>\n".concat(n,"</blockquote>\n")}},{key:"html",value:function(e){return e.text}},{key:"heading",value:function(e){var t=e.tokens,n=e.depth;return"<h".concat(n,">").concat(this.parser.parseInline(t),"</h").concat(n,">\n")}},{key:"hr",value:function(e){return"<hr>\n"}},{key:"list",value:function(e){for(var t=e.ordered,n=e.start,i="",r=0;r<e.items.length;r++){var o=e.items[r];i+=this.listitem(o)}var a=t?"ol":"ul";return"<"+a+(t&&1!==n?' start="'+n+'"':"")+">\n"+i+"</"+a+">\n"}},{key:"listitem",value:function(e){var t="";if(e.task){var n=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&"paragraph"===e.tokens[0].type?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=n+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" "}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),"<li>".concat(t,"</li>\n")}},{key:"checkbox",value:function(e){return"<input "+(e.checked?'checked="" ':"")+'disabled="" type="checkbox">'}},{key:"paragraph",value:function(e){var t=e.tokens;return"<p>".concat(this.parser.parseInline(t),"</p>\n")}},{key:"table",value:function(e){for(var t="",n="",i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});for(var r="",o=0;o<e.rows.length;o++){var a=e.rows[o];n="";for(var s=0;s<a.length;s++)n+=this.tablecell(a[s]);r+=this.tablerow({text:n})}return r&&(r="<tbody>".concat(r,"</tbody>")),"<table>\n<thead>\n"+t+"</thead>\n"+r+"</table>\n"}},{key:"tablerow",value:function(e){var t=e.text;return"<tr>\n".concat(t,"</tr>\n")}},{key:"tablecell",value:function(e){var t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?"<".concat(n,' align="').concat(e.align,'">'):"<".concat(n,">"))+t+"</".concat(n,">\n")}},{key:"strong",value:function(e){var t=e.tokens;return"<strong>".concat(this.parser.parseInline(t),"</strong>")}},{key:"em",value:function(e){var t=e.tokens;return"<em>".concat(this.parser.parseInline(t),"</em>")}},{key:"codespan",value:function(e){var t=e.text;return"<code>".concat(t,"</code>")}},{key:"br",value:function(e){return"<br>"}},{key:"del",value:function(e){var t=e.tokens;return"<del>".concat(this.parser.parseInline(t),"</del>")}},{key:"link",value:function(e){var t=e.href,n=e.title,i=e.tokens,r=this.parser.parseInline(i),o=v(t);if(null===o)return r;var a='<a href="'+(t=o)+'"';return n&&(a+=' title="'+n+'"'),a+=">"+r+"</a>"}},{key:"image",value:function(e){var t=e.href,n=e.title,i=e.text,r=v(t);if(null===r)return i;var o='<img src="'.concat(t=r,'" alt="').concat(i,'"');return n&&(o+=' title="'.concat(n,'"')),o+=">"}},{key:"text",value:function(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}]),t}(),ue=function(){function e(){u(this,e)}return h(e,[{key:"strong",value:function(e){return e.text}},{key:"em",value:function(e){return e.text}},{key:"codespan",value:function(e){return e.text}},{key:"del",value:function(e){return e.text}},{key:"html",value:function(e){return e.text}},{key:"text",value:function(e){return e.text}},{key:"link",value:function(e){return""+e.text}},{key:"image",value:function(e){return""+e.text}},{key:"br",value:function(){return""}}]),e}(),ce=function(){function t(n){u(this,t),f(this,"options",void 0),f(this,"renderer",void 0),f(this,"textRenderer",void 0),this.options=n||e.defaults,this.options.renderer=this.options.renderer||new le,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ue}return h(t,[{key:"parse",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="",i=0;i<e.length;i++){var r=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){var o=r,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==a||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){n+=a||"";continue}}var s=r;switch(s.type){case"space":n+=this.renderer.space(s);continue;case"hr":n+=this.renderer.hr(s);continue;case"heading":n+=this.renderer.heading(s);continue;case"code":n+=this.renderer.code(s);continue;case"table":n+=this.renderer.table(s);continue;case"blockquote":n+=this.renderer.blockquote(s);continue;case"list":n+=this.renderer.list(s);continue;case"html":n+=this.renderer.html(s);continue;case"paragraph":n+=this.renderer.paragraph(s);continue;case"text":for(var l=s,u=this.renderer.text(l);i+1<e.length&&"text"===e[i+1].type;)l=e[++i],u+="\n"+this.renderer.text(l);n+=t?this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u}]}):u;continue;default:var c='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}return n}},{key:"parseInline",value:function(e,t){t=t||this.renderer;for(var n="",i=0;i<e.length;i++){var r=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){var o=this.options.extensions.renderers[r.type].call({parser:this},r);if(!1!==o||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){n+=o||"";continue}}var a=r;switch(a.type){case"escape":case"text":n+=t.text(a);break;case"html":n+=t.html(a);break;case"link":n+=t.link(a);break;case"image":n+=t.image(a);break;case"strong":n+=t.strong(a);break;case"em":n+=t.em(a);break;case"codespan":n+=t.codespan(a);break;case"br":n+=t.br(a);break;case"del":n+=t.del(a);break;default:var s='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}return n}}],[{key:"parse",value:function(e,n){return new t(n).parse(e)}},{key:"parseInline",value:function(e,n){return new t(n).parseInline(e)}}]),t}(),de=function(){function t(n){u(this,t),f(this,"options",void 0),this.options=n||e.defaults}return h(t,[{key:"preprocess",value:function(e){return e}},{key:"postprocess",value:function(e){return e}},{key:"processAllTokens",value:function(e){return e}}]),t}();f(de,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var he=function(){function e(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];u(this,e),f(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}),f(this,"options",this.setOptions),f(this,"parse",this.parseMarkdown(se.lex,ce.parse)),f(this,"parseInline",this.parseMarkdown(se.lexInline,ce.parseInline)),f(this,"Parser",ce),f(this,"Renderer",le),f(this,"TextRenderer",ue),f(this,"Lexer",se),f(this,"Tokenizer",w),f(this,"Hooks",de),this.use.apply(this,x(n))}return h(e,[{key:"walkTokens",value:function(e,t){var n=this,i=[],r=!0,o=!1,a=void 0;try{for(var s,l,u=function(){var e=l.value;switch(i=i.concat(t.call(s,e)),e.type){case"table":var r=e,o=!0,a=!1,u=void 0;try{for(var c,d=r.header[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value;i=i.concat(s.walkTokens(h.tokens,t))}}catch(e){a=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(a)throw u}}var f=!0,g=!1,v=void 0;try{for(var p,m=r.rows[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value,_=!0,b=!1,k=void 0;try{for(var w,C=y[Symbol.iterator]();!(_=(w=C.next()).done);_=!0){var S=w.value;i=i.concat(s.walkTokens(S.tokens,t))}}catch(e){b=!0,k=e}finally{try{_||null==C.return||C.return()}finally{if(b)throw k}}}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}break;case"list":var x=e;i=i.concat(s.walkTokens(x.items,t));break;default:var L,D,N=e;(null===(D=s.defaults.extensions)||void 0===D||null===(L=D.childTokens)||void 0===L?void 0:L[N.type])?s.defaults.extensions.childTokens[N.type].forEach((function(e){var r=N[e].flat(1/0);i=i.concat(n.walkTokens(r,t))})):N.tokens&&(i=i.concat(s.walkTokens(N.tokens,t)))}},c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)s=this,u()}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return i}},{key:"use",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach((function(t){var n=_({},t);if(n.async=e.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach((function(e){if(!e.name)throw new Error("extension name required");if("renderer"in e){var t=r.renderers[e.name];r.renderers[e.name]=t?function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=e.renderer.apply(this,i);return!1===o&&(o=t.apply(this,i)),o}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");var n=r[e.level];n?n.unshift(e.tokenizer):r[e.level]=[e.tokenizer],e.start&&("block"===e.level?r.startBlock?r.startBlock.push(e.start):r.startBlock=[e.start]:"inline"===e.level&&(r.startInline?r.startInline.push(e.start):r.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(r.childTokens[e.name]=e.childTokens)})),n.extensions=r),t.renderer){var i=function(e){if(!(e in o))throw new Error("renderer '".concat(e,"' does not exist"));if(["options","parser"].includes(e))return"continue";var n=e,i=t.renderer[n],r=o[n];o[n]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=i.apply(o,t);return!1===a&&(a=r.apply(o,t)),a||""}},o=e.defaults.renderer||new le(e.defaults);for(var a in t.renderer)i(a);n.renderer=o}if(t.tokenizer){var s=function(e){if(!(e in l))throw new Error("tokenizer '".concat(e,"' does not exist"));if(["options","rules","lexer"].includes(e))return"continue";var n=e,i=t.tokenizer[n],r=l[n];l[n]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=i.apply(l,t);return!1===o&&(o=r.apply(l,t)),o}},l=e.defaults.tokenizer||new w(e.defaults);for(var u in t.tokenizer)s(u);n.tokenizer=l}if(t.hooks){var c=function(n){if(!(n in d))throw new Error("hook '".concat(n,"' does not exist"));if("options"===n)return"continue";var i=n,r=t.hooks[i],o=d[i];de.passThroughHooks.has(n)?d[i]=function(t){if(e.defaults.async)return Promise.resolve(r.call(d,t)).then((function(e){return o.call(d,e)}));var n=r.call(d,t);return o.call(d,n)}:d[i]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=r.apply(d,t);return!1===i&&(i=o.apply(d,t)),i}},d=e.defaults.hooks||new de;for(var h in t.hooks)c(h);n.hooks=d}if(t.walkTokens){var f=e.defaults.walkTokens,g=t.walkTokens;n.walkTokens=function(e){var t=[];return t.push(g.call(this,e)),f&&(t=t.concat(f.call(this,e))),t}}e.defaults=_({},e.defaults,n)})),this}},{key:"setOptions",value:function(e){return this.defaults=_({},this.defaults,e),this}},{key:"lexer",value:function(e,t){return se.lex(e,null!=t?t:this.defaults)}},{key:"parser",value:function(e,t){return ce.parse(e,null!=t?t:this.defaults)}},{key:"parseMarkdown",value:function(e,t){var n=this;return function(i,r){var o=_({},r),a=_({},n.defaults,o),s=n.onError(!!a.silent,!!a.async);if(!0===n.defaults.async&&!1===o.async)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==i)return s(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof i)return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(i):i).then((function(t){return e(t,a)})).then((function(e){return a.hooks?a.hooks.processAllTokens(e):e})).then((function(e){return a.walkTokens?Promise.all(n.walkTokens(e,a.walkTokens)).then((function(){return e})):e})).then((function(e){return t(e,a)})).then((function(e){return a.hooks?a.hooks.postprocess(e):e})).catch(s);try{a.hooks&&(i=a.hooks.preprocess(i));var l=e(i,a);a.hooks&&(l=a.hooks.processAllTokens(l)),a.walkTokens&&n.walkTokens(l,a.walkTokens);var u=t(l,a);return a.hooks&&(u=a.hooks.postprocess(u)),u}catch(e){return s(e)}}}},{key:"onError",value:function(e,t){return function(n){if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){var i="<p>An error occurred:</p><pre>"+c(n.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(n);throw n}}}]),e}(),fe=new he;function ge(e,t){return fe.parse(e,t)}ge.options=ge.setOptions=function(e){return fe.setOptions(e),ge.defaults=fe.defaults,n(ge.defaults),ge},ge.getDefaults=t,ge.defaults=e.defaults,ge.use=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r;return(r=fe).use.apply(r,x(t)),ge.defaults=fe.defaults,n(ge.defaults),ge},ge.walkTokens=function(e,t){return fe.walkTokens(e,t)},ge.parseInline=fe.parseInline,ge.Parser=ce,ge.parser=ce.parse,ge.Renderer=le,ge.TextRenderer=ue,ge.Lexer=se,ge.lexer=se.lex,ge.Tokenizer=w,ge.Hooks=de,ge.parse=ge;var ve=ge.options,pe=ge.setOptions,me=ge.use,ye=ge.walkTokens,_e=ge.parseInline,be=ge,ke=ce.parse,we=se.lex;e.Hooks=de,e.Lexer=se,e.Marked=he,e.Parser=ce,e.Renderer=le,e.TextRenderer=ue,e.Tokenizer=w,e.getDefaults=t,e.lexer=we,e.marked=ge,e.options=ve,e.parse=be,e.parseInline=_e,e.parser=ke,e.setOptions=pe,e.use=me,e.walkTokens=ye}))}(),hT.Hooks||e.Hooks,hT.Lexer||e.Lexer,hT.Marked||e.Marked,hT.Parser||e.Parser;var fT=hT.Renderer||e.Renderer;hT.TextRenderer||e.TextRenderer,hT.Tokenizer||e.Tokenizer;var gT=hT.defaults||e.defaults;hT.getDefaults||e.getDefaults;var vT=hT.lexer||e.lexer;hT.marked||e.marked,hT.options||e.options;var pT=hT.parse||e.parse;hT.parseInline||e.parseInline;var mT=hT.parser||e.parser;function yT(e){var t=JSON.parse(e);return t=bT(t)}function _T(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function bT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e||t>200)return e;if("object"===(void 0===e?"undefined":L(e))){switch(e.$mid){case 1:return ed.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof wb||e instanceof Uint8Array)return e;if(Array.isArray(e))for(var n=0;n<e.length;++n)e[n]=bT(e[n],t+1);else for(var i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=bT(e[i],t+1))}return e}hT.setOptions||e.setOptions,hT.use||e.use,hT.walkTokens||e.walkTokens;var kT=Object.freeze({image:function(e){var t,n=e.href,i=e.title,r=e.text,o=[],a=[];n&&(t=function(e){var t=[],n=e.split("|").map((function(e){return e.trim()}));e=n[0];var i=n[1];if(i){var r=/height=(\d+)/.exec(i),o=/width=(\d+)/.exec(i),a=r?r[1]:"",s=o?o[1]:"",l=isFinite(parseInt(s)),u=isFinite(parseInt(a));l&&t.push('width="'.concat(s,'"')),u&&t.push('height="'.concat(a,'"'))}return{href:e,dimensions:t}}(n),n=t.href,o=t.dimensions,a.push('src="'.concat(lT(n),'"')));return r&&a.push('alt="'.concat(lT(r),'"')),i&&a.push('title="'.concat(lT(i),'"')),o.length&&(a=a.concat(o)),"<img "+a.join(" ")+">"},paragraph:function(e){var t=e.tokens;return"<p>".concat(this.parser.parseInline(t),"</p>")},link:function(e){var t=e.href,n=e.title,i=e.tokens,r=this.parser.parseInline(i);return"string"!=typeof t?"":(t===r&&(r=uT(r)),n="string"==typeof n?lT(uT(n)):"",t=(t=uT(t)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),'<a href="'.concat(t,'" title="').concat(n||t,'" draggable="false">').concat(r,"</a>"))}});function wT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new Tu,r=!1,o=NE(t),a=function(t){var n;try{n=yT(decodeURIComponent(t))}catch(e){}return n?(n=za(n,(function(t){return e.uris&&e.uris[t]?ed.revive(e.uris[t]):void 0})),encodeURIComponent(JSON.stringify(n))):t},s=function(t,n){var i=e.uris&&e.uris[t],r=ed.revive(i);return n?t.startsWith(Pv.data+":")?t:(r||(r=ed.parse(t)),jv.uriToBrowserUri(r).toString(!0)):r?ed.parse(t).toString()===r.toString()?t:(r.query&&(r=r.with({query:a(r.query)})),r.toString()):t},l=new fT;l.image=kT.image,l.link=kT.link,l.paragraph=kT.paragraph;var u,c=[],d=[];if(t.codeBlockRendererSync?l.code=function(e){var n=e.text,i=e.lang,r=dT.nextId(),o=t.codeBlockRendererSync(CT(i),n);return d.push([r,o]),'<div class="code" data-code="'.concat(r,'">').concat(Kh(n),"</div>")}:t.codeBlockRenderer&&(l.code=function(e){var n=e.text,i=e.lang,r=dT.nextId(),o=t.codeBlockRenderer(CT(i),n);return c.push(o.then((function(e){return[r,e]}))),'<div class="code" data-code="'.concat(r,'">').concat(Kh(n),"</div>")}),t.actionHandler){var h=function(n){var i=n.target;if("A"===i.tagName||(i=i.parentElement)&&"A"===i.tagName)try{var r=i.dataset.href;r&&(e.baseUri&&(r=ST(ed.from(e.baseUri),r)),t.actionHandler.callback(r,n))}catch(e){vu(e)}finally{n.preventDefault()}},f=t.actionHandler.disposables.add(new LE(o,"click")),g=t.actionHandler.disposables.add(new LE(o,"auxclick"));t.actionHandler.disposables.add(Au.any(f.event,g.event)((function(e){var t=new lg(ep(o),e);(t.leftButton||t.middleButton)&&h(t)}))),t.actionHandler.disposables.add(cp(o,"keydown",(function(e){var t=new rg(e);(t.equals(10)||t.equals(3))&&h(t)})))}e.supportHtml||(l.html=function(n){var i,r=n.text;return(null===(i=t.sanitizerOptions)||void 0===i?void 0:i.replaceWithPlaintext)?Kh(r):(e.isTrusted?r.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?r:""}),n.renderer=l;var v,p=null!==(u=e.value)&&void 0!==u?u:"";if(p.length>1e5&&(p="".concat(p.substr(0,1e5),"…")),e.supportThemeIcons&&(p=function(e){return e.replace(WM,(function(e){return"\\".concat(e)}))}(p)),t.fillInIncompleteTokens){var m=_({},gT,n),y=function(e){for(var t=0;t<OT;t++){var n=FT(e);if(!n)break;e=n}return e}(vT(p,m));v=mT(y,m)}else v=pT(p,b(_({},n),{async:!1}));e.supportThemeIcons&&(v=AE(v).map((function(e){return"string"==typeof e?e:e.outerHTML})).join(""));var k=(new DOMParser).parseFromString(LT(_({isTrusted:e.isTrusted},t.sanitizerOptions),v),"text/html");if(k.body.querySelectorAll("img, audio, video, source").forEach((function(n){var i=n.getAttribute("src");if(i){var r=i;try{e.baseUri&&(r=ST(ed.from(e.baseUri),r))}catch(e){}if(n.setAttribute("src",s(r,!0)),t.remoteImageIsAllowed){var o=ed.parse(r);o.scheme===Pv.file||o.scheme===Pv.data||t.remoteImageIsAllowed(o)||n.replaceWith(gm("",void 0,n.outerHTML))}}})),k.body.querySelectorAll("a").forEach((function(t){var n=t.getAttribute("href");if(t.setAttribute("href",""),!n||/^data:|javascript:/i.test(n)||/^command:/i.test(n)&&!e.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(n)){var i;(i=t).replaceWith.apply(i,x(t.childNodes))}else{var r=s(n,!1);e.baseUri&&(r=ST(ed.from(e.baseUri),n)),t.dataset.href=r}})),o.innerHTML=LT(_({isTrusted:e.isTrusted},t.sanitizerOptions),k.body.innerHTML),c.length>0)Promise.all(c).then((function(e){var n;if(!r){var i=new Map(e),a=o.querySelectorAll("div[data-code]"),s=!0,l=!1,u=void 0;try{for(var c,d=a[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h,f=c.value,g=i.get(null!==(h=f.dataset.code)&&void 0!==h?h:"");g&&cm(f,g)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}null===(n=t.asyncRenderCallback)||void 0===n||n.call(t)}}));else if(d.length>0){var w=new Map(d),C=o.querySelectorAll("div[data-code]"),S=!0,L=!1,D=void 0;try{for(var N,I=C[Symbol.iterator]();!(S=(N=I.next()).done);S=!0){var E,M=N.value,T=w.get(null!==(E=M.dataset.code)&&void 0!==E?E:"");T&&cm(M,T)}}catch(e){L=!0,D=e}finally{try{S||null==I.return||I.return()}finally{if(L)throw D}}}if(t.asyncRenderCallback){var R=!0,A=!1,P=void 0;try{for(var O,F=function(){var e=O.value,n=i.add(cp(e,"load",(function(){n.dispose(),t.asyncRenderCallback()})))},W=o.getElementsByTagName("img")[Symbol.iterator]();!(R=(O=W.next()).done);R=!0)F()}catch(e){A=!0,P=e}finally{try{R||null==W.return||W.return()}finally{if(A)throw P}}}return{element:o,dispose:function(){r=!0,i.dispose()}}}function CT(e){if(!e)return"";var t=e.split(/[\s+|:|,|\{|\?]/,1);return t.length?t[0]:e}function ST(e,t){return/^\w[\w\d+.-]*:/.test(t)?t:e.path.endsWith("/")?tT(e,t).toString():tT(XM(e),t).toString()}var xT=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function LT(e,t){var n=function(e){var t,n=[Pv.http,Pv.https,Pv.mailto,Pv.data,Pv.file,Pv.vscodeFileResource,Pv.vscodeRemote,Pv.vscodeRemoteResource];e.isTrusted&&n.push(Pv.command);return{config:{ALLOWED_TAGS:null!==(t=e.allowedTags)&&void 0!==t?t:x(wm),ALLOWED_ATTR:DT,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:n}}(e),i=n.config,r=n.allowedSchemes,o=new Tu;o.add(ZT("uponSanitizeAttribute",(function(e,t){var n;if("style"!==t.attrName&&"class"!==t.attrName){if("INPUT"===e.tagName&&"checkbox"===(null===(n=e.attributes.getNamedItem("type"))||void 0===n?void 0:n.value)){if("type"===t.attrName&&"checkbox"===t.attrValue||"disabled"===t.attrName||"checked"===t.attrName)return void(t.keepAttr=!0);t.keepAttr=!1}}else{if("SPAN"===e.tagName){if("style"===t.attrName)return void(t.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(border-radius:[0-9]+px;)?$/.test(t.attrValue));if("class"===t.attrName)return void(t.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(t.attrValue))}t.keepAttr=!1}}))),o.add(ZT("uponSanitizeElement",(function(t,n){var i;"input"===n.tagName&&("checkbox"===(null===(i=t.attributes.getNamedItem("type"))||void 0===i?void 0:i.value)?t.setAttribute("disabled",""):e.replaceWithPlaintext||t.remove());if(e.replaceWithPlaintext&&!n.allowedTags[n.tagName]&&"body"!==n.tagName&&t.parentElement){var r,o;if("#comment"===n.tagName)r="\x3c!--".concat(t.textContent,"--\x3e");else{var a=xT.includes(n.tagName),s=t.attributes.length?" "+Array.from(t.attributes).map((function(e){return"".concat(e.name,'="').concat(e.value,'"')})).join(" "):"";r="<".concat(n.tagName).concat(s,">"),a||(o="</".concat(n.tagName,">"))}var l=document.createDocumentFragment(),u=t.parentElement.ownerDocument.createTextNode(r);l.appendChild(u);for(var c=o?t.parentElement.ownerDocument.createTextNode(o):void 0;t.firstChild;)l.appendChild(t.firstChild);c&&l.appendChild(c),t.nodeType===Node.COMMENT_NODE?t.parentElement.insertBefore(l,t):t.parentElement.replaceChild(l,t)}}))),o.add(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("a");return Ov("afterSanitizeAttributes",(function(i){for(var r=0,o=["href","src"];r<o.length;r++){var a=o[r];if(i.hasAttribute(a)){var s=i.getAttribute(a);if("href"===a&&s.startsWith("#"))continue;if(n.href=s,!e.includes(n.protocol.replace(/:$/,""))){if(t&&"src"===a&&n.href.startsWith("data:"))continue;i.removeAttribute(a)}}}})),Mu((function(){Fv("afterSanitizeAttributes")}))}(r));try{return Av(t,b(_({},i),{RETURN_TRUSTED_TYPE:!0}))}finally{o.dispose()}}var DT=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function NT(e){return"string"==typeof e?e:function(e){var t,n=null!==(t=e.value)&&void 0!==t?t:"";n.length>1e5&&(n="".concat(n.substr(0,1e5),"…"));var i=pT(n,{async:!1,renderer:ET.value}).replace(/&(#\d+|[a-zA-Z]+);/g,(function(e){var t;return null!==(t=IT.get(e))&&void 0!==t?t:e}));return LT({isTrusted:!1},i).toString()}(e)}var IT=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);var ET=new Vh((function(e){return function(){var e=new fT;return e.code=function(e){return e.text},e.blockquote=function(e){return e.text+"\n"},e.html=function(e){return""},e.heading=function(e){var t=e.tokens;return this.parser.parseInline(t)+"\n"},e.hr=function(){return""},e.list=function(e){var t=this;return e.items.map((function(e){return t.listitem(e)})).join("\n")+"\n"},e.listitem=function(e){return e.text+"\n"},e.paragraph=function(e){var t=e.tokens;return this.parser.parseInline(t)+"\n"},e.table=function(e){var t=this,n=e.header,i=e.rows;return n.map((function(e){return t.tablecell(e)})).join(" ")+"\n"+i.map((function(e){return e.map((function(e){return t.tablecell(e)})).join(" ")})).join("\n")+"\n"},e.tablerow=function(e){return e.text},e.tablecell=function(e){var t=e.tokens;return this.parser.parseInline(t)},e.strong=function(e){return e.text},e.em=function(e){return e.text},e.codespan=function(e){return e.text},e.br=function(e){return"\n"},e.del=function(e){return e.text},e.image=function(e){return""},e.text=function(e){return e.text},e.link=function(e){return e.text},e}()}));function MT(e){var t="";return e.forEach((function(e){t+=e.raw})),t}function TT(e){if(e.tokens)for(var t=e.tokens.length-1;t>=0;t--){var n=e.tokens[t];if("text"===n.type){var i=n.raw.split("\n"),r=i[i.length-1];if(r.includes("`"))return WT(e);if(r.includes("**"))return jT(e);if(r.match(/\*\w/))return BT(e);if(r.match(/(^|\s)__\w/))return KT(e);if(r.match(/(^|\s)_\w/))return HT(e);if(RT(r)||AT(r)&&e.tokens.slice(0,t).some((function(e){return"text"===e.type&&e.raw.match(/\[[^\]]*$/)}))){var o,a,s=e.tokens.slice(t+1);return"link"===(null===(o=s[0])||void 0===o?void 0:o.type)&&"text"===(null===(a=s[1])||void 0===a?void 0:a.type)&&s[1].raw.match(/^ *"[^"]*$/)||r.match(/^[^"]* +"[^"]*$/)?zT(e):VT(e)}if(r.match(/(^|\s)\[\w*/))return UT(e)}}}function RT(e){return!!e.match(/(^|\s)\[.*\]\(\w*/)}function AT(e){return!!e.match(/^[^\[]*\]\([^\)]*$/)}function PT(e){var t,n,i=e.items[e.items.length-1],r=i.tokens?i.tokens[i.tokens.length-1]:void 0;if("text"!==(null==r?void 0:r.type)||"inRawBlock"in i||(n=TT(r)),n&&"paragraph"===n.type){var o=MT(e.items.slice(0,-1)),a=null===(t=i.raw.match(/^(\s*(-|\d+\.|\*) +)/))||void 0===t?void 0:t[0];if(a){var s=a+MT(i.tokens.slice(0,-1))+n.raw,l=vT(o+s)[0];if("list"===l.type)return l}}}var OT=3;function FT(e){var t,n;for(t=0;t<e.length;t++){var i=e[t];if("paragraph"===i.type&&i.raw.match(/(\n|^)\|/)){n=GT(e.slice(t));break}if(t===e.length-1&&"list"===i.type){var r=PT(i);if(r){n=[r];break}}if(t===e.length-1&&"paragraph"===i.type){var o=TT(i);if(o){n=[o];break}}}if(n){var a=x(e.slice(0,t)).concat(x(n));return a.links=e.links,a}return null}function WT(e){return qT(e,"`")}function BT(e){return qT(e,"*")}function HT(e){return qT(e,"_")}function VT(e){return qT(e,")")}function zT(e){return qT(e,'")')}function UT(e){return qT(e,"](https://microsoft.com)")}function jT(e){return qT(e,"**")}function KT(e){return qT(e,"__")}function qT(e,t){var n=MT(Array.isArray(e)?e:[e]);return vT(n+t)[0]}function GT(e){for(var t,n=MT(e),i=n.split("\n"),r=!1,o=0;o<i.length;o++){var a=i[o].trim();if(void 0===t&&a.match(/^\s*\|/)){var s=a.match(/(\|[^\|]+)(?=\||$)/g);s&&(t=s.length)}else if("number"==typeof t){if(!a.match(/^\s*\|/))return;if(o!==i.length-1)return;r=!0}}if("number"==typeof t&&t>0){var l=r?i.slice(0,-1).join("\n"):n,u=!!l.match(/\|\s*$/),c=l+(u?"":"|")+"\n|".concat(" --- |".repeat(t));return vT(c)}}function ZT(e,t){return Ov(e,t),Mu((function(){return Fv(e)}))}var YT=function(){function e(t,n,i){u(this,e),this._lineTokensBrand=void 0,this._tokens=t,this._tokensCount=this._tokens.length>>>1,this._text=n,this.languageIdCodec=i}return h(e,[{key:"equals",value:function(t){return t instanceof e&&this.slicedEquals(t,0,this._tokensCount)}},{key:"slicedEquals",value:function(e,t,n){if(this._text!==e._text)return!1;if(this._tokensCount!==e._tokensCount)return!1;for(var i=t<<1,r=i+(n<<1),o=i;o<r;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}},{key:"getLineContent",value:function(){return this._text}},{key:"getCount",value:function(){return this._tokensCount}},{key:"getStartOffset",value:function(e){return e>0?this._tokens[e-1<<1]:0}},{key:"getMetadata",value:function(e){return this._tokens[1+(e<<1)]}},{key:"getLanguageId",value:function(e){var t=this._tokens[1+(e<<1)],n=Rx.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(n)}},{key:"getStandardTokenType",value:function(e){var t=this._tokens[1+(e<<1)];return Rx.getTokenType(t)}},{key:"getForeground",value:function(e){var t=this._tokens[1+(e<<1)];return Rx.getForeground(t)}},{key:"getClassName",value:function(e){var t=this._tokens[1+(e<<1)];return Rx.getClassNameFromMetadata(t)}},{key:"getInlineStyle",value:function(e,t){var n=this._tokens[1+(e<<1)];return Rx.getInlineStyleFromMetadata(n,t)}},{key:"getPresentation",value:function(e){var t=this._tokens[1+(e<<1)];return Rx.getPresentationFromMetadata(t)}},{key:"getEndOffset",value:function(e){return this._tokens[e<<1]}},{key:"findTokenIndexAtOffset",value:function(t){return e.findIndexInTokensArray(this._tokens,t)}},{key:"inflate",value:function(){return this}},{key:"sliceAndInflate",value:function(e,t,n){return new QT(this,e,t,n)}},{key:"withInserted",value:function(t){if(0===t.length)return this;for(var n=0,i=0,r="",o=new Array,a=0;;){var s=n<this._tokensCount?this._tokens[n<<1]:-1,l=i<t.length?t[i]:null;if(-1!==s&&(null===l||s<=l.offset)){r+=this._text.substring(a,s);var u=this._tokens[1+(n<<1)];o.push(r.length,u),n++,a=s}else{if(!l)break;if(l.offset>a){r+=this._text.substring(a,l.offset);var c=this._tokens[1+(n<<1)];o.push(r.length,c),a=l.offset}r+=l.text,o.push(r.length,l.tokenMetadata),i++}}return new e(new Uint32Array(o),r,this.languageIdCodec)}},{key:"getTokenText",value:function(e){var t=this.getStartOffset(e),n=this.getEndOffset(e);return this._text.substring(t,n)}},{key:"forEach",value:function(e){for(var t=this.getCount(),n=0;n<t;n++)e(n)}}],[{key:"createEmpty",value:function(t,n){var i=e.defaultTokenMetadata,r=new Uint32Array(2);return r[0]=t.length,r[1]=i,new e(r,t,n)}},{key:"createFromTextAndMetadata",value:function(t,n){var i=0,r="",o=new Array,a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value,h=d.text,f=d.metadata;o.push(i+h.length,f),i+=h.length,r+=h}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return new e(new Uint32Array(o),r,n)}},{key:"convertToEndOffset",value:function(e,t){for(var n=(e.length>>>1)-1,i=0;i<n;i++)e[i<<1]=e[i+1<<1];e[n<<1]=t}},{key:"findIndexInTokensArray",value:function(e,t){if(e.length<=2)return 0;for(var n=0,i=(e.length>>>1)-1;n<i;){var r=n+Math.floor((i-n)/2),o=e[r<<1];if(o===t)return r+1;o<t?n=r+1:o>t&&(i=r)}return n}}]),e}();YT.defaultTokenMetadata=33587200;var QT=function(){function e(t,n,i,r){u(this,e),this._source=t,this._startOffset=n,this._endOffset=i,this._deltaOffset=r,this._firstTokenIndex=t.findTokenIndexAtOffset(n),this.languageIdCodec=t.languageIdCodec,this._tokensCount=0;for(var o=this._firstTokenIndex,a=t.getCount();o<a;o++){if(t.getStartOffset(o)>=i)break;this._tokensCount++}}return h(e,[{key:"getMetadata",value:function(e){return this._source.getMetadata(this._firstTokenIndex+e)}},{key:"getLanguageId",value:function(e){return this._source.getLanguageId(this._firstTokenIndex+e)}},{key:"getLineContent",value:function(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}},{key:"equals",value:function(t){return t instanceof e&&(this._startOffset===t._startOffset&&this._endOffset===t._endOffset&&this._deltaOffset===t._deltaOffset&&this._source.slicedEquals(t._source,this._firstTokenIndex,this._tokensCount))}},{key:"getCount",value:function(){return this._tokensCount}},{key:"getStandardTokenType",value:function(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}},{key:"getForeground",value:function(e){return this._source.getForeground(this._firstTokenIndex+e)}},{key:"getEndOffset",value:function(e){var t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}},{key:"getClassName",value:function(e){return this._source.getClassName(this._firstTokenIndex+e)}},{key:"getInlineStyle",value:function(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}},{key:"getPresentation",value:function(e){return this._source.getPresentation(this._firstTokenIndex+e)}},{key:"findTokenIndexAtOffset",value:function(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}},{key:"getTokenText",value:function(e){var t=this._firstTokenIndex+e,n=this._source.getStartOffset(t),i=this._source.getEndOffset(t),r=this._source.getTokenText(t);return n<this._startOffset&&(r=r.substring(this._startOffset-n)),i>this._endOffset&&(r=r.substring(0,r.length-(i-this._endOffset))),r}},{key:"forEach",value:function(e){for(var t=0;t<this.getCount();t++)e(t)}}]),e}();var XT=new(function(){function e(){u(this,e)}return h(e,[{key:"clone",value:function(){return this}},{key:"equals",value:function(e){return this===e}}]),e}());function $T(e,t){return new Sd([new Cd(0,"",e)],t)}function JT(e,t){var n=new Uint32Array(2);return n[0]=0,n[1]=(32768|e|2<<24)>>>0,new xd(n,null===t?XT:t)}var eR={getInitialState:function(){return XT},tokenizeEncoded:function(e,t,n){return JT(0,n)}};function tR(e,t,n){return nR.apply(this,arguments)}function nR(){return nR=s((function(e,t,n){var i;return E(this,(function(r){switch(r.label){case 0:return n?[4,Rh.getOrCreate(n)]:[2,rR(t,e.languageIdCodec,eR)];case 1:return i=r.sent(),[2,rR(t,e.languageIdCodec,i||eR)]}}))})),nR.apply(this,arguments)}function iR(e,t,n,i,r,o,a){for(var s="<div>",l=i,u=0,c=!0,d=0,h=t.getCount();d<h;d++){var f=t.getEndOffset(d);if(!(f<=i)){for(var g="";l<f&&l<r;l++){var v=e.charCodeAt(l);switch(v){case 9:var p=o-(l+u)%o;for(u+=p-1;p>0;)a&&c?(g+="&#160;",c=!1):(g+=" ",c=!0),p--;break;case 60:g+="&lt;",c=!1;break;case 62:g+="&gt;",c=!1;break;case 38:g+="&amp;",c=!1;break;case 0:g+="&#00;",c=!1;break;case 65279:case 8232:case 8233:case 133:g+="�",c=!1;break;case 13:g+="&#8203",c=!1;break;case 32:a&&c?(g+="&#160;",c=!1):(g+=" ",c=!0);break;default:g+=String.fromCharCode(v),c=!1}}if(s+='<span style="'.concat(t.getInlineStyle(d,n),'">').concat(g,"</span>"),f>r||l>=r)break}}return s+="</div>"}function rR(e,t,n){for(var i='<div class="monaco-tokenized-source">',r=Xh(e),o=n.getInitialState(),a=0,s=r.length;a<s;a++){var l=r[a];a>0&&(i+="<br/>");var u=n.tokenizeEncoded(l,!0,o);YT.convertToEndOffset(u.tokens,l.length);for(var c=new YT(u.tokens,l,t).inflate(),d=0,h=0,f=c.getCount();h<f;h++){var g=c.getClassName(h),v=c.getEndOffset(h);i+='<span class="'.concat(g,'">').concat(Kh(l.substring(d,v)),"</span>"),d=v}o=u.endState}return i+="</div>"}var oR,aR=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},sR=function(e,t){return function(n,i){t(n,i,e)}},lR=(ft=function(){function e(t,n,i){u(this,e),this._options=t,this._languageService=n,this._openerService=i,this._onDidRenderAsync=new Zu,this.onDidRenderAsync=this._onDidRenderAsync.event}return h(e,[{key:"dispose",value:function(){this._onDidRenderAsync.dispose()}},{key:"render",value:function(e,t,n){if(!e)return{element:document.createElement("span"),dispose:function(){}};var i=new Tu,r=i.add(wT(e,_({},this._getRenderOptions(e,i),t),n));return r.element.classList.add("rendered-markdown"),{element:r.element,dispose:function(){return i.dispose()}}}},{key:"_getRenderOptions",value:function(e,t){var n=this,i=this;return{codeBlockRenderer:function(){var e=s((function(e,t){var n,r,o,a,s,l,u;return E(this,(function(c){switch(c.label){case 0:return e?r=i._languageService.getLanguageIdByLanguageName(e):i._options.editor&&(r=null===(o=i._options.editor.getModel())||void 0===o?void 0:o.getLanguageId()),r||(r=kk),[4,tR(i._languageService,t,r)];case 1:return a=c.sent(),(s=document.createElement("span")).innerHTML=null!==(l=null===(n=oR._ttpTokenizer)||void 0===n?void 0:n.createHTML(a))&&void 0!==l?l:a,i._options.editor?(u=i._options.editor.getOption(50),Om(s,u)):i._options.codeBlockFontFamily&&(s.style.fontFamily=i._options.codeBlockFontFamily),void 0!==i._options.codeBlockFontSize&&(s.style.fontSize=i._options.codeBlockFontSize),[2,s]}}))}));return function(t,n){return e.apply(this,arguments)}}(),asyncRenderCallback:function(){return n._onDidRenderAsync.fire()},actionHandler:{callback:function(t){return uR(n._openerService,t,e.isTrusted)},disposables:t}}}}]),e}(),oR=ft,ft._ttpTokenizer=rb("tokenizeToString",{createHTML:function(e){return e}}),ft);function uR(e,t,n){return cR.apply(this,arguments)}function cR(){return cR=s((function(e,t,n){return E(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e.open(t,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:dR(n)})];case 1:return[2,i.sent()];case 2:return vu(i.sent()),[2,!1];case 3:return[2]}}))})),cR.apply(this,arguments)}function dR(e){return!0===e||!(!e||!Array.isArray(e.enabledCommands))&&e.enabledCommands}lR=oR=aR([sR(1,Jb),sR(2,xE)],lR);var hR,fR,gR,vR,pR,mR=Zm("accessibilityService"),yR=new jy("accessibilityModeEnabled",!1);function _R(e){hR&&(fR.textContent!==e?(lp(gR),kR(fR,e)):(lp(fR),kR(gR,e)))}function bR(e){hR&&(vR.textContent!==e?(lp(pR),kR(vR,e)):(lp(vR),kR(pR,e)))}function kR(e,t){lp(e),t.length>2e4&&(t=t.substr(0,2e4)),e.textContent=t,e.style.visibility="hidden",e.style.visibility="visible"}var wR=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},CR=function(e,t){return function(n,i){t(n,i,e)}},SR=gm,xR=function(e){function t(e,n,i,r,o,a){var s,c,d,h,f,g,v,p,m;(u(this,t),(s=l(this,t))._keybindingService=n,s._configurationService=i,s._openerService=r,s._instantiationService=o,s._accessibilityService=a,s._messageListeners=new Tu,s._isDisposed=!1,s._forcePosition=!1,s._x=0,s._y=0,s._isLocked=!1,s._enableFocusTraps=!1,s._addedFocusTrap=!1,s._onDispose=s._register(new Zu),s._onRequestLayout=s._register(new Zu),s._linkHandler=e.linkHandler||function(t){return uR(s._openerService,t,sT(e.content)?e.content.isTrusted:void 0)},s._target="targetElements"in e.target?e.target:new IR(e.target),s._hoverPointer=(null===(c=e.appearance)||void 0===c?void 0:c.showPointer)?SR("div.workbench-hover-pointer"):void 0,s._hover=s._register(new bE),s._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),(null===(d=e.appearance)||void 0===d?void 0:d.compact)&&s._hover.containerDomNode.classList.add("workbench-hover","compact"),(null===(h=e.appearance)||void 0===h?void 0:h.skipFadeInAnimation)&&s._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses)&&(p=s._hover.containerDomNode.classList).add.apply(p,x(e.additionalClasses));(null===(f=e.position)||void 0===f?void 0:f.forcePosition)&&(s._forcePosition=!0),e.trapFocus&&(s._enableFocusTraps=!0),s._hoverPosition=null!==(m=null===(g=e.position)||void 0===g?void 0:g.hoverPosition)&&void 0!==m?m:3,s.onmousedown(s._hover.containerDomNode,(function(e){return e.stopPropagation()})),s.onkeydown(s._hover.containerDomNode,(function(e){e.equals(9)&&s.dispose()})),s._register(cp(s._targetWindow,"blur",(function(){return s.dispose()})));var y,_,b=SR("div.hover-row.markdown-hover"),k=SR("div.hover-contents");if("string"==typeof e.content)k.textContent=e.content,k.style.whiteSpace="pre-wrap";else if(Jp(e.content))k.appendChild(e.content),k.classList.add("html-hover-contents");else{var w=e.content,C=s._instantiationService.createInstance(lR,{codeBlockFontFamily:s._configurationService.getValue("editor").fontFamily||uu.fontFamily}).render(w,{actionHandler:{callback:function(e){return s._linkHandler(e)},disposables:s._messageListeners},asyncRenderCallback:function(){k.classList.add("code-hover-contents"),s.layout(),s._onRequestLayout.fire()}}).element;k.appendChild(C)}if(b.appendChild(k),s._hover.contentsDomNode.appendChild(b),e.actions&&e.actions.length>0){var S=SR("div.hover-row.status-bar"),L=SR("div.actions");e.actions.forEach((function(e){var t=s._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;kE.render(L,{label:e.label,commandId:e.commandId,run:function(t){e.run(t),s.dispose()},iconClass:e.iconClass},n)})),S.appendChild(L),s._hover.containerDomNode.appendChild(S)}(s._hoverContainer=SR("div.workbench-hover-container"),s._hoverPointer&&s._hoverContainer.appendChild(s._hoverPointer),s._hoverContainer.appendChild(s._hover.containerDomNode),e.actions&&e.actions.length>0)?y=!1:y=void 0===(null===(_=e.persistence)||void 0===_?void 0:_.hideOnHover)?"string"==typeof e.content||sT(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):e.persistence.hideOnHover;if(null===(v=e.appearance)||void 0===v?void 0:v.showHoverHint){var D=SR("div.hover-row.status-bar"),N=SR("div.info");N.textContent=Xa("hoverhint","Hold {0} key to mouse over",ms?"Option":"Alt"),D.appendChild(N),s._hover.containerDomNode.appendChild(D)}var I=x(s._target.targetElements);y||I.push(s._hoverContainer);var E=s._register(new NR(I));if(s._register(E.onMouseOut((function(){s._isLocked||s.dispose()}))),y){var M=x(s._target.targetElements).concat([s._hoverContainer]);s._lockMouseTracker=s._register(new NR(M)),s._register(s._lockMouseTracker.onMouseOut((function(){s._isLocked||s.dispose()})))}else s._lockMouseTracker=E;return s}return p(t,e),h(t,[{key:"_targetWindow",get:function(){return ep(this._target.targetElements[0])}},{key:"_targetDocumentElement",get:function(){return ep(this._target.targetElements[0]).document.documentElement}},{key:"isDisposed",get:function(){return this._isDisposed}},{key:"isMouseIn",get:function(){return this._lockMouseTracker.isMouseIn}},{key:"domNode",get:function(){return this._hover.containerDomNode}},{key:"onDispose",get:function(){return this._onDispose.event}},{key:"onRequestLayout",get:function(){return this._onRequestLayout.event}},{key:"anchor",get:function(){return 2===this._hoverPosition?0:1}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"isLocked",get:function(){return this._isLocked},set:function(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}},{key:"addFocusTrap",value:function(){if(this._enableFocusTraps&&!this._addedFocusTrap){this._addedFocusTrap=!0;var e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){var n=um(this._hoverContainer,SR("div")),i=lm(this._hoverContainer,SR("div"));n.tabIndex=0,i.tabIndex=0,this._register(cp(i,"focus",(function(t){e.focus(),t.preventDefault()}))),this._register(cp(n,"focus",(function(e){t.focus(),e.preventDefault()})))}}}},{key:"findLastFocusableChild",value:function(e){if(e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes.item(e.childNodes.length-t-1);if(n.nodeType===n.ELEMENT_NODE){var i=n;if("number"==typeof i.tabIndex&&i.tabIndex>=0)return i}var r=this.findLastFocusableChild(n);if(r)return r}}},{key:"render",value:function(e){var t;e.appendChild(this._hoverContainer);var n=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&wE(!0===this._configurationService.getValue("accessibility.verbosity.hover")&&this._accessibilityService.isScreenReaderOptimized(),null===(t=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))||void 0===t?void 0:t.getAriaLabel());n&&bR(n),this.layout(),this.addFocusTrap()}},{key:"layout",value:function(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";var e=function(e){var t=Lp(e),n=e.getBoundingClientRect();return{top:n.top*t,bottom:n.bottom*t,right:n.right*t,left:n.left*t}},t=this._target.targetElements.map((function(t){return e(t)}))[0],n=t.top,i=t.right,r=t.bottom,o=t.left,a=i-o,s=r-n,l={top:n,right:i,bottom:r,left:o,width:a,height:s,center:{x:o+a/2,y:n+s/2}};if(this.adjustHorizontalHoverPosition(l),this.adjustVerticalHoverPosition(l),this.adjustHoverMaxHeight(l),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:l.left+=3,l.right+=3,this._hoverContainer.style.paddingLeft="".concat(3,"px"),this._hoverContainer.style.marginLeft="".concat(-3,"px");break;case 0:l.left-=3,l.right-=3,this._hoverContainer.style.paddingRight="".concat(3,"px"),this._hoverContainer.style.marginRight="".concat(-3,"px");break;case 2:l.top+=3,l.bottom+=3,this._hoverContainer.style.paddingTop="".concat(3,"px"),this._hoverContainer.style.marginTop="".concat(-3,"px");break;case 3:l.top-=3,l.bottom-=3,this._hoverContainer.style.paddingBottom="".concat(3,"px"),this._hoverContainer.style.marginBottom="".concat(-3,"px")}l.center.x=l.left+a/2,l.center.y=l.top+s/2}this.computeXCordinate(l),this.computeYCordinate(l),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(l)),this._hover.onContentsChanged()}},{key:"computeXCordinate",value:function(e){var t=this._hover.containerDomNode.clientWidth+2;void 0!==this._target.x?this._x=this._target.x:1===this._hoverPosition?this._x=e.right:0===this._hoverPosition?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}},{key:"computeYCordinate",value:function(e){void 0!==this._target.y?this._y=this._target.y:3===this._hoverPosition?this._y=e.top:2===this._hoverPosition?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}},{key:"adjustHorizontalHoverPosition",value:function(e){if(void 0===this._target.x){var t=this._hoverPointer?3:0;if(this._forcePosition){var n=t+2;1===this._hoverPosition?this._hover.containerDomNode.style.maxWidth="".concat(this._targetDocumentElement.clientWidth-e.right-n,"px"):0===this._hoverPosition&&(this._hover.containerDomNode.style.maxWidth="".concat(e.left-n,"px"))}else{if(1===this._hoverPosition){if(this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t)e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2}else if(0===this._hoverPosition){if(e.left<this._hover.containerDomNode.clientWidth+t)this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2;e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1)}}}}},{key:"adjustVerticalHoverPosition",value:function(e){if(void 0===this._target.y&&!this._forcePosition){var t=this._hoverPointer?3:0;3===this._hoverPosition?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):2===this._hoverPosition&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}}},{key:"adjustHoverMaxHeight",value:function(e){var t=this._targetWindow.innerHeight/2;if(this._forcePosition){var n=2+(this._hoverPointer?3:0);3===this._hoverPosition?t=Math.min(t,e.top-n):2===this._hoverPosition&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-n))}if(this._hover.containerDomNode.style.maxHeight="".concat(t,"px"),this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){var i="".concat(this._hover.scrollbar.options.verticalScrollbarSize,"px");this._hover.contentsDomNode.style.paddingRight!==i&&(this._hover.contentsDomNode.style.paddingRight=i)}}},{key:"setHoverPointerPosition",value:function(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:this._hoverPointer.classList.add(0===this._hoverPosition?"right":"left");var t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top="".concat(e.center.y-(this._y-t)-3,"px"):this._hoverPointer.style.top="".concat(Math.round(t/2)-3,"px");break;case 3:case 2:this._hoverPointer.classList.add(3===this._hoverPosition?"bottom":"top");var n=this._hover.containerDomNode.clientWidth,i=Math.round(n/2)-3,r=this._x+i;(r<e.left||r>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left="".concat(i,"px")}}},{key:"focus",value:function(){this._hover.containerDomNode.focus()}},{key:"dispose",value:function(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),g(v(t.prototype),"dispose",this).call(this)),this._isDisposed=!0}}]),t}(eE);xR=wR([CR(1,ZI),CR(2,qb),CR(3,xE),CR(4,Gm),CR(5,mR)],xR);var LR,DR,NR=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._elements=e,n._isMouseIn=!0,n._onMouseOut=n._register(new Zu),n._elements.forEach((function(e){return n.onmouseover(e,(function(){return n._onTargetMouseOver(e)}))})),n._elements.forEach((function(e){return n.onmouseleave(e,(function(){return n._onTargetMouseLeave(e)}))})),n}return p(t,e),h(t,[{key:"onMouseOut",get:function(){return this._onMouseOut.event}},{key:"isMouseIn",get:function(){return this._isMouseIn}},{key:"_onTargetMouseOver",value:function(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}},{key:"_onTargetMouseLeave",value:function(e){this._isMouseIn=!1,this._evaluateMouseState(e)}},{key:"_evaluateMouseState",value:function(e){var t=this;this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=ep(e).setTimeout((function(){return t._fireIfMouseOutside()}),0)}},{key:"_clearEvaluateMouseStateTimeout",value:function(e){this._mouseTimeout&&(ep(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}},{key:"_fireIfMouseOutside",value:function(){this._isMouseIn||this._onMouseOut.fire()}}]),t}(eE),IR=function(){function e(t){u(this,e),this._element=t,this.targetElements=[this._element]}return h(e,[{key:"dispose",value:function(){}}]),e}();function ER(e,t,n){var i=n.mode===DR.ALIGN?n.offset:n.offset+n.size,r=n.mode===DR.ALIGN?n.offset+n.size:n.offset;return 0===n.position?t<=e-i?i:t<=r?r-t:Math.max(e-t,0):t<=r?r-t:t<=e-i?i:0}!function(e){function t(e,t){if(e.start>=t.end||t.start>=e.end)return{start:0,end:0};var n=Math.max(e.start,t.start),i=Math.min(e.end,t.end);return i-n<=0?{start:0,end:0}:{start:n,end:i}}function n(e){return e.end-e.start<=0}e.intersect=t,e.isEmpty=n,e.intersects=function(e,i){return!n(t(e,i))},e.relativeComplement=function(e,t){var i=[],r={start:e.start,end:Math.min(t.start,e.end)},o={start:Math.max(t.end,e.start),end:e.end};return n(r)||i.push(r),n(o)||i.push(o),i}}(LR||(LR={})),function(e){e[e.AVOID=0]="AVOID",e[e.ALIGN=1]="ALIGN"}(DR||(DR={}));var MR=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).container=null,i.useFixedPosition=!1,i.useShadowDOM=!1,i.delegate=null,i.toDisposeOnClean=Ru.None,i.toDisposeOnSetContainer=Ru.None,i.shadowRoot=null,i.shadowRootHostElement=null,i.view=gm(".context-view"),pm(i.view),i.setContainer(e,n),i._register(Mu((function(){return i.setContainer(null,1)}))),i}return p(t,e),h(t,[{key:"setContainer",value:function(e,n){var i=this;this.useFixedPosition=1!==n;var r=this.useShadowDOM;if(this.useShadowDOM=3===n,e!==this.container||r!==this.useShadowDOM){if(this.container){var o;if(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot)this.shadowRoot=null,null===(o=this.shadowRootHostElement)||void 0===o||o.remove(),this.shadowRootHostElement=null;this.container=null}if(e){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=gm(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});var a=document.createElement("style");a.textContent=TR,this.shadowRoot.appendChild(a),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(gm("slot"))}else this.container.appendChild(this.view);var s=new Tu;t.BUBBLE_UP_EVENTS.forEach((function(e){s.add(hp(i.container,e,(function(e){i.onDOMEvent(e,!1)})))})),t.BUBBLE_DOWN_EVENTS.forEach((function(e){s.add(hp(i.container,e,(function(e){i.onDOMEvent(e,!0)}),!0))})),this.toDisposeOnSetContainer=s}}}},{key:"show",value:function(e){var t,n,i;this.isVisible()&&this.hide(),lp(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="".concat(2575+(null!==(i=e.layer)&&void 0!==i?i:0)),this.view.style.position=this.useFixedPosition?"fixed":"absolute",vm(this.view),this.toDisposeOnClean=e.render(this.view)||Ru.None,this.delegate=e,this.doLayout(),null===(t=(n=this.delegate).focus)||void 0===t||t.call(n)}},{key:"getViewElement",value:function(){return this.view}},{key:"layout",value:function(){var e,t;this.isVisible()&&(!1!==this.delegate.canRelayout||ws&&Qf?(null===(t=this.delegate)||void 0===t||null===(e=t.layout)||void 0===e||e.call(t),this.doLayout()):this.hide())}},{key:"doLayout",value:function(){if(this.isVisible()){var e,t=this.delegate.getAnchor();if(Jp(t)){var n=xp(t),i=Lp(t);e={top:n.top*i,left:n.left*i,width:n.width*i,height:n.height*i}}else e=function(e){var t=e;return!!t&&"number"==typeof t.x&&"number"==typeof t.y}(t)?{top:t.y,left:t.x,width:t.width||1,height:t.height||2}:{top:t.posy,left:t.posx,width:2,height:2};var r,o,a=Dp(this.view),s=Ep(this.view),l=this.delegate.anchorPosition||0,u=this.delegate.anchorAlignment||0,c=this.delegate.anchorAxisAlignment||0,d=Hp();if(0===c){var h={offset:e.top-d.pageYOffset,size:e.height,position:0===l?0:1},f={offset:e.left,size:e.width,position:0===u?0:1,mode:DR.ALIGN};r=ER(d.innerHeight,s,h)+d.pageYOffset,LR.intersects({start:r,end:r+s},{start:h.offset,end:h.offset+h.size})&&(f.mode=DR.AVOID),o=ER(d.innerWidth,a,f)}else{var g={offset:e.left,size:e.width,position:0===u?0:1},v={offset:e.top,size:e.height,position:0===l?0:1,mode:DR.ALIGN};o=ER(d.innerWidth,a,g),LR.intersects({start:o,end:o+a},{start:g.offset,end:g.offset+g.size})&&(v.mode=DR.AVOID),r=ER(d.innerHeight,s,v)+d.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(0===l?"bottom":"top"),this.view.classList.add(0===u?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);var p=xp(this.container);this.view.style.top="".concat(r-(this.useFixedPosition?xp(this.view).top:p.top),"px"),this.view.style.left="".concat(o-(this.useFixedPosition?xp(this.view).left:p.left),"px"),this.view.style.width="initial"}}},{key:"hide",value:function(e){var t=this.delegate;this.delegate=null,(null==t?void 0:t.onHide)&&t.onHide(e),this.toDisposeOnClean.dispose(),pm(this.view)}},{key:"isVisible",value:function(){return!!this.delegate}},{key:"onDOMEvent",value:function(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,ep(e).document.activeElement):t&&!Mp(e.target,this.container)&&this.hide())}},{key:"dispose",value:function(){this.hide(),g(v(t.prototype),"dispose",this).call(this)}}]),t}(Ru);MR.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],MR.BUBBLE_DOWN_EVENTS=["click"];var TR='\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t.codicon[class*=\'codicon-\'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }\n\n\t:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }\n',RR=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},AR=function(e,t){return function(n,i){t(n,i,e)}},PR=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).layoutService=e,n.contextView=n._register(new MR(n.layoutService.mainContainer,1)),n.layout(),n._register(e.onDidLayoutContainer((function(){return n.layout()}))),n}return p(t,e),h(t,[{key:"showContextView",value:function(e,t,n){var i,r=this;i=t?t===this.layoutService.getContainer(ep(t))?1:n?3:2:1,this.contextView.setContainer(null!=t?t:this.layoutService.activeContainer,i),this.contextView.show(e);var o={close:function(){r.openContextView===o&&r.hideContextView()}};return this.openContextView=o,o}},{key:"layout",value:function(){this.contextView.layout()}},{key:"hideContextView",value:function(e){this.contextView.hide(e),this.openContextView=void 0}}]),t}(Ru),OR=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"getContextViewElement",value:function(){return this.contextView.getViewElement()}}]),t}(PR=RR([AR(0,QS)],PR)),FR=function(){function e(t,n,i){u(this,e),this.hoverDelegate=t,this.target=n,this.fadeInAnimation=i}return h(e,[{key:"update",value:function(e,t,n){var i=this;return s((function(){var r,o,a;return E(this,(function(s){switch(s.label){case 0:return i._cancellationTokenSource&&(i._cancellationTokenSource.dispose(!0),i._cancellationTokenSource=void 0),i.isDisposed?[2]:void 0===e||Da(e)||Jp(e)?(r=e,[3,4]):[3,1];case 1:return Wa(e.markdown)?[3,2]:(r=null!==(o=e.markdown)&&void 0!==o?o:e.markdownNotSupportedFallback,[3,4]);case 2:return i._hoverWidget||i.show(Xa("iconLabel.loading","Loading..."),t,n),i._cancellationTokenSource=new rc,a=i._cancellationTokenSource.token,[4,e.markdown(a)];case 3:if(void 0===(r=s.sent())&&(r=e.markdownNotSupportedFallback),i.isDisposed||a.isCancellationRequested)return[2];s.label=4;case 4:return i.show(r,t,n),[2]}}))}))()}},{key:"show",value:function(e,t,n){var i=this._hoverWidget;if(this.hasContent(e)){var r,o={content:e,target:this.target,actions:null==n?void 0:n.actions,linkHandler:null==n?void 0:n.linkHandler,trapFocus:null==n?void 0:n.trapFocus,appearance:{showPointer:"element"===this.hoverDelegate.placement,skipFadeInAnimation:!this.fadeInAnimation||!!i,showHoverHint:null==n||null===(r=n.appearance)||void 0===r?void 0:r.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(o,t)}null==i||i.dispose()}},{key:"hasContent",value:function(e){return!!e&&(!sT(e)||!!e.value)}},{key:"isDisposed",get:function(){var e;return null===(e=this._hoverWidget)||void 0===e?void 0:e.isDisposed}},{key:"dispose",value:function(){var e,t;null===(e=this._hoverWidget)||void 0===e||e.dispose(),null===(t=this._cancellationTokenSource)||void 0===t||t.dispose(!0),this._cancellationTokenSource=void 0}}]),e}(),WR=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},BR=function(e,t){return function(n,i){t(n,i,e)}},HR=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t))._instantiationService=e,a._keybindingService=i,a._layoutService=r,a._accessibilityService=o,a._managedHovers=new Map,n.onDidShowContextMenu((function(){return a.hideHover()})),a._contextViewHandler=a._register(new PR(a._layoutService)),a}return p(t,e),h(t,[{key:"showHover",value:function(e,t,n){var i,r,o,a,s=this;if(!(VR(this._currentHoverOptions)===VR(e)||this._currentHover&&(null===(r=this._currentHoverOptions)||void 0===r||null===(i=r.persistence)||void 0===i?void 0:i.sticky))){this._currentHoverOptions=e,this._lastHoverOptions=e;var l=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),u=Op();n||(l&&u?u.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=u):this._lastFocusedElementBeforeOpen=void 0);var c=new Tu,d=this._instantiationService.createInstance(xR,e);if((null===(o=e.persistence)||void 0===o?void 0:o.sticky)&&(d.isLocked=!0),d.onDispose((function(){var t,n;(null===(t=s._currentHover)||void 0===t?void 0:t.domNode)&&Wp(s._currentHover.domNode)&&(null===(n=s._lastFocusedElementBeforeOpen)||void 0===n||n.focus());s._currentHoverOptions===e&&(s._currentHoverOptions=void 0),c.dispose()}),void 0,c),!e.container){var h=Jp(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(ep(h))}if(this._contextViewHandler.showContextView(new zR(d,t),e.container),d.onRequestLayout((function(){return s._contextViewHandler.layout()}),void 0,c),null===(a=e.persistence)||void 0===a?void 0:a.sticky)c.add(cp(ep(e.container).document,rm.MOUSE_DOWN,(function(e){Mp(e.target,d.domNode)||s.doHideHover()})));else{if("targetElements"in e.target){var f=!0,g=!1,v=void 0;try{for(var p,m=e.target.targetElements[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value;c.add(cp(y,rm.CLICK,(function(){return s.hideHover()})))}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}}else c.add(cp(e.target,rm.CLICK,(function(){return s.hideHover()})));var _=Op();if(_){var b=ep(_).document;c.add(cp(_,rm.KEY_DOWN,(function(t){var n;return s._keyDown(t,d,!!(null===(n=e.persistence)||void 0===n?void 0:n.hideOnKeyDown))}))),c.add(cp(b,rm.KEY_DOWN,(function(t){var n;return s._keyDown(t,d,!!(null===(n=e.persistence)||void 0===n?void 0:n.hideOnKeyDown))}))),c.add(cp(_,rm.KEY_UP,(function(e){return s._keyUp(e,d)}))),c.add(cp(b,rm.KEY_UP,(function(e){return s._keyUp(e,d)})))}}if("IntersectionObserver"in Fh){var k=new IntersectionObserver((function(e){return s._intersectionChange(e,d)}),{threshold:0}),w="targetElements"in e.target?e.target.targetElements[0]:e.target;k.observe(w),c.add(Mu((function(){return k.disconnect()})))}return this._currentHover=d,d}}},{key:"hideHover",value:function(){var e;!(null===(e=this._currentHover)||void 0===e?void 0:e.isLocked)&&this._currentHoverOptions&&this.doHideHover()}},{key:"doHideHover",value:function(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}},{key:"_intersectionChange",value:function(e,t){e[e.length-1].isIntersecting||t.dispose()}},{key:"showAndFocusLastHover",value:function(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}},{key:"_keyDown",value:function(e,t,n){var i;if("Alt"!==e.key){var r,o=new rg(e);if(!this._keybindingService.resolveKeyboardEvent(o).getSingleModifierDispatchChords().some((function(e){return!!e}))&&0===this._keybindingService.softDispatch(o,o.target).kind)if(n&&(!(null===(i=this._currentHoverOptions)||void 0===i?void 0:i.trapFocus)||"Tab"!==e.key))this.hideHover(),null===(r=this._lastFocusedElementBeforeOpen)||void 0===r||r.focus()}else t.isLocked=!0}},{key:"_keyUp",value:function(e,t){var n;"Alt"===e.key&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),null===(n=this._lastFocusedElementBeforeOpen)||void 0===n||n.focus()))}},{key:"setupManagedHover",value:function(e,t,n,i){var r,o,a=this;t.setAttribute("custom-hover","true"),""!==t.title&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");var l,u=function(t,n){var i,a=void 0!==o;(t&&(null==o||o.dispose(),o=void 0),n&&(null==r||r.dispose(),r=void 0),a)&&(null===(i=e.onDidHideHover)||void 0===i||i.call(e),o=void 0)},c=function(r,a,l,u){return new wg(s((function(){return E(this,(function(s){switch(s.label){case 0:return o&&!o.isDisposed?[3,2]:[4,(o=new FR(e,l||t,r>0)).update("function"==typeof n?n():n,a,b(_({},i),{trapFocus:u}))];case 1:s.sent(),s.label=2;case 2:return[2]}}))})),r)},d=!1,h=cp(t,rm.MOUSE_DOWN,(function(){d=!0,u(!0,!0)}),!0),f=cp(t,rm.MOUSE_UP,(function(){d=!1}),!0),g=cp(t,rm.MOUSE_LEAVE,(function(e){d=!1,u(!1,e.fromElement===t)}),!0),v=cp(t,rm.MOUSE_OVER,(function(n){if(!r){var i=new Tu,o={targetElements:[t],dispose:function(){}};if(void 0===e.placement||"mouse"===e.placement){i.add(cp(t,rm.MOUSE_MOVE,(function(e){o.x=e.x+10,Jp(e.target)&&UR(e.target,t)!==t&&u(!0,!0)}),!0))}r=i,Jp(n.target)&&UR(n.target,t)!==t||i.add(c(e.delay,!1,o))}}),!0),p=t.tagName.toLowerCase();"input"!==p&&"textarea"!==p&&(l=cp(t,rm.FOCUS,(function(){if(!d&&!r){var n={targetElements:[t],dispose:function(){}},i=new Tu;i.add(cp(t,rm.BLUR,(function(){return u(!0,!0)}),!0)),i.add(c(e.delay,!1,n)),r=i}}),!0));var m={show:function(e){u(!1,!0),c(0,e,void 0,e)},hide:function(){u(!0,!0)},update:function(){var e=s((function(e,t){return E(this,(function(i){switch(i.label){case 0:return n=e,[4,null==o?void 0:o.update(n,void 0,t)];case 1:return i.sent(),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),dispose:function(){a._managedHovers.delete(t),v.dispose(),g.dispose(),h.dispose(),f.dispose(),null==l||l.dispose(),u(!0,!0)}};return this._managedHovers.set(t,m),m}},{key:"showManagedHover",value:function(e){var t=this._managedHovers.get(e);t&&t.show(!0)}},{key:"dispose",value:function(){this._managedHovers.forEach((function(e){return e.dispose()})),g(v(t.prototype),"dispose",this).call(this)}}]),t}(Ru);function VR(e){var t;if(void 0!==e)return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:e}HR=WR([BR(0,Gm),BR(1,GI),BR(2,ZI),BR(3,QS),BR(4,mR)],HR);var zR=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u(this,e),this._hover=t,this._focus=n,this.layer=1}return h(e,[{key:"anchorPosition",get:function(){return this._hover.anchor}},{key:"render",value:function(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}},{key:"getAnchor",value:function(){return{x:this._hover.x,y:this._hover.y}}},{key:"layout",value:function(){this._hover.layout()}}]),e}();function UR(e,t){for(t=null!=t?t:ep(e).document.body;!e.hasAttribute("custom-hover")&&e!==t;)e=e.parentElement;return e}nk(jI,HR,1),VS((function(e,t){var n=e.getColor(xD);n&&(t.addRule(".monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ".concat(n.transparent(.5),"; }")),t.addRule(".monaco-workbench .workbench-hover hr { border-top: 1px solid ".concat(n.transparent(.5),"; }")))}));var jR=Zm("IWorkspaceEditService"),KR=function(){function e(t){u(this,e),this.metadata=t}return h(e,null,[{key:"convert",value:function(e){return e.edits.map((function(e){if(qR.is(e))return qR.lift(e);if(GR.is(e))return GR.lift(e);throw new Error("Unsupported edit")}))}}]),e}(),qR=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return u(this,t),(i=l(this,t,[o])).resource=e,i.textEdit=n,i.versionId=r,i}return p(t,e),h(t,null,[{key:"is",value:function(e){return e instanceof t||Na(e)&&ed.isUri(e.resource)&&Na(e.textEdit)}},{key:"lift",value:function(e){return e instanceof t?e:new t(e.resource,e.textEdit,e.versionId,e.metadata)}}]),t}(KR),GR=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;return u(this,t),(i=l(this,t,[o])).oldResource=e,i.newResource=n,i.options=r,i}return p(t,e),h(t,null,[{key:"is",value:function(e){return e instanceof t||Na(e)&&(Boolean(e.newResource)||Boolean(e.oldResource))}},{key:"lift",value:function(e){return e instanceof t?e:new t(e.oldResource,e.newResource,e.options,e.metadata)}}]),t}(KR),ZR={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1},YR=Object.freeze({id:"editor",order:5,type:"object",title:Xa("editorConfigurationTitle","Editor"),scope:5}),QR=b(_({},YR),{properties:{"editor.tabSize":{type:"number",default:Ws.tabSize,minimum:1,markdownDescription:Xa("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:Xa("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Ws.insertSpaces,markdownDescription:Xa("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Ws.detectIndentation,markdownDescription:Xa("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Ws.trimAutoWhitespace,description:Xa("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Ws.largeFileOptimizations,description:Xa("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[Xa("wordBasedSuggestions.off","Turn off Word Based Suggestions."),Xa("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),Xa("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),Xa("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:Xa("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[Xa("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),Xa("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),Xa("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:Xa("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:Xa("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:Xa("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:Xa("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:Xa("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:Xa("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:Xa("editor.experimental.treeSitterTelemetry","Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:Xa("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:Xa("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:Xa("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:Xa("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:Xa("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:Xa("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:ZR.maxComputationTime,description:Xa("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:ZR.maxFileSize,description:Xa("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:ZR.renderSideBySide,description:Xa("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:ZR.renderSideBySideInlineBreakpoint,description:Xa("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:ZR.useInlineViewWhenSpaceIsLimited,description:Xa("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:ZR.renderMarginRevertIcon,description:Xa("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:ZR.renderGutterMenu,description:Xa("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:ZR.ignoreTrimWhitespace,description:Xa("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:ZR.renderIndicators,description:Xa("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:ZR.diffCodeLens,description:Xa("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:ZR.diffWordWrap,markdownEnumDescriptions:[Xa("wordWrap.off","Lines will never wrap."),Xa("wordWrap.on","Lines will wrap at the viewport width."),Xa("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:ZR.diffAlgorithm,markdownEnumDescriptions:[Xa("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),Xa("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:ZR.hideUnchangedRegions.enabled,markdownDescription:Xa("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:ZR.hideUnchangedRegions.revealLineCount,markdownDescription:Xa("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:ZR.hideUnchangedRegions.minimumLineCount,markdownDescription:Xa("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:ZR.hideUnchangedRegions.contextLineCount,markdownDescription:Xa("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:ZR.experimental.showMoves,markdownDescription:Xa("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:ZR.experimental.showEmptyDecorations,description:Xa("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:ZR.experimental.useTrueInlineView,description:Xa("useTrueInlineView","If enabled and the editor uses the inline view, word changes are rendered inline.")}}});function XR(e){return void 0!==e.type||void 0!==e.anyOf}var $R=!0,JR=!1,eA=void 0;try{for(var tA,nA=cu[Symbol.iterator]();!($R=(tA=nA.next()).done);$R=!0){var iA=tA.value,rA=iA.schema;if(void 0!==rA)if(XR(rA))QR.properties["editor.".concat(iA.name)]=rA;else for(var oA in rA)Object.hasOwnProperty.call(rA,oA)&&(QR.properties[oA]=rA[oA])}}catch(e){JR=!0,eA=e}finally{try{$R||null==nA.return||nA.return()}finally{if(JR)throw eA}}var aA=null;function sA(){return null===aA&&(aA=Object.create(null),Object.keys(QR.properties).forEach((function(e){aA[e]=!0}))),aA}i_.as(lk).registerConfiguration(QR);var lA=function(){function e(){u(this,e)}return h(e,null,[{key:"insert",value:function(e,t){return{range:new hd(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}},{key:"delete",value:function(e){return{range:e,text:null}}},{key:"replace",value:function(e,t){return{range:e,text:t}}},{key:"replaceMove",value:function(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}]),e}();function uA(e){return Object.isFrozen(e)?e:function(e){if(!e||"object"!==(void 0===e?"undefined":L(e)))return e;for(var t=[e];t.length>0;){var n=t.shift();for(var i in Object.freeze(n),n)if(Va.call(n,i)){var r=n[i];"object"!==(void 0===r?"undefined":L(r))||Object.isFrozen(r)||Ia(r)||t.push(r)}}return e}(e)}var cA=function(){function e(t,n,i,r,o){u(this,e),this._contents=t,this._keys=n,this._overrides=i,this.raw=r,this.logService=o,this.overrideConfigurations=new Map}return h(e,[{key:"rawConfiguration",get:function(){var t,n=this;if(!this._rawConfiguration)if(null===(t=this.raw)||void 0===t?void 0:t.length){var i=this.raw.map((function(t){if(t instanceof e)return t;var i=new dA("",n.logService);return i.parseRaw(t),i.configurationModel}));this._rawConfiguration=i.reduce((function(e,t){return t===e?t:e.merge(t)}),i[0])}else this._rawConfiguration=this;return this._rawConfiguration}},{key:"contents",get:function(){return this._contents}},{key:"overrides",get:function(){return this._overrides}},{key:"keys",get:function(){return this._keys}},{key:"isEmpty",value:function(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}},{key:"getValue",value:function(e){return e?Xb(this.contents,e):this.contents}},{key:"inspect",value:function(t,n){var i=this;return{get value(){return uA(i.rawConfiguration.getValue(t))},get override(){return n?uA(i.rawConfiguration.getOverrideValue(t,n)):void 0},get merged(){return uA(n?i.rawConfiguration.override(n).getValue(t):i.rawConfiguration.getValue(t))},get overrides(){var n=[],r=!0,o=!1,a=void 0;try{for(var s,l=i.rawConfiguration.overrides[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=u.contents,d=u.identifiers,h=new e(c,u.keys,[],void 0,i.logService).getValue(t);void 0!==h&&n.push({identifiers:d,value:h})}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n.length?uA(n):void 0}}}},{key:"getOverrideValue",value:function(e,t){var n=this.getContentsForOverrideIdentifer(t);return n?e?Xb(n,e):n:void 0}},{key:"override",value:function(e){var t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}},{key:"merge",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r,o=Ha(this.contents),a=Ha(this.overrides),s=x(this.keys),l=(null===(r=this.raw)||void 0===r?void 0:r.length)?x(this.raw):[this],u=!0,c=!1,d=void 0;try{for(var h,f=n[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g,v,p=h.value;if((g=l).push.apply(g,x((null===(v=p.raw)||void 0===v?void 0:v.length)?p.raw:[p])),!p.isEmpty()){this.mergeContents(o,p.contents);var m=!0,y=!1,_=void 0;try{for(var b,k,w=function(){var e,t=k.value,n=C(a.filter((function(e){return ea(e.identifiers,t.identifiers)})),1)[0];n?(b.mergeContents(n.contents,t.contents),(e=n.keys).push.apply(e,x(t.keys)),n.keys=ca(n.keys)):a.push(Ha(t))},S=p.overrides[Symbol.iterator]();!(m=(k=S.next()).done);m=!0)b=this,w()}catch(e){y=!0,_=e}finally{try{m||null==S.return||S.return()}finally{if(y)throw _}}var L=!0,D=!1,N=void 0;try{for(var I,E=p.keys[Symbol.iterator]();!(L=(I=E.next()).done);L=!0){var M=I.value;-1===s.indexOf(M)&&s.push(M)}}catch(e){D=!0,N=e}finally{try{L||null==E.return||E.return()}finally{if(D)throw N}}}}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}return new e(o,s,a,l.every((function(t){return t instanceof e}))?void 0:l,this.logService)}},{key:"createOverrideConfigurationModel",value:function(t){var n=this.getContentsForOverrideIdentifer(t);if(!n||"object"!==(void 0===n?"undefined":L(n))||!Object.keys(n).length)return this;var i={},r=!0,o=!1,a=void 0;try{for(var s,l=ca(x(Object.keys(this.contents)).concat(x(Object.keys(n))))[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=this.contents[u],d=n[u];d&&("object"===(void 0===c?"undefined":L(c))&&"object"===(void 0===d?"undefined":L(d))?(c=Ha(c),this.mergeContents(c,d)):c=d),i[u]=c}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return new e(i,this.keys,this.overrides,void 0,this.logService)}},{key:"mergeContents",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=Object.keys(t)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s in e&&Na(e[s])&&Na(t[s])?this.mergeContents(e[s],t[s]):e[s]=Ha(t[s])}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},{key:"getContentsForOverrideIdentifer",value:function(e){var t=this,n=null,i=null,r=function(e){e&&(i?t.mergeContents(i,e):i=Ha(e))},o=!0,a=!1,s=void 0;try{for(var l,u=this.overrides[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;1===c.identifiers.length&&c.identifiers[0]===e?n=c.contents:c.identifiers.includes(e)&&r(c.contents)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return r(n),i}},{key:"toJSON",value:function(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}},{key:"setValue",value:function(e,t){this.updateValue(e,t,!1)}},{key:"removeValue",value:function(e){var t=this.keys.indexOf(e);-1!==t&&(this.keys.splice(t,1),Yb(this.contents,e),vk.test(e)&&this.overrides.splice(this.overrides.findIndex((function(t){return ea(t.identifiers,pk(e))})),1))}},{key:"updateValue",value:function(e,t,n){var i=this;if(Zb(this.contents,e,t,(function(e){return i.logService.error(e)})),(n=n||-1===this.keys.indexOf(e))&&this.keys.push(e),vk.test(e)){var r=pk(e),o={identifiers:r,keys:Object.keys(this.contents[e]),contents:Gb(this.contents[e],(function(e){return i.logService.error(e)}))},a=this.overrides.findIndex((function(e){return ea(e.identifiers,r)}));-1!==a?this.overrides[a]=o:this.overrides.push(o)}}}],[{key:"createEmptyModel",value:function(t){return new e({},[],[],void 0,t)}}]),e}(),dA=function(){function e(t,n){u(this,e),this._name=t,this.logService=n,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}return h(e,[{key:"configurationModel",get:function(){return this._configurationModel||cA.createEmptyModel(this.logService)}},{key:"parseRaw",value:function(e,t){this._raw=e;var n=this.doParseRaw(e,t),i=n.contents,r=n.keys,o=n.overrides,a=n.restricted,s=n.hasExcludedProperties;this._configurationModel=new cA(i,r,o,s?[e]:void 0,this.logService),this._restrictedConfigurations=a||[]}},{key:"doParseRaw",value:function(e,t){var n=this,i=i_.as(lk).getConfigurationProperties(),r=this.filter(e,i,!0,t);e=r.raw;var o=Gb(e,(function(e){return n.logService.error("Conflict in settings file ".concat(n._name,": ").concat(e))})),a=Object.keys(e),s=this.toOverrides(e,(function(e){return n.logService.error("Conflict in settings file ".concat(n._name,": ").concat(e))}));return{contents:o,keys:a,overrides:s,restricted:r.restricted,hasExcludedProperties:r.hasExcludedProperties}}},{key:"filter",value:function(e,t,n,i){var r,o=!1;if(!(null==i?void 0:i.scopes)&&!(null==i?void 0:i.skipRestricted)&&!(null==i||null===(r=i.exclude)||void 0===r?void 0:r.length))return{raw:e,restricted:[],hasExcludedProperties:o};var a={},s=[];for(var l in e)if(vk.test(l)&&n){var u,c=this.filter(e[l],t,!1,i);a[l]=c.raw,o=o||c.hasExcludedProperties,(u=s).push.apply(u,x(c.restricted))}else{var d,h,f=t[l],g=f?void 0!==f.scope?f.scope:3:void 0;(null==f?void 0:f.restricted)&&s.push(l),(null===(d=i.exclude)||void 0===d?void 0:d.includes(l))||!(null===(h=i.include)||void 0===h?void 0:h.includes(l))&&(void 0!==g&&void 0!==i.scopes&&!i.scopes.includes(g)||i.skipRestricted&&(null==f?void 0:f.restricted))?o=!0:a[l]=e[l]}return{raw:a,restricted:s,hasExcludedProperties:o}}},{key:"toOverrides",value:function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=Object.keys(e)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(vk.test(l)){var u={};for(var c in e[l])u[c]=e[l][c];n.push({identifiers:pk(l),keys:Object.keys(u),contents:Gb(u,t)})}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}]),e}(),hA=function(){function e(t,n,i,r,o,a,s,l,c,d,h,f,g){u(this,e),this.key=t,this.overrides=n,this._value=i,this.overrideIdentifiers=r,this.defaultConfiguration=o,this.policyConfiguration=a,this.applicationConfiguration=s,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=d,this.workspaceConfiguration=h,this.folderConfigurationModel=f,this.memoryConfigurationModel=g}return h(e,[{key:"toInspectValue",value:function(e){return void 0!==(null==e?void 0:e.value)||void 0!==(null==e?void 0:e.override)||void 0!==(null==e?void 0:e.overrides)?e:void 0}},{key:"userInspectValue",get:function(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}},{key:"user",get:function(){return this.toInspectValue(this.userInspectValue)}}]),e}(),fA=function(){function e(t,n,i,r,o,a,s,l,c,d){u(this,e),this._defaultConfiguration=t,this._policyConfiguration=n,this._applicationConfiguration=i,this._localUserConfiguration=r,this._remoteUserConfiguration=o,this._workspaceConfiguration=a,this._folderConfigurations=s,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this.logService=d,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new cw,this._userConfiguration=null}return h(e,[{key:"getValue",value:function(e,t,n){return this.getConsolidatedConfigurationModel(e,t,n).getValue(e)}},{key:"updateValue",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.resource?(n=this._memoryConfigurationByResource.get(i.resource))||(n=cA.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(i.resource,n)):n=this._memoryConfiguration,void 0===t?n.removeValue(e):n.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}},{key:"inspect",value:function(e,t,n){var i=this.getConsolidatedConfigurationModel(e,t,n),r=this.getFolderConfigurationModelForResource(t.resource,n),o=t.resource&&this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration,a=new Set,s=!0,l=!1,u=void 0;try{for(var c,d=i.overrides[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value,f=!0,g=!1,v=void 0;try{for(var p,m=h.identifiers[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value;void 0!==i.getOverrideValue(e,y)&&a.add(y)}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return new hA(e,t,i.getValue(e),a.size?x(a):void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,n?this._workspaceConfiguration:void 0,r||void 0,o)}},{key:"applicationConfiguration",get:function(){return this._applicationConfiguration}},{key:"userConfiguration",get:function(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}},{key:"localUserConfiguration",get:function(){return this._localUserConfiguration}},{key:"remoteUserConfiguration",get:function(){return this._remoteUserConfiguration}},{key:"getConsolidatedConfigurationModel",value:function(e,t,n){var i=this.getConsolidatedConfigurationModelForResource(t,n);return t.overrideIdentifier&&(i=i.override(t.overrideIdentifier)),this._policyConfiguration.isEmpty()||void 0===this._policyConfiguration.getValue(e)||(i=i.merge(this._policyConfiguration)),i}},{key:"getConsolidatedConfigurationModelForResource",value:function(e,t){var n=e.resource,i=this.getWorkspaceConsolidatedConfiguration();if(t&&n){var r=t.getFolder(n);r&&(i=this.getFolderConsolidatedConfiguration(r.uri)||i);var o=this._memoryConfigurationByResource.get(n);o&&(i=i.merge(o))}return i}},{key:"getWorkspaceConsolidatedConfiguration",value:function(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}},{key:"getFolderConsolidatedConfiguration",value:function(e){var t=this._foldersConsolidatedConfigurations.get(e);if(!t){var n=this.getWorkspaceConsolidatedConfiguration(),i=this._folderConfigurations.get(e);i?(t=n.merge(i),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}},{key:"getFolderConfigurationModelForResource",value:function(e,t){if(t&&e){var n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}},{key:"toData",value:function(){var e=this;return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:x(this._folderConfigurations.keys()).reduce((function(t,n){var i=e._folderConfigurations.get(n),r=i.contents,o=i.overrides,a=i.keys;return t.push([n,{contents:r,overrides:o,keys:a}]),t}),[])}}}],[{key:"parse",value:function(t,n){var i=this,r=this.parseConfigurationModel(t.defaults,n),o=this.parseConfigurationModel(t.policy,n),a=this.parseConfigurationModel(t.application,n),s=this.parseConfigurationModel(t.user,n),l=this.parseConfigurationModel(t.workspace,n),u=t.folders.reduce((function(e,t){return e.set(ed.revive(t[0]),i.parseConfigurationModel(t[1],n)),e}),new cw);return new e(r,o,a,s,cA.createEmptyModel(n),l,u,cA.createEmptyModel(n),new cw,n)}},{key:"parseConfigurationModel",value:function(e,t){return new cA(e.contents,e.keys,e.overrides,void 0,t)}}]),e}(),gA=function(){function e(t,n,i,r,o){u(this,e),this.change=t,this.previous=n,this.currentConfiguraiton=i,this.currentWorkspace=r,this.logService=o,this._marker="\n",this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=".".charCodeAt(0),this.affectedKeys=new Set,this._previousConfiguration=void 0;var a=!0,s=!1,l=void 0;try{for(var c,d=t.keys[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var h=c.value;this.affectedKeys.add(h)}}catch(e){s=!0,l=e}finally{try{a||null==d.return||d.return()}finally{if(s)throw l}}var f=!0,g=!1,v=void 0;try{for(var p,m=t.overrides[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=C(p.value,2)[1],_=!0,b=!1,k=void 0;try{for(var w,S=y[Symbol.iterator]();!(_=(w=S.next()).done);_=!0){var x=w.value;this.affectedKeys.add(x)}}catch(e){b=!0,k=e}finally{try{_||null==S.return||S.return()}finally{if(b)throw k}}}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}this._affectsConfigStr=this._marker;var L=!0,D=!1,N=void 0;try{for(var I,E=this.affectedKeys[Symbol.iterator]();!(L=(I=E.next()).done);L=!0){var M=I.value;this._affectsConfigStr+=M+this._marker}}catch(e){D=!0,N=e}finally{try{L||null==E.return||E.return()}finally{if(D)throw N}}}return h(e,[{key:"previousConfiguration",get:function(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=fA.parse(this.previous.data,this.logService)),this._previousConfiguration}},{key:"affectsConfiguration",value:function(e,t){var n=this._marker+e,i=this._affectsConfigStr.indexOf(n);if(i<0)return!1;var r=i+n.length;if(r>=this._affectsConfigStr.length)return!1;var o,a=this._affectsConfigStr.charCodeAt(r);return(a===this._markerCode1||a===this._markerCode2)&&(!t||!Ka(this.previousConfiguration?this.previousConfiguration.getValue(e,t,null===(o=this.previous)||void 0===o?void 0:o.workspace):void 0,this.currentConfiguraiton.getValue(e,t,this.currentWorkspace)))}}]),e}(),vA=function(){function e(){u(this,e),this._onDidChange=new Zu,this.onDidChange=this._onDidChange.event,this._enabled=!0}return h(e,[{key:"enabled",get:function(){return this._enabled}},{key:"enable",value:function(){this._enabled=!0,this._onDidChange.fire()}},{key:"disable",value:function(){this._enabled=!1,this._onDidChange.fire()}}]),e}(),pA=new vA,mA={kind:0},yA={kind:1};var _A=function(){function e(t,n,i){u(this,e),this._log=i,this._defaultKeybindings=t,this._defaultBoundCommands=new Map;var r=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value.command;c&&"-"!==c.charAt(0)&&this._defaultBoundCommands.set(c,!0)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}this._map=new Map,this._lookupMap=new Map,this._keybindings=e.handleRemovals([].concat(t).concat(n));for(var d=0,h=this._keybindings.length;d<h;d++){var f,g=this._keybindings[d];if(0!==g.chords.length){var v=null===(f=g.when)||void 0===f?void 0:f.substituteConstants();v&&0===v.type||this._addKeyPress(g.chords[0],g)}}}return h(e,[{key:"_addKeyPress",value:function(t,n){var i=this._map.get(t);if(void 0===i)return this._map.set(t,[n]),void this._addToLookupMap(n);for(var r=i.length-1;r>=0;r--){var o=i[r];if(o.command!==n.command){for(var a=!0,s=1;s<o.chords.length&&s<n.chords.length;s++)if(o.chords[s]!==n.chords[s]){a=!1;break}a&&e.whenIsEntirelyIncluded(o.when,n.when)&&this._removeFromLookupMap(o)}}i.push(n),this._addToLookupMap(n)}},{key:"_addToLookupMap",value:function(e){if(e.command){var t=this._lookupMap.get(e.command);void 0===t?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}}},{key:"_removeFromLookupMap",value:function(e){if(e.command){var t=this._lookupMap.get(e.command);if(void 0!==t)for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return void t.splice(n,1)}}},{key:"getKeybindings",value:function(){return this._keybindings}},{key:"lookupPrimaryKeybinding",value:function(e,t){var n=this._lookupMap.get(e);if(void 0===n||0===n.length)return null;if(1===n.length)return n[0];for(var i=n.length-1;i>=0;i--){var r=n[i];if(t.contextMatchesRules(r.when))return r}return n[n.length-1]}},{key:"resolve",value:function(e,t,n){var i=x(t).concat([n]);this._log("| Resolving ".concat(i));var r=this._map.get(i[0]);if(void 0===r)return this._log("\\ No keybinding entries."),mA;var o=null;if(i.length<2)o=r;else{o=[];for(var a=0,s=r.length;a<s;a++){var l=r[a];if(!(i.length>l.chords.length)){for(var u=!0,c=1;c<i.length;c++)if(l.chords[c]!==i[c]){u=!1;break}u&&o.push(l)}}}var d=this._findCommand(e,o);return d?i.length<d.chords.length?(this._log("\\ From ".concat(o.length," keybinding entries, awaiting ").concat(d.chords.length-i.length," more chord(s), when: ").concat(bA(d.when),", source: ").concat(kA(d),".")),yA):(this._log("\\ From ".concat(o.length," keybinding entries, matched ").concat(d.command,", when: ").concat(bA(d.when),", source: ").concat(kA(d),".")),function(e,t,n){return{kind:2,commandId:e,commandArgs:t,isBubble:n}}(d.command,d.commandArgs,d.bubble)):(this._log("\\ From ".concat(o.length," keybinding entries, no when clauses matched the context.")),mA)}},{key:"_findCommand",value:function(t,n){for(var i=n.length-1;i>=0;i--){var r=n[i];if(e._contextMatchesRules(t,r.when))return r}return null}}],[{key:"_isTargetedForRemoval",value:function(e,t,n){if(t)for(var i=0;i<t.length;i++)if(t[i]!==e.chords[i])return!1;if(n&&1!==n.type){if(!e.when)return!1;if(!function(e,t){var n=e?e.substituteConstants():void 0,i=t?t.substituteConstants():void 0;return!n&&!i||!(!n||!i)&&n.equals(i)}(n,e.when))return!1}return!0}},{key:"handleRemovals",value:function(e){for(var t=new Map,n=0,i=e.length;n<i;n++){var r=e[n];if(r.command&&"-"===r.command.charAt(0)){var o=r.command.substring(1);t.has(o)?t.get(o).push(r):t.set(o,[r])}}if(0===t.size)return e;for(var a=[],s=0,l=e.length;s<l;s++){var u=e[s];if(u.command&&0!==u.command.length){if("-"!==u.command.charAt(0)){var c=t.get(u.command);if(c&&u.isDefault){var d=!1,h=!0,f=!1,g=void 0;try{for(var v,p=c[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var m=v.value,y=m.when;if(this._isTargetedForRemoval(u,m.chords,y)){d=!0;break}}}catch(e){f=!0,g=e}finally{try{h||null==p.return||p.return()}finally{if(f)throw g}}d||a.push(u)}else a.push(u)}}else a.push(u)}return a}},{key:"whenIsEntirelyIncluded",value:function(e,t){return!t||1===t.type||!(!e||1===e.type)&&Zy(e,t)}},{key:"_contextMatchesRules",value:function(e,t){return!t||t.evaluate(e)}}]),e}();function bA(e){return e?"".concat(e.serialize()):"no when condition"}function kA(e){return e.extensionId?e.isBuiltinExtension?"built-in extension ".concat(e.extensionId):"user extension ".concat(e.extensionId):e.isDefault?"built-in":"user"}var wA=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/,CA=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t))._contextKeyService=e,a._commandService=n,a._telemetryService=i,a._notificationService=r,a._logService=o,a._onDidUpdateKeybindings=a._register(new Zu),a._currentChords=[],a._currentChordChecker=new Cg,a._currentChordStatusMessage=null,a._ignoreSingleModifiers=SA.EMPTY,a._currentSingleModifier=null,a._currentSingleModifierClearTimeout=new wg,a._currentlyDispatchingCommandId=null,a._logging=!1,a}return p(t,e),h(t,[{key:"onDidUpdateKeybindings",get:function(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Au.None}},{key:"inChordMode",get:function(){return this._currentChords.length>0}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}},{key:"_log",value:function(e){this._logging&&this._logService.info("[KeybindingService]: ".concat(e))}},{key:"getKeybindings",value:function(){return this._getResolver().getKeybindings()}},{key:"lookupKeybinding",value:function(e,t){var n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}},{key:"dispatchEvent",value:function(e,t){return this._dispatch(e,t)}},{key:"softDispatch",value:function(e,t){this._log("/ Soft dispatching keyboard event");var n=this.resolveKeyboardEvent(e);if(n.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),mA;var i=C(n.getDispatchChords(),1)[0];if(null===i)return this._log("\\ Keyboard event cannot be dispatched"),mA;var r=this._contextKeyService.getContext(t),o=this._currentChords.map((function(e){return e.keypress}));return this._getResolver().resolve(r,o,i)}},{key:"_scheduleLeaveChordMode",value:function(){var e=this,t=Date.now();this._currentChordChecker.cancelAndSet((function(){e._documentHasFocus()?Date.now()-t>5e3&&e._leaveChordMode():e._leaveChordMode()}),500)}},{key:"_expectAnotherChord",value:function(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw Cu("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(Xa("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:var n=this._currentChords.map((function(e){return e.label})).join(", ");this._currentChordStatusMessage=this._notificationService.status(Xa("next.chord","({0}) was pressed. Waiting for next key of chord...",n))}this._scheduleLeaveChordMode(),pA.enabled&&pA.disable()}},{key:"_leaveChordMode",value:function(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],pA.enable()}},{key:"_dispatch",value:function(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}},{key:"_singleModifierDispatch",value:function(e,t){var n=this,i=this.resolveKeyboardEvent(e),r=C(i.getSingleModifierDispatchChords(),1)[0];if(r)return this._ignoreSingleModifiers.has(r)?(this._log("+ Ignoring single modifier ".concat(r," due to it being pressed together with other keys.")),this._ignoreSingleModifiers=SA.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=SA.EMPTY,null===this._currentSingleModifier?(this._log("+ Storing single modifier for possible chord ".concat(r,".")),this._currentSingleModifier=r,this._currentSingleModifierClearTimeout.cancelAndSet((function(){n._log("+ Clearing single modifier due to 300ms elapsed."),n._currentSingleModifier=null}),300),!1):r===this._currentSingleModifier?(this._log("/ Dispatching single modifier chord ".concat(r," ").concat(r)),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log("+ Clearing single modifier due to modifier mismatch: ".concat(this._currentSingleModifier," ").concat(r)),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));var o=C(i.getChords(),1)[0];return this._ignoreSingleModifiers=new SA(o),null!==this._currentSingleModifier&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}},{key:"_doDispatch",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;var o=null,a=null;if(i){var s=C(e.getSingleModifierDispatchChords(),1)[0];o=s,a=s?[s]:[]}else{o=C(e.getDispatchChords(),1)[0],a=this._currentChords.map((function(e){return e.keypress}))}if(null===o)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),r;var l=this._contextKeyService.getContext(t),u=e.getLabel(),c=this._getResolver().resolve(l,a,o);switch(c.kind){case 0:if(this._logService.trace("KeybindingService#dispatch",u,"[ No matching keybinding ]"),this.inChordMode){var d=this._currentChords.map((function(e){return e.label})).join(", ");this._log('+ Leaving multi-chord mode: Nothing bound to "'.concat(d,", ").concat(u,'".')),this._notificationService.status(Xa("missing.chord","The key combination ({0}, {1}) is not a command.",d,u),{hideAfter:1e4}),this._leaveChordMode(),r=!0}return r;case 1:return this._logService.trace("KeybindingService#dispatch",u,"[ Several keybindings match - more chords needed ]"),r=!0,this._expectAnotherChord(o,u),this._log(1===this._currentChords.length?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),r;case 2:if(this._logService.trace("KeybindingService#dispatch",u,"[ Will dispatch command ".concat(c.commandId," ]")),null===c.commandId||""===c.commandId){if(this.inChordMode){var h=this._currentChords.map((function(e){return e.label})).join(", ");this._log('+ Leaving chord mode: Nothing bound to "'.concat(h,", ").concat(u,'".')),this._notificationService.status(Xa("missing.chord","The key combination ({0}, {1}) is not a command.",h,u),{hideAfter:1e4}),this._leaveChordMode(),r=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(r=!0),this._log("+ Invoking command ".concat(c.commandId,".")),this._currentlyDispatchingCommandId=c.commandId;try{void 0===c.commandArgs?this._commandService.executeCommand(c.commandId).then(void 0,(function(e){return n._notificationService.warn(e)})):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,(function(e){return n._notificationService.warn(e)}))}finally{this._currentlyDispatchingCommandId=null}var f;if(!wA.test(c.commandId))this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:null!==(f=e.getUserSettingsLabel())&&void 0!==f?f:void 0})}return r}}},{key:"mightProducePrintableCharacter",value:function(e){return!e.ctrlKey&&!e.metaKey&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30)}}]),t}(Ru),SA=function(){function e(t){u(this,e),this._ctrlKey=!!t&&t.ctrlKey,this._shiftKey=!!t&&t.shiftKey,this._altKey=!!t&&t.altKey,this._metaKey=!!t&&t.metaKey}return h(e,[{key:"has",value:function(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}]),e}();SA.EMPTY=new SA(null);var xA=function e(t,n,i,r,o,a,s){u(this,e),this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=t,this.chords=t?LA(t.getDispatchChords()):[],t&&0===this.chords.length&&(this.chords=LA(t.getSingleModifierDispatchChords())),this.bubble=!!n&&94===n.charCodeAt(0),this.command=this.bubble?n.substr(1):n,this.commandArgs=i,this.when=r,this.isDefault=o,this.extensionId=a,this.isBuiltinExtension=s};function LA(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];if(!r)return[];t.push(r)}return t}var DA=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;u(this,e),this.modifierLabels=[null],this.modifierLabels[2]=t,this.modifierLabels[1]=n,this.modifierLabels[3]=i}return h(e,[{key:"toLabel",value:function(e,t,n){if(0===t.length)return null;for(var i=[],r=0,o=t.length;r<o;r++){var a=t[r],s=n(a);if(null===s)return null;i[r]=TA(a,s,this.modifierLabels[e])}return i.join(" ")}}]),e}(),NA=new DA({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:Xa({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:Xa({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:Xa({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:Xa({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:Xa({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:Xa({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:Xa({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:Xa({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),IA=new DA({ctrlKey:Xa({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:Xa({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:Xa({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:Xa({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:Xa({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:Xa({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:Xa({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:Xa({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:Xa({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:Xa({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:Xa({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:Xa({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),EA=new DA({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),MA=new DA({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function TA(e,t,n){if(null===t)return"";var i=[];return e.ctrlKey&&i.push(n.ctrlKey),e.shiftKey&&i.push(n.shiftKey),e.altKey&&i.push(n.altKey),e.metaKey&&i.push(n.metaKey),""!==t&&i.push(t),i.join(n.separator)}var RA=function(e){function t(e,n){var i;if(u(this,t),i=l(this,t),0===n.length)throw wu("chords");return i._os=e,i._chords=n,i}return p(t,e),h(t,[{key:"getLabel",value:function(){var e=this;return NA.toLabel(this._os,this._chords,(function(t){return e._getLabel(t)}))}},{key:"getAriaLabel",value:function(){var e=this;return IA.toLabel(this._os,this._chords,(function(t){return e._getAriaLabel(t)}))}},{key:"getElectronAccelerator",value:function(){var e=this;return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:EA.toLabel(this._os,this._chords,(function(t){return e._getElectronAccelerator(t)}))}},{key:"getUserSettingsLabel",value:function(){var e=this;return MA.toLabel(this._os,this._chords,(function(t){return e._getUserSettingsLabel(t)}))}},{key:"hasMultipleChords",value:function(){return this._chords.length>1}},{key:"getChords",value:function(){var e=this;return this._chords.map((function(t){return e._getChord(t)}))}},{key:"_getChord",value:function(e){return new tg(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}},{key:"getDispatchChords",value:function(){var e=this;return this._chords.map((function(t){return e._getChordDispatch(t)}))}},{key:"getSingleModifierDispatchChords",value:function(){var e=this;return this._chords.map((function(t){return e._getSingleModifierChordDispatch(t)}))}}]),t}((function e(){u(this,e)})),AA=function(e){function t(e,n){return u(this,t),l(this,t,[n,e])}return p(t,e),h(t,[{key:"_keyCodeToUILabel",value:function(e){if(2===this._os)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return ac.toString(e)}},{key:"_getLabel",value:function(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}},{key:"_getAriaLabel",value:function(e){return e.isDuplicateModifierCase()?"":ac.toString(e.keyCode)}},{key:"_getElectronAccelerator",value:function(e){return ac.toElectronAccelerator(e.keyCode)}},{key:"_getUserSettingsLabel",value:function(e){if(e.isDuplicateModifierCase())return"";var t=ac.toUserSettingsUS(e.keyCode);return t?t.toLowerCase():t}},{key:"_getChordDispatch",value:function(e){return t.getDispatchStr(e)}},{key:"_getSingleModifierChordDispatch",value:function(e){return 5!==e.keyCode||e.shiftKey||e.altKey||e.metaKey?4!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey?6!==e.keyCode||e.ctrlKey||e.shiftKey||e.metaKey?57!==e.keyCode||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"alt":"shift":"ctrl"}}],[{key:"getDispatchStr",value:function(e){if(e.isModifierKey())return null;var t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=ac.toString(e.keyCode)}},{key:"_scanCodeToKeyCode",value:function(e){var t=gc[e];if(-1!==t)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}},{key:"_toKeyCodeChord",value:function(e){if(!e)return null;if(e instanceof Jf)return e;var t=this._scanCodeToKeyCode(e.scanCode);return 0===t?null:new Jf(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}},{key:"resolveKeybinding",value:function(e,n){var i=this,r=LA(e.chords.map((function(e){return i._toKeyCodeChord(e)})));return r.length>0?[new t(r,n)]:[]}}]),t}(RA),PA=Zm("labelService"),OA=Zm("progressService"),FA=function(){function e(t){u(this,e),this.callback=t}return h(e,[{key:"report",value:function(e){this._value=e,this.callback(this._value)}}]),e}();FA.None=Object.freeze({report:function(){}});var WA=Zm("editorProgressService"),BA=function(){function e(){u(this,e),this._value="",this._pos=0}return h(e,[{key:"reset",value:function(e){return this._value=e,this._pos=0,this}},{key:"next",value:function(){return this._pos+=1,this}},{key:"hasNext",value:function(){return this._pos<this._value.length-1}},{key:"cmp",value:function(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}},{key:"value",value:function(){return this._value[this._pos]}}]),e}(),HA=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u(this,e),this._caseSensitive=t}return h(e,[{key:"reset",value:function(e){return this._value=e,this._from=0,this._to=0,this.next()}},{key:"hasNext",value:function(){return this._to<this._value.length}},{key:"next",value:function(){this._from=this._to;for(var e=!0;this._to<this._value.length;this._to++){if(46===this._value.charCodeAt(this._to)){if(!e)break;this._from++}else e=!1}return this}},{key:"cmp",value:function(e){return this._caseSensitive?nf(e,this._value,0,e.length,this._from,this._to):of(e,this._value,0,e.length,this._from,this._to)}},{key:"value",value:function(){return this._value.substring(this._from,this._to)}}]),e}(),VA=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];u(this,e),this._splitOnBackslash=t,this._caseSensitive=n}return h(e,[{key:"reset",value:function(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(var t=e.length-1;t>=0;t--,this._valueLen--){var n=this._value.charCodeAt(t);if(!(47===n||this._splitOnBackslash&&92===n))break}return this.next()}},{key:"hasNext",value:function(){return this._to<this._valueLen}},{key:"next",value:function(){this._from=this._to;for(var e=!0;this._to<this._valueLen;this._to++){var t=this._value.charCodeAt(this._to);if(47===t||this._splitOnBackslash&&92===t){if(!e)break;this._from++}else e=!1}return this}},{key:"cmp",value:function(e){return this._caseSensitive?nf(e,this._value,0,e.length,this._from,this._to):of(e,this._value,0,e.length,this._from,this._to)}},{key:"value",value:function(){return this._value.substring(this._from,this._to)}}]),e}(),zA=function(){function e(t,n){u(this,e),this._ignorePathCasing=t,this._ignoreQueryAndFragment=n,this._states=[],this._stateIdx=0}return h(e,[{key:"reset",value:function(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new VA(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}},{key:"next",value:function(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}},{key:"hasNext",value:function(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}},{key:"cmp",value:function(e){if(1===this._states[this._stateIdx])return rf(e,this._value.scheme);if(2===this._states[this._stateIdx])return rf(e,this._value.authority);if(3===this._states[this._stateIdx])return this._pathIterator.cmp(e);if(4===this._states[this._stateIdx])return tf(e,this._value.query);if(5===this._states[this._stateIdx])return tf(e,this._value.fragment);throw new Error}},{key:"value",value:function(){if(1===this._states[this._stateIdx])return this._value.scheme;if(2===this._states[this._stateIdx])return this._value.authority;if(3===this._states[this._stateIdx])return this._pathIterator.value();if(4===this._states[this._stateIdx])return this._value.query;if(5===this._states[this._stateIdx])return this._value.fragment;throw new Error}}]),e}(),UA=function(){function e(){u(this,e),this.height=1}return h(e,[{key:"rotateLeft",value:function(){var e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}},{key:"rotateRight",value:function(){var e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}},{key:"updateHeight",value:function(){this.height=1+Math.max(this.heightLeft,this.heightRight)}},{key:"balanceFactor",value:function(){return this.heightRight-this.heightLeft}},{key:"heightLeft",get:function(){var e,t;return null!==(t=null===(e=this.left)||void 0===e?void 0:e.height)&&void 0!==t?t:0}},{key:"heightRight",get:function(){var e,t;return null!==(t=null===(e=this.right)||void 0===e?void 0:e.height)&&void 0!==t?t:0}}]),e}(),jA=function(){function e(t){u(this,e),this._iter=t}return h(e,[{key:"clear",value:function(){this._root=void 0}},{key:"set",value:function(e,t){var n,i=this._iter.reset(e);this._root||(this._root=new UA,this._root.segment=i.value());var r=[];for(n=this._root;;){var o=i.cmp(n.segment);if(o>0)n.left||(n.left=new UA,n.left.segment=i.value()),r.push([-1,n]),n=n.left;else if(o<0)n.right||(n.right=new UA,n.right.segment=i.value()),r.push([1,n]),n=n.right;else{if(!i.hasNext())break;i.next(),n.mid||(n.mid=new UA,n.mid.segment=i.value()),r.push([0,n]),n=n.mid}}var a=n.value;n.value=t,n.key=e;for(var s=r.length-1;s>=0;s--){var l=r[s][1];l.updateHeight();var u=l.balanceFactor();if(u<-1||u>1){var c=r[s][0],d=r[s+1][0];if(1===c&&1===d)r[s][1]=l.rotateLeft();else if(-1===c&&-1===d)r[s][1]=l.rotateRight();else if(1===c&&-1===d)l.right=r[s+1][1]=r[s+1][1].rotateRight(),r[s][1]=l.rotateLeft();else{if(-1!==c||1!==d)throw new Error;l.left=r[s+1][1]=r[s+1][1].rotateLeft(),r[s][1]=l.rotateRight()}if(s>0)switch(r[s-1][0]){case-1:r[s-1][1].left=r[s][1];break;case 1:r[s-1][1].right=r[s][1];break;case 0:r[s-1][1].mid=r[s][1]}else this._root=r[0][1]}}return a}},{key:"get",value:function(e){var t;return null===(t=this._getNode(e))||void 0===t?void 0:t.value}},{key:"_getNode",value:function(e){for(var t=this._iter.reset(e),n=this._root;n;){var i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else{if(!t.hasNext())break;t.next(),n=n.mid}}return n}},{key:"has",value:function(e){var t=this._getNode(e);return!(void 0===(null==t?void 0:t.value)&&void 0===(null==t?void 0:t.mid))}},{key:"delete",value:function(e){return this._delete(e,!1)}},{key:"deleteSuperstr",value:function(e){return this._delete(e,!0)}},{key:"_delete",value:function(e,t){for(var n=this._iter.reset(e),i=[],r=this._root;r;){var o=n.cmp(r.segment);if(o>0)i.push([-1,r]),r=r.left;else if(o<0)i.push([1,r]),r=r.right;else{if(!n.hasNext())break;n.next(),i.push([0,r]),r=r.mid}}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){var a=this._min(r.right);if(a.key){var s=a.key,l=a.value,u=a.segment;this._delete(a.key,!1),r.key=s,r.value=l,r.segment=u}}else{var c,d=null!==(c=r.left)&&void 0!==c?c:r.right;if(i.length>0){var h=C(i[i.length-1],2),f=h[0],g=h[1];switch(f){case-1:g.left=d;break;case 0:g.mid=d;break;case 1:g.right=d}}else this._root=d}for(var v=i.length-1;v>=0;v--){var p=i[v][1];p.updateHeight();var m=p.balanceFactor();if(m>1?(p.right.balanceFactor()>=0||(p.right=p.right.rotateRight()),i[v][1]=p.rotateLeft()):m<-1&&(p.left.balanceFactor()<=0||(p.left=p.left.rotateLeft()),i[v][1]=p.rotateRight()),v>0)switch(i[v-1][0]){case-1:i[v-1][1].left=i[v][1];break;case 1:i[v-1][1].right=i[v][1];break;case 0:i[v-1][1].mid=i[v][1]}else this._root=i[0][1]}}}},{key:"_min",value:function(e){for(;e.left;)e=e.left;return e}},{key:"findSubstr",value:function(e){for(var t=this._iter.reset(e),n=this._root,i=void 0;n;){var r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else{if(!t.hasNext())break;t.next(),i=n.value||i,n=n.mid}}return n&&n.value||i}},{key:"findSuperstr",value:function(e){return this._findSuperstrOrElement(e,!1)}},{key:"_findSuperstrOrElement",value:function(e,t){for(var n=this._iter.reset(e),i=this._root;i;){var r=n.cmp(i.segment);if(r>0)i=i.left;else if(r<0)i=i.right;else{if(!n.hasNext())return i.mid?this._entries(i.mid):t?i.value:void 0;n.next(),i=i.mid}}}},{key:"forEach",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=C(r.value,2),s=a[0];e(a[1],s)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:Symbol.iterator,value:function(){return E(this,(function(e){switch(e.label){case 0:return[5,M(this._entries(this._root))];case 1:return e.sent(),[2]}}))}},{key:"_entries",value:function(e){var t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}},{key:"_dfsEntries",value:function(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}],[{key:"forUris",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!1};return new e(new zA(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!1}))}},{key:"forStrings",value:function(){return new e(new BA)}},{key:"forConfigKeys",value:function(){return new e(new HA)}}]),e}(),KA=Zm("contextService");function qA(e){var t=e;return"string"==typeof(null==t?void 0:t.id)&&ed.isUri(t.uri)}function GA(e){var t=e;return"string"==typeof(null==t?void 0:t.id)&&!qA(e)&&!function(e){var t=e;return"string"==typeof(null==t?void 0:t.id)&&ed.isUri(t.configPath)}(e)}var ZA={id:"empty-window"};var YA=function(){function e(t,n){u(this,e),this.raw=n,this.uri=t.uri,this.index=t.index,this.name=t.name}return h(e,[{key:"toJSON",value:function(){return{uri:this.uri,name:this.name,index:this.index}}}]),e}(),QA="code-workspace";Xa("codeWorkspace","Code Workspace");var XA,$A,JA,eP,tP,nP,iP,rP,oP="4064f6ec-cb38-4ad0-af64-ee6467e63c82";!function(e){e.inspectTokensAction=Xa("inspectTokens","Developer: Inspect Tokens")}(XA||(XA={})),function(e){e.gotoLineActionLabel=Xa("gotoLineActionLabel","Go to Line/Column...")}($A||($A={})),function(e){e.helpQuickAccessActionLabel=Xa("helpQuickAccess","Show all Quick Access Providers")}(JA||(JA={})),function(e){e.quickCommandActionLabel=Xa("quickCommandActionLabel","Command Palette"),e.quickCommandHelp=Xa("quickCommandActionHelp","Show And Run Commands")}(eP||(eP={})),function(e){e.quickOutlineActionLabel=Xa("quickOutlineActionLabel","Go to Symbol..."),e.quickOutlineByCategoryActionLabel=Xa("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")}(tP||(tP={})),function(e){e.editorViewAccessibleLabel=Xa("editorViewAccessibleLabel","Editor content")}(nP||(nP={})),function(e){e.toggleHighContrast=Xa("toggleHighContrast","Toggle High Contrast Theme")}(iP||(iP={})),function(e){e.bulkEditServiceSummary=Xa("bulkEditServiceSummary","Made {0} edits in {1} files")}(rP||(rP={}));var aP=Zm("workspaceTrustManagementService"),sP=[],lP=[],uP=[];function cP(e){!function(e,t,n){var i=function(e,t){return{id:e.id,mime:e.mime,filename:e.filename,extension:e.extension,filepattern:e.filepattern,firstline:e.firstline,userConfigured:t,filenameLowercase:e.filename?e.filename.toLowerCase():void 0,extensionLowercase:e.extension?e.extension.toLowerCase():void 0,filepatternLowercase:e.filepattern?_L(e.filepattern.toLowerCase()):void 0,filepatternOnPath:!!e.filepattern&&e.filepattern.indexOf(Wc.sep)>=0}}(e,t);sP.push(i),i.userConfigured?uP.push(i):lP.push(i);n&&!i.userConfigured&&sP.forEach((function(e){e.mime===i.mime||e.userConfigured||(i.extension&&e.extension===i.extension&&console.warn("Overwriting extension <<".concat(i.extension,">> to now point to mime <<").concat(i.mime,">>")),i.filename&&e.filename===i.filename&&console.warn("Overwriting filename <<".concat(i.filename,">> to now point to mime <<").concat(i.mime,">>")),i.filepattern&&e.filepattern===i.filepattern&&console.warn("Overwriting filepattern <<".concat(i.filepattern,">> to now point to mime <<").concat(i.mime,">>")),i.firstline&&e.firstline===i.firstline&&console.warn("Overwriting firstline <<".concat(i.firstline,">> to now point to mime <<").concat(i.mime,">>")))}))}(e,!1,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function dP(e,t){return function(e,t){var n;if(e)switch(e.scheme){case Pv.file:n=e.fsPath;break;case Pv.data:n=nT.parseMetaData(e).get(nT.META_DATA_LABEL);break;case Pv.vscodeNotebookCell:n=void 0;break;default:n=e.path}if(!n)return[{id:"unknown",mime:rk.unknown}];n=n.toLowerCase();var i=jc(n),r=hP(n,i,uP);if(r)return[r,{id:kk,mime:rk.text}];var o=hP(n,i,lP);if(o)return[o,{id:kk,mime:rk.text}];if(t){var a=function(e){Ef(e)&&(e=e.substr(1));if(e.length>0)for(var t=sP.length-1;t>=0;t--){var n=sP[t];if(n.firstline){var i=e.match(n.firstline);if(i&&i.length>0)return n}}return}(t);if(a)return[a,{id:kk,mime:rk.text}]}return[{id:"unknown",mime:rk.unknown}]}(e,t).map((function(e){return e.id}))}function hP(e,t,n){for(var i=void 0,r=void 0,o=void 0,a=n.length-1;a>=0;a--){var s=n[a];if(t===s.filenameLowercase){i=s;break}if(s.filepattern&&(!r||s.filepattern.length>r.filepattern.length)){var l,u=s.filepatternOnPath?e:t;(null===(l=s.filepatternLowercase)||void 0===l?void 0:l.call(s,u))&&(r=s)}s.extension&&(!o||s.extension.length>o.extension.length)&&t.endsWith(s.extensionLowercase)&&(o=s)}return i||(r||(o||void 0))}var fP=Object.prototype.hasOwnProperty,gP="vs.editor.nullLanguage",vP=function(){function e(){u(this,e),this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(gP,0),this._register(kk,1),this._nextLanguageId=2}return h(e,[{key:"_register",value:function(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}},{key:"register",value:function(e){if(!this._languageToLanguageId.has(e)){var t=this._nextLanguageId++;this._register(e,t)}}},{key:"encodeLanguageId",value:function(e){return this._languageToLanguageId.get(e)||0}},{key:"decodeLanguageId",value:function(e){return this._languageIdToLanguage[e]||gP}}]),e}(),pP=function(e){function t(){var e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u(this,t),(e=l(this,t))._onDidChange=e._register(new Zu),e.onDidChange=e._onDidChange.event,t.instanceCount++,e._warnOnOverwrite=i,e.languageIdCodec=new vP,e._dynamicLanguages=[],e._languages={},e._mimeTypesMap={},e._nameMap={},e._lowercaseNameMap={},n&&(e._initializeFromRegistry(),e._register(bk.onDidChangeLanguages((function(t){e._initializeFromRegistry()})))),e}return p(t,e),h(t,[{key:"dispose",value:function(){t.instanceCount--,g(v(t.prototype),"dispose",this).call(this)}},{key:"_initializeFromRegistry",value:function(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},sP=sP.filter((function(e){return e.userConfigured})),lP=[];var e=[].concat(bk.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}},{key:"_registerLanguages",value:function(e){var t=this,n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._registerLanguage(s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach((function(e){var n=t._languages[e];n.name&&(t._nameMap[n.name]=n.identifier),n.aliases.forEach((function(e){t._lowercaseNameMap[e.toLowerCase()]=n.identifier})),n.mimetypes.forEach((function(e){t._mimeTypesMap[e]=n.identifier}))})),i_.as(lk).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}},{key:"_registerLanguage",value:function(e){var t,n=e.id;fP.call(this._languages,n)?t=this._languages[n]:(this.languageIdCodec.register(n),t={identifier:n,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[n]=t),this._mergeLanguage(t,e)}},{key:"_mergeLanguage",value:function(e,t){var n,i=t.id,r=null;Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&((n=e.mimetypes).push.apply(n,x(t.mimetypes)),r=t.mimetypes[0]);if(r||(r="text/x-".concat(i),e.mimetypes.push(r)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);var o=!0,a=!1,s=void 0;try{for(var l,u=t.extensions[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){cP({id:i,mime:r,extension:l.value},this._warnOnOverwrite)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}if(Array.isArray(t.filenames)){var c=!0,d=!1,h=void 0;try{for(var f,g=t.filenames[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;cP({id:i,mime:r,filename:v},this._warnOnOverwrite),e.filenames.push(v)}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}}if(Array.isArray(t.filenamePatterns)){var p=!0,m=!1,y=void 0;try{for(var _,b=t.filenamePatterns[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){cP({id:i,mime:r,filepattern:_.value},this._warnOnOverwrite)}}catch(e){m=!0,y=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw y}}}if("string"==typeof t.firstLine&&t.firstLine.length>0){var k=t.firstLine;"^"!==k.charAt(0)&&(k="^"+k);try{var w=new RegExp(k);(function(e){return"^"!==e.source&&"^$"!==e.source&&"$"!==e.source&&"^\\s*$"!==e.source&&!(!e.exec("")||0!==e.lastIndex)})(w)||cP({id:i,mime:r,firstline:w},this._warnOnOverwrite)}catch(e){console.warn("[".concat(t.id,"]: Invalid regular expression `").concat(k,"`: "),e)}}e.aliases.push(i);var C=null;if(void 0!==t.aliases&&Array.isArray(t.aliases)&&(C=0===t.aliases.length?[null]:t.aliases),null!==C){var S=!0,L=!1,D=void 0;try{for(var N,I=C[Symbol.iterator]();!(S=(N=I.next()).done);S=!0){var E=N.value;E&&0!==E.length&&e.aliases.push(E)}}catch(e){L=!0,D=e}finally{try{S||null==I.return||I.return()}finally{if(L)throw D}}}var M=null!==C&&C.length>0;if(M&&null===C[0]);else{var T=(M?C[0]:null)||i;!M&&e.name||(e.name=T)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}},{key:"isRegisteredLanguageId",value:function(e){return!!e&&fP.call(this._languages,e)}},{key:"getRegisteredLanguageIds",value:function(){return Object.keys(this._languages)}},{key:"getLanguageIdByLanguageName",value:function(e){var t=e.toLowerCase();return fP.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}},{key:"getLanguageIdByMimeType",value:function(e){return e&&fP.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}},{key:"guessLanguageIdByFilepathOrFirstLine",value:function(e,t){return e||t?dP(e,t):[]}}]),t}(Ru);pP.instanceCount=0;var mP=function(e,t){return e===t};function yP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mP;return function(t,n){return ea(t,n,e)}}function _P(e,t,n){if(void 0!==n){var i=e;return null==i||null==t?t===i:n(i,t)}var r=e;return function(e,t){return null==e||null==t?t===e:r(e,t)}}function bP(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!bP(e[n],t[n]))return!1;return!0}if(e&&"object"===(void 0===e?"undefined":L(e))&&t&&"object"===(void 0===t?"undefined":L(t))&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){var i=e,r=t,o=Object.keys(i),a=Object.keys(r),s=new Set(a);if(o.length!==a.length)return!1;var l=!0,u=!1,c=void 0;try{for(var d,h=o[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;if(!s.has(f))return!1;if(!bP(i[f],r[f]))return!1}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return!0}return!1}var kP=function(){function e(t,n,i){u(this,e),this.owner=t,this.debugNameSource=n,this.referenceFn=i}return h(e,[{key:"getDebugName",value:function(e){return function(e,t){var n=CP.get(e);if(n)return n;var i=function(e,t){var n=CP.get(e);if(n)return n;var i,r=t.owner?function(e){var t=NP.get(e);if(t)return t;var n,i=function(e){var t=e.constructor;if(t)return t.name;return"Object"}(e),r=null!==(n=DP.get(i))&&void 0!==n?n:0;r++,DP.set(i,r);var o=1===r?i:"".concat(i,"#").concat(r);return NP.set(e,o),o}(t.owner)+".":"",o=t.debugNameSource;if(void 0!==o){if("function"!=typeof o)return r+o;if(void 0!==(i=o()))return r+i}var a=t.referenceFn;if(void 0!==a&&void 0!==(i=IP(a)))return r+i;if(void 0!==t.owner){var s=function(e,t){for(var n in e)if(e[n]===t)return n;return}(t.owner,e);if(void 0!==s)return r+s}return}(e,t);if(i){var r,o=null!==(r=wP.get(i))&&void 0!==r?r:0;o++,wP.set(i,o);var a=1===o?i:"".concat(i,"#").concat(o);return CP.set(e,a),a}return}(e,this)}}]),e}(),wP=new Map,CP=new WeakMap;var SP,xP,LP,DP=new Map,NP=new WeakMap;function IP(e){var t=e.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t),i=n?n[1]:void 0;return null==i?void 0:i.trim()}var EP=function(){function e(){u(this,e)}return h(e,[{key:"TChange",get:function(){return null}},{key:"reportChanges",value:function(){this.get()}},{key:"read",value:function(e){return e?e.readObservable(this):this.get()}},{key:"map",value:function(e,t){var n=this,i=void 0===t?void 0:e,r=void 0===t?e:t;return LP({owner:i,debugName:function(){var e=IP(r);if(void 0!==e)return e;var t=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(r.toString());return t?"".concat(n.debugName,".").concat(t[2]):i?void 0:"".concat(n.debugName," (mapped)")},debugReferenceFn:r},(function(e){return r(n.read(e),e)}))}},{key:"flatten",value:function(){var e=this;return LP({owner:void 0,debugName:function(){return"".concat(e.debugName," (flattened)")}},(function(t){return e.read(t).read(t)}))}},{key:"recomputeInitiallyAndOnChange",value:function(e,t){return e.add(SP(this,t)),this}},{key:"keepObserved",value:function(e){return e.add(xP(this)),this}}]),e}(),MP=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments)).observers=new Set,e}return p(t,e),h(t,[{key:"addObserver",value:function(e){var t=this.observers.size;this.observers.add(e),0===t&&this.onFirstObserverAdded()}},{key:"removeObserver",value:function(e){this.observers.delete(e)&&0===this.observers.size&&this.onLastObserverRemoved()}},{key:"onFirstObserverAdded",value:function(){}},{key:"onLastObserverRemoved",value:function(){}}]),t}(EP);function TP(e,t){var n=new WP(e,t);try{e(n)}finally{n.finish()}}var RP=void 0;function AP(e){if(RP)e(RP);else{var t=new WP(e,void 0);RP=t;try{e(t)}finally{t.finish(),RP=void 0}}}function PP(e,t){return OP.apply(this,arguments)}function OP(){return OP=s((function(e,t){var n;return E(this,(function(i){switch(i.label){case 0:n=new WP(e,t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,e(n)];case 2:return i.sent(),[3,4];case 3:return n.finish(),[7];case 4:return[2]}}))})),OP.apply(this,arguments)}function FP(e,t,n){e?t(e):TP(t,n)}var WP=function(){function e(t,n){u(this,e),this._fn=t,this._getDebugName=n,this.updatingObservers=[]}return h(e,[{key:"getDebugName",value:function(){return this._getDebugName?this._getDebugName():IP(this._fn)}},{key:"updateObserver",value:function(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}},{key:"finish",value:function(){for(var e=this.updatingObservers,t=0;t<e.length;t++){var n=e[t],i=n.observer,r=n.observable;i.endUpdate(r)}this.updatingObservers=null}}]),e}();function BP(e,t){var n;return n="string"==typeof e?new kP(void 0,e,void 0):new kP(e,void 0,void 0),new HP(n,t,mP)}var HP=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._debugNameData=e,r._equalityComparator=i,r._value=n,r}return p(t,e),h(t,[{key:"debugName",get:function(){var e;return null!==(e=this._debugNameData.getDebugName(this))&&void 0!==e?e:"ObservableValue"}},{key:"get",value:function(){return this._value}},{key:"set",value:function(e,t,n){var i=this;if(void 0!==n||!this._equalityComparator(this._value,e)){var r;t||(t=r=new WP((function(){}),(function(){return"Setting ".concat(i.debugName)})));try{var o,a=this._value;this._setValue(e),null===(o=void 0)||void 0===o||o.handleObservableChanged(this,{oldValue:a,newValue:e,change:n,didChange:!0,hadValue:!0});var s=!0,l=!1,u=void 0;try{for(var c,d=this.observers[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;t.updateObserver(h,this),h.handleChange(this,n)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}finally{r&&r.finish()}}}},{key:"toString",value:function(){return"".concat(this.debugName,": ").concat(this._value)}},{key:"_setValue",value:function(e){this._value=e}}]),t}(MP);function VP(e,t){var n;return n="string"==typeof e?new kP(void 0,e,void 0):new kP(e,void 0,void 0),new zP(n,t,mP)}var zP=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_setValue",value:function(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}},{key:"dispose",value:function(){var e;null===(e=this._value)||void 0===e||e.dispose()}}]),t}(HP);function UP(e,t){return void 0!==t?new YP(new kP(e,void 0,t),t,void 0,void 0,void 0,mP):new YP(new kP(void 0,void 0,e),e,void 0,void 0,void 0,mP)}function jP(e,t,n){return new QP(new kP(e,void 0,t),t,void 0,void 0,void 0,mP,n)}function KP(e,t){var n;return new YP(new kP(e.owner,e.debugName,e.debugReferenceFn),t,void 0,void 0,e.onLastObserverRemoved,null!==(n=e.equalsFn)&&void 0!==n?n:mP)}function qP(e,t){var n;return new YP(new kP(e.owner,e.debugName,void 0),t,e.createEmptyChangeSummary,e.handleChange,void 0,null!==(n=e.equalityComparer)&&void 0!==n?n:mP)}function GP(e,t){var n,i;void 0===t?(n=e,i=void 0):(i=e,n=t);var r=new Tu;return new YP(new kP(i,void 0,n),(function(e){return r.clear(),n(e,r)}),void 0,void 0,(function(){return r.dispose()}),mP)}function ZP(e,t){var n,i;void 0===t?(n=e,i=void 0):(i=e,n=t);var r=void 0;return new YP(new kP(i,void 0,n),(function(e){r?r.clear():r=new Tu;var t=n(e);return t&&r.add(t),t}),void 0,void 0,(function(){r&&(r.dispose(),r=void 0)}),mP)}!function(e){LP=e}(KP);var YP=function(e){function t(e,n,i,r){var o,a,s,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,d=arguments.length>5?arguments[5]:void 0;return u(this,t),(o=l(this,t))._debugNameData=e,o._computeFn=n,o.createChangeSummary=i,o._handleChange=r,o._handleLastObserverRemoved=c,o._equalityComparator=d,o.state=0,o.value=void 0,o.updateCount=0,o.dependencies=new Set,o.dependenciesToBeRemoved=new Set,o.changeSummary=void 0,o.changeSummary=null===(a=(s=o).createChangeSummary)||void 0===a?void 0:a.call(s),o}return p(t,e),h(t,[{key:"debugName",get:function(){var e;return null!==(e=this._debugNameData.getDebugName(this))&&void 0!==e?e:"(anonymous)"}},{key:"onLastObserverRemoved",value:function(){var e;this.state=0,this.value=void 0;var t=!0,n=!1,i=void 0;try{for(var r,o=this.dependencies[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.removeObserver(this)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}this.dependencies.clear(),null===(e=this._handleLastObserverRemoved)||void 0===e||e.call(this)}},{key:"get",value:function(){if(0===this.observers.size){var e,t=this._computeFn(this,null===(e=this.createChangeSummary)||void 0===e?void 0:e.call(this));return this.onLastObserverRemoved(),t}do{if(1===this.state){var n=!0,i=!1,r=void 0;try{for(var o,a=this.dependencies[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){if(o.value.reportChanges(),2===this.state)break}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}1===this.state&&(this.state=3),this._recomputeIfNeeded()}while(3!==this.state);return this.value}},{key:"_recomputeIfNeeded",value:function(){var e;if(3!==this.state){var t=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=t;var n=0!==this.state,i=this.value;this.state=3;var r=this.changeSummary;this.changeSummary=null===(e=this.createChangeSummary)||void 0===e?void 0:e.call(this);try{this.value=this._computeFn(this,r)}finally{var o=!0,a=!1,s=void 0;try{for(var l,u=this.dependenciesToBeRemoved[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){l.value.removeObserver(this)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}this.dependenciesToBeRemoved.clear()}if(n&&!this._equalityComparator(i,this.value)){var c=!0,d=!1,h=void 0;try{for(var f,g=this.observers[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){f.value.handleChange(this,void 0)}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}}}}},{key:"toString",value:function(){return"LazyDerived<".concat(this.debugName,">")}},{key:"beginUpdate",value:function(e){this.updateCount++;var t=1===this.updateCount;if(3===this.state&&(this.state=1,!t)){var n=!0,i=!1,r=void 0;try{for(var o,a=this.observers[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.handlePossibleChange(this)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}if(t){var s=!0,l=!1,u=void 0;try{for(var c,d=this.observers[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){c.value.beginUpdate(this)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}}},{key:"endUpdate",value:function(e){var t=this;if(this.updateCount--,0===this.updateCount){var n=x(this.observers),i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){a.value.endUpdate(this)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}e_((function(){return t.updateCount>=0}))}},{key:"handlePossibleChange",value:function(e){if(3===this.state&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;var t=!0,n=!1,i=void 0;try{for(var r,o=this.observers[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.handlePossibleChange(this)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}},{key:"handleChange",value:function(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){var n=!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:function(t){return t===e}},this.changeSummary),i=3===this.state;if(n&&(1===this.state||i)&&(this.state=2,i)){var r=!0,o=!1,a=void 0;try{for(var s,l=this.observers[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){s.value.handlePossibleChange(this)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}}}},{key:"readObservable",value:function(e){e.addObserver(this);var t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}},{key:"addObserver",value:function(e){var n=!this.observers.has(e)&&this.updateCount>0;g(v(t.prototype),"addObserver",this).call(this,e),n&&e.beginUpdate(this)}},{key:"removeObserver",value:function(e){var n=this.observers.has(e)&&this.updateCount>0;g(v(t.prototype),"removeObserver",this).call(this,e),n&&e.endUpdate(this)}}]),t}(MP),QP=function(e){function t(e,n,i,r){var o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;return u(this,t),(o=l(this,t,[e,n,i,r,a,s])).set=c,o}return p(t,e),t}(YP);function XP(e){return new tO(new kP(void 0,void 0,e),e,void 0,void 0)}function $P(e,t){var n;return new tO(new kP(e.owner,e.debugName,null!==(n=e.debugReferenceFn)&&void 0!==n?n:t),t,void 0,void 0)}function JP(e,t){var n;return new tO(new kP(e.owner,e.debugName,null!==(n=e.debugReferenceFn)&&void 0!==n?n:t),t,e.createEmptyChangeSummary,e.handleChange)}function eO(e){var t=new Tu,n=$P({owner:void 0,debugName:void 0,debugReferenceFn:e},(function(n){t.clear(),e(n,t)}));return Mu((function(){n.dispose(),t.dispose()}))}var tO=function(){function e(t,n,i,r){var o;u(this,e),this._debugNameData=t,this._runFn=n,this.createChangeSummary=i,this._handleChange=r,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=null===(o=this.createChangeSummary)||void 0===o?void 0:o.call(this),this._runIfNeeded()}return h(e,[{key:"debugName",get:function(){var e;return null!==(e=this._debugNameData.getDebugName(this))&&void 0!==e?e:"(anonymous)"}},{key:"dispose",value:function(){this.disposed=!0;var e=!0,t=!1,n=void 0;try{for(var i,r=this.dependencies[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.removeObserver(this)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.dependencies.clear()}},{key:"_runIfNeeded",value:function(){if(3!==this.state){var e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;var t=this.disposed;try{if(!t){var n,i;null===(n=void 0)||void 0===n||n.handleAutorunTriggered(this);var r=this.changeSummary;this.changeSummary=null===(i=this.createChangeSummary)||void 0===i?void 0:i.call(this),this._runFn(this,r)}}finally{var o=!0,a=!1,s=void 0;try{for(var l,u=this.dependenciesToBeRemoved[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){l.value.removeObserver(this)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}this.dependenciesToBeRemoved.clear()}}}},{key:"toString",value:function(){return"Autorun<".concat(this.debugName,">")}},{key:"beginUpdate",value:function(){3===this.state&&(this.state=1),this.updateCount++}},{key:"endUpdate",value:function(){var e=this;if(1===this.updateCount)do{if(1===this.state){this.state=3;var t=!0,n=!1,i=void 0;try{for(var r,o=this.dependencies[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){if(r.value.reportChanges(),2===this.state)break}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}this._runIfNeeded()}while(3!==this.state);this.updateCount--,e_((function(){return e.updateCount>=0}))}},{key:"handlePossibleChange",value:function(e){3===this.state&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}},{key:"handleChange",value:function(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){var n=!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:function(t){return t===e}},this.changeSummary);n&&(this.state=2)}}},{key:"readObservable",value:function(e){if(this.disposed)return e.get();e.addObserver(this);var t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}]),e}();function nO(e){return new iO(e)}!function(e){e.Observer=tO}(XP||(XP={}));var iO=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).value=e,n}return p(t,e),h(t,[{key:"debugName",get:function(){return this.toString()}},{key:"get",value:function(){return this.value}},{key:"addObserver",value:function(e){}},{key:"removeObserver",value:function(e){}},{key:"toString",value:function(){return"Const: ".concat(this.value)}}]),t}(EP);function rO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,r,o,a,s;3===t.length?(i=(a=C(t,3))[0],r=a[1],o=a[2]):(r=(s=C(t,2))[0],o=s[1]);return new oO(new kP(i,void 0,o),r,o,(function(){return oO.globalTransaction}),mP)}var oO=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t))._debugNameData=e,a.event=n,a._getValue=i,a._getTransaction=r,a._equalityComparator=o,a.hasValue=!1,a.handleEvent=function(e){var t=a._getValue(e),n=a.value;(!a.hasValue||!a._equalityComparator(n,t))&&(a.value=t,a.hasValue&&FP(a._getTransaction(),(function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=a.observers[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;e.updateObserver(s,a),s.handleChange(a,void 0)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}),(function(){var e=a.getDebugName();return"Event fired"+(e?": ".concat(e):"")})),a.hasValue=!0)},a}return p(t,e),h(t,[{key:"getDebugName",value:function(){return this._debugNameData.getDebugName(this)}},{key:"debugName",get:function(){var e=this.getDebugName();return"From Event"+(e?": ".concat(e):"")}},{key:"onFirstObserverAdded",value:function(){this.subscription=this.event(this.handleEvent)}},{key:"onLastObserverRemoved",value:function(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}},{key:"get",value:function(){if(this.subscription)return this.hasValue||this.handleEvent(void 0),this.value;var e=this._getValue(void 0);return e}}]),t}(MP);function aO(e,t){return new sO(e,t)}!function(e){e.Observer=oO,e.batchEventsGlobally=function(e,t){var n=!1;void 0===oO.globalTransaction&&(oO.globalTransaction=e,n=!0);try{t()}finally{n&&(oO.globalTransaction=void 0)}}}(rO||(rO={}));var sO=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).debugName=e,i.event=n,i.handleEvent=function(){TP((function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=i.observers[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;e.updateObserver(s,i),s.handleChange(i,void 0)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}),(function(){return i.debugName}))},i}return p(t,e),h(t,[{key:"onFirstObserverAdded",value:function(){this.subscription=this.event(this.handleEvent)}},{key:"onLastObserverRemoved",value:function(){this.subscription.dispose(),this.subscription=void 0}},{key:"get",value:function(){}}]),t}(MP);function lO(e){return"string"==typeof e?new uO(e):new uO(void 0,e)}var uO=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._debugName=e,i._owner=n,i}return p(t,e),h(t,[{key:"debugName",get:function(){var e;return null!==(e=new kP(this._owner,this._debugName,void 0).getDebugName(this))&&void 0!==e?e:"Observable Signal"}},{key:"toString",value:function(){return this.debugName}},{key:"trigger",value:function(e,t){var n=this;if(e){var i=!0,r=!1,o=void 0;try{for(var a,s=this.observers[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;e.updateObserver(l,this),l.handleChange(this,t)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}else TP((function(e){n.trigger(e,t)}),(function(){return"Trigger signal ".concat(n.debugName)}))}},{key:"get",value:function(){}}]),t}(MP);function cO(e,t){var n=new dO(!0,t);return e.addObserver(n),t?t(e.get()):e.reportChanges(),Mu((function(){e.removeObserver(n)}))}!function(e){xP=e}((function(e){var t=new dO(!1,void 0);return e.addObserver(t),Mu((function(){e.removeObserver(t)}))})),function(e){SP=e}(cO);var dO=function(){function e(t,n){u(this,e),this._forceRecompute=t,this._handleValue=n,this._counter=0}return h(e,[{key:"beginUpdate",value:function(e){this._counter++}},{key:"endUpdate",value:function(e){this._counter--,0===this._counter&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}},{key:"handlePossibleChange",value:function(e){}},{key:"handleChange",value:function(e,t){}}]),e}();function hO(e,t){var n=void 0,i=KP({owner:e,debugReferenceFn:t},(function(e){return n=t(e,n)}));return i}var fO=function(){function e(t,n){u(this,e),this._map=t,this._keySelector=n,this._cache=new Map,this._items=[]}return h(e,[{key:"dispose",value:function(){this._cache.forEach((function(e){return e.store.dispose()})),this._cache.clear()}},{key:"setItems",value:function(e){var t=[],n=new Set(this._cache.keys()),i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=this._keySelector?this._keySelector(l):l,c=this._cache.get(u);if(c)n.delete(u);else{var d=new Tu;c={out:this._map(l,d),store:d},this._cache.set(u,c)}t.push(c.out)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}var h=!0,f=!1,g=void 0;try{for(var v,p=n[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var m=v.value;this._cache.get(m).store.dispose(),this._cache.delete(m)}}catch(e){f=!0,g=e}finally{try{h||null==p.return||p.return()}finally{if(f)throw g}}this._items=t}},{key:"getItems",value:function(){return this._items}}]),e}();var gO=function(){function e(t){var n=this;u(this,e),this._value=BP(this,void 0),this.promiseResult=this._value,this.promise=t.then((function(e){return TP((function(t){n._value.set(new vO(e,void 0),t)})),e}),(function(e){throw TP((function(t){n._value.set(new vO(void 0,e),t)})),e}))}return h(e,null,[{key:"fromFn",value:function(t){return new e(t())}}]),e}(),vO=function e(t,n){u(this,e),this.data=t,this.error=n};function pO(e,t,n,i){return t||(t=function(e){return null!=e}),new Promise((function(r,o){var a=!0,s=!1,l=e.map((function(e){return{isFinished:t(e),error:!!n&&n(e),state:e}})),u=XP((function(e){var t=l.read(e),n=t.isFinished,i=t.error,c=t.state;(n||i)&&(a?s=!0:u.dispose(),i?o(!0===i?c:i):r(c))}));if(i){var c=i.onCancellationRequested((function(){u.dispose(),c.dispose(),o(new bu)}));if(i.isCancellationRequested)return u.dispose(),c.dispose(),void o(new bu)}a=!1,s&&u.dispose()}))}var mO=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._debugNameData=e,r._equalityComparator=i,r._isUpToDate=!0,r._deltas=[],r._updateCounter=0,r._value=n,r}return p(t,e),h(t,[{key:"debugName",get:function(){var e;return null!==(e=this._debugNameData.getDebugName(this))&&void 0!==e?e:"LazyObservableValue"}},{key:"get",value:function(){return this._update(),this._value}},{key:"_update",value:function(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){var e=!0,t=!1,n=void 0;try{for(var i,r=this.observers[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value,a=!0,s=!1,l=void 0;try{for(var u,c=this._deltas[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;o.handleChange(this,d)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this._deltas.length=0}else{var h=!0,f=!1,g=void 0;try{for(var v,p=this.observers[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){v.value.handleChange(this,void 0)}}catch(e){f=!0,g=e}finally{try{h||null==p.return||p.return()}finally{if(f)throw g}}}}},{key:"_beginUpdate",value:function(){if(this._updateCounter++,1===this._updateCounter){var e=!0,t=!1,n=void 0;try{for(var i,r=this.observers[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.beginUpdate(this)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}}},{key:"_endUpdate",value:function(){if(this._updateCounter--,0===this._updateCounter){this._update();var e=x(this.observers),t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.endUpdate(this)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}},{key:"addObserver",value:function(e){var n=!this.observers.has(e)&&this._updateCounter>0;g(v(t.prototype),"addObserver",this).call(this,e),n&&e.beginUpdate(this)}},{key:"removeObserver",value:function(e){var n=this.observers.has(e)&&this._updateCounter>0;g(v(t.prototype),"removeObserver",this).call(this,e),n&&e.endUpdate(this)}},{key:"set",value:function(e,t,n){var i=this;if(void 0!==n||!this._equalityComparator(this._value,e)){var r;t||(t=r=new WP((function(){}),(function(){return"Setting ".concat(i.debugName)})));try{if(this._isUpToDate=!1,this._setValue(e),void 0!==n&&this._deltas.push(n),t.updateObserver({beginUpdate:function(){return i._beginUpdate()},endUpdate:function(){return i._endUpdate()},handleChange:function(e,t){},handlePossibleChange:function(e){}},this),this._updateCounter>1){var o=!0,a=!1,s=void 0;try{for(var l,u=this.observers[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){l.value.handlePossibleChange(this)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}}finally{r&&r.finish()}}}},{key:"toString",value:function(){return"".concat(this.debugName,": ").concat(this._value)}},{key:"_setValue",value:function(e){this._value=e}}]),t}(MP);function yO(e,t){var n,i;return e.lazy?new mO(new kP(e.owner,e.debugName,void 0),t,null!==(n=e.equalsFn)&&void 0!==n?n:mP):new HP(new kP(e.owner,e.debugName,void 0),t,null!==(i=e.equalsFn)&&void 0!==i?i:mP)}var _O=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u(this,t),(e=l(this,t))._onDidRequestBasicLanguageFeatures=e._register(new Zu),e.onDidRequestBasicLanguageFeatures=e._onDidRequestBasicLanguageFeatures.event,e._onDidRequestRichLanguageFeatures=e._register(new Zu),e.onDidRequestRichLanguageFeatures=e._onDidRequestRichLanguageFeatures.event,e._onDidChange=e._register(new Zu({leakWarningThreshold:200})),e.onDidChange=e._onDidChange.event,e._requestedBasicLanguages=new Set,e._requestedRichLanguages=new Set,t.instanceCount++,e._registry=e._register(new pP(!0,n)),e.languageIdCodec=e._registry.languageIdCodec,e._register(e._registry.onDidChange((function(){return e._onDidChange.fire()}))),e}return p(t,e),h(t,[{key:"dispose",value:function(){t.instanceCount--,g(v(t.prototype),"dispose",this).call(this)}},{key:"isRegisteredLanguageId",value:function(e){return this._registry.isRegisteredLanguageId(e)}},{key:"getLanguageIdByLanguageName",value:function(e){return this._registry.getLanguageIdByLanguageName(e)}},{key:"getLanguageIdByMimeType",value:function(e){return this._registry.getLanguageIdByMimeType(e)}},{key:"guessLanguageIdByFilepathOrFirstLine",value:function(e,t){return da(this._registry.guessLanguageIdByFilepathOrFirstLine(e,t),null)}},{key:"createById",value:function(e){var t=this;return new bO(this.onDidChange,(function(){return t._createAndGetLanguageIdentifier(e)}))}},{key:"createByFilepathOrFirstLine",value:function(e,t){var n=this;return new bO(this.onDidChange,(function(){var i=n.guessLanguageIdByFilepathOrFirstLine(e,t);return n._createAndGetLanguageIdentifier(i)}))}},{key:"_createAndGetLanguageIdentifier",value:function(e){return e&&this.isRegisteredLanguageId(e)||(e=kk),e}},{key:"requestBasicLanguageFeatures",value:function(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}},{key:"requestRichLanguageFeatures",value:function(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),Rh.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}}]),t}(Ru);_O.instanceCount=0;var bO=function(){function e(t,n){u(this,e),this._value=rO(this,t,(function(){return n()})),this.onDidChange=Au.fromObservable(this._value)}return h(e,[{key:"languageId",get:function(){return this._value.get()}}]),e}(),kO={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:rk.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"},wO=function(){return{get delay(){return-1},dispose:function(){},showHover:function(){}}},CO=new Vh((function(){return wO("mouse",!1)})),SO=new Vh((function(){return wO("element",!1)}));function xO(e){return"element"===e?SO.value:CO.value}function LO(){return wO("element",!0)}var DO={showHover:function(){},hideHover:function(){},showAndFocusLastHover:function(){},setupManagedHover:function(){return null},showManagedHover:function(){}};function NO(){return DO}var IO=function(){function e(t){u(this,e),this.spliceables=t}return h(e,[{key:"splice",value:function(e,t,n){this.spliceables.forEach((function(i){return i.splice(e,t,n)}))}}]),e}(),EO=function(e){function t(e,n){return u(this,t),l(this,t,["ListError [".concat(e,"] ").concat(n)])}return p(t,e),t}(N(Error));function MO(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(!(e.start>=l.range.end)){if(e.end<l.range.start)break;var u=LR.intersect(e,l.range);LR.isEmpty(u)||n.push({range:u,size:l.size})}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}function TO(e,t){return{start:e.start+t,end:e.end+t}}function RO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var t=[],n=null,i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=l.range.start,c=l.range.end,d=l.size;n&&d===n.size?n.range.end=c:(n={range:{start:u,end:c},size:d},t.push(n))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return t}(t.reduce((function(e,t){return e.concat(t)}),[]))}var AO=function(){function e(t){u(this,e),this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=null!=t?t:0,this._size=this._paddingTop}return h(e,[{key:"paddingTop",get:function(){return this._paddingTop},set:function(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}},{key:"splice",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=n.length-t,r=MO({start:0,end:e},this.groups),o=MO({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map((function(e){return{range:TO(e.range,i),size:e.size}})),a=n.map((function(t,n){return{range:{start:e+n,end:e+n+1},size:t.size}}));this.groups=RO(r,a,o),this._size=this._paddingTop+this.groups.reduce((function(e,t){return e+t.size*(t.range.end-t.range.start)}),0)}},{key:"count",get:function(){var e=this.groups.length;return e?this.groups[e-1].range.end:0}},{key:"size",get:function(){return this._size}},{key:"indexAt",value:function(e){if(e<0)return-1;if(e<this._paddingTop)return 0;var t=0,n=this._paddingTop,i=!0,r=!1,o=void 0;try{for(var a,s=this.groups[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=l.range.end-l.range.start,c=n+u*l.size;if(e<c)return t+Math.floor((e-n)/l.size);t+=u,n=c}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return t}},{key:"indexAfter",value:function(e){return Math.min(this.indexAt(e)+1,this.count)}},{key:"positionAt",value:function(e){if(e<0)return-1;var t=0,n=0,i=!0,r=!1,o=void 0;try{for(var a,s=this.groups[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=l.range.end-l.range.start,c=n+u;if(e<c)return this._paddingTop+t+(e-n)*l.size;t+=u*l.size,n=c}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return-1}}]),e}(),PO=function(){function e(t){u(this,e),this.renderers=t,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}return h(e,[{key:"alloc",value:function(e){var t=this.getTemplateCache(e).pop(),n=!1;if(t)(n=this.transactionNodesPendingRemoval.has(t.domNode))&&this.transactionNodesPendingRemoval.delete(t.domNode);else{var i=gm(".monaco-list-row");t={domNode:i,templateId:e,templateData:this.getRenderer(e).renderTemplate(i)}}return{row:t,isReusingConnectedDomNode:n}}},{key:"release",value:function(e){e&&this.releaseRow(e)}},{key:"transact",value:function(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{var t=!0,n=!1,i=void 0;try{for(var r,o=this.transactionNodesPendingRemoval[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this.doRemoveNode(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}},{key:"releaseRow",value:function(e){var t=e.domNode,n=e.templateId;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}},{key:"doRemoveNode",value:function(e){e.classList.remove("scrolling"),e.remove()}},{key:"getTemplateCache",value:function(e){var t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}},{key:"dispose",value:function(){var e=this;this.cache.forEach((function(t,n){var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;e.getRenderer(n).disposeTemplate(l.templateData),l.templateData=null}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}})),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}},{key:"getRenderer",value:function(e){var t=this.renderers.get(e);if(!t)throw new Error("No renderer found for ".concat(e));return t}}]),e}(),OO=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},FO={CurrentDragAndDropData:void 0},WO={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements:function(e){return[e]},getDragURI:function(){return null},onDragStart:function(){},onDragOver:function(){return!1},drop:function(){},dispose:function(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0},BO=function(){function e(t){u(this,e),this.elements=t}return h(e,[{key:"update",value:function(){}},{key:"getData",value:function(){return this.elements}}]),e}(),HO=function(){function e(t){u(this,e),this.elements=t}return h(e,[{key:"update",value:function(){}},{key:"getData",value:function(){return this.elements}}]),e}(),VO=function(){function e(){u(this,e),this.types=[],this.files=[]}return h(e,[{key:"update",value:function(e){var t;e.types&&(t=this.types).splice.apply(t,[0,this.types.length].concat(x(e.types)));if(e.files){this.files.splice(0,this.files.length);for(var n=0;n<e.files.length;n++){var i=e.files.item(n);i&&(i.size||i.type)&&this.files.push(i)}}}},{key:"getData",value:function(){return{types:this.types,files:this.files}}}]),e}();var zO=function e(t){u(this,e),(null==t?void 0:t.getSetSize)?this.getSetSize=t.getSetSize.bind(t):this.getSetSize=function(e,t,n){return n},(null==t?void 0:t.getPosInSet)?this.getPosInSet=t.getPosInSet.bind(t):this.getPosInSet=function(e,t){return t+1},(null==t?void 0:t.getRole)?this.getRole=t.getRole.bind(t):this.getRole=function(e){return"listitem"},(null==t?void 0:t.isChecked)?this.isChecked=t.isChecked.bind(t):this.isChecked=function(e){}},UO=function(){function e(t,n,i){var r,o,a,s=this,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:WO;if(u(this,e),this.virtualDelegate=n,this.domId="list_id_".concat(++e.InstanceCount),this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new vg(50),this.splicing=!1,this.dragOverAnimationStopDisposable=Ru.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=Ru.None,this.onDragLeaveTimeout=Ru.None,this.disposables=new Tu,this._onDidChangeContentHeight=new Zu,this._onDidChangeContentWidth=new Zu,this.onDidChangeContentHeight=Au.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,l.horizontalScrolling&&l.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(null!==(a=l.paddingTop)&&void 0!==a?a:0);var c,d,h,f,g,v,p,m,y,_,b=!0,k=!1,w=void 0;try{for(var C,S=i[Symbol.iterator]();!(b=(C=S.next()).done);b=!0){var x=C.value;this.renderers.set(x.templateId,x)}}catch(e){k=!0,w=e}finally{try{b||null==S.return||S.return()}finally{if(k)throw w}}this.cache=this.disposables.add(new PO(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support","boolean"!=typeof l.mouseSupport||l.mouseSupport),this._horizontalScrolling=null!==(c=l.horizontalScrolling)&&void 0!==c?c:WO.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=void 0===l.paddingBottom?0:l.paddingBottom,this.accessibilityProvider=new zO(l.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(null!==(d=l.transformOptimization)&&void 0!==d?d:WO.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(JI.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new uE({forceIntegerValues:!0,smoothScrollDuration:null!==(h=l.smoothScrolling)&&void 0!==h&&h?125:0,scheduleAtNextAnimationFrame:function(e){return pp(ep(s.domNode),e)}})),this.scrollableElement=this.disposables.add(new mE(this.rowsContainer,{alwaysConsumeMouseWheel:null!==(f=l.alwaysConsumeMouseWheel)&&void 0!==f?f:WO.alwaysConsumeMouseWheel,horizontal:1,vertical:null!==(g=l.verticalScrollMode)&&void 0!==g?g:WO.verticalScrollMode,useShadows:null!==(v=l.useShadows)&&void 0!==v?v:WO.useShadows,mouseWheelScrollSensitivity:l.mouseWheelScrollSensitivity,fastScrollSensitivity:l.fastScrollSensitivity,scrollByPage:l.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),t.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(cp(this.rowsContainer,XI.Change,(function(e){return s.onTouchChange(e)}))),this.disposables.add(cp(this.scrollableElement.getDomNode(),"scroll",(function(e){return e.target.scrollTop=0}))),this.disposables.add(cp(this.domNode,"dragover",(function(e){return s.onDragOver(s.toDragEvent(e))}))),this.disposables.add(cp(this.domNode,"drop",(function(e){return s.onDrop(s.toDragEvent(e))}))),this.disposables.add(cp(this.domNode,"dragleave",(function(e){return s.onDragLeave(s.toDragEvent(e))}))),this.disposables.add(cp(this.domNode,"dragend",(function(e){return s.onDragEnd(e)}))),this.setRowLineHeight=null!==(p=l.setRowLineHeight)&&void 0!==p?p:WO.setRowLineHeight,this.setRowHeight=null!==(m=l.setRowHeight)&&void 0!==m?m:WO.setRowHeight,this.supportDynamicHeights=null!==(y=l.supportDynamicHeights)&&void 0!==y?y:WO.supportDynamicHeights,this.dnd=null!==(_=l.dnd)&&void 0!==_?_:this.disposables.add(WO.dnd),this.layout(null===(r=l.initialSize)||void 0===r?void 0:r.height,null===(o=l.initialSize)||void 0===o?void 0:o.width)}return h(e,[{key:"contentHeight",get:function(){return this.rangeMap.size}},{key:"onDidScroll",get:function(){return this.scrollableElement.onScroll}},{key:"scrollableElementDomNode",get:function(){return this.scrollableElement.getDomNode()}},{key:"horizontalScrolling",get:function(){return this._horizontalScrolling},set:function(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){var t=!0,n=!1,i=void 0;try{for(var r,o=this.items[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this.measureItemWidth(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:Np(this.domNode)}),this.rowsContainer.style.width="".concat(Math.max(this.scrollWidth||0,this.renderWidth),"px")}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}},{key:"updateOptions",value:function(e){var t;if(void 0!==e.paddingBottom&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),void 0!==e.smoothScrolling&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),void 0!==e.horizontalScrolling&&(this.horizontalScrolling=e.horizontalScrolling),void 0!==e.scrollByPage&&(t=b(_({},null!=t?t:{}),{scrollByPage:e.scrollByPage})),void 0!==e.mouseWheelScrollSensitivity&&(t=b(_({},null!=t?t:{}),{mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity})),void 0!==e.fastScrollSensitivity&&(t=b(_({},null!=t?t:{}),{fastScrollSensitivity:e.fastScrollSensitivity})),t&&this.scrollableElement.updateOptions(t),void 0!==e.paddingTop&&e.paddingTop!==this.rangeMap.paddingTop){var n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),i=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(n,Math.max(0,this.lastRenderTop+i),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}},{key:"createRangeMap",value:function(e){return new AO(e)}},{key:"splice",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}},{key:"_splice",value:function(e,t){for(var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},a=LR.intersect(r,o),s=new Map,l=a.end-1;l>=a.start;l--){var u=this.items[l];if(u.dragStartDisposable.dispose(),u.checkedDisposable.dispose(),u.row){var c=s.get(u.templateId);c||(c=[],s.set(u.templateId,c));var d=this.renderers.get(u.templateId);d&&d.disposeElement&&d.disposeElement(u.element,l,u.row.templateData,u.size),c.unshift(u.row)}u.row=null,u.stale=!0}var h,f,g={start:e+t,end:this.items.length},v=LR.intersect(g,r),p=LR.relativeComplement(g,r),m=i.map((function(e){return{id:String(n.itemId++),element:e,templateId:n.virtualDelegate.getTemplateId(e),size:n.virtualDelegate.getHeight(e),width:void 0,hasDynamicHeight:!!n.virtualDelegate.hasDynamicHeight&&n.virtualDelegate.hasDynamicHeight(e),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:Ru.None,checkedDisposable:Ru.None,stale:!1}}));0===e&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,m),h=this.items,this.items=m):(this.rangeMap.splice(e,t,m),h=(f=this.items).splice.apply(f,[e,t].concat(x(m))));for(var y=i.length-t,_=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),b=TO(v,y),k=LR.intersect(_,b),w=k.start;w<k.end;w++)this.updateItemInDOM(this.items[w],w);var C=LR.relativeComplement(b,_),S=!0,L=!1,D=void 0;try{for(var N,I=C[Symbol.iterator]();!(S=(N=I.next()).done);S=!0)for(var E=N.value,M=E.start;M<E.end;M++)this.removeItemFromDOM(M)}catch(e){L=!0,D=e}finally{try{S||null==I.return||I.return()}finally{if(L)throw D}}var T=p.map((function(e){return TO(e,y)})),R=[{start:e,end:e+i.length}].concat(x(T)).map((function(e){return LR.intersect(_,e)})).reverse(),A=!0,P=!1,O=void 0;try{for(var F,W=R[Symbol.iterator]();!(A=(F=W.next()).done);A=!0)for(var B=F.value,H=B.end-1;H>=B.start;H--){var V=this.items[H],z=s.get(V.templateId),U=null==z?void 0:z.pop();this.insertItemInDOM(H,U)}}catch(e){P=!0,O=e}finally{try{A||null==W.return||W.return()}finally{if(P)throw O}}var j=!0,K=!1,q=void 0;try{for(var G,Z=s.values()[Symbol.iterator]();!(j=(G=Z.next()).done);j=!0){var Y=G.value,Q=!0,X=!1,$=void 0;try{for(var J,ee=Y[Symbol.iterator]();!(Q=(J=ee.next()).done);Q=!0){var te=J.value;this.cache.release(te)}}catch(e){X=!0,$=e}finally{try{Q||null==ee.return||ee.return()}finally{if(X)throw $}}}}catch(e){K=!0,q=e}finally{try{j||null==Z.return||Z.return()}finally{if(K)throw q}}return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map((function(e){return e.element}))}},{key:"eventuallyUpdateScrollDimensions",value:function(){var e=this;this._scrollHeight=this.contentHeight,this.rowsContainer.style.height="".concat(this._scrollHeight,"px"),this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=pp(ep(this.domNode),(function(){e.scrollableElement.setScrollDimensions({scrollHeight:e.scrollHeight}),e.updateScrollWidth(),e.scrollableElementUpdateDisposable=null})))}},{key:"eventuallyUpdateScrollWidth",value:function(){var e=this;this.horizontalScrolling?this.scrollableElementWidthDelayer.trigger((function(){return e.updateScrollWidth()})):this.scrollableElementWidthDelayer.cancel()}},{key:"updateScrollWidth",value:function(){if(this.horizontalScrolling){var e=0,t=!0,n=!1,i=void 0;try{for(var r,o=this.items[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;void 0!==a.width&&(e=Math.max(e,a.width))}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:0===e?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}}},{key:"rerender",value:function(){if(this.supportDynamicHeights){var e=!0,t=!1,n=void 0;try{for(var i,r=this.items[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.lastDynamicHeightWidth=void 0}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this._rerender(this.lastRenderTop,this.lastRenderHeight)}}},{key:"length",get:function(){return this.items.length}},{key:"renderHeight",get:function(){var e=this.scrollableElement.getScrollDimensions();return e.height}},{key:"firstVisibleIndex",get:function(){var e=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);return e.start}},{key:"element",value:function(e){return this.items[e].element}},{key:"indexOf",value:function(e){return this.items.findIndex((function(t){return t.element===e}))}},{key:"domElement",value:function(e){var t=this.items[e].row;return t&&t.domNode}},{key:"elementHeight",value:function(e){return this.items[e].size}},{key:"elementTop",value:function(e){return this.rangeMap.positionAt(e)}},{key:"indexAt",value:function(e){return this.rangeMap.indexAt(e)}},{key:"indexAfter",value:function(e){return this.rangeMap.indexAfter(e)}},{key:"layout",value:function(e,t){var n={height:"number"==typeof e?e:Ip(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),void 0!==t&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:"number"==typeof t?t:Np(this.domNode)})}},{key:"render",value:function(e,t,n,i,r){var o=this,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=this.getRenderRange(t,n),l=LR.relativeComplement(s,e).reverse(),u=LR.relativeComplement(e,s);if(a)for(var c=LR.intersect(e,s),d=c.start;d<c.end;d++)this.updateItemInDOM(this.items[d],d);this.cache.transact((function(){var e=!0,t=!1,n=void 0;try{for(var i,r=u[Symbol.iterator]();!(e=(i=r.next()).done);e=!0)for(var a=i.value,s=a.start;s<a.end;s++)o.removeItemFromDOM(s)}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}var c=!0,d=!1,h=void 0;try{for(var f,g=l[Symbol.iterator]();!(c=(f=g.next()).done);c=!0)for(var v=f.value,p=v.end-1;p>=v.start;p--)o.insertItemInDOM(p)}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}})),void 0!==i&&(this.rowsContainer.style.left="-".concat(i,"px")),this.rowsContainer.style.top="-".concat(t,"px"),this.horizontalScrolling&&void 0!==r&&(this.rowsContainer.style.width="".concat(Math.max(r,this.renderWidth),"px")),this.lastRenderTop=t,this.lastRenderHeight=n}},{key:"insertItemInDOM",value:function(e,t){var n=this,i=this.items[e];if(!i.row)if(t)i.row=t,i.stale=!0;else{var r,o=this.cache.alloc(i.templateId);i.row=o.row,(r=i).stale||(r.stale=o.isReusingConnectedDomNode)}var a=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",a);var s=this.accessibilityProvider.isChecked(i.element);if("boolean"==typeof s)i.row.domNode.setAttribute("aria-checked",String(!!s));else if(s){var l=function(e){return i.row.domNode.setAttribute("aria-checked",String(!!e))};l(s.value),i.checkedDisposable=s.onDidChange((function(){return l(s.value)}))}if(i.stale||!i.row.domNode.parentElement){var u,c,d,h=null!==(d=null===(c=this.items.at(e+1))||void 0===c||null===(u=c.row)||void 0===u?void 0:u.domNode)&&void 0!==d?d:null;i.row.domNode.parentElement===this.rowsContainer&&i.row.domNode.nextElementSibling===h||this.rowsContainer.insertBefore(i.row.domNode,h),i.stale=!1}this.updateItemInDOM(i,e);var f=this.renderers.get(i.templateId);if(!f)throw new Error("No renderer found for template id ".concat(i.templateId));null==f||f.renderElement(i.element,e,i.row.templateData,i.size);var g=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!g,g&&(i.dragStartDisposable=cp(i.row.domNode,"dragstart",(function(e){return n.onDragStart(i.element,g,e)}))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}},{key:"measureItemWidth",value:function(e){if(e.row&&e.row.domNode){e.row.domNode.style.width="fit-content",e.width=Np(e.row.domNode);var t=ep(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}}},{key:"updateItemInDOM",value:function(e,t){e.row.domNode.style.top="".concat(this.elementTop(t),"px"),this.setRowHeight&&(e.row.domNode.style.height="".concat(e.size,"px")),this.setRowLineHeight&&(e.row.domNode.style.lineHeight="".concat(e.size,"px")),e.row.domNode.setAttribute("data-index","".concat(t)),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2==0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}},{key:"removeItemFromDOM",value:function(e){var t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){var n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}},{key:"getScrollTop",value:function(){var e=this.scrollableElement.getScrollPosition();return e.scrollTop}},{key:"setScrollTop",value:function(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}},{key:"scrollTop",get:function(){return this.getScrollTop()},set:function(e){this.setScrollTop(e)}},{key:"scrollHeight",get:function(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}},{key:"onMouseClick",get:function(){var e=this;return Au.map(this.disposables.add(new LE(this.domNode,"click")).event,(function(t){return e.toMouseEvent(t)}),this.disposables)}},{key:"onMouseDblClick",get:function(){var e=this;return Au.map(this.disposables.add(new LE(this.domNode,"dblclick")).event,(function(t){return e.toMouseEvent(t)}),this.disposables)}},{key:"onMouseMiddleClick",get:function(){var e=this;return Au.filter(Au.map(this.disposables.add(new LE(this.domNode,"auxclick")).event,(function(t){return e.toMouseEvent(t)}),this.disposables),(function(e){return 1===e.browserEvent.button}),this.disposables)}},{key:"onMouseDown",get:function(){var e=this;return Au.map(this.disposables.add(new LE(this.domNode,"mousedown")).event,(function(t){return e.toMouseEvent(t)}),this.disposables)}},{key:"onMouseOver",get:function(){var e=this;return Au.map(this.disposables.add(new LE(this.domNode,"mouseover")).event,(function(t){return e.toMouseEvent(t)}),this.disposables)}},{key:"onMouseOut",get:function(){var e=this;return Au.map(this.disposables.add(new LE(this.domNode,"mouseout")).event,(function(t){return e.toMouseEvent(t)}),this.disposables)}},{key:"onContextMenu",get:function(){var e=this;return Au.any(Au.map(this.disposables.add(new LE(this.domNode,"contextmenu")).event,(function(t){return e.toMouseEvent(t)}),this.disposables),Au.map(this.disposables.add(new LE(this.domNode,XI.Contextmenu)).event,(function(t){return e.toGestureEvent(t)}),this.disposables))}},{key:"onTouchStart",get:function(){var e=this;return Au.map(this.disposables.add(new LE(this.domNode,"touchstart")).event,(function(t){return e.toTouchEvent(t)}),this.disposables)}},{key:"onTap",get:function(){var e=this;return Au.map(this.disposables.add(new LE(this.rowsContainer,XI.Tap)).event,(function(t){return e.toGestureEvent(t)}),this.disposables)}},{key:"toMouseEvent",value:function(e){var t=this.getItemIndexFromEventTarget(e.target||null),n=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element}}},{key:"toTouchEvent",value:function(e){var t=this.getItemIndexFromEventTarget(e.target||null),n=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element}}},{key:"toGestureEvent",value:function(e){var t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element}}},{key:"toDragEvent",value:function(e){var t=this.getItemIndexFromEventTarget(e.target||null),n=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element,sector:this.getTargetSector(e,t)}}},{key:"onScroll",value:function(e){try{var t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}},{key:"onTouchChange",value:function(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}},{key:"onDragStart",value:function(e,t,n){var i,r,o=this;if(n.dataTransfer){var a=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(kO.TEXT,t),n.dataTransfer.setDragImage){var s;this.dnd.getDragLabel&&(s=this.dnd.getDragLabel(a,n)),void 0===s&&(s=String(a.length));var l=gm(".monaco-drag-image");l.textContent=s;var u=function(e){for(;e&&!e.classList.contains("monaco-workbench");)e=e.parentElement;return e||o.domNode.ownerDocument}(this.domNode);u.appendChild(l),n.dataTransfer.setDragImage(l,-10,-10),setTimeout((function(){return l.remove()}),0)}this.domNode.classList.add("dragging"),this.currentDragData=new BO(a),FO.CurrentDragAndDropData=new HO(a),null===(i=(r=this.dnd).onDragStart)||void 0===i||i.call(r,this.currentDragData,n)}}},{key:"onDragOver",value:function(e){var t,n=this;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),FO.CurrentDragAndDropData&&"vscode-ui"===FO.CurrentDragAndDropData.getData())return!1;if(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer)return!1;if(!this.currentDragData)if(FO.CurrentDragAndDropData)this.currentDragData=FO.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new VO}var i,r=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop="boolean"==typeof r?r:r.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect="boolean"!=typeof r&&0===(null===(t=r.effect)||void 0===t?void 0:t.type)?"copy":"move",i=-1===(i=ca(i="boolean"!=typeof r&&r.feedback?r.feedback:void 0===e.index?[-1]:[e.index]).filter((function(e){return e>=-1&&e<n.length})).sort((function(e,t){return e-t})))[0]?[-1]:i;var o="boolean"!=typeof r&&r.effect&&r.effect.position?r.effect.position:"drop-target";if(function(e,t){return Array.isArray(e)&&Array.isArray(t)?ea(e,t):e===t}(this.currentDragFeedback,i)&&this.currentDragFeedbackPosition===o)return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackPosition=o,this.currentDragFeedbackDisposable.dispose(),-1===i[0])this.domNode.classList.add(o),this.rowsContainer.classList.add(o),this.currentDragFeedbackDisposable=Mu((function(){n.domNode.classList.remove(o),n.rowsContainer.classList.remove(o)}));else{if(i.length>1&&"drop-target"!==o)throw new Error("Can't use multiple feedbacks with position different than 'over'");"drop-target-after"===o&&i[0]<this.length-1&&(i[0]+=1,o="drop-target-before");var a=!0,s=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d,h=u.value,f=this.items[h];f.dropTarget=!0,null===(d=f.row)||void 0===d||d.domNode.classList.add(o)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}this.currentDragFeedbackDisposable=Mu((function(){var e=!0,t=!1,r=void 0;try{for(var a,s=i[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var l,u=a.value,c=n.items[u];c.dropTarget=!1,null===(l=c.row)||void 0===l||l.domNode.classList.remove(o)}}catch(e){t=!0,r=e}finally{try{e||null==s.return||s.return()}finally{if(t)throw r}}}))}return!0}},{key:"onDragLeave",value:function(e){var t,n,i=this;(this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=yg((function(){return i.clearDragOverFeedback()}),100,this.disposables),this.currentDragData)&&(null===(t=(n=this.dnd).onDragLeave)||void 0===t||t.call(n,this.currentDragData,e.element,e.index,e.browserEvent))}},{key:"onDrop",value:function(e){if(this.canDrop){var t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,FO.CurrentDragAndDropData=void 0,t&&e.browserEvent.dataTransfer&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}}},{key:"onDragEnd",value:function(e){var t,n;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,FO.CurrentDragAndDropData=void 0,null===(t=(n=this.dnd).onDragEnd)||void 0===t||t.call(n,e)}},{key:"clearDragOverFeedback",value:function(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=Ru.None}},{key:"setupDragAndDropScrollTopAnimation",value:function(e){var t=this;if(!this.dragOverAnimationDisposable){var n=Sp(this.domNode).top;this.dragOverAnimationDisposable=function(e,t){var n=function(){t(),i=pp(e,n)},i=pp(e,n);return Mu((function(){return i.dispose()}))}(ep(this.domNode),this.animateDragAndDropScrollTop.bind(this,n))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=yg((function(){t.dragOverAnimationDisposable&&(t.dragOverAnimationDisposable.dispose(),t.dragOverAnimationDisposable=void 0)}),1e3,this.disposables),this.dragOverMouseY=e.pageY}},{key:"animateDragAndDropScrollTop",value:function(e){if(void 0!==this.dragOverMouseY){var t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}}},{key:"teardownDragAndDropScrollTopAnimation",value:function(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}},{key:"getTargetSector",value:function(e,t){if(void 0!==t){var n=e.offsetY/this.items[t].size;return wx(Math.floor(n/.25),0,3)}}},{key:"getItemIndexFromEventTarget",value:function(e){for(var t=this.scrollableElement.getDomNode(),n=e;(Jp(n)||tm(n))&&n!==this.rowsContainer&&t.contains(n);){var i=n.getAttribute("data-index");if(i){var r=Number(i);if(!isNaN(r))return r}n=n.parentElement}}},{key:"getRenderRange",value:function(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}},{key:"_rerender",value:function(e,t,n){var i,r,o=this.getRenderRange(e,t);e===this.elementTop(o.start)?(i=o.start,r=0):o.end-o.start>1&&(i=o.start+1,r=this.elementTop(i)-e);for(var a=0;;){for(var s=this.getRenderRange(e,t),l=!1,u=s.start;u<s.end;u++){var c=this.probeDynamicHeight(u);0!==c&&this.rangeMap.splice(u,1,[this.items[u]]),a+=c,l=l||0!==c}if(!l){0!==a&&this.eventuallyUpdateScrollDimensions();var d=LR.relativeComplement(o,s),h=!0,f=!1,g=void 0;try{for(var v,p=d[Symbol.iterator]();!(h=(v=p.next()).done);h=!0)for(var m=v.value,y=m.start;y<m.end;y++)this.items[y].row&&this.removeItemFromDOM(y)}catch(e){f=!0,g=e}finally{try{h||null==p.return||p.return()}finally{if(f)throw g}}var _=LR.relativeComplement(s,o).reverse(),b=!0,k=!1,w=void 0;try{for(var C,S=_[Symbol.iterator]();!(b=(C=S.next()).done);b=!0)for(var x=C.value,L=x.end-1;L>=x.start;L--)this.insertItemInDOM(L)}catch(e){k=!0,w=e}finally{try{b||null==S.return||S.return()}finally{if(k)throw w}}for(var D=s.start;D<s.end;D++)this.items[D].row&&this.updateItemInDOM(this.items[D],D);if("number"==typeof i){var N=this.scrollable.getFutureScrollPosition().scrollTop-e,I=this.elementTop(i)-r+N;this.setScrollTop(I,n)}return void this._onDidChangeContentHeight.fire(this.contentHeight)}}}},{key:"probeDynamicHeight",value:function(e){var t,n,i,r=this.items[e];if(this.virtualDelegate.getDynamicHeight){var o=this.virtualDelegate.getDynamicHeight(r.element);if(null!==o){var a=r.size;return r.size=o,r.lastDynamicHeightWidth=this.renderWidth,o-a}}if(!r.hasDynamicHeight||r.lastDynamicHeightWidth===this.renderWidth)return 0;if(this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(r.element))return 0;var s=r.size;if(r.row)return r.row.domNode.style.height="",r.size=r.row.domNode.offsetHeight,0!==r.size||Mp(r.row.domNode,ep(r.row.domNode).document.body)||console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",(new Error).stack),r.lastDynamicHeightWidth=this.renderWidth,r.size-s;var l=this.cache.alloc(r.templateId).row;l.domNode.style.height="",this.rowsContainer.appendChild(l.domNode);var u=this.renderers.get(r.templateId);if(!u)throw new Lu("Missing renderer for templateId: "+r.templateId);return u.renderElement(r.element,e,l.templateData,void 0),r.size=l.domNode.offsetHeight,null===(t=u.disposeElement)||void 0===t||t.call(u,r.element,e,l.templateData,void 0),null===(n=(i=this.virtualDelegate).setDynamicHeight)||void 0===n||n.call(i,r.element,r.size),r.lastDynamicHeightWidth=this.renderWidth,l.domNode.remove(),this.cache.release(l),r.size-s}},{key:"getElementDomId",value:function(e){return"".concat(this.domId,"_").concat(e)}},{key:"dispose",value:function(){var e,t,n=!0,i=!1,r=void 0;try{for(var o,a=this.items[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s.dragStartDisposable.dispose(),s.checkedDisposable.dispose(),s.row){var l,u=this.renderers.get(s.row.templateId);if(u)null===(l=u.disposeElement)||void 0===l||l.call(u,s.element,-1,s.row.templateData,void 0),u.disposeTemplate(s.row.templateData)}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this.items=[],null===(e=this.domNode)||void 0===e||e.remove(),null===(t=this.dragOverAnimationDisposable)||void 0===t||t.dispose(),this.disposables.dispose()}}]),e}();UO.InstanceCount=0,OO([QI],UO.prototype,"onMouseClick",null),OO([QI],UO.prototype,"onMouseDblClick",null),OO([QI],UO.prototype,"onMouseMiddleClick",null),OO([QI],UO.prototype,"onMouseDown",null),OO([QI],UO.prototype,"onMouseOver",null),OO([QI],UO.prototype,"onMouseOut",null),OO([QI],UO.prototype,"onContextMenu",null),OO([QI],UO.prototype,"onTouchStart",null),OO([QI],UO.prototype,"onTap",null);var jO=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},KO=function(){function e(t){u(this,e),this.trait=t,this.renderedElements=[]}return h(e,[{key:"templateId",get:function(){return"template:".concat(this.trait.name)}},{key:"renderTemplate",value:function(e){return e}},{key:"renderElement",value:function(e,t,n){var i=this.renderedElements.findIndex((function(e){return e.templateData===n}));if(i>=0){var r=this.renderedElements[i];this.trait.unrender(n),r.index=t}else{var o={index:t,templateData:n};this.renderedElements.push(o)}this.trait.renderIndex(t,n)}},{key:"splice",value:function(e,t,n){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=this.renderedElements[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;u.index<e?i.push(u):u.index>=e+t&&i.push({index:u.index+n-t,templateData:u.templateData})}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}this.renderedElements=i}},{key:"renderIndexes",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this.renderedElements[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=a.index,l=a.templateData;e.indexOf(s)>-1&&this.trait.renderIndex(s,l)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"disposeTemplate",value:function(e){var t=this.renderedElements.findIndex((function(t){return t.templateData===e}));t<0||this.renderedElements.splice(t,1)}}]),e}(),qO=function(){function e(t){u(this,e),this._trait=t,this.indexes=[],this.sortedIndexes=[],this._onChange=new Zu,this.onChange=this._onChange.event}return h(e,[{key:"name",get:function(){return this._trait}},{key:"renderer",get:function(){return new KO(this)}},{key:"splice",value:function(e,t,n){for(var i=n.length-t,r=e+t,o=[],a=0;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)o.push(this.sortedIndexes[a++]);for(var s=0;s<n.length;s++)n[s]&&o.push(s+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=r;)o.push(this.sortedIndexes[a++]+i);this.renderer.splice(e,t,n.length),this._set(o,o)}},{key:"renderIndex",value:function(e,t){t.classList.toggle(this._trait,this.contains(e))}},{key:"unrender",value:function(e){e.classList.remove(this._trait)}},{key:"set",value:function(e,t){return this._set(e,x(e).sort(vF),t)}},{key:"_set",value:function(e,t,n){var i=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;var o=gF(r,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:n}),i}},{key:"get",value:function(){return this.indexes}},{key:"contains",value:function(e){return ta(this.sortedIndexes,e,vF)>=0}},{key:"dispose",value:function(){Iu(this._onChange)}}]),e}();jO([QI],qO.prototype,"renderer",null);var GO=function(e){function t(e){var n;return u(this,t),(n=l(this,t,["selected"])).setAriaSelected=e,n}return p(t,e),h(t,[{key:"renderIndex",value:function(e,n){g(v(t.prototype),"renderIndex",this).call(this,e,n),this.setAriaSelected&&(this.contains(e)?n.setAttribute("aria-selected","true"):n.setAttribute("aria-selected","false"))}}]),t}(qO),ZO=function(){function e(t,n,i){u(this,e),this.trait=t,this.view=n,this.identityProvider=i}return h(e,[{key:"splice",value:function(e,t,n){var i=this;if(!this.identityProvider)return this.trait.splice(e,t,new Array(n.length).fill(!1));var r=this.trait.get().map((function(e){return i.identityProvider.getId(i.view.element(e)).toString()}));if(0===r.length)return this.trait.splice(e,t,new Array(n.length).fill(!1));var o=new Set(r),a=n.map((function(e){return o.has(i.identityProvider.getId(e).toString())}));this.trait.splice(e,t,a)}}]),e}();function YO(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName}function QO(e,t){return!!e.classList.contains(t)||!e.classList.contains("monaco-list")&&(!!e.parentElement&&QO(e.parentElement,t))}function XO(e){return QO(e,"monaco-editor")}function $O(e){return QO(e,"monaco-tree-sticky-row")}function JO(e){return e.classList.contains("monaco-tree-sticky-container")}function eF(e){return!!("A"===e.tagName&&e.classList.contains("monaco-button")||"DIV"===e.tagName&&e.classList.contains("monaco-button-dropdown"))||!e.classList.contains("monaco-list")&&(!!e.parentElement&&eF(e.parentElement))}var tF,nF,iF=function(){function e(t,n,i){var r=this;u(this,e),this.list=t,this.view=n,this.disposables=new Tu,this.multipleSelectionDisposables=new Tu,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown((function(e){switch(e.keyCode){case 3:return r.onEnter(e);case 16:return r.onUpArrow(e);case 18:return r.onDownArrow(e);case 11:return r.onPageUpArrow(e);case 12:return r.onPageDownArrow(e);case 9:return r.onEscape(e);case 31:r.multipleSelectionSupport&&(ms?e.metaKey:e.ctrlKey)&&r.onCtrlA(e)}})))}return h(e,[{key:"onKeyDown",get:function(){return Au.chain(this.disposables.add(new LE(this.view.domNode,"keydown")).event,(function(e){return e.filter((function(e){return!YO(e.target)})).map((function(e){return new rg(e)}))}))}},{key:"updateOptions",value:function(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}},{key:"onEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}},{key:"onUpArrow",value:function(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);var t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}},{key:"onDownArrow",value:function(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);var t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}},{key:"onPageUpArrow",value:function(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);var t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}},{key:"onPageDownArrow",value:function(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);var t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}},{key:"onCtrlA",value:function(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(ha(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}},{key:"onEscape",value:function(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}},{key:"dispose",value:function(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}]),e}();jO([QI],iF.prototype,"onKeyDown",null),function(e){e[e.Automatic=0]="Automatic",e[e.Trigger=1]="Trigger"}(tF||(tF={})),function(e){e[e.Idle=0]="Idle",e[e.Typing=1]="Typing"}(nF||(nF={}));var rF=new(function(){function e(){u(this,e)}return h(e,[{key:"mightProducePrintableCharacter",value:function(e){return!(e.ctrlKey||e.metaKey||e.altKey)&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30||e.keyCode>=98&&e.keyCode<=107||e.keyCode>=85&&e.keyCode<=95)}}]),e}()),oF=function(){function e(t,n,i,r,o){u(this,e),this.list=t,this.view=n,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=r,this.delegate=o,this.enabled=!1,this.state=nF.Idle,this.mode=tF.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Tu,this.disposables=new Tu,this.updateOptions(t.options)}return h(e,[{key:"updateOptions",value:function(e){var t,n;null===(t=e.typeNavigationEnabled)||void 0===t||t?this.enable():this.disable(),this.mode=null!==(n=e.typeNavigationMode)&&void 0!==n?n:tF.Automatic}},{key:"enable",value:function(){var e=this;if(!this.enabled){var t=!1,n=Au.chain(this.enabledDisposables.add(new LE(this.view.domNode,"keydown")).event,(function(n){return n.filter((function(e){return!YO(e.target)})).filter((function(){return e.mode===tF.Automatic||e.triggered})).map((function(e){return new rg(e)})).filter((function(n){return t||e.keyboardNavigationEventFilter(n)})).filter((function(t){return e.delegate.mightProducePrintableCharacter(t)})).forEach((function(e){return om(e,!0)})).map((function(e){return e.browserEvent.key}))})),i=Au.debounce(n,(function(){return null}),800,void 0,void 0,void 0,this.enabledDisposables),r=Au.reduce(Au.any(n,i),(function(e,t){return null===t?null:(e||"")+t}),void 0,this.enabledDisposables);r(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),n((function(){return t=!0}),void 0,this.enabledDisposables),i((function(){return t=!1}),void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}}},{key:"disable",value:function(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}},{key:"onClear",value:function(){var e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){var t,n=null===(t=this.list.options.accessibilityProvider)||void 0===t?void 0:t.getAriaLabel(this.list.element(e[0]));"string"==typeof n?_R(n):n&&_R(n.get())}this.previouslyFocused=-1}},{key:"onInput",value:function(e){if(!e)return this.state=nF.Idle,void(this.triggered=!1);var t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===nF.Idle?1:0;this.state=nF.Typing;for(var r=0;r<this.list.length;r++){var o=(n+r+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),s=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(void 0!==s){if(KE(e,s))return this.previouslyFocused=n,this.list.setFocus([o]),void this.list.reveal(o);var l=pM(e,s);if(l)if(l[0].end-l[0].start>1&&1===l.length)return this.previouslyFocused=n,this.list.setFocus([o]),void this.list.reveal(o)}}else if(void 0===s||KE(e,s))return this.previouslyFocused=n,this.list.setFocus([o]),void this.list.reveal(o)}}},{key:"dispose",value:function(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}]),e}(),aF=function(){function e(t,n){u(this,e),this.list=t,this.view=n,this.disposables=new Tu;var i=Au.chain(this.disposables.add(new LE(n.domNode,"keydown")).event,(function(e){return e.filter((function(e){return!YO(e.target)})).map((function(e){return new rg(e)}))})),r=Au.chain(i,(function(e){return e.filter((function(e){return!(2!==e.keyCode||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey)}))}));r(this.onTab,this,this.disposables)}return h(e,[{key:"onTab",value:function(e){if(e.target===this.view.domNode){var t=this.list.getFocus();if(0!==t.length){var n=this.view.domElement(t[0]);if(n){var i=n.querySelector("[tabIndex]");if(i&&Jp(i)&&-1!==i.tabIndex){var r=ep(i).getComputedStyle(i);"hidden"!==r.visibility&&"none"!==r.display&&(e.preventDefault(),e.stopPropagation(),i.focus())}}}}}},{key:"dispose",value:function(){this.disposables.dispose()}}]),e}();function sF(e){return ms?e.browserEvent.metaKey:e.browserEvent.ctrlKey}function lF(e){return e.browserEvent.shiftKey}var uF={isSelectionSingleChangeEvent:sF,isSelectionRangeChangeEvent:lF},cF=function(){function e(t){u(this,e),this.list=t,this.disposables=new Tu,this._onPointer=new Zu,this.onPointer=this._onPointer.event,!1!==t.options.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||uF),this.mouseSupport=void 0===t.options.mouseSupport||!!t.options.mouseSupport,this.mouseSupport&&(t.onMouseDown(this.onMouseDown,this,this.disposables),t.onContextMenu(this.onContextMenu,this,this.disposables),t.onMouseDblClick(this.onDoubleClick,this,this.disposables),t.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(JI.addTarget(t.getHTMLElement()))),Au.any(t.onMouseClick,t.onMouseMiddleClick,t.onTap)(this.onViewPointer,this,this.disposables)}return h(e,[{key:"updateOptions",value:function(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||uF))}},{key:"isSelectionSingleChangeEvent",value:function(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionSingleChangeEvent(e)}},{key:"isSelectionRangeChangeEvent",value:function(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionRangeChangeEvent(e)}},{key:"isSelectionChangeEvent",value:function(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}},{key:"onMouseDown",value:function(e){XO(e.browserEvent.target)||Op()!==e.browserEvent.target&&this.list.domFocus()}},{key:"onContextMenu",value:function(e){if(!YO(e.browserEvent.target)&&!XO(e.browserEvent.target)){var t=void 0===e.index?[]:[e.index];this.list.setFocus(t,e.browserEvent)}}},{key:"onViewPointer",value:function(e){if(this.mouseSupport&&!YO(e.browserEvent.target)&&!XO(e.browserEvent.target)&&!e.browserEvent.isHandledByList){e.browserEvent.isHandledByList=!0;var t=e.index;if(void 0===t)return this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),void this.list.setAnchor(void 0);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),function(e){return nm(e)&&2===e.button}(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}}},{key:"onDoubleClick",value:function(e){if(!(YO(e.browserEvent.target)||XO(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)){e.browserEvent.isHandledByList=!0;var t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}}},{key:"changeSelection",value:function(e){var t=e.index,n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(void 0===n){var i=this.list.getFocus()[0];n=null!=i?i:t,this.list.setAnchor(n)}var r=ha(Math.min(n,t),Math.max(n,t)+1),o=this.list.getSelection(),a=function(e,t){var n=e.indexOf(t);if(-1===n)return[];var i=[],r=n-1;for(;r>=0&&e[r]===t-(n-r);)i.push(e[r--]);i.reverse(),r=n;for(;r<e.length&&e[r]===t+(r-n);)i.push(e[r++]);return i}(gF(o,[n]),n);if(0===a.length)return;var s=gF(r,function(e,t){var n=[],i=0,r=0;for(;i<e.length||r<t.length;)if(i>=e.length)n.push(t[r++]);else if(r>=t.length)n.push(e[i++]);else{if(e[i]===t[r]){i++,r++;continue}e[i]<t[r]?n.push(e[i++]):r++}return n}(o,a));this.list.setSelection(s,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){var l=this.list.getSelection(),u=l.filter((function(e){return e!==t}));this.list.setFocus([t]),this.list.setAnchor(t),l.length===u.length?this.list.setSelection(x(u).concat([t]),e.browserEvent):this.list.setSelection(u,e.browserEvent)}}},{key:"dispose",value:function(){this.disposables.dispose()}}]),e}(),dF=function(){function e(t,n){u(this,e),this.styleElement=t,this.selectorSuffix=n}return h(e,[{key:"style",value:function(e){var t,n=this.selectorSuffix&&".".concat(this.selectorSuffix),i=[];e.listBackground&&i.push(".monaco-list".concat(n," .monaco-list-rows { background: ").concat(e.listBackground,"; }")),e.listFocusBackground&&(i.push(".monaco-list".concat(n,":focus .monaco-list-row.focused { background-color: ").concat(e.listFocusBackground,"; }")),i.push(".monaco-list".concat(n,":focus .monaco-list-row.focused:hover { background-color: ").concat(e.listFocusBackground,"; }"))),e.listFocusForeground&&i.push(".monaco-list".concat(n,":focus .monaco-list-row.focused { color: ").concat(e.listFocusForeground,"; }")),e.listActiveSelectionBackground&&(i.push(".monaco-list".concat(n,":focus .monaco-list-row.selected { background-color: ").concat(e.listActiveSelectionBackground,"; }")),i.push(".monaco-list".concat(n,":focus .monaco-list-row.selected:hover { background-color: ").concat(e.listActiveSelectionBackground,"; }"))),e.listActiveSelectionForeground&&i.push(".monaco-list".concat(n,":focus .monaco-list-row.selected { color: ").concat(e.listActiveSelectionForeground,"; }")),e.listActiveSelectionIconForeground&&i.push(".monaco-list".concat(n,":focus .monaco-list-row.selected .codicon { color: ").concat(e.listActiveSelectionIconForeground,"; }")),e.listFocusAndSelectionBackground&&i.push("\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list".concat(n,":focus .monaco-list-row.selected.focused { background-color: ").concat(e.listFocusAndSelectionBackground,"; }\n\t\t\t")),e.listFocusAndSelectionForeground&&i.push("\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list".concat(n,":focus .monaco-list-row.selected.focused { color: ").concat(e.listFocusAndSelectionForeground,"; }\n\t\t\t")),e.listInactiveFocusForeground&&(i.push(".monaco-list".concat(n," .monaco-list-row.focused { color:  ").concat(e.listInactiveFocusForeground,"; }")),i.push(".monaco-list".concat(n," .monaco-list-row.focused:hover { color:  ").concat(e.listInactiveFocusForeground,"; }"))),e.listInactiveSelectionIconForeground&&i.push(".monaco-list".concat(n," .monaco-list-row.focused .codicon { color:  ").concat(e.listInactiveSelectionIconForeground,"; }")),e.listInactiveFocusBackground&&(i.push(".monaco-list".concat(n," .monaco-list-row.focused { background-color:  ").concat(e.listInactiveFocusBackground,"; }")),i.push(".monaco-list".concat(n," .monaco-list-row.focused:hover { background-color:  ").concat(e.listInactiveFocusBackground,"; }"))),e.listInactiveSelectionBackground&&(i.push(".monaco-list".concat(n," .monaco-list-row.selected { background-color:  ").concat(e.listInactiveSelectionBackground,"; }")),i.push(".monaco-list".concat(n," .monaco-list-row.selected:hover { background-color:  ").concat(e.listInactiveSelectionBackground,"; }"))),e.listInactiveSelectionForeground&&i.push(".monaco-list".concat(n," .monaco-list-row.selected { color: ").concat(e.listInactiveSelectionForeground,"; }")),e.listHoverBackground&&i.push(".monaco-list".concat(n,":not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ").concat(e.listHoverBackground,"; }")),e.listHoverForeground&&i.push(".monaco-list".concat(n,":not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ").concat(e.listHoverForeground,"; }"));var r,o=km(e.listFocusAndSelectionOutline,km(e.listSelectionOutline,null!==(t=e.listFocusOutline)&&void 0!==t?t:""));o&&i.push(".monaco-list".concat(n,":focus .monaco-list-row.focused.selected { outline: 1px solid ").concat(o,"; outline-offset: -1px;}")),e.listFocusOutline&&i.push("\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list".concat(n,":focus .monaco-list-row.focused { outline: 1px solid ").concat(e.listFocusOutline,"; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list").concat(n,".last-focused .monaco-list-row.focused { outline: 1px solid ").concat(e.listFocusOutline,"; outline-offset: -1px; }\n\t\t\t"));var a=km(e.listSelectionOutline,null!==(r=e.listInactiveFocusOutline)&&void 0!==r?r:"");a&&i.push(".monaco-list".concat(n," .monaco-list-row.focused.selected { outline: 1px dotted ").concat(a,"; outline-offset: -1px; }")),e.listSelectionOutline&&i.push(".monaco-list".concat(n," .monaco-list-row.selected { outline: 1px dotted ").concat(e.listSelectionOutline,"; outline-offset: -1px; }")),e.listInactiveFocusOutline&&i.push(".monaco-list".concat(n," .monaco-list-row.focused { outline: 1px dotted ").concat(e.listInactiveFocusOutline,"; outline-offset: -1px; }")),e.listHoverOutline&&i.push(".monaco-list".concat(n," .monaco-list-row:hover { outline: 1px dashed ").concat(e.listHoverOutline,"; outline-offset: -1px; }")),e.listDropOverBackground&&i.push("\n\t\t\t\t.monaco-list".concat(n,".drop-target,\n\t\t\t\t.monaco-list").concat(n," .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list").concat(n," .monaco-list-row.drop-target { background-color: ").concat(e.listDropOverBackground," !important; color: inherit !important; }\n\t\t\t")),e.listDropBetweenBackground&&(i.push("\n\t\t\t.monaco-list".concat(n," .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,\n\t\t\t.monaco-list").concat(n,' .monaco-list-row.drop-target-before::before {\n\t\t\t\tcontent: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ').concat(e.listDropBetweenBackground,";\n\t\t\t}")),i.push("\n\t\t\t.monaco-list".concat(n," .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,\n\t\t\t.monaco-list").concat(n,' .monaco-list-row.drop-target-after::after {\n\t\t\t\tcontent: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ').concat(e.listDropBetweenBackground,";\n\t\t\t}"))),e.tableColumnsBorder&&i.push("\n\t\t\t\t.monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ".concat(e.tableColumnsBorder,";\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: transparent;\n\t\t\t\t}\n\t\t\t")),e.tableOddRowsBackgroundColor&&i.push("\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ".concat(e.tableOddRowsBackgroundColor,";\n\t\t\t\t}\n\t\t\t")),this.styleElement.textContent=i.join("\n")}}]),e}(),hF={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:XC.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:XC.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:XC.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},fF={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI:function(){return null},onDragStart:function(){},onDragOver:function(){return!1},drop:function(){},dispose:function(){}}};function gF(e,t){for(var n=[],i=0,r=0;i<e.length||r<t.length;)if(i>=e.length)n.push(t[r++]);else if(r>=t.length)n.push(e[i++]);else{if(e[i]===t[r]){n.push(e[i]),i++,r++;continue}e[i]<t[r]?n.push(e[i++]):n.push(t[r++])}return n}var vF=function(e,t){return e-t},pF=function(){function e(t,n){u(this,e),this._templateId=t,this.renderers=n}return h(e,[{key:"templateId",get:function(){return this._templateId}},{key:"renderTemplate",value:function(e){return this.renderers.map((function(t){return t.renderTemplate(e)}))}},{key:"renderElement",value:function(e,t,n,i){var r=0,o=!0,a=!1,s=void 0;try{for(var l,u=this.renderers[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){l.value.renderElement(e,t,n[r++],i)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}},{key:"disposeElement",value:function(e,t,n,i){var r=0,o=!0,a=!1,s=void 0;try{for(var l,u=this.renderers[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c,d=l.value;null===(c=d.disposeElement)||void 0===c||c.call(d,e,t,n[r],i),r+=1}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}},{key:"disposeTemplate",value:function(e){var t=0,n=!0,i=!1,r=void 0;try{for(var o,a=this.renderers[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.disposeTemplate(e[t++])}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}]),e}(),mF=function(){function e(t){u(this,e),this.accessibilityProvider=t,this.templateId="a18n"}return h(e,[{key:"renderTemplate",value:function(e){return{container:e,disposables:new Tu}}},{key:"renderElement",value:function(e,t,n){var i=this,r=this.accessibilityProvider.getAriaLabel(e),o=r&&"string"!=typeof r?r:nO(r);n.disposables.add(XP((function(e){i.setAriaLabel(e.readObservable(o),n.container)})));var a=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);"number"==typeof a?n.container.setAttribute("aria-level","".concat(a)):n.container.removeAttribute("aria-level")}},{key:"setAriaLabel",value:function(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}},{key:"disposeElement",value:function(e,t,n,i){n.disposables.clear()}},{key:"disposeTemplate",value:function(e){e.disposables.dispose()}}]),e}(),yF=function(){function e(t,n){u(this,e),this.list=t,this.dnd=n}return h(e,[{key:"getDragElements",value:function(e){var t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}},{key:"getDragURI",value:function(e){return this.dnd.getDragURI(e)}},{key:"getDragLabel",value:function(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}},{key:"onDragStart",value:function(e,t){var n,i;null===(n=(i=this.dnd).onDragStart)||void 0===n||n.call(i,e,t)}},{key:"onDragOver",value:function(e,t,n,i,r){return this.dnd.onDragOver(e,t,n,i,r)}},{key:"onDragLeave",value:function(e,t,n,i){var r,o;null===(r=(o=this.dnd).onDragLeave)||void 0===r||r.call(o,e,t,n,i)}},{key:"onDragEnd",value:function(e){var t,n;null===(t=(n=this.dnd).onDragEnd)||void 0===t||t.call(n,e)}},{key:"drop",value:function(e,t,n,i,r){this.dnd.drop(e,t,n,i,r)}},{key:"dispose",value:function(){this.dnd.dispose()}}]),e}(),_F=function(){function e(t,n,i,r){var o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fF;u(this,e),this.user=t,this._options=a,this.focus=new qO("focused"),this.anchor=new qO("anchor"),this.eventBufferer=new ec,this._ariaLabel="",this.disposables=new Tu,this._onDidDispose=new Zu,this.onDidDispose=this._onDidDispose.event;var s=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?null===(o=this._options.accessibilityProvider)||void 0===o?void 0:o.getWidgetRole():"list";this.selection=new GO("listbox"!==s);var l,c,d=[this.focus.renderer,this.selection.renderer];(this.accessibilityProvider=a.accessibilityProvider,this.accessibilityProvider)&&(d.push(new mF(this.accessibilityProvider)),null===(l=(c=this.accessibilityProvider).onDidChangeActiveDescendant)||void 0===l||l.call(c,this.onDidChangeActiveDescendant,this,this.disposables));r=r.map((function(e){return new pF(e.templateId,x(d).concat([e]))}));var h=b(_({},a),{dnd:a.dnd&&new yF(this,a.dnd)});if(this.view=this.createListView(n,i,r,h),this.view.domNode.setAttribute("role",s),a.styleController)this.styleController=a.styleController(this.view.domId);else{var f=jp(this.view.domNode);this.styleController=new dF(f,this.view.domId)}if(this.spliceable=new IO([new ZO(this.focus,this.view,a.identityProvider),new ZO(this.selection,this.view,a.identityProvider),new ZO(this.anchor,this.view,a.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new aF(this,this.view)),("boolean"!=typeof a.keyboardSupport||a.keyboardSupport)&&(this.keyboardController=new iF(this,this.view,a),this.disposables.add(this.keyboardController)),a.keyboardNavigationLabelProvider){var g,v=a.keyboardNavigationDelegate||rF;this.typeNavigationController=new oF(this,this.view,a.keyboardNavigationLabelProvider,null!==(g=a.keyboardNavigationEventFilter)&&void 0!==g?g:function(){return!0},v),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(a),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),!1!==this._options.multipleSelectionSupport&&this.view.domNode.setAttribute("aria-multiselectable","true")}return h(e,[{key:"onDidChangeFocus",get:function(){var e=this;return Au.map(this.eventBufferer.wrapEvent(this.focus.onChange),(function(t){return e.toListEvent(t)}),this.disposables)}},{key:"onDidChangeSelection",get:function(){var e=this;return Au.map(this.eventBufferer.wrapEvent(this.selection.onChange),(function(t){return e.toListEvent(t)}),this.disposables)}},{key:"domId",get:function(){return this.view.domId}},{key:"onDidScroll",get:function(){return this.view.onDidScroll}},{key:"onMouseClick",get:function(){return this.view.onMouseClick}},{key:"onMouseDblClick",get:function(){return this.view.onMouseDblClick}},{key:"onMouseMiddleClick",get:function(){return this.view.onMouseMiddleClick}},{key:"onPointer",get:function(){return this.mouseController.onPointer}},{key:"onMouseDown",get:function(){return this.view.onMouseDown}},{key:"onMouseOver",get:function(){return this.view.onMouseOver}},{key:"onMouseOut",get:function(){return this.view.onMouseOut}},{key:"onTouchStart",get:function(){return this.view.onTouchStart}},{key:"onTap",get:function(){return this.view.onTap}},{key:"onContextMenu",get:function(){var e=this,t=!1,n=Au.chain(this.disposables.add(new LE(this.view.domNode,"keydown")).event,(function(e){return e.map((function(e){return new rg(e)})).filter((function(e){return t=58===e.keyCode||e.shiftKey&&68===e.keyCode})).map((function(e){return om(e,!0)})).filter((function(){return!1}))})),i=Au.chain(this.disposables.add(new LE(this.view.domNode,"keyup")).event,(function(n){return n.forEach((function(){return t=!1})).map((function(e){return new rg(e)})).filter((function(e){return 58===e.keyCode||e.shiftKey&&68===e.keyCode})).map((function(e){return om(e,!0)})).map((function(t){var n=t.browserEvent,i=e.getFocus(),r=i.length?i[0]:void 0;return{index:r,element:void 0!==r?e.view.element(r):void 0,anchor:void 0!==r?e.view.domElement(r):e.view.domNode,browserEvent:n}}))})),r=Au.chain(this.view.onContextMenu,(function(n){return n.filter((function(e){return!t})).map((function(t){var n=t.element,i=t.index,r=t.browserEvent;return{element:n,index:i,anchor:new lg(ep(e.view.domNode),r),browserEvent:r}}))}));return Au.any(n,i,r)}},{key:"onKeyDown",get:function(){return this.disposables.add(new LE(this.view.domNode,"keydown")).event}},{key:"onDidFocus",get:function(){return Au.signal(this.disposables.add(new LE(this.view.domNode,"focus",!0)).event)}},{key:"onDidBlur",get:function(){return Au.signal(this.disposables.add(new LE(this.view.domNode,"blur",!0)).event)}},{key:"createListView",value:function(e,t,n,i){return new UO(e,t,n,i)}},{key:"createMouseController",value:function(e){return new cF(this)}},{key:"updateOptions",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=_({},this._options,n),null===(e=this.typeNavigationController)||void 0===e||e.updateOptions(this._options),void 0!==this._options.multipleSelectionController&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(n),null===(t=this.keyboardController)||void 0===t||t.updateOptions(n),this.view.updateOptions(n)}},{key:"options",get:function(){return this._options}},{key:"splice",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e<0||e>this.view.length)throw new EO(this.user,"Invalid start index: ".concat(e));if(t<0)throw new EO(this.user,"Invalid delete count: ".concat(t));0===t&&0===i.length||this.eventBufferer.bufferEvents((function(){return n.spliceable.splice(e,t,i)}))}},{key:"rerender",value:function(){this.view.rerender()}},{key:"element",value:function(e){return this.view.element(e)}},{key:"indexOf",value:function(e){return this.view.indexOf(e)}},{key:"indexAt",value:function(e){return this.view.indexAt(e)}},{key:"length",get:function(){return this.view.length}},{key:"contentHeight",get:function(){return this.view.contentHeight}},{key:"onDidChangeContentHeight",get:function(){return this.view.onDidChangeContentHeight}},{key:"scrollTop",get:function(){return this.view.getScrollTop()},set:function(e){this.view.setScrollTop(e)}},{key:"scrollHeight",get:function(){return this.view.scrollHeight}},{key:"renderHeight",get:function(){return this.view.renderHeight}},{key:"firstVisibleIndex",get:function(){return this.view.firstVisibleIndex}},{key:"ariaLabel",get:function(){return this._ariaLabel},set:function(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}},{key:"domFocus",value:function(){this.view.domNode.focus({preventScroll:!0})}},{key:"layout",value:function(e,t){this.view.layout(e,t)}},{key:"setSelection",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s<0||s>=this.length)throw new EO(this.user,"Invalid index ".concat(s))}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this.selection.set(e,t)}},{key:"getSelection",value:function(){return this.selection.get()}},{key:"getSelectedElements",value:function(){var e=this;return this.getSelection().map((function(t){return e.view.element(t)}))}},{key:"setAnchor",value:function(e){if(void 0!==e){if(e<0||e>=this.length)throw new EO(this.user,"Invalid index ".concat(e));this.anchor.set([e])}else this.anchor.set([])}},{key:"getAnchor",value:function(){return da(this.anchor.get(),void 0)}},{key:"getAnchorElement",value:function(){var e=this.getAnchor();return void 0===e?void 0:this.element(e)}},{key:"setFocus",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s<0||s>=this.length)throw new EO(this.user,"Invalid index ".concat(s))}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this.focus.set(e,t)}},{key:"focusNext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(0!==this.length){var r=this.focus.get(),o=this.findNextIndex(r.length>0?r[0]+e:0,t,i);o>-1&&this.setFocus([o],n)}}},{key:"focusPrevious",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(0!==this.length){var r=this.focus.get(),o=this.findPreviousIndex(r.length>0?r[0]-e:0,t,i);o>-1&&this.setFocus([o],n)}}},{key:"focusNextPage",value:function(e,t){var n=this;return s((function(){var i,r,o,a,s;return E(this,(function(l){switch(l.label){case 0:return i=0===(i=n.view.indexAt(n.view.getScrollTop()+n.view.renderHeight))?0:i-1,(r=n.getFocus()[0])!==i&&(void 0===r||i>r)?((o=n.findPreviousIndex(i,!1,t))>-1&&r!==o?n.setFocus([o],e):n.setFocus([i],e),[3,4]):[3,1];case 1:return a=n.view.getScrollTop(),s=a+n.view.renderHeight,i>r&&(s-=n.view.elementHeight(i)),n.view.setScrollTop(s),n.view.getScrollTop()===a?[3,4]:(n.setFocus([]),[4,mg(0)]);case 2:return l.sent(),[4,n.focusNextPage(e,t)];case 3:l.sent(),l.label=4;case 4:return[2]}}))}))()}},{key:"focusPreviousPage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return 0},i=this;return s((function(){var r,o,a,s,l,u;return E(this,(function(c){switch(c.label){case 0:return o=n(),a=i.view.getScrollTop()+o,r=0===a?i.view.indexAt(a):i.view.indexAfter(a-1),(s=i.getFocus()[0])!==r&&(void 0===s||s>=r)?((l=i.findNextIndex(r,!1,t))>-1&&s!==l?i.setFocus([l],e):i.setFocus([r],e),[3,4]):[3,1];case 1:return u=a,i.view.setScrollTop(a-i.view.renderHeight-o),i.view.getScrollTop()+n()===u?[3,4]:(i.setFocus([]),[4,mg(0)]);case 2:return c.sent(),[4,i.focusPreviousPage(e,t,n)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))()}},{key:"focusLast",value:function(e,t){if(0!==this.length){var n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}}},{key:"focusFirst",value:function(e,t){this.focusNth(0,e,t)}},{key:"focusNth",value:function(e,t,n){if(0!==this.length){var i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}}},{key:"findNextIndex",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e%=this.length,!n||n(this.element(e)))return e;e++}return-1}},{key:"findPreviousIndex",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}},{key:"getFocus",value:function(){return this.focus.get()}},{key:"getFocusedElements",value:function(){var e=this;return this.getFocus().map((function(t){return e.view.element(t)}))}},{key:"reveal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e<0||e>=this.length)throw new EO(this.user,"Invalid index ".concat(e));var i=this.view.getScrollTop(),r=this.view.elementTop(e),o=this.view.elementHeight(e);if(Ea(t)){var a=o-this.view.renderHeight+n;this.view.setScrollTop(a*wx(t,0,1)+r-n)}else{var s=r+o,l=i+this.view.renderHeight;r<i+n&&s>=l||(r<i+n||s>=l&&o>=this.view.renderHeight?this.view.setScrollTop(r-n):s>=l&&this.view.setScrollTop(s-this.view.renderHeight))}}},{key:"getRelativeTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e<0||e>=this.length)throw new EO(this.user,"Invalid index ".concat(e));var n=this.view.getScrollTop(),i=this.view.elementTop(e),r=this.view.elementHeight(e);if(i<n+t||i+r>n+this.view.renderHeight)return null;var o=r-this.view.renderHeight+t;return Math.abs((n+t-i)/o)}},{key:"getHTMLElement",value:function(){return this.view.domNode}},{key:"getScrollableElement",value:function(){return this.view.scrollableElementDomNode}},{key:"getElementID",value:function(e){return this.view.getElementDomId(e)}},{key:"getElementTop",value:function(e){return this.view.elementTop(e)}},{key:"style",value:function(e){this.styleController.style(e)}},{key:"toListEvent",value:function(e){var t=this,n=e.indexes,i=e.browserEvent;return{indexes:n,elements:n.map((function(e){return t.view.element(e)})),browserEvent:i}}},{key:"_onFocusChange",value:function(){var e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}},{key:"onDidChangeActiveDescendant",value:function(){var e,t,n=this.focus.get();n.length>0?((null===(e=this.accessibilityProvider)||void 0===e?void 0:e.getActiveDescendantId)&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(n[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(n[0]))):this.view.domNode.removeAttribute("aria-activedescendant")}},{key:"_onSelectionChange",value:function(){var e=this.selection.get();this.view.domNode.classList.toggle("selection-none",0===e.length),this.view.domNode.classList.toggle("selection-single",1===e.length),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}},{key:"dispose",value:function(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}]),e}();jO([QI],_F.prototype,"onDidChangeFocus",null),jO([QI],_F.prototype,"onDidChangeSelection",null),jO([QI],_F.prototype,"onContextMenu",null),jO([QI],_F.prototype,"onKeyDown",null),jO([QI],_F.prototype,"onDidFocus",null),jO([QI],_F.prototype,"onDidBlur",null);var bF=gm,kF="selectOption.entry.template",wF=function(){function e(){u(this,e)}return h(e,[{key:"templateId",get:function(){return kF}},{key:"renderTemplate",value:function(e){var t=Object.create(null);return t.root=e,t.text=lm(e,bF(".option-text")),t.detail=lm(e,bF(".option-detail")),t.decoratorRight=lm(e,bF(".option-decorator-right")),t}},{key:"renderElement",value:function(e,t,n){var i=n,r=e.text,o=e.detail,a=e.decoratorRight,s=e.isDisabled;i.text.textContent=r,i.detail.textContent=o||"",i.decoratorRight.innerText=a||"",s?i.root.classList.add("option-disabled"):i.root.classList.remove("option-disabled")}},{key:"disposeTemplate",value:function(e){}}]),e}(),CF=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t)).options=[],a._currentSelection=0,a._hasDetails=!1,a._skipLayout=!1,a._sticky=!1,a._isVisible=!1,a.styles=r,a.selectBoxOptions=o||Object.create(null),"number"!=typeof a.selectBoxOptions.minBottomMargin?a.selectBoxOptions.minBottomMargin=t.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:a.selectBoxOptions.minBottomMargin<0&&(a.selectBoxOptions.minBottomMargin=0),a.selectElement=document.createElement("select"),a.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding","string"==typeof a.selectBoxOptions.ariaLabel&&a.selectElement.setAttribute("aria-label",a.selectBoxOptions.ariaLabel),"string"==typeof a.selectBoxOptions.ariaDescription&&a.selectElement.setAttribute("aria-description",a.selectBoxOptions.ariaDescription),a._onDidSelect=new Zu,a._register(a._onDidSelect),a.registerListeners(),a.constructSelectDropDown(i),a.selected=n||0,e&&a.setOptions(e,n),a.initStyleSheet(),a}return p(t,e),h(t,[{key:"setTitle",value:function(e){!this._hover&&e?this._hover=this._register(NO().setupManagedHover(xO("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}},{key:"getHeight",value:function(){return 22}},{key:"getTemplateId",value:function(){return kF}},{key:"constructSelectDropDown",value:function(e){this.contextViewProvider=e,this.selectDropDownContainer=gm(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=lm(this.selectDropDownContainer,bF(".select-box-details-pane"));var t=lm(this.selectDropDownContainer,bF(".select-box-dropdown-container-width-control")),n=lm(t,bF(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",lm(n,this.widthControlElement),this._dropDownPosition=0,this.styleElement=jp(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(cp(this.selectDropDownContainer,rm.DRAG_START,(function(e){om(e,!0)})))}},{key:"registerListeners",value:function(){var e,t=this;this._register(hp(this.selectElement,"change",(function(e){t.selected=e.target.selectedIndex,t._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value}),t.options[t.selected]&&t.options[t.selected].text&&t.setTitle(t.options[t.selected].text)}))),this._register(cp(this.selectElement,rm.CLICK,(function(e){om(e),t._isVisible?t.hideSelectDropDown(!0):t.showSelectDropDown()}))),this._register(cp(this.selectElement,rm.MOUSE_DOWN,(function(e){om(e)}))),this._register(cp(this.selectElement,"touchstart",(function(n){e=t._isVisible}))),this._register(cp(this.selectElement,"touchend",(function(n){om(n),e?t.hideSelectDropDown(!0):t.showSelectDropDown()}))),this._register(cp(this.selectElement,rm.KEY_DOWN,(function(e){var n=new rg(e),i=!1;ms?18!==n.keyCode&&16!==n.keyCode&&10!==n.keyCode&&3!==n.keyCode||(i=!0):(18===n.keyCode&&n.altKey||16===n.keyCode&&n.altKey||10===n.keyCode||3===n.keyCode)&&(i=!0),i&&(t.showSelectDropDown(),om(e,!0))})))}},{key:"onDidSelect",get:function(){return this._onDidSelect.event}},{key:"setOptions",value:function(e,t){var n=this;ea(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((function(e,t){n.selectElement.add(n.createOption(e.text,t,e.isDisabled)),"string"==typeof e.description&&(n._hasDetails=!0)}))),void 0!==t&&(this.select(t),this._currentSelection=this.selected)}},{key:"setOptionsList",value:function(){var e;null===(e=this.selectList)||void 0===e||e.splice(0,this.selectList.length,this.options)}},{key:"select",value:function(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}},{key:"focus",value:function(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}},{key:"blur",value:function(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}},{key:"setFocusable",value:function(e){this.selectElement.tabIndex=e?0:-1}},{key:"render",value:function(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}},{key:"initStyleSheet",value:function(){var e=[];this.styles.listFocusBackground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ".concat(this.styles.listFocusBackground," !important; }")),this.styles.listFocusForeground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ".concat(this.styles.listFocusForeground," !important; }")),this.styles.decoratorRightForeground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ".concat(this.styles.decoratorRightForeground,"; }")),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(".monaco-select-box-dropdown-container { border: 1px solid ".concat(this.styles.selectBorder," } ")),e.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ".concat(this.styles.selectBorder," } ")),e.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ".concat(this.styles.selectBorder," } "))):this.styles.selectListBorder&&(e.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ".concat(this.styles.selectListBorder," } ")),e.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ".concat(this.styles.selectListBorder," } "))),this.styles.listHoverForeground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ".concat(this.styles.listHoverForeground," !important; }")),this.styles.listHoverBackground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ".concat(this.styles.listHoverBackground," !important; }")),this.styles.listFocusOutline&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ".concat(this.styles.listFocusOutline," !important; outline-offset: -1.6px !important; }")),this.styles.listHoverOutline&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ".concat(this.styles.listHoverOutline," !important; outline-offset: -1.6px !important; }")),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join("\n")}},{key:"styleSelectElement",value:function(){var e,t,n,i=null!==(e=this.styles.selectBackground)&&void 0!==e?e:"",r=null!==(t=this.styles.selectForeground)&&void 0!==t?t:"",o=null!==(n=this.styles.selectBorder)&&void 0!==n?n:"";this.selectElement.style.backgroundColor=i,this.selectElement.style.color=r,this.selectElement.style.borderColor=o}},{key:"styleList",value:function(){var e,t,n=null!==(e=this.styles.selectBackground)&&void 0!==e?e:"",i=km(this.styles.selectListBackground,n);this.selectDropDownListContainer.style.backgroundColor=i,this.selectionDetailsPane.style.backgroundColor=i;var r=null!==(t=this.styles.focusBorder)&&void 0!==t?t:"";this.selectDropDownContainer.style.outlineColor=r,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}},{key:"createOption",value:function(e,t,n){var i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}},{key:"showSelectDropDown",value:function(){var e=this;this.selectionDetailsPane.innerText="",this.contextViewProvider&&!this._isVisible&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:function(){return e.selectElement},render:function(t){return e.renderSelectDropDown(t,!0)},layout:function(){e.layoutSelectDropDown()},onHide:function(){e.selectDropDownContainer.classList.remove("visible"),e.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:function(){return e.selectElement},render:function(t){return e.renderSelectDropDown(t)},layout:function(){return e.layoutSelectDropDown()},onHide:function(){e.selectDropDownContainer.classList.remove("visible"),e.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}},{key:"hideSelectDropDown",value:function(e){this.contextViewProvider&&this._isVisible&&(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}},{key:"renderSelectDropDown",value:function(e,t){var n=this;return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:function(){n.selectDropDownContainer.remove()}}}},{key:"measureMaxDetailsHeight",value:function(){var e=this,t=0;return this.options.forEach((function(n,i){e.updateDetail(i),e.selectionDetailsPane.offsetHeight>t&&(t=e.selectionDetailsPane.offsetHeight)})),t}},{key:"layoutSelectDropDown",value:function(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");var n=ep(this.selectElement),i=xp(this.selectElement),r=ep(this.selectElement).getComputedStyle(this.selectElement),o=parseFloat(r.getPropertyValue("--dropdown-padding-top"))+parseFloat(r.getPropertyValue("--dropdown-padding-bottom")),a=n.innerHeight-i.top-i.height-(this.selectBoxOptions.minBottomMargin||0),s=i.top-t.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,u=this.setWidthControlElement(this.widthControlElement),c=Math.max(u,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=c,this.selectList.getHTMLElement().style.height="",this.selectList.layout();var d=this.selectList.contentHeight;this._hasDetails&&void 0===this._cachedMaxDetailsHeight&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());var h=this._hasDetails?this._cachedMaxDetailsHeight:0,f=d+o+h,g=Math.floor((a-o-h)/this.getHeight()),v=Math.floor((s-o-h)/this.getHeight());if(e)return!(i.top+i.height>n.innerHeight-22||i.top<t.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||g<1&&v<1)&&(g<t.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&v>g&&this.options.length>g?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(i.top+i.height>n.innerHeight-22||i.top<t.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||0===this._dropDownPosition&&g<1||1===this._dropDownPosition&&v<1)return this.hideSelectDropDown(!0),!1;if(0===this._dropDownPosition){if(this._isVisible&&g+v<1)return this.hideSelectDropDown(!0),!1;f>a&&(d=g*this.getHeight())}else f>s&&(d=v*this.getHeight());return this.selectList.layout(d),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=d+o+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=d+o+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=c,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}return!1}},{key:"setWidthControlElement",value:function(e){var t=0;if(e){var n=0,i=0;this.options.forEach((function(e,t){var r=e.detail?e.detail.length:0,o=e.decoratorRight?e.decoratorRight.length:0,a=e.text.length+r+o;a>i&&(n=t,i=a)})),e.textContent=this.options[n].text+(this.options[n].decoratorRight?this.options[n].decoratorRight+" ":""),t=Dp(e)}return t}},{key:"createSelectList",value:function(e){var t=this;if(!this.selectList){this.selectDropDownListContainer=lm(e,bF(".select-box-dropdown-list-container")),this.listRenderer=new wF,this.selectList=this._register(new _F("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:function(e){var t=e.text;return e.detail&&(t+=". ".concat(e.detail)),e.decoratorRight&&(t+=". ".concat(e.decoratorRight)),e.description&&(t+=". ".concat(e.description)),t},getWidgetAriaLabel:function(){return Xa({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box")},getRole:function(){return ms?"":"option"},getWidgetRole:function(){return"listbox"}}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);var n=this._register(new LE(this.selectDropDownListContainer,"keydown")),i=Au.chain(n.event,(function(e){return e.filter((function(){return t.selectList.length>0})).map((function(e){return new rg(e)}))}));this._register(Au.chain(i,(function(e){return e.filter((function(e){return 3===e.keyCode}))}))(this.onEnter,this)),this._register(Au.chain(i,(function(e){return e.filter((function(e){return 2===e.keyCode}))}))(this.onEnter,this)),this._register(Au.chain(i,(function(e){return e.filter((function(e){return 9===e.keyCode}))}))(this.onEscape,this)),this._register(Au.chain(i,(function(e){return e.filter((function(e){return 16===e.keyCode}))}))(this.onUpArrow,this)),this._register(Au.chain(i,(function(e){return e.filter((function(e){return 18===e.keyCode}))}))(this.onDownArrow,this)),this._register(Au.chain(i,(function(e){return e.filter((function(e){return 12===e.keyCode}))}))(this.onPageDown,this)),this._register(Au.chain(i,(function(e){return e.filter((function(e){return 11===e.keyCode}))}))(this.onPageUp,this)),this._register(Au.chain(i,(function(e){return e.filter((function(e){return 14===e.keyCode}))}))(this.onHome,this)),this._register(Au.chain(i,(function(e){return e.filter((function(e){return 13===e.keyCode}))}))(this.onEnd,this)),this._register(Au.chain(i,(function(e){return e.filter((function(e){return e.keyCode>=21&&e.keyCode<=56||e.keyCode>=85&&e.keyCode<=113}))}))(this.onCharacter,this)),this._register(cp(this.selectList.getHTMLElement(),rm.POINTER_UP,(function(e){return t.onPointerUp(e)}))),this._register(this.selectList.onMouseOver((function(e){return void 0!==e.index&&t.selectList.setFocus([e.index])}))),this._register(this.selectList.onDidChangeFocus((function(e){return t.onListFocus(e)}))),this._register(cp(this.selectDropDownContainer,rm.FOCUS_OUT,(function(e){t._isVisible&&!Mp(e.relatedTarget,t.selectDropDownContainer)&&t.onListBlur()}))),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}}},{key:"onPointerUp",value:function(e){if(this.selectList.length){om(e);var t=e.target;if(t&&!t.classList.contains("slider")){var n=t.closest(".monaco-list-row");if(n){var i=Number(n.getAttribute("data-index")),r=n.classList.contains("option-disabled");i>=0&&i<this.options.length&&!r&&(this.selected=i,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}}}}},{key:"onListBlur",value:function(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}},{key:"renderDescriptionMarkdown",value:function(e,t){var n=function(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes.item(t);"img"===(i.tagName&&i.tagName.toLowerCase())?i.remove():n(i)}},i=wT({value:e,supportThemeIcons:!0},{actionHandler:t});return i.element.classList.add("select-box-description-markdown"),n(i.element),i.element}},{key:"onListFocus",value:function(e){this._isVisible&&this._hasDetails&&this.updateDetail(e.indexes[0])}},{key:"updateDetail",value:function(e){this.selectionDetailsPane.innerText="";var t,n,i=this.options[e],r=null!==(t=null==i?void 0:i.description)&&void 0!==t?t:"",o=null!==(n=null==i?void 0:i.descriptionIsMarkdown)&&void 0!==n&&n;if(r){if(o){var a=i.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(r,a))}else this.selectionDetailsPane.innerText=r;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}},{key:"onEscape",value:function(e){om(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}},{key:"onEnter",value:function(e){om(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}},{key:"onDownArrow",value:function(e){if(this.selected<this.options.length-1){om(e,!0);var t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}},{key:"onUpArrow",value:function(e){this.selected>0&&(om(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}},{key:"onPageUp",value:function(e){var t=this;om(e),this.selectList.focusPreviousPage(),setTimeout((function(){t.selected=t.selectList.getFocus()[0],t.options[t.selected].isDisabled&&t.selected<t.options.length-1&&(t.selected++,t.selectList.setFocus([t.selected])),t.selectList.reveal(t.selected),t.select(t.selected)}),1)}},{key:"onPageDown",value:function(e){var t=this;om(e),this.selectList.focusNextPage(),setTimeout((function(){t.selected=t.selectList.getFocus()[0],t.options[t.selected].isDisabled&&t.selected>0&&(t.selected--,t.selectList.setFocus([t.selected])),t.selectList.reveal(t.selected),t.select(t.selected)}),1)}},{key:"onHome",value:function(e){om(e),this.options.length<2||(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}},{key:"onEnd",value:function(e){om(e),this.options.length<2||(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}},{key:"onCharacter",value:function(e){for(var t=ac.toString(e.keyCode),n=-1,i=0;i<this.options.length-1;i++)if(n=(i+this.selected+1)%this.options.length,this.options[n].text.charAt(0).toUpperCase()===t&&!this.options[n].isDisabled){this.select(n),this.selectList.setFocus([n]),this.selectList.reveal(this.selectList.getFocus()[0]),om(e);break}}},{key:"dispose",value:function(){this.hideSelectDropDown(!1),g(v(t.prototype),"dispose",this).call(this)}}]),t}(Ru);CF.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,CF.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,CF.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;var SF,xF,LF=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t)).selected=0,o.selectBoxOptions=r||Object.create(null),o.options=[],o.selectElement=document.createElement("select"),o.selectElement.className="monaco-select-box","string"==typeof o.selectBoxOptions.ariaLabel&&o.selectElement.setAttribute("aria-label",o.selectBoxOptions.ariaLabel),"string"==typeof o.selectBoxOptions.ariaDescription&&o.selectElement.setAttribute("aria-description",o.selectBoxOptions.ariaDescription),o._onDidSelect=o._register(new Zu),o.styles=i,o.registerListeners(),o.setOptions(e,n),o}return p(t,e),h(t,[{key:"registerListeners",value:function(){var e=this;this._register(JI.addTarget(this.selectElement)),[XI.Tap].forEach((function(t){e._register(cp(e.selectElement,t,(function(t){e.selectElement.focus()})))})),this._register(hp(this.selectElement,"click",(function(e){om(e,!0)}))),this._register(hp(this.selectElement,"change",(function(t){e.selectElement.title=t.target.value,e._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value})}))),this._register(hp(this.selectElement,"keydown",(function(e){var t=!1;ms?18!==e.keyCode&&16!==e.keyCode&&10!==e.keyCode||(t=!0):(18===e.keyCode&&e.altKey||10===e.keyCode||3===e.keyCode)&&(t=!0),t&&e.stopPropagation()})))}},{key:"onDidSelect",get:function(){return this._onDidSelect.event}},{key:"setOptions",value:function(e,t){var n=this;this.options&&ea(this.options,e)||(this.options=e,this.selectElement.options.length=0,this.options.forEach((function(e,t){n.selectElement.add(n.createOption(e.text,t,e.isDisabled))}))),void 0!==t&&this.select(t)}},{key:"select",value:function(e){0===this.options.length?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&"string"==typeof this.options[this.selected].text?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}},{key:"focus",value:function(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}},{key:"blur",value:function(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}},{key:"setFocusable",value:function(e){this.selectElement.tabIndex=e?0:-1}},{key:"render",value:function(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}},{key:"applyStyles",value:function(){var e,t,n;this.selectElement&&(this.selectElement.style.backgroundColor=null!==(e=this.styles.selectBackground)&&void 0!==e?e:"",this.selectElement.style.color=null!==(t=this.styles.selectForeground)&&void 0!==t?t:"",this.selectElement.style.borderColor=null!==(n=this.styles.selectBorder)&&void 0!==n?n:"")}},{key:"createOption",value:function(e,t,n){var i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}}]),t}(Ru),DF=function(e){function t(e,n,i,r,o){var a;return u(this,t),a=l(this,t),ms&&!(null==o?void 0:o.useCustomDrawn)?a.selectBoxDelegate=new LF(e,n,r,o):a.selectBoxDelegate=new CF(e,n,i,r,o),a._register(a.selectBoxDelegate),a}return p(t,e),h(t,[{key:"onDidSelect",get:function(){return this.selectBoxDelegate.onDidSelect}},{key:"setOptions",value:function(e,t){this.selectBoxDelegate.setOptions(e,t)}},{key:"select",value:function(e){this.selectBoxDelegate.select(e)}},{key:"focus",value:function(){this.selectBoxDelegate.focus()}},{key:"blur",value:function(){this.selectBoxDelegate.blur()}},{key:"setFocusable",value:function(e){this.selectBoxDelegate.setFocusable(e)}},{key:"render",value:function(e){this.selectBoxDelegate.render(e)}}]),t}(eE),NF=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u(this,t),(i=l(this,t)).options=r,i._context=e||i,i._action=n,n instanceof $m&&i._register(n.onDidChange((function(e){i.element&&i.handleActionChangeEvent(e)}))),i}return p(t,e),h(t,[{key:"action",get:function(){return this._action}},{key:"handleActionChangeEvent",value:function(e){void 0!==e.enabled&&this.updateEnabled(),void 0!==e.checked&&this.updateChecked(),void 0!==e.class&&this.updateClass(),void 0!==e.label&&(this.updateLabel(),this.updateTooltip()),void 0!==e.tooltip&&this.updateTooltip()}},{key:"actionRunner",get:function(){return this._actionRunner||(this._actionRunner=this._register(new Jm)),this._actionRunner},set:function(e){this._actionRunner=e}},{key:"isEnabled",value:function(){return this._action.enabled}},{key:"setActionContext",value:function(e){this._context=e}},{key:"render",value:function(e){var t=this,n=this.element=e;this._register(JI.addTarget(e));var i=this.options&&this.options.draggable;i&&(e.draggable=!0,Vf&&this._register(cp(e,rm.DRAG_START,(function(e){var n;return null===(n=e.dataTransfer)||void 0===n?void 0:n.setData(kO.TEXT,t._action.label)})))),this._register(cp(n,XI.Tap,(function(e){return t.onClick(e,!0)}))),this._register(cp(n,rm.MOUSE_DOWN,(function(e){i||om(e,!0),t._action.enabled&&0===e.button&&n.classList.add("active")}))),ms&&this._register(cp(n,rm.CONTEXT_MENU,(function(e){0===e.button&&!0===e.ctrlKey&&t.onClick(e)}))),this._register(cp(n,rm.CLICK,(function(e){om(e,!0),t.options&&t.options.isMenu||t.onClick(e)}))),this._register(cp(n,rm.DBLCLICK,(function(e){om(e,!0)}))),[rm.MOUSE_UP,rm.MOUSE_OUT].forEach((function(e){t._register(cp(n,e,(function(e){om(e),n.classList.remove("active")})))}))}},{key:"onClick",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];om(e,!0);var i=Pa(this._context)?(null===(t=this.options)||void 0===t?void 0:t.useEventAsContext)?e:{preserveFocus:n}:this._context;this.actionRunner.run(this._action,i)}},{key:"focus",value:function(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}},{key:"blur",value:function(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}},{key:"setFocusable",value:function(e){this.element&&(this.element.tabIndex=e?0:-1)}},{key:"trapsArrowNavigation",get:function(){return!1}},{key:"updateEnabled",value:function(){}},{key:"updateLabel",value:function(){}},{key:"getClass",value:function(){return this.action.class}},{key:"getTooltip",value:function(){return this.action.tooltip}},{key:"updateTooltip",value:function(){var e;if(this.element){var t,n=null!==(t=this.getTooltip())&&void 0!==t?t:"";if(this.updateAriaLabel(),null===(e=this.options.hoverDelegate)||void 0===e?void 0:e.showNativeHover)this.element.title=n;else if(this.customHover||""===n)this.customHover&&this.customHover.update(n);else{var i,r=null!==(i=this.options.hoverDelegate)&&void 0!==i?i:xO("element");this.customHover=this._store.add(NO().setupManagedHover(r,this.element,n))}}}},{key:"updateAriaLabel",value:function(){if(this.element){var e,t=null!==(e=this.getTooltip())&&void 0!==e?e:"";this.element.setAttribute("aria-label",t)}}},{key:"updateClass",value:function(){}},{key:"updateChecked",value:function(){}},{key:"dispose",value:function(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,g(v(t.prototype),"dispose",this).call(this)}}]),t}(Ru),IF=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[e,n,i])).options=i,r.options.icon=void 0!==i.icon&&i.icon,r.options.label=void 0===i.label||i.label,r.cssClass="",r}return p(t,e),h(t,[{key:"render",value:function(e){g(v(t.prototype),"render",this).call(this,e),Oa(this.element);var n=document.createElement("a");if(n.classList.add("action-label"),n.setAttribute("role",this.getDefaultAriaRole()),this.label=n,this.element.appendChild(n),this.options.label&&this.options.keybinding){var i=document.createElement("span");i.classList.add("keybinding"),i.textContent=this.options.keybinding,this.element.appendChild(i)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}},{key:"getDefaultAriaRole",value:function(){return this._action.id===ey.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}},{key:"focus",value:function(){this.label&&(this.label.tabIndex=0,this.label.focus())}},{key:"blur",value:function(){this.label&&(this.label.tabIndex=-1)}},{key:"setFocusable",value:function(e){this.label&&(this.label.tabIndex=e?0:-1)}},{key:"updateLabel",value:function(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}},{key:"getTooltip",value:function(){var e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=Xa({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),null!=e?e:void 0}},{key:"updateClass",value:function(){var e;this.cssClass&&this.label&&(e=this.label.classList).remove.apply(e,x(this.cssClass.split(" ")));if(this.options.icon){var t;if(this.cssClass=this.getClass(),this.label)if(this.label.classList.add("codicon"),this.cssClass)(t=this.label.classList).add.apply(t,x(this.cssClass.split(" ")));this.updateEnabled()}else{var n;null===(n=this.label)||void 0===n||n.classList.remove("codicon")}}},{key:"updateEnabled",value:function(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),null===(e=this.element)||void 0===e||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),null===(t=this.element)||void 0===t||t.classList.add("disabled"))}},{key:"updateAriaLabel",value:function(){if(this.label){var e,t=null!==(e=this.getTooltip())&&void 0!==e?e:"";this.label.setAttribute("aria-label",t)}}},{key:"updateChecked",value:function(){this.label&&(void 0!==this.action.checked?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}]),t}(NF),EF=function(e){function t(e,n,i,r,o,a,s){var c;return u(this,t),(c=l(this,t,[e,n])).selectBox=new DF(i,r,o,a,s),c.selectBox.setFocusable(!1),c._register(c.selectBox),c.registerListeners(),c}return p(t,e),h(t,[{key:"select",value:function(e){this.selectBox.select(e)}},{key:"registerListeners",value:function(){var e=this;this._register(this.selectBox.onDidSelect((function(t){return e.runAction(t.selected,t.index)})))}},{key:"runAction",value:function(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}},{key:"getActionContext",value:function(e,t){return e}},{key:"setFocusable",value:function(e){this.selectBox.setFocusable(e)}},{key:"focus",value:function(){var e;null===(e=this.selectBox)||void 0===e||e.focus()}},{key:"blur",value:function(){var e;null===(e=this.selectBox)||void 0===e||e.blur()}},{key:"render",value:function(e){this.selectBox.render(e)}}]),t}(NF),MF=function(e){function t(e,n){var i;u(this,t),(i=l(this,t))._onDidChangeVisibility=i._register(new Zu),i.onDidChangeVisibility=i._onDidChangeVisibility.event,i._element=lm(e,gm(".monaco-dropdown")),i._label=lm(i._element,gm(".dropdown-label"));var r=n.labelRenderer;r||(r=function(e){return e.textContent=n.label||"",null});for(var o=0,a=[rm.CLICK,rm.MOUSE_DOWN,XI.Tap];o<a.length;o++){var s=a[o];i._register(cp(i.element,s,(function(e){return om(e,!0)})))}for(var c=0,d=[rm.MOUSE_DOWN,XI.Tap];c<d.length;c++){var h=d[c];i._register(cp(i._label,h,(function(e){nm(e)&&(e.detail>1||0!==e.button)||(i.visible?i.hide():i.show())})))}i._register(cp(i._label,rm.KEY_UP,(function(e){var t=new rg(e);(t.equals(3)||t.equals(10))&&(om(e,!0),i.visible?i.hide():i.show())})));var f=r(i._label);return f&&i._register(f),i._register(JI.addTarget(i._label)),i}return p(t,e),h(t,[{key:"element",get:function(){return this._element}},{key:"show",value:function(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}},{key:"hide",value:function(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}]),t}(Jm),TF=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[e,n]))._options=n,i._actions=[],i.actions=n.actions||[],i}return p(t,e),h(t,[{key:"menuOptions",get:function(){return this._menuOptions},set:function(e){this._menuOptions=e}},{key:"actions",get:function(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions},set:function(e){this._actions=e}},{key:"show",value:function(){var e=this;g(v(t.prototype),"show",this).call(this),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:function(){return e.element},getActions:function(){return e.actions},getActionsContext:function(){return e.menuOptions?e.menuOptions.context:null},getActionViewItem:function(t,n){return e.menuOptions&&e.menuOptions.actionViewItemProvider?e.menuOptions.actionViewItemProvider(t,n):void 0},getKeyBinding:function(t){return e.menuOptions&&e.menuOptions.getKeyBinding?e.menuOptions.getKeyBinding(t):void 0},getMenuClassName:function(){return e._options.menuClassName||""},onHide:function(){return e.onHide()},actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}},{key:"hide",value:function(){g(v(t.prototype),"hide",this).call(this)}},{key:"onHide",value:function(){this.hide(),this.element.classList.remove("active")}}]),t}(MF),RF=function(e){function t(e,n,i){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object.create(null);return u(this,t),(r=l(this,t,[null,e,o])).actionItem=null,r._onDidChangeVisibility=r._register(new Zu),r.onDidChangeVisibility=r._onDidChangeVisibility.event,r.menuActionsOrProvider=n,r.contextMenuProvider=i,r.options=o,r.options.actionRunner&&(r.actionRunner=r.options.actionRunner),r}return p(t,e),h(t,[{key:"render",value:function(e){var t=this;this.actionItem=e;var n=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:function(e){var n;t.element=lm(e,gm("a.action-label"));var i,r=[];("string"==typeof t.options.classNames?r=t.options.classNames.split(/\s+/g).filter((function(e){return!!e})):t.options.classNames&&(r=t.options.classNames),r.find((function(e){return"icon"===e}))||r.push("codicon"),(n=t.element.classList).add.apply(n,x(r)),t.element.setAttribute("role","button"),t.element.setAttribute("aria-haspopup","true"),t.element.setAttribute("aria-expanded","false"),t._action.label)&&t._register(NO().setupManagedHover(null!==(i=t.options.hoverDelegate)&&void 0!==i?i:xO("mouse"),t.element,t._action.label));return t.element.ariaLabel=t._action.label||"",null},menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new TF(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility((function(e){var n;null===(n=t.element)||void 0===n||n.setAttribute("aria-expanded","".concat(e)),t._onDidChangeVisibility.fire(e)}))),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){var r=this;this.dropdownMenu.menuOptions=b(_({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return r.options.anchorAlignmentProvider()}})}this.updateTooltip(),this.updateEnabled()}},{key:"getTooltip",value:function(){var e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),null!=e?e:void 0}},{key:"setActionContext",value:function(e){g(v(t.prototype),"setActionContext",this).call(this,e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}},{key:"show",value:function(){var e;null===(e=this.dropdownMenu)||void 0===e||e.show()}},{key:"updateEnabled",value:function(){var e,t,n=!this.action.enabled;null===(e=this.actionItem)||void 0===e||e.classList.toggle("disabled",n),null===(t=this.element)||void 0===t||t.classList.toggle("disabled",n)}}]),t}(NF);function AF(e){return e&&"object"===(void 0===e?"undefined":L(e))&&"string"==typeof e.original&&"string"==typeof e.value}!function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"}(SF||(SF={})),function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"}(xF||(xF={}));var PF=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.create(null);return u(this,t),(n=l(this,t)).database=e,n.options=i,n._onDidChangeStorage=n._register(new Qu),n.onDidChangeStorage=n._onDidChangeStorage.event,n.state=xF.None,n.cache=new Map,n.flushDelayer=n._register(new pg(t.DEFAULT_FLUSH_DELAY)),n.pendingDeletes=new Set,n.pendingInserts=new Map,n.whenFlushedCallbacks=[],n.registerListeners(),n}return p(t,e),h(t,[{key:"registerListeners",value:function(){var e=this;this._register(this.database.onDidChangeItemsExternal((function(t){return e.onDidChangeItemsExternal(t)})))}},{key:"onDidChangeItemsExternal",value:function(e){var t=this;this._onDidChangeStorage.pause();try{var n,i;null===(n=e.changed)||void 0===n||n.forEach((function(e,n){return t.acceptExternal(n,e)})),null===(i=e.deleted)||void 0===i||i.forEach((function(e){return t.acceptExternal(e,void 0)}))}finally{this._onDidChangeStorage.resume()}}},{key:"acceptExternal",value:function(e,t){if(this.state!==xF.Closed){var n=!1;if(Pa(t))n=this.cache.delete(e);else this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0);n&&this._onDidChangeStorage.fire({key:e,external:!0})}}},{key:"get",value:function(e,t){var n=this.cache.get(e);return Pa(n)?t:n}},{key:"getBoolean",value:function(e,t){var n=this.get(e);return Pa(n)?t:"true"===n}},{key:"getNumber",value:function(e,t){var n=this.get(e);return Pa(n)?t:parseInt(n,10)}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this;return s((function(){var r;return E(this,(function(o){return i.state===xF.Closed?[2]:Pa(t)?[2,i.delete(e,n)]:(r=Na(t)||Array.isArray(t)?function(e){return JSON.stringify(e,_T)}(t):String(t),i.cache.get(e)===r?[2]:(i.cache.set(e,r),i.pendingInserts.set(e,r),i.pendingDeletes.delete(e),i._onDidChangeStorage.fire({key:e,external:n}),[2,i.doFlush()]))}))}))()}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return s((function(){return E(this,(function(i){return n.state===xF.Closed?[2]:n.cache.delete(e)?(n.pendingDeletes.has(e)||n.pendingDeletes.add(e),n.pendingInserts.delete(e),n._onDidChangeStorage.fire({key:e,external:t}),[2,n.doFlush()]):[2]}))}))()}},{key:"hasPending",get:function(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}},{key:"flushPending",value:function(){var e=this;return s((function(){var t;return E(this,(function(n){return e.hasPending?(t={insert:e.pendingInserts,delete:e.pendingDeletes},e.pendingDeletes=new Set,e.pendingInserts=new Map,[2,e.database.updateItems(t).finally((function(){if(!e.hasPending)for(;e.whenFlushedCallbacks.length;){var t;null===(t=e.whenFlushedCallbacks.pop())||void 0===t||t()}}))]):[2]}))}))()}},{key:"doFlush",value:function(e){var t=this;return s((function(){return E(this,(function(n){return t.options.hint===SF.STORAGE_IN_MEMORY?[2,t.flushPending()]:[2,t.flushDelayer.trigger((function(){return t.flushPending()}),e)]}))}))()}}]),t}(Ru);PF.DEFAULT_FLUSH_DELAY=100;var OF,FF=function(){function e(){u(this,e),this.onDidChangeItemsExternal=Au.None,this.items=new Map}return h(e,[{key:"updateItems",value:function(e){var t=this;return s((function(){var n,i;return E(this,(function(r){return null===(n=e.insert)||void 0===n||n.forEach((function(e,n){return t.items.set(n,e)})),null===(i=e.delete)||void 0===i||i.forEach((function(e){return t.items.delete(e)})),[2]}))}))()}}]),e}(),WF="__$__targetStorageMarker",BF=Zm("storageService");!function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"}(OF||(OF={}));var HF=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{flushInterval:t.DEFAULT_FLUSH_INTERVAL};return u(this,t),(e=l(this,t)).options=n,e._onDidChangeValue=e._register(new Qu),e._onDidChangeTarget=e._register(new Qu),e._onWillSaveState=e._register(new Zu),e.onWillSaveState=e._onWillSaveState.event,e._workspaceKeyTargets=void 0,e._profileKeyTargets=void 0,e._applicationKeyTargets=void 0,e}return p(t,e),h(t,[{key:"onDidChangeValue",value:function(e,t,n){return Au.filter(this._onDidChangeValue.event,(function(n){return n.scope===e&&(void 0===t||n.key===t)}),n)}},{key:"emitDidChangeValue",value:function(e,t){var n=t.key,i=t.external;if(n===WF){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:n,target:this.getKeyTargets(e)[n],external:i})}},{key:"get",value:function(e,t,n){var i;return null===(i=this.getStorage(t))||void 0===i?void 0:i.get(e,n)}},{key:"getBoolean",value:function(e,t,n){var i;return null===(i=this.getStorage(t))||void 0===i?void 0:i.getBoolean(e,n)}},{key:"getNumber",value:function(e,t,n){var i;return null===(i=this.getStorage(t))||void 0===i?void 0:i.getNumber(e,n)}},{key:"store",value:function(e,t,n,i){var r=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Pa(t)?this.remove(e,n,o):this.withPausedEmitters((function(){var a;r.updateKeyTarget(e,n,i),null===(a=r.getStorage(n))||void 0===a||a.set(e,t,o)}))}},{key:"remove",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.withPausedEmitters((function(){var r;n.updateKeyTarget(e,t,void 0),null===(r=n.getStorage(t))||void 0===r||r.delete(e,i)}))}},{key:"withPausedEmitters",value:function(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}},{key:"updateKeyTarget",value:function(e,t,n){var i,r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.getKeyTargets(t);"number"==typeof n?a[e]!==n&&(a[e]=n,null===(i=this.getStorage(t))||void 0===i||i.set(WF,JSON.stringify(a),o)):"number"==typeof a[e]&&(delete a[e],null===(r=this.getStorage(t))||void 0===r||r.set(WF,JSON.stringify(a),o))}},{key:"workspaceKeyTargets",get:function(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}},{key:"profileKeyTargets",get:function(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}},{key:"applicationKeyTargets",get:function(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}},{key:"getKeyTargets",value:function(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}},{key:"loadKeyTargets",value:function(e){var t=this.getStorage(e);return t?function(e){var t=e.get(WF);if(t)try{return JSON.parse(t)}catch(e){}return Object.create(null)}(t):Object.create(null)}}]),t}(Ru);HF.DEFAULT_FLUSH_INTERVAL=6e4;var VF=function(e){function t(){var e;return u(this,t),(e=l(this,t)).applicationStorage=e._register(new PF(new FF,{hint:SF.STORAGE_IN_MEMORY})),e.profileStorage=e._register(new PF(new FF,{hint:SF.STORAGE_IN_MEMORY})),e.workspaceStorage=e._register(new PF(new FF,{hint:SF.STORAGE_IN_MEMORY})),e._register(e.workspaceStorage.onDidChangeStorage((function(t){return e.emitDidChangeValue(1,t)}))),e._register(e.profileStorage.onDidChangeStorage((function(t){return e.emitDidChangeValue(0,t)}))),e._register(e.applicationStorage.onDidChangeStorage((function(t){return e.emitDidChangeValue(-1,t)}))),e}return p(t,e),h(t,[{key:"getStorage",value:function(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}]),t}(HF);var zF={keybindingLabelBackground:NL(QN),keybindingLabelForeground:NL(XN),keybindingLabelBorder:NL($N),keybindingLabelBottomBorder:NL(JN),keybindingLabelShadow:NL(BD)},UF={buttonForeground:NL(TN),buttonSeparator:NL(RN),buttonBackground:NL(AN),buttonHoverBackground:NL(PN),buttonSecondaryForeground:NL(FN),buttonSecondaryBackground:NL(WN),buttonSecondaryHoverBackground:NL(BN),buttonBorder:NL(ON)},jF={progressBarBackground:NL(eD)},KF={inputActiveOptionBorder:NL(vN),inputActiveOptionForeground:NL(yN),inputActiveOptionBackground:NL(mN)};NL(HN),NL(VN),NL(zN),NL(UN),NL(jN),NL(KN),NL(qN),NL(GN),NL(YN),NL(ZN),NL(iD),NL(rD),NL(BD),NL(KL),NL(tN),NL(nN),NL(iN),NL(GL);var qF={inputBackground:NL(hN),inputForeground:NL(fN),inputBorder:NL(gN),inputValidationInfoBorder:NL(kN),inputValidationInfoBackground:NL(_N),inputValidationInfoForeground:NL(bN),inputValidationWarningBorder:NL(SN),inputValidationWarningBackground:NL(wN),inputValidationWarningForeground:NL(CN),inputValidationErrorBorder:NL(DN),inputValidationErrorBackground:NL(xN),inputValidationErrorForeground:NL(LN)},GF={listFilterWidgetBackground:NL(yI),listFilterWidgetOutline:NL(_I),listFilterWidgetNoMatchesOutline:NL(bI),listFilterWidgetShadow:NL(kI),inputBoxStyles:qF,toggleStyles:KF},ZF={badgeBackground:NL(ZL),badgeForeground:NL(YL),badgeBorder:NL(KL)};NL(UD),NL(zD),NL(jD),NL(jD),NL(KD);var YF={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:NL(eI),listFocusForeground:NL(tI),listFocusOutline:NL(nI),listActiveSelectionBackground:NL(rI),listActiveSelectionForeground:NL(oI),listActiveSelectionIconForeground:NL(aI),listFocusAndSelectionOutline:NL(iI),listFocusAndSelectionBackground:NL(rI),listFocusAndSelectionForeground:NL(oI),listInactiveSelectionBackground:NL(sI),listInactiveSelectionIconForeground:NL(uI),listInactiveSelectionForeground:NL(lI),listInactiveFocusBackground:NL(cI),listInactiveFocusOutline:NL(dI),listHoverBackground:NL(hI),listHoverForeground:NL(fI),listDropOverBackground:NL(gI),listDropBetweenBackground:NL(vI),listSelectionOutline:NL(qL),listHoverOutline:NL(qL),treeIndentGuidesStroke:NL(wI),treeInactiveIndentGuidesStroke:NL(CI),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:NL(QL),tableColumnsBorder:NL(SI),tableOddRowsBackgroundColor:NL(xI)};function QF(e){return function(e,t){var n=_({},t);for(var i in e){var r=e[i];n[i]=void 0!==r?NL(r):void 0}return n}(e,YF)}var XF={selectBackground:NL(NN),selectListBackground:NL(IN),selectForeground:NL(EN),decoratorRightForeground:NL(OI),selectBorder:NL(MN),focusBorder:NL(jL),listFocusBackground:NL(VI),listInactiveSelectionIconForeground:NL(HI),listFocusForeground:NL(BI),listFocusOutline:function(e,t){return"var(".concat(DL(e),", ").concat(t,")")}(qL,XC.transparent.toString()),listHoverBackground:NL(hI),listHoverForeground:NL(fI),listHoverOutline:NL(qL),selectListBorder:NL(oD),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},$F={shadowColor:NL(BD),borderColor:NL(LI),foregroundColor:NL(DI),backgroundColor:NL(NI),selectionForegroundColor:NL(II),selectionBackgroundColor:NL(EI),selectionBorderColor:NL(MI),separatorColor:NL(TI),scrollbarShadow:NL(QL),scrollbarSliderBackground:NL(XL),scrollbarSliderHoverBackground:NL($L),scrollbarSliderActiveBackground:NL(JL)},JF=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},eW=function(e,t){return function(n,i){t(n,i,e)}};function tW(e,t,n,i,r,o){var a,s,l,u,c;if(Array.isArray(e))c=e,a=t,s=n,l=i,u=r;else{var d=t;c=e.getActions(d),a=n,s=i,l=r,u=o}var h="string"==typeof s?function(e){return e===s}:s;nW(c,a,!1,h,l,u)}function nW(e,t,n){var i,r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return"navigation"===e},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!1},s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];Array.isArray(t)?(i=t,r=t):(i=t.primary,r=t.secondary);var l=new Set,u=!0,c=!1,d=void 0;try{for(var h,f=e[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=C(h.value,2),v=g[0],p=g[1],m=void 0;o(v)?(m=i).length>0&&s&&m.push(new ey):(m=r).length>0&&m.push(new ey);var y=!0,_=!1,b=void 0;try{for(var k,w=p[Symbol.iterator]();!(y=(k=w.next()).done);y=!0){var S=k.value;n&&(S=S instanceof p_&&S.alt?S.alt:S);var L=m.push(S);S instanceof iy&&l.add({group:v,action:S,index:L-1})}}catch(e){_=!0,b=e}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}var D=!0,N=!1,I=void 0;try{for(var E,M=l[Symbol.iterator]();!(D=(E=M.next()).done);D=!0){var T,R=E.value,A=R.group,P=R.action,O=R.index,F=o(A)?i:r,W=P.actions;if(a(P,A,F.length))(T=F).splice.apply(T,[O,1].concat(x(W)))}}catch(e){N=!0,I=e}finally{try{D||null==M.return||M.return()}finally{if(N)throw I}}}var iW=function(e){function t(e,n,i,r,o,a,s,c){var d;return u(this,t),(d=l(this,t,[void 0,e,{icon:!(!e.class&&!e.item.icon),label:!e.class&&!e.item.icon,draggable:null==n?void 0:n.draggable,keybinding:null==n?void 0:n.keybinding,hoverDelegate:null==n?void 0:n.hoverDelegate}]))._options=n,d._keybindingService=i,d._notificationService=r,d._contextKeyService=o,d._themeService=a,d._contextMenuService=s,d._accessibilityService=c,d._wantsAltCommand=!1,d._itemClassDispose=d._register(new Pu),d._altKey=Cm.getInstance(),d}return p(t,e),h(t,[{key:"_menuItemAction",get:function(){return this._action}},{key:"_commandAction",get:function(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}},{key:"onClick",value:function(e){var t=this;return s((function(){var n;return E(this,(function(i){switch(i.label){case 0:e.preventDefault(),e.stopPropagation(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.actionRunner.run(t._commandAction,t._context)];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),t._notificationService.error(n),[3,4];case 4:return[2]}}))}))()}},{key:"render",value:function(e){var n=this;if(g(v(t.prototype),"render",this).call(this,e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){var i=!1,r=function(){var e,t=!!(null===(e=n._menuItemAction.alt)||void 0===e?void 0:e.enabled)&&(!n._accessibilityService.isMotionReduced()||i)&&(n._altKey.keyStatus.altKey||n._altKey.keyStatus.shiftKey&&i);t!==n._wantsAltCommand&&(n._wantsAltCommand=t,n.updateLabel(),n.updateTooltip(),n.updateClass())};this._register(this._altKey.event(r)),this._register(cp(e,"mouseleave",(function(e){i=!1,r()}))),this._register(cp(e,"mouseenter",(function(e){i=!0,r()}))),r()}}},{key:"updateLabel",value:function(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}},{key:"getTooltip",value:function(){var e,t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),n=t&&t.getLabel(),i=this._commandAction.tooltip||this._commandAction.label,r=n?Xa("titleAndKb","{0} ({1})",i,n):i;if(!this._wantsAltCommand&&(null===(e=this._menuItemAction.alt)||void 0===e?void 0:e.enabled)){var o=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),s=a&&a.getLabel(),l=s?Xa("titleAndKb","{0} ({1})",o,s):o;r=Xa("titleAndKbAndAlt","{0}\n[{1}] {2}",r,NA.modifierLabels[Ns].altKey,l)}return r}},{key:"updateClass",value:function(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}},{key:"_updateItemClass",value:function(e){var t=this;this._itemClassDispose.value=void 0;var n=this.element,i=this.label;if(n&&i){var r=this._commandAction.checked&&function(e){return!!e&&void 0!==e.condition}(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(r)if(ny.isThemeIcon(r)){var o,a=ny.asClassNameArray(r);(o=i.classList).add.apply(o,x(a)),this._itemClassDispose.value=Mu((function(){var e;(e=i.classList).remove.apply(e,x(a))}))}else i.style.backgroundImage=AS(this._themeService.getColorTheme().type)?_m(r.dark):_m(r.light),i.classList.add("icon"),this._itemClassDispose.value=Eu(Mu((function(){i.style.backgroundImage="",i.classList.remove("icon")})),this._themeService.onDidColorThemeChange((function(){t.updateClass()})))}}}]),t}(IF),rW=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"render",value:function(e){var n,i;this.options.label=!0,this.options.icon=!1,g(v(t.prototype),"render",this).call(this,e),e.classList.add("text-only"),e.classList.toggle("use-comma",null!==(i=null===(n=this._options)||void 0===n?void 0:n.useComma)&&void 0!==i&&i)}},{key:"updateLabel",value:function(){var e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return g(v(t.prototype),"updateLabel",this).call(this);if(this.label){var n,i=t._symbolPrintEnter(e);(null===(n=this._options)||void 0===n?void 0:n.conversational)?this.label.textContent=Xa({key:"content2",comment:['A label with keybindg like "ESC to dismiss"']},"{1} to {0}",this._action.label,i):this.label.textContent=Xa({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,i)}}}],[{key:"_symbolPrintEnter",value:function(e){var t;return null===(t=e.getLabel())||void 0===t?void 0:t.replace(/\benter\b/gi,"⏎").replace(/\bEscape\b/gi,"Esc")}}]),t}(iW=JF([eW(2,ZI),eW(3,rx),eW(4,Ky),eW(5,PS),eW(6,GI),eW(7,mR)],iW)),oW=function(e){function t(e,n,i,r,o){var a,s,c,d;u(this,t);var h=b(_({},n),{menuAsChild:null!==(s=null==n?void 0:n.menuAsChild)&&void 0!==s&&s,classNames:null!==(c=null==n?void 0:n.classNames)&&void 0!==c?c:ny.isThemeIcon(e.item.icon)?ny.asClassName(e.item.icon):void 0,keybindingProvider:null!==(d=null==n?void 0:n.keybindingProvider)&&void 0!==d?d:function(e){return i.lookupKeybinding(e.id)}});return(a=l(this,t,[e,{getActions:function(){return e.actions}},r,h]))._keybindingService=i,a._contextMenuService=r,a._themeService=o,a}return p(t,e),h(t,[{key:"render",value:function(e){var n=this;g(v(t.prototype),"render",this).call(this,e),Oa(this.element),e.classList.add("menu-entry");var i=this._action.item.icon;if(i&&!ny.isThemeIcon(i)){this.element.classList.add("icon");var r=function(){n.element&&(n.element.style.backgroundImage=AS(n._themeService.getColorTheme().type)?_m(i.dark):_m(i.light))};r(),this._register(this._themeService.onDidColorThemeChange((function(){r()})))}}}]),t}(RF);oW=JF([eW(2,ZI),eW(3,GI),eW(4,PS)],oW);var aW=function(e){function t(e,n,i,r,o,a,s,c){var d,h;u(this,t),(d=l(this,t,[null,e]))._keybindingService=i,d._notificationService=r,d._contextMenuService=o,d._menuService=a,d._instaService=s,d._storageService=c,d._container=null,d._options=n,d._storageKey="".concat(e.item.submenu.id,"_lastActionId");var f,g,v,p=(null==n?void 0:n.persistLastActionId)?c.get(d._storageKey,1):void 0;p&&(h=e.actions.find((function(e){return p===e.id}))),h||(h=e.actions[0]),d._defaultAction=d._instaService.createInstance(iW,h,{keybinding:d._getDefaultActionKeybindingLabel(h)});var m=b(_({keybindingProvider:function(e){return d._keybindingService.lookupKeybinding(e.id)}},n),{menuAsChild:null===(f=null==n?void 0:n.menuAsChild)||void 0===f||f,classNames:null!==(g=null==n?void 0:n.classNames)&&void 0!==g?g:["codicon","codicon-chevron-down"],actionRunner:null!==(v=null==n?void 0:n.actionRunner)&&void 0!==v?v:new Jm});return d._dropdown=new RF(e,e.actions,d._contextMenuService,m),d._register(d._dropdown.actionRunner.onDidRun((function(e){e.action instanceof p_&&d.update(e.action)}))),d}return p(t,e),h(t,[{key:"update",value:function(e){var t;(null===(t=this._options)||void 0===t?void 0:t.persistLastActionId)&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(iW,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new(function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"runAction",value:function(e,t){return s((function(){return E(this,(function(t){switch(t.label){case 0:return[4,e.run(void 0)];case 1:return t.sent(),[2]}}))}))()}}]),t}(Jm)),this._container&&this._defaultAction.render(um(this._container,gm(".action-container")))}},{key:"_getDefaultActionKeybindingLabel",value:function(e){var t,n;if(null===(t=this._options)||void 0===t?void 0:t.renderKeybindingWithDefaultActionLabel){var i=this._keybindingService.lookupKeybinding(e.id);i&&(n="(".concat(i.getLabel(),")"))}return n}},{key:"setActionContext",value:function(e){g(v(t.prototype),"setActionContext",this).call(this,e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}},{key:"render",value:function(e){var n=this;this._container=e,g(v(t.prototype),"render",this).call(this,this._container),this._container.classList.add("monaco-dropdown-with-default");var i=gm(".action-container");this._defaultAction.render(lm(this._container,i)),this._register(cp(i,rm.KEY_DOWN,(function(e){var t=new rg(e);t.equals(17)&&(n._defaultAction.element.tabIndex=-1,n._dropdown.focus(),t.stopPropagation())})));var r=gm(".dropdown-action-container");this._dropdown.render(lm(this._container,r)),this._register(cp(r,rm.KEY_DOWN,(function(e){var t,i=new rg(e);i.equals(15)&&(n._defaultAction.element.tabIndex=0,n._dropdown.setFocusable(!1),null===(t=n._defaultAction.element)||void 0===t||t.focus(),i.stopPropagation())})))}},{key:"focus",value:function(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}},{key:"blur",value:function(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}},{key:"setFocusable",value:function(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}},{key:"dispose",value:function(){this._defaultAction.dispose(),this._dropdown.dispose(),g(v(t.prototype),"dispose",this).call(this)}}]),t}(NF);aW=JF([eW(2,ZI),eW(3,rx),eW(4,GI),eW(5,h_),eW(6,Gm),eW(7,BF)],aW);var sW=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[null,e,e.actions.map((function(e){return{text:e.id===ey.ID?"─────────":e.label,isDisabled:!e.enabled}})),0,n,XF,{ariaLabel:e.tooltip,optionsAsChildren:!0}])).select(Math.max(0,e.actions.findIndex((function(e){return e.checked})))),i}return p(t,e),h(t,[{key:"render",value:function(e){g(v(t.prototype),"render",this).call(this,e),e.style.borderColor=NL(MN)}},{key:"runAction",value:function(e,t){var n=this.action.actions[t];n&&this.actionRunner.run(n)}}]),t}(EF);function lW(e,t,n){return t instanceof p_?e.createInstance(iW,t,n):t instanceof v_?t.item.isSelection?e.createInstance(sW,t):t.item.rememberDefaultAction?e.createInstance(aW,t,b(_({},n),{persistLastActionId:!0})):e.createInstance(oW,t,n):void 0}sW=JF([eW(1,qI)],sW);var uW,cW,dW=function(e){function t(e){var n,i,r,o,a,s,c,d,h,f,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(u(this,t),(n=l(this,t))._actionRunnerDisposables=n._register(new Tu),n.viewItemDisposables=n._register(new Wu),n.triggerKeyDown=!1,n.focusable=!0,n._onDidBlur=n._register(new Zu),n.onDidBlur=n._onDidBlur.event,n._onDidCancel=n._register(new Zu({onWillAddFirstListener:function(){return n.cancelHasListener=!0}})),n.onDidCancel=n._onDidCancel.event,n.cancelHasListener=!1,n._onDidRun=n._register(new Zu),n.onDidRun=n._onDidRun.event,n._onWillRun=n._register(new Zu),n.onWillRun=n._onWillRun.event,n.options=g,n._context=null!==(o=g.context)&&void 0!==o?o:null,n._orientation=null!==(a=n.options.orientation)&&void 0!==a?a:0,n._triggerKeys={keyDown:null!==(s=null===(i=n.options.triggerKeys)||void 0===i?void 0:i.keyDown)&&void 0!==s&&s,keys:null!==(c=null===(r=n.options.triggerKeys)||void 0===r?void 0:r.keys)&&void 0!==c?c:[3,10]},n._hoverDelegate=null!==(d=g.hoverDelegate)&&void 0!==d?d:n._register(LO()),n.options.actionRunner?n._actionRunner=n.options.actionRunner:(n._actionRunner=new Jm,n._actionRunnerDisposables.add(n._actionRunner)),n._actionRunnerDisposables.add(n._actionRunner.onDidRun((function(e){return n._onDidRun.fire(e)}))),n._actionRunnerDisposables.add(n._actionRunner.onWillRun((function(e){return n._onWillRun.fire(e)}))),n.viewItems=[],n.focusedItem=void 0,n.domNode=document.createElement("div"),n.domNode.className="monaco-action-bar",n._orientation){case 0:h=[15],f=[17];break;case 1:h=[16],f=[18],n.domNode.className+=" vertical"}return n._register(cp(n.domNode,rm.KEY_DOWN,(function(e){var t=new rg(e),i=!0,r="number"==typeof n.focusedItem?n.viewItems[n.focusedItem]:void 0;h&&(t.equals(h[0])||t.equals(h[1]))?i=n.focusPrevious():f&&(t.equals(f[0])||t.equals(f[1]))?i=n.focusNext():t.equals(9)&&n.cancelHasListener?n._onDidCancel.fire():t.equals(14)?i=n.focusFirst():t.equals(13)?i=n.focusLast():t.equals(2)&&r instanceof NF&&r.trapsArrowNavigation?i=n.focusNext(void 0,!0):n.isTriggerKeyEvent(t)?n._triggerKeys.keyDown?n.doTrigger(t):n.triggerKeyDown=!0:i=!1,i&&(t.preventDefault(),t.stopPropagation())}))),n._register(cp(n.domNode,rm.KEY_UP,(function(e){var t=new rg(e);n.isTriggerKeyEvent(t)?(!n._triggerKeys.keyDown&&n.triggerKeyDown&&(n.triggerKeyDown=!1,n.doTrigger(t)),t.preventDefault(),t.stopPropagation()):(t.equals(2)||t.equals(1026)||t.equals(16)||t.equals(18)||t.equals(15)||t.equals(17))&&n.updateFocusedItem()}))),n.focusTracker=n._register(sm(n.domNode)),n._register(n.focusTracker.onDidBlur((function(){Op()!==n.domNode&&Mp(Op(),n.domNode)||(n._onDidBlur.fire(),n.previouslyFocusedItem=n.focusedItem,n.focusedItem=void 0,n.triggerKeyDown=!1)}))),n._register(n.focusTracker.onDidFocus((function(){return n.updateFocusedItem()}))),n.actionsList=document.createElement("ul"),n.actionsList.className="actions-container",n.options.highlightToggledItems&&n.actionsList.classList.add("highlight-toggled"),n.actionsList.setAttribute("role",n.options.ariaRole||"toolbar"),n.options.ariaLabel&&n.actionsList.setAttribute("aria-label",n.options.ariaLabel),n.domNode.appendChild(n.actionsList),e.appendChild(n.domNode),n}return p(t,e),h(t,[{key:"refreshRole",value:function(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}},{key:"setFocusable",value:function(e){if(this.focusable=e,this.focusable){var t=this.viewItems.find((function(e){return e instanceof NF&&e.isEnabled()}));t instanceof NF&&t.setFocusable(!0)}else this.viewItems.forEach((function(e){e instanceof NF&&e.setFocusable(!1)}))}},{key:"isTriggerKeyEvent",value:function(e){var t=!1;return this._triggerKeys.keys.forEach((function(n){t=t||e.equals(n)})),t}},{key:"updateFocusedItem",value:function(){for(var e=0;e<this.actionsList.children.length;e++){var t=this.actionsList.children[e];if(Mp(Op(),t)){var n,i;this.focusedItem=e,null===(i=this.viewItems[this.focusedItem])||void 0===i||null===(n=i.showHover)||void 0===n||n.call(i);break}}}},{key:"context",get:function(){return this._context},set:function(e){this._context=e,this.viewItems.forEach((function(t){return t.setActionContext(e)}))}},{key:"actionRunner",get:function(){return this._actionRunner},set:function(e){var t=this;this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun((function(e){return t._onDidRun.fire(e)}))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun((function(e){return t._onWillRun.fire(e)}))),this.viewItems.forEach((function(t){return t.actionRunner=e}))}},{key:"getContainer",value:function(){return this.domNode}},{key:"getAction",value:function(e){var t;if("number"==typeof e)return null===(t=this.viewItems[e])||void 0===t?void 0:t.action;if(Jp(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(var n=0;n<this.actionsList.childNodes.length;n++)if(this.actionsList.childNodes[n]===e)return this.viewItems[n].action}}},{key:"push",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Array.isArray(e)?e:[e],r=Ea(n.index)?n.index:null;i.forEach((function(e){var i,o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation");var a=b(_({hoverDelegate:t._hoverDelegate},n),{isTabList:"tablist"===t.options.ariaRole});t.options.actionViewItemProvider&&(i=t.options.actionViewItemProvider(e,a)),i||(i=new IF(t.context,e,a)),t.options.allowContextMenu||t.viewItemDisposables.set(i,cp(o,rm.CONTEXT_MENU,(function(e){om(e,!0)}))),i.actionRunner=t._actionRunner,i.setActionContext(t.context),i.render(o),t.focusable&&i instanceof NF&&0===t.viewItems.length&&i.setFocusable(!0),null===r||r<0||r>=t.actionsList.children.length?(t.actionsList.appendChild(o),t.viewItems.push(i)):(t.actionsList.insertBefore(o,t.actionsList.children[r]),t.viewItems.splice(r,0,i),r++)})),"number"==typeof this.focusedItem&&this.focus(this.focusedItem),this.refreshRole()}},{key:"clear",value:function(){this.isEmpty()||(this.viewItems=Iu(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),lp(this.actionsList),this.refreshRole())}},{key:"length",value:function(){return this.viewItems.length}},{key:"isEmpty",value:function(){return 0===this.viewItems.length}},{key:"focus",value:function(e){var t=!1,n=void 0;if(void 0===e?t=!0:"number"==typeof e?n=e:"boolean"==typeof e&&(t=e),t&&void 0===this.focusedItem){var i=this.viewItems.findIndex((function(e){return e.isEnabled()}));this.focusedItem=-1===i?void 0:i,this.updateFocus(void 0,void 0,!0)}else void 0!==n&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}},{key:"focusFirst",value:function(){return this.focusedItem=this.length()-1,this.focusNext(!0)}},{key:"focusLast",value:function(){return this.focusedItem=0,this.focusPrevious(!0)}},{key:"focusNext",value:function(e,t){if(void 0===this.focusedItem)this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;var n,i=this.focusedItem;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=i,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===ey.ID));return this.updateFocus(void 0,void 0,t),!0}},{key:"focusPrevious",value:function(e){if(void 0===this.focusedItem)this.focusedItem=0;else if(this.viewItems.length<=1)return!1;var t,n=this.focusedItem;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=n,!1;this.focusedItem=this.viewItems.length-1}t=this.viewItems[this.focusedItem]}while(this.focusedItem!==n&&(this.options.focusOnlyEnabledItems&&!t.isEnabled()||t.action.id===ey.ID));return this.updateFocus(!0),!0}},{key:"updateFocus",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(void 0===this.focusedItem&&this.actionsList.focus({preventScroll:t}),void 0!==this.previouslyFocusedItem&&this.previouslyFocusedItem!==this.focusedItem)&&(null===(n=this.viewItems[this.previouslyFocusedItem])||void 0===n||n.blur());var r=void 0!==this.focusedItem?this.viewItems[this.focusedItem]:void 0;if(r){var o,a=!0;if(Wa(r.focus)||(a=!1),this.options.focusOnlyEnabledItems&&Wa(r.isEnabled)&&!r.isEnabled()&&(a=!1),r.action.id===ey.ID&&(a=!1),a?(i||this.previouslyFocusedItem!==this.focusedItem)&&(r.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),a)null===(o=r.showHover)||void 0===o||o.call(r)}}},{key:"doTrigger",value:function(e){if(void 0!==this.focusedItem){var t=this.viewItems[this.focusedItem];if(t instanceof NF){var n=null===t._context||void 0===t._context?e:t._context;this.run(t._action,n)}}}},{key:"run",value:function(e,t){var n=this;return s((function(){return E(this,(function(i){switch(i.label){case 0:return[4,n._actionRunner.run(e,t)];case 1:return i.sent(),[2]}}))}))()}},{key:"dispose",value:function(){this._context=void 0,this.viewItems=Iu(this.viewItems),this.getContainer().remove(),g(v(t.prototype),"dispose",this).call(this)}}]),t}(Ru),hW=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,fW=/(&amp;)?(&amp;)([^\s&])/g;!function(e){e[e.Right=0]="Right",e[e.Left=1]="Left"}(uW||(uW={})),function(e){e[e.Above=0]="Above",e[e.Below=1]="Below"}(cW||(cW={}));var gW=function(e){function t(e,n,r,o){var a;u(this,t),e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");var s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),a=l(this,t,[s,{orientation:1,actionViewItemProvider:function(e){return i(a).doGetActionViewItem(e,r,c)},context:r.context,actionRunner:r.actionRunner,ariaLabel:r.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3].concat(x(ms||ys?[10]:[])),keyDown:!0}}]),a.menuStyles=o,a.menuElement=s,a.actionsList.tabIndex=0,a.initializeOrUpdateStyleSheet(e,o),a._register(JI.addTarget(s)),a._register(cp(s,rm.KEY_DOWN,(function(e){new rg(e).equals(2)&&e.preventDefault()}))),r.enableMnemonics&&a._register(cp(s,rm.KEY_DOWN,(function(e){var t=e.key.toLocaleLowerCase();if(a.mnemonics.has(t)){om(e,!0);var n=a.mnemonics.get(t);if(1===n.length&&(n[0]instanceof pW&&n[0].container&&a.focusItemByElement(n[0].container),n[0].onClick(e)),n.length>1){var i=n.shift();i&&i.container&&(a.focusItemByElement(i.container),n.push(i)),a.mnemonics.set(t,n)}}}))),ys&&a._register(cp(s,rm.KEY_DOWN,(function(e){var t=new rg(e);t.equals(14)||t.equals(11)?(a.focusedItem=a.viewItems.length-1,a.focusNext(),om(e,!0)):(t.equals(13)||t.equals(12))&&(a.focusedItem=0,a.focusPrevious(),om(e,!0))}))),a._register(cp(a.domNode,rm.MOUSE_OUT,(function(e){Mp(e.relatedTarget,a.domNode)||(a.focusedItem=void 0,a.updateFocus(),e.stopPropagation())}))),a._register(cp(a.actionsList,rm.MOUSE_OVER,(function(e){var t=e.target;if(t&&Mp(t,a.actionsList)&&t!==a.actionsList){for(;t.parentElement!==a.actionsList&&null!==t.parentElement;)t=t.parentElement;if(t.classList.contains("action-item")){var n=a.focusedItem;a.setFocusedItem(t),n!==a.focusedItem&&a.updateFocus()}}}))),a._register(JI.addTarget(a.actionsList)),a._register(cp(a.actionsList,XI.Tap,(function(e){var t=e.initialTarget;if(t&&Mp(t,a.actionsList)&&t!==a.actionsList){for(;t.parentElement!==a.actionsList&&null!==t.parentElement;)t=t.parentElement;if(t.classList.contains("action-item")){var n=a.focusedItem;a.setFocusedItem(t),n!==a.focusedItem&&a.updateFocus()}}})));var c={parent:a};a.mnemonics=new Map,a.scrollableElement=a._register(new yE(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));var d=a.scrollableElement.getDomNode();d.style.position="",a.styleScrollElement(d,o),a._register(cp(s,XI.Change,(function(e){om(e,!0);var t=a.scrollableElement.getScrollPosition().scrollTop;a.scrollableElement.setScrollPosition({scrollTop:t-e.translationY})}))),a._register(cp(d,rm.MOUSE_UP,(function(e){e.preventDefault()})));var h=ep(e);return s.style.maxHeight="".concat(Math.max(10,h.innerHeight-e.getBoundingClientRect().top-35),"px"),n=n.filter((function(e,t){var i;if(null===(i=r.submenuIds)||void 0===i?void 0:i.has(e.id))return console.warn("Found submenu cycle: ".concat(e.id)),!1;if(e instanceof ey){if(t===n.length-1||0===t)return!1;if(n[t-1]instanceof ey)return!1}return!0})),a.push(n,{icon:!0,label:!0,isMenu:!0}),e.appendChild(a.scrollableElement.getDomNode()),a.scrollableElement.scanDomNode(),a.viewItems.filter((function(e){return!(e instanceof mW)})).forEach((function(e,t,n){e.updatePositionInSet(t+1,n.length)})),a}return p(t,e),h(t,[{key:"initializeOrUpdateStyleSheet",value:function(e,n){this.styleSheet||(Ap(e)?this.styleSheet=jp(e):(t.globalStyleSheet||(t.globalStyleSheet=jp()),this.styleSheet=t.globalStyleSheet)),this.styleSheet.textContent=function(e,t){var n="\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n".concat(yW(bd.menuSelection),"\n").concat(yW(bd.menuSubmenu),"\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n\tmax-height: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}");if(t){n+="\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t";var i=e.scrollbarShadow;i&&(n+="\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ".concat(i," 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ").concat(i," 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ").concat(i," 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t"));var r=e.scrollbarSliderBackground;r&&(n+="\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ".concat(r,";\n\t\t\t\t}\n\t\t\t"));var o=e.scrollbarSliderHoverBackground;o&&(n+="\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ".concat(o,";\n\t\t\t\t}\n\t\t\t"));var a=e.scrollbarSliderActiveBackground;a&&(n+="\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ".concat(a,";\n\t\t\t\t}\n\t\t\t"))}return n}(n,Ap(e))}},{key:"styleScrollElement",value:function(e,t){var n,i,r=null!==(n=t.foregroundColor)&&void 0!==n?n:"",o=null!==(i=t.backgroundColor)&&void 0!==i?i:"",a=t.borderColor?"1px solid ".concat(t.borderColor):"",s=t.shadowColor?"0 2px 8px ".concat(t.shadowColor):"";e.style.outline=a,e.style.borderRadius="5px",e.style.color=r,e.style.backgroundColor=o,e.style.boxShadow=s}},{key:"getContainer",value:function(){return this.scrollableElement.getDomNode()}},{key:"onScroll",get:function(){return this.scrollableElement.onScroll}},{key:"focusItemByElement",value:function(e){var t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}},{key:"setFocusedItem",value:function(e){for(var t=0;t<this.actionsList.children.length;t++){if(e===this.actionsList.children[t]){this.focusedItem=t;break}}}},{key:"updateFocus",value:function(e){g(v(t.prototype),"updateFocus",this).call(this,e,!0,!0),void 0!==this.focusedItem&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}},{key:"doGetActionViewItem",value:function(e,t,n){if(e instanceof ey)return new mW(t.context,e,{icon:!0},this.menuStyles);if(e instanceof iy){var i=new pW(e,e.actions,n,b(_({},t),{submenuIds:new Set(x(t.submenuIds||[]).concat([e.id]))}),this.menuStyles);if(t.enableMnemonics){var r=i.getMnemonic();if(r&&i.isEnabled()){var o=[];this.mnemonics.has(r)&&(o=this.mnemonics.get(r)),o.push(i),this.mnemonics.set(r,o)}}return i}var a={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){var s=t.getKeyBinding(e);if(s){var l=s.getLabel();l&&(a.keybinding=l)}}var u=new vW(t.context,e,a,this.menuStyles);if(t.enableMnemonics){var c=u.getMnemonic();if(c&&u.isEnabled()){var d=[];this.mnemonics.has(c)&&(d=this.mnemonics.get(c)),d.push(u),this.mnemonics.set(c,d)}}return u}}]),t}(dW),vW=function(e){function t(e,n,i,r){var o;if(u(this,t),i.isMenu=!0,(o=l(this,t,[n,n,i])).menuStyle=r,o.options=i,o.options.icon=void 0!==i.icon&&i.icon,o.options.label=void 0===i.label||i.label,o.cssClass="",o.options.label&&i.enableMnemonics){var a=o.action.label;if(a){var s=hW.exec(a);s&&(o.mnemonic=(s[1]?s[1]:s[3]).toLocaleLowerCase())}}return o.runOnceToEnableMouseUp=new Sg((function(){o.element&&(o._register(cp(o.element,rm.MOUSE_UP,(function(e){if(om(e,!0),Vf){if(new lg(ep(o.element),e).rightButton)return;o.onClick(e)}else setTimeout((function(){o.onClick(e)}),0)}))),o._register(cp(o.element,rm.CONTEXT_MENU,(function(e){om(e,!0)}))))}),100),o._register(o.runOnceToEnableMouseUp),o}return p(t,e),h(t,[{key:"render",value:function(e){g(v(t.prototype),"render",this).call(this,e),this.element&&(this.container=e,this.item=lm(this.element,gm("a.action-menu-item")),this._action.id===ey.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts","".concat(this.mnemonic))),this.check=lm(this.item,gm("span.menu-item-check"+ny.asCSSSelector(bd.menuSelection))),this.check.setAttribute("role","none"),this.label=lm(this.item,gm("span.action-label")),this.options.label&&this.options.keybinding&&(lm(this.item,gm("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}},{key:"blur",value:function(){g(v(t.prototype),"blur",this).call(this),this.applyStyle()}},{key:"focus",value:function(){var e;g(v(t.prototype),"focus",this).call(this),null===(e=this.item)||void 0===e||e.focus(),this.applyStyle()}},{key:"updatePositionInSet",value:function(e,t){this.item&&(this.item.setAttribute("aria-posinset","".concat(e)),this.item.setAttribute("aria-setsize","".concat(t)))}},{key:"updateLabel",value:function(){if(this.label&&this.options.label){lp(this.label);var e=HM(this.action.label);if(e){var t=function(e){var t=hW,n=t.exec(e);if(!n)return e;var i=!n[1];return e.replace(t,i?"$2$3":"").trim()}(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));var n=hW.exec(e);if(n){var i;e=Kh(e),fW.lastIndex=0;for(var r=fW.exec(e);r&&r[1];)r=fW.exec(e);var o=function(e){return e.replace(/&amp;&amp;/g,"&amp;")};r?this.label.append(Zh(o(e.substr(0,r.index))," "),gm("u",{"aria-hidden":"true"},r[3]),Yh(o(e.substr(r.index+r[0].length))," ")):this.label.innerText=o(e).trim(),null===(i=this.item)||void 0===i||i.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}},{key:"updateTooltip",value:function(){}},{key:"updateClass",value:function(){var e;this.cssClass&&this.item&&(e=this.item.classList).remove.apply(e,x(this.cssClass.split(" ")));if(this.options.icon&&this.label){var t;if(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass)(t=this.label.classList).add.apply(t,x(this.cssClass.split(" ")));this.updateEnabled()}else this.label&&this.label.classList.remove("icon")}},{key:"updateEnabled",value:function(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}},{key:"updateChecked",value:function(){if(this.item){var e=this.action.checked;this.item.classList.toggle("checked",!!e),void 0!==e?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}}},{key:"getMnemonic",value:function(){return this.mnemonic}},{key:"applyStyle",value:function(){var e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,i=e&&this.menuStyle.selectionBorderColor?"1px solid ".concat(this.menuStyle.selectionBorderColor):"",r=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=null!=t?t:"",this.item.style.backgroundColor=null!=n?n:"",this.item.style.outline=i,this.item.style.outlineOffset=r),this.check&&(this.check.style.color=null!=t?t:"")}}]),t}(NF),pW=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t,[e,e,r,o])).submenuActions=n,a.parentData=i,a.submenuOptions=r,a.mysubmenu=null,a.submenuDisposables=a._register(new Tu),a.mouseOver=!1,a.expandDirection=r&&void 0!==r.expandDirection?r.expandDirection:{horizontal:uW.Right,vertical:cW.Below},a.showScheduler=new Sg((function(){a.mouseOver&&(a.cleanupExistingSubmenu(!1),a.createSubmenu(!1))}),250),a.hideScheduler=new Sg((function(){a.element&&!Mp(Op(),a.element)&&a.parentData.submenu===a.mysubmenu&&(a.parentData.parent.focus(!1),a.cleanupExistingSubmenu(!0))}),750),a}return p(t,e),h(t,[{key:"render",value:function(e){var n=this;g(v(t.prototype),"render",this).call(this,e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=lm(this.item,gm("span.submenu-indicator"+ny.asCSSSelector(bd.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(cp(this.element,rm.KEY_UP,(function(e){var t=new rg(e);(t.equals(17)||t.equals(3))&&(om(e,!0),n.createSubmenu(!0))}))),this._register(cp(this.element,rm.KEY_DOWN,(function(e){var t=new rg(e);Op()===n.item&&(t.equals(17)||t.equals(3))&&om(e,!0)}))),this._register(cp(this.element,rm.MOUSE_OVER,(function(e){n.mouseOver||(n.mouseOver=!0,n.showScheduler.schedule())}))),this._register(cp(this.element,rm.MOUSE_LEAVE,(function(e){n.mouseOver=!1}))),this._register(cp(this.element,rm.FOCUS_OUT,(function(e){n.element&&!Mp(Op(),n.element)&&n.hideScheduler.schedule()}))),this._register(this.parentData.parent.onScroll((function(){n.parentData.submenu===n.mysubmenu&&(n.parentData.parent.focus(!1),n.cleanupExistingSubmenu(!0))}))))}},{key:"updateEnabled",value:function(){}},{key:"onClick",value:function(e){om(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}},{key:"cleanupExistingSubmenu",value:function(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch(e){}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}},{key:"calculateSubmenuMenuLayout",value:function(e,t,n,i){var r={top:0,left:0};return r.left=ER(e.width,t.width,{position:i.horizontal===uW.Right?0:1,offset:n.left,size:n.width}),r.left>=n.left&&r.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(r.left=n.left+10),n.top+=10,n.height=0),r.top=ER(e.height,t.height,{position:0,offset:n.top,size:0}),r.top+t.height===n.top&&r.top+n.height+t.height<=e.height&&(r.top+=n.height),r}},{key:"createSubmenu",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=lm(this.element,gm("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");var n=ep(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(n.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new gW(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new ry],this.submenuOptions,this.menuStyle);var r=this.element.getBoundingClientRect(),o={top:r.top-i,left:r.left,height:r.height+2*i,width:r.width},a=this.submenuContainer.getBoundingClientRect(),s=ep(this.element),l=this.calculateSubmenuMenuLayout(new Cp(s.innerWidth,s.innerHeight),Cp.lift(a),o,this.expandDirection),u=l.top,c=l.left;this.submenuContainer.style.left="".concat(c-a.left,"px"),this.submenuContainer.style.top="".concat(u-a.top,"px"),this.submenuDisposables.add(cp(this.submenuContainer,rm.KEY_UP,(function(t){new rg(t).equals(15)&&(om(t,!0),e.parentData.parent.focus(),e.cleanupExistingSubmenu(!0))}))),this.submenuDisposables.add(cp(this.submenuContainer,rm.KEY_DOWN,(function(e){new rg(e).equals(15)&&om(e,!0)}))),this.submenuDisposables.add(this.parentData.submenu.onDidCancel((function(){e.parentData.parent.focus(),e.cleanupExistingSubmenu(!0)}))),this.parentData.submenu.focus(t),this.mysubmenu=this.parentData.submenu}}},{key:"updateAriaExpanded",value:function(e){var t;this.item&&(null===(t=this.item)||void 0===t||t.setAttribute("aria-expanded",e))}},{key:"applyStyle",value:function(){g(v(t.prototype),"applyStyle",this).call(this);var e=this.element&&this.element.classList.contains("focused"),n=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=null!=n?n:"")}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}]),t}(vW),mW=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t,[e,n,i])).menuStyles=r,o}return p(t,e),h(t,[{key:"render",value:function(e){g(v(t.prototype),"render",this).call(this,e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?"".concat(this.menuStyles.separatorColor):"")}}]),t}(IF);function yW(e){var t=pd()[e.id];return".codicon-".concat(e.id,":before { content: '\\").concat(t.toString(16),"'; }")}var _W,bW,kW=function(){function e(t,n,i,r){u(this,e),this.contextViewService=t,this.telemetryService=n,this.notificationService=i,this.keybindingService=r,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}return h(e,[{key:"configure",value:function(e){this.options=e}},{key:"showContextMenu",value:function(e){var t=this,n=e.getActions();if(n.length){var i;this.focusToReturn=Op();var r=Jp(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:function(){return e.getAnchor()},canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:function(r){t.lastContainer=r;var o,a=e.getMenuClassName?e.getMenuClassName():"";(a&&(r.className+=" "+a),t.options.blockMouse)&&(t.block=r.appendChild(gm(".context-view-block")),t.block.style.position="fixed",t.block.style.cursor="initial",t.block.style.left="0",t.block.style.top="0",t.block.style.width="100%",t.block.style.height="100%",t.block.style.zIndex="-1",null===(o=t.blockDisposable)||void 0===o||o.dispose(),t.blockDisposable=cp(t.block,rm.MOUSE_DOWN,(function(e){return e.stopPropagation()})));var s=new Tu,l=e.actionRunner||new Jm;l.onWillRun((function(n){return t.onActionRun(n,!e.skipTelemetry)}),t,s),l.onDidRun(t.onDidActionRun,t,s),(i=new gW(r,n,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:function(e){return t.keybindingService.lookupKeybinding(e.id)}},$F)).onDidCancel((function(){return t.contextViewService.hideContextView(!0)}),null,s),i.onDidBlur((function(){return t.contextViewService.hideContextView(!0)}),null,s);var u=ep(r);return s.add(cp(u,rm.BLUR,(function(){return t.contextViewService.hideContextView(!0)}))),s.add(cp(u,rm.MOUSE_DOWN,(function(e){if(!e.defaultPrevented){var n=new lg(u,e),i=n.target;if(!n.rightButton){for(;i;){if(i===r)return;i=i.parentElement}t.contextViewService.hideContextView(!0)}}}))),Eu(s,i)},focus:function(){null==i||i.focus(!!e.autoSelectFirstItem)},onHide:function(n){var i,r,o;(null===(i=e.onHide)||void 0===i||i.call(e,!!n),t.block&&(t.block.remove(),t.block=null),null===(r=t.blockDisposable)||void 0===r||r.dispose(),t.blockDisposable=null,t.lastContainer&&(Op()===t.lastContainer||Mp(Op(),t.lastContainer)))&&(null===(o=t.focusToReturn)||void 0===o||o.focus());t.lastContainer=null}},r,!!r)}}},{key:"onActionRun",value:function(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}},{key:"onDidActionRun",value:function(e){e.error&&!_u(e.error)&&this.notificationService.error(e.error)}}]),e}(),wW=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},CW=function(e,t){return function(n,i){t(n,i,e)}},SW=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t)).telemetryService=e,s.notificationService=n,s.contextViewService=i,s.keybindingService=r,s.menuService=o,s.contextKeyService=a,s._contextMenuHandler=void 0,s._onDidShowContextMenu=s._store.add(new Zu),s.onDidShowContextMenu=s._onDidShowContextMenu.event,s._onDidHideContextMenu=s._store.add(new Zu),s}return p(t,e),h(t,[{key:"contextMenuHandler",get:function(){return this._contextMenuHandler||(this._contextMenuHandler=new kW(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}},{key:"configure",value:function(e){this.contextMenuHandler.configure(e)}},{key:"showContextMenu",value:function(e){var t=this;e=_W.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu(b(_({},e),{onHide:function(n){var i;null===(i=e.onHide)||void 0===i||i.call(e,n),t._onDidHideContextMenu.fire()}})),Cm.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}}]),t}(Ru);SW=wW([CW(0,b_),CW(1,rx),CW(2,qI),CW(3,ZI),CW(4,h_),CW(5,Ky)],SW),function(e){e.transform=function(e,t,n){if(!function(e){return e&&e.menuId instanceof d_}(e))return e;var i=e.menuId,r=e.menuActionOptions,o=e.contextKeyService;return b(_({},e),{getActions:function(){var a=[];i&&function(e,t,n,i){var r,o,a;if(Array.isArray(e))a=e,r=t,o=n;else{var s=t;a=e.getActions(s),r=n,o=i}var l=Cm.getInstance();nW(a,r,l.keyStatus.altKey||(ps||ys)&&l.keyStatus.shiftKey,o?function(e){return e===o}:function(e){return"navigation"===e})}(t.getMenuActions(i,null!=o?o:n,r),a);return e.getActions?ey.join(e.getActions(),a):a}})}}(_W||(_W={})),function(e){e[e.API=0]="API",e[e.USER=1]="USER"}(bW||(bW={}));var xW=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},LW=function(e,t){return function(n,i){t(n,i,e)}},DW=function(){function e(t){u(this,e),this._commandService=t}return h(e,[{key:"open",value:function(e,t){var n=this;return s((function(){var i,r;return E(this,(function(o){switch(o.label){case 0:if(!Wv(e,Pv.command))return[2,!1];if(!(null==t?void 0:t.allowCommands))return[2,!0];if("string"==typeof e&&(e=ed.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path))return[2,!0];r=[];try{r=yT(decodeURIComponent(e.query))}catch(t){try{r=yT(e.query)}catch(e){}}return Array.isArray(r)||(r=[r]),[4,(i=n._commandService).executeCommand.apply(i,[e.path].concat(x(r)))];case 1:return o.sent(),[2,!0]}}))}))()}}]),e}();DW=xW([LW(0,ay)],DW);var NW=function(){function e(t){u(this,e),this._editorService=t}return h(e,[{key:"open",value:function(e,t){var n=this;return s((function(){var i,r,o;return E(this,(function(a){switch(a.label){case 0:return"string"==typeof e&&(e=ed.parse(e)),i=function(e){var t=void 0,n=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(e.fragment);return n&&(t={startLineNumber:parseInt(n[1]),startColumn:n[2]?parseInt(n[2]):1,endLineNumber:n[4]?parseInt(n[4]):void 0,endColumn:n[4]?n[5]?parseInt(n[5]):1:void 0},e=e.with({fragment:""})),{selection:t,uri:e}}(e),r=i.selection,o=i.uri,e=o,e.scheme===Pv.file&&(e=JM(e)),[4,n._editorService.openCodeEditor({resource:e,options:_({selection:r,source:(null==t?void 0:t.fromUserGesture)?bW.USER:bW.API},null==t?void 0:t.editorOptions)},n._editorService.getFocusedCodeEditor(),null==t?void 0:t.openToSide)];case 1:return a.sent(),[2,!0]}}))}))()}}]),e}();NW=xW([LW(0,Ym)],NW);var IW=function(){function e(t,n){u(this,e);var i=this;this._openers=new Hs,this._validators=new Hs,this._resolvers=new Hs,this._resolvedUriTargets=new cw((function(e){return e.with({path:null,fragment:null,query:null}).toString()})),this._externalOpeners=new Hs,this._defaultExternalOpener={openExternal:function(){var e=s((function(e){return E(this,(function(t){return Bv(e,Pv.http,Pv.https)?ym(e):Fh.location.href=e,[2,!0]}))}));return function(t){return e.apply(this,arguments)}}()},this._openers.push({open:function(){var e=s((function(e,t){return E(this,(function(n){switch(n.label){case 0:return(null==t?void 0:t.openExternal)||Bv(e,Pv.mailto,Pv.http,Pv.https,Pv.vsls)?[4,i._doOpenExternal(e,t)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}));return function(t,n){return e.apply(this,arguments)}}()}),this._openers.push(new DW(n)),this._openers.push(new NW(t))}return h(e,[{key:"registerOpener",value:function(e){return{dispose:this._openers.unshift(e)}}},{key:"open",value:function(e,t){var n=this;return s((function(){var i,r,o,a,s,l,u,c,d,h,f,g,v,p;return E(this,(function(m){switch(m.label){case 0:i="string"==typeof e?ed.parse(e):e,o=null!==(r=n._resolvedUriTargets.get(i))&&void 0!==r?r:e,a=!0,s=!1,l=void 0,m.label=1;case 1:m.trys.push([1,6,7,8]),u=n._validators[Symbol.iterator](),m.label=2;case 2:return(a=(c=u.next()).done)?[3,5]:[4,c.value.shouldOpen(o,t)];case 3:if(!m.sent())return[2,!1];m.label=4;case 4:return a=!0,[3,2];case 5:return[3,8];case 6:return p=m.sent(),s=!0,l=p,[3,8];case 7:try{a||null==u.return||u.return()}finally{if(s)throw l}return[7];case 8:d=!0,h=!1,f=void 0,m.label=9;case 9:m.trys.push([9,14,15,16]),g=n._openers[Symbol.iterator](),m.label=10;case 10:return(d=(v=g.next()).done)?[3,13]:[4,v.value.open(e,t)];case 11:if(m.sent())return[2,!0];m.label=12;case 12:return d=!0,[3,10];case 13:return[3,16];case 14:return p=m.sent(),h=!0,f=p,[3,16];case 15:try{d||null==g.return||g.return()}finally{if(h)throw f}return[7];case 16:return[2,!1]}}))}))()}},{key:"resolveExternalUri",value:function(e,t){var n=this;return s((function(){var i,r,o,a,s,l,u,c;return E(this,(function(d){switch(d.label){case 0:i=!0,r=!1,o=void 0,d.label=1;case 1:d.trys.push([1,8,9,10]),a=n._resolvers[Symbol.iterator](),d.label=2;case 2:if(i=(s=a.next()).done)return[3,7];l=s.value,d.label=3;case 3:return d.trys.push([3,5,,6]),[4,l.resolveExternalUri(e,t)];case 4:return(u=d.sent())?(n._resolvedUriTargets.has(u.resolved)||n._resolvedUriTargets.set(u.resolved,e),[2,u]):[3,6];case 5:return d.sent(),[3,6];case 6:return i=!0,[3,2];case 7:return[3,10];case 8:return c=d.sent(),r=!0,o=c,[3,10];case 9:try{i||null==a.return||a.return()}finally{if(r)throw o}return[7];case 10:throw new Error("Could not resolve external URI: "+e.toString())}}))}))()}},{key:"_doOpenExternal",value:function(e,t){var n=this;return s((function(){var i,r,o,a,s,l,u,c,d,h;return E(this,(function(f){switch(f.label){case 0:i="string"==typeof e?ed.parse(e):e,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.resolveExternalUri(i,t)];case 2:return r=f.sent().resolved,[3,4];case 3:return f.sent(),r=i,[3,4];case 4:if(o="string"==typeof e&&i.toString()===r.toString()?e:encodeURI(r.toString(!0)),!(null==t?void 0:t.allowContributedOpeners))return[3,12];a="string"==typeof(null==t?void 0:t.allowContributedOpeners)?null==t?void 0:t.allowContributedOpeners:void 0,s=!0,l=!1,u=void 0,f.label=5;case 5:f.trys.push([5,10,11,12]),c=n._externalOpeners[Symbol.iterator](),f.label=6;case 6:return(s=(d=c.next()).done)?[3,9]:[4,d.value.openExternal(o,{sourceUri:i,preferredOpenerId:a},Uu.None)];case 7:if(f.sent())return[2,!0];f.label=8;case 8:return s=!0,[3,6];case 9:return[3,12];case 10:return h=f.sent(),l=!0,u=h,[3,12];case 11:try{s||null==c.return||c.return()}finally{if(l)throw u}return[7];case 12:return[2,n._defaultExternalOpener.openExternal(o,{sourceUri:i},Uu.None)]}}))}))()}},{key:"dispose",value:function(){this._validators.clear()}}]),e}();IW=xW([LW(0,Ym),LW(1,ay)],IW);var EW,MW,TW=Zm("editorWorkerService");!function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"}(EW||(EW={})),function(e){e.compare=function(e,t){return t-e};var t=Object.create(null);t[e.Error]=Xa("sev.error","Error"),t[e.Warning]=Xa("sev.warning","Warning"),t[e.Info]=Xa("sev.info","Info"),e.toString=function(e){return t[e]||""},e.fromSeverity=function(t){switch(t){case tx.Error:return e.Error;case tx.Warning:return e.Warning;case tx.Info:return e.Info;case tx.Ignore:return e.Hint}},e.toSeverity=function(t){switch(t){case e.Error:return tx.Error;case e.Warning:return tx.Warning;case e.Info:return tx.Info;case e.Hint:return tx.Ignore}}}(EW||(EW={})),function(e){var t="";function n(e,n){var i=[t];return e.source?i.push(e.source.replace("¦","\\¦")):i.push(t),e.code?"string"==typeof e.code?i.push(e.code.replace("¦","\\¦")):i.push(e.code.value.replace("¦","\\¦")):i.push(t),void 0!==e.severity&&null!==e.severity?i.push(EW.toString(e.severity)):i.push(t),e.message&&n?i.push(e.message.replace("¦","\\¦")):i.push(t),void 0!==e.startLineNumber&&null!==e.startLineNumber?i.push(e.startLineNumber.toString()):i.push(t),void 0!==e.startColumn&&null!==e.startColumn?i.push(e.startColumn.toString()):i.push(t),void 0!==e.endLineNumber&&null!==e.endLineNumber?i.push(e.endLineNumber.toString()):i.push(t),void 0!==e.endColumn&&null!==e.endColumn?i.push(e.endColumn.toString()):i.push(t),i.push(t),i.join("¦")}e.makeKey=function(e){return n(e,!0)},e.makeKeyOptionalMessage=n}(MW||(MW={}));var RW=Zm("markerService"),AW=TL("editor.lineHighlightBackground",null,Xa("lineHighlight","Background color for the highlight of line at the cursor position.")),PW=TL("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:KL},Xa("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));TL("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},Xa("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),TL("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:qL,hcLight:qL},Xa("rangeHighlightBorder","Background color of the border around highlighted ranges.")),TL("editor.symbolHighlightBackground",{dark:bD,light:bD,hcDark:null,hcLight:null},Xa("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),TL("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:qL,hcLight:qL},Xa("symbolHighlightBorder","Background color of the border around highlighted symbols."));var OW=TL("editorCursor.foreground",{dark:"#AEAFAD",light:XC.black,hcDark:XC.white,hcLight:"#0F4A85"},Xa("caret","Color of the editor cursor.")),FW=TL("editorCursor.background",null,Xa("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),WW=TL("editorMultiCursor.primary.foreground",OW,Xa("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),BW=TL("editorMultiCursor.primary.background",FW,Xa("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),HW=TL("editorMultiCursor.secondary.foreground",OW,Xa("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),VW=TL("editorMultiCursor.secondary.background",FW,Xa("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),zW=TL("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},Xa("editorWhitespaces","Color of whitespace characters in the editor.")),UW=TL("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:XC.white,hcLight:"#292929"},Xa("editorLineNumbers","Color of editor line numbers.")),jW=TL("editorIndentGuide.background",zW,Xa("editorIndentGuides","Color of the editor indentation guides."),!1,Xa("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),KW=TL("editorIndentGuide.activeBackground",zW,Xa("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,Xa("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),qW=TL("editorIndentGuide.background1",jW,Xa("editorIndentGuides1","Color of the editor indentation guides (1).")),GW=TL("editorIndentGuide.background2","#00000000",Xa("editorIndentGuides2","Color of the editor indentation guides (2).")),ZW=TL("editorIndentGuide.background3","#00000000",Xa("editorIndentGuides3","Color of the editor indentation guides (3).")),YW=TL("editorIndentGuide.background4","#00000000",Xa("editorIndentGuides4","Color of the editor indentation guides (4).")),QW=TL("editorIndentGuide.background5","#00000000",Xa("editorIndentGuides5","Color of the editor indentation guides (5).")),XW=TL("editorIndentGuide.background6","#00000000",Xa("editorIndentGuides6","Color of the editor indentation guides (6).")),$W=TL("editorIndentGuide.activeBackground1",KW,Xa("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),JW=TL("editorIndentGuide.activeBackground2","#00000000",Xa("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),eB=TL("editorIndentGuide.activeBackground3","#00000000",Xa("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),tB=TL("editorIndentGuide.activeBackground4","#00000000",Xa("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),nB=TL("editorIndentGuide.activeBackground5","#00000000",Xa("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),iB=TL("editorIndentGuide.activeBackground6","#00000000",Xa("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),rB=TL("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:qL,hcLight:qL},Xa("editorActiveLineNumber","Color of editor active line number"),!1,Xa("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));TL("editorLineNumber.activeForeground",rB,Xa("editorActiveLineNumber","Color of editor active line number"));var oB=TL("editorLineNumber.dimmedForeground",null,Xa("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));TL("editorRuler.foreground",{dark:"#5A5A5A",light:XC.lightgrey,hcDark:XC.white,hcLight:"#292929"},Xa("editorRuler","Color of the editor rulers.")),TL("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},Xa("editorCodeLensForeground","Foreground color of editor CodeLens")),TL("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},Xa("editorBracketMatchBackground","Background color behind matching brackets")),TL("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:KL,hcLight:KL},Xa("editorBracketMatchBorder","Color for matching brackets boxes"));var aB=TL("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},Xa("editorOverviewRulerBorder","Color of the overview ruler border.")),sB=TL("editorOverviewRuler.background",null,Xa("editorOverviewRulerBackground","Background color of the editor overview ruler."));TL("editorGutter.background",tD,Xa("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),TL("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:XC.fromHex("#fff").transparent(.8),hcLight:KL},Xa("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));var lB=TL("editorUnnecessaryCode.opacity",{dark:XC.fromHex("#000a"),light:XC.fromHex("#0007"),hcDark:null,hcLight:null},Xa("unnecessaryCodeOpacity","Opacity of unnecessary (unused) source code in the editor. For example, \"#000000c0\" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out."));TL("editorGhostText.border",{dark:null,light:null,hcDark:XC.fromHex("#fff").transparent(.8),hcLight:XC.fromHex("#292929").transparent(.8)},Xa("editorGhostTextBorder","Border color of ghost text in the editor."));var uB=TL("editorGhostText.foreground",{dark:XC.fromHex("#ffffff56"),light:XC.fromHex("#0007"),hcDark:null,hcLight:null},Xa("editorGhostTextForeground","Foreground color of the ghost text in the editor."));TL("editorGhostText.background",null,Xa("editorGhostTextBackground","Background color of the ghost text in the editor."));var cB=TL("editorOverviewRuler.rangeHighlightForeground",new XC(new ZC(0,122,204,.6)),Xa("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),dB=TL("editorOverviewRuler.errorForeground",{dark:new XC(new ZC(255,18,18,.7)),light:new XC(new ZC(255,18,18,.7)),hcDark:new XC(new ZC(255,50,50,1)),hcLight:"#B5200D"},Xa("overviewRuleError","Overview ruler marker color for errors.")),hB=TL("editorOverviewRuler.warningForeground",{dark:uD,light:uD,hcDark:cD,hcLight:cD},Xa("overviewRuleWarning","Overview ruler marker color for warnings.")),fB=TL("editorOverviewRuler.infoForeground",{dark:dD,light:dD,hcDark:hD,hcLight:hD},Xa("overviewRuleInfo","Overview ruler marker color for infos.")),gB=TL("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},Xa("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),vB=TL("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},Xa("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),pB=TL("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},Xa("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),mB=TL("editorBracketHighlight.foreground4","#00000000",Xa("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),yB=TL("editorBracketHighlight.foreground5","#00000000",Xa("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),_B=TL("editorBracketHighlight.foreground6","#00000000",Xa("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),bB=TL("editorBracketHighlight.unexpectedBracket.foreground",{dark:new XC(new ZC(255,18,18,.8)),light:new XC(new ZC(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},Xa("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),kB=TL("editorBracketPairGuide.background1","#00000000",Xa("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),wB=TL("editorBracketPairGuide.background2","#00000000",Xa("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),CB=TL("editorBracketPairGuide.background3","#00000000",Xa("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),SB=TL("editorBracketPairGuide.background4","#00000000",Xa("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),xB=TL("editorBracketPairGuide.background5","#00000000",Xa("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),LB=TL("editorBracketPairGuide.background6","#00000000",Xa("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),DB=TL("editorBracketPairGuide.activeBackground1","#00000000",Xa("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),NB=TL("editorBracketPairGuide.activeBackground2","#00000000",Xa("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),IB=TL("editorBracketPairGuide.activeBackground3","#00000000",Xa("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),EB=TL("editorBracketPairGuide.activeBackground4","#00000000",Xa("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),MB=TL("editorBracketPairGuide.activeBackground5","#00000000",Xa("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),TB=TL("editorBracketPairGuide.activeBackground6","#00000000",Xa("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));TL("editorUnicodeHighlight.border",uD,Xa("editorUnicodeHighlight.border","Border color used to highlight unicode characters.")),TL("editorUnicodeHighlight.background",lD,Xa("editorUnicodeHighlight.background","Background color used to highlight unicode characters.")),VS((function(e,t){var n=e.getColor(tD),i=e.getColor(AW),r=i&&!i.isTransparent()?i:n;r&&t.addRule(".monaco-editor .inputarea.ime-input { background-color: ".concat(r,"; }"))}));var RB=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},AB=function(e,t){return function(n,i){t(n,i,e)}},PB=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._markerService=n,i._onDidChangeMarker=i._register(new Zu),i._markerDecorations=new cw,e.getModels().forEach((function(e){return i._onModelAdded(e)})),i._register(e.onModelAdded(i._onModelAdded,i)),i._register(e.onModelRemoved(i._onModelRemoved,i)),i._register(i._markerService.onMarkerChanged(i._handleMarkerChange,i)),i}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._markerDecorations.forEach((function(e){return e.dispose()})),this._markerDecorations.clear()}},{key:"getMarker",value:function(e,t){var n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}},{key:"_handleMarkerChange",value:function(e){var t=this;e.forEach((function(e){var n=t._markerDecorations.get(e);n&&t._updateDecorations(n)}))}},{key:"_onModelAdded",value:function(e){var t=new OB(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}},{key:"_onModelRemoved",value:function(e){var t,n=this,i=this._markerDecorations.get(e.uri);(i&&(i.dispose(),this._markerDecorations.delete(e.uri)),e.uri.scheme===Pv.inMemory||e.uri.scheme===Pv.internal||e.uri.scheme===Pv.vscode)&&(null===(t=this._markerService)||void 0===t||t.read({resource:e.uri}).map((function(e){return e.owner})).forEach((function(t){return n._markerService.remove(t,[e.uri])})))}},{key:"_updateDecorations",value:function(e){var t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}}]),t}(Ru);PB=RB([AB(0,Qm),AB(1,RW)],PB);var OB=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).model=e,n._map=new mw,n._register(Mu((function(){n.model.deltaDecorations(x(n._map.values()),[]),n._map.clear()}))),n}return p(t,e),h(t,[{key:"update",value:function(e){var t=this,n=function(e,t){var n=[],i=[],r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;t.has(u)||n.push(u)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}var c=!0,d=!1,h=void 0;try{for(var f,g=t[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;e.has(v)||i.push(v)}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}return{removed:n,added:i}}(new Set(this._map.keys()),new Set(e)),i=n.added,r=n.removed;if(0===i.length&&0===r.length)return!1;var o=r.map((function(e){return t._map.get(e)})),a=i.map((function(e){return{range:t._createDecorationRange(t.model,e),options:t._createDecorationOption(e)}})),s=this.model.deltaDecorations(o,a),l=!0,u=!1,c=void 0;try{for(var d,h=r[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;this._map.delete(f)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}for(var g=0;g<s.length;g++)this._map.set(i[g],s[g]);return!0}},{key:"getMarker",value:function(e){return this._map.getKey(e.id)}},{key:"_createDecorationRange",value:function(e,t){var n=hd.lift(t);if(t.severity!==EW.Hint||this._hasMarkerTag(t,1)||this._hasMarkerTag(t,2)||(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),(n=e.validateRange(n)).isEmpty()){var i=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(1===i||n.endColumn>=i)return n;var r=e.getWordAtPosition(n.getStartPosition());r&&(n=new hd(n.startLineNumber,r.startColumn,n.endLineNumber,r.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&1===t.startColumn&&n.startLineNumber===n.endLineNumber){var o=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);o<n.endColumn&&(n=new hd(n.startLineNumber,o,n.endLineNumber,n.endColumn),t.startColumn=o)}return n}},{key:"_createDecorationOption",value:function(e){var t,n,i,r=void 0,o=void 0;switch(e.severity){case EW.Hint:t=this._hasMarkerTag(e,2)?void 0:this._hasMarkerTag(e,1)?"squiggly-unnecessary":"squiggly-hint",n=0;break;case EW.Info:t="squiggly-info",r=OS(fB),n=10,i={color:OS(sN),position:1};break;case EW.Warning:t="squiggly-warning",r=OS(hB),n=20,i={color:OS(lN),position:1};break;case EW.Error:default:t="squiggly-error",r=OS(dB),n=30,i={color:OS(uN),position:1}}return e.tags&&(-1!==e.tags.indexOf(1)&&(o="squiggly-inline-unnecessary"),-1!==e.tags.indexOf(2)&&(o="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:r,position:dw.Right},minimap:i,zIndex:n,inlineClassName:o}}},{key:"_hasMarkerTag",value:function(e,t){return!!e.tags&&e.tags.indexOf(t)>=0}}]),t}(Ru),FB=Zm("markerDecorationsService"),WB=function(){function e(){u(this,e)}return h(e,null,[{key:"_nextVisibleColumn",value:function(t,n,i){return 9===t?e.nextRenderTabStop(n,i):Df(t)||Nf(t)?n+2:n+1}},{key:"visibleColumnFromColumn",value:function(e,t,n){for(var i=Math.min(t-1,e.length),r=e.substring(0,i),o=new yf(r),a=0;!o.eol();){var s=pf(r,i,o.offset);o.nextGraphemeLength(),a=this._nextVisibleColumn(s,a,n)}return a}},{key:"columnFromVisibleColumn",value:function(e,t,n){if(t<=0)return 1;for(var i=e.length,r=new yf(e),o=0,a=1;!r.eol();){var s=pf(e,i,r.offset);r.nextGraphemeLength();var l=this._nextVisibleColumn(s,o,n),u=r.offset+1;if(l>=t)return l-t<t-o?u:a;o=l,a=u}return i+1}},{key:"nextRenderTabStop",value:function(e,t){return e+t-e%t}},{key:"nextIndentTabStop",value:function(e,t){return e+t-e%t}},{key:"prevRenderTabStop",value:function(e,t){return Math.max(0,e-1-(e-1)%t)}},{key:"prevIndentTabStop",value:function(e,t){return Math.max(0,e-1-(e-1)%t)}}]),e}();function BB(e,t,n){var i=$h(e);return-1===i&&(i=e.length),function(e,t,n){for(var i=0,r=0;r<e.length;r++)"\t"===e.charAt(r)?i=WB.nextIndentTabStop(i,t):i++;var o="";if(!n){var a=Math.floor(i/t);i%=t;for(var s=0;s<a;s++)o+="\t"}for(var l=0;l<i;l++)o+=" ";return o}(e.substring(0,i),t,n)+e.substring(i)}var HB=function e(t,n,i,r){u(this,e),this.range=t,this.nestingLevel=n,this.nestingLevelOfEqualBracketType=i,this.isInvalid=r},VB=function(){function e(t,n,i,r,o,a){u(this,e),this.range=t,this.openingBracketRange=n,this.closingBracketRange=i,this.nestingLevel=r,this.nestingLevelOfEqualBracketType=o,this.bracketPairNode=a}return h(e,[{key:"openingBracketInfo",get:function(){return this.bracketPairNode.openingBracket.bracketInfo}}]),e}(),zB=function(e){function t(e,n,i,r,o,a,s){var c;return u(this,t),(c=l(this,t,[e,n,i,r,o,a])).minVisibleColumnIndentation=s,c}return p(t,e),t}(VB);function UB(e){return 0===e}var jB=Math.pow(2,26);function KB(e,t){return e*jB+t}function qB(e){var t=e,n=Math.floor(t/jB);return new Yw(n,t-n*jB)}function GB(e,t){var n=e+t;return t>=jB&&(n-=e%jB),n}function ZB(e,t){return e.reduce((function(e,n){return GB(e,t(n))}),0)}function YB(e,t){return e===t}function QB(e,t){var n=e,i=t;if(i-n<=0)return 0;var r=Math.floor(n/jB),o=Math.floor(i/jB),a=i-o*jB;return r===o?KB(0,a-(n-r*jB)):KB(o-r,a)}function XB(e,t){return e<t}function $B(e,t){return e<=t}function JB(e,t){return e>=t}function eH(e){return KB(e.lineNumber-1,e.column-1)}function tH(e,t){var n=e,i=Math.floor(n/jB),r=n-i*jB,o=t,a=Math.floor(o/jB);return new hd(i+1,r+1,a+1,o-a*jB+1)}var nH=function(){function e(t,n,i){u(this,e),this.startOffset=t,this.endOffset=n,this.newLength=i}return h(e,[{key:"toString",value:function(){return"[".concat(qB(this.startOffset),"...").concat(qB(this.endOffset),") -> ").concat(qB(this.newLength))}}],[{key:"fromModelContentChanges",value:function(t){return t.map((function(t){var n=hd.lift(t.range);return new e(eH(n.getStartPosition()),eH(n.getEndPosition()),function(e){var t=Xh(e);return KB(t.length-1,t[t.length-1].length)}(t.text))})).reverse()}}]),e}(),iH=function(){function e(t){u(this,e),this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=t.map((function(e){return rH.from(e)}))}return h(e,[{key:"getOffsetBeforeChange",value:function(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}},{key:"getDistanceToNextChange",value:function(e){this.adjustNextEdit(e);var t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return null===n?null:QB(e,n)}},{key:"translateOldToCur",value:function(e){return e.lineCount===this.deltaLineIdxInOld?KB(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):KB(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}},{key:"translateCurToOld",value:function(e){var t=qB(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?KB(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):KB(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}},{key:"adjustNextEdit",value:function(e){for(;this.nextEditIdx<this.edits.length;){var t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(!$B(n,e))break;this.nextEditIdx++;var i=qB(n),r=qB(this.translateOldToCur(t.endOffsetBeforeObj)),o=i.lineCount-r.lineCount;this.deltaOldToNewLineCount+=o;var a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,s=i.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+s,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}}}]),e}(),rH=function(){function e(t,n,i){u(this,e),this.endOffsetBeforeObj=qB(n),this.endOffsetAfterObj=qB(GB(t,i)),this.offsetObj=qB(t)}return h(e,null,[{key:"from",value:function(t){return new e(t.startOffset,t.endOffset,t.newLength)}}]),e}(),oH=[],aH=function(){function e(t,n){u(this,e),this.items=t,this.additionalItems=n}return h(e,[{key:"add",value:function(t,n){var i=n.getKey(t),r=i>>5;if(0===r){var o=1<<i|this.items;return o===this.items?this:e.create(o,this.additionalItems)}r--;for(var a=this.additionalItems.slice(0);a.length<r;)a.push(0);return a[r]|=1<<(31&i),e.create(this.items,a)}},{key:"merge",value:function(t){var n=this.items|t.items;if(this.additionalItems===oH&&t.additionalItems===oH)return n===this.items?this:n===t.items?t:e.create(n,oH);for(var i=[],r=0;r<Math.max(this.additionalItems.length,t.additionalItems.length);r++){var o=this.additionalItems[r]||0,a=t.additionalItems[r]||0;i.push(o|a)}return e.create(n,i)}},{key:"intersects",value:function(e){if(this.items&e.items)return!0;for(var t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}],[{key:"create",value:function(t,n){if(t<=128&&0===n.length){var i=e.cache[t];return i||(i=new e(t,n),e.cache[t]=i),i}return new e(t,n)}},{key:"getEmpty",value:function(){return this.empty}}]),e}();aH.cache=new Array(129),aH.empty=aH.create(0,oH);var sH={getKey:function(e){return e}},lH=function(){function e(){u(this,e),this.items=new Map}return h(e,[{key:"getKey",value:function(e){var t=this.items.get(e);return void 0===t&&(t=this.items.size,this.items.set(e,t)),t}}]),e}(),uH=function(){function e(t){u(this,e),this._length=t}return h(e,[{key:"length",get:function(){return this._length}}]),e}(),cH=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t,[e])).openingBracket=n,a.child=i,a.closingBracket=r,a.missingOpeningBracketIds=o,a}return p(t,e),h(t,[{key:"kind",get:function(){return 2}},{key:"listHeight",get:function(){return 0}},{key:"childrenLength",get:function(){return 3}},{key:"getChild",value:function(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}},{key:"children",get:function(){var e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}},{key:"canBeReused",value:function(e){return null!==this.closingBracket&&!e.intersects(this.missingOpeningBracketIds)}},{key:"deepClone",value:function(){return new t(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}},{key:"computeMinIndentation",value:function(e,t){return this.child?this.child.computeMinIndentation(GB(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}],[{key:"create",value:function(e,n,i){var r=e.length;return n&&(r=GB(r,n.length)),i&&(r=GB(r,i.length)),new t(r,e,n,i,n?n.missingOpeningBracketIds:aH.getEmpty())}}]),t}(uH),dH=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[e])).listHeight=n,r._missingOpeningBracketIds=i,r.cachedMinIndentation=-1,r}return p(t,e),h(t,[{key:"kind",get:function(){return 4}},{key:"missingOpeningBracketIds",get:function(){return this._missingOpeningBracketIds}},{key:"throwIfImmutable",value:function(){}},{key:"makeLastElementMutable",value:function(){this.throwIfImmutable();var e=this.childrenLength;if(0!==e){var t=this.getChild(e-1),n=4===t.kind?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}}},{key:"makeFirstElementMutable",value:function(){this.throwIfImmutable();var e=this.childrenLength;if(0!==e){var t=this.getChild(0),n=4===t.kind?t.toMutable():t;return t!==n&&this.setChild(0,n),n}}},{key:"canBeReused",value:function(e){if(e.intersects(this.missingOpeningBracketIds))return!1;if(0===this.childrenLength)return!1;for(var t=this;4===t.kind;){var n=t.childrenLength;if(0===n)throw new Lu;t=t.getChild(n-1)}return t.canBeReused(e)}},{key:"handleChildrenChanged",value:function(){this.throwIfImmutable();for(var e=this.childrenLength,t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds,i=1;i<e;i++){var r=this.getChild(i);t=GB(t,r.length),n=n.merge(r.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}},{key:"computeMinIndentation",value:function(e,t){if(-1!==this.cachedMinIndentation)return this.cachedMinIndentation;for(var n=Number.MAX_SAFE_INTEGER,i=e,r=0;r<this.childrenLength;r++){var o=this.getChild(r);o&&(n=Math.min(n,o.computeMinIndentation(i,t)),i=GB(i,o.length))}return this.cachedMinIndentation=n,n}}],[{key:"create23",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(r=GB(r,t.length),o=o.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");r=GB(r,n.length),o=o.merge(n.missingOpeningBracketIds)}return i?new fH(r,e.listHeight+1,e,t,n,o):new hH(r,e.listHeight+1,e,t,n,o)}},{key:"getEmpty",value:function(){return new vH(0,0,[],aH.getEmpty())}}]),t}(uH),hH=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t,[e,n,a]))._item1=i,s._item2=r,s._item3=o,s}return p(t,e),h(t,[{key:"childrenLength",get:function(){return null!==this._item3?3:2}},{key:"getChild",value:function(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}},{key:"setChild",value:function(e,t){switch(e){case 0:return void(this._item1=t);case 1:return void(this._item2=t);case 2:return void(this._item3=t)}throw new Error("Invalid child index")}},{key:"children",get:function(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}},{key:"item1",get:function(){return this._item1}},{key:"item2",get:function(){return this._item2}},{key:"item3",get:function(){return this._item3}},{key:"deepClone",value:function(){return new t(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}},{key:"appendChildOfSameHeight",value:function(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}},{key:"unappendChild",value:function(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();var e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}},{key:"prependChildOfSameHeight",value:function(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}},{key:"unprependChild",value:function(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();var e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}},{key:"toMutable",value:function(){return this}}]),t}(dH),fH=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"toMutable",value:function(){return new hH(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}},{key:"throwIfImmutable",value:function(){throw new Error("this instance is immutable")}}]),t}(hH),gH=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t,[e,n,r]))._children=i,o}return p(t,e),h(t,[{key:"childrenLength",get:function(){return this._children.length}},{key:"getChild",value:function(e){return this._children[e]}},{key:"setChild",value:function(e,t){this._children[e]=t}},{key:"children",get:function(){return this._children}},{key:"deepClone",value:function(){for(var e=new Array(this._children.length),n=0;n<this._children.length;n++)e[n]=this._children[n].deepClone();return new t(this.length,this.listHeight,e,this.missingOpeningBracketIds)}},{key:"appendChildOfSameHeight",value:function(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}},{key:"unappendChild",value:function(){this.throwIfImmutable();var e=this._children.pop();return this.handleChildrenChanged(),e}},{key:"prependChildOfSameHeight",value:function(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}},{key:"unprependChild",value:function(){this.throwIfImmutable();var e=this._children.shift();return this.handleChildrenChanged(),e}},{key:"toMutable",value:function(){return this}}]),t}(dH),vH=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"toMutable",value:function(){return new gH(this.length,this.listHeight,x(this.children),this.missingOpeningBracketIds)}},{key:"throwIfImmutable",value:function(){throw new Error("this instance is immutable")}}]),t}(gH),pH=[],mH=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"listHeight",get:function(){return 0}},{key:"childrenLength",get:function(){return 0}},{key:"getChild",value:function(e){return null}},{key:"children",get:function(){return pH}},{key:"deepClone",value:function(){return this}}]),t}(uH),yH=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"kind",get:function(){return 0}},{key:"missingOpeningBracketIds",get:function(){return aH.getEmpty()}},{key:"canBeReused",value:function(e){return!0}},{key:"computeMinIndentation",value:function(e,t){for(var n=qB(e),i=(0===n.columnCount?n.lineCount:n.lineCount+1)+1,r=function(e){return Math.floor(e/jB)}(GB(e,this.length))+1,o=Number.MAX_SAFE_INTEGER,a=i;a<=r;a++){var s=t.getLineFirstNonWhitespaceColumn(a),l=t.getLineContent(a);if(0!==s){var u=WB.visibleColumnFromColumn(l,s,t.getOptions().tabSize);o=Math.min(o,u)}}return o}}]),t}(mH),_H=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[e])).bracketInfo=n,r.bracketIds=i,r}return p(t,e),h(t,[{key:"kind",get:function(){return 1}},{key:"missingOpeningBracketIds",get:function(){return aH.getEmpty()}},{key:"text",get:function(){return this.bracketInfo.bracketText}},{key:"languageId",get:function(){return this.bracketInfo.languageId}},{key:"canBeReused",value:function(e){return!1}},{key:"computeMinIndentation",value:function(e,t){return Number.MAX_SAFE_INTEGER}}],[{key:"create",value:function(e,n,i){return new t(e,n,i)}}]),t}(mH),bH=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[n])).missingOpeningBracketIds=e,i}return p(t,e),h(t,[{key:"kind",get:function(){return 3}},{key:"canBeReused",value:function(e){return!e.intersects(this.missingOpeningBracketIds)}},{key:"computeMinIndentation",value:function(e,t){return Number.MAX_SAFE_INTEGER}}]),t}(mH),kH=function e(t,n,i,r,o){u(this,e),this.length=t,this.kind=n,this.bracketId=i,this.bracketIds=r,this.astNode=o},wH=function(){function e(t,n){u(this,e),this.textModel=t,this.bracketTokens=n,this.reader=new CH(this.textModel,this.bracketTokens),this._offset=0,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=t.getLineCount(),this.textBufferLastLineLength=t.getLineLength(this.textBufferLineCount)}return h(e,[{key:"offset",get:function(){return this._offset}},{key:"length",get:function(){return KB(this.textBufferLineCount-1,this.textBufferLastLineLength)}},{key:"skip",value:function(e){this.didPeek=!1,this._offset=GB(this._offset,e);var t=qB(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}},{key:"read",value:function(){var e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=GB(this._offset,e.length)),e}},{key:"peek",value:function(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}]),e}(),CH=function(){function e(t,n){u(this,e),this.textModel=t,this.bracketTokens=n,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=t.getLineCount(),this.textBufferLastLineLength=t.getLineLength(this.textBufferLineCount)}return h(e,[{key:"setPosition",value:function(e,t){e===this.lineIdx?(this.lineCharOffset=t,null!==this.line&&(this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}},{key:"read",value:function(){if(this.peekedToken){var e=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=e.length,e}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;null===this.line&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));for(var t=this.lineIdx,n=this.lineCharOffset,i=0;;){var r=this.lineTokens,o=r.getCount(),a=null;if(this.lineTokenOffset<o){for(var s=r.getMetadata(this.lineTokenOffset);this.lineTokenOffset+1<o&&s===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;var l=0===Rx.getTokenType(s),u=Rx.containsBalancedBrackets(s),c=r.getEndOffset(this.lineTokenOffset);if(u&&l&&this.lineCharOffset<c){var d=r.getLanguageId(this.lineTokenOffset),h=this.line.substring(this.lineCharOffset,c),f=this.bracketTokens.getSingleLanguageBracketTokens(d),g=f.regExpGlobal;if(g){g.lastIndex=0;var v=g.exec(h);v&&(a=f.getToken(v[0]))&&(this.lineCharOffset+=v.index)}}if(i+=c-this.lineCharOffset,a){if(t!==this.lineIdx||n!==this.lineCharOffset){this.peekedToken=a;break}return this.lineCharOffset+=a.length,a}this.lineTokenOffset++,this.lineCharOffset=c}else{if(this.lineIdx===this.textBufferLineCount-1)break;if(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,(i+=33)>1e3)break}if(i>1500)break}var p=function(e,t,n,i){return e!==n?KB(n-e,i):KB(0,i-t)}(t,n,this.lineIdx,this.lineCharOffset);return new kH(p,0,-1,aH.getEmpty(),new yH(p))}}]),e}(),SH=function(){function e(t,n){u(this,e),this.text=t,this._offset=0,this.idx=0;for(var i,r=n.getRegExpStr(),o=r?new RegExp(r+"|\n","gi"):null,a=[],s=0,l=0,c=0,d=0,h=[],f=0;f<60;f++)h.push(new kH(KB(0,f),0,-1,aH.getEmpty(),new yH(KB(0,f))));for(var g=[],v=0;v<60;v++)g.push(new kH(KB(1,v),0,-1,aH.getEmpty(),new yH(KB(1,v))));if(o)for(o.lastIndex=0;null!==(i=o.exec(t));){var p=i.index,m=i[0];if("\n"===m)s++,l=p+1;else{if(c!==p){var y=void 0;if(d===s){var _=p-c;if(_<h.length)y=h[_];else{var b=KB(0,_);y=new kH(b,0,-1,aH.getEmpty(),new yH(b))}}else{var k=s-d,w=p-l;if(1===k&&w<g.length)y=g[w];else{var C=KB(k,w);y=new kH(C,0,-1,aH.getEmpty(),new yH(C))}}a.push(y)}a.push(n.getToken(m)),c=p+m.length,d=s}}var S=t.length;if(c!==S){var x=d===s?KB(0,S-c):KB(s-d,S-l);a.push(new kH(x,0,-1,aH.getEmpty(),new yH(x)))}this.length=KB(s,S-l),this.tokens=a}return h(e,[{key:"offset",get:function(){return this._offset}},{key:"read",value:function(){return this.tokens[this.idx++]||null}},{key:"peek",value:function(){return this.tokens[this.idx]||null}},{key:"skip",value:function(e){throw new Su}}]),e}(),xH=function(){function e(t){u(this,e),this.map=t,this.hasRegExp=!1,this._regExpGlobal=null}return h(e,[{key:"getRegExpStr",value:function(){if(this.isEmpty)return null;var e=x(this.map.keys());return e.sort(),e.reverse(),e.map((function(e){return function(e){var t=qh(e);/^[\w ]+/.test(e)&&(t="\\b".concat(t));/[\w ]+$/.test(e)&&(t="".concat(t,"\\b"));return t}(e)})).join("|")}},{key:"regExpGlobal",get:function(){if(!this.hasRegExp){var e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}},{key:"getToken",value:function(e){return this.map.get(e.toLowerCase())}},{key:"findClosingTokenText",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this.map[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=C(r.value,2),s=a[0],l=a[1];if(2===l.kind&&l.bracketIds.intersects(e))return s}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"isEmpty",get:function(){return 0===this.map.size}}],[{key:"createFromLanguage",value:function(t,n){function i(e){return n.getKey("".concat(e.languageId,":::").concat(e.bracketText))}var r=new Map,o=!0,a=!1,s=void 0;try{for(var l,u=t.bracketsNew.openingBrackets[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=KB(0,c.bracketText.length),h=i(c),f=aH.getEmpty().add(h,sH);r.set(c.bracketText,new kH(d,1,h,f,_H.create(d,c,f)))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var g=!0,v=!1,p=void 0;try{for(var m,y=t.bracketsNew.closingBrackets[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var _=m.value,b=KB(0,_.bracketText.length),k=aH.getEmpty(),w=_.getOpeningBrackets(),C=!0,S=!1,x=void 0;try{for(var L,D=w[Symbol.iterator]();!(C=(L=D.next()).done);C=!0){var N=L.value;k=k.add(i(N),sH)}}catch(e){S=!0,x=e}finally{try{C||null==D.return||D.return()}finally{if(S)throw x}}r.set(_.bracketText,new kH(b,2,i(w[0]),k,_H.create(b,_,k)))}}catch(e){v=!0,p=e}finally{try{g||null==y.return||y.return()}finally{if(v)throw p}}return new e(r)}}]),e}();var LH=function(){function e(t,n){u(this,e),this.denseKeyProvider=t,this.getLanguageConfiguration=n,this.languageIdToBracketTokens=new Map}return h(e,[{key:"didLanguageChange",value:function(e){return this.languageIdToBracketTokens.has(e)}},{key:"getSingleLanguageBracketTokens",value:function(e){var t=this.languageIdToBracketTokens.get(e);return t||(t=xH.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}]),e}();function DH(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===e.length)return null;if(1===e.length)return e[0];for(var n=e.length;n>3;){for(var i=n>>1,r=0;r<i;r++){var o=r<<1;e[r]=dH.create23(e[o],e[o+1],o+3===n?e[o+2]:null,t)}n=i}return dH.create23(e[0],e[1],n>=3?e[2]:null,t)}function NH(e,t){return Math.abs(e.listHeight-t.listHeight)}function IH(e,t){return e.listHeight===t.listHeight?dH.create23(e,t,null,!1):e.listHeight>t.listHeight?function(e,t){e=e.toMutable();var n,i=e,r=[];for(;;){if(t.listHeight===i.listHeight){n=t;break}if(4!==i.kind)throw new Error("unexpected");r.push(i),i=i.makeLastElementMutable()}for(var o=r.length-1;o>=0;o--){var a=r[o];n?a.childrenLength>=3?n=dH.create23(a.unappendChild(),n,null,!1):(a.appendChildOfSameHeight(n),n=void 0):a.handleChildrenChanged()}return n?dH.create23(e,n,null,!1):e}(e,t):function(e,t){e=e.toMutable();var n=e,i=[];for(;t.listHeight!==n.listHeight;){if(4!==n.kind)throw new Error("unexpected");i.push(n),n=n.makeFirstElementMutable()}for(var r=t,o=i.length-1;o>=0;o--){var a=i[o];r?a.childrenLength>=3?r=dH.create23(r,a.unprependChild(),null,!1):(a.prependChildOfSameHeight(r),r=void 0):a.handleChildrenChanged()}return r?dH.create23(r,e,null,!1):e}(t,e)}var EH=function(){function e(t){u(this,e),this.lastOffset=0,this.nextNodes=[t],this.offsets=[0],this.idxs=[]}return h(e,[{key:"readLongestNodeAt",value:function(e,t){if(XB(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){var n=TH(this.nextNodes);if(!n)return;var i=TH(this.offsets);if(XB(e,i))return;if(XB(i,e))if(GB(i,n.length)<=e)this.nextNodeAfterCurrent();else{var r=MH(n);-1!==r?(this.nextNodes.push(n.getChild(r)),this.offsets.push(i),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;var o=MH(n);if(-1===o)return void this.nextNodeAfterCurrent();this.nextNodes.push(n.getChild(o)),this.offsets.push(i),this.idxs.push(o)}}}},{key:"nextNodeAfterCurrent",value:function(){for(;;){var e=TH(this.offsets),t=TH(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),0===this.idxs.length)break;var n=TH(this.nextNodes),i=MH(n,this.idxs[this.idxs.length-1]);if(-1!==i){this.nextNodes.push(n.getChild(i)),this.offsets.push(GB(e,t.length)),this.idxs[this.idxs.length-1]=i;break}this.idxs.pop()}}}]),e}();function MH(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;;){if(++t>=e.childrenLength)return-1;if(e.getChild(t))return t}}function TH(e){return e.length>0?e[e.length-1]:void 0}function RH(e,t,n,i){return new AH(e,t,n,i).parseDocument()}var AH=function(){function e(t,n,i,r){if(u(this,e),this.tokenizer=t,this.createImmutableLists=r,this._itemsConstructed=0,this._itemsFromCache=0,i&&r)throw new Error("Not supported");this.oldNodeReader=i?new EH(i):void 0,this.positionMapper=new iH(n)}return h(e,[{key:"parseDocument",value:function(){this._itemsConstructed=0,this._itemsFromCache=0;var e=this.parseList(aH.getEmpty(),0);return e||(e=dH.getEmpty()),e}},{key:"parseList",value:function(e,t){for(var n=[];;){var i=this.tryReadChildFromCache(e);if(!i){var r=this.tokenizer.peek();if(!r||2===r.kind&&r.bracketIds.intersects(e))break;i=this.parseChild(e,t+1)}4===i.kind&&0===i.childrenLength||n.push(i)}var o=this.oldNodeReader?function(e){if(0===e.length)return null;if(1===e.length)return e[0];var t=0;function n(){if(t>=e.length)return null;var n=t,i=e[n].listHeight;for(t++;t<e.length&&e[t].listHeight===i;)t++;return t-n>=2?DH(0===n&&t===e.length?e:e.slice(n,t),!1):e[n]}var i=n(),r=n();if(!r)return i;for(var o=n();o;o=n())NH(i,r)<=NH(r,o)?(i=IH(i,r),r=o):r=IH(r,o);return IH(i,r)}(n):DH(n,this.createImmutableLists);return o}},{key:"tryReadChildFromCache",value:function(e){if(this.oldNodeReader){var t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(null===t||!UB(t)){var n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),(function(n){return!(null!==t&&!XB(n.length,t))&&n.canBeReused(e)}));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}},{key:"parseChild",value:function(e,t){this._itemsConstructed++;var n=this.tokenizer.read();switch(n.kind){case 2:return new bH(n.bracketIds,n.length);case 0:return n.astNode;case 1:if(t>300)return new yH(n.length);var i=e.merge(n.bracketIds),r=this.parseList(i,t+1),o=this.tokenizer.peek();return o&&2===o.kind&&(o.bracketId===n.bracketId||o.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),cH.create(n.astNode,r,o.astNode)):cH.create(n.astNode,r,null);default:throw new Error("unexpected")}}}]),e}();function PH(e,t){if(0===e.length)return t;if(0===t.length)return e;var n=new Sa(FH(e)),i=FH(t);i.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});var r=n.dequeue();function o(e){if(void 0===e){var t=n.takeWhile((function(e){return!0}))||[];return r&&t.unshift(r),t}for(var i=[];r&&!UB(e);){var o=C(r.splitAt(e),2),a=o[0],s=o[1];i.push(a),e=QB(a.lengthAfter,e),r=null!=s?s:n.dequeue()}return UB(e)||i.push(new OH(!1,e,e)),i}var a=[];function s(e,t,n){if(a.length>0&&YB(a[a.length-1].endOffset,e)){var i=a[a.length-1];a[a.length-1]=new nH(i.startOffset,t,GB(i.newLength,n))}else a.push({startOffset:e,endOffset:t,newLength:n})}var l=0,u=!0,c=!1,d=void 0;try{for(var h,f=i[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value,v=o(g.lengthBefore);if(g.modified){var p=ZB(v,(function(e){return e.lengthBefore})),m=GB(l,p);s(l,m,g.lengthAfter),l=m}else{var y=!0,_=!1,b=void 0;try{for(var k,w=v[Symbol.iterator]();!(y=(k=w.next()).done);y=!0){var S=k.value,x=l;l=GB(l,S.lengthBefore),S.modified&&s(x,l,S.lengthAfter)}}catch(e){_=!0,b=e}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}}}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}return a}var OH=function(){function e(t,n,i){u(this,e),this.modified=t,this.lengthBefore=n,this.lengthAfter=i}return h(e,[{key:"splitAt",value:function(t){var n=QB(t,this.lengthAfter);return YB(n,0)?[this,void 0]:this.modified?[new e(this.modified,this.lengthBefore,t),new e(this.modified,0,n)]:[new e(this.modified,t,t),new e(this.modified,n,n)]}},{key:"toString",value:function(){return"".concat(this.modified?"M":"U",":").concat(qB(this.lengthBefore)," -> ").concat(qB(this.lengthAfter))}}]),e}();function FH(e){var t=[],n=0,i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=QB(n,l.startOffset);UB(u)||t.push(new OH(!1,u,u));var c=QB(l.startOffset,l.endOffset);t.push(new OH(!0,c,l.newLength)),n=l.endOffset}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return t}var WH=function(e){function t(e,n){var i;if(u(this,t),(i=l(this,t)).textModel=e,i.getLanguageConfiguration=n,i.didChangeEmitter=new Zu,i.denseKeyProvider=new lH,i.brackets=new LH(i.denseKeyProvider,i.getLanguageConfiguration),i.onDidChange=i.didChangeEmitter.event,i.queuedTextEditsForInitialAstWithoutTokens=[],i.queuedTextEdits=[],e.tokenization.hasTokens)2===e.tokenization.backgroundTokenizationState?(i.initialAstWithoutTokens=void 0,i.astWithTokens=i.parseDocumentFromTextBuffer([],void 0,!1)):(i.initialAstWithoutTokens=i.parseDocumentFromTextBuffer([],void 0,!0),i.astWithTokens=i.initialAstWithoutTokens);else{var r=i.brackets.getSingleLanguageBracketTokens(i.textModel.getLanguageId()),o=new SH(i.textModel.getValue(),r);i.initialAstWithoutTokens=RH(o,[],void 0,!0),i.astWithTokens=i.initialAstWithoutTokens}return i}return p(t,e),h(t,[{key:"didLanguageChange",value:function(e){return this.brackets.didLanguageChange(e)}},{key:"handleDidChangeBackgroundTokenizationState",value:function(){if(2===this.textModel.tokenization.backgroundTokenizationState){var e=void 0===this.initialAstWithoutTokens;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}},{key:"handleDidChangeTokens",value:function(e){var t=e.ranges.map((function(e){return new nH(KB(e.fromLineNumber-1,0),KB(e.toLineNumber,0),KB(e.toLineNumber-e.fromLineNumber+1,0))}));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}},{key:"handleContentChanged",value:function(e){var t=nH.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}},{key:"handleEdits",value:function(e,t){var n=PH(this.queuedTextEdits,e);this.queuedTextEdits=n,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=PH(this.queuedTextEditsForInitialAstWithoutTokens,e))}},{key:"flushQueue",value:function(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}},{key:"parseDocumentFromTextBuffer",value:function(e,t,n){var i=t;return RH(new wH(this.textModel,this.brackets),e,i,n)}},{key:"getBracketsInRange",value:function(e,t){var n=this;this.flushQueue();var i=KB(e.startLineNumber-1,e.startColumn-1),r=KB(e.endLineNumber-1,e.endColumn-1);return new xa((function(e){var o=n.initialAstWithoutTokens||n.astWithTokens;VH(o,0,o.length,i,r,e,0,0,new Map,t)}))}},{key:"getBracketPairsInRange",value:function(e,t){var n=this;this.flushQueue();var i=eH(e.getStartPosition()),r=eH(e.getEndPosition());return new xa((function(e){var o=n.initialAstWithoutTokens||n.astWithTokens,a=new zH(e,t,n.textModel);UH(o,0,o.length,i,r,a,0,new Map)}))}},{key:"getFirstBracketAfter",value:function(e){this.flushQueue();var t=this.initialAstWithoutTokens||this.astWithTokens;return HH(t,0,t.length,eH(e))}},{key:"getFirstBracketBefore",value:function(e){this.flushQueue();var t=this.initialAstWithoutTokens||this.astWithTokens;return BH(t,0,t.length,eH(e))}}]),t}(Ru);function BH(e,t,n,i){if(4===e.kind||2===e.kind){var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=e.children[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){n=GB(t,l.value.length),r.push({nodeOffsetStart:t,nodeOffsetEnd:n}),t=n}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}for(var c=r.length-1;c>=0;c--){var d=r[c],h=d.nodeOffsetStart,f=d.nodeOffsetEnd;if(XB(h,i)){var g=BH(e.children[c],h,f,i);if(g)return g}}return null}if(3===e.kind)return null;if(1===e.kind){var v=tH(t,n);return{bracketInfo:e.bracketInfo,range:v}}return null}function HH(e,t,n,i){if(4===e.kind||2===e.kind){var r=!0,o=!1,a=void 0;try{for(var s,l=e.children[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;if(XB(i,n=GB(t,u.length))){var c=HH(u,t,n,i);if(c)return c}t=n}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return null}if(3===e.kind)return null;if(1===e.kind){var d=tH(t,n);return{bracketInfo:e.bracketInfo,range:d}}return null}function VH(e,t,n,i,r,o,a,s,l,u){var c=arguments.length>10&&void 0!==arguments[10]&&arguments[10];if(a>200)return!0;e:for(;;)switch(e.kind){case 4:for(var d=e.childrenLength,h=0;h<d;h++){var f=e.getChild(h);if(f){if(n=GB(t,f.length),$B(t,r)&&JB(n,i)){if(JB(n,r)){e=f;continue e}if(!VH(f,t,n,i,r,o,a,0,l,u))return!1}t=n}}return!0;case 2:var g=!u||!e.closingBracket||e.closingBracket.bracketInfo.closesColorized(e.openingBracket.bracketInfo),v=0;if(l){var p=l.get(e.openingBracket.text);void 0===p&&(p=0),v=p,g&&(p++,l.set(e.openingBracket.text,p))}for(var m=e.childrenLength,y=0;y<m;y++){var _=e.getChild(y);if(_){if(n=GB(t,_.length),$B(t,r)&&JB(n,i)){if(JB(n,r)&&1!==_.kind){e=_,g?(a++,s=v+1):s=v;continue e}if(g||1!==_.kind||!e.closingBracket)if(!VH(_,t,n,i,r,o,g?a+1:a,g?v+1:v,l,u,!e.closingBracket))return!1}t=n}}return null==l||l.set(e.openingBracket.text,v),!0;case 3:var b=tH(t,n);return o(new HB(b,a-1,0,!0));case 1:var k=tH(t,n);return o(new HB(k,a-1,s-1,c));case 0:return!0}}var zH=function e(t,n,i){u(this,e),this.push=t,this.includeMinIndentation=n,this.textModel=i};function UH(e,t,n,i,r,o,a,s){if(a>200)return!0;var l=!0;if(2===e.kind){var u,c=0;if(s){var d=s.get(e.openingBracket.text);void 0===d&&(d=0),c=d,d++,s.set(e.openingBracket.text,d)}var h=GB(t,e.openingBracket.length),f=-1;if(o.includeMinIndentation&&(f=e.computeMinIndentation(t,o.textModel)),l=o.push(new zB(tH(t,n),tH(t,h),e.closingBracket?tH(GB(h,(null===(u=e.child)||void 0===u?void 0:u.length)||0),n):void 0,a,c,e,f)),t=h,l&&e.child){var g=e.child;if(n=GB(t,g.length),$B(t,r)&&JB(n,i)&&!(l=UH(g,t,n,i,r,o,a+1,s)))return!1}null==s||s.set(e.openingBracket.text,c)}else{var v=t,p=!0,m=!1,y=void 0;try{for(var _,b=e.children[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){var k=_.value,w=v;if(v=GB(v,k.length),$B(w,r)&&$B(i,v)&&!(l=UH(k,w,v,i,r,o,a,s)))return!1}}catch(e){m=!0,y=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw y}}}return l}var jH=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).textModel=e,i.languageConfigurationService=n,i.bracketPairsTree=i._register(new Pu),i.onDidChangeEmitter=new Zu,i.onDidChange=i.onDidChangeEmitter.event,i.bracketsRequested=!1,i}return p(t,e),h(t,[{key:"canBuildAST",get:function(){return this.textModel.getValueLength()<=5e6}},{key:"handleLanguageConfigurationServiceChange",value:function(e){var t;e.languageId&&!(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.didLanguageChange(e.languageId))||(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}},{key:"handleDidChangeOptions",value:function(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}},{key:"handleDidChangeLanguage",value:function(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}},{key:"handleDidChangeContent",value:function(e){var t;null===(t=this.bracketPairsTree.value)||void 0===t||t.object.handleContentChanged(e)}},{key:"handleDidChangeBackgroundTokenizationState",value:function(){var e;null===(e=this.bracketPairsTree.value)||void 0===e||e.object.handleDidChangeBackgroundTokenizationState()}},{key:"handleDidChangeTokens",value:function(e){var t;null===(t=this.bracketPairsTree.value)||void 0===t||t.object.handleDidChangeTokens(e)}},{key:"updateBracketPairsTree",value:function(){var e=this;if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){var t=new Tu;this.bracketPairsTree.value=function(e,t){return{object:e,dispose:function(){return null==t?void 0:t.dispose()}}}(t.add(new WH(this.textModel,(function(t){return e.languageConfigurationService.getLanguageConfiguration(t)}))),t),t.add(this.bracketPairsTree.value.object.onDidChange((function(t){return e.onDidChangeEmitter.fire(t)}))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}},{key:"getBracketPairsInRange",value:function(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getBracketPairsInRange(e,!1))||xa.empty}},{key:"getBracketPairsInRangeWithMinIndentation",value:function(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getBracketPairsInRange(e,!0))||xa.empty}},{key:"getBracketsInRange",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getBracketsInRange(e,n))||xa.empty}},{key:"findMatchingBracketUp",value:function(e,t,n){var i=this.textModel.validatePosition(t),r=this.textModel.getLanguageIdAtPosition(i.lineNumber,i.column);if(this.canBuildAST){var o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew.getClosingBracketInfo(e);if(!o)return null;var a=this.getBracketPairsInRange(hd.fromPositions(t,t)).findLast((function(e){return o.closes(e.openingBracketInfo)}));return a?a.openingBracketRange:null}var s=e.toLowerCase(),l=this.languageConfigurationService.getLanguageConfiguration(r).brackets;if(!l)return null;var u=l.textIsBracket[s];return u?GH(this._findMatchingBracketUp(u,i,KH(n))):null}},{key:"matchBracket",value:function(e,t){if(this.canBuildAST){var n=this.getBracketPairsInRange(hd.fromPositions(e,e)).filter((function(t){return void 0!==t.closingBracketRange&&(t.openingBracketRange.containsPosition(e)||t.closingBracketRange.containsPosition(e))})).findLastMaxBy(ba((function(t){return t.openingBracketRange.containsPosition(e)?t.openingBracketRange:t.closingBracketRange}),hd.compareRangesUsingStarts));return n?[n.openingBracketRange,n.closingBracketRange]:null}var i=KH(t);return this._matchBracket(this.textModel.validatePosition(e),i)}},{key:"_establishBracketSearchOffsets",value:function(e,t,n,i){for(var r=t.getCount(),o=t.getLanguageId(i),a=Math.max(0,e.column-1-n.maxBracketLength),s=i-1;s>=0;s--){var l=t.getEndOffset(s);if(l<=a)break;if(pb(t.getStandardTokenType(s))||t.getLanguageId(s)!==o){a=l;break}}for(var u=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength),c=i+1;c<r;c++){var d=t.getStartOffset(c);if(d>=u)break;if(pb(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){u=d;break}}return{searchStartOffset:a,searchEndOffset:u}}},{key:"_matchBracket",value:function(e,t){var n=e.lineNumber,i=this.textModel.tokenization.getLineTokens(n),r=this.textModel.getLineContent(n),o=i.findTokenIndexAtOffset(e.column-1);if(o<0)return null;var a=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(o)).brackets;if(a&&!pb(i.getStandardTokenType(o))){for(var s=this._establishBracketSearchOffsets(e,i,a,o),l=s.searchStartOffset,u=s.searchEndOffset,c=null;;){var d=Vb.findNextBracketInRange(a.forwardRegex,n,r,l,u);if(!d)break;if(d.startColumn<=e.column&&e.column<=d.endColumn){var h=r.substring(d.startColumn-1,d.endColumn-1).toLowerCase(),f=this._matchFoundBracket(d,a.textIsBracket[h],a.textIsOpenBracket[h],t);if(f){if(f instanceof qH)return null;c=f}}l=d.endColumn-1}if(c)return c}if(o>0&&i.getStartOffset(o)===e.column-1){var g=o-1,v=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(g)).brackets;if(v&&!pb(i.getStandardTokenType(g))){var p=this._establishBracketSearchOffsets(e,i,v,g),m=p.searchStartOffset,y=p.searchEndOffset,_=Vb.findPrevBracketInRange(v.reversedRegex,n,r,m,y);if(_&&_.startColumn<=e.column&&e.column<=_.endColumn){var b=r.substring(_.startColumn-1,_.endColumn-1).toLowerCase(),k=this._matchFoundBracket(_,v.textIsBracket[b],v.textIsOpenBracket[b],t);if(k)return k instanceof qH?null:k}}}return null}},{key:"_matchFoundBracket",value:function(e,t,n,i){if(!t)return null;var r=n?this._findMatchingBracketDown(t,e.getEndPosition(),i):this._findMatchingBracketUp(t,e.getStartPosition(),i);return r?r instanceof qH?r:[e,r]:null}},{key:"_findMatchingBracketUp",value:function(e,t,n){for(var i=e.languageId,r=e.reversedRegex,o=-1,a=0,s=function(t,i,s,l){for(;;){if(n&&++a%100==0&&!n())return qH.INSTANCE;var u=Vb.findPrevBracketInRange(r,t,i,s,l);if(!u)break;var c=i.substring(u.startColumn-1,u.endColumn-1).toLowerCase();if(e.isOpen(c)?o++:e.isClose(c)&&o--,0===o)return u;l=u.startColumn-1}return null},l=t.lineNumber;l>=1;l--){var u=this.textModel.tokenization.getLineTokens(l),c=u.getCount(),d=this.textModel.getLineContent(l),h=c-1,f=d.length,g=d.length;l===t.lineNumber&&(h=u.findTokenIndexAtOffset(t.column-1),f=t.column-1,g=t.column-1);for(var v=!0;h>=0;h--){var p=u.getLanguageId(h)===i&&!pb(u.getStandardTokenType(h));if(p)v?f=u.getStartOffset(h):(f=u.getStartOffset(h),g=u.getEndOffset(h));else if(v&&f!==g){var m=s(l,d,f,g);if(m)return m}v=p}if(v&&f!==g){var y=s(l,d,f,g);if(y)return y}}return null}},{key:"_findMatchingBracketDown",value:function(e,t,n){for(var i=e.languageId,r=e.forwardRegex,o=1,a=0,s=function(t,i,s,l){for(;;){if(n&&++a%100==0&&!n())return qH.INSTANCE;var u=Vb.findNextBracketInRange(r,t,i,s,l);if(!u)break;var c=i.substring(u.startColumn-1,u.endColumn-1).toLowerCase();if(e.isOpen(c)?o++:e.isClose(c)&&o--,0===o)return u;s=u.endColumn-1}return null},l=this.textModel.getLineCount(),u=t.lineNumber;u<=l;u++){var c=this.textModel.tokenization.getLineTokens(u),d=c.getCount(),h=this.textModel.getLineContent(u),f=0,g=0,v=0;u===t.lineNumber&&(f=c.findTokenIndexAtOffset(t.column-1),g=t.column-1,v=t.column-1);for(var p=!0;f<d;f++){var m=c.getLanguageId(f)===i&&!pb(c.getStandardTokenType(f));if(m)p||(g=c.getStartOffset(f)),v=c.getEndOffset(f);else if(p&&g!==v){var y=s(u,h,g,v);if(y)return y}p=m}if(p&&g!==v){var _=s(u,h,g,v);if(_)return _}}return null}},{key:"findPrevBracket",value:function(e){var t,n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getFirstBracketBefore(n))||null;for(var i=null,r=null,o=null,a=n.lineNumber;a>=1;a--){var s=this.textModel.tokenization.getLineTokens(a),l=s.getCount(),u=this.textModel.getLineContent(a),c=l-1,d=u.length,h=u.length;if(a===n.lineNumber){c=s.findTokenIndexAtOffset(n.column-1),d=n.column-1,h=n.column-1;var f=s.getLanguageId(c);i!==f&&(i=f,r=this.languageConfigurationService.getLanguageConfiguration(i).brackets,o=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}for(var g=!0;c>=0;c--){var v=s.getLanguageId(c);if(i!==v){if(r&&o&&g&&d!==h){var p=Vb.findPrevBracketInRange(r.reversedRegex,a,u,d,h);if(p)return this._toFoundBracket(o,p);g=!1}i=v,r=this.languageConfigurationService.getLanguageConfiguration(i).brackets,o=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}var m=!!r&&!pb(s.getStandardTokenType(c));if(m)g?d=s.getStartOffset(c):(d=s.getStartOffset(c),h=s.getEndOffset(c));else if(o&&r&&g&&d!==h){var y=Vb.findPrevBracketInRange(r.reversedRegex,a,u,d,h);if(y)return this._toFoundBracket(o,y)}g=m}if(o&&r&&g&&d!==h){var _=Vb.findPrevBracketInRange(r.reversedRegex,a,u,d,h);if(_)return this._toFoundBracket(o,_)}}return null}},{key:"findNextBracket",value:function(e){var t,n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getFirstBracketAfter(n))||null;for(var i=this.textModel.getLineCount(),r=null,o=null,a=null,s=n.lineNumber;s<=i;s++){var l=this.textModel.tokenization.getLineTokens(s),u=l.getCount(),c=this.textModel.getLineContent(s),d=0,h=0,f=0;if(s===n.lineNumber){d=l.findTokenIndexAtOffset(n.column-1),h=n.column-1,f=n.column-1;var g=l.getLanguageId(d);r!==g&&(r=g,o=this.languageConfigurationService.getLanguageConfiguration(r).brackets,a=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew)}for(var v=!0;d<u;d++){var p=l.getLanguageId(d);if(r!==p){if(a&&o&&v&&h!==f){var m=Vb.findNextBracketInRange(o.forwardRegex,s,c,h,f);if(m)return this._toFoundBracket(a,m);v=!1}r=p,o=this.languageConfigurationService.getLanguageConfiguration(r).brackets,a=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew}var y=!!o&&!pb(l.getStandardTokenType(d));if(y)v||(h=l.getStartOffset(d)),f=l.getEndOffset(d);else if(a&&o&&v&&h!==f){var _=Vb.findNextBracketInRange(o.forwardRegex,s,c,h,f);if(_)return this._toFoundBracket(a,_)}v=y}if(a&&o&&v&&h!==f){var b=Vb.findNextBracketInRange(o.forwardRegex,s,c,h,f);if(b)return this._toFoundBracket(a,b)}}return null}},{key:"findEnclosingBrackets",value:function(e,t){var n=this,i=this.textModel.validatePosition(e);if(this.canBuildAST){var r=hd.fromPositions(i),o=this.getBracketPairsInRange(hd.fromPositions(i,i)).findLast((function(e){return void 0!==e.closingBracketRange&&e.range.strictContainsRange(r)}));return o?[o.openingBracketRange,o.closingBracketRange]:null}for(var a=KH(t),s=this.textModel.getLineCount(),l=new Map,u=[],c=function(e,t){if(!l.has(e)){for(var n=[],i=0,r=t?t.brackets.length:0;i<r;i++)n[i]=0;l.set(e,n)}u=l.get(e)},d=0,h=function(e,t,i,r,o){for(;;){if(a&&++d%100==0&&!a())return qH.INSTANCE;var s=Vb.findNextBracketInRange(e.forwardRegex,t,i,r,o);if(!s)break;var l=i.substring(s.startColumn-1,s.endColumn-1).toLowerCase(),c=e.textIsBracket[l];if(c&&(c.isOpen(l)?u[c.index]++:c.isClose(l)&&u[c.index]--,-1===u[c.index]))return n._matchFoundBracket(s,c,!1,a);r=s.endColumn-1}return null},f=null,g=null,v=i.lineNumber;v<=s;v++){var p=this.textModel.tokenization.getLineTokens(v),m=p.getCount(),y=this.textModel.getLineContent(v),_=0,b=0,k=0;if(v===i.lineNumber){_=p.findTokenIndexAtOffset(i.column-1),b=i.column-1,k=i.column-1;var w=p.getLanguageId(_);f!==w&&c(f=w,g=this.languageConfigurationService.getLanguageConfiguration(f).brackets)}for(var C=!0;_<m;_++){var S=p.getLanguageId(_);if(f!==S){if(g&&C&&b!==k){var x=h(g,v,y,b,k);if(x)return GH(x);C=!1}c(f=S,g=this.languageConfigurationService.getLanguageConfiguration(f).brackets)}var L=!!g&&!pb(p.getStandardTokenType(_));if(L)C||(b=p.getStartOffset(_)),k=p.getEndOffset(_);else if(g&&C&&b!==k){var D=h(g,v,y,b,k);if(D)return GH(D)}C=L}if(g&&C&&b!==k){var N=h(g,v,y,b,k);if(N)return GH(N)}}return null}},{key:"_toFoundBracket",value:function(e,t){if(!t)return null;var n=this.textModel.getValueInRange(t);n=n.toLowerCase();var i=e.getBracketInfo(n);return i?{range:t,bracketInfo:i}:null}}]),t}(Ru);function KH(e){if(void 0===e)return function(){return!0};var t=Date.now();return function(){return Date.now()-t<=e}}var qH=function e(){u(this,e),this._searchCanceledBrand=void 0};function GH(e){return e instanceof qH?null:e}qH.INSTANCE=new qH;var ZH=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).textModel=e,n.colorProvider=new YH,n.onDidChangeEmitter=new Zu,n.onDidChange=n.onDidChangeEmitter.event,n.colorizationOptions=e.getOptions().bracketPairColorizationOptions,n._register(e.bracketPairs.onDidChange((function(e){n.onDidChangeEmitter.fire()}))),n}return p(t,e),h(t,[{key:"handleDidChangeOptions",value:function(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}},{key:"getDecorationsInRange",value:function(e,t,n,i){var r=this;if(i)return[];if(void 0===t)return[];if(!this.colorizationOptions.enabled)return[];var o=this.textModel.bracketPairs.getBracketsInRange(e,!0).map((function(e){return{id:"bracket".concat(e.range.toString(),"-").concat(e.nestingLevel),options:{description:"BracketPairColorization",inlineClassName:r.colorProvider.getInlineClassName(e,r.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:e.range}})).toArray();return o}},{key:"getAllDecorations",value:function(e,t){return void 0===e?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new hd(1,1,this.textModel.getLineCount(),1),e,t):[]}}]),t}(Ru),YH=function(){function e(){u(this,e),this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}return h(e,[{key:"getInlineClassName",value:function(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}},{key:"getInlineClassNameOfLevel",value:function(e){return"bracket-highlighting-".concat(e%30)}}]),e}();function QH(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}VS((function(e,t){var n=[gB,vB,pB,mB,yB,_B],i=new YH;t.addRule(".monaco-editor .".concat(i.unexpectedClosingBracketClassName," { color: ").concat(e.getColor(bB),"; }"));for(var r=n.map((function(t){return e.getColor(t)})).filter((function(e){return!!e})).filter((function(e){return!e.isTransparent()})),o=0;o<30;o++){var a=r[o%r.length];t.addRule(".monaco-editor .".concat(i.getInlineClassNameOfLevel(o)," { color: ").concat(a,"; }"))}}));var XH=function(){function e(t,n,i,r){u(this,e),this.oldPosition=t,this.oldText=n,this.newPosition=i,this.newText=r}return h(e,[{key:"oldLength",get:function(){return this.oldText.length}},{key:"oldEnd",get:function(){return this.oldPosition+this.oldText.length}},{key:"newLength",get:function(){return this.newText.length}},{key:"newEnd",get:function(){return this.newPosition+this.newText.length}},{key:"toString",value:function(){return 0===this.oldText.length?"(insert@".concat(this.oldPosition,' "').concat(QH(this.newText),'")'):0===this.newText.length?"(delete@".concat(this.oldPosition,' "').concat(QH(this.oldText),'")'):"(replace@".concat(this.oldPosition,' "').concat(QH(this.oldText),'" with "').concat(QH(this.newText),'")')}},{key:"writeSize",value:function(){return 8+e._writeStringSize(this.oldText)+e._writeStringSize(this.newText)}},{key:"write",value:function(t,n){return Lb(t,this.oldPosition,n),n+=4,Lb(t,this.newPosition,n),n+=4,n=e._writeString(t,this.oldText,n),n=e._writeString(t,this.newText,n)}}],[{key:"_writeStringSize",value:function(e){return 4+2*e.length}},{key:"_writeString",value:function(e,t,n){var i=t.length;Lb(e,i,n),n+=4;for(var r=0;r<i;r++)Sb(e,t.charCodeAt(r),n),n+=2;return n}},{key:"_readString",value:function(e,t){var n=xb(e,t);return Mb(e,t+=4,n)}},{key:"read",value:function(t,n,i){var r=xb(t,n),o=xb(t,n+=4);n+=4;var a=e._readString(t,n);n+=e._writeStringSize(a);var s=e._readString(t,n);return n+=e._writeStringSize(s),i.push(new e(r,a,o,s)),n}}]),e}();var $H=function(){function e(t,n){u(this,e),this._prevEdits=t,this._currEdits=n,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}return h(e,[{key:"compress",value:function(){for(var t=0,n=0,i=this._getPrev(t),r=this._getCurr(n);t<this._prevLen||n<this._currLen;)if(null!==i)if(null!==r)if(r.oldEnd<=i.newPosition)this._acceptCurr(r),r=this._getCurr(++n);else if(i.newEnd<=r.oldPosition)this._acceptPrev(i),i=this._getPrev(++t);else if(r.oldPosition<i.newPosition){var o=C(e._splitCurr(r,i.newPosition-r.oldPosition),2),a=o[0],s=o[1];this._acceptCurr(a),r=s}else if(i.newPosition<r.oldPosition){var l=C(e._splitPrev(i,r.oldPosition-i.newPosition),2),u=l[0],c=l[1];this._acceptPrev(u),i=c}else{var d=void 0,h=void 0;if(r.oldEnd===i.newEnd)d=i,h=r,i=this._getPrev(++t),r=this._getCurr(++n);else if(r.oldEnd<i.newEnd){var f=C(e._splitPrev(i,r.oldLength),2);d=f[0],h=r,i=f[1],r=this._getCurr(++n)}else{var g=C(e._splitCurr(r,i.newLength),2),v=g[0],p=g[1];d=i,h=v,i=this._getPrev(++t),r=p}this._result[this._resultLen++]=new XH(d.oldPosition,d.oldText,h.newPosition,h.newText),this._prevDeltaOffset+=d.newLength-d.oldLength,this._currDeltaOffset+=h.newLength-h.oldLength}else this._acceptPrev(i),i=this._getPrev(++t);else this._acceptCurr(r),r=this._getCurr(++n);var m=e._merge(this._result);return e._removeNoOps(m)}},{key:"_acceptCurr",value:function(t){this._result[this._resultLen++]=e._rebaseCurr(this._prevDeltaOffset,t),this._currDeltaOffset+=t.newLength-t.oldLength}},{key:"_getCurr",value:function(e){return e<this._currLen?this._currEdits[e]:null}},{key:"_acceptPrev",value:function(t){this._result[this._resultLen++]=e._rebasePrev(this._currDeltaOffset,t),this._prevDeltaOffset+=t.newLength-t.oldLength}},{key:"_getPrev",value:function(e){return e<this._prevLen?this._prevEdits[e]:null}}],[{key:"_rebaseCurr",value:function(e,t){return new XH(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}},{key:"_rebasePrev",value:function(e,t){return new XH(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}},{key:"_splitPrev",value:function(e,t){var n=e.newText.substr(0,t),i=e.newText.substr(t);return[new XH(e.oldPosition,e.oldText,e.newPosition,n),new XH(e.oldEnd,"",e.newPosition+t,i)]}},{key:"_splitCurr",value:function(e,t){var n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new XH(e.oldPosition,n,e.newPosition,e.newText),new XH(e.oldPosition+t,i,e.newEnd,"")]}},{key:"_merge",value:function(e){if(0===e.length)return e;for(var t=[],n=0,i=e[0],r=1;r<e.length;r++){var o=e[r];i.oldEnd===o.oldPosition?i=new XH(i.oldPosition,i.oldText+o.oldText,i.newPosition,i.newText+o.newText):(t[n++]=i,i=o)}return t[n++]=i,t}},{key:"_removeNoOps",value:function(e){if(0===e.length)return e;for(var t=[],n=0,i=0;i<e.length;i++){var r=e[i];r.oldText!==r.newText&&(t[n++]=r)}return t}}]),e}();function JH(e){return e.toString()}var eV=function(){function e(t,n,i,r,o,a,s){u(this,e),this.beforeVersionId=t,this.afterVersionId=n,this.beforeEOL=i,this.afterEOL=r,this.beforeCursorState=o,this.afterCursorState=a,this.changes=s}return h(e,[{key:"append",value:function(e,t,n,i,r){t.length>0&&(this.changes=function(e,t){return null===e||0===e.length?t:new $H(e,t).compress()}(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=r}},{key:"serialize",value:function(){var t=10+e._writeSelectionsSize(this.beforeCursorState)+e._writeSelectionsSize(this.afterCursorState)+4,n=!0,i=!1,r=void 0;try{for(var o,a=this.changes[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){t+=o.value.writeSize()}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}var s=new Uint8Array(t),l=0;Lb(s,this.beforeVersionId,l),l+=4,Lb(s,this.afterVersionId,l),l+=4,Nb(s,this.beforeEOL,l),l+=1,Nb(s,this.afterEOL,l),l+=1,l=e._writeSelections(s,this.beforeCursorState,l),l=e._writeSelections(s,this.afterCursorState,l),Lb(s,this.changes.length,l),l+=4;var u=!0,c=!1,d=void 0;try{for(var h,f=this.changes[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){l=h.value.write(s,l)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}return s.buffer}}],[{key:"create",value:function(t,n){var i=t.getAlternativeVersionId(),r=iV(t);return new e(i,i,r,r,n,n,[])}},{key:"_writeSelectionsSize",value:function(e){return 4+16*(e?e.length:0)}},{key:"_writeSelections",value:function(e,t,n){if(Lb(e,t?t.length:0,n),n+=4,t){var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;Lb(e,l.selectionStartLineNumber,n),n+=4,Lb(e,l.selectionStartColumn,n),n+=4,Lb(e,l.positionLineNumber,n),n+=4,Lb(e,l.positionColumn,n),n+=4}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}return n}},{key:"_readSelections",value:function(e,t,n){var i=xb(e,t);t+=4;for(var r=0;r<i;r++){var o=xb(e,t),a=xb(e,t+=4),s=xb(e,t+=4),l=xb(e,t+=4);t+=4,n.push(new fd(o,a,s,l))}return t}},{key:"deserialize",value:function(t){var n=new Uint8Array(t),i=0,r=xb(n,i),o=xb(n,i+=4),a=Db(n,i+=4),s=Db(n,i+=1);i+=1;var l=[];i=e._readSelections(n,i,l);var u=[],c=xb(n,i=e._readSelections(n,i,u));i+=4;for(var d=[],h=0;h<c;h++)i=XH.read(n,i,d);return new e(r,o,a,s,l,u,d)}}]),e}(),tV=function(){function e(t,n,i,r){u(this,e),this.label=t,this.code=n,this.model=i,this._data=eV.create(i,r)}return h(e,[{key:"type",get:function(){return 0}},{key:"resource",get:function(){return ed.isUri(this.model)?this.model:this.model.uri}},{key:"toString",value:function(){var e=this._data instanceof eV?this._data:eV.deserialize(this._data);return e.changes.map((function(e){return e.toString()})).join(", ")}},{key:"matchesResource",value:function(e){return(ed.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}},{key:"setModel",value:function(e){this.model=e}},{key:"canAppend",value:function(e){return this.model===e&&this._data instanceof eV}},{key:"append",value:function(e,t,n,i,r){this._data instanceof eV&&this._data.append(e,t,n,i,r)}},{key:"close",value:function(){this._data instanceof eV&&(this._data=this._data.serialize())}},{key:"open",value:function(){this._data instanceof eV||(this._data=eV.deserialize(this._data))}},{key:"undo",value:function(){if(ed.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof eV&&(this._data=this._data.serialize());var e=eV.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}},{key:"redo",value:function(){if(ed.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof eV&&(this._data=this._data.serialize());var e=eV.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}},{key:"heapSize",value:function(){return this._data instanceof eV&&(this._data=this._data.serialize()),this._data.byteLength+168}}]),e}(),nV=function(){function e(t,n,i){u(this,e),this.label=t,this.code=n,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;var r=!0,o=!1,a=void 0;try{for(var s,l=this._editStackElementsArr[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value,d=JH(c.resource);this._editStackElementsMap.set(d,c)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}this._delegate=null}return h(e,[{key:"resources",get:function(){return this._editStackElementsArr.map((function(e){return e.resource}))}},{key:"prepareUndoRedo",value:function(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}},{key:"matchesResource",value:function(e){var t=JH(e);return this._editStackElementsMap.has(t)}},{key:"setModel",value:function(e){var t=JH(ed.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}},{key:"canAppend",value:function(e){if(!this._isOpen)return!1;var t=JH(e.uri);return!!this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).canAppend(e)}},{key:"append",value:function(e,t,n,i,r){var o=JH(e.uri);this._editStackElementsMap.get(o).append(e,t,n,i,r)}},{key:"close",value:function(){this._isOpen=!1}},{key:"open",value:function(){}},{key:"undo",value:function(){this._isOpen=!1;var e=!0,t=!1,n=void 0;try{for(var i,r=this._editStackElementsArr[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.undo()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"redo",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this._editStackElementsArr[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.redo()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"heapSize",value:function(e){var t=JH(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}},{key:"split",value:function(){return this._editStackElementsArr}},{key:"toString",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this._editStackElementsArr[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;e.push("".concat(YM(a.resource),": ").concat(a))}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return"{".concat(e.join(", "),"}")}}]),e}();function iV(e){return"\n"===e.getEOL()?0:1}function rV(e){return!!e&&(e instanceof tV||e instanceof nV)}var oV,aV=function(){function e(t,n){u(this,e),this._model=t,this._undoRedoService=n}return h(e,[{key:"pushStackElement",value:function(){var e=this._undoRedoService.getLastElement(this._model.uri);rV(e)&&e.close()}},{key:"popStackElement",value:function(){var e=this._undoRedoService.getLastElement(this._model.uri);rV(e)&&e.open()}},{key:"clear",value:function(){this._undoRedoService.removeElements(this._model.uri)}},{key:"_getOrCreateEditStackElement",value:function(e,t){var n=this._undoRedoService.getLastElement(this._model.uri);if(rV(n)&&n.canAppend(this._model))return n;var i=new tV(Xa("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(i,t),i}},{key:"pushEOL",value:function(e){var t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],iV(this._model),this._model.getAlternativeVersionId(),null)}},{key:"pushEditOperation",value:function(t,n,i,r){var o=this._getOrCreateEditStackElement(t,r),a=this._model.applyEdits(n,!0),s=e._computeCursorState(i,a),l=a.map((function(e,t){return{index:t,textChange:e.textChange}}));return l.sort((function(e,t){return e.textChange.oldPosition===t.textChange.oldPosition?e.index-t.index:e.textChange.oldPosition-t.textChange.oldPosition})),o.append(this._model,l.map((function(e){return e.textChange})),iV(this._model),this._model.getAlternativeVersionId(),s),s}}],[{key:"_computeCursorState",value:function(e,t){try{return e?e(t):null}catch(e){return vu(e),null}}}]),e}(),sV=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments))._isDisposed=!1,e}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._isDisposed=!0}},{key:"assertNotDisposed",value:function(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}]),t}(Ru);function lV(e,t){for(var n=0,i=0,r=e.length;i<r;){var o=e.charCodeAt(i);if(32===o)n++;else{if(9!==o)break;n=n-n%t+t}i++}return i===r?-1:n}!function(e){e[e.Disabled=0]="Disabled",e[e.EnabledForActive=1]="EnabledForActive",e[e.Enabled=2]="Enabled"}(oV||(oV={}));var uV=function e(t,n,i,r,o,a){if(u(this,e),this.visibleColumn=t,this.column=n,this.className=i,this.horizontalLine=r,this.forWrappedLinesAfterColumn=o,this.forWrappedLinesBeforeOrAtColumn=a,-1!==t==(-1!==n))throw new Error},cV=function e(t,n){u(this,e),this.top=t,this.endColumn=n},dV=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).textModel=e,i.languageConfigurationService=n,i}return p(t,e),h(t,[{key:"getLanguageConfiguration",value:function(e){return this.languageConfigurationService.getLanguageConfiguration(e)}},{key:"_computeIndentLevel",value:function(e){return lV(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}},{key:"getActiveIndentGuide",value:function(e,t,n){var i=this;this.assertNotDisposed();var r=this.textModel.getLineCount();if(e<1||e>r)throw new Lu("Illegal value for lineNumber");for(var o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,a=Boolean(o&&o.offSide),s=-2,l=-1,u=-2,c=-1,d=function(e){if(-1!==s&&(-2===s||s>e-1)){s=-1,l=-1;for(var t=e-2;t>=0;t--){var n=i._computeIndentLevel(t);if(n>=0){s=t,l=n;break}}}if(-2===u){u=-1,c=-1;for(var o=e;o<r;o++){var a=i._computeIndentLevel(o);if(a>=0){u=o,c=a;break}}}},h=-2,f=-1,g=-2,v=-1,p=function(e){if(-2===h){h=-1,f=-1;for(var t=e-2;t>=0;t--){var n=i._computeIndentLevel(t);if(n>=0){h=t,f=n;break}}}if(-1!==g&&(-2===g||g<e-1)){g=-1,v=-1;for(var o=e;o<r;o++){var a=i._computeIndentLevel(o);if(a>=0){g=o,v=a;break}}}},m=0,y=!0,_=0,b=!0,k=0,w=0,C=0;y||b;C++){var S=e-C,x=e+C;C>1&&(S<1||S<t)&&(y=!1),C>1&&(x>r||x>n)&&(b=!1),C>5e4&&(y=!1,b=!1);var L=-1;if(y&&S>=1){var D=this._computeIndentLevel(S-1);D>=0?(u=S-1,c=D,L=Math.ceil(D/this.textModel.getOptions().indentSize)):(d(S),L=this._getIndentLevelForWhitespaceLine(a,l,c))}var N=-1;if(b&&x<=r){var I=this._computeIndentLevel(x-1);I>=0?(h=x-1,f=I,N=Math.ceil(I/this.textModel.getOptions().indentSize)):(p(x),N=this._getIndentLevelForWhitespaceLine(a,f,v))}if(0!==C){if(1===C){if(x<=r&&N>=0&&w+1===N){y=!1,m=x,_=x,k=N;continue}if(S>=1&&L>=0&&L-1===w){b=!1,m=S,_=S,k=L;continue}if(m=e,_=e,0===(k=w))return{startLineNumber:m,endLineNumber:_,indent:k}}y&&(L>=k?m=S:y=!1),b&&(N>=k?_=x:b=!1)}else w=L}return{startLineNumber:m,endLineNumber:_,indent:k}}},{key:"getLinesBracketGuides",value:function(e,t,n,i){for(var r=[],o=e;o<=t;o++)r.push([]);var a,s=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new hd(e,1,t,this.textModel.getLineMaxColumn(t))).toArray(),l=void 0;n&&s.length>0&&(l=null===(a=Vw((e<=n.lineNumber&&n.lineNumber<=t?s:this.textModel.bracketPairs.getBracketPairsInRange(hd.fromPositions(n)).toArray()).filter((function(e){return hd.strictContainsPosition(e.range,n)})),(function(e){return true})))||void 0===a?void 0:a.range);var u=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,c=new hV,d=!0,h=!1,f=void 0;try{for(var g,v=s[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;if(p.closingBracketRange){var m=l&&p.range.equalsRange(l);if(m||i.includeInactive){var y=c.getInlineClassName(p.nestingLevel,p.nestingLevelOfEqualBracketType,u)+(i.highlightActive&&m?" "+c.activeClassName:""),_=p.openingBracketRange.getStartPosition(),b=p.closingBracketRange.getStartPosition(),k=i.horizontalGuides===oV.Enabled||i.horizontalGuides===oV.EnabledForActive&&m;if(p.range.startLineNumber!==p.range.endLineNumber){var w=this.getVisibleColumnFromPosition(b),C=this.getVisibleColumnFromPosition(p.openingBracketRange.getStartPosition()),S=Math.min(C,w,p.minVisibleColumnIndentation+1),x=!1;$h(this.textModel.getLineContent(p.closingBracketRange.startLineNumber))<p.closingBracketRange.startColumn-1&&(x=!0);for(var L=Math.max(_.lineNumber,e),D=Math.min(b.lineNumber,t),N=x?1:0,I=L;I<D+N;I++)r[I-e].push(new uV(S,-1,y,null,I===_.lineNumber?_.column:-1,I===b.lineNumber?b.column:-1));k&&(_.lineNumber>=e&&C>S&&r[_.lineNumber-e].push(new uV(S,-1,y,new cV(!1,_.column),-1,-1)),b.lineNumber<=t&&w>S&&r[b.lineNumber-e].push(new uV(S,-1,y,new cV(!x,b.column),-1,-1)))}else k&&r[p.range.startLineNumber-e].push(new uV(-1,p.openingBracketRange.getEndPosition().column,y,new cV(!1,b.column),-1,-1))}}}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}var E=!0,M=!1,T=void 0;try{for(var R,A=r[Symbol.iterator]();!(E=(R=A.next()).done);E=!0){R.value.sort((function(e,t){return e.visibleColumn-t.visibleColumn}))}}catch(e){M=!0,T=e}finally{try{E||null==A.return||A.return()}finally{if(M)throw T}}return r}},{key:"getVisibleColumnFromPosition",value:function(e){return WB.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}},{key:"getLinesIndentGuides",value:function(e,t){this.assertNotDisposed();var n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");for(var i=this.textModel.getOptions(),r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=Boolean(r&&r.offSide),a=new Array(t-e+1),s=-2,l=-1,u=-2,c=-1,d=e;d<=t;d++){var h=d-e,f=this._computeIndentLevel(d-1);if(f>=0)s=d-1,l=f,a[h]=Math.ceil(f/i.indentSize);else{if(-2===s){s=-1,l=-1;for(var g=d-2;g>=0;g--){var v=this._computeIndentLevel(g);if(v>=0){s=g,l=v;break}}}if(-1!==u&&(-2===u||u<d-1)){u=-1,c=-1;for(var p=d;p<n;p++){var m=this._computeIndentLevel(p);if(m>=0){u=p,c=m;break}}}a[h]=this._getIndentLevelForWhitespaceLine(o,l,c)}}return a}},{key:"_getIndentLevelForWhitespaceLine",value:function(e,t,n){var i=this.textModel.getOptions();return-1===t||-1===n?0:t<n?1+Math.floor(t/i.indentSize):t===n||e?Math.ceil(n/i.indentSize):1+Math.floor(n/i.indentSize)}}]),t}(sV),hV=function(){function e(){u(this,e),this.activeClassName="indent-active"}return h(e,[{key:"getInlineClassName",value:function(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}},{key:"getInlineClassNameOfLevel",value:function(e){return"bracket-indent-guide lvl-".concat(e%30)}}]),e}(),fV=function e(){u(this,e),this.spacesDiff=0,this.looksLikeAlignment=!1};function gV(e,t,n,i,r){var o;for(r.spacesDiff=0,r.looksLikeAlignment=!1,o=0;o<t&&o<i;o++){if(e.charCodeAt(o)!==n.charCodeAt(o))break}for(var a=0,s=0,l=o;l<t;l++){32===e.charCodeAt(l)?a++:s++}for(var u=0,c=0,d=o;d<i;d++){32===n.charCodeAt(d)?u++:c++}if(!(a>0&&s>0||u>0&&c>0)){var h=Math.abs(s-c),f=Math.abs(a-u);if(0===h)return r.spacesDiff=f,void(f>0&&0<=u-1&&u-1<e.length&&u<n.length&&32!==n.charCodeAt(u)&&32===e.charCodeAt(u-1)&&44===e.charCodeAt(e.length-1)&&(r.looksLikeAlignment=!0));f%h!=0||(r.spacesDiff=f/h)}}function vV(e,t,n){for(var i=Math.min(e.getLineCount(),1e4),r=0,o=0,a="",s=0,l=[0,0,0,0,0,0,0,0,0],u=new fV,c=1;c<=i;c++){for(var d=e.getLineLength(c),h=e.getLineContent(c),f=d<=65536,g=!1,v=0,p=0,m=0,y=0,_=d;y<_;y++){var b=f?h.charCodeAt(y):e.getLineCharCode(c,y);if(9===b)m++;else{if(32!==b){g=!0,v=y;break}p++}}if(g&&(m>0?r++:p>1&&o++,gV(a,s,h,v,u),!u.looksLikeAlignment||n&&t===u.spacesDiff)){var k=u.spacesDiff;k<=8&&l[k]++,a=h,s=v}}var w=n;r!==o&&(w=r<o);var C=t;if(w){var S=w?0:.1*i;[2,4,6,8,3,5,7].forEach((function(e){var t=l[e];t>S&&(S=t,C=e)})),4===C&&l[4]>0&&l[2]>0&&l[2]>=l[4]/2&&(C=2)}return{insertSpaces:w,tabSize:C}}function pV(e){return(1&e.metadata)>>>0}function mV(e,t){e.metadata=254&e.metadata|t}function yV(e){return(2&e.metadata)>>>1==1}function _V(e,t){e.metadata=253&e.metadata|(t?1:0)<<1}function bV(e){return(4&e.metadata)>>>2==1}function kV(e,t){e.metadata=251&e.metadata|(t?1:0)<<2}function wV(e){return(64&e.metadata)>>>6==1}function CV(e,t){e.metadata=191&e.metadata|(t?1:0)<<6}function SV(e,t){e.metadata=231&e.metadata|t<<3}function xV(e,t){e.metadata=223&e.metadata|(t?1:0)<<5}var LV=function(){function e(t,n,i){u(this,e),this.metadata=0,this.parent=this,this.left=this,this.right=this,mV(this,1),this.start=n,this.end=i,this.delta=0,this.maxEnd=i,this.id=t,this.ownerId=0,this.options=null,kV(this,!1),CV(this,!1),SV(this,1),xV(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=n,this.cachedAbsoluteEnd=i,this.range=null,_V(this,!1)}return h(e,[{key:"reset",value:function(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}},{key:"setOptions",value:function(e){this.options=e;var t=this.options.className;kV(this,"squiggly-error"===t||"squiggly-warning"===t||"squiggly-info"===t),CV(this,null!==this.options.glyphMarginClassName),SV(this,this.options.stickiness),xV(this,this.options.collapseOnReplaceEdit)}},{key:"setCachedOffsets",value:function(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}},{key:"detach",value:function(){this.parent=null,this.left=null,this.right=null}}]),e}(),DV=new LV(null,0,0);DV.parent=DV,DV.left=DV,DV.right=DV,mV(DV,0);var NV=function(){function e(){u(this,e),this.root=DV,this.requestNormalizeDelta=!1}return h(e,[{key:"intervalSearch",value:function(e,t,n,i,r,o){return this.root===DV?[]:function(e,t,n,i,r,o,a){var s=e.root,l=0,u=0,c=0,d=[],h=0;for(;s!==DV;)if(yV(s))_V(s.left,!1),_V(s.right,!1),s===s.parent.right&&(l-=s.parent.delta),s=s.parent;else{if(!yV(s.left)){if(l+s.maxEnd<t){_V(s,!0);continue}if(s.left!==DV){s=s.left;continue}}if((u=l+s.start)>n)_V(s,!0);else{if((c=l+s.end)>=t){s.setCachedOffsets(u,c,o);var f=!0;i&&s.ownerId&&s.ownerId!==i&&(f=!1),r&&bV(s)&&(f=!1),a&&!wV(s)&&(f=!1),f&&(d[h++]=s)}_V(s,!0),s.right===DV||yV(s.right)||(l+=s.delta,s=s.right)}}return _V(e.root,!1),d}(this,e,t,n,i,r,o)}},{key:"search",value:function(e,t,n,i){return this.root===DV?[]:function(e,t,n,i,r){var o=e.root,a=0,s=0,l=0,u=[],c=0;for(;o!==DV;)if(yV(o))_V(o.left,!1),_V(o.right,!1),o===o.parent.right&&(a-=o.parent.delta),o=o.parent;else if(o.left===DV||yV(o.left)){s=a+o.start,l=a+o.end,o.setCachedOffsets(s,l,i);var d=!0;t&&o.ownerId&&o.ownerId!==t&&(d=!1),n&&bV(o)&&(d=!1),r&&!wV(o)&&(d=!1),d&&(u[c++]=o),_V(o,!0),o.right===DV||yV(o.right)||(a+=o.delta,o=o.right)}else o=o.left;return _V(e.root,!1),u}(this,e,t,n,i)}},{key:"collectNodesFromOwner",value:function(e){return function(e,t){var n=e.root,i=[],r=0;for(;n!==DV;)yV(n)?(_V(n.left,!1),_V(n.right,!1),n=n.parent):n.left===DV||yV(n.left)?(n.ownerId===t&&(i[r++]=n),_V(n,!0),n.right===DV||yV(n.right)||(n=n.right)):n=n.left;return _V(e.root,!1),i}(this,e)}},{key:"collectNodesPostOrder",value:function(){return function(e){var t=e.root,n=[],i=0;for(;t!==DV;)yV(t)?(_V(t.left,!1),_V(t.right,!1),t=t.parent):t.left===DV||yV(t.left)?t.right===DV||yV(t.right)?(n[i++]=t,_V(t,!0)):t=t.right:t=t.left;return _V(e.root,!1),n}(this)}},{key:"insert",value:function(e){MV(this,e),this._normalizeDeltaIfNecessary()}},{key:"delete",value:function(e){TV(this,e),this._normalizeDeltaIfNecessary()}},{key:"resolveNode",value:function(e,t){for(var n=e,i=0;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;var r=n.start+i,o=n.end+i;n.setCachedOffsets(r,o,t)}},{key:"acceptReplace",value:function(e,t,n,i){for(var r=function(e,t,n){var i=e.root,r=0,o=0,a=0,s=[],l=0;for(;i!==DV;)if(yV(i))_V(i.left,!1),_V(i.right,!1),i===i.parent.right&&(r-=i.parent.delta),i=i.parent;else{if(!yV(i.left)){if(r+i.maxEnd<t){_V(i,!0);continue}if(i.left!==DV){i=i.left;continue}}(o=r+i.start)>n?_V(i,!0):((a=r+i.end)>=t&&(i.setCachedOffsets(o,a,0),s[l++]=i),_V(i,!0),i.right===DV||yV(i.right)||(r+=i.delta,i=i.right))}return _V(e.root,!1),s}(this,e,e+t),o=0,a=r.length;o<a;o++){TV(this,r[o])}this._normalizeDeltaIfNecessary(),function(e,t,n,i){var r=e.root,o=0,a=i-(n-t);for(;r!==DV;)if(yV(r))_V(r.left,!1),_V(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),FV(r),r=r.parent;else{if(!yV(r.left)){if(o+r.maxEnd<t){_V(r,!0);continue}if(r.left!==DV){r=r.left;continue}}o+r.start>n?(r.start+=a,r.end+=a,r.delta+=a,(r.delta<-1073741824||r.delta>1073741824)&&(e.requestNormalizeDelta=!0),_V(r,!0)):(_V(r,!0),r.right===DV||yV(r.right)||(o+=r.delta,r=r.right))}_V(e.root,!1)}(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(var s=0,l=r.length;s<l;s++){var u=r[s];u.start=u.cachedAbsoluteStart,u.end=u.cachedAbsoluteEnd,EV(u,e,e+t,n,i),u.maxEnd=u.end,MV(this,u)}this._normalizeDeltaIfNecessary()}},{key:"_normalizeDeltaIfNecessary",value:function(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,function(e){var t=e.root,n=0;for(;t!==DV;)t.left===DV||yV(t.left)?t.right===DV||yV(t.right)?(t.start=n+t.start,t.end=n+t.end,t.delta=0,FV(t),_V(t,!0),_V(t.left,!1),_V(t.right,!1),t===t.parent.right&&(n-=t.parent.delta),t=t.parent):(n+=t.delta,t=t.right):t=t.left;_V(e.root,!1)}(this))}}]),e}();function IV(e,t,n,i){return e<n||!(e>n)&&(1!==i&&(2===i||t))}function EV(e,t,n,i,r){var o=function(e){return(24&e.metadata)>>>3}(e),a=0===o||2===o,s=1===o||2===o,l=n-t,u=i,c=Math.min(l,u),d=e.start,h=!1,f=e.end,g=!1;t<=d&&f<=n&&function(e){return(32&e.metadata)>>>5==1}(e)&&(e.start=t,h=!0,e.end=t,g=!0);var v=r?1:l>0?2:0;if(!h&&IV(d,a,t,v)&&(h=!0),!g&&IV(f,s,t,v)&&(g=!0),c>0&&!r){var p=l>u?2:0;!h&&IV(d,a,t+c,p)&&(h=!0),!g&&IV(f,s,t+c,p)&&(g=!0)}var m=r?1:0;!h&&IV(d,a,n,m)&&(e.start=t+u,h=!0),!g&&IV(f,s,n,m)&&(e.end=t+u,g=!0);var y=u-l;h||(e.start=Math.max(0,d+y)),g||(e.end=Math.max(0,f+y)),e.start>e.end&&(e.end=e.start)}function MV(e,t){if(e.root===DV)return t.parent=DV,t.left=DV,t.right=DV,mV(t,0),e.root=t,e.root;!function(e,t){var n=0,i=e.root,r=t.start,o=t.end;for(;;){if(BV(r,o,i.start+n,i.end+n)<0){if(i.left===DV){t.start-=n,t.end-=n,t.maxEnd-=n,i.left=t;break}i=i.left}else{if(i.right===DV){t.start-=n+i.delta,t.end-=n+i.delta,t.maxEnd-=n+i.delta,i.right=t;break}n+=i.delta,i=i.right}}t.parent=i,t.left=DV,t.right=DV,mV(t,1)}(e,t),WV(t.parent);for(var n=t;n!==e.root&&1===pV(n.parent);)if(n.parent===n.parent.parent.left){var i=n.parent.parent.right;1===pV(i)?(mV(n.parent,0),mV(i,0),mV(n.parent.parent,1),n=n.parent.parent):(n===n.parent.right&&AV(e,n=n.parent),mV(n.parent,0),mV(n.parent.parent,1),PV(e,n.parent.parent))}else{var r=n.parent.parent.left;1===pV(r)?(mV(n.parent,0),mV(r,0),mV(n.parent.parent,1),n=n.parent.parent):(n===n.parent.left&&PV(e,n=n.parent),mV(n.parent,0),mV(n.parent.parent,1),AV(e,n.parent.parent))}return mV(e.root,0),t}function TV(e,t){var n,i;if(t.left===DV?(i=t,(n=t.right).delta+=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta):t.right===DV?(n=t.left,i=t):(i=function(e){for(;e.left!==DV;)e=e.left;return e}(t.right),(n=i.right).start+=i.delta,n.end+=i.delta,n.delta+=i.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),i.start+=t.delta,i.end+=t.delta,i.delta=t.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0)),i===e.root)return e.root=n,mV(n,0),t.detach(),RV(),FV(n),void(e.root.parent=DV);var r,o=1===pV(i);if(i===i.parent.left?i.parent.left=n:i.parent.right=n,i===t?n.parent=i.parent:(i.parent===t?n.parent=i:n.parent=i.parent,i.left=t.left,i.right=t.right,i.parent=t.parent,mV(i,pV(t)),t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==DV&&(i.left.parent=i),i.right!==DV&&(i.right.parent=i)),t.detach(),o)return WV(n.parent),i!==t&&(WV(i),WV(i.parent)),void RV();for(WV(n),WV(n.parent),i!==t&&(WV(i),WV(i.parent));n!==e.root&&0===pV(n);)n===n.parent.left?(1===pV(r=n.parent.right)&&(mV(r,0),mV(n.parent,1),AV(e,n.parent),r=n.parent.right),0===pV(r.left)&&0===pV(r.right)?(mV(r,1),n=n.parent):(0===pV(r.right)&&(mV(r.left,0),mV(r,1),PV(e,r),r=n.parent.right),mV(r,pV(n.parent)),mV(n.parent,0),mV(r.right,0),AV(e,n.parent),n=e.root)):(1===pV(r=n.parent.left)&&(mV(r,0),mV(n.parent,1),PV(e,n.parent),r=n.parent.left),0===pV(r.left)&&0===pV(r.right)?(mV(r,1),n=n.parent):(0===pV(r.left)&&(mV(r.right,0),mV(r,1),AV(e,r),r=n.parent.left),mV(r,pV(n.parent)),mV(n.parent,0),mV(r.left,0),PV(e,n.parent),n=e.root));mV(n,0),RV()}function RV(){DV.parent=DV,DV.delta=0,DV.start=0,DV.end=0}function AV(e,t){var n=t.right;n.delta+=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta,t.right=n.left,n.left!==DV&&(n.left.parent=t),n.parent=t.parent,t.parent===DV?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n,FV(t),FV(n)}function PV(e,t){var n=t.left;t.delta-=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(e.requestNormalizeDelta=!0),t.start-=n.delta,t.end-=n.delta,t.left=n.right,n.right!==DV&&(n.right.parent=t),n.parent=t.parent,t.parent===DV?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n,FV(t),FV(n)}function OV(e){var t=e.end;if(e.left!==DV){var n=e.left.maxEnd;n>t&&(t=n)}if(e.right!==DV){var i=e.right.maxEnd+e.delta;i>t&&(t=i)}return t}function FV(e){e.maxEnd=OV(e)}function WV(e){for(;e!==DV;){var t=OV(e);if(e.maxEnd===t)return;e.maxEnd=t,e=e.parent}}function BV(e,t,n,i){return e===n?t-i:e-n}var HV=function(){function e(t,n){u(this,e),this.piece=t,this.color=n,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}return h(e,[{key:"next",value:function(){if(this.right!==VV)return zV(this.right);for(var e=this;e.parent!==VV&&e.parent.left!==e;)e=e.parent;return e.parent===VV?VV:e.parent}},{key:"prev",value:function(){if(this.left!==VV)return UV(this.left);for(var e=this;e.parent!==VV&&e.parent.right!==e;)e=e.parent;return e.parent===VV?VV:e.parent}},{key:"detach",value:function(){this.parent=null,this.left=null,this.right=null}}]),e}(),VV=new HV(null,0);function zV(e){for(;e.left!==VV;)e=e.left;return e}function UV(e){for(;e.right!==VV;)e=e.right;return e}function jV(e){return e===VV?0:e.size_left+e.piece.length+jV(e.right)}function KV(e){return e===VV?0:e.lf_left+e.piece.lineFeedCnt+KV(e.right)}function qV(){VV.parent=VV}function GV(e,t){var n=t.right;n.size_left+=t.size_left+(t.piece?t.piece.length:0),n.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=n.left,n.left!==VV&&(n.left.parent=t),n.parent=t.parent,t.parent===VV?e.root=n:t.parent.left===t?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n}function ZV(e,t){var n=t.left;t.left=n.right,n.right!==VV&&(n.right.parent=t),n.parent=t.parent,t.size_left-=n.size_left+(n.piece?n.piece.length:0),t.lf_left-=n.lf_left+(n.piece?n.piece.lineFeedCnt:0),t.parent===VV?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n}function YV(e,t){var n,i;if(n=t.left===VV?(i=t).right:t.right===VV?(i=t).left:(i=zV(t.right)).right,i===e.root)return e.root=n,n.color=0,t.detach(),qV(),void(e.root.parent=VV);var r=1===i.color;if(i===i.parent.left?i.parent.left=n:i.parent.right=n,i===t?(n.parent=i.parent,$V(e,n)):(i.parent===t?n.parent=i:n.parent=i.parent,$V(e,n),i.left=t.left,i.right=t.right,i.parent=t.parent,i.color=t.color,t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==VV&&(i.left.parent=i),i.right!==VV&&(i.right.parent=i),i.size_left=t.size_left,i.lf_left=t.lf_left,$V(e,i)),t.detach(),n.parent.left===n){var o=jV(n),a=KV(n);if(o!==n.parent.size_left||a!==n.parent.lf_left){var s=o-n.parent.size_left,l=a-n.parent.lf_left;n.parent.size_left=o,n.parent.lf_left=a,XV(e,n.parent,s,l)}}if($V(e,n.parent),r)qV();else{for(var u;n!==e.root&&0===n.color;)n===n.parent.left?(1===(u=n.parent.right).color&&(u.color=0,n.parent.color=1,GV(e,n.parent),u=n.parent.right),0===u.left.color&&0===u.right.color?(u.color=1,n=n.parent):(0===u.right.color&&(u.left.color=0,u.color=1,ZV(e,u),u=n.parent.right),u.color=n.parent.color,n.parent.color=0,u.right.color=0,GV(e,n.parent),n=e.root)):(1===(u=n.parent.left).color&&(u.color=0,n.parent.color=1,ZV(e,n.parent),u=n.parent.left),0===u.left.color&&0===u.right.color?(u.color=1,n=n.parent):(0===u.left.color&&(u.right.color=0,u.color=1,GV(e,u),u=n.parent.left),u.color=n.parent.color,n.parent.color=0,u.left.color=0,ZV(e,n.parent),n=e.root));n.color=0,qV()}}function QV(e,t){for($V(e,t);t!==e.root&&1===t.parent.color;)if(t.parent===t.parent.parent.left){var n=t.parent.parent.right;1===n.color?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&GV(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,ZV(e,t.parent.parent))}else{var i=t.parent.parent.left;1===i.color?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&ZV(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,GV(e,t.parent.parent))}e.root.color=0}function XV(e,t,n,i){for(;t!==e.root&&t!==VV;)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=i),t=t.parent}function $V(e,t){var n,i;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(n=jV((t=t.parent).left)-t.size_left,i=KV(t.left)-t.lf_left,t.size_left+=n,t.lf_left+=i;t!==e.root&&(0!==n||0!==i);)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=i),t=t.parent}}VV.parent=VV,VV.left=VV,VV.right=VV,VV.color=0;var JV=65535;function ez(e){var t;return(t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length)).set(e,0),t}var tz=function e(t,n,i,r,o){u(this,e),this.lineStarts=t,this.cr=n,this.lf=i,this.crlf=r,this.isBasicASCII=o};function nz(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[0],i=1,r=0,o=e.length;r<o;r++){var a=e.charCodeAt(r);13===a?r+1<o&&10===e.charCodeAt(r+1)?(n[i++]=r+2,r++):n[i++]=r+1:10===a&&(n[i++]=r+1)}return t?ez(n):n}var iz=function e(t,n,i,r,o){u(this,e),this.bufferIndex=t,this.start=n,this.end=i,this.lineFeedCnt=r,this.length=o},rz=function e(t,n){u(this,e),this.buffer=t,this.lineStarts=n},oz=function(){function e(t,n){var i=this;u(this,e),this._pieces=[],this._tree=t,this._BOM=n,this._index=0,t.root!==VV&&t.iterate(t.root,(function(e){return e!==VV&&i._pieces.push(e.piece),!0}))}return h(e,[{key:"read",value:function(){return 0===this._pieces.length?0===this._index?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:0===this._index?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}]),e}(),az=function(){function e(t){u(this,e),this._limit=t,this._cache=[]}return h(e,[{key:"get",value:function(e){for(var t=this._cache.length-1;t>=0;t--){var n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}},{key:"get2",value:function(e){for(var t=this._cache.length-1;t>=0;t--){var n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}},{key:"set",value:function(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}},{key:"validate",value:function(e){for(var t=!1,n=this._cache,i=0;i<n.length;i++){var r=n[i];(null===r.node.parent||r.nodeStartOffset>=e)&&(n[i]=null,t=!0)}if(t){var o=[],a=!0,s=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;null!==d&&o.push(d)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}this._cache=o}}}]),e}(),sz=function(){function e(t,n,i){u(this,e),this.create(t,n,i)}return h(e,[{key:"create",value:function(e,t,n){this._buffers=[new rz("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=VV,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;for(var i=null,r=0,o=e.length;r<o;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=nz(e[r].buffer));var a=new iz(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),i=this.rbInsertRight(i,a)}this._searchCache=new az(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}},{key:"normalizeEOL",value:function(e){var t=this,n=JV,i=n-Math.floor(n/3),r=2*i,o="",a=0,s=[];if(this.iterate(this.root,(function(n){var l=t.getNodeContent(n),u=l.length;if(a<=i||a+u<r)return o+=l,a+=u,!0;var c=o.replace(/\r\n|\r|\n/g,e);return s.push(new rz(c,nz(c))),o=l,a=u,!0})),a>0){var l=o.replace(/\r\n|\r|\n/g,e);s.push(new rz(l,nz(l)))}this.create(s,e,!0)}},{key:"getEOL",value:function(){return this._EOL}},{key:"setEOL",value:function(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}},{key:"createSnapshot",value:function(e){return new oz(this,e)}},{key:"getOffsetAt",value:function(e,t){for(var n=0,i=this.root;i!==VV;)if(i.left!==VV&&i.lf_left+1>=e)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt+1>=e)return(n+=i.size_left)+(this.getAccumulatedValue(i,e-i.lf_left-2)+t-1);e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}return n}},{key:"getPositionAt",value:function(e){e=Math.floor(e),e=Math.max(0,e);for(var t=this.root,n=0,i=e;t!==VV;)if(0!==t.size_left&&t.size_left>=e)t=t.left;else{if(t.size_left+t.piece.length>=e){var r=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+r.index,0===r.index){var o=this.getOffsetAt(n+1,1);return new dd(n+1,i-o+1)}return new dd(n+1,r.remainder+1)}if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===VV){var a=this.getOffsetAt(n+1,1);return new dd(n+1,i-e-a+1)}t=t.right}return new dd(1,1)}},{key:"getValueInRange",value:function(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";var n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(n,i);return t?t===this._EOL&&this._EOLNormalized&&t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}},{key:"getValueInRange2",value:function(e,t){if(e.node===t.node){var n=e.node,i=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i.substring(r+e.remainder,r+t.remainder)}var o=e.node,a=this._buffers[o.piece.bufferIndex].buffer,s=this.offsetInBuffer(o.piece.bufferIndex,o.piece.start),l=a.substring(s+e.remainder,s+o.piece.length);for(o=o.next();o!==VV;){var u=this._buffers[o.piece.bufferIndex].buffer,c=this.offsetInBuffer(o.piece.bufferIndex,o.piece.start);if(o===t.node){l+=u.substring(c,c+t.remainder);break}l+=u.substr(c,o.piece.length),o=o.next()}return l}},{key:"getLinesContent",value:function(){var e=this,t=[],n=0,i="",r=!1;return this.iterate(this.root,(function(o){if(o===VV)return!0;var a=o.piece,s=a.length;if(0===s)return!0;var l=e._buffers[a.bufferIndex].buffer,u=e._buffers[a.bufferIndex].lineStarts,c=a.start.line,d=a.end.line,h=u[c]+a.start.column;if(r&&(10===l.charCodeAt(h)&&(h++,s--),t[n++]=i,i="",r=!1,0===s))return!0;if(c===d)return e._EOLNormalized||13!==l.charCodeAt(h+s-1)?i+=l.substr(h,s):(r=!0,i+=l.substr(h,s-1)),!0;i+=e._EOLNormalized?l.substring(h,Math.max(h,u[c+1]-e._EOLLength)):l.substring(h,u[c+1]).replace(/(\r\n|\r|\n)$/,""),t[n++]=i;for(var f=c+1;f<d;f++)i=e._EOLNormalized?l.substring(u[f],u[f+1]-e._EOLLength):l.substring(u[f],u[f+1]).replace(/(\r\n|\r|\n)$/,""),t[n++]=i;return e._EOLNormalized||13!==l.charCodeAt(u[d]+a.end.column-1)?i=l.substr(u[d],a.end.column):(r=!0,0===a.end.column?n--:i=l.substr(u[d],a.end.column-1)),!0})),r&&(t[n++]=i,i=""),t[n++]=i,t}},{key:"getLength",value:function(){return this._length}},{key:"getLineCount",value:function(){return this._lineCnt}},{key:"getLineContent",value:function(e){return this._lastVisitedLine.lineNumber===e||(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value}},{key:"_getCharCode",value:function(e){if(e.remainder===e.node.piece.length){var t=e.node.next();if(!t)return 0;var n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}var r=this._buffers[e.node.piece.bufferIndex],o=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return r.buffer.charCodeAt(o)}},{key:"getLineCharCode",value:function(e,t){var n=this.nodeAt2(e,t+1);return this._getCharCode(n)}},{key:"getLineLength",value:function(e){if(e===this.getLineCount()){var t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}},{key:"findMatchesInNode",value:function(e,t,n,i,r,o,a,s,l,u,c){var d,h,f,g=this._buffers[e.piece.bufferIndex],v=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),p=this.offsetInBuffer(e.piece.bufferIndex,r),m=this.offsetInBuffer(e.piece.bufferIndex,o),y={line:0,column:0};t._wordSeparators?(h=g.buffer.substring(p,m),f=function(e){return e+p},t.reset(0)):(h=g.buffer,f=function(e){return e},t.reset(p));do{if(d=t.next(h)){if(f(d.index)>=m)return u;this.positionInBuffer(e,f(d.index)-v,y);var _=this.getLineFeedCnt(e.piece.bufferIndex,r,y),b=y.line===r.line?y.column-r.column+i:y.column+1,k=b+d[0].length;if(c[u++]=Iw(new hd(n+_,b,n+_,k),d,s),f(d.index)+d[0].length>=m)return u;if(u>=l)return u}}while(d);return u}},{key:"findMatchesLineByLine",value:function(e,t,n,i){var r=[],o=0,a=new Rw(t.wordSeparators,t.regex),s=this.nodeAt2(e.startLineNumber,e.startColumn);if(null===s)return[];var l=this.nodeAt2(e.endLineNumber,e.endColumn);if(null===l)return[];var u=this.positionInBuffer(s.node,s.remainder),c=this.positionInBuffer(l.node,l.remainder);if(s.node===l.node)return this.findMatchesInNode(s.node,a,e.startLineNumber,e.startColumn,u,c,t,n,i,o,r),r;for(var d=e.startLineNumber,h=s.node;h!==l.node;){var f=this.getLineFeedCnt(h.piece.bufferIndex,u,h.piece.end);if(f>=1){var g=this._buffers[h.piece.bufferIndex].lineStarts,v=this.offsetInBuffer(h.piece.bufferIndex,h.piece.start),p=g[u.line+f],m=d===e.startLineNumber?e.startColumn:1;if((o=this.findMatchesInNode(h,a,d,m,u,this.positionInBuffer(h,p-v),t,n,i,o,r))>=i)return r;d+=f}var y=d===e.startLineNumber?e.startColumn-1:0;if(d===e.endLineNumber){var _=this.getLineContent(d).substring(y,e.endColumn-1);return o=this._findMatchesInLine(t,a,_,e.endLineNumber,y,o,r,n,i),r}if((o=this._findMatchesInLine(t,a,this.getLineContent(d).substr(y),d,y,o,r,n,i))>=i)return r;d++,h=(s=this.nodeAt2(d,1)).node,u=this.positionInBuffer(s.node,s.remainder)}if(d===e.endLineNumber){var b=d===e.startLineNumber?e.startColumn-1:0,k=this.getLineContent(d).substring(b,e.endColumn-1);return o=this._findMatchesInLine(t,a,k,e.endLineNumber,b,o,r,n,i),r}var w=d===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(l.node,a,d,w,u,c,t,n,i,o,r),r}},{key:"_findMatchesInLine",value:function(e,t,n,i,r,o,a,s,l){var u,c=e.wordSeparators;if(!s&&e.simpleSearch){for(var d=e.simpleSearch,h=d.length,f=n.length,g=-h;-1!==(g=n.indexOf(d,g+h));)if((!c||Tw(c,n,f,g,h))&&(a[o++]=new Cw(new hd(i,g+1+r,i,g+1+h+r),null),o>=l))return o;return o}t.reset(0);do{if((u=t.next(n))&&(a[o++]=Iw(new hd(i,u.index+1+r,i,u.index+1+u[0].length+r),u,s),o>=l))return o}while(u);return o}},{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==VV){var i=this.nodeAt(e),r=i.node,o=i.remainder,a=i.nodeStartOffset,s=r.piece,l=s.bufferIndex,u=this.positionInBuffer(r,o);if(0===r.piece.bufferIndex&&s.end.line===this._lastChangeBufferPos.line&&s.end.column===this._lastChangeBufferPos.column&&a+s.length===e&&t.length<JV)return this.appendToNode(r,t),void this.computeBufferMetadata();if(a===e)this.insertContentToNodeLeft(t,r),this._searchCache.validate(e);else if(a+r.piece.length>e){var c=[],d=new iz(s.bufferIndex,u,s.end,this.getLineFeedCnt(s.bufferIndex,u,s.end),this.offsetInBuffer(l,s.end)-this.offsetInBuffer(l,u));if(this.shouldCheckCRLF()&&this.endWithCR(t))if(10===this.nodeCharCodeAt(r,o)){var h={line:d.start.line+1,column:0};d=new iz(d.bufferIndex,h,d.end,this.getLineFeedCnt(d.bufferIndex,h,d.end),d.length-1),t+="\n"}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(13===this.nodeCharCodeAt(r,o-1)){var f=this.positionInBuffer(r,o-1);this.deleteNodeTail(r,f),t="\r"+t,0===r.piece.length&&c.push(r)}else this.deleteNodeTail(r,u);else this.deleteNodeTail(r,u);var g=this.createNewPieces(t);d.length>0&&this.rbInsertRight(r,d);for(var v=r,p=0;p<g.length;p++)v=this.rbInsertRight(v,g[p]);this.deleteNodes(c)}else this.insertContentToNodeRight(t,r)}else for(var m=this.createNewPieces(t),y=this.rbInsertLeft(null,m[0]),_=1;_<m.length;_++)y=this.rbInsertRight(y,m[_]);this.computeBufferMetadata()}},{key:"delete",value:function(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",!(t<=0||this.root===VV)){var n=this.nodeAt(e),i=this.nodeAt(e+t),r=n.node,o=i.node;if(r===o){var a=this.positionInBuffer(r,n.remainder),s=this.positionInBuffer(r,i.remainder);if(n.nodeStartOffset===e){if(t===r.piece.length){var l=r.next();return YV(this,r),this.validateCRLFWithPrevNode(l),void this.computeBufferMetadata()}return this.deleteNodeHead(r,s),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),void this.computeBufferMetadata()}return n.nodeStartOffset+r.piece.length===e+t?(this.deleteNodeTail(r,a),this.validateCRLFWithNextNode(r),void this.computeBufferMetadata()):(this.shrinkNode(r,a,s),void this.computeBufferMetadata())}var u=[],c=this.positionInBuffer(r,n.remainder);this.deleteNodeTail(r,c),this._searchCache.validate(e),0===r.piece.length&&u.push(r);var d=this.positionInBuffer(o,i.remainder);this.deleteNodeHead(o,d),0===o.piece.length&&u.push(o);for(var h=r.next();h!==VV&&h!==o;h=h.next())u.push(h);var f=0===r.piece.length?r.prev():r;this.deleteNodes(u),this.validateCRLFWithNextNode(f),this.computeBufferMetadata()}}},{key:"insertContentToNodeLeft",value:function(e,t){var n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){var i=t.piece,r={line:i.start.line+1,column:0},o=new iz(i.bufferIndex,r,i.end,this.getLineFeedCnt(i.bufferIndex,r,i.end),i.length-1);t.piece=o,e+="\n",XV(this,t,-1,-1),0===t.piece.length&&n.push(t)}for(var a=this.createNewPieces(e),s=this.rbInsertLeft(t,a[a.length-1]),l=a.length-2;l>=0;l--)s=this.rbInsertLeft(s,a[l]);this.validateCRLFWithPrevNode(s),this.deleteNodes(n)}},{key:"insertContentToNodeRight",value:function(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+="\n");for(var n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]),r=i,o=1;o<n.length;o++)r=this.rbInsertRight(r,n[o]);this.validateCRLFWithPrevNode(i)}},{key:"positionInBuffer",value:function(e,t,n){for(var i=e.piece,r=e.piece.bufferIndex,o=this._buffers[r].lineStarts,a=o[i.start.line]+i.start.column+t,s=i.start.line,l=i.end.line,u=0,c=0,d=0;s<=l&&(d=o[u=s+(l-s)/2|0],u!==l);)if(c=o[u+1],a<d)l=u-1;else{if(!(a>=c))break;s=u+1}return n?(n.line=u,n.column=a-d,null):{line:u,column:a-d}}},{key:"getLineFeedCnt",value:function(e,t,n){if(0===n.column)return n.line-t.line;var i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;var r=i[n.line+1],o=i[n.line]+n.column;if(r>o+1)return n.line-t.line;var a=o-1;return 13===this._buffers[e].buffer.charCodeAt(a)?n.line-t.line+1:n.line-t.line}},{key:"offsetInBuffer",value:function(e,t){return this._buffers[e].lineStarts[t.line]+t.column}},{key:"deleteNodes",value:function(e){for(var t=0;t<e.length;t++)YV(this,e[t])}},{key:"createNewPieces",value:function(e){if(e.length>JV){for(var t=[];e.length>JV;){var n=e.charCodeAt(JV-1),i=void 0;13===n||n>=55296&&n<=56319?(i=e.substring(0,JV-1),e=e.substring(JV-1)):(i=e.substring(0,JV),e=e.substring(JV));var r=nz(i);t.push(new iz(this._buffers.length,{line:0,column:0},{line:r.length-1,column:i.length-r[r.length-1]},r.length-1,i.length)),this._buffers.push(new rz(i,r))}var o=nz(e);return t.push(new iz(this._buffers.length,{line:0,column:0},{line:o.length-1,column:e.length-o[o.length-1]},o.length-1,e.length)),this._buffers.push(new rz(e,o)),t}var a=this._buffers[0].buffer.length,s=nz(e,!1),l=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===a&&0!==a&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},l=this._lastChangeBufferPos;for(var u=0;u<s.length;u++)s[u]+=a+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1)),this._buffers[0].buffer+="_"+e,a+=1}else{if(0!==a)for(var c=0;c<s.length;c++)s[c]+=a;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1)),this._buffers[0].buffer+=e}var d=this._buffers[0].buffer.length,h=this._buffers[0].lineStarts.length-1,f={line:h,column:d-this._buffers[0].lineStarts[h]},g=new iz(0,l,f,this.getLineFeedCnt(0,l,f),d-a);return this._lastChangeBufferPos=f,[g]}},{key:"getLineRawContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.root,i="",r=this._searchCache.get2(e);if(r){n=r.node;var o=this.getAccumulatedValue(n,e-r.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(r.nodeStartLineNumber+n.piece.lineFeedCnt!==e){var l=this.getAccumulatedValue(n,e-r.nodeStartLineNumber);return a.substring(s+o,s+l-t)}i=a.substring(s+o,s+n.piece.length)}else for(var u=0,c=e;n!==VV;)if(n.left!==VV&&n.lf_left>=e-1)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt>e-1){var d=this.getAccumulatedValue(n,e-n.lf_left-2),h=this.getAccumulatedValue(n,e-n.lf_left-1),f=this._buffers[n.piece.bufferIndex].buffer,g=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return u+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:u,nodeStartLineNumber:c-(e-1-n.lf_left)}),f.substring(g+d,g+h-t)}if(n.lf_left+n.piece.lineFeedCnt===e-1){var v=this.getAccumulatedValue(n,e-n.lf_left-2),p=this._buffers[n.piece.bufferIndex].buffer,m=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=p.substring(m+v,m+n.piece.length);break}e-=n.lf_left+n.piece.lineFeedCnt,u+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==VV;){var y=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){var _=this.getAccumulatedValue(n,0),b=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=y.substring(b,b+_-t)}var k=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=y.substr(k,n.piece.length),n=n.next()}return i}},{key:"computeBufferMetadata",value:function(){for(var e=this.root,t=1,n=0;e!==VV;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}},{key:"getIndexOf",value:function(e,t){var n=e.piece,i=this.positionInBuffer(e,t),r=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){var o=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(o!==r)return{index:o,remainder:0}}return{index:r,remainder:i.column}}},{key:"getAccumulatedValue",value:function(e,t){if(t<0)return 0;var n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,r=n.start.line+t+1;return r>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[r]-i[n.start.line]-n.start.column}},{key:"deleteNodeTail",value:function(e,t){var n=e.piece,i=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.end),o=t,a=this.offsetInBuffer(n.bufferIndex,o),s=this.getLineFeedCnt(n.bufferIndex,n.start,o),l=s-i,u=a-r,c=n.length+u;e.piece=new iz(n.bufferIndex,n.start,o,s,c),XV(this,e,u,l)}},{key:"deleteNodeHead",value:function(e,t){var n=e.piece,i=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.start),o=t,a=this.getLineFeedCnt(n.bufferIndex,o,n.end),s=a-i,l=r-this.offsetInBuffer(n.bufferIndex,o),u=n.length+l;e.piece=new iz(n.bufferIndex,o,n.end,a,u),XV(this,e,l,s)}},{key:"shrinkNode",value:function(e,t,n){var i=e.piece,r=i.start,o=i.end,a=i.length,s=i.lineFeedCnt,l=t,u=this.getLineFeedCnt(i.bufferIndex,i.start,l),c=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,r);e.piece=new iz(i.bufferIndex,i.start,l,u,c),XV(this,e,c-a,u-s);var d=new iz(i.bufferIndex,n,o,this.getLineFeedCnt(i.bufferIndex,n,o),this.offsetInBuffer(i.bufferIndex,o)-this.offsetInBuffer(i.bufferIndex,n)),h=this.rbInsertRight(e,d);this.validateCRLFWithPrevNode(h)}},{key:"appendToNode",value:function(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+="\n");var n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;for(var r=nz(t,!1),o=0;o<r.length;o++)r[o]+=i;if(n){var a=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-a}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));var s=this._buffers[0].lineStarts.length-1,l={line:s,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[s]},u=e.piece.length+t.length,c=e.piece.lineFeedCnt,d=this.getLineFeedCnt(0,e.piece.start,l),h=d-c;e.piece=new iz(e.piece.bufferIndex,e.piece.start,l,d,u),this._lastChangeBufferPos=l,XV(this,e,t.length,h)}},{key:"nodeAt",value:function(e){var t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};for(var i=0;t!==VV;)if(t.size_left>e)t=t.left;else{if(t.size_left+t.piece.length>=e){i+=t.size_left;var r={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(r),r}e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right}return null}},{key:"nodeAt2",value:function(e,t){for(var n=this.root,i=0;n!==VV;)if(n.left!==VV&&n.lf_left>=e-1)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt>e-1){var r=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(r+t-1,o),nodeStartOffset:i}}if(n.lf_left+n.piece.lineFeedCnt===e-1){var a=this.getAccumulatedValue(n,e-n.lf_left-2);if(a+t-1<=n.piece.length)return{node:n,remainder:a+t-1,nodeStartOffset:i};t-=n.piece.length-a;break}e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==VV;){if(n.piece.lineFeedCnt>0){var s=this.getAccumulatedValue(n,0),l=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,s),nodeStartOffset:l}}if(n.piece.length>=t-1)return{node:n,remainder:t-1,nodeStartOffset:this.offsetOfNode(n)};t-=n.piece.length,n=n.next()}return null}},{key:"nodeCharCodeAt",value:function(e,t){if(e.piece.lineFeedCnt<1)return-1;var n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}},{key:"offsetOfNode",value:function(e){if(!e)return 0;for(var t=e.size_left;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}},{key:"shouldCheckCRLF",value:function(){return!(this._EOLNormalized&&"\n"===this._EOL)}},{key:"startWithLF",value:function(e){if("string"==typeof e)return 10===e.charCodeAt(0);if(e===VV||0===e.piece.lineFeedCnt)return!1;var t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,r=n[i]+t.start.column;return i!==n.length-1&&(!(n[i+1]>r+1)&&10===this._buffers[t.bufferIndex].buffer.charCodeAt(r))}},{key:"endWithCR",value:function(e){return"string"==typeof e?13===e.charCodeAt(e.length-1):e!==VV&&0!==e.piece.lineFeedCnt&&13===this.nodeCharCodeAt(e,e.piece.length-1)}},{key:"validateCRLFWithPrevNode",value:function(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){var t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}},{key:"validateCRLFWithNextNode",value:function(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){var t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}},{key:"fixCRLF",value:function(e,t){var n,i=[],r=this._buffers[e.piece.bufferIndex].lineStarts;n=0===e.piece.end.column?{line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};var o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new iz(e.piece.bufferIndex,e.piece.start,n,a,o),XV(this,e,-1,-1),0===e.piece.length&&i.push(e);var s={line:t.piece.start.line+1,column:0},l=t.piece.length-1,u=this.getLineFeedCnt(t.piece.bufferIndex,s,t.piece.end);t.piece=new iz(t.piece.bufferIndex,s,t.piece.end,u,l),XV(this,t,-1,-1),0===t.piece.length&&i.push(t);var c=this.createNewPieces("\r\n");this.rbInsertRight(e,c[0]);for(var d=0;d<i.length;d++)YV(this,i[d])}},{key:"adjustCarriageReturnFromNext",value:function(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){var n=t.next();if(this.startWithLF(n)){if(e+="\n",1===n.piece.length)YV(this,n);else{var i=n.piece,r={line:i.start.line+1,column:0},o=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,r,i.end);n.piece=new iz(i.bufferIndex,r,i.end,a,o),XV(this,n,-1,-1)}return!0}}return!1}},{key:"iterate",value:function(e,t){if(e===VV)return t(VV);var n=this.iterate(e.left,t);return n?t(e)&&this.iterate(e.right,t):n}},{key:"getNodeContent",value:function(e){if(e===VV)return"";var t=this._buffers[e.piece.bufferIndex],n=e.piece,i=this.offsetInBuffer(n.bufferIndex,n.start),r=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(i,r)}},{key:"getPieceContent",value:function(e){var t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}},{key:"rbInsertRight",value:function(e,t){var n=new HV(t,1);if(n.left=VV,n.right=VV,n.parent=VV,n.size_left=0,n.lf_left=0,this.root===VV)this.root=n,n.color=0;else if(e.right===VV)e.right=n,n.parent=e;else{var i=zV(e.right);i.left=n,n.parent=i}return QV(this,n),n}},{key:"rbInsertLeft",value:function(e,t){var n=new HV(t,1);if(n.left=VV,n.right=VV,n.parent=VV,n.size_left=0,n.lf_left=0,this.root===VV)this.root=n,n.color=0;else if(e.left===VV)e.left=n,n.parent=e;else{var i=UV(e.left);i.right=n,n.parent=i}return QV(this,n),n}}]),e}(),lz=function(e){function t(e,n,i,r,o,a,s){var c;return u(this,t),(c=l(this,t))._onDidChangeContent=c._register(new Zu),c._BOM=n,c._mightContainNonBasicASCII=!a,c._mightContainRTL=r,c._mightContainUnusualLineTerminators=o,c._pieceTree=new sz(e,i,s),c}return p(t,e),h(t,[{key:"mightContainRTL",value:function(){return this._mightContainRTL}},{key:"mightContainUnusualLineTerminators",value:function(){return this._mightContainUnusualLineTerminators}},{key:"resetMightContainUnusualLineTerminators",value:function(){this._mightContainUnusualLineTerminators=!1}},{key:"mightContainNonBasicASCII",value:function(){return this._mightContainNonBasicASCII}},{key:"getBOM",value:function(){return this._BOM}},{key:"getEOL",value:function(){return this._pieceTree.getEOL()}},{key:"createSnapshot",value:function(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}},{key:"getOffsetAt",value:function(e,t){return this._pieceTree.getOffsetAt(e,t)}},{key:"getPositionAt",value:function(e){return this._pieceTree.getPositionAt(e)}},{key:"getRangeAt",value:function(e,t){var n=e+t,i=this.getPositionAt(e),r=this.getPositionAt(n);return new hd(i.lineNumber,i.column,r.lineNumber,r.column)}},{key:"getValueInRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.isEmpty())return"";var n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}},{key:"getValueLengthInRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;var n=this.getOffsetAt(e.startLineNumber,e.startColumn),i=this.getOffsetAt(e.endLineNumber,e.endColumn),r=0,o=this._getEndOfLine(t),a=this.getEOL();o.length!==a.length&&(r=(o.length-a.length)*(e.endLineNumber-e.startLineNumber));return i-n+r}},{key:"getCharacterCountInRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._mightContainNonBasicASCII){for(var n=0,i=e.startLineNumber,r=e.endLineNumber,o=i;o<=r;o++)for(var a=this.getLineContent(o),s=o===i?e.startColumn-1:0,l=o===r?e.endColumn-1:a.length,u=s;u<l;u++)ff(a.charCodeAt(u))?(n+=1,u+=1):n+=1;return n+=this._getEndOfLine(t).length*(r-i)}return this.getValueLengthInRange(e,t)}},{key:"getLength",value:function(){return this._pieceTree.getLength()}},{key:"getLineCount",value:function(){return this._pieceTree.getLineCount()}},{key:"getLinesContent",value:function(){return this._pieceTree.getLinesContent()}},{key:"getLineContent",value:function(e){return this._pieceTree.getLineContent(e)}},{key:"getLineCharCode",value:function(e,t){return this._pieceTree.getLineCharCode(e,t)}},{key:"getLineLength",value:function(e){return this._pieceTree.getLineLength(e)}},{key:"getLineFirstNonWhitespaceColumn",value:function(e){var t=$h(this.getLineContent(e));return-1===t?0:t+1}},{key:"getLineLastNonWhitespaceColumn",value:function(e){var t=ef(this.getLineContent(e));return-1===t?0:t+2}},{key:"_getEndOfLine",value:function(e){switch(e){case 1:return"\n";case 2:return"\r\n";case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}},{key:"setEOL",value:function(e){this._pieceTree.setEOL(e)}},{key:"applyEdits",value:function(e,n,i){for(var r=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,a=this._mightContainNonBasicASCII,s=!0,l=[],u=0;u<e.length;u++){var c=e[u];s&&c._isTracked&&(s=!1);var d=c.range;if(c.text){var h=!0;a||(a=h=!Sf(c.text)),!r&&h&&(r=wf(c.text)),!o&&h&&(o=Lf(c.text))}var f="",g=0,v=0,p=0;if(c.text){var m,y;g=(y=C(Ax(c.text),4))[0],v=y[1],p=y[2],m=y[3];var _=this.getEOL();f=0===m||m===("\r\n"===_?2:1)?c.text:c.text.replace(/\r\n|\r|\n/g,_)}l[u]={sortIndex:u,identifier:c.identifier||null,range:d,rangeOffset:this.getOffsetAt(d.startLineNumber,d.startColumn),rangeLength:this.getValueLengthInRange(d),text:f,eolCount:g,firstLineLength:v,lastLineLength:p,forceMoveMarkers:Boolean(c.forceMoveMarkers),isAutoWhitespaceEdit:c.isAutoWhitespaceEdit||!1}}l.sort(t._sortOpsAscending);for(var b=!1,k=0,w=l.length-1;k<w;k++){var S=l[k].range.getEndPosition(),x=l[k+1].range.getStartPosition();if(x.isBeforeOrEqual(S)){if(x.isBefore(S))throw new Error("Overlapping ranges are not allowed!");b=!0}}s&&(l=this._reduceOperations(l));var L=i||n?t._getInverseEditRanges(l):[],D=[];if(n)for(var N=0;N<l.length;N++){var I=l[N],E=L[N];if(I.isAutoWhitespaceEdit&&I.range.isEmpty())for(var M=E.startLineNumber;M<=E.endLineNumber;M++){var T="";M===E.startLineNumber&&-1!==$h(T=this.getLineContent(I.range.startLineNumber))||D.push({lineNumber:M,oldContent:T})}}var R=null;if(i){var A=0;R=[];for(var P=0;P<l.length;P++){var O=l[P],F=L[P],W=this.getValueInRange(O.range),B=O.rangeOffset+A;A+=O.text.length-W.length,R[P]={sortIndex:O.sortIndex,identifier:O.identifier,range:F,text:W,textChange:new XH(O.rangeOffset,W,B,O.text)}}b||R.sort((function(e,t){return e.sortIndex-t.sortIndex}))}this._mightContainRTL=r,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=a;var H=this._doApplyEdits(l),V=null;if(n&&D.length>0){D.sort((function(e,t){return t.lineNumber-e.lineNumber})),V=[];for(var z=0,U=D.length;z<U;z++){var j=D[z].lineNumber;if(!(z>0&&D[z-1].lineNumber===j)){var K=D[z].oldContent,q=this.getLineContent(j);0!==q.length&&q!==K&&-1===$h(q)&&V.push(j)}}}return this._onDidChangeContent.fire(),new Lw(R,H,V)}},{key:"_reduceOperations",value:function(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}},{key:"_toSingleEditOperation",value:function(e){for(var t=!1,n=e[0].range,i=e[e.length-1].range,r=new hd(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn),o=n.startLineNumber,a=n.startColumn,s=[],l=0,u=e.length;l<u;l++){var c=e[l],d=c.range;t=t||c.forceMoveMarkers,s.push(this.getValueInRange(new hd(o,a,d.startLineNumber,d.startColumn))),c.text.length>0&&s.push(c.text),o=d.endLineNumber,a=d.endColumn}var h=s.join(""),f=C(Ax(h),3),g=f[0],v=f[1],p=f[2];return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:h,eolCount:g,firstLineLength:v,lastLineLength:p,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}},{key:"_doApplyEdits",value:function(e){e.sort(t._sortOpsDescending);for(var n=[],i=0;i<e.length;i++){var r=e[i],o=r.range.startLineNumber,a=r.range.startColumn,s=r.range.endLineNumber,l=r.range.endColumn;if(o!==s||a!==l||0!==r.text.length){r.text?(this._pieceTree.delete(r.rangeOffset,r.rangeLength),this._pieceTree.insert(r.rangeOffset,r.text,!0)):this._pieceTree.delete(r.rangeOffset,r.rangeLength);var u=new hd(o,a,s,l);n.push({range:u,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}}return n}},{key:"findMatchesLineByLine",value:function(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}}],[{key:"_getInverseEditRanges",value:function(e){for(var t=[],n=0,i=0,r=null,o=0,a=e.length;o<a;o++){var s=e[o],l=void 0,u=void 0;r?r.range.endLineNumber===s.range.startLineNumber?(l=n,u=i+(s.range.startColumn-r.range.endColumn)):(l=n+(s.range.startLineNumber-r.range.endLineNumber),u=s.range.startColumn):(l=s.range.startLineNumber,u=s.range.startColumn);var c=void 0;if(s.text.length>0){var d=s.eolCount+1;c=1===d?new hd(l,u,l,u+s.firstLineLength):new hd(l,u,l+d-1,s.lastLineLength+1)}else c=new hd(l,u,l,u);n=c.endLineNumber,i=c.endColumn,t.push(c),r=s}return t}},{key:"_sortOpsAscending",value:function(e,t){var n=hd.compareRangesUsingEnds(e.range,t.range);return 0===n?e.sortIndex-t.sortIndex:n}},{key:"_sortOpsDescending",value:function(e,t){var n=hd.compareRangesUsingEnds(e.range,t.range);return 0===n?t.sortIndex-e.sortIndex:-n}}]),t}(Ru),uz=function(){function e(t,n,i,r,o,a,s,l,c){u(this,e),this._chunks=t,this._bom=n,this._cr=i,this._lf=r,this._crlf=o,this._containsRTL=a,this._containsUnusualLineTerminators=s,this._isBasicASCII=l,this._normalizeEOL=c}return h(e,[{key:"_getEOL",value:function(e){var t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return 0===t?1===e?"\n":"\r\n":n>t/2?"\r\n":"\n"}},{key:"create",value:function(e){var t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&("\r\n"===t&&(this._cr>0||this._lf>0)||"\n"===t&&(this._cr>0||this._crlf>0)))for(var i=0,r=n.length;i<r;i++){var o=n[i].buffer.replace(/\r\n|\r|\n/g,t),a=nz(o);n[i]=new rz(o,a)}var s=new lz(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}}]),e}(),cz=function(){function e(){u(this,e),this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}return h(e,[{key:"acceptChunk",value:function(e){if(0!==e.length){0===this.chunks.length&&Ef(e)&&(this.BOM=If,e=e.substr(1));var t=e.charCodeAt(e.length-1);13===t||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}}},{key:"_acceptChunk1",value:function(e,t){(t||0!==e.length)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}},{key:"_acceptChunk2",value:function(e){var t=function(e,t){e.length=0,e[0]=0;for(var n=1,i=0,r=0,o=0,a=!0,s=0,l=t.length;s<l;s++){var u=t.charCodeAt(s);13===u?s+1<l&&10===t.charCodeAt(s+1)?(o++,e[n++]=s+2,s++):(i++,e[n++]=s+1):10===u?(r++,e[n++]=s+1):a&&9!==u&&(u<32||u>126)&&(a=!1)}var c=new tz(ez(e),i,r,o,a);return e.length=0,c}(this._tmpLineStarts,e);this.chunks.push(new rz(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=wf(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=Lf(e)))}},{key:"finish",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._finish(),new uz(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}},{key:"_finish",value:function(){if(0===this.chunks.length&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;var e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);var t=nz(e.buffer);e.lineStarts=t,13===this._previousChar&&this.cr++}}}]),e}(),dz=function(){function e(t){u(this,e),this._default=t,this._store=[]}return h(e,[{key:"get",value:function(e){return e<this._store.length?this._store[e]:this._default}},{key:"set",value:function(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}},{key:"replace",value:function(e,t,n){if(!(e>=this._store.length))if(0!==t)if(0!==n){var i=this._store.slice(0,e),r=this._store.slice(e+t),o=function(e,t){for(var n=[],i=0;i<e;i++)n[i]=t;return n}(n,this._default);this._store=i.concat(o,r)}else this.delete(e,t);else this.insert(e,n)}},{key:"delete",value:function(e,t){0===t||e>=this._store.length||this._store.splice(e,t)}},{key:"insert",value:function(e,t){if(!(0===t||e>=this._store.length)){for(var n=[],i=0;i<t;i++)n[i]=this._default;this._store=fa(this._store,e,n)}}}]),e}();var hz=function(){function e(t,n){u(this,e),this._startLineNumber=t,this._tokens=n}return h(e,[{key:"startLineNumber",get:function(){return this._startLineNumber}},{key:"endLineNumber",get:function(){return this._startLineNumber+this._tokens.length-1}},{key:"getLineTokens",value:function(e){return this._tokens[e-this._startLineNumber]}},{key:"appendLineTokens",value:function(e){this._tokens.push(e)}}]),e}(),fz=function(){function e(){u(this,e),this._tokens=[]}return h(e,[{key:"add",value:function(e,t){if(this._tokens.length>0){var n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e)return void n.appendLineTokens(t)}this._tokens.push(new hz(e,[t]))}},{key:"finalize",value:function(){return this._tokens}}]),e}(),gz=function(){function e(t,n){u(this,e),this.tokenizationSupport=n,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new pz(t)}return h(e,[{key:"getStartState",value:function(e){return this.store.getStartState(e,this.initialState)}},{key:"getFirstInvalidLine",value:function(){return this.store.getFirstInvalidLine(this.initialState)}}]),e}(),vz=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t,[e,n]))._textModel=i,o._languageIdCodec=r,o}return p(t,e),h(t,[{key:"updateTokensUntilLine",value:function(e,t){for(var n=this._textModel.getLanguageId();;){var i=this.getFirstInvalidLine();if(!i||i.lineNumber>t)break;var r=this._textModel.getLineContent(i.lineNumber),o=_z(this._languageIdCodec,n,this.tokenizationSupport,r,!0,i.startState);e.add(i.lineNumber,o.tokens),this.store.setEndState(i.lineNumber,o.endState)}}},{key:"getTokenTypeIfInsertingCharacter",value:function(e,t){var n=this.getStartState(e.lineNumber);if(!n)return 0;var i=this._textModel.getLanguageId(),r=this._textModel.getLineContent(e.lineNumber),o=r.substring(0,e.column-1)+t+r.substring(e.column-1),a=_z(this._languageIdCodec,i,this.tokenizationSupport,o,!0,n),s=new YT(a.tokens,o,this._languageIdCodec);if(0===s.getCount())return 0;var l=s.findTokenIndexAtOffset(e.column-1);return s.getStandardTokenType(l)}},{key:"tokenizeLineWithEdit",value:function(e,t,n){var i=e.lineNumber,r=e.column,o=this.getStartState(i);if(!o)return null;var a=this._textModel.getLineContent(i),s=a.substring(0,r-1)+n+a.substring(r-1+t),l=this._textModel.getLanguageIdAtPosition(i,0),u=_z(this._languageIdCodec,l,this.tokenizationSupport,s,!0,o);return new YT(u.tokens,s,this._languageIdCodec)}},{key:"hasAccurateTokensForLine",value:function(e){return e<this.store.getFirstInvalidEndStateLineNumberOrMax()}},{key:"isCheapToTokenize",value:function(e){var t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}},{key:"tokenizeHeuristically",value:function(e,t,n){if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,n),{heuristicTokens:!1};for(var i=this.guessStartState(t),r=this._textModel.getLanguageId(),o=t;o<=n;o++){var a=this._textModel.getLineContent(o),s=_z(this._languageIdCodec,r,this.tokenizationSupport,a,!0,i);e.add(o,s.tokens),i=s.endState}return{heuristicTokens:!0}}},{key:"guessStartState",value:function(e){for(var t=this._textModel.getLineFirstNonWhitespaceColumn(e),n=[],i=null,r=e-1;t>1&&r>=1;r--){var o=this._textModel.getLineFirstNonWhitespaceColumn(r);if(0!==o&&(o<t&&(n.push(this._textModel.getLineContent(r)),t=o,i=this.getStartState(r))))break}i||(i=this.tokenizationSupport.getInitialState()),n.reverse();var a=this._textModel.getLanguageId(),s=i,l=!0,u=!1,c=void 0;try{for(var d,h=n[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;s=_z(this._languageIdCodec,a,this.tokenizationSupport,f,!1,s).endState}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return s}}]),t}(gz),pz=function(){function e(t){u(this,e),this.lineCount=t,this._tokenizationStateStore=new mz,this._invalidEndStatesLineNumbers=new yz,this._invalidEndStatesLineNumbers.addRange(new Bw(1,t+1))}return h(e,[{key:"getEndState",value:function(e){return this._tokenizationStateStore.getEndState(e)}},{key:"setEndState",value:function(e,t){if(!t)throw new Lu("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);var n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Bw(e+1,e+2)),n}},{key:"acceptChange",value:function(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new Bw(e.startLineNumber,e.endLineNumberExclusive),t)}},{key:"acceptChanges",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=C(Ax(a.text),1)[0];this.acceptChange(new Gw(a.range.startLineNumber,a.range.endLineNumber+1),s+1)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"invalidateEndStateRange",value:function(e){this._invalidEndStatesLineNumbers.addRange(new Bw(e.startLineNumber,e.endLineNumberExclusive))}},{key:"getFirstInvalidEndStateLineNumber",value:function(){return this._invalidEndStatesLineNumbers.min}},{key:"getFirstInvalidEndStateLineNumberOrMax",value:function(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}},{key:"allStatesValid",value:function(){return null===this._invalidEndStatesLineNumbers.min}},{key:"getStartState",value:function(e,t){return 1===e?t:this.getEndState(e-1)}},{key:"getFirstInvalidLine",value:function(e){var t=this.getFirstInvalidEndStateLineNumber();if(null===t)return null;var n=this.getStartState(t,e);if(!n)throw new Lu("Start state must be defined");return{lineNumber:t,startState:n}}}]),e}(),mz=function(){function e(){u(this,e),this._lineEndStates=new dz(null)}return h(e,[{key:"getEndState",value:function(e){return this._lineEndStates.get(e)}},{key:"setEndState",value:function(e,t){var n=this._lineEndStates.get(e);return(!n||!n.equals(t))&&(this._lineEndStates.set(e,t),!0)}},{key:"acceptChange",value:function(e,t){var n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}}]),e}(),yz=function(){function e(){u(this,e),this._ranges=[]}return h(e,[{key:"min",get:function(){return 0===this._ranges.length?null:this._ranges[0].start}},{key:"delete",value:function(e){var t=this._ranges.findIndex((function(t){return t.contains(e)}));if(-1!==t){var n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new Bw(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new Bw(n.start,e):this._ranges.splice(t,1,new Bw(n.start,e),new Bw(e+1,n.endExclusive))}}},{key:"addRange",value:function(e){Bw.addRange(e,this._ranges)}},{key:"addRangeAndResize",value:function(e,t){for(var n=0;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;for(var i=n;!(i>=this._ranges.length||e.endExclusive<this._ranges[i].start);)i++;for(var r=t-e.length,o=i;o<this._ranges.length;o++)this._ranges[o]=this._ranges[o].delta(r);if(n===i){var a=new Bw(e.start,e.start+t);a.isEmpty||this._ranges.splice(n,0,a)}else{var s=Math.min(e.start,this._ranges[n].start),l=Math.max(e.endExclusive,this._ranges[i-1].endExclusive),u=new Bw(s,l+r);u.isEmpty?this._ranges.splice(n,i-n):this._ranges.splice(n,i-n,u)}}},{key:"toString",value:function(){return this._ranges.map((function(e){return e.toString()})).join(" + ")}}]),e}();function _z(e,t,n,i,r,o){var a=null;if(n)try{a=n.tokenizeEncoded(i,r,o.clone())}catch(e){vu(e)}return a||(a=JT(e.encodeLanguageId(t),o)),YT.convertToEndOffset(a.tokens,i.length),a}var bz=function(){function e(t,n){u(this,e),this._tokenizerWithStateStore=t,this._backgroundTokenStore=n,this._isDisposed=!1,this._isScheduled=!1}return h(e,[{key:"dispose",value:function(){this._isDisposed=!0}},{key:"handleChanges",value:function(){this._beginBackgroundTokenization()}},{key:"_beginBackgroundTokenization",value:function(){var e=this;!this._isScheduled&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._isScheduled=!0,bg((function(t){e._isScheduled=!1,e._backgroundTokenizeWithDeadline(t)})))}},{key:"_backgroundTokenizeWithDeadline",value:function(e){var t=this,n=Date.now()+e.timeRemaining(),i=function(){!t._isDisposed&&t._tokenizerWithStateStore._textModel.isAttachedToEditor()&&t._hasLinesToTokenize()&&(t._backgroundTokenizeForAtLeast1ms(),Date.now()<n?Ds(i):t._beginBackgroundTokenization())};i()}},{key:"_backgroundTokenizeForAtLeast1ms",value:function(){var e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new fz,n=Hu.create(!1);do{if(n.elapsed()>1)break;if(this._tokenizeOneInvalidLine(t)>=e)break}while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}},{key:"_hasLinesToTokenize",value:function(){return!!this._tokenizerWithStateStore&&!this._tokenizerWithStateStore.store.allStatesValid()}},{key:"_tokenizeOneInvalidLine",value:function(e){var t,n=null===(t=this._tokenizerWithStateStore)||void 0===t?void 0:t.getFirstInvalidLine();return n?(this._tokenizerWithStateStore.updateTokensUntilLine(e,n.lineNumber),n.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}},{key:"checkFinished",value:function(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}},{key:"requestTokens",value:function(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new Gw(e,t))}}]),e}(),kz=function(){function e(){u(this,e),this._onDidChangeVisibleRanges=new Zu,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}return h(e,[{key:"attachView",value:function(){var e=this,t=new wz((function(n){e._onDidChangeVisibleRanges.fire({view:t,state:n})}));return this._views.add(t),t}},{key:"detachView",value:function(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}]),e}(),wz=function(){function e(t){u(this,e),this.handleStateChange=t}return h(e,[{key:"setVisibleLines",value:function(e,t){var n=e.map((function(e){return new Gw(e.startLineNumber,e.endLineNumber+1)}));this.handleStateChange({visibleLineRanges:n,stabilized:t})}}]),e}(),Cz=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._refreshTokens=e,n.runner=n._register(new Sg((function(){return n.update()}),50)),n._computedLineRanges=[],n._lineRanges=[],n}return p(t,e),h(t,[{key:"lineRanges",get:function(){return this._lineRanges}},{key:"update",value:function(){ea(this._computedLineRanges,this._lineRanges,(function(e,t){return e.equals(t)}))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}},{key:"handleStateChange",value:function(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}]),t}(Ru),Sz=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._languageIdCodec=e,r._textModel=n,r.getLanguageId=i,r._backgroundTokenizationState=1,r._onDidChangeBackgroundTokenizationState=r._register(new Zu),r.onDidChangeBackgroundTokenizationState=r._onDidChangeBackgroundTokenizationState.event,r._onDidChangeTokens=r._register(new Zu),r.onDidChangeTokens=r._onDidChangeTokens.event,r}return p(t,e),h(t,[{key:"backgroundTokenizationState",get:function(){return this._backgroundTokenizationState}},{key:"tokenizeIfCheap",value:function(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}]),t}(Ru),xz=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t,[n,i,r]))._treeSitterService=e,o._tokenizationSupport=null,o._initialize(),o}return p(t,e),h(t,[{key:"_initialize",value:function(){var e=this.getLanguageId();this._tokenizationSupport&&this._lastLanguageId===e||(this._lastLanguageId=e,this._tokenizationSupport=Ah.get(e))}},{key:"getLineTokens",value:function(e){var t=this._textModel.getLineContent(e);if(this._tokenizationSupport){var n=this._tokenizationSupport.tokenizeEncoded(e,this._textModel);if(n)return new YT(n,t,this._languageIdCodec)}return YT.createEmpty(t,this._languageIdCodec)}},{key:"resetTokenization",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}},{key:"handleDidChangeAttached",value:function(){}},{key:"handleDidChangeContent",value:function(e){e.isFlush&&this.resetTokenization(!1)}},{key:"forceTokenization",value:function(e){}},{key:"hasAccurateTokensForLine",value:function(e){return!0}},{key:"isCheapToTokenize",value:function(e){return!0}},{key:"getTokenTypeIfInsertingCharacter",value:function(e,t,n){return 0}},{key:"tokenizeLineWithEdit",value:function(e,t,n){return null}},{key:"hasTokens",get:function(){var e=void 0!==this._treeSitterService.getParseResult(this._textModel);return e}}]),t}(Sz),Lz=Zm("treeSitterParserService"),Dz=new Uint32Array(0).buffer,Nz=function(){function e(){u(this,e)}return h(e,null,[{key:"deleteBeginning",value:function(t,n){return null===t||t===Dz?t:e.delete(t,0,n)}},{key:"deleteEnding",value:function(t,n){if(null===t||t===Dz)return t;var i=Iz(t),r=i[i.length-2];return e.delete(t,n,r)}},{key:"delete",value:function(e,t,n){if(null===e||e===Dz||t===n)return e;var i=Iz(e),r=i.length>>>1;if(0===t&&i[i.length-2]===n)return Dz;var o,a,s=YT.findIndexInTokensArray(i,t),l=s>0?i[s-1<<1]:0;if(n<i[s<<1]){for(var u=n-t,c=s;c<r;c++)i[c<<1]-=u;return e}l!==t?(i[s<<1]=t,o=s+1<<1,a=t):(o=s<<1,a=l);for(var d=n-t,h=s+1;h<r;h++){var f=i[h<<1]-d;f>a&&(i[o++]=f,i[o++]=i[1+(h<<1)],a=f)}if(o===i.length)return e;var g=new Uint32Array(o);return g.set(i.subarray(0,o),0),g.buffer}},{key:"append",value:function(e,t){if(t===Dz)return e;if(e===Dz)return t;if(null===e)return e;if(null===t)return null;var n=Iz(e),i=Iz(t),r=i.length>>>1,o=new Uint32Array(n.length+i.length);o.set(n,0);for(var a=n.length,s=n[n.length-2],l=0;l<r;l++)o[a++]=i[l<<1]+s,o[a++]=i[1+(l<<1)];return o.buffer}},{key:"insert",value:function(e,t,n){if(null===e||e===Dz)return e;var i=Iz(e),r=i.length>>>1,o=YT.findIndexInTokensArray(i,t);o>0&&(i[o-1<<1]===t&&o--);for(var a=o;a<r;a++)i[a<<1]+=n;return e}}]),e}();function Iz(e){return e instanceof Uint32Array?e:new Uint32Array(e)}var Ez=function(){function e(t){u(this,e),this._lineTokens=[],this._len=0,this._languageIdCodec=t}return h(e,[{key:"flush",value:function(){this._lineTokens=[],this._len=0}},{key:"hasTokens",get:function(){return this._lineTokens.length>0}},{key:"getTokens",value:function(e,t,n){var i=null;if(t<this._len&&(i=this._lineTokens[t]),null!==i&&i!==Dz)return new YT(Iz(i),n,this._languageIdCodec);var r=new Uint32Array(2);return r[0]=n.length,r[1]=Mz(this._languageIdCodec.encodeLanguageId(e)),new YT(r,n,this._languageIdCodec)}},{key:"_ensureLine",value:function(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}},{key:"_deleteLines",value:function(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}},{key:"_insertLines",value:function(e,t){if(0!==t){for(var n=[],i=0;i<t;i++)n[i]=null;this._lineTokens=fa(this._lineTokens,e,n),this._len+=t}}},{key:"setTokens",value:function(t,n,i,r,o){var a=e._massageTokens(this._languageIdCodec.encodeLanguageId(t),i,r);this._ensureLine(n);var s=this._lineTokens[n];return this._lineTokens[n]=a,!!o&&!e._equals(s,a)}},{key:"acceptEdit",value:function(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new dd(e.startLineNumber,e.startColumn),t,n)}},{key:"_acceptDeleteRange",value:function(e){var t=e.startLineNumber-1;if(!(t>=this._len))if(e.startLineNumber!==e.endLineNumber){this._lineTokens[t]=Nz.deleteEnding(this._lineTokens[t],e.startColumn-1);var n=e.endLineNumber-1,i=null;n<this._len&&(i=Nz.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=Nz.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}else{if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Nz.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1)}}},{key:"_acceptInsertText",value:function(e,t,n){if(0!==t||0!==n){var i=e.lineNumber-1;i>=this._len||(0!==t?(this._lineTokens[i]=Nz.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=Nz.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)):this._lineTokens[i]=Nz.insert(this._lineTokens[i],e.column-1,n))}}},{key:"setMultilineTokens",value:function(e,t){if(0===e.length)return{changes:[]};for(var n=[],i=0,r=e.length;i<r;i++){for(var o=e[i],a=0,s=0,l=!1,u=o.startLineNumber;u<=o.endLineNumber;u++){if(l)this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),o.getLineTokens(u),!1),s=u;else this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),o.getLineTokens(u),!0)&&(l=!0,a=u,s=u)}l&&n.push({fromLineNumber:a,toLineNumber:s})}return{changes:n}}}],[{key:"_massageTokens",value:function(e,t,n){var i=n?Iz(n):null;if(0===t){var r=!1;if(i&&i.length>1&&(r=Rx.getLanguageId(i[1])!==e),!r)return Dz}if(!i||0===i.length){var o=new Uint32Array(2);return o[0]=t,o[1]=Mz(e),o.buffer}return i[i.length-2]=t,0===i.byteOffset&&i.byteLength===i.buffer.byteLength?i.buffer:i}},{key:"_equals",value:function(e,t){if(!e||!t)return!e&&!t;var n=Iz(e),i=Iz(t);if(n.length!==i.length)return!1;for(var r=0,o=n.length;r<o;r++)if(n[r]!==i[r])return!1;return!0}}]),e}();function Mz(e){return(32768|e|2<<24|1024)>>>0}var Tz,Rz=function(){function e(t){u(this,e),this._pieces=[],this._isComplete=!1,this._languageIdCodec=t}return h(e,[{key:"flush",value:function(){this._pieces=[],this._isComplete=!1}},{key:"isEmpty",value:function(){return 0===this._pieces.length}},{key:"set",value:function(e,t){this._pieces=e||[],this._isComplete=t}},{key:"setPartial",value:function(e,t){var n=e;if(t.length>0){var i=t[0].getRange(),r=t[t.length-1].getRange();if(!i||!r)return e;n=e.plusRange(i).plusRange(r)}for(var o=null,a=0,s=this._pieces.length;a<s;a++){var l=this._pieces[a];if(!(l.endLineNumber<n.startLineNumber)){if(l.startLineNumber>n.endLineNumber){o=o||{index:a};break}if(l.removeTokens(n),l.isEmpty())this._pieces.splice(a,1),a--,s--;else if(!(l.endLineNumber<n.startLineNumber))if(l.startLineNumber>n.endLineNumber)o=o||{index:a};else{var u=C(l.split(n),2),c=u[0],d=u[1];c.isEmpty()?o=o||{index:a}:d.isEmpty()||(this._pieces.splice(a,1,c,d),a++,s++,o=o||{index:a})}}}return o=o||{index:this._pieces.length},t.length>0&&(this._pieces=fa(this._pieces,o.index,t)),n}},{key:"isComplete",value:function(){return this._isComplete}},{key:"addSparseTokens",value:function(t,n){if(0===n.getLineContent().length)return n;var i=this._pieces;if(0===i.length)return n;var r=i[e._findFirstPieceWithLine(i,t)].getLineTokens(t);if(!r)return n;for(var o=n.getCount(),a=r.getCount(),s=0,l=[],u=0,c=0,d=function(e,t){e!==c&&(c=e,l[u++]=e,l[u++]=t)},h=0;h<a;h++){for(var f=r.getStartCharacter(h),g=r.getEndCharacter(h),v=r.getMetadata(h),p=((1&v?2048:0)|(2&v?4096:0)|(4&v?8192:0)|(8&v?16384:0)|(16&v?16744448:0)|(32&v?4278190080:0))>>>0,m=~p>>>0;s<o&&n.getEndOffset(s)<=f;)d(n.getEndOffset(s),n.getMetadata(s)),s++;for(s<o&&n.getStartOffset(s)<f&&d(f,n.getMetadata(s));s<o&&n.getEndOffset(s)<g;)d(n.getEndOffset(s),n.getMetadata(s)&m|v&p),s++;if(s<o)d(g,n.getMetadata(s)&m|v&p),n.getEndOffset(s)===g&&s++;else{var y=Math.min(Math.max(0,s-1),o-1);d(g,n.getMetadata(y)&m|v&p)}}for(;s<o;)d(n.getEndOffset(s),n.getMetadata(s)),s++;return new YT(new Uint32Array(l),n.getLineContent(),this._languageIdCodec)}},{key:"acceptEdit",value:function(e,t,n,i,r){var o=!0,a=!1,s=void 0;try{for(var l,u=this._pieces[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){l.value.acceptEdit(e,t,n,i,r)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}}],[{key:"_findFirstPieceWithLine",value:function(e,t){for(var n=0,i=e.length-1;n<i;){var r=n+Math.floor((i-n)/2);if(e[r].endLineNumber<t)n=r+1;else{if(!(e[r].startLineNumber>t)){for(;r>n&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}i=r-1}}return n}}]),e}(),Az=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Pz=function(e,t){return function(n,i){t(n,i,e)}},Oz=Tz=function(e){function t(e,n,i,r,o,a,s){var c;return u(this,t),(c=l(this,t))._textModel=e,c._bracketPairsTextModelPart=n,c._languageId=i,c._attachedViews=r,c._languageService=o,c._languageConfigurationService=a,c._treeSitterService=s,c._semanticTokens=new Rz(c._languageService.languageIdCodec),c._onDidChangeLanguage=c._register(new Zu),c.onDidChangeLanguage=c._onDidChangeLanguage.event,c._onDidChangeLanguageConfiguration=c._register(new Zu),c.onDidChangeLanguageConfiguration=c._onDidChangeLanguageConfiguration.event,c._onDidChangeTokens=c._register(new Zu),c.onDidChangeTokens=c._onDidChangeTokens.event,c._tokensDisposables=c._register(new Tu),c._register(c._languageConfigurationService.onDidChange((function(e){e.affects(c._languageId)&&c._onDidChangeLanguageConfiguration.fire({})}))),c._register(Au.filter(Ah.onDidChange,(function(e){return e.changedLanguages.includes(c._languageId)}))((function(){c.createPreferredTokenProvider()}))),c.createPreferredTokenProvider(),c}return p(t,e),h(t,[{key:"createGrammarTokens",value:function(){var e=this;return this._register(new Wz(this._languageService.languageIdCodec,this._textModel,(function(){return e._languageId}),this._attachedViews))}},{key:"createTreeSitterTokens",value:function(){var e=this;return this._register(new xz(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,(function(){return e._languageId})))}},{key:"createTokens",value:function(e){var t,n=this,i=void 0!==this._tokens;null===(t=this._tokens)||void 0===t||t.dispose(),this._tokens=e?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens((function(e){n._emitModelTokensChangedEvent(e)}))),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState((function(e){n._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()}))),i&&this._tokens.resetTokenization()}},{key:"createPreferredTokenProvider",value:function(){Ah.get(this._languageId)?this._tokens instanceof xz||this.createTokens(!0):this._tokens instanceof Wz||this.createTokens(!1)}},{key:"handleLanguageConfigurationServiceChange",value:function(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}},{key:"handleDidChangeContent",value:function(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange){var t=!0,n=!1,i=void 0;try{for(var r,o=e.changes[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=C(Ax(a.text),3),l=s[0],u=s[1],c=s[2];this._semanticTokens.acceptEdit(a.range,l,u,c,a.text.length>0?a.text.charCodeAt(0):0)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}this._tokens.handleDidChangeContent(e)}},{key:"handleDidChangeAttached",value:function(){this._tokens.handleDidChangeAttached()}},{key:"getLineTokens",value:function(e){this.validateLineNumber(e);var t=this._tokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}},{key:"_emitModelTokensChangedEvent",value:function(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}},{key:"validateLineNumber",value:function(e){if(e<1||e>this._textModel.getLineCount())throw new Lu("Illegal value for lineNumber")}},{key:"hasTokens",get:function(){return this._tokens.hasTokens}},{key:"resetTokenization",value:function(){this._tokens.resetTokenization()}},{key:"backgroundTokenizationState",get:function(){return this._tokens.backgroundTokenizationState}},{key:"forceTokenization",value:function(e){this.validateLineNumber(e),this._tokens.forceTokenization(e)}},{key:"hasAccurateTokensForLine",value:function(e){return this.validateLineNumber(e),this._tokens.hasAccurateTokensForLine(e)}},{key:"isCheapToTokenize",value:function(e){return this.validateLineNumber(e),this._tokens.isCheapToTokenize(e)}},{key:"tokenizeIfCheap",value:function(e){this.validateLineNumber(e),this._tokens.tokenizeIfCheap(e)}},{key:"getTokenTypeIfInsertingCharacter",value:function(e,t,n){return this._tokens.getTokenTypeIfInsertingCharacter(e,t,n)}},{key:"tokenizeLineWithEdit",value:function(e,t,n){return this._tokens.tokenizeLineWithEdit(e,t,n)}},{key:"setSemanticTokens",value:function(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:null!==e,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}},{key:"hasCompleteSemanticTokens",value:function(){return this._semanticTokens.isComplete()}},{key:"hasSomeSemanticTokens",value:function(){return!this._semanticTokens.isEmpty()}},{key:"setPartialSemanticTokens",value:function(e,t){if(!this.hasCompleteSemanticTokens()){var n=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}}},{key:"getWordAtPosition",value:function(e){this.assertNotDisposed();var t=this._textModel.validatePosition(e),n=this._textModel.getLineContent(t.lineNumber),i=this.getLineTokens(t.lineNumber),r=i.findTokenIndexAtOffset(t.column-1),o=C(Tz._findLanguageBoundaries(i,r),2),a=o[0],s=o[1],l=Ks(t.column,this.getLanguageConfiguration(i.getLanguageId(r)).getWordDefinition(),n.substring(a,s),a);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(r>0&&a===t.column-1){var u=C(Tz._findLanguageBoundaries(i,r-1),2),c=u[0],d=u[1],h=Ks(t.column,this.getLanguageConfiguration(i.getLanguageId(r-1)).getWordDefinition(),n.substring(c,d),c);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn)return h}return null}},{key:"getLanguageConfiguration",value:function(e){return this._languageConfigurationService.getLanguageConfiguration(e)}},{key:"getWordUntilPosition",value:function(e){var t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}},{key:"getLanguageId",value:function(){return this._languageId}},{key:"getLanguageIdAtPosition",value:function(e,t){var n=this._textModel.validatePosition(new dd(e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))}},{key:"setLanguageId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this._languageId!==e){var n={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(n),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(n),this._onDidChangeLanguageConfiguration.fire({})}}}],[{key:"_findLanguageBoundaries",value:function(e,t){for(var n=e.getLanguageId(t),i=0,r=t;r>=0&&e.getLanguageId(r)===n;r--)i=e.getStartOffset(r);for(var o=e.getLineContent().length,a=t,s=e.getCount();a<s&&e.getLanguageId(a)===n;a++)o=e.getEndOffset(a);return[i,o]}}]),t}(sV);Oz=Tz=Az([Pz(4,Jb),Pz(5,Ek),Pz(6,Lz)],Oz);var Fz,Wz=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t,[e,n,i]))._tokenizer=null,o._defaultBackgroundTokenizer=null,o._backgroundTokenizer=o._register(new Pu),o._tokens=new Ez(o._languageIdCodec),o._debugBackgroundTokenizer=o._register(new Pu),o._attachedViewStates=o._register(new Wu),o._register(Rh.onDidChange((function(e){var t=o.getLanguageId();-1!==e.changedLanguages.indexOf(t)&&o.resetTokenization()}))),o.resetTokenization(),o._register(r.onDidChangeVisibleRanges((function(e){var t=e.view,n=e.state;if(n){var i=o._attachedViewStates.get(t);i||(i=new Cz((function(){return o.refreshRanges(i.lineRanges)})),o._attachedViewStates.set(t,i)),i.handleStateChange(n)}else o._attachedViewStates.deleteAndDispose(t)}))),o}return p(t,e),h(t,[{key:"resetTokenization",value:function(){var e,t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._tokens.flush(),null===(e=this._debugBackgroundTokens)||void 0===e||e.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new pz(this._textModel.getLineCount())),n&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});var i=C(function(){if(t._textModel.isTooLargeForTokenization())return[null,null];var e,n=Rh.get(t.getLanguageId());if(!n)return[null,null];try{e=n.getInitialState()}catch(t){return vu(t),[null,null]}return[n,e]}(),2),r=i[0],o=i[1];if(this._tokenizer=r&&o?new vz(this._textModel.getLineCount(),r,this._textModel,this._languageIdCodec):null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){var a={setTokens:function(e){t.setTokens(e)},backgroundTokenizationFinished:function(){if(2!==t._backgroundTokenizationState){t._backgroundTokenizationState=2,t._onDidChangeBackgroundTokenizationState.fire()}},setEndState:function(e,n){if(t._tokenizer){var i,r=t._tokenizer.store.getFirstInvalidEndStateLineNumber();if(null!==r&&e>=r)null===(i=t._tokenizer)||void 0===i||i.store.setEndState(e,n)}}};r&&r.createBackgroundTokenizer&&!r.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=r.createBackgroundTokenizer(this._textModel,a)),this._backgroundTokenizer.value||this._textModel.isTooLargeForTokenization()||(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new bz(this._tokenizer,a),this._defaultBackgroundTokenizer.handleChanges()),(null==r?void 0:r.backgroundTokenizerShouldOnlyVerifyTokens)&&r.createBackgroundTokenizer?(this._debugBackgroundTokens=new Ez(this._languageIdCodec),this._debugBackgroundStates=new pz(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=r.createBackgroundTokenizer(this._textModel,{setTokens:function(e){var n;null===(n=t._debugBackgroundTokens)||void 0===n||n.setMultilineTokens(e,t._textModel)},backgroundTokenizationFinished:function(){},setEndState:function(e,n){var i;null===(i=t._debugBackgroundStates)||void 0===i||i.setEndState(e,n)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}},{key:"handleDidChangeAttached",value:function(){var e;null===(e=this._defaultBackgroundTokenizer)||void 0===e||e.handleChanges()}},{key:"handleDidChangeContent",value:function(e){if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){var t,n,i=!0,r=!1,o=void 0;try{for(var a,s=e.changes[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l,u=a.value,c=C(Ax(u.text),2),d=c[0],h=c[1];this._tokens.acceptEdit(u.range,d,h),null===(l=this._debugBackgroundTokens)||void 0===l||l.acceptEdit(u.range,d,h)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}null===(t=this._debugBackgroundStates)||void 0===t||t.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),null===(n=this._defaultBackgroundTokenizer)||void 0===n||n.handleChanges()}}},{key:"setTokens",value:function(e){var t=this._tokens.setMultilineTokens(e,this._textModel).changes;return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}},{key:"refreshAllVisibleLineTokens",value:function(){var e=Gw.joinMany(x(this._attachedViewStates).map((function(e){var t=C(e,2);t[0];return t[1].lineRanges})));this.refreshRanges(e)}},{key:"refreshRanges",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this.refreshRange(a.startLineNumber,a.endLineNumberExclusive-1)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"refreshRange",value:function(e,t){var n;if(this._tokenizer){e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);var i=new fz,r=this._tokenizer.tokenizeHeuristically(i,e,t).heuristicTokens,o=this.setTokens(i.finalize());if(r){var a=!0,s=!1,l=void 0;try{for(var u,c=o.changes[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d,h=u.value;null===(d=this._backgroundTokenizer.value)||void 0===d||d.requestTokens(h.fromLineNumber,h.toLineNumber+1)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}}null===(n=this._defaultBackgroundTokenizer)||void 0===n||n.checkFinished()}}},{key:"forceTokenization",value:function(e){var t,n,i=new fz;null===(t=this._tokenizer)||void 0===t||t.updateTokensUntilLine(i,e),this.setTokens(i.finalize()),null===(n=this._defaultBackgroundTokenizer)||void 0===n||n.checkFinished()}},{key:"hasAccurateTokensForLine",value:function(e){return!this._tokenizer||this._tokenizer.hasAccurateTokensForLine(e)}},{key:"isCheapToTokenize",value:function(e){return!this._tokenizer||this._tokenizer.isCheapToTokenize(e)}},{key:"getLineTokens",value:function(e){var t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){var i,r=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!n.equals(r)&&(null===(i=this._debugBackgroundTokenizer.value)||void 0===i?void 0:i.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}},{key:"getTokenTypeIfInsertingCharacter",value:function(e,t,n){if(!this._tokenizer)return 0;var i=this._textModel.validatePosition(new dd(e,t));return this.forceTokenization(i.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(i,n)}},{key:"tokenizeLineWithEdit",value:function(e,t,n){if(!this._tokenizer)return null;var i=this._textModel.validatePosition(e);return this.forceTokenization(i.lineNumber),this._tokenizer.tokenizeLineWithEdit(i,t,n)}},{key:"hasTokens",get:function(){return this._tokens.hasTokens}}]),t}(Sz),Bz=function e(){u(this,e),this.changeType=1},Hz=function(){function e(t,n,i,r,o){u(this,e),this.ownerId=t,this.lineNumber=n,this.column=i,this.options=r,this.order=o}return h(e,null,[{key:"applyInjectedText",value:function(e,t){if(!t||0===t.length)return e;var n="",i=0,r=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;n+=e.substring(i,u.column-1),i=u.column-1,n+=u.options.content}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n+=e.substring(i)}},{key:"fromDecorations",value:function(t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l.options.before&&l.options.before.content.length>0&&n.push(new e(l.ownerId,l.range.startLineNumber,l.range.startColumn,l.options.before,0)),l.options.after&&l.options.after.content.length>0&&n.push(new e(l.ownerId,l.range.endLineNumber,l.range.endColumn,l.options.after,1))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n.sort((function(e,t){return e.lineNumber===t.lineNumber?e.column===t.column?e.order-t.order:e.column-t.column:e.lineNumber-t.lineNumber})),n}}]),e}(),Vz=function e(t,n,i){u(this,e),this.changeType=2,this.lineNumber=t,this.detail=n,this.injectedText=i},zz=function e(t,n){u(this,e),this.changeType=3,this.fromLineNumber=t,this.toLineNumber=n},Uz=function e(t,n,i,r){u(this,e),this.changeType=4,this.injectedTexts=r,this.fromLineNumber=t,this.toLineNumber=n,this.detail=i},jz=function e(){u(this,e),this.changeType=5},Kz=function(){function e(t,n,i,r){u(this,e),this.changes=t,this.versionId=n,this.isUndoing=i,this.isRedoing=r,this.resultingSelection=null}return h(e,[{key:"containsEvent",value:function(e){for(var t=0,n=this.changes.length;t<n;t++){if(this.changes[t].changeType===e)return!0}return!1}}],[{key:"merge",value:function(t,n){return new e([].concat(t.changes).concat(n.changes),n.versionId,t.isUndoing||n.isUndoing,t.isRedoing||n.isRedoing)}}]),e}(),qz=function e(t){u(this,e),this.changes=t},Gz=function(){function e(t,n){u(this,e),this.rawContentChangedEvent=t,this.contentChangedEvent=n}return h(e,[{key:"merge",value:function(t){var n=Kz.merge(this.rawContentChangedEvent,t.rawContentChangedEvent),i=e._mergeChangeEvents(this.contentChangedEvent,t.contentChangedEvent);return new e(n,i)}}],[{key:"_mergeChangeEvents",value:function(e,t){var n=[].concat(e.changes).concat(t.changes),i=t.eol,r=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,s=e.isFlush||t.isFlush;return{changes:n,eol:i,isEolChange:e.isEolChange&&t.isEolChange,versionId:r,isUndoing:o,isRedoing:a,isFlush:s}}}]),e}(),Zz=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Yz=function(e,t){return function(n,i){t(n,i,e)}};function Qz(e,t){var n;return n="string"==typeof e?function(e){var t=new cz;return t.acceptChunk(e),t.finish()}(e):function(e){return e&&"function"==typeof e.read}(e)?function(e){for(var t,n=new cz;"string"==typeof(t=e.read());)n.acceptChunk(t);return n.finish()}(e):e,n.create(t)}var Xz=0,$z=function(){function e(t){u(this,e),this._source=t,this._eos=!1}return h(e,[{key:"read",value:function(){if(this._eos)return null;for(var e=[],t=0,n=0;;){var i=this._source.read();if(null===i)return this._eos=!0,0===t?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=65536)return e.join("")}}}]),e}(),Jz=function(){throw new Error("Invalid change accessor")},eU=(gt=function(e){function t(e,n,i){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0;u(this,t),(r=l(this,t))._undoRedoService=a,r._languageService=s,r._languageConfigurationService=c,r.instantiationService=d,r._onWillDispose=r._register(new Zu),r.onWillDispose=r._onWillDispose.event,r._onDidChangeDecorations=r._register(new gU((function(e){return r.handleBeforeFireDecorationsChangedEvent(e)}))),r.onDidChangeDecorations=r._onDidChangeDecorations.event,r._onDidChangeOptions=r._register(new Zu),r.onDidChangeOptions=r._onDidChangeOptions.event,r._onDidChangeAttached=r._register(new Zu),r.onDidChangeAttached=r._onDidChangeAttached.event,r._onDidChangeInjectedText=r._register(new Zu),r._eventEmitter=r._register(new vU),r._languageSelectionListener=r._register(new Pu),r._deltaDecorationCallCnt=0,r._attachedViews=new kz,Xz++,r.id="$model"+Xz,r.isForSimpleWidget=i.isForSimpleWidget,r._associatedResource=null==o?ed.parse("inmemory://model/"+Xz):o,r._attachedEditorCount=0;var h=Qz(e,i.defaultEOL),f=h.textBuffer,g=h.disposable;r._buffer=f,r._bufferDisposable=g,r._options=Fz.resolveOptions(r._buffer,i);var v="string"==typeof n?n:n.languageId;"string"!=typeof n&&(r._languageSelectionListener.value=n.onDidChange((function(){return r._setLanguage(n.languageId)}))),r._bracketPairs=r._register(new jH(r,r._languageConfigurationService)),r._guidesTextModelPart=r._register(new dV(r,r._languageConfigurationService)),r._decorationProvider=r._register(new ZH(r)),r._tokenizationTextModelPart=r.instantiationService.createInstance(Oz,r,r._bracketPairs,v,r._attachedViews);var p=r._buffer.getLineCount(),m=r._buffer.getValueLengthInRange(new hd(1,1,p,r._buffer.getLineLength(p)+1),0);return i.largeFileOptimizations?(r._isTooLargeForTokenization=m>Fz.LARGE_FILE_SIZE_THRESHOLD||p>Fz.LARGE_FILE_LINE_COUNT_THRESHOLD,r._isTooLargeForHeapOperation=m>Fz.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(r._isTooLargeForTokenization=!1,r._isTooLargeForHeapOperation=!1),r._isTooLargeForSyncing=m>Fz._MODEL_SYNC_LIMIT,r._versionId=1,r._alternativeVersionId=1,r._initialUndoRedoSnapshot=null,r._isDisposed=!1,r.__isDisposing=!1,r._instanceId=Mf(Xz),r._lastDecorationId=0,r._decorations=Object.create(null),r._decorationsTree=new iU,r._commandManager=new aV(r,r._undoRedoService),r._isUndoing=!1,r._isRedoing=!1,r._trimAutoWhitespaceLines=null,r._register(r._decorationProvider.onDidChange((function(){r._onDidChangeDecorations.beginDeferredEmit(),r._onDidChangeDecorations.fire(),r._onDidChangeDecorations.endDeferredEmit()}))),r._languageService.requestRichLanguageFeatures(v),r._register(r._languageConfigurationService.onDidChange((function(e){r._bracketPairs.handleLanguageConfigurationServiceChange(e),r._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(e)}))),r}return p(t,e),h(t,[{key:"onDidChangeLanguage",get:function(){return this._tokenizationTextModelPart.onDidChangeLanguage}},{key:"onDidChangeLanguageConfiguration",get:function(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}},{key:"onDidChangeTokens",get:function(){return this._tokenizationTextModelPart.onDidChangeTokens}},{key:"onDidChangeContent",value:function(e){return this._eventEmitter.slowEvent((function(t){return e(t.contentChangedEvent)}))}},{key:"onDidChangeContentOrInjectedText",value:function(e){return Eu(this._eventEmitter.fastEvent((function(t){return e(t)})),this._onDidChangeInjectedText.event((function(t){return e(t)})))}},{key:"_isDisposing",value:function(){return this.__isDisposing}},{key:"tokenization",get:function(){return this._tokenizationTextModelPart}},{key:"bracketPairs",get:function(){return this._bracketPairs}},{key:"guides",get:function(){return this._guidesTextModelPart}},{key:"dispose",value:function(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,g(v(t.prototype),"dispose",this).call(this),this._bufferDisposable.dispose(),this.__isDisposing=!1;var e=new lz([],"","\n",!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=Ru.None}},{key:"_assertNotDisposed",value:function(){if(this._isDisposed)throw new Lu("Model is disposed!")}},{key:"_emitContentChangedEvent",value:function(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new Gz(e,t)))}},{key:"setValue",value:function(e){if(this._assertNotDisposed(),null==e)throw wu();var t=Qz(e,this._options.defaultEOL),n=t.textBuffer,i=t.disposable;this._setValueFromTextBuffer(n,i)}},{key:"_createContentChanged2",value:function(e,t,n,i,r,o,a,s){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),isEolChange:s,versionId:this.getVersionId(),isUndoing:r,isRedoing:o,isFlush:a}}},{key:"_setValueFromTextBuffer",value:function(e,t){this._assertNotDisposed();var n=this.getFullModelRange(),i=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new iU,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Kz([new Bz],this._versionId,!1,!1),this._createContentChanged2(new hd(1,1,r,o),0,i,this.getValue(),!1,!1,!0,!1))}},{key:"setEOL",value:function(e){this._assertNotDisposed();var t=1===e?"\r\n":"\n";if(this._buffer.getEOL()!==t){var n=this.getFullModelRange(),i=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Kz([new jz],this._versionId,!1,!1),this._createContentChanged2(new hd(1,1,r,o),0,i,this.getValue(),!1,!1,!1,!0))}}},{key:"_onBeforeEOLChange",value:function(){this._decorationsTree.ensureAllNodesHaveRanges(this)}},{key:"_onAfterEOLChange",value:function(){for(var e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder(),n=0,i=t.length;n<i;n++){var r=t[n],o=r.range,a=r.cachedAbsoluteStart-r.start,s=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),l=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);r.cachedAbsoluteStart=s,r.cachedAbsoluteEnd=l,r.cachedVersionId=e,r.start=s-a,r.end=l-a,FV(r)}}},{key:"onBeforeAttached",value:function(){return this._attachedEditorCount++,1===this._attachedEditorCount&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}},{key:"onBeforeDetached",value:function(e){this._attachedEditorCount--,0===this._attachedEditorCount&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}},{key:"isAttachedToEditor",value:function(){return this._attachedEditorCount>0}},{key:"getAttachedEditorCount",value:function(){return this._attachedEditorCount}},{key:"isTooLargeForSyncing",value:function(){return this._isTooLargeForSyncing}},{key:"isTooLargeForTokenization",value:function(){return this._isTooLargeForTokenization}},{key:"isTooLargeForHeapOperation",value:function(){return this._isTooLargeForHeapOperation}},{key:"isDisposed",value:function(){return this._isDisposed}},{key:"isDominatedByLongLines",value:function(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;for(var e=0,t=0,n=this._buffer.getLineCount(),i=1;i<=n;i++){var r=this._buffer.getLineLength(i);r>=1e4?t+=r:e+=r}return t>e}},{key:"uri",get:function(){return this._associatedResource}},{key:"getOptions",value:function(){return this._assertNotDisposed(),this._options}},{key:"getFormattingOptions",value:function(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}},{key:"updateOptions",value:function(e){this._assertNotDisposed();var t=void 0!==e.tabSize?e.tabSize:this._options.tabSize,n=void 0!==e.indentSize?e.indentSize:this._options.originalIndentSize,i=void 0!==e.insertSpaces?e.insertSpaces:this._options.insertSpaces,r=void 0!==e.trimAutoWhitespace?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=void 0!==e.bracketColorizationOptions?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new ww({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r,bracketPairColorizationOptions:o});if(!this._options.equals(a)){var s=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(s),this._decorationProvider.handleDidChangeOptions(s),this._onDidChangeOptions.fire(s)}}},{key:"detectIndentation",value:function(e,t){this._assertNotDisposed();var n=vV(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}},{key:"normalizeIndentation",value:function(e){return this._assertNotDisposed(),BB(e,this._options.indentSize,this._options.insertSpaces)}},{key:"getVersionId",value:function(){return this._assertNotDisposed(),this._versionId}},{key:"mightContainRTL",value:function(){return this._buffer.mightContainRTL()}},{key:"mightContainUnusualLineTerminators",value:function(){return this._buffer.mightContainUnusualLineTerminators()}},{key:"removeUnusualLineTerminators",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.findMatches(xf.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map((function(e){return{range:e.range,text:null}})),(function(){return null}))}},{key:"mightContainNonBasicASCII",value:function(){return this._buffer.mightContainNonBasicASCII()}},{key:"getAlternativeVersionId",value:function(){return this._assertNotDisposed(),this._alternativeVersionId}},{key:"getInitialUndoRedoSnapshot",value:function(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}},{key:"getOffsetAt",value:function(e){this._assertNotDisposed();var t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}},{key:"getPositionAt",value:function(e){this._assertNotDisposed();var t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}},{key:"_increaseVersionId",value:function(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}},{key:"_overwriteVersionId",value:function(e){this._versionId=e}},{key:"_overwriteAlternativeVersionId",value:function(e){this._alternativeVersionId=e}},{key:"_overwriteInitialUndoRedoSnapshot",value:function(e){this._initialUndoRedoSnapshot=e}},{key:"getValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Lu("Operation would exceed heap memory limits");var n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i}},{key:"createSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new $z(this._buffer.createSnapshot(e))}},{key:"getValueLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._assertNotDisposed();var n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i}},{key:"getValueInRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}},{key:"getValueLengthInRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}},{key:"getCharacterCountInRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}},{key:"getLineCount",value:function(){return this._assertNotDisposed(),this._buffer.getLineCount()}},{key:"getLineContent",value:function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Lu("Illegal value for lineNumber");return this._buffer.getLineContent(e)}},{key:"getLineLength",value:function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Lu("Illegal value for lineNumber");return this._buffer.getLineLength(e)}},{key:"getLinesContent",value:function(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Lu("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}},{key:"getEOL",value:function(){return this._assertNotDisposed(),this._buffer.getEOL()}},{key:"getEndOfLineSequence",value:function(){return this._assertNotDisposed(),"\n"===this._buffer.getEOL()?0:1}},{key:"getLineMinColumn",value:function(e){return this._assertNotDisposed(),1}},{key:"getLineMaxColumn",value:function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Lu("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}},{key:"getLineFirstNonWhitespaceColumn",value:function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Lu("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}},{key:"getLineLastNonWhitespaceColumn",value:function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Lu("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}},{key:"_validateRangeRelaxedNoAllocations",value:function(e){var t=this._buffer.getLineCount(),n=e.startLineNumber,i=e.startColumn,r=Math.floor("number"!=typeof n||isNaN(n)?1:n),o=Math.floor("number"!=typeof i||isNaN(i)?1:i);if(r<1)r=1,o=1;else if(r>t)r=t,o=this.getLineMaxColumn(r);else if(o<=1)o=1;else{var a=this.getLineMaxColumn(r);o>=a&&(o=a)}var s=e.endLineNumber,l=e.endColumn,u=Math.floor("number"!=typeof s||isNaN(s)?1:s),c=Math.floor("number"!=typeof l||isNaN(l)?1:l);if(u<1)u=1,c=1;else if(u>t)u=t,c=this.getLineMaxColumn(u);else if(c<=1)c=1;else{var d=this.getLineMaxColumn(u);c>=d&&(c=d)}return n===r&&i===o&&s===u&&l===c&&e instanceof hd&&!(e instanceof fd)?e:new hd(r,o,u,c)}},{key:"_isValidPosition",value:function(e,t,n){if("number"!=typeof e||"number"!=typeof t)return!1;if(isNaN(e)||isNaN(t))return!1;if(e<1||t<1)return!1;if((0|e)!==e||(0|t)!==t)return!1;if(e>this._buffer.getLineCount())return!1;if(1===t)return!0;if(t>this.getLineMaxColumn(e))return!1;if(1===n&&ff(this._buffer.getLineCharCode(e,t-2)))return!1;return!0}},{key:"_validatePosition",value:function(e,t,n){var i=Math.floor("number"!=typeof e||isNaN(e)?1:e),r=Math.floor("number"!=typeof t||isNaN(t)?1:t),o=this._buffer.getLineCount();if(i<1)return new dd(1,1);if(i>o)return new dd(o,this.getLineMaxColumn(o));if(r<=1)return new dd(i,1);var a=this.getLineMaxColumn(i);if(r>=a)return new dd(i,a);if(1===n&&ff(this._buffer.getLineCharCode(i,r-2)))return new dd(i,r-1);return new dd(i,r)}},{key:"validatePosition",value:function(e){return this._assertNotDisposed(),e instanceof dd&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}},{key:"_isValidRange",value:function(e,t){var n=e.startLineNumber,i=e.startColumn,r=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(n,i,0))return!1;if(!this._isValidPosition(r,o,0))return!1;if(1===t){var a=i>1?this._buffer.getLineCharCode(n,i-2):0,s=o>1&&o<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,o-2):0,l=ff(a),u=ff(s);return!l&&!u}return!0}},{key:"validateRange",value:function(e){if(this._assertNotDisposed(),e instanceof hd&&!(e instanceof fd)&&this._isValidRange(e,1))return e;var t=this._validatePosition(e.startLineNumber,e.startColumn,0),n=this._validatePosition(e.endLineNumber,e.endColumn,0),i=t.lineNumber,r=t.column,o=n.lineNumber,a=n.column,s=r>1?this._buffer.getLineCharCode(i,r-2):0,l=a>1&&a<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,a-2):0,u=ff(s),c=ff(l);return u||c?i===o&&r===a?new hd(i,r-1,o,a-1):u&&c?new hd(i,r-1,o,a+1):u?new hd(i,r-1,o,a):new hd(i,r,o,a+1):new hd(i,r,o,a)}},{key:"modifyPosition",value:function(e,t){this._assertNotDisposed();var n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}},{key:"getFullModelRange",value:function(){this._assertNotDisposed();var e=this.getLineCount();return new hd(1,1,e,this.getLineMaxColumn(e))}},{key:"findMatchesLineByLine",value:function(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)}},{key:"findMatches",value:function(e,t,n,i,r,o){var a=this,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:999;this._assertNotDisposed();var l=null;null!==t&&(Array.isArray(t)||(t=[t]),t.every((function(e){return hd.isIRange(e)}))&&(l=t.map((function(e){return a.validateRange(e)})))),null===l&&(l=[this.getFullModelRange()]),l=l.sort((function(e,t){return e.startLineNumber-t.startLineNumber||e.startColumn-t.startColumn}));var u,c=[];if(c.push(l.reduce((function(e,t){return hd.areIntersecting(e,t)?e.plusRange(t):(c.push(e),t)}))),!n&&e.indexOf("\n")<0){var d=new Nw(e,n,i,r).parseSearchRequest();if(!d)return[];u=function(e){return a.findMatchesLineByLine(e,d,o,s)}}else u=function(t){return Mw.findMatches(a,new Nw(e,n,i,r),t,o,s)};return c.map(u).reduce((function(e,t){return e.concat(t)}),[])}},{key:"findNextMatch",value:function(e,t,n,i,r,o){this._assertNotDisposed();var a=this.validatePosition(t);if(!n&&e.indexOf("\n")<0){var s=new Nw(e,n,i,r).parseSearchRequest();if(!s)return null;var l=this.getLineCount(),u=new hd(a.lineNumber,a.column,l,this.getLineMaxColumn(l)),c=this.findMatchesLineByLine(u,s,o,1);return Mw.findNextMatch(this,new Nw(e,n,i,r),a,o),c.length>0?c[0]:(u=new hd(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),(c=this.findMatchesLineByLine(u,s,o,1)).length>0?c[0]:null)}return Mw.findNextMatch(this,new Nw(e,n,i,r),a,o)}},{key:"findPreviousMatch",value:function(e,t,n,i,r,o){this._assertNotDisposed();var a=this.validatePosition(t);return Mw.findPreviousMatch(this,new Nw(e,n,i,r),a,o)}},{key:"pushStackElement",value:function(){this._commandManager.pushStackElement()}},{key:"popStackElement",value:function(){this._commandManager.popStackElement()}},{key:"pushEOL",value:function(e){if(("\n"===this.getEOL()?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}},{key:"_validateEditOperation",value:function(e){return e instanceof Sw?e:new Sw(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}},{key:"_validateEditOperations",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++)t[n]=this._validateEditOperation(e[n]);return t}},{key:"pushEditOperations",value:function(e,t,n,i){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n,i)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}},{key:"_pushEditOperations",value:function(e,t,n,i){var r=this;if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){var o=t.map((function(e){return{range:r.validateRange(e.range),text:e.text}})),a=!0;if(e)for(var s=0,l=e.length;s<l;s++){for(var u=e[s],c=!1,d=0,h=o.length;d<h;d++){var f=o[d].range,g=f.startLineNumber>u.endLineNumber,v=u.startLineNumber>f.endLineNumber;if(!g&&!v){c=!0;break}}if(!c){a=!1;break}}if(a)for(var p=0,m=this._trimAutoWhitespaceLines.length;p<m;p++){for(var y=this._trimAutoWhitespaceLines[p],_=this.getLineMaxColumn(y),b=!0,k=0,w=o.length;k<w;k++){var C=o[k].range,S=o[k].text;if(!(y<C.startLineNumber||y>C.endLineNumber)&&!(y===C.startLineNumber&&C.startColumn===_&&C.isEmpty()&&S&&S.length>0&&"\n"===S.charAt(0)||y===C.startLineNumber&&1===C.startColumn&&C.isEmpty()&&S&&S.length>0&&"\n"===S.charAt(S.length-1))){b=!1;break}}if(b){var x=new hd(y,1,y,_);t.push(new Sw(null,x,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n,i)}},{key:"_applyUndo",value:function(e,t,n,i){var r=this,o=e.map((function(e){var t=r.getPositionAt(e.newPosition),n=r.getPositionAt(e.newEnd);return{range:new hd(t.lineNumber,t.column,n.lineNumber,n.column),text:e.oldText}}));this._applyUndoRedoEdits(o,t,!0,!1,n,i)}},{key:"_applyRedo",value:function(e,t,n,i){var r=this,o=e.map((function(e){var t=r.getPositionAt(e.oldPosition),n=r.getPositionAt(e.oldEnd);return{range:new hd(t.lineNumber,t.column,n.lineNumber,n.column),text:e.newText}}));this._applyUndoRedoEdits(o,t,!1,!0,n,i)}},{key:"_applyUndoRedoEdits",value:function(e,t,n,i,r,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=i,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(r)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}},{key:"applyEdits",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();var n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}},{key:"_doApplyEdits",value:function(e,t){var n=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),o=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,0!==o.length){for(var a=0,s=o.length;a<s;a++){var l=o[a];this._decorationsTree.acceptReplace(l.rangeOffset,l.rangeLength,l.text.length,l.forceMoveMarkers)}var u=[];this._increaseVersionId();for(var c=n,d=0,h=o.length;d<h;d++){var f,g=function(e){var t=m+e,n=S+e;I.takeFromEndWhile((function(e){return e.lineNumber>n}));var i=I.takeFromEndWhile((function(e){return e.lineNumber===n}));u.push(new Vz(t,f.getLineContent(n),i))},v=o[d],p=C(Ax(v.text),1)[0];this._onDidChangeDecorations.fire();for(var m=v.range.startLineNumber,y=v.range.endLineNumber,_=y-m,b=p,k=Math.min(_,b),w=b-_,S=r-c-w+m,x=S,L=S+b,D=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new dd(x,1)),this.getOffsetAt(new dd(L,this.getLineMaxColumn(L))),0),N=Hz.fromDecorations(D),I=new Sa(N),E=k;E>=0;E--)f=this,g(E);if(k<_){var M=m+k;u.push(new zz(M+1,y))}if(k<b){for(var T,R=function(e){var t=F+e;B[e]=T.getLineContent(t),A.takeWhile((function(e){return e.lineNumber<t})),W[e]=A.takeWhile((function(e){return e.lineNumber===t}))},A=new Sa(N),P=m+k,O=b-k,F=r-c-O+P+1,W=[],B=[],H=0;H<O;H++)T=this,R(H);u.push(new Uz(P+1,m+b,B,W))}c+=w}this._emitContentChangedEvent(new Kz(u,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return null===i.reverseEdits?void 0:i.reverseEdits}},{key:"undo",value:function(){return this._undoRedoService.undo(this.uri)}},{key:"canUndo",value:function(){return this._undoRedoService.canUndo(this.uri)}},{key:"redo",value:function(){return this._undoRedoService.redo(this.uri)}},{key:"canRedo",value:function(){return this._undoRedoService.canRedo(this.uri)}},{key:"handleBeforeFireDecorationsChangedEvent",value:function(e){var t=this;if(null!==e&&0!==e.size){var n=Array.from(e).map((function(e){return new Vz(e,t.getLineContent(e),t._getInjectedTextInLine(e))}));this._onDidChangeInjectedText.fire(new qz(n))}}},{key:"changeDecorations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}},{key:"_changeDecorations",value:function(e,t){var n=this,i={addDecoration:function(t,i){return n._deltaDecorationsImpl(e,[],[{range:t,options:i}])[0]},changeDecoration:function(e,t){n._changeDecorationImpl(e,t)},changeDecorationOptions:function(e,t){n._changeDecorationOptionsImpl(e,hU(t))},removeDecoration:function(t){n._deltaDecorationsImpl(e,[t],[])},deltaDecorations:function(t,i){return 0===t.length&&0===i.length?[]:n._deltaDecorationsImpl(e,t,i)}},r=null;try{r=t(i)}catch(e){vu(e)}return i.addDecoration=Jz,i.changeDecoration=Jz,i.changeDecorationOptions=Jz,i.removeDecoration=Jz,i.deltaDecorations=Jz,r}},{key:"deltaDecorations",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._assertNotDisposed(),e||(e=[]),0===e.length&&0===t.length)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),vu(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}},{key:"_getTrackedRange",value:function(e){return this.getDecorationRange(e)}},{key:"_setTrackedRange",value:function(e,t,n){var i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:dU[n]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;var r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),o,a,r),i.setOptions(dU[n]),this._decorationsTree.insert(i),i.id}},{key:"removeAllDecorationsWithOwnerId",value:function(e){if(!this._isDisposed)for(var t=this._decorationsTree.collectNodesFromOwner(e),n=0,i=t.length;n<i;n++){var r=t[n];this._decorationsTree.delete(r),delete this._decorations[r.id]}}},{key:"getDecorationOptions",value:function(e){var t=this._decorations[e];return t?t.options:null}},{key:"getDecorationRange",value:function(e){var t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}},{key:"getLineDecorations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}},{key:"getLinesDecorations",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.getLineCount(),a=Math.min(o,Math.max(1,e)),s=Math.min(o,Math.max(1,t)),l=this.getLineMaxColumn(s),u=new hd(a,1,s,l),c=this._getDecorationsInRange(u,n,i,r);return pa(c,this._decorationProvider.getDecorationsInRange(u,n,i)),c}},{key:"getDecorationsInRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.validateRange(e),a=this._getDecorationsInRange(o,t,n,r);return pa(a,this._decorationProvider.getDecorationsInRange(o,t,n,i)),a}},{key:"getOverviewRulerDecorations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._decorationsTree.getAll(this,e,t,!0,!1)}},{key:"getInjectedTextDecorations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._decorationsTree.getAllInjectedText(this,e)}},{key:"_getInjectedTextInLine",value:function(e){var t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),i=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return Hz.fromDecorations(i).filter((function(t){return t.lineNumber===e}))}},{key:"getAllDecorations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._decorationsTree.getAll(this,e,t,!1,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t))}},{key:"getAllMarginDecorations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._decorationsTree.getAll(this,e,!1,!1,!0)}},{key:"_getDecorationsInRange",value:function(e,t,n,i){var r=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,r,o,t,n,i)}},{key:"getRangeAt",value:function(e,t){return this._buffer.getRangeAt(e,t-e)}},{key:"_changeDecorationImpl",value:function(e,t){var n=this._decorations[e];if(n){if(n.options.after){var i=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.endLineNumber)}if(n.options.before){var r=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}var o=this._validateRangeRelaxedNoAllocations(t),a=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),s=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),a,s,o),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}}},{key:"_changeDecorationOptionsImpl",value:function(e,t){var n=this._decorations[e];if(n){var i=!(!n.options.overviewRuler||!n.options.overviewRuler.color),r=!(!t.overviewRuler||!t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){var o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber)}if(n.options.before||t.before){var a=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}var s=i!==r,l=function(e){return!!e.after||!!e.before}(t)!==nU(n);s||l?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}}},{key:"_deltaDecorationsImpl",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.getVersionId(),o=t.length,a=0,s=n.length,l=0;this._onDidChangeDecorations.beginDeferredEmit();try{for(var u=new Array(s);a<o||l<s;){var c=null;if(a<o){do{c=this._decorations[t[a++]]}while(!c&&a<o);if(c){if(c.options.after){var d=this._decorationsTree.getNodeRange(this,c);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.endLineNumber)}if(c.options.before){var h=this._decorationsTree.getNodeRange(this,c);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(c),i||this._onDidChangeDecorations.checkAffectedAndFire(c.options)}}if(l<s){if(!c){var f=++this._lastDecorationId,g="".concat(this._instanceId,";").concat(f);c=new LV(g,0,0),this._decorations[g]=c}var v=n[l],p=this._validateRangeRelaxedNoAllocations(v.range),m=hU(v.options),y=this._buffer.getOffsetAt(p.startLineNumber,p.startColumn),_=this._buffer.getOffsetAt(p.endLineNumber,p.endColumn);c.ownerId=e,c.reset(r,y,_,p),c.setOptions(m),c.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.endLineNumber),c.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.startLineNumber),i||this._onDidChangeDecorations.checkAffectedAndFire(m),this._decorationsTree.insert(c),u[l]=c.id,l++}else c&&delete this._decorations[c.id]}return u}finally{this._onDidChangeDecorations.endDeferredEmit()}}},{key:"getLanguageId",value:function(){return this.tokenization.getLanguageId()}},{key:"setLanguage",value:function(e,t){var n=this;"string"==typeof e?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange((function(){return n._setLanguage(e.languageId,t)})),this._setLanguage(e.languageId,t))}},{key:"_setLanguage",value:function(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}},{key:"getLanguageIdAtPosition",value:function(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}},{key:"getWordAtPosition",value:function(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}},{key:"getWordUntilPosition",value:function(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}},{key:"normalizePosition",value:function(e,t){return e}},{key:"getLineIndentColumn",value:function(e){return function(e){var t=0,n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(" "!==s&&"\t"!==s)break;t++}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}(this.getLineContent(e))+1}}],[{key:"resolveOptions",value:function(e,t){if(t.detectIndentation){var n=vV(e,t.tabSize,t.insertSpaces);return new ww({tabSize:n.tabSize,indentSize:"tabSize",insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new ww(t)}}]),t}(Ru),Fz=gt,gt._MODEL_SYNC_LIMIT=52428800,gt.LARGE_FILE_SIZE_THRESHOLD=20971520,gt.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5,gt.LARGE_FILE_HEAP_OPERATION_THRESHOLD=268435456,gt.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Ws.tabSize,indentSize:Ws.indentSize,insertSpaces:Ws.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Ws.trimAutoWhitespace,largeFileOptimizations:Ws.largeFileOptimizations,bracketPairColorizationOptions:Ws.bracketPairColorizationOptions},gt);function tU(e){return!(!e.options.overviewRuler||!e.options.overviewRuler.color)}function nU(e){return!!e.options.after||!!e.options.before}eU=Fz=Zz([Yz(4,ox),Yz(5,Jb),Yz(6,Ek),Yz(7,Gm)],eU);var iU=function(){function e(){u(this,e),this._decorationsTree0=new NV,this._decorationsTree1=new NV,this._injectedTextDecorationsTree=new NV}return h(e,[{key:"ensureAllNodesHaveRanges",value:function(e){this.getAll(e,0,!1,!1,!1)}},{key:"_ensureNodesHaveRanges",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;null===s.range&&(s.range=e.getRangeAt(s.cachedAbsoluteStart,s.cachedAbsoluteEnd))}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}},{key:"getAllInInterval",value:function(e,t,n,i,r,o){var a=e.getVersionId(),s=this._intervalSearch(t,n,i,r,a,o);return this._ensureNodesHaveRanges(e,s)}},{key:"_intervalSearch",value:function(e,t,n,i,r,o){var a=this._decorationsTree0.intervalSearch(e,t,n,i,r,o),s=this._decorationsTree1.intervalSearch(e,t,n,i,r,o),l=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,r,o);return a.concat(s).concat(l)}},{key:"getInjectedTextInInterval",value:function(e,t,n,i){var r=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,n,i,!1,r,!1);return this._ensureNodesHaveRanges(e,o).filter((function(e){return e.options.showIfCollapsed||!e.range.isEmpty()}))}},{key:"getAllInjectedText",value:function(e,t){var n=e.getVersionId(),i=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,i).filter((function(e){return e.options.showIfCollapsed||!e.range.isEmpty()}))}},{key:"getAll",value:function(e,t,n,i,r){var o=e.getVersionId(),a=this._search(t,n,i,o,r);return this._ensureNodesHaveRanges(e,a)}},{key:"_search",value:function(e,t,n,i,r){if(n)return this._decorationsTree1.search(e,t,i,r);var o=this._decorationsTree0.search(e,t,i,r),a=this._decorationsTree1.search(e,t,i,r),s=this._injectedTextDecorationsTree.search(e,t,i,r);return o.concat(a).concat(s)}},{key:"collectNodesFromOwner",value:function(e){var t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}},{key:"collectNodesPostOrder",value:function(){var e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}},{key:"insert",value:function(e){nU(e)?this._injectedTextDecorationsTree.insert(e):tU(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}},{key:"delete",value:function(e){nU(e)?this._injectedTextDecorationsTree.delete(e):tU(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}},{key:"getNodeRange",value:function(e,t){var n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),null===t.range&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}},{key:"_resolveNode",value:function(e,t){nU(e)?this._injectedTextDecorationsTree.resolveNode(e,t):tU(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}},{key:"acceptReplace",value:function(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}}]),e}();function rU(e){return e.replace(/[^a-z0-9\-_]/gi," ")}var oU=function e(t){u(this,e),this.color=t.color||"",this.darkColor=t.darkColor||""},aU=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._resolvedColor=null,n.position="number"==typeof e.position?e.position:dw.Center,n}return p(t,e),h(t,[{key:"getColor",value:function(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}},{key:"invalidateCachedColor",value:function(){this._resolvedColor=null}},{key:"_resolveColor",value:function(e,t){if("string"==typeof e)return e;var n=e?t.getColor(e.id):null;return n?n.toString():""}}]),t}(oU),sU=function e(t){var n;u(this,e),this.position=null!==(n=null==t?void 0:t.position)&&void 0!==n?n:hw.Center,this.persistLane=null==t?void 0:t.persistLane},lU=function(e){function t(e){var n,i,r;return u(this,t),(n=l(this,t,[e])).position=e.position,n.sectionHeaderStyle=null!==(i=e.sectionHeaderStyle)&&void 0!==i?i:null,n.sectionHeaderText=null!==(r=e.sectionHeaderText)&&void 0!==r?r:null,n}return p(t,e),h(t,[{key:"getColor",value:function(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}},{key:"invalidateCachedColor",value:function(){this._resolvedColor=void 0}},{key:"_resolveColor",value:function(e,t){return"string"==typeof e?XC.fromHex(e):t.getColor(e.id)}}]),t}(oU),uU=function(){function e(t){u(this,e),this.content=t.content||"",this.inlineClassName=t.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=t.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=t.attachedData||null,this.cursorStops=t.cursorStops||null}return h(e,null,[{key:"from",value:function(t){return t instanceof e?t:new e(t)}}]),e}(),cU=function(){function e(t){var n,i,r,o,a,s;u(this,e),this.description=t.description,this.blockClassName=t.blockClassName?rU(t.blockClassName):null,this.blockDoesNotCollapse=null!==(n=t.blockDoesNotCollapse)&&void 0!==n?n:null,this.blockIsAfterEnd=null!==(i=t.blockIsAfterEnd)&&void 0!==i?i:null,this.blockPadding=null!==(r=t.blockPadding)&&void 0!==r?r:null,this.stickiness=t.stickiness||0,this.zIndex=t.zIndex||0,this.className=t.className?rU(t.className):null,this.shouldFillLineOnLineBreak=null!==(o=t.shouldFillLineOnLineBreak)&&void 0!==o?o:null,this.hoverMessage=t.hoverMessage||null,this.glyphMarginHoverMessage=t.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=t.lineNumberHoverMessage||null,this.isWholeLine=t.isWholeLine||!1,this.showIfCollapsed=t.showIfCollapsed||!1,this.collapseOnReplaceEdit=t.collapseOnReplaceEdit||!1,this.overviewRuler=t.overviewRuler?new aU(t.overviewRuler):null,this.minimap=t.minimap?new lU(t.minimap):null,this.glyphMargin=t.glyphMarginClassName?new sU(t.glyphMargin):null,this.glyphMarginClassName=t.glyphMarginClassName?rU(t.glyphMarginClassName):null,this.linesDecorationsClassName=t.linesDecorationsClassName?rU(t.linesDecorationsClassName):null,this.lineNumberClassName=t.lineNumberClassName?rU(t.lineNumberClassName):null,this.linesDecorationsTooltip=t.linesDecorationsTooltip?function(e){return e.replace(/[<>"'&]/g,(function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e}))}(t.linesDecorationsTooltip):null,this.firstLineDecorationClassName=t.firstLineDecorationClassName?rU(t.firstLineDecorationClassName):null,this.marginClassName=t.marginClassName?rU(t.marginClassName):null,this.inlineClassName=t.inlineClassName?rU(t.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=t.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=t.beforeContentClassName?rU(t.beforeContentClassName):null,this.afterContentClassName=t.afterContentClassName?rU(t.afterContentClassName):null,this.after=t.after?uU.from(t.after):null,this.before=t.before?uU.from(t.before):null,this.hideInCommentTokens=null!==(a=t.hideInCommentTokens)&&void 0!==a&&a,this.hideInStringTokens=null!==(s=t.hideInStringTokens)&&void 0!==s&&s}return h(e,null,[{key:"register",value:function(t){return new e(t)}},{key:"createDynamic",value:function(t){return new e(t)}}]),e}();cU.EMPTY=cU.register({description:"empty"});var dU=[cU.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),cU.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),cU.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),cU.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function hU(e){return e instanceof cU?e:cU.createDynamic(e)}var fU,gU=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).handleBeforeFire=e,n._actual=n._register(new Zu),n.event=n._actual.event,n._affectedInjectedTextLines=null,n._deferredCnt=0,n._shouldFireDeferred=!1,n._affectsMinimap=!1,n._affectsOverviewRuler=!1,n._affectsGlyphMargin=!1,n._affectsLineNumber=!1,n}return p(t,e),h(t,[{key:"beginDeferredEmit",value:function(){this._deferredCnt++}},{key:"endDeferredEmit",value:function(){var e;(this._deferredCnt--,0===this._deferredCnt)&&(this._shouldFireDeferred&&this.doFire(),null===(e=this._affectedInjectedTextLines)||void 0===e||e.clear(),this._affectedInjectedTextLines=null)}},{key:"recordLineAffectedByInjectedText",value:function(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}},{key:"checkAffectedAndFire",value:function(e){var t,n;this._affectsMinimap||(this._affectsMinimap=!!(null===(t=e.minimap)||void 0===t?void 0:t.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(null===(n=e.overviewRuler)||void 0===n?void 0:n.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!e.lineNumberClassName),this.tryFire()}},{key:"fire",value:function(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}},{key:"tryFire",value:function(){0===this._deferredCnt?this.doFire():this._shouldFireDeferred=!0}},{key:"doFire",value:function(){this.handleBeforeFire(this._affectedInjectedTextLines);var e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}]),t}(Ru),vU=function(e){function t(){var e;return u(this,t),(e=l(this,t))._fastEmitter=e._register(new Zu),e.fastEvent=e._fastEmitter.event,e._slowEmitter=e._register(new Zu),e.slowEvent=e._slowEmitter.event,e._deferredCnt=0,e._deferredEvent=null,e}return p(t,e),h(t,[{key:"beginDeferredEmit",value:function(){this._deferredCnt++}},{key:"endDeferredEmit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;var t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}},{key:"fire",value:function(e){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e:(this._fastEmitter.fire(e),this._slowEmitter.fire(e))}}]),t}(Ru),pU=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},mU=function(e,t){return function(n,i){t(n,i,e)}};function yU(e){return e.toString()}var _U=function(){function e(t,n,i){u(this,e),this.model=t,this._modelEventListeners=new Tu,this.model=t,this._modelEventListeners.add(t.onWillDispose((function(){return n(t)}))),this._modelEventListeners.add(t.onDidChangeLanguage((function(e){return i(t,e)})))}return h(e,[{key:"dispose",value:function(){this._modelEventListeners.dispose()}}]),e}(),bU=ys||ms?1:2,kU=function e(t,n,i,r,o,a,s,l){u(this,e),this.uri=t,this.initialUndoRedoSnapshot=n,this.time=i,this.sharesUndoRedoStack=r,this.heapSize=o,this.sha1=a,this.versionId=s,this.alternativeVersionId=l},wU=(vt=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t))._configurationService=e,o._resourcePropertiesService=n,o._undoRedoService=i,o._instantiationService=r,o._onModelAdded=o._register(new Zu),o.onModelAdded=o._onModelAdded.event,o._onModelRemoved=o._register(new Zu),o.onModelRemoved=o._onModelRemoved.event,o._onModelModeChanged=o._register(new Zu),o.onModelLanguageChanged=o._onModelModeChanged.event,o._modelCreationOptionsByLanguageAndResource=Object.create(null),o._models={},o._disposedModels=new Map,o._disposedModelsHeapSize=0,o._register(o._configurationService.onDidChangeConfiguration((function(e){return o._updateModelOptions(e)}))),o._updateModelOptions(void 0),o}return p(t,e),h(t,[{key:"_getEOL",value:function(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);var n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&"string"==typeof n&&"auto"!==n?n:3===Ns||2===Ns?"\n":"\r\n"}},{key:"_shouldRestoreUndoStack",value:function(){var e=this._configurationService.getValue("files.restoreUndoStack");return"boolean"!=typeof e||e}},{key:"getCreationOptions",value:function(e,t,n){var i="string"==typeof e?e:e.languageId,r=this._modelCreationOptionsByLanguageAndResource[i+t];if(!r){var o=this._configurationService.getValue("editor",{overrideIdentifier:i,resource:t}),a=this._getEOL(t,i);r=fU._readModelOptions({editor:o,eol:a},n),this._modelCreationOptionsByLanguageAndResource[i+t]=r}return r}},{key:"_updateModelOptions",value:function(e){var t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);for(var n=Object.keys(this._models),i=0,r=n.length;i<r;i++){var o=n[i],a=this._models[o],s=a.model.getLanguageId(),l=a.model.uri;if(!e||e.affectsConfiguration("editor",{overrideIdentifier:s,resource:l})||e.affectsConfiguration("files.eol",{overrideIdentifier:s,resource:l})){var u=t[s+l],c=this.getCreationOptions(s,l,a.model.isForSimpleWidget);fU._setModelOptionsForModel(a.model,c,u)}}}},{key:"_insertDisposedModel",value:function(e){this._disposedModels.set(yU(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}},{key:"_removeDisposedModel",value:function(e){var t=this._disposedModels.get(yU(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(yU(e)),t}},{key:"_ensureDisposedModelsHeapSize",value:function(e){if(this._disposedModelsHeapSize>e){var t=[];for(this._disposedModels.forEach((function(e){e.sharesUndoRedoStack||t.push(e)})),t.sort((function(e,t){return e.time-t.time}));t.length>0&&this._disposedModelsHeapSize>e;){var n=t.shift();this._removeDisposedModel(n.uri),null!==n.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}},{key:"_createModelData",value:function(e,t,n,i){var r=this,o=this.getCreationOptions(t,n,i),a=this._instantiationService.createInstance(eU,e,t,o,n);if(n&&this._disposedModels.has(yU(n))){var s=this._removeDisposedModel(n),l=this._undoRedoService.getElements(n),u=this._getSHA1Computer(),c=!!u.canComputeSHA1(a)&&u.computeSHA1(a)===s.sha1;if(c||s.sharesUndoRedoStack){var d=!0,h=!1,f=void 0;try{for(var g,v=l.past[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;rV(p)&&p.matchesResource(n)&&p.setModel(a)}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}var m=!0,y=!1,_=void 0;try{for(var b,k=l.future[Symbol.iterator]();!(m=(b=k.next()).done);m=!0){var w=b.value;rV(w)&&w.matchesResource(n)&&w.setModel(a)}}catch(e){y=!0,_=e}finally{try{m||null==k.return||k.return()}finally{if(y)throw _}}this._undoRedoService.setElementsValidFlag(n,!0,(function(e){return rV(e)&&e.matchesResource(n)})),c&&(a._overwriteVersionId(s.versionId),a._overwriteAlternativeVersionId(s.alternativeVersionId),a._overwriteInitialUndoRedoSnapshot(s.initialUndoRedoSnapshot))}else null!==s.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(s.initialUndoRedoSnapshot)}var C=yU(a.uri);if(this._models[C])throw new Error("ModelService: Cannot add model because it already exists!");var S=new _U(a,(function(e){return r._onWillDispose(e)}),(function(e,t){return r._onDidChangeLanguage(e,t)}));return this._models[C]=S,S}},{key:"createModel",value:function(e,t,n){var i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return i=t?this._createModelData(e,t,n,r):this._createModelData(e,kk,n,r),this._onModelAdded.fire(i.model),i.model}},{key:"getModels",value:function(){for(var e=[],t=Object.keys(this._models),n=0,i=t.length;n<i;n++){var r=t[n];e.push(this._models[r].model)}return e}},{key:"getModel",value:function(e){var t=yU(e),n=this._models[t];return n?n.model:null}},{key:"_schemaShouldMaintainUndoRedoElements",value:function(e){return e.scheme===Pv.file||e.scheme===Pv.vscodeRemote||e.scheme===Pv.vscodeUserData||e.scheme===Pv.vscodeNotebookCell||"fake-fs"===e.scheme}},{key:"_onWillDispose",value:function(e){var t=yU(e.uri),n=this._models[t],i=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString(),r=!1,o=0;if(i||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){var a=this._undoRedoService.getElements(e.uri);if(a.past.length>0||a.future.length>0){var s=!0,l=!1,u=void 0;try{for(var c,d=a.past[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;rV(h)&&h.matchesResource(e.uri)&&(r=!0,o+=h.heapSize(e.uri),h.setModel(e.uri))}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}var f=!0,g=!1,v=void 0;try{for(var p,m=a.future[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value;rV(y)&&y.matchesResource(e.uri)&&(r=!0,o+=y.heapSize(e.uri),y.setModel(e.uri))}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}}}var _=fU.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,b=this._getSHA1Computer();if(r)if(i||!(o>_)&&b.canComputeSHA1(e))this._ensureDisposedModelsHeapSize(_-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,(function(t){return rV(t)&&t.matchesResource(e.uri)})),this._insertDisposedModel(new kU(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),i,o,b.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else{var k=n.model.getInitialUndoRedoSnapshot();null!==k&&this._undoRedoService.restoreSnapshot(k)}else if(!i){var w=n.model.getInitialUndoRedoSnapshot();null!==w&&this._undoRedoService.restoreSnapshot(w)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}},{key:"_onDidChangeLanguage",value:function(e,t){var n=t.oldLanguage,i=e.getLanguageId(),r=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(i,e.uri,e.isForSimpleWidget);fU._setModelOptionsForModel(e,o,r),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}},{key:"_getSHA1Computer",value:function(){return new SU}}],[{key:"_readModelOptions",value:function(e,t){var n,i=Ws.tabSize;if(e.editor&&void 0!==e.editor.tabSize){var r=parseInt(e.editor.tabSize,10);isNaN(r)||(i=r),i<1&&(i=1)}var o="tabSize";if(e.editor&&void 0!==e.editor.indentSize&&"tabSize"!==e.editor.indentSize){var a=parseInt(e.editor.indentSize,10);isNaN(a)||(o=Math.max(a,1))}var s=Ws.insertSpaces;e.editor&&void 0!==e.editor.insertSpaces&&(s="false"!==e.editor.insertSpaces&&Boolean(e.editor.insertSpaces));var l=bU,u=e.eol;"\r\n"===u?l=2:"\n"===u&&(l=1);var c=Ws.trimAutoWhitespace;e.editor&&void 0!==e.editor.trimAutoWhitespace&&(c="false"!==e.editor.trimAutoWhitespace&&Boolean(e.editor.trimAutoWhitespace));var d=Ws.detectIndentation;e.editor&&void 0!==e.editor.detectIndentation&&(d="false"!==e.editor.detectIndentation&&Boolean(e.editor.detectIndentation));var h=Ws.largeFileOptimizations;e.editor&&void 0!==e.editor.largeFileOptimizations&&(h="false"!==e.editor.largeFileOptimizations&&Boolean(e.editor.largeFileOptimizations));var f=Ws.bracketPairColorizationOptions;return(null===(n=e.editor)||void 0===n?void 0:n.bracketPairColorization)&&"object"===L(e.editor.bracketPairColorization)&&(f={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:o,insertSpaces:s,detectIndentation:d,defaultEOL:l,trimAutoWhitespace:c,largeFileOptimizations:h,bracketPairColorizationOptions:f}}},{key:"_setModelOptionsForModel",value:function(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&1===e.getLineCount()&&e.setEOL(1===t.defaultEOL?0:1),n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&Ka(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions)||(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}}]),t}(Ru),fU=vt,vt.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20971520,vt);wU=fU=pU([mU(0,qb),mU(1,kS),mU(2,ox),mU(3,Gm)],wU);var CU,SU=function(){function e(){u(this,e)}return h(e,[{key:"canComputeSHA1",value:function(t){return t.getValueLength()<=e.MAX_MODEL_SIZE}},{key:"computeSHA1",value:function(e){for(var t,n=new $v,i=e.createSnapshot();t=i.read();)n.update(t);return n.digest()}}]),e}();SU.MAX_MODEL_SIZE=10485760,function(e){e[e.PRESERVE=0]="PRESERVE",e[e.LAST=1]="LAST"}(CU||(CU={}));var xU="workbench.contributions.quickaccess",LU=function(){function e(){u(this,e),this.providers=[],this.defaultProvider=void 0}return h(e,[{key:"registerQuickAccessProvider",value:function(e){var t=this;return 0===e.prefix.length?this.defaultProvider=e:this.providers.push(e),this.providers.sort((function(e,t){return t.prefix.length-e.prefix.length})),Mu((function(){t.providers.splice(t.providers.indexOf(e),1),t.defaultProvider===e&&(t.defaultProvider=void 0)}))}},{key:"getQuickAccessProviders",value:function(){return aa([this.defaultProvider].concat(x(this.providers)))}},{key:"getQuickAccessProvider",value:function(e){return e&&this.providers.find((function(t){return e.startsWith(t.prefix)}))||void 0||this.defaultProvider}}]),e}();i_.add(xU,new LU);var DU,NU,IU,EU,MU={ctrlCmd:!1,alt:!1};!function(e){e[e.Blur=1]="Blur",e[e.Gesture=2]="Gesture",e[e.Other=3]="Other"}(DU||(DU={})),function(e){e[e.NONE=0]="NONE",e[e.FIRST=1]="FIRST",e[e.SECOND=2]="SECOND",e[e.LAST=3]="LAST"}(NU||(NU={})),function(e){e[e.First=1]="First",e[e.Second=2]="Second",e[e.Last=3]="Last",e[e.Next=4]="Next",e[e.Previous=5]="Previous",e[e.NextPage=6]="NextPage",e[e.PreviousPage=7]="PreviousPage",e[e.NextSeparator=8]="NextSeparator",e[e.PreviousSeparator=9]="PreviousSeparator"}(IU||(IU={})),function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"}(EU||(EU={}));var TU=Zm("quickInputService"),RU=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},AU=function(e,t){return function(n,i){t(n,i,e)}},PU=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).quickInputService=e,i.instantiationService=n,i.registry=i_.as(xU),i.mapProviderToDescriptor=new Map,i.lastAcceptedPickerValues=new Map,i.visibleQuickAccess=void 0,i}return p(t,e),h(t,[{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this.doShowOrPick(e,!1,t)}},{key:"doShowOrPick",value:function(e,t,n){var i,r,o=C(this.getOrInstantiateProvider(e,null==n?void 0:n.enabledProviderPrefixes),2),a=o[0],s=o[1],l=this.visibleQuickAccess,u=null==l?void 0:l.descriptor;if(l&&s&&u===s)return e===s.prefix||(null==n?void 0:n.preserveValue)||(l.picker.value=e),void this.adjustValueSelection(l.picker,s,n);if(s&&!(null==n?void 0:n.preserveValue)){var c=void 0;if(l&&u&&u!==s){var d=l.value.substr(u.prefix.length);d&&(c="".concat(s.prefix).concat(d))}if(!c){var h=null==a?void 0:a.defaultFilterValue;h===CU.LAST?c=this.lastAcceptedPickerValues.get(s):"string"==typeof h&&(c="".concat(s.prefix).concat(h))}"string"==typeof c&&(e=c)}var f,g,v=null==l||null===(i=l.picker)||void 0===i?void 0:i.valueSelection,p=null==l||null===(r=l.picker)||void 0===r?void 0:r.value,m=new Tu,y=m.add(this.quickInputService.createQuickPick({useSeparators:!0}));(y.value=e,this.adjustValueSelection(y,s,n),y.placeholder=null!==(f=null==n?void 0:n.placeholder)&&void 0!==f?f:null==s?void 0:s.placeholder,y.quickNavigate=null==n?void 0:n.quickNavigateConfiguration,y.hideInput=!!y.quickNavigate&&!l,"number"==typeof(null==n?void 0:n.itemActivation)||(null==n?void 0:n.quickNavigateConfiguration))&&(y.itemActivation=null!==(g=null==n?void 0:n.itemActivation)&&void 0!==g?g:NU.SECOND);y.contextKey=null==s?void 0:s.contextKey,y.filterValue=function(e){return e.substring(s?s.prefix.length:0)};var _=void 0;t&&(_=new Ng,m.add(Au.once(y.onWillAccept)((function(e){e.veto(),y.hide()})))),m.add(this.registerPickerListeners(y,a,s,e,n));var b=m.add(new rc);return a&&m.add(a.provide(y,b.token,null==n?void 0:n.providerOptions)),Au.once(y.onDidHide)((function(){0===y.selectedItems.length&&b.cancel(),m.dispose(),null==_||_.complete(y.selectedItems.slice(0))})),y.show(),v&&p===e&&(y.valueSelection=v),t?null==_?void 0:_.p:void 0}},{key:"adjustValueSelection",value:function(e,t,n){var i,r;(null==n?void 0:n.preserveValue)?i=[e.value.length,e.value.length]:i=[null!==(r=null==t?void 0:t.prefix.length)&&void 0!==r?r:0,e.value.length];e.valueSelection=i}},{key:"registerPickerListeners",value:function(e,t,n,i,r){var o=this,a=new Tu,s=this.visibleQuickAccess={picker:e,descriptor:n,value:i};return a.add(Mu((function(){s===o.visibleQuickAccess&&(o.visibleQuickAccess=void 0)}))),a.add(e.onDidChangeValue((function(e){C(o.getOrInstantiateProvider(e,null==r?void 0:r.enabledProviderPrefixes),1)[0]!==t?o.show(e,{enabledProviderPrefixes:null==r?void 0:r.enabledProviderPrefixes,preserveValue:!0,providerOptions:null==r?void 0:r.providerOptions}):s.value=e}))),n&&a.add(e.onDidAccept((function(){o.lastAcceptedPickerValues.set(n,e.value)}))),a}},{key:"getOrInstantiateProvider",value:function(e,t){var n=this.registry.getQuickAccessProvider(e);if(!n||t&&!(null==t?void 0:t.includes(n.prefix)))return[void 0,void 0];var i=this.mapProviderToDescriptor.get(n);return i||(i=this.instantiationService.createInstance(n.ctor),this.mapProviderToDescriptor.set(n,i)),[i,n]}}]),t}(Ru);PU=RU([AU(0,TU),AU(1,Gm)],PU);var OU=function(e){function t(e){var n,i;u(this,t),(i=l(this,t))._onChange=i._register(new Zu),i.onChange=i._onChange.event,i._onKeyDown=i._register(new Zu),i.onKeyDown=i._onKeyDown.event,i._opts=e,i._checked=i._opts.isChecked;var r,o,a,s=["monaco-custom-toggle"];i._opts.icon&&(i._icon=i._opts.icon,(r=s).push.apply(r,x(ny.asClassNameArray(i._icon))));i._opts.actionClassName&&(o=s).push.apply(o,x(i._opts.actionClassName.split(" ")));return i._checked&&s.push("checked"),i.domNode=document.createElement("div"),i._hover=i._register(NO().setupManagedHover(null!==(a=e.hoverDelegate)&&void 0!==a?a:xO("mouse"),i.domNode,i._opts.title)),(n=i.domNode.classList).add.apply(n,x(s)),i._opts.notFocusable||(i.domNode.tabIndex=0),i.domNode.setAttribute("role","checkbox"),i.domNode.setAttribute("aria-checked",String(i._checked)),i.domNode.setAttribute("aria-label",i._opts.title),i.applyStyles(),i.onclick(i.domNode,(function(e){i.enabled&&(i.checked=!i._checked,i._onChange.fire(!1),e.preventDefault())})),i._register(i.ignoreGesture(i.domNode)),i.onkeydown(i.domNode,(function(e){if(10===e.keyCode||3===e.keyCode)return i.checked=!i._checked,i._onChange.fire(!0),e.preventDefault(),void e.stopPropagation();i._onKeyDown.fire(e)})),i}return p(t,e),h(t,[{key:"enabled",get:function(){return"true"!==this.domNode.getAttribute("aria-disabled")}},{key:"focus",value:function(){this.domNode.focus()}},{key:"checked",get:function(){return this._checked},set:function(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}},{key:"width",value:function(){return 22}},{key:"applyStyles",value:function(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}},{key:"enable",value:function(){this.domNode.setAttribute("aria-disabled",String(!1))}},{key:"disable",value:function(){this.domNode.setAttribute("aria-disabled",String(!0))}}]),t}(eE),FU=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},WU=function(){function e(t){u(this,e),this.nodes=t}return h(e,[{key:"toString",value:function(){return this.nodes.map((function(e){return"string"==typeof e?e:e.label})).join("")}}]),e}();FU([QI],WU.prototype,"toString",null);var BU=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;var HU={},VU=new cT("quick-input-button-icon-");function zU(e,t,n){var i=e.iconClass||function(e){if(e){var t,n=e.dark.toString();return HU[n]?t=HU[n]:(t=VU.nextId(),Qp(".".concat(t,", .hc-light .").concat(t),"background-image: ".concat(_m(e.light||e.dark))),Qp(".vs-dark .".concat(t,", .hc-black .").concat(t),"background-image: ".concat(_m(e.dark))),HU[n]=t),t}}(e.iconPath);return e.alwaysVisible&&(i=i?"".concat(i," always-visible"):"always-visible"),{id:t,label:"",tooltip:e.tooltip||"",class:i,enabled:!0,run:n}}function UU(e,t,n){cm(t);var i=function(e){for(var t,n=[],i=0;t=BU.exec(e);){t.index-i>0&&n.push(e.substring(i,t.index));var r=C(t,5),o=r[1],a=r[2],s=r[4];s?n.push({label:o,href:a,title:s}):n.push({label:o,href:a}),i=t.index+t[0].length}return i<e.length&&n.push(e.substring(i)),new WU(n)}(e),r=0,o=!0,a=!1,s=void 0;try{for(var l,u=function(){var e=l.value;if("string"==typeof e){var i;(i=t).append.apply(i,x(AE(e)))}else{var o=e.title;!o&&e.href.startsWith("command:")?o=Xa("executeCommand","Click to execute command '{0}'",e.href.substring(8)):o||(o=e.href);var a=gm("a",{href:e.href,title:o,tabIndex:r++},e.label);a.style.textDecoration="underline";var s=n.disposables.add(new LE(a,rm.CLICK)).event,u=n.disposables.add(new LE(a,rm.KEY_DOWN)).event,c=Au.chain(u,(function(e){return e.filter((function(e){var t=new rg(e);return t.equals(10)||t.equals(3)}))}));n.disposables.add(JI.addTarget(a));var d=n.disposables.add(new LE(a,XI.Tap)).event;Au.any(s,d,c)((function(t){(function(e){var t=e;return!(!t||"function"!=typeof t.preventDefault||"function"!=typeof t.stopPropagation)})(t)&&om(t,!0),n.callback(e.href)}),null,n.disposables),t.appendChild(a)}},c=i.nodes[Symbol.iterator]();!(o=(l=c.next()).done);o=!0)u()}catch(e){a=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}}var jU=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},KU=function(e,t){return function(n,i){t(n,i,e)}},qU="inQuickInput",GU=new jy(qU,!1,Xa("inQuickInput","Whether keyboard focus is inside the quick input control")),ZU=Sy.has(qU),YU="quickInputType",QU=new jy(YU,void 0,Xa("quickInputType","The type of the currently visible quick input")),XU="cursorAtEndOfQuickInputBox",$U=new jy(XU,!1,Xa("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),JU=Sy.has(XU),ej={iconClass:ny.asClassName(bd.quickInputBack),tooltip:Xa("quickInput.back","Back"),handle:-1},tj=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).ui=e,n._widgetUpdated=!1,n.visible=!1,n._enabled=!0,n._busy=!1,n._ignoreFocusOut=!1,n._leftButtons=[],n._rightButtons=[],n._inlineButtons=[],n.buttonsUpdated=!1,n._toggles=[],n.togglesUpdated=!1,n.noValidationMessage=t.noPromptMessage,n._severity=tx.Ignore,n.onDidTriggerButtonEmitter=n._register(new Zu),n.onDidHideEmitter=n._register(new Zu),n.onWillHideEmitter=n._register(new Zu),n.onDisposeEmitter=n._register(new Zu),n.visibleDisposables=n._register(new Tu),n.onDidHide=n.onDidHideEmitter.event,n}return p(t,e),h(t,[{key:"title",get:function(){return this._title},set:function(e){this._title=e,this.update()}},{key:"description",get:function(){return this._description},set:function(e){this._description=e,this.update()}},{key:"step",get:function(){return this._steps},set:function(e){this._steps=e,this.update()}},{key:"totalSteps",get:function(){return this._totalSteps},set:function(e){this._totalSteps=e,this.update()}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e,this.update()}},{key:"contextKey",get:function(){return this._contextKey},set:function(e){this._contextKey=e,this.update()}},{key:"busy",get:function(){return this._busy},set:function(e){this._busy=e,this.update()}},{key:"ignoreFocusOut",get:function(){return this._ignoreFocusOut},set:function(e){var t=this._ignoreFocusOut!==e&&!ws;this._ignoreFocusOut=e&&!ws,t&&this.update()}},{key:"titleButtons",get:function(){return this._leftButtons.length?x(this._leftButtons).concat([this._rightButtons]):this._rightButtons}},{key:"buttons",get:function(){return x(this._leftButtons).concat(x(this._rightButtons),x(this._inlineButtons))},set:function(e){this._leftButtons=e.filter((function(e){return e===ej})),this._rightButtons=e.filter((function(e){return e!==ej&&e.location!==EU.Inline})),this._inlineButtons=e.filter((function(e){return e.location===EU.Inline})),this.buttonsUpdated=!0,this.update()}},{key:"toggles",get:function(){return this._toggles},set:function(e){this._toggles=null!=e?e:[],this.togglesUpdated=!0,this.update()}},{key:"validationMessage",get:function(){return this._validationMessage},set:function(e){this._validationMessage=e,this.update()}},{key:"severity",get:function(){return this._severity},set:function(e){this._severity=e,this.update()}},{key:"show",value:function(){var e=this;this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton((function(t){-1!==e.buttons.indexOf(t)&&e.onDidTriggerButtonEmitter.fire(t)}))),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}},{key:"hide",value:function(){this.visible&&this.ui.hide()}},{key:"didHide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DU.Other;this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}},{key:"willHide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DU.Other;this.onWillHideEmitter.fire({reason:e})}},{key:"update",value:function(){var e=this;if(this.visible){var t=this.getTitle();t&&this.ui.title.textContent!==t?this.ui.title.textContent=t:t||"&nbsp;"===this.ui.title.innerHTML||(this.ui.title.innerText=" ");var n=this.getDescription();if(this.ui.description1.textContent!==n&&(this.ui.description1.textContent=n),this.ui.description2.textContent!==n&&(this.ui.description2.textContent=n),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?cm(this.ui.widget,this._widget):cm(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new wg,this.busyDelay.setIfNotSet((function(){e.visible&&e.ui.progressBar.infinite()}),800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();var i=this,r=this._leftButtons.map((function(e,t){return zU(e,"id-".concat(t),s((function(){return E(this,(function(t){return[2,i.onDidTriggerButtonEmitter.fire(e)]}))})))}));this.ui.leftActionBar.push(r,{icon:!0,label:!1}),this.ui.rightActionBar.clear();var o=this,a=this._rightButtons.map((function(e,t){return zU(e,"id-".concat(t),s((function(){return E(this,(function(t){return[2,o.onDidTriggerButtonEmitter.fire(e)]}))})))}));this.ui.rightActionBar.push(a,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();var l=this,u=this._inlineButtons.map((function(e,t){return zU(e,"id-".concat(t),s((function(){return E(this,(function(t){return[2,l.onDidTriggerButtonEmitter.fire(e)]}))})))}));this.ui.inlineActionBar.push(u,{icon:!0,label:!1})}if(this.togglesUpdated){var c,d;this.togglesUpdated=!1;var h=null!==(d=null===(c=this.toggles)||void 0===c?void 0:c.filter((function(e){return e instanceof OU})))&&void 0!==d?d:[];this.ui.inputBox.toggles=h}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);var f=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==f&&(this._lastValidationMessage=f,cm(this.ui.message),UU(f,this.ui.message,{callback:function(t){e.ui.linkOpenerDelegate(t)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}}},{key:"getTitle",value:function(){return this.title&&this.step?"".concat(this.title," (").concat(this.getSteps(),")"):this.title?this.title:this.step?this.getSteps():""}},{key:"getDescription",value:function(){return this.description||""}},{key:"getSteps",value:function(){return this.step&&this.totalSteps?Xa("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}},{key:"showMessageDecoration",value:function(e){if(this.ui.inputBox.showDecoration(e),e!==tx.Ignore){var t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?"".concat(t.foreground):"",this.ui.message.style.backgroundColor=t.background?"".concat(t.background):"",this.ui.message.style.border=t.border?"1px solid ".concat(t.border):"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}},{key:"dispose",value:function(){this.hide(),this.onDisposeEmitter.fire(),g(v(t.prototype),"dispose",this).call(this)}}]),t}(Ru);tj.noPromptMessage=Xa("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");var nj=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments))._value="",e.onDidChangeValueEmitter=e._register(new Zu),e.onWillAcceptEmitter=e._register(new Zu),e.onDidAcceptEmitter=e._register(new Zu),e.onDidCustomEmitter=e._register(new Zu),e._items=[],e.itemsUpdated=!1,e._canSelectMany=!1,e._canAcceptInBackground=!1,e._matchOnDescription=!1,e._matchOnDetail=!1,e._matchOnLabel=!0,e._matchOnLabelMode="fuzzy",e._sortByLabel=!0,e._keepScrollPosition=!1,e._itemActivation=NU.FIRST,e._activeItems=[],e.activeItemsUpdated=!1,e.activeItemsToConfirm=[],e.onDidChangeActiveEmitter=e._register(new Zu),e._selectedItems=[],e.selectedItemsUpdated=!1,e.selectedItemsToConfirm=[],e.onDidChangeSelectionEmitter=e._register(new Zu),e.onDidTriggerItemButtonEmitter=e._register(new Zu),e.onDidTriggerSeparatorButtonEmitter=e._register(new Zu),e.valueSelectionUpdated=!0,e._ok="default",e._customButton=!1,e._focusEventBufferer=new ec,e.type="quickPick",e.filterValue=function(e){return e},e.onDidChangeValue=e.onDidChangeValueEmitter.event,e.onWillAccept=e.onWillAcceptEmitter.event,e.onDidAccept=e.onDidAcceptEmitter.event,e.onDidChangeActive=e.onDidChangeActiveEmitter.event,e.onDidChangeSelection=e.onDidChangeSelectionEmitter.event,e.onDidTriggerItemButton=e.onDidTriggerItemButtonEmitter.event,e.onDidTriggerSeparatorButton=e.onDidTriggerSeparatorButtonEmitter.event,e}return p(t,e),h(t,[{key:"quickNavigate",get:function(){return this._quickNavigate},set:function(e){this._quickNavigate=e,this.update()}},{key:"value",get:function(){return this._value},set:function(e){this.doSetValue(e)}},{key:"doSetValue",value:function(e,t){if(this._value!==e){if(this._value=e,t||this.update(),this.visible)this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst();this.onDidChangeValueEmitter.fire(this._value)}}},{key:"ariaLabel",get:function(){return this._ariaLabel},set:function(e){this._ariaLabel=e,this.update()}},{key:"placeholder",get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.update()}},{key:"items",get:function(){return this._items},set:function(e){this._items=e,this.itemsUpdated=!0,this.update()}},{key:"scrollTop",get:function(){return this.ui.list.scrollTop},set:function(e){this.ui.list.scrollTop=e}},{key:"canSelectMany",get:function(){return this._canSelectMany},set:function(e){this._canSelectMany=e,this.update()}},{key:"canAcceptInBackground",get:function(){return this._canAcceptInBackground},set:function(e){this._canAcceptInBackground=e}},{key:"matchOnDescription",get:function(){return this._matchOnDescription},set:function(e){this._matchOnDescription=e,this.update()}},{key:"matchOnDetail",get:function(){return this._matchOnDetail},set:function(e){this._matchOnDetail=e,this.update()}},{key:"matchOnLabel",get:function(){return this._matchOnLabel},set:function(e){this._matchOnLabel=e,this.update()}},{key:"matchOnLabelMode",get:function(){return this._matchOnLabelMode},set:function(e){this._matchOnLabelMode=e,this.update()}},{key:"sortByLabel",get:function(){return this._sortByLabel},set:function(e){this._sortByLabel=e,this.update()}},{key:"keepScrollPosition",get:function(){return this._keepScrollPosition},set:function(e){this._keepScrollPosition=e}},{key:"itemActivation",get:function(){return this._itemActivation},set:function(e){this._itemActivation=e}},{key:"activeItems",get:function(){return this._activeItems},set:function(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}},{key:"selectedItems",get:function(){return this._selectedItems},set:function(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}},{key:"keyMods",get:function(){return this._quickNavigate?MU:this.ui.keyMods}},{key:"valueSelection",get:function(){var e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]},set:function(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}},{key:"customButton",get:function(){return this._customButton},set:function(e){this._customButton=e,this.update()}},{key:"customLabel",get:function(){return this._customButtonLabel},set:function(e){this._customButtonLabel=e,this.update()}},{key:"customHover",get:function(){return this._customButtonHover},set:function(e){this._customButtonHover=e,this.update()}},{key:"ok",get:function(){return this._ok},set:function(e){this._ok=e,this.update()}},{key:"hideInput",get:function(){return!!this._hideInput},set:function(e){this._hideInput=e,this.update()}},{key:"trySelectFirst",value:function(){this.canSelectMany||this.ui.list.focus(IU.First)}},{key:"show",value:function(){var e=this;this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((function(t){e.doSetValue(t,!0)}))),this.visibleDisposables.add(this.ui.onDidAccept((function(){e.canSelectMany?e.ui.list.getCheckedElements().length||(e._selectedItems=[],e.onDidChangeSelectionEmitter.fire(e.selectedItems)):e.activeItems[0]&&(e._selectedItems=[e.activeItems[0]],e.onDidChangeSelectionEmitter.fire(e.selectedItems)),e.handleAccept(!1)}))),this.visibleDisposables.add(this.ui.onDidCustom((function(){e.onDidCustomEmitter.fire()}))),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(function(e,t){return t}))((function(t){e.activeItemsUpdated||e.activeItemsToConfirm!==e._activeItems&&ea(t,e._activeItems,(function(e,t){return e===t}))||(e._activeItems=t,e.onDidChangeActiveEmitter.fire(t))}))),this.visibleDisposables.add(this.ui.list.onDidChangeSelection((function(t){var n=t.items,i=t.event;e.canSelectMany?n.length&&e.ui.list.setSelectedElements([]):e.selectedItemsToConfirm!==e._selectedItems&&ea(n,e._selectedItems,(function(e,t){return e===t}))||(e._selectedItems=n,e.onDidChangeSelectionEmitter.fire(n),n.length&&e.handleAccept(nm(i)&&1===i.button))}))),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements((function(t){e.canSelectMany&&e.visible&&(e.selectedItemsToConfirm!==e._selectedItems&&ea(t,e._selectedItems,(function(e,t){return e===t}))||(e._selectedItems=t,e.onDidChangeSelectionEmitter.fire(t)))}))),this.visibleDisposables.add(this.ui.list.onButtonTriggered((function(t){return e.onDidTriggerItemButtonEmitter.fire(t)}))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered((function(t){return e.onDidTriggerSeparatorButtonEmitter.fire(t)}))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),g(v(t.prototype),"show",this).call(this)}},{key:"handleAccept",value:function(e){var t=!1;this.onWillAcceptEmitter.fire({veto:function(){return t=!0}}),t||this.onDidAcceptEmitter.fire({inBackground:e})}},{key:"registerQuickNavigation",value:function(){var e=this;return cp(this.ui.container,rm.KEY_UP,(function(t){if(!e.canSelectMany&&e._quickNavigate){var n=new rg(t),i=n.keyCode,r=e._quickNavigate.keybindings.some((function(e){var t=e.getChords();return!(t.length>1)&&(t[0].shiftKey&&4===i?!(n.ctrlKey||n.altKey||n.metaKey):!(!t[0].altKey||6!==i)||(!(!t[0].ctrlKey||5!==i)||!(!t[0].metaKey||57!==i)))}));r&&(e.activeItems[0]&&(e._selectedItems=[e.activeItems[0]],e.onDidChangeSelectionEmitter.fire(e.selectedItems),e.handleAccept(!1)),e._quickNavigate=void 0)}}))}},{key:"update",value:function(){var e=this;if(this.visible){var n=this.keepScrollPosition?this.scrollTop:0,i=!!this.description,r={title:!!this.title||!!this.step||!!this.titleButtons.length,description:i,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||i,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:"default"===this.ok?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(r),g(v(t.prototype),"update",this).call(this),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");var o=this.ariaLabel;!o&&r.inputBox&&(o=this.placeholder||t.DEFAULT_ARIA_LABEL,this.title&&(o+=" - ".concat(this.title))),this.ui.list.ariaLabel!==o&&(this.ui.list.ariaLabel=null!=o?o:null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents((function(){switch(e.ui.list.setElements(e.items),e.ui.list.shouldLoop=!e.canSelectMany,e.ui.list.filter(e.filterValue(e.ui.inputBox.value)),e._itemActivation){case NU.NONE:e._itemActivation=NU.FIRST;break;case NU.SECOND:e.ui.list.focus(IU.Second),e._itemActivation=NU.FIRST;break;case NU.LAST:e.ui.list.focus(IU.Last),e._itemActivation=NU.FIRST;break;default:e.trySelectFirst()}}))),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",r.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(IU.First)),this.keepScrollPosition&&(this.scrollTop=n)}}},{key:"focus",value:function(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}},{key:"accept",value:function(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(null!=e&&e))}}]),t}(tj);nj.DEFAULT_ARIA_LABEL=Xa("quickInputBox.ariaLabel","Type to narrow down results.");var ij=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments))._value="",e.valueSelectionUpdated=!0,e._password=!1,e.onDidValueChangeEmitter=e._register(new Zu),e.onDidAcceptEmitter=e._register(new Zu),e.type="inputBox",e.onDidChangeValue=e.onDidValueChangeEmitter.event,e.onDidAccept=e.onDidAcceptEmitter.event,e}return p(t,e),h(t,[{key:"value",get:function(){return this._value},set:function(e){this._value=e||"",this.update()}},{key:"placeholder",get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.update()}},{key:"password",get:function(){return this._password},set:function(e){this._password=e,this.update()}},{key:"show",value:function(){var e=this;this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((function(t){t!==e.value&&(e._value=t,e.onDidValueChangeEmitter.fire(t))}))),this.visibleDisposables.add(this.ui.onDidAccept((function(){return e.onDidAcceptEmitter.fire()}))),this.valueSelectionUpdated=!0),g(v(t.prototype),"show",this).call(this)}},{key:"update",value:function(){if(this.visible){this.ui.container.classList.remove("hidden-input");var e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),g(v(t.prototype),"update",this).call(this),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}}}]),t}(tj),rj=function(e){function t(e,n){var r;return u(this,t),r=l(this,t,["element",!1,function(e){return i(r).getOverrideOptions(e)},e,n])}return p(t,e),h(t,[{key:"getOverrideOptions",value:function(e){var t;return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:(Jp(e.content)?null!==(t=e.content.textContent)&&void 0!==t?t:"":"string"==typeof e.content?e.content:e.content.value).includes("\n"),skipFadeInAnimation:!0}}}}]),t}(KI);rj=jU([KU(0,qb),KU(1,jI)],rj),XC.white.toString(),XC.white.toString();var oj=function(e){function t(e,n){var i;u(this,t),(i=l(this,t))._label="",i._onDidClick=i._register(new Zu),i._onDidEscape=i._register(new Zu),i.options=n,i._element=document.createElement("a"),i._element.classList.add("monaco-button"),i._element.tabIndex=0,i._element.setAttribute("role","button"),i._element.classList.toggle("secondary",!!n.secondary);var r=n.secondary?n.buttonSecondaryBackground:n.buttonBackground,o=n.secondary?n.buttonSecondaryForeground:n.buttonForeground;return i._element.style.color=o||"",i._element.style.backgroundColor=r||"",n.supportShortLabel&&(i._labelShortElement=document.createElement("div"),i._labelShortElement.classList.add("monaco-button-label-short"),i._element.appendChild(i._labelShortElement),i._labelElement=document.createElement("div"),i._labelElement.classList.add("monaco-button-label"),i._element.appendChild(i._labelElement),i._element.classList.add("monaco-text-button-with-short-label")),"string"==typeof n.title&&i.setTitle(n.title),"string"==typeof n.ariaLabel&&i._element.setAttribute("aria-label",n.ariaLabel),e.appendChild(i._element),i._register(JI.addTarget(i._element)),[rm.CLICK,XI.Tap].forEach((function(e){i._register(cp(i._element,e,(function(e){i.enabled?i._onDidClick.fire(e):om(e)})))})),i._register(cp(i._element,rm.KEY_DOWN,(function(e){var t=new rg(e),n=!1;i.enabled&&(t.equals(3)||t.equals(10))?(i._onDidClick.fire(e),n=!0):t.equals(9)&&(i._onDidEscape.fire(e),i._element.blur(),n=!0),n&&om(t,!0)}))),i._register(cp(i._element,rm.MOUSE_OVER,(function(e){i._element.classList.contains("disabled")||i.updateBackground(!0)}))),i._register(cp(i._element,rm.MOUSE_OUT,(function(e){i.updateBackground(!1)}))),i.focusTracker=i._register(sm(i._element)),i._register(i.focusTracker.onDidFocus((function(){i.enabled&&i.updateBackground(!0)}))),i._register(i.focusTracker.onDidBlur((function(){i.enabled&&i.updateBackground(!1)}))),i}return p(t,e),h(t,[{key:"onDidClick",get:function(){return this._onDidClick.event}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._element.remove()}},{key:"getContentElements",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=AE(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if("string"==typeof s){if(""===(s=s.trim()))continue;var l=document.createElement("span");l.textContent=s,t.push(l)}else t.push(s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}},{key:"updateBackground",value:function(e){var t;(t=this.options.secondary?e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:e?this.options.buttonHoverBackground:this.options.buttonBackground)&&(this._element.style.backgroundColor=t)}},{key:"element",get:function(){return this._element}},{key:"label",get:function(){return this._label},set:function(e){if(this._label!==e&&!(sT(this._label)&&sT(e)&&function(e,t){return e===t||!(!e||!t)&&e.value===t.value&&e.isTrusted===t.isTrusted&&e.supportThemeIcons===t.supportThemeIcons&&e.supportHtml===t.supportHtml&&(e.baseUri===t.baseUri||!!e.baseUri&&!!t.baseUri&&GM(ed.from(e.baseUri),ed.from(t.baseUri)))}(this._label,e))){this._element.classList.add("monaco-text-button");var t=this.options.supportShortLabel?this._labelElement:this._element;if(sT(e)){var n,i=wT(e,{inline:!0});i.dispose();var r=null===(n=i.element.querySelector("p"))||void 0===n?void 0:n.innerHTML;if(r){var o=Av(r,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=o}else cm(t)}else this.options.supportIcons?cm.apply(void 0,[t].concat(x(this.getContentElements(e)))):t.textContent=e;var a="";"string"==typeof this.options.title?a=this.options.title:this.options.title&&(a=NT(e)),this.setTitle(a),"string"==typeof this.options.ariaLabel?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",a),this._label=e}}},{key:"icon",set:function(e){var t;(t=this._element.classList).add.apply(t,x(ny.asClassNameArray(e)))}},{key:"enabled",get:function(){return!this._element.classList.contains("disabled")},set:function(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}},{key:"setTitle",value:function(e){var t;this._hover||""===e?this._hover&&this._hover.update(e):this._hover=this._register(NO().setupManagedHover(null!==(t=this.options.hoverDelegate)&&void 0!==t?t:xO("mouse"),this._element,e))}}]),t}(Ru),aj=function(){function e(t,n,i){u(this,e),this.options=n,this.styles=i,this.count=0,this.element=lm(t,gm(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}return h(e,[{key:"setCount",value:function(e){this.count=e,this.render()}},{key:"setTitleFormat",value:function(e){this.titleFormat=e,this.render()}},{key:"render",value:function(){var e,t;this.element.textContent=jh(this.countFormat,this.count),this.element.title=jh(this.titleFormat,this.count),this.element.style.backgroundColor=null!==(e=this.styles.badgeBackground)&&void 0!==e?e:"",this.element.style.color=null!==(t=this.styles.badgeForeground)&&void 0!==t?t:"",this.styles.badgeBorder&&(this.element.style.border="1px solid ".concat(this.styles.badgeBorder))}}]),e}(),sj="done",lj="active",uj="infinite",cj="infinite-long-running",dj="discrete",hj=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).progressSignal=i._register(new Pu),i.workedVal=0,i.showDelayedScheduler=i._register(new Sg((function(){return vm(i.element)}),0)),i.longRunningScheduler=i._register(new Sg((function(){return i.infiniteLongRunning()}),t.LONG_RUNNING_INFINITE_THRESHOLD)),i.create(e,n),i}return p(t,e),h(t,[{key:"create",value:function(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(null==t?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}},{key:"off",value:function(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(lj,uj,cj,dj),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}},{key:"stop",value:function(){return this.doDone(!1)}},{key:"doDone",value:function(e){var t=this;return this.element.classList.add(sj),this.element.classList.contains(uj)?(this.bit.style.opacity="0",e?setTimeout((function(){return t.off()}),200):this.off()):(this.bit.style.width="inherit",e?setTimeout((function(){return t.off()}),200):this.off()),this}},{key:"infinite",value:function(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(dj,sj,cj),this.element.classList.add(lj,uj),this.longRunningScheduler.schedule(),this}},{key:"infiniteLongRunning",value:function(){this.element.classList.add(cj)}},{key:"getContainer",value:function(){return this.element}}]),t}(Ru);hj.LONG_RUNNING_INFINITE_THRESHOLD=1e4;var fj=Xa("caseDescription","Match Case"),gj=Xa("wordsDescription","Match Whole Word"),vj=Xa("regexDescription","Use Regular Expression"),pj=function(e){function t(e){var n;return u(this,t),l(this,t,[{icon:bd.caseSensitive,title:fj+e.appendTitle,isChecked:e.isChecked,hoverDelegate:null!==(n=e.hoverDelegate)&&void 0!==n?n:xO("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground}])}return p(t,e),t}(OU),mj=function(e){function t(e){var n;return u(this,t),l(this,t,[{icon:bd.wholeWord,title:gj+e.appendTitle,isChecked:e.isChecked,hoverDelegate:null!==(n=e.hoverDelegate)&&void 0!==n?n:xO("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground}])}return p(t,e),t}(OU),yj=function(e){function t(e){var n;return u(this,t),l(this,t,[{icon:bd.regex,title:vj+e.appendTitle,isChecked:e.isChecked,hoverDelegate:null!==(n=e.hoverDelegate)&&void 0!==n?n:xO("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground}])}return p(t,e),t}(OU),_j=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n-1;u(this,e),this.items=t,this.start=n,this.end=i,this.index=r}return h(e,[{key:"current",value:function(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}},{key:"next",value:function(){return this.index=Math.min(this.index+1,this.end),this.current()}},{key:"previous",value:function(){return this.index=Math.max(this.index-1,this.start-1),this.current()}},{key:"first",value:function(){return this.index=this.start,this.current()}},{key:"last",value:function(){return this.index=this.end-1,this.current()}}]),e}(),bj=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;u(this,e),this._initialize(t),this._limit=n,this._onChange()}return h(e,[{key:"getHistory",value:function(){return this._elements}},{key:"add",value:function(e){this._history.delete(e),this._history.add(e),this._onChange()}},{key:"next",value:function(){return this._navigator.next()}},{key:"previous",value:function(){return 0!==this._currentPosition()?this._navigator.previous():null}},{key:"current",value:function(){return this._navigator.current()}},{key:"first",value:function(){return this._navigator.first()}},{key:"last",value:function(){return this._navigator.last()}},{key:"isLast",value:function(){return this._currentPosition()>=this._elements.length-1}},{key:"isNowhere",value:function(){return null===this._navigator.current()}},{key:"has",value:function(e){return this._history.has(e)}},{key:"_onChange",value:function(){this._reduceToLimit();var e=this._elements;this._navigator=new _j(e,0,e.length,e.length)}},{key:"_reduceToLimit",value:function(){var e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}},{key:"_currentPosition",value:function(){var e=this._navigator.current();return e?this._elements.indexOf(e):-1}},{key:"_initialize",value:function(e){this._history=new Set;var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this._history.add(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"_elements",get:function(){var e=[];return this._history.forEach((function(t){return e.push(t)})),e}}]),e}(),kj=gm,wj=function(e){function t(e,n,i){var r,o;u(this,t),(r=l(this,t)).state="idle",r.maxHeight=Number.POSITIVE_INFINITY,r._onDidChange=r._register(new Zu),r.onDidChange=r._onDidChange.event,r._onDidHeightChange=r._register(new Zu),r.onDidHeightChange=r._onDidHeightChange.event,r.contextViewProvider=n,r.options=i,r.message=null,r.placeholder=r.options.placeholder||"",r.tooltip=null!==(o=r.options.tooltip)&&void 0!==o?o:r.placeholder||"",r.ariaLabel=r.options.ariaLabel||"",r.options.validationOptions&&(r.validation=r.options.validationOptions.validation),r.element=lm(e,kj(".monaco-inputbox.idle"));var a=r.options.flexibleHeight?"textarea":"input",s=lm(r.element,kj(".ibwrapper"));if(r.input=lm(s,kj(a+".input.empty")),r.input.setAttribute("autocorrect","off"),r.input.setAttribute("autocapitalize","off"),r.input.setAttribute("spellcheck","false"),r.onfocus(r.input,(function(){return r.element.classList.add("synthetic-focus")})),r.onblur(r.input,(function(){return r.element.classList.remove("synthetic-focus")})),r.options.flexibleHeight){r.maxHeight="number"==typeof r.options.flexibleMaxHeight?r.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,r.mirror=lm(s,kj("div.mirror")),r.mirror.innerText=" ",r.scrollableElement=new pE(r.element,{vertical:1}),r.options.flexibleWidth&&(r.input.setAttribute("wrap","off"),r.mirror.style.whiteSpace="pre",r.mirror.style.wordWrap="initial"),lm(e,r.scrollableElement.getDomNode()),r._register(r.scrollableElement),r._register(r.scrollableElement.onScroll((function(e){return r.input.scrollTop=e.scrollTop})));var c=r._register(new LE(e.ownerDocument,"selectionchange")),d=Au.filter(c.event,(function(){var t=e.ownerDocument.getSelection();return(null==t?void 0:t.anchorNode)===s}));r._register(d(r.updateScrollDimensions,r)),r._register(r.onDidHeightChange(r.updateScrollDimensions,r))}else r.input.type=r.options.type||"text",r.input.setAttribute("wrap","off");return r.ariaLabel&&r.input.setAttribute("aria-label",r.ariaLabel),r.placeholder&&!r.options.showPlaceholderOnFocus&&r.setPlaceHolder(r.placeholder),r.tooltip&&r.setTooltip(r.tooltip),r.oninput(r.input,(function(){return r.onValueChange()})),r.onblur(r.input,(function(){return r.onBlur()})),r.onfocus(r.input,(function(){return r.onFocus()})),r._register(r.ignoreGesture(r.input)),setTimeout((function(){return r.updateMirror()}),0),r.options.actions&&(r.actionbar=r._register(new dW(r.element)),r.actionbar.push(r.options.actions,{icon:!0,label:!1})),r.applyStyles(),r}return p(t,e),h(t,[{key:"onBlur",value:function(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}},{key:"onFocus",value:function(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}},{key:"setPlaceHolder",value:function(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}},{key:"setTooltip",value:function(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(NO().setupManagedHover(xO("mouse"),this.input,e))}},{key:"inputElement",get:function(){return this.input}},{key:"value",get:function(){return this.input.value},set:function(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}},{key:"height",get:function(){return"number"==typeof this.cachedHeight?this.cachedHeight:Ep(this.element)}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"hasFocus",value:function(){return Fp(this.input)}},{key:"select",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}},{key:"isSelectionAtEnd",value:function(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}},{key:"getSelection",value:function(){var e,t=this.input.selectionStart;return null===t?null:{start:t,end:null!==(e=this.input.selectionEnd)&&void 0!==e?e:t}}},{key:"enable",value:function(){this.input.removeAttribute("disabled")}},{key:"disable",value:function(){this.blur(),this.input.disabled=!0,this._hideMessage()}},{key:"paddingRight",set:function(e){this.input.style.width="calc(100% - ".concat(e,"px)"),this.mirror&&(this.mirror.style.paddingRight=e+"px")}},{key:"updateScrollDimensions",value:function(){if("number"==typeof this.cachedContentHeight&&"number"==typeof this.cachedHeight&&this.scrollableElement){var e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}}},{key:"showMessage",value:function(e,t){if("open"!==this.state||!Ka(this.message,e)){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));var n=this.stylesForType(this.message.type);this.element.style.border="1px solid ".concat(km(n.border,"transparent")),this.message.content&&(this.hasFocus()||t)&&this._showMessage()}}},{key:"hideMessage",value:function(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}},{key:"validate",value:function(){var e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),null==e?void 0:e.type}},{key:"stylesForType",value:function(e){var t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}},{key:"classForType",value:function(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}},{key:"_showMessage",value:function(){var e=this;if(this.contextViewProvider&&this.message){var t,n=function(){return t.style.width=Dp(e.element)+"px"};this.contextViewProvider.showContextView({getAnchor:function(){return e.element},anchorAlignment:1,render:function(i){if(!e.message)return null;t=lm(i,kj(".monaco-inputbox-container")),n();var r={inline:!0,className:"monaco-inputbox-message"},o=e.message.formatContent?DE(e.message.content,r):function(e){var t=NE(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return t.textContent=e,t}(e.message.content,r);o.classList.add(e.classForType(e.message.type));var a,s,l=e.stylesForType(e.message.type);return o.style.backgroundColor=null!==(a=l.background)&&void 0!==a?a:"",o.style.color=null!==(s=l.foreground)&&void 0!==s?s:"",o.style.border=l.border?"1px solid ".concat(l.border):"",lm(t,o),null},onHide:function(){e.state="closed"},layout:n}),_R(3===this.message.type?Xa("alertErrorMessage","Error: {0}",this.message.content):2===this.message.type?Xa("alertWarningMessage","Warning: {0}",this.message.content):Xa("alertInfoMessage","Info: {0}",this.message.content)),this.state="open"}}},{key:"_hideMessage",value:function(){this.contextViewProvider&&("open"===this.state&&this.contextViewProvider.hideContextView(),this.state="idle")}},{key:"onValueChange",value:function(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),"open"===this.state&&this.contextViewProvider&&this.contextViewProvider.layout()}},{key:"updateMirror",value:function(){if(this.mirror){var e=this.value,t=10===e.charCodeAt(e.length-1)?" ":"";(e+t).replace(/\u000c/g,"")?this.mirror.textContent=e+t:this.mirror.innerText=" ",this.layout()}}},{key:"applyStyles",value:function(){var e,t,n,i=this.options.inputBoxStyles,r=null!==(e=i.inputBackground)&&void 0!==e?e:"",o=null!==(t=i.inputForeground)&&void 0!==t?t:"",a=null!==(n=i.inputBorder)&&void 0!==n?n:"";this.element.style.backgroundColor=r,this.element.style.color=o,this.input.style.backgroundColor="inherit",this.input.style.color=o,this.element.style.border="1px solid ".concat(km(a,"transparent"))}},{key:"layout",value:function(){if(this.mirror){var e=this.cachedContentHeight;this.cachedContentHeight=Ep(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}}},{key:"insertAtCursor",value:function(e){var t=this.inputElement,n=t.selectionStart,i=t.selectionEnd,r=t.value;null!==n&&null!==i&&(this.value=r.substr(0,n)+e+r.substr(i),t.setSelectionRange(n+1,n+1),this.layout())}},{key:"dispose",value:function(){var e;this._hideMessage(),this.message=null,null===(e=this.actionbar)||void 0===e||e.dispose(),g(v(t.prototype),"dispose",this).call(this)}}]),t}(eE),Cj=function(e){function t(e,n,i){var r;u(this,t);var o=Xa({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," or {0} for history","⇅"),a=Xa({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," ({0} for history)","⇅");(r=l(this,t,[e,n,i]))._onDidFocus=r._register(new Zu),r.onDidFocus=r._onDidFocus.event,r._onDidBlur=r._register(new Zu),r.onDidBlur=r._onDidBlur.event,r.history=new bj(i.history,100);var s=function(){if(i.showHistoryHint&&i.showHistoryHint()&&!r.placeholder.endsWith(o)&&!r.placeholder.endsWith(a)&&r.history.getHistory().length){var e=r.placeholder.endsWith(")")?o:a,t=r.placeholder+e;i.showPlaceholderOnFocus&&!Fp(r.input)?r.placeholder=t:r.setPlaceHolder(t)}};return r.observer=new MutationObserver((function(e,t){e.forEach((function(e){e.target.textContent||s()}))})),r.observer.observe(r.input,{attributeFilter:["class"]}),r.onfocus(r.input,(function(){return s()})),r.onblur(r.input,(function(){var e=function(e){if(r.placeholder.endsWith(e)){var t=r.placeholder.slice(0,r.placeholder.length-e.length);return i.showPlaceholderOnFocus?r.placeholder=t:r.setPlaceHolder(t),!0}return!1};e(a)||e(o)})),r}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this.observer&&(this.observer.disconnect(),this.observer=void 0)}},{key:"addToHistory",value:function(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}},{key:"isAtLastInHistory",value:function(){return this.history.isLast()}},{key:"isNowhereInHistory",value:function(){return this.history.isNowhere()}},{key:"showNextValue",value:function(){this.history.has(this.value)||this.addToHistory();var e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=null!=e?e:"",bR(this.value?this.value:Xa("clearedInput","Cleared Input"))}},{key:"showPreviousValue",value:function(){this.history.has(this.value)||this.addToHistory();var e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,bR(this.value))}},{key:"setPlaceHolder",value:function(e){g(v(t.prototype),"setPlaceHolder",this).call(this,e),this.setTooltip(e)}},{key:"onBlur",value:function(){g(v(t.prototype),"onBlur",this).call(this),this._onDidBlur.fire()}},{key:"onFocus",value:function(){g(v(t.prototype),"onFocus",this).call(this),this._onDidFocus.fire()}},{key:"getCurrentValue",value:function(){var e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}},{key:"getPreviousValue",value:function(){return this.history.previous()||this.history.first()}},{key:"getNextValue",value:function(){return this.history.next()}}]),t}(wj),Sj=Xa("defaultLabel","input"),xj=function(e){function t(e,n,i){var r;u(this,t),(r=l(this,t)).fixFocusOnOptionClickEnabled=!0,r.imeSessionInProgress=!1,r.additionalTogglesDisposables=r._register(new Pu),r.additionalToggles=[],r._onDidOptionChange=r._register(new Zu),r.onDidOptionChange=r._onDidOptionChange.event,r._onKeyDown=r._register(new Zu),r.onKeyDown=r._onKeyDown.event,r._onMouseDown=r._register(new Zu),r.onMouseDown=r._onMouseDown.event,r._onInput=r._register(new Zu),r._onKeyUp=r._register(new Zu),r._onCaseSensitiveKeyDown=r._register(new Zu),r.onCaseSensitiveKeyDown=r._onCaseSensitiveKeyDown.event,r._onRegexKeyDown=r._register(new Zu),r.onRegexKeyDown=r._onRegexKeyDown.event,r._lastHighlightFindOptions=0,r.placeholder=i.placeholder||"",r.validation=i.validation,r.label=i.label||Sj,r.showCommonFindToggles=!!i.showCommonFindToggles;var o=i.appendCaseSensitiveLabel||"",a=i.appendWholeWordsLabel||"",s=i.appendRegexLabel||"",c=i.history||[],d=!!i.flexibleHeight,h=!!i.flexibleWidth,f=i.flexibleMaxHeight;r.domNode=document.createElement("div"),r.domNode.classList.add("monaco-findInput"),r.inputBox=r._register(new Cj(r.domNode,n,{placeholder:r.placeholder||"",ariaLabel:r.label||"",validationOptions:{validation:r.validation},history:c,showHistoryHint:i.showHistoryHint,flexibleHeight:d,flexibleWidth:h,flexibleMaxHeight:f,inputBoxStyles:i.inputBoxStyles}));var g=r._register(LO());if(r.showCommonFindToggles){r.regex=r._register(new yj(_({appendTitle:s,isChecked:!1,hoverDelegate:g},i.toggleStyles))),r._register(r.regex.onChange((function(e){r._onDidOptionChange.fire(e),!e&&r.fixFocusOnOptionClickEnabled&&r.inputBox.focus(),r.validate()}))),r._register(r.regex.onKeyDown((function(e){r._onRegexKeyDown.fire(e)}))),r.wholeWords=r._register(new mj(_({appendTitle:a,isChecked:!1,hoverDelegate:g},i.toggleStyles))),r._register(r.wholeWords.onChange((function(e){r._onDidOptionChange.fire(e),!e&&r.fixFocusOnOptionClickEnabled&&r.inputBox.focus(),r.validate()}))),r.caseSensitive=r._register(new pj(_({appendTitle:o,isChecked:!1,hoverDelegate:g},i.toggleStyles))),r._register(r.caseSensitive.onChange((function(e){r._onDidOptionChange.fire(e),!e&&r.fixFocusOnOptionClickEnabled&&r.inputBox.focus(),r.validate()}))),r._register(r.caseSensitive.onKeyDown((function(e){r._onCaseSensitiveKeyDown.fire(e)})));var v=[r.caseSensitive.domNode,r.wholeWords.domNode,r.regex.domNode];r.onkeydown(r.domNode,(function(e){if(e.equals(15)||e.equals(17)||e.equals(9)){var t=v.indexOf(r.domNode.ownerDocument.activeElement);if(t>=0){var n=-1;e.equals(17)?n=(t+1)%v.length:e.equals(15)&&(n=0===t?v.length-1:t-1),e.equals(9)?(v[t].blur(),r.inputBox.focus()):n>=0&&v[n].focus(),om(e,!0)}}}))}return r.controls=document.createElement("div"),r.controls.className="controls",r.controls.style.display=r.showCommonFindToggles?"":"none",r.caseSensitive&&r.controls.append(r.caseSensitive.domNode),r.wholeWords&&r.controls.appendChild(r.wholeWords.domNode),r.regex&&r.controls.appendChild(r.regex.domNode),r.setAdditionalToggles(null==i?void 0:i.additionalToggles),r.controls&&r.domNode.appendChild(r.controls),null==e||e.appendChild(r.domNode),r._register(cp(r.inputBox.inputElement,"compositionstart",(function(e){r.imeSessionInProgress=!0}))),r._register(cp(r.inputBox.inputElement,"compositionend",(function(e){r.imeSessionInProgress=!1,r._onInput.fire()}))),r.onkeydown(r.inputBox.inputElement,(function(e){return r._onKeyDown.fire(e)})),r.onkeyup(r.inputBox.inputElement,(function(e){return r._onKeyUp.fire(e)})),r.oninput(r.inputBox.inputElement,(function(e){return r._onInput.fire()})),r.onmousedown(r.inputBox.inputElement,(function(e){return r._onMouseDown.fire(e)})),r}return p(t,e),h(t,[{key:"onDidChange",get:function(){return this.inputBox.onDidChange}},{key:"layout",value:function(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}},{key:"enable",value:function(){var e,t,n;this.domNode.classList.remove("disabled"),this.inputBox.enable(),null===(e=this.regex)||void 0===e||e.enable(),null===(t=this.wholeWords)||void 0===t||t.enable(),null===(n=this.caseSensitive)||void 0===n||n.enable();var i=!0,r=!1,o=void 0;try{for(var a,s=this.additionalToggles[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){a.value.enable()}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}},{key:"disable",value:function(){var e,t,n;this.domNode.classList.add("disabled"),this.inputBox.disable(),null===(e=this.regex)||void 0===e||e.disable(),null===(t=this.wholeWords)||void 0===t||t.disable(),null===(n=this.caseSensitive)||void 0===n||n.disable();var i=!0,r=!1,o=void 0;try{for(var a,s=this.additionalToggles[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){a.value.disable()}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}},{key:"setFocusInputOnOptionClick",value:function(e){this.fixFocusOnOptionClickEnabled=e}},{key:"setEnabled",value:function(e){e?this.enable():this.disable()}},{key:"setAdditionalToggles",value:function(e){var t=this,n=!0,i=!1,r=void 0;try{for(var o,a=this.additionalToggles[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.domNode.remove()}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this.additionalToggles=[],this.additionalTogglesDisposables.value=new Tu;var s=!0,l=!1,u=void 0;try{for(var c,d=(null!=e?e:[])[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;this.additionalTogglesDisposables.value.add(h),this.controls.appendChild(h.domNode),this.additionalTogglesDisposables.value.add(h.onChange((function(e){t._onDidOptionChange.fire(e),!e&&t.fixFocusOnOptionClickEnabled&&t.inputBox.focus()}))),this.additionalToggles.push(h)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}},{key:"updateInputBoxPadding",value:function(){var e,t,n,i,r,o,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(null!==(i=null===(e=this.caseSensitive)||void 0===e?void 0:e.width())&&void 0!==i?i:0)+(null!==(r=null===(t=this.wholeWords)||void 0===t?void 0:t.width())&&void 0!==r?r:0)+(null!==(o=null===(n=this.regex)||void 0===n?void 0:n.width())&&void 0!==o?o:0)+this.additionalToggles.reduce((function(e,t){return e+t.width()}),0)}},{key:"getValue",value:function(){return this.inputBox.value}},{key:"setValue",value:function(e){this.inputBox.value!==e&&(this.inputBox.value=e)}},{key:"select",value:function(){this.inputBox.select()}},{key:"focus",value:function(){this.inputBox.focus()}},{key:"getCaseSensitive",value:function(){var e,t;return null!==(t=null===(e=this.caseSensitive)||void 0===e?void 0:e.checked)&&void 0!==t&&t}},{key:"setCaseSensitive",value:function(e){this.caseSensitive&&(this.caseSensitive.checked=e)}},{key:"getWholeWords",value:function(){var e,t;return null!==(t=null===(e=this.wholeWords)||void 0===e?void 0:e.checked)&&void 0!==t&&t}},{key:"setWholeWords",value:function(e){this.wholeWords&&(this.wholeWords.checked=e)}},{key:"getRegex",value:function(){var e,t;return null!==(t=null===(e=this.regex)||void 0===e?void 0:e.checked)&&void 0!==t&&t}},{key:"setRegex",value:function(e){this.regex&&(this.regex.checked=e,this.validate())}},{key:"focusOnCaseSensitive",value:function(){var e;null===(e=this.caseSensitive)||void 0===e||e.focus()}},{key:"highlightFindOptions",value:function(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}},{key:"validate",value:function(){this.inputBox.validate()}},{key:"showMessage",value:function(e){this.inputBox.showMessage(e)}},{key:"clearMessage",value:function(){this.inputBox.hideMessage()}}]),t}(eE),Lj=gm,Dj=function(e){function t(e,n,i){var r;u(this,t),(r=l(this,t)).parent=e,r.onKeyDown=function(e){return hp(r.findInput.inputBox.inputElement,rm.KEY_DOWN,e)},r.onDidChange=function(e){return r.findInput.onDidChange(e)},r.container=lm(r.parent,Lj(".quick-input-box")),r.findInput=r._register(new xj(r.container,void 0,{label:"",inputBoxStyles:n,toggleStyles:i}));var o=r.findInput.inputBox.inputElement;return o.role="combobox",o.ariaHasPopup="menu",o.ariaAutoComplete="list",o.ariaExpanded="true",r}return p(t,e),h(t,[{key:"value",get:function(){return this.findInput.getValue()},set:function(e){this.findInput.setValue(e)}},{key:"select",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.findInput.inputBox.select(e)}},{key:"getSelection",value:function(){return this.findInput.inputBox.getSelection()}},{key:"isSelectionAtEnd",value:function(){return this.findInput.inputBox.isSelectionAtEnd()}},{key:"placeholder",get:function(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""},set:function(e){this.findInput.inputBox.setPlaceHolder(e)}},{key:"password",get:function(){return"password"===this.findInput.inputBox.inputElement.type},set:function(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}},{key:"enabled",set:function(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}},{key:"toggles",set:function(e){this.findInput.setAdditionalToggles(e)}},{key:"setAttribute",value:function(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}},{key:"showDecoration",value:function(e){e===tx.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===tx.Info?1:e===tx.Warning?2:3,content:""})}},{key:"stylesForType",value:function(e){return this.findInput.inputBox.stylesForType(e===tx.Info?1:e===tx.Warning?2:3)}},{key:"setFocus",value:function(){this.findInput.focus()}},{key:"layout",value:function(){this.findInput.inputBox.layout()}}]),t}(Ru),Nj=function(){function e(t,n){u(this,e),this.renderer=t,this.modelProvider=n}return h(e,[{key:"templateId",get:function(){return this.renderer.templateId}},{key:"renderTemplate",value:function(e){return{data:this.renderer.renderTemplate(e),disposable:Ru.None}}},{key:"renderElement",value:function(e,t,n,i){var r,o=this;if(null===(r=n.disposable)||void 0===r||r.dispose(),n.data){var a=this.modelProvider();if(a.isResolved(e))return this.renderer.renderElement(a.get(e),e,n.data,i);var s=new rc,l=a.resolve(e,s.token);n.disposable={dispose:function(){return s.cancel()}},this.renderer.renderPlaceholder(e,n.data),l.then((function(t){return o.renderer.renderElement(t,e,n.data,i)}))}}},{key:"disposeTemplate",value:function(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}]),e}(),Ij=function(){function e(t,n){u(this,e),this.modelProvider=t,this.accessibilityProvider=n}return h(e,[{key:"getWidgetAriaLabel",value:function(){return this.accessibilityProvider.getWidgetAriaLabel()}},{key:"getAriaLabel",value:function(e){var t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}]),e}();var Ej,Mj=function(){function e(t,n,i,r){var o=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};u(this,e);var s=function(){return o.model},l=r.map((function(e){return new Nj(e,s)}));this.list=new _F(t,n,i,l,function(e,t){return b(_({},t),{accessibilityProvider:t.accessibilityProvider&&new Ij(e,t.accessibilityProvider)})}(s,a))}return h(e,[{key:"updateOptions",value:function(e){this.list.updateOptions(e)}},{key:"getHTMLElement",value:function(){return this.list.getHTMLElement()}},{key:"onDidFocus",get:function(){return this.list.onDidFocus}},{key:"widget",get:function(){return this.list}},{key:"onDidDispose",get:function(){return this.list.onDidDispose}},{key:"onMouseDblClick",get:function(){var e=this;return Au.map(this.list.onMouseDblClick,(function(t){var n=t.element,i=t.index,r=t.browserEvent;return{element:void 0===n?void 0:e._model.get(n),index:i,browserEvent:r}}))}},{key:"onPointer",get:function(){var e=this;return Au.map(this.list.onPointer,(function(t){var n=t.element,i=t.index,r=t.browserEvent;return{element:void 0===n?void 0:e._model.get(n),index:i,browserEvent:r}}))}},{key:"onDidChangeSelection",get:function(){var e=this;return Au.map(this.list.onDidChangeSelection,(function(t){var n=t.elements,i=t.indexes,r=t.browserEvent;return{elements:n.map((function(t){return e._model.get(t)})),indexes:i,browserEvent:r}}))}},{key:"model",get:function(){return this._model},set:function(e){this._model=e,this.list.splice(0,this.list.length,ha(e.length))}},{key:"getFocus",value:function(){return this.list.getFocus()}},{key:"getSelection",value:function(){return this.list.getSelection()}},{key:"getSelectedElements",value:function(){var e=this;return this.getSelection().map((function(t){return e.model.get(t)}))}},{key:"style",value:function(e){this.list.style(e)}},{key:"dispose",value:function(){this.list.dispose()}}]),e}(),Tj=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};!function(e){e.North="north",e.South="south",e.East="east",e.West="west"}(Ej||(Ej={}));var Rj=new Zu,Aj=new Zu,Pj=function(){function e(t){u(this,e),this.el=t,this.disposables=new Tu}return h(e,[{key:"onPointerMove",get:function(){return this.disposables.add(new LE(ep(this.el),"mousemove")).event}},{key:"onPointerUp",get:function(){return this.disposables.add(new LE(ep(this.el),"mouseup")).event}},{key:"dispose",value:function(){this.disposables.dispose()}}]),e}();Tj([QI],Pj.prototype,"onPointerMove",null),Tj([QI],Pj.prototype,"onPointerUp",null);var Oj=function(){function e(t){u(this,e),this.el=t,this.disposables=new Tu}return h(e,[{key:"onPointerMove",get:function(){return this.disposables.add(new LE(this.el,XI.Change)).event}},{key:"onPointerUp",get:function(){return this.disposables.add(new LE(this.el,XI.End)).event}},{key:"dispose",value:function(){this.disposables.dispose()}}]),e}();Tj([QI],Oj.prototype,"onPointerMove",null),Tj([QI],Oj.prototype,"onPointerUp",null);var Fj=function(){function e(t){u(this,e),this.factory=t}return h(e,[{key:"onPointerMove",get:function(){return this.factory.onPointerMove}},{key:"onPointerUp",get:function(){return this.factory.onPointerUp}},{key:"dispose",value:function(){}}]),e}();Tj([QI],Fj.prototype,"onPointerMove",null),Tj([QI],Fj.prototype,"onPointerUp",null);var Wj,Bj,Hj="pointer-events-disabled",Vj=function(e){function t(e,n,i){var r;u(this,t),(r=l(this,t)).hoverDelay=300,r.hoverDelayer=r._register(new vg(r.hoverDelay)),r._state=3,r.onDidEnablementChange=r._register(new Zu),r._onDidStart=r._register(new Zu),r._onDidChange=r._register(new Zu),r._onDidReset=r._register(new Zu),r._onDidEnd=r._register(new Zu),r.orthogonalStartSashDisposables=r._register(new Tu),r.orthogonalStartDragHandleDisposables=r._register(new Tu),r.orthogonalEndSashDisposables=r._register(new Tu),r.orthogonalEndDragHandleDisposables=r._register(new Tu),r.onDidStart=r._onDidStart.event,r.onDidChange=r._onDidChange.event,r.onDidReset=r._onDidReset.event,r.onDidEnd=r._onDidEnd.event,r.linkedSash=void 0,r.el=lm(e,gm(".monaco-sash")),i.orthogonalEdge&&r.el.classList.add("orthogonal-edge-".concat(i.orthogonalEdge)),ms&&r.el.classList.add("mac");var o=r._register(new LE(r.el,"mousedown")).event;r._register(o((function(t){return r.onPointerStart(t,new Pj(e))}),r));var a=r._register(new LE(r.el,"dblclick")).event;r._register(a(r.onPointerDoublePress,r));var s=r._register(new LE(r.el,"mouseenter")).event;r._register(s((function(){return t.onMouseEnter(r)})));var c=r._register(new LE(r.el,"mouseleave")).event;r._register(c((function(){return t.onMouseLeave(r)}))),r._register(JI.addTarget(r.el));var d=r._register(new LE(r.el,XI.Start)).event;r._register(d((function(e){return r.onPointerStart(e,new Oj(r.el))}),r));var h=r._register(new LE(r.el,XI.Tap)).event,f=void 0;return r._register(h((function(e){if(f)return clearTimeout(f),f=void 0,void r.onPointerDoublePress(e);clearTimeout(f),f=setTimeout((function(){return f=void 0}),250)}),r)),"number"==typeof i.size?(r.size=i.size,0===i.orientation?r.el.style.width="".concat(r.size,"px"):r.el.style.height="".concat(r.size,"px")):(r.size=4,r._register(Rj.event((function(e){r.size=e,r.layout()})))),r._register(Aj.event((function(e){return r.hoverDelay=e}))),r.layoutProvider=n,r.orthogonalStartSash=i.orthogonalStartSash,r.orthogonalEndSash=i.orthogonalEndSash,r.orientation=i.orientation||0,1===r.orientation?(r.el.classList.add("horizontal"),r.el.classList.remove("vertical")):(r.el.classList.remove("horizontal"),r.el.classList.add("vertical")),r.el.classList.toggle("debug",false),r.layout(),r}return p(t,e),h(t,[{key:"state",get:function(){return this._state},set:function(e){this._state!==e&&(this.el.classList.toggle("disabled",0===e),this.el.classList.toggle("minimum",1===e),this.el.classList.toggle("maximum",2===e),this._state=e,this.onDidEnablementChange.fire(e))}},{key:"orthogonalStartSash",get:function(){return this._orthogonalStartSash},set:function(e){var n=this;if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){var i=function(i){n.orthogonalStartDragHandleDisposables.clear(),0!==i&&(n._orthogonalStartDragHandle=lm(n.el,gm(".orthogonal-drag-handle.start")),n.orthogonalStartDragHandleDisposables.add(Mu((function(){return n._orthogonalStartDragHandle.remove()}))),n.orthogonalStartDragHandleDisposables.add(new LE(n._orthogonalStartDragHandle,"mouseenter")).event((function(){return t.onMouseEnter(e)}),void 0,n.orthogonalStartDragHandleDisposables),n.orthogonalStartDragHandleDisposables.add(new LE(n._orthogonalStartDragHandle,"mouseleave")).event((function(){return t.onMouseLeave(e)}),void 0,n.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(i,this)),i(e.state)}this._orthogonalStartSash=e}}},{key:"orthogonalEndSash",get:function(){return this._orthogonalEndSash},set:function(e){var n=this;if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){var i=function(i){n.orthogonalEndDragHandleDisposables.clear(),0!==i&&(n._orthogonalEndDragHandle=lm(n.el,gm(".orthogonal-drag-handle.end")),n.orthogonalEndDragHandleDisposables.add(Mu((function(){return n._orthogonalEndDragHandle.remove()}))),n.orthogonalEndDragHandleDisposables.add(new LE(n._orthogonalEndDragHandle,"mouseenter")).event((function(){return t.onMouseEnter(e)}),void 0,n.orthogonalEndDragHandleDisposables),n.orthogonalEndDragHandleDisposables.add(new LE(n._orthogonalEndDragHandle,"mouseleave")).event((function(){return t.onMouseLeave(e)}),void 0,n.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(i,this)),i(e.state)}this._orthogonalEndSash=e}}},{key:"onPointerStart",value:function(e,t){var n=this;om(e);var i=!1;if(!e.__orthogonalSashEvent){var r=this.getOrthogonalSash(e);r&&(i=!0,e.__orthogonalSashEvent=!0,r.onPointerStart(e,new Fj(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new Fj(t))),this.state){var o=this.el.ownerDocument.getElementsByTagName("iframe"),a=!0,s=!1,l=void 0;try{for(var u,c=o[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){u.value.classList.add(Hj)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}var d=e.pageX,h=e.pageY,f=e.altKey,g={startX:d,currentX:d,startY:h,currentY:h,altKey:f};this.el.classList.add("active"),this._onDidStart.fire(g);var v=jp(this.el),p=function(){var e="";e=i?"all-scroll":1===n.orientation?1===n.state?"s-resize":2===n.state?"n-resize":ms?"row-resize":"ns-resize":1===n.state?"e-resize":2===n.state?"w-resize":ms?"col-resize":"ew-resize",v.textContent="* { cursor: ".concat(e," !important; }")},m=new Tu;p(),i||this.onDidEnablementChange.event(p,null,m);t.onPointerMove((function(e){om(e,!1);var t={startX:d,currentX:e.pageX,startY:h,currentY:e.pageY,altKey:f};n._onDidChange.fire(t)}),null,m),t.onPointerUp((function(e){om(e,!1),v.remove(),n.el.classList.remove("active"),n._onDidEnd.fire(),m.dispose();var t=!0,i=!1,r=void 0;try{for(var a,s=o[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){a.value.classList.remove(Hj)}}catch(e){i=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw r}}}),null,m),m.add(t)}}},{key:"onPointerDoublePress",value:function(e){var t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}},{key:"clearSashHoverState",value:function(){t.onMouseLeave(this)}},{key:"layout",value:function(){if(0===this.orientation){var e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{var t=this.layoutProvider;this.el.style.top=t.getHorizontalSashTop(this)-this.size/2+"px",t.getHorizontalSashLeft&&(this.el.style.left=t.getHorizontalSashLeft(this)+"px"),t.getHorizontalSashWidth&&(this.el.style.width=t.getHorizontalSashWidth(this)+"px")}}},{key:"getOrthogonalSash",value:function(e){var t,n=null!==(t=e.initialTarget)&&void 0!==t?t:e.target;if(n&&Jp(n))return n.classList.contains("orthogonal-drag-handle")?n.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash:void 0}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this.el.remove()}}],[{key:"onMouseEnter",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger((function(){return e.el.classList.add("hover")}),e.hoverDelay).then(void 0,(function(){})),!n&&e.linkedSash&&t.onMouseEnter(e.linkedSash,!0)}},{key:"onMouseLeave",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!n&&e.linkedSash&&t.onMouseLeave(e.linkedSash,!0)}}]),t}(Ru),zj={separatorBorder:XC.transparent},Uj=function(){function e(t,n,i,r){u(this,e),this.container=t,this.view=n,this.disposable=r,this._cachedVisibleSize=void 0,"number"==typeof i?(this._size=i,this._cachedVisibleSize=void 0,t.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}return h(e,[{key:"size",get:function(){return this._size},set:function(e){this._size=e}},{key:"visible",get:function(){return void 0===this._cachedVisibleSize}},{key:"setVisible",value:function(e,t){if(e!==this.visible){e?(this.size=wx(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize="number"==typeof t?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{var n,i;null===(n=(i=this.view).setVisible)||void 0===n||n.call(i,e)}catch(e){console.error("Splitview: Failed to set visible view"),console.error(e)}}}},{key:"minimumSize",get:function(){return this.visible?this.view.minimumSize:0}},{key:"viewMinimumSize",get:function(){return this.view.minimumSize}},{key:"maximumSize",get:function(){return this.visible?this.view.maximumSize:0}},{key:"viewMaximumSize",get:function(){return this.view.maximumSize}},{key:"priority",get:function(){return this.view.priority}},{key:"proportionalLayout",get:function(){var e;return null===(e=this.view.proportionalLayout)||void 0===e||e}},{key:"snap",get:function(){return!!this.view.snap}},{key:"enabled",set:function(e){this.container.style.pointerEvents=e?"":"none"}},{key:"layout",value:function(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(e){console.error("Splitview: Failed to layout view"),console.error(e)}}},{key:"dispose",value:function(){this.disposable.dispose()}}]),e}(),jj=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"layoutContainer",value:function(e){this.container.style.top="".concat(e,"px"),this.container.style.height="".concat(this.size,"px")}}]),t}(Uj),Kj=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"layoutContainer",value:function(e){this.container.style.left="".concat(e,"px"),this.container.style.width="".concat(this.size,"px")}}]),t}(Uj);!function(e){e[e.Idle=0]="Idle",e[e.Busy=1]="Busy"}(Wj||(Wj={})),function(e){e.Distribute={type:"distribute"},e.Split=function(e){return{type:"split",index:e}},e.Auto=function(e){return{type:"auto",index:e}},e.Invisible=function(e){return{type:"invisible",cachedVisibleSize:e}}}(Bj||(Bj={}));var qj=function(e){function t(e){var n,i,r,o,a,s,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,t),(n=l(this,t)).size=0,n._contentSize=0,n.proportions=void 0,n.viewItems=[],n.sashItems=[],n.state=Wj.Idle,n._onDidSashChange=n._register(new Zu),n._onDidSashReset=n._register(new Zu),n._startSnappingEnabled=!0,n._endSnappingEnabled=!0,n.onDidSashChange=n._onDidSashChange.event,n.onDidSashReset=n._onDidSashReset.event,n.orientation=null!==(i=c.orientation)&&void 0!==i?i:0,n.inverseAltBehavior=null!==(r=c.inverseAltBehavior)&&void 0!==r&&r,n.proportionalLayout=null===(o=c.proportionalLayout)||void 0===o||o,n.getSashOrthogonalSize=c.getSashOrthogonalSize,n.el=document.createElement("div"),n.el.classList.add("monaco-split-view2"),n.el.classList.add(0===n.orientation?"vertical":"horizontal"),e.appendChild(n.el),n.sashContainer=lm(n.el,gm(".sash-container")),n.viewContainer=gm(".split-view-container"),n.scrollable=n._register(new uE({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:function(e){return pp(ep(n.el),e)}})),n.scrollableElement=n._register(new mE(n.viewContainer,{vertical:0===n.orientation?null!==(a=c.scrollbarVisibility)&&void 0!==a?a:1:2,horizontal:1===n.orientation?null!==(s=c.scrollbarVisibility)&&void 0!==s?s:1:2},n.scrollable));var d=n._register(new LE(n.viewContainer,"scroll")).event;return n._register(d((function(e){var t=n.scrollableElement.getScrollPosition(),i=Math.abs(n.viewContainer.scrollLeft-t.scrollLeft)<=1?void 0:n.viewContainer.scrollLeft,r=Math.abs(n.viewContainer.scrollTop-t.scrollTop)<=1?void 0:n.viewContainer.scrollTop;void 0===i&&void 0===r||n.scrollableElement.setScrollPosition({scrollLeft:i,scrollTop:r})}))),n.onDidScroll=n.scrollableElement.onScroll,n._register(n.onDidScroll((function(e){e.scrollTopChanged&&(n.viewContainer.scrollTop=e.scrollTop),e.scrollLeftChanged&&(n.viewContainer.scrollLeft=e.scrollLeft)}))),lm(n.el,n.scrollableElement.getDomNode()),n.style(c.styles||zj),c.descriptor&&(n.size=c.descriptor.size,c.descriptor.views.forEach((function(e,t){var i=Ra(e.visible)||e.visible?e.size:{type:"invisible",cachedVisibleSize:e.size},r=e.view;n.doAddView(r,i,t,!0)})),n._contentSize=n.viewItems.reduce((function(e,t){return e+t.size}),0),n.saveProportions()),n}return p(t,e),h(t,[{key:"orthogonalStartSash",get:function(){return this._orthogonalStartSash},set:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this.sashItems[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.sash.orthogonalStartSash=e}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}this._orthogonalStartSash=e}},{key:"orthogonalEndSash",get:function(){return this._orthogonalEndSash},set:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this.sashItems[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.sash.orthogonalEndSash=e}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}this._orthogonalEndSash=e}},{key:"startSnappingEnabled",get:function(){return this._startSnappingEnabled},set:function(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}},{key:"endSnappingEnabled",get:function(){return this._endSnappingEnabled},set:function(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}},{key:"style",value:function(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}},{key:"addView",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewItems.length,i=arguments.length>3?arguments[3]:void 0;this.doAddView(e,t,n,i)}},{key:"layout",value:function(e,t){var n=this,i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){for(var r=0,o=0;o<this.viewItems.length;o++){var a=this.viewItems[o],s=this.proportions[o];"number"==typeof s?r+=s:e-=a.size}for(var l=0;l<this.viewItems.length;l++){var u=this.viewItems[l],c=this.proportions[l];"number"==typeof c&&r>0&&(u.size=wx(Math.round(c*e/r),u.minimumSize,u.maximumSize))}}else{var d=ha(this.viewItems.length),h=d.filter((function(e){return 1===n.viewItems[e].priority})),f=d.filter((function(e){return 2===n.viewItems[e].priority}));this.resize(this.viewItems.length-1,e-i,void 0,h,f)}this.distributeEmptySpace(),this.layoutViews()}},{key:"saveProportions",value:function(){var e=this;this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map((function(t){return t.proportionalLayout&&t.visible?t.size/e._contentSize:void 0})))}},{key:"onSashStart",value:function(e){var t=this,n=e.sash,i=e.start,r=e.alt,o=!0,a=!1,s=void 0;try{for(var l,u=this.viewItems[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){l.value.enabled=!1}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var c=this.sashItems.findIndex((function(e){return e.sash===n})),d=Eu(cp(this.el.ownerDocument.body,"keydown",(function(e){return h(t.sashDragState.current,e.altKey)})),cp(this.el.ownerDocument.body,"keyup",(function(){return h(t.sashDragState.current,!1)}))),h=function(e,n){var i,r,o=t.viewItems.map((function(e){return e.size})),a=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;if(t.inverseAltBehavior&&(n=!n),n)if(c===t.sashItems.length-1){var l=t.viewItems[c];a=(l.minimumSize-l.size)/2,s=(l.maximumSize-l.size)/2}else{var u=t.viewItems[c+1];a=(u.size-u.maximumSize)/2,s=(u.size-u.minimumSize)/2}if(!n){var h=ha(c,-1),f=ha(c+1,t.viewItems.length),g=h.reduce((function(e,n){return e+(t.viewItems[n].minimumSize-o[n])}),0),v=h.reduce((function(e,n){return e+(t.viewItems[n].viewMaximumSize-o[n])}),0),p=0===f.length?Number.POSITIVE_INFINITY:f.reduce((function(e,n){return e+(o[n]-t.viewItems[n].minimumSize)}),0),m=0===f.length?Number.NEGATIVE_INFINITY:f.reduce((function(e,n){return e+(o[n]-t.viewItems[n].viewMaximumSize)}),0),y=Math.max(g,m),_=Math.min(p,v),b=t.findFirstSnapIndex(h),k=t.findFirstSnapIndex(f);if("number"==typeof b){var w=t.viewItems[b],C=Math.floor(w.viewMinimumSize/2);i={index:b,limitDelta:w.visible?y-C:y+C,size:w.size}}if("number"==typeof k){var S=t.viewItems[k],x=Math.floor(S.viewMinimumSize/2);r={index:k,limitDelta:S.visible?_+x:_-x,size:S.size}}}t.sashDragState={start:e,current:e,index:c,sizes:o,minDelta:a,maxDelta:s,alt:n,snapBefore:i,snapAfter:r,disposable:d}};h(i,r)}},{key:"onSashChange",value:function(e){var t=e.current,n=this.sashDragState,i=n.index,r=n.start,o=n.sizes,a=n.alt,s=n.minDelta,l=n.maxDelta,u=n.snapBefore,c=n.snapAfter;this.sashDragState.current=t;var d=t-r,h=this.resize(i,d,o,void 0,void 0,s,l,u,c);if(a){var f=i===this.sashItems.length-1,g=this.viewItems.map((function(e){return e.size})),v=f?i:i+1,p=this.viewItems[v],m=p.size-p.maximumSize,y=p.size-p.minimumSize,_=f?i-1:i+1;this.resize(_,-h,g,void 0,void 0,m,y)}this.distributeEmptySpace(),this.layoutViews()}},{key:"onSashEnd",value:function(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();var t=!0,n=!1,i=void 0;try{for(var r,o=this.viewItems[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.enabled=!0}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"onViewChange",value:function(e,t){var n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=wx(t="number"==typeof t?t:e.size,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}},{key:"resizeView",value:function(e,t){var n=this;if(!(e<0||e>=this.viewItems.length)){if(this.state!==Wj.Idle)throw new Error("Cant modify splitview");this.state=Wj.Busy;try{var i=ha(this.viewItems.length).filter((function(t){return t!==e})),r=x(i.filter((function(e){return 1===n.viewItems[e].priority}))).concat([e]),o=i.filter((function(e){return 2===n.viewItems[e].priority})),a=this.viewItems[e];t=wx(t=Math.round(t),a.minimumSize,Math.min(a.maximumSize,this.size)),a.size=t,this.relayout(r,o)}finally{this.state=Wj.Idle}}}},{key:"distributeViewSizes",value:function(){var e=this,t=[],n=0,i=!0,r=!1,o=void 0;try{for(var a,s=this.viewItems[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l.maximumSize-l.minimumSize>0&&(t.push(l),n+=l.size)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}var u=Math.floor(n/t.length),c=!0,d=!1,h=void 0;try{for(var f,g=t[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;v.size=wx(u,v.minimumSize,v.maximumSize)}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}var p=ha(this.viewItems.length),m=p.filter((function(t){return 1===e.viewItems[t].priority})),y=p.filter((function(t){return 2===e.viewItems[t].priority}));this.relayout(m,y)}},{key:"getViewSize",value:function(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}},{key:"doAddView",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewItems.length,r=arguments.length>3?arguments[3]:void 0;if(this.state!==Wj.Idle)throw new Error("Cant modify splitview");this.state=Wj.Busy;try{var o=gm(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(i));var a,s=Eu(e.onDidChange((function(e){return n.onViewChange(u,e)})),Mu((function(){return o.remove()})));"number"==typeof t?a=t:("auto"===t.type&&(t=this.areViewsDistributed()?{type:"distribute"}:{type:"split",index:t.index}),a="split"===t.type?this.getViewSize(t.index)/2:"invisible"===t.type?{cachedVisibleSize:t.cachedVisibleSize}:e.minimumSize);var l,u=0===this.orientation?new jj(o,e,a,s):new Kj(o,e,a,s);if(this.viewItems.splice(i,0,u),this.viewItems.length>1){var c={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},d=0===this.orientation?new Vj(this.sashContainer,{getHorizontalSashTop:function(e){return n.getSashPosition(e)},getHorizontalSashWidth:this.getSashOrthogonalSize},b(_({},c),{orientation:1})):new Vj(this.sashContainer,{getVerticalSashLeft:function(e){return n.getSashPosition(e)},getVerticalSashHeight:this.getSashOrthogonalSize},b(_({},c),{orientation:0})),h=0===this.orientation?function(e){return{sash:d,start:e.startY,current:e.currentY,alt:e.altKey}}:function(e){return{sash:d,start:e.startX,current:e.currentX,alt:e.altKey}},f=Au.map(d.onDidStart,h)(this.onSashStart,this),g=Au.map(d.onDidChange,h)(this.onSashChange,this),v=Au.map(d.onDidEnd,(function(){return n.sashItems.findIndex((function(e){return e.sash===d}))})),p=v(this.onSashEnd,this),m=d.onDidReset((function(){var e=n.sashItems.findIndex((function(e){return e.sash===d})),t=ha(e,-1),i=ha(e+1,n.viewItems.length),r=n.findFirstSnapIndex(t),o=n.findFirstSnapIndex(i);("number"!=typeof r||n.viewItems[r].visible)&&("number"!=typeof o||n.viewItems[o].visible)&&n._onDidSashReset.fire(e)})),y=Eu(f,g,p,m,d),k={sash:d,disposable:y};this.sashItems.splice(i-1,0,k)}o.appendChild(e.element),"number"!=typeof t&&"split"===t.type&&(l=[t.index]),r||this.relayout([i],l),r||"number"==typeof t||"distribute"!==t.type||this.distributeViewSizes()}finally{this.state=Wj.Idle}}},{key:"relayout",value:function(e,t){var n=this.viewItems.reduce((function(e,t){return e+t.size}),0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}},{key:"resize",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewItems.map((function(e){return e.size})),r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Number.NEGATIVE_INFINITY,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Number.POSITIVE_INFINITY,l=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0;if(e<0||e>=this.viewItems.length)return 0;var c=ha(e,-1),d=ha(e+1,this.viewItems.length);if(o){var h=!0,f=!1,g=void 0;try{for(var v,p=o[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var m=v.value;ga(c,m),ga(d,m)}}catch(e){f=!0,g=e}finally{try{h||null==p.return||p.return()}finally{if(f)throw g}}}if(r){var y=!0,_=!1,b=void 0;try{for(var k,w=r[Symbol.iterator]();!(y=(k=w.next()).done);y=!0){var C=k.value;va(c,C),va(d,C)}}catch(e){_=!0,b=e}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}}var S=c.map((function(e){return n.viewItems[e]})),x=c.map((function(e){return i[e]})),L=d.map((function(e){return n.viewItems[e]})),D=d.map((function(e){return i[e]})),N=c.reduce((function(e,t){return e+(n.viewItems[t].minimumSize-i[t])}),0),I=c.reduce((function(e,t){return e+(n.viewItems[t].maximumSize-i[t])}),0),E=0===d.length?Number.POSITIVE_INFINITY:d.reduce((function(e,t){return e+(i[t]-n.viewItems[t].minimumSize)}),0),M=0===d.length?Number.NEGATIVE_INFINITY:d.reduce((function(e,t){return e+(i[t]-n.viewItems[t].maximumSize)}),0),T=Math.max(N,M,a),R=Math.min(E,I,s),A=!1;if(l){var P=this.viewItems[l.index],O=t>=l.limitDelta;A=O!==P.visible,P.setVisible(O,l.size)}if(!A&&u){var F=this.viewItems[u.index],W=t<u.limitDelta;A=W!==F.visible,F.setVisible(W,u.size)}if(A)return this.resize(e,t,i,r,o,a,s);for(var B=0,H=t=wx(t,T,R);B<S.length;B++){var V=S[B],z=wx(x[B]+H,V.minimumSize,V.maximumSize);H-=z-x[B],V.size=z}for(var U=0,j=t;U<L.length;U++){var K=L[U],q=wx(D[U]-j,K.minimumSize,K.maximumSize);j+=q-D[U],K.size=q}return t}},{key:"distributeEmptySpace",value:function(e){var t=this,n=this.viewItems.reduce((function(e,t){return e+t.size}),0),i=this.size-n,r=ha(this.viewItems.length-1,-1),o=r.filter((function(e){return 1===t.viewItems[e].priority})),a=r.filter((function(e){return 2===t.viewItems[e].priority})),s=!0,l=!1,u=void 0;try{for(var c,d=a[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){ga(r,c.value)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}var h=!0,f=!1,g=void 0;try{for(var v,p=o[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){va(r,v.value)}}catch(e){f=!0,g=e}finally{try{h||null==p.return||p.return()}finally{if(f)throw g}}"number"==typeof e&&va(r,e);for(var m=0;0!==i&&m<r.length;m++){var y=this.viewItems[r[m]],_=wx(y.size+i,y.minimumSize,y.maximumSize);i-=_-y.size,y.size=_}}},{key:"layoutViews",value:function(){this._contentSize=this.viewItems.reduce((function(e,t){return e+t.size}),0);var e=0,t=!0,n=!1,i=void 0;try{for(var r,o=this.viewItems[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.layout(e,this.layoutContext),e+=a.size}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}this.sashItems.forEach((function(e){return e.sash.layout()})),this.updateSashEnablement(),this.updateScrollableElement()}},{key:"updateScrollableElement",value:function(){0===this.orientation?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}},{key:"updateSashEnablement",value:function(){var e=!1,t=this.viewItems.map((function(t){return e=t.size-t.minimumSize>0||e}));e=!1;var n=this.viewItems.map((function(t){return e=t.maximumSize-t.size>0||e})),i=x(this.viewItems).reverse();e=!1;var r=i.map((function(t){return e=t.size-t.minimumSize>0||e})).reverse();e=!1;for(var o=i.map((function(t){return e=t.maximumSize-t.size>0||e})).reverse(),a=0,s=0;s<this.sashItems.length;s++){var l=this.sashItems[s].sash;a+=this.viewItems[s].size;var u=!(t[s]&&o[s+1]),c=!(n[s]&&r[s+1]);if(u&&c){var d=ha(s,-1),h=ha(s+1,this.viewItems.length),f=this.findFirstSnapIndex(d),g=this.findFirstSnapIndex(h),v="number"==typeof f&&!this.viewItems[f].visible,p="number"==typeof g&&!this.viewItems[g].visible;v&&r[s]&&(a>0||this.startSnappingEnabled)?l.state=1:p&&t[s]&&(a<this._contentSize||this.endSnappingEnabled)?l.state=2:l.state=0}else l.state=u&&!c?1:!u&&c?2:3}}},{key:"getSashPosition",value:function(e){for(var t=0,n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}},{key:"findFirstSnapIndex",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=this.viewItems[a];if(s.visible&&s.snap)return a}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var d,h=e[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value,g=this.viewItems[f];if(g.visible&&g.maximumSize-g.minimumSize>0)return;if(!g.visible&&g.snap)return f}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}},{key:"areViewsDistributed",value:function(){var e=void 0,t=void 0,n=!0,i=!1,r=void 0;try{for(var o,a=this.viewItems[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(e=void 0===e?s.size:Math.min(e,s.size),(t=void 0===t?s.size:Math.max(t,s.size))-e>2)return!1}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return!0}},{key:"dispose",value:function(){var e;null===(e=this.sashDragState)||void 0===e||e.disposable.dispose(),Iu(this.viewItems),this.viewItems=[],this.sashItems.forEach((function(e){return e.disposable.dispose()})),this.sashItems=[],g(v(t.prototype),"dispose",this).call(this)}}]),t}(Ru),Gj=function(){function e(t,n,i){u(this,e),this.columns=t,this.getColumnSize=i,this.templateId=e.TemplateId,this.renderedTemplates=new Set;var r=new Map(n.map((function(e){return[e.templateId,e]})));this.renderers=[];var o=!0,a=!1,s=void 0;try{for(var l,c=t[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var d=l.value,h=r.get(d.templateId);if(!h)throw new Error("Table cell renderer for template id ".concat(d.templateId," not found."));this.renderers.push(h)}}catch(e){a=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}}return h(e,[{key:"renderTemplate",value:function(e){for(var t=lm(e,gm(".monaco-table-tr")),n=[],i=[],r=0;r<this.columns.length;r++){var o=this.renderers[r],a=lm(t,gm(".monaco-table-td",{"data-col-index":r}));a.style.width="".concat(this.getColumnSize(r),"px"),n.push(a),i.push(o.renderTemplate(a))}var s={container:e,cellContainers:n,cellTemplateData:i};return this.renderedTemplates.add(s),s}},{key:"renderElement",value:function(e,t,n,i){for(var r=0;r<this.columns.length;r++){var o=this.columns[r].project(e);this.renderers[r].renderElement(o,t,n.cellTemplateData[r],i)}}},{key:"disposeElement",value:function(e,t,n,i){for(var r=0;r<this.columns.length;r++){var o=this.renderers[r];if(o.disposeElement){var a=this.columns[r].project(e);o.disposeElement(a,t,n.cellTemplateData[r],i)}}}},{key:"disposeTemplate",value:function(e){for(var t=0;t<this.columns.length;t++){this.renderers[t].disposeTemplate(e.cellTemplateData[t])}lp(e.container),this.renderedTemplates.delete(e)}},{key:"layoutColumn",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=this.renderedTemplates[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.cellContainers[e].style.width="".concat(t,"px")}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}]),e}();Gj.TemplateId="row";var Zj,Yj,Qj=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).column=e,i.index=n,i._onDidLayout=new Zu,i.onDidLayout=i._onDidLayout.event,i.element=gm(".monaco-table-th",{"data-col-index":n},e.label),e.tooltip&&i._register(NO().setupManagedHover(xO("mouse"),i.element,e.tooltip)),i}return p(t,e),h(t,[{key:"minimumSize",get:function(){var e;return null!==(e=this.column.minimumWidth)&&void 0!==e?e:120}},{key:"maximumSize",get:function(){var e;return null!==(e=this.column.maximumWidth)&&void 0!==e?e:Number.POSITIVE_INFINITY}},{key:"onDidChange",get:function(){var e;return null!==(e=this.column.onDidChangeWidthConstraints)&&void 0!==e?e:Au.None}},{key:"layout",value:function(e){this._onDidLayout.fire([this.index,e])}}]),t}(Ru),Xj=function(){function e(t,n,i,r,o,a){var s,l=this;u(this,e),this.virtualDelegate=i,this.columns=r,this.domId="table_id_".concat(++e.InstanceCount),this.disposables=new Tu,this.cachedWidth=0,this.cachedHeight=0,this.domNode=lm(n,gm(".monaco-table.".concat(this.domId)));var c=r.map((function(e,t){return l.disposables.add(new Qj(e,t))})),d={size:c.reduce((function(e,t){return e+t.column.weight}),0),views:c.map((function(e){return{size:e.column.weight,view:e}}))};this.splitview=this.disposables.add(new qj(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:function(){return l.cachedHeight},descriptor:d})),this.splitview.el.style.height="".concat(i.headerRowHeight,"px"),this.splitview.el.style.lineHeight="".concat(i.headerRowHeight,"px");var h=new Gj(r,o,(function(e){return l.splitview.getViewSize(e)}));this.list=this.disposables.add(new _F(t,this.domNode,function(e){return{getHeight:function(t){return e.getHeight(t)},getTemplateId:function(){return Gj.TemplateId}}}(i),[h],a)),(s=Au).any.apply(s,x(c.map((function(e){return e.onDidLayout}))))((function(e){var t=C(e,2),n=t[0],i=t[1];return h.layoutColumn(n,i)}),null,this.disposables),this.splitview.onDidSashReset((function(e){var t=r.reduce((function(e,t){return e+t.weight}),0),n=r[e].weight/t*l.cachedWidth;l.splitview.resizeView(e,n)}),null,this.disposables),this.styleElement=jp(this.domNode),this.style(hF)}return h(e,[{key:"onDidChangeFocus",get:function(){return this.list.onDidChangeFocus}},{key:"onDidChangeSelection",get:function(){return this.list.onDidChangeSelection}},{key:"onDidScroll",get:function(){return this.list.onDidScroll}},{key:"onMouseDblClick",get:function(){return this.list.onMouseDblClick}},{key:"onPointer",get:function(){return this.list.onPointer}},{key:"onDidFocus",get:function(){return this.list.onDidFocus}},{key:"scrollTop",get:function(){return this.list.scrollTop},set:function(e){this.list.scrollTop=e}},{key:"scrollHeight",get:function(){return this.list.scrollHeight}},{key:"renderHeight",get:function(){return this.list.renderHeight}},{key:"onDidDispose",get:function(){return this.list.onDidDispose}},{key:"updateOptions",value:function(e){this.list.updateOptions(e)}},{key:"splice",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.list.splice(e,t,n)}},{key:"getHTMLElement",value:function(){return this.domNode}},{key:"style",value:function(e){var t=[];t.push(".monaco-table.".concat(this.domId," > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ").concat(this.virtualDelegate.headerRowHeight+1,"px;\n\t\t\theight: calc(100% - ").concat(this.virtualDelegate.headerRowHeight,"px);\n\t\t}")),this.styleElement.textContent=t.join("\n"),this.list.style(e)}},{key:"getSelectedElements",value:function(){return this.list.getSelectedElements()}},{key:"getSelection",value:function(){return this.list.getSelection()}},{key:"getFocus",value:function(){return this.list.getFocus()}},{key:"dispose",value:function(){this.disposables.dispose()}}]),e}();Xj.InstanceCount=0,function(e){e[e.Expanded=0]="Expanded",e[e.Collapsed=1]="Collapsed",e[e.PreserveOrExpanded=2]="PreserveOrExpanded",e[e.PreserveOrCollapsed=3]="PreserveOrCollapsed"}(Zj||(Zj={})),function(e){e[e.Unknown=0]="Unknown",e[e.Twistie=1]="Twistie",e[e.Element=2]="Element",e[e.Filter=3]="Filter"}(Yj||(Yj={}));var $j,Jj=function(e){function t(e,n){return u(this,t),l(this,t,["TreeError [".concat(e,"] ").concat(n)])}return p(t,e),t}(N(Error)),eK=function(){function e(t){u(this,e),this.fn=t,this._map=new WeakMap}return h(e,[{key:"map",value:function(e){var t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}]),e}();function tK(e){return"object"===(void 0===e?"undefined":L(e))&&"visibility"in e&&"data"in e}function nK(e){switch(e){case!0:return 1;case!1:return 0;default:return e}}function iK(e){return"boolean"==typeof e.collapsible}var rK=function(){function e(t,n,i){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};u(this,e),this.user=t,this.list=n,this.rootRef=[],this.eventBufferer=new ec,this._onDidChangeCollapseState=new Zu,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new Zu,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new Zu,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new vg(cg),this.collapseByDefault=void 0!==o.collapseByDefault&&o.collapseByDefault,this.allowNonCollapsibleParents=null!==(r=o.allowNonCollapsibleParents)&&void 0!==r&&r,this.filter=o.filter,this.autoExpandSingleChildren=void 0!==o.autoExpandSingleChildren&&o.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}return h(e,[{key:"splice",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ts.empty(),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(0===e.length)throw new Jj(this.user,"Invalid tree location");i.diffIdentityProvider?this.spliceSmart(i.diffIdentityProvider,e,t,n,i):this.spliceSimple(e,t,n,i)}},{key:"spliceSmart",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ts.empty(),o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null!==($j=o.diffDepth)&&void 0!==$j?$j:0,s=this.getParentNodeWithListIndex(t).parentNode;if(!s.lastDiffIds)return this.spliceSimple(t,n,r,o);var l=x(r),u=t[t.length-1],c=new Gk({getElements:function(){return s.lastDiffIds}},{getElements:function(){return x(s.children.slice(0,u)).concat(x(l),x(s.children.slice(u+n))).map((function(t){return e.getId(t.element).toString()}))}}).ComputeDiff(!1);if(c.quitEarly)return s.lastDiffIds=void 0,this.spliceSimple(t,n,l,o);var d=t.slice(0,-1),h=function(t,n,r){if(a>0)for(var s=0;s<r;s++)t--,n--,i.spliceSmart(e,x(d).concat([t,0]),Number.MAX_SAFE_INTEGER,l[n].children,o,a-1)},f=Math.min(s.children.length,u+n),g=l.length,v=!0,p=!1,m=void 0;try{for(var y,_=c.changes.sort((function(e,t){return t.originalStart-e.originalStart}))[Symbol.iterator]();!(v=(y=_.next()).done);v=!0){var b=y.value;h(f,g,f-(b.originalStart+b.originalLength)),f=b.originalStart,g=b.modifiedStart-u,this.spliceSimple(x(d).concat([f]),b.originalLength,Ts.slice(l,g,g+b.modifiedLength),o)}}catch(e){p=!0,m=e}finally{try{v||null==_.return||_.return()}finally{if(p)throw m}}h(f,g,f)}},{key:"spliceSimple",value:function(e,t){for(var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ts.empty(),r=arguments.length>3?arguments[3]:void 0,o=r.onDidCreateNode,a=r.onDidDeleteNode,s=r.diffIdentityProvider,l=this.getParentNodeWithListIndex(e),u=l.parentNode,c=l.listIndex,d=l.revealed,h=l.visible,f=[],g=Ts.map(i,(function(e){return n.createTreeNode(e,u,u.visible?1:0,d,f,o)})),v=e[e.length-1],p=0,m=v;m>=0&&m<u.children.length;m--){var y=u.children[m];if(y.visible){p=y.visibleChildIndex;break}}var _=[],b=0,k=0,w=!0,C=!1,S=void 0;try{for(var x,L=g[Symbol.iterator]();!(w=(x=L.next()).done);w=!0){var D=x.value;_.push(D),k+=D.renderNodeCount,D.visible&&(D.visibleChildIndex=p+b++)}}catch(e){C=!0,S=e}finally{try{w||null==L.return||L.return()}finally{if(C)throw S}}var N=ya(u.children,v,t,_);s?u.lastDiffIds?ya(u.lastDiffIds,v,t,_.map((function(e){return s.getId(e.element).toString()}))):u.lastDiffIds=u.children.map((function(e){return s.getId(e.element).toString()})):u.lastDiffIds=void 0;var I=0,E=!0,M=!1,T=void 0;try{for(var R,A=N[Symbol.iterator]();!(E=(R=A.next()).done);E=!0){R.value.visible&&I++}}catch(e){M=!0,T=e}finally{try{E||null==A.return||A.return()}finally{if(M)throw T}}if(0!==I)for(var P=v+_.length;P<u.children.length;P++){var O=u.children[P];O.visible&&(O.visibleChildIndex-=I)}if(u.visibleChildrenCount+=b-I,d&&h){var F=N.reduce((function(e,t){return e+(t.visible?t.renderNodeCount:0)}),0);this._updateAncestorsRenderNodeCount(u,k-F),this.list.splice(c,F,f)}if(N.length>0&&a){var W=function(e){a(e),e.children.forEach(W)};N.forEach(W)}this._onDidSplice.fire({insertedNodes:_,deletedNodes:N});for(var B=u;B;){if(2===B.visibility){this.refilterDelayer.trigger((function(){return n.refilter()}));break}B=B.parent}}},{key:"rerender",value:function(e){if(0===e.length)throw new Jj(this.user,"Invalid tree location");var t=this.getTreeNodeWithListIndex(e),n=t.node,i=t.listIndex,r=t.revealed;n.visible&&r&&this.list.splice(i,1,[n])}},{key:"has",value:function(e){return this.hasTreeNode(e)}},{key:"getListIndex",value:function(e){var t=this.getTreeNodeWithListIndex(e),n=t.listIndex,i=t.visible,r=t.revealed;return i&&r?n:-1}},{key:"getListRenderCount",value:function(e){return this.getTreeNode(e).renderNodeCount}},{key:"isCollapsible",value:function(e){return this.getTreeNode(e).collapsible}},{key:"setCollapsible",value:function(e,t){var n=this,i=this.getTreeNode(e);void 0===t&&(t=!i.collapsible);var r={collapsible:t};return this.eventBufferer.bufferEvents((function(){return n._setCollapseState(e,r)}))}},{key:"isCollapsed",value:function(e){return this.getTreeNode(e).collapsed}},{key:"setCollapsed",value:function(e,t,n){var i=this,r=this.getTreeNode(e);void 0===t&&(t=!r.collapsed);var o={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents((function(){return i._setCollapseState(e,o)}))}},{key:"_setCollapseState",value:function(e,t){var n=this.getTreeNodeWithListIndex(e),i=n.node,r=n.listIndex,o=n.revealed,a=this._setListNodeCollapseState(i,r,o,t);if(i!==this.root&&this.autoExpandSingleChildren&&a&&!iK(t)&&i.collapsible&&!i.collapsed&&!t.recursive){for(var s=-1,l=0;l<i.children.length;l++){if(i.children[l].visible){if(s>-1){s=-1;break}s=l}}s>-1&&this._setCollapseState(x(e).concat([s]),t)}return a}},{key:"_setListNodeCollapseState",value:function(e,t,n,i){var r=this._setNodeCollapseState(e,i,!1);if(!n||!e.visible||!r)return r;var o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),s=o-(-1===t?0:1);return this.list.splice(t+1,s,a.slice(1)),r}},{key:"_setNodeCollapseState",value:function(e,t,n){var i;if(e===this.root?i=!1:(iK(t)?(i=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(i=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):i=!1,i&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!iK(t)&&t.recursive){var r=!0,o=!1,a=void 0;try{for(var s,l=e.children[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i=this._setNodeCollapseState(u,t,!0)||i}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}return i}},{key:"expandTo",value:function(e){var t=this;this.eventBufferer.bufferEvents((function(){for(var n=t.getTreeNode(e);n.parent;)n=n.parent,e=e.slice(0,e.length-1),n.collapsed&&t._setCollapseState(e,{collapsed:!1,recursive:!1})}))}},{key:"refilter",value:function(){var e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}},{key:"createTreeNode",value:function(e,t,n,i,r,o){var a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:"boolean"==typeof e.collapsible?e.collapsible:void 0!==e.collapsed,collapsed:void 0===e.collapsed?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},s=this._filterNode(a,n);a.visibility=s,i&&r.push(a);var l=e.children||Ts.empty(),u=i&&0!==s&&!a.collapsed,c=0,d=1,h=!0,f=!1,g=void 0;try{for(var v,p=l[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var m=v.value,y=this.createTreeNode(m,a,s,u,r,o);a.children.push(y),d+=y.renderNodeCount,y.visible&&(y.visibleChildIndex=c++)}}catch(e){f=!0,g=e}finally{try{h||null==p.return||p.return()}finally{if(f)throw g}}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=c,a.visible=2===s?c>0:1===s,a.visible?a.collapsed||(a.renderNodeCount=d):(a.renderNodeCount=0,i&&r.pop()),null==o||o(a),a}},{key:"updateNodeAfterCollapseChange",value:function(e){var t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}},{key:"_updateNodeAfterCollapseChange",value:function(e,t){if(!1===e.visible)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed){var n=!0,i=!1,r=void 0;try{for(var o,a=e.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.renderNodeCount+=this._updateNodeAfterCollapseChange(s,t)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}},{key:"updateNodeAfterFilterChange",value:function(e){var t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}},{key:"_updateNodeAfterFilterChange",value:function(e,t,n){var i,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e!==this.root){if(0===(i=this._filterNode(e,t)))return e.visible=!1,e.renderNodeCount=0,!1;r&&n.push(e)}var o=n.length;e.renderNodeCount=e===this.root?0:1;var a=!1;if(e.collapsed&&0===i)e.visibleChildrenCount=0;else{var s=0,l=!0,u=!1,c=void 0;try{for(var d,h=e.children[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;a=this._updateNodeAfterFilterChange(f,i,n,r&&!e.collapsed)||a,f.visible&&(f.visibleChildIndex=s++)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}e.visibleChildrenCount=s}return e!==this.root&&(e.visible=2===i?a:1===i,e.visibility=i),e.visible?e.collapsed||(e.renderNodeCount+=n.length-o):(e.renderNodeCount=0,r&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}},{key:"_updateAncestorsRenderNodeCount",value:function(e,t){if(0!==t)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}},{key:"_filterNode",value:function(e,t){var n=this.filter?this.filter.filter(e.element,t):1;return"boolean"==typeof n?(e.filterData=void 0,n?1:0):tK(n)?(e.filterData=n.data,nK(n.visibility)):(e.filterData=void 0,nK(n))}},{key:"hasTreeNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root;if(!e||0===e.length)return!0;var n=S(e),i=n[0],r=n.slice(1);return!(i<0||i>t.children.length)&&this.hasTreeNode(r,t.children[i])}},{key:"getTreeNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root;if(!e||0===e.length)return t;var n=S(e),i=n[0],r=n.slice(1);if(i<0||i>t.children.length)throw new Jj(this.user,"Invalid tree location");return this.getTreeNode(r,t.children[i])}},{key:"getTreeNodeWithListIndex",value:function(e){if(0===e.length)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};var t=this.getParentNodeWithListIndex(e),n=t.parentNode,i=t.listIndex,r=t.revealed,o=t.visible,a=e[e.length-1];if(a<0||a>n.children.length)throw new Jj(this.user,"Invalid tree location");var s=n.children[a];return{node:s,listIndex:i,revealed:r,visible:o&&s.visible}}},{key:"getParentNodeWithListIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=S(e),a=o[0],s=o.slice(1);if(a<0||a>t.children.length)throw new Jj(this.user,"Invalid tree location");for(var l=0;l<a;l++)n+=t.children[l].renderNodeCount;return i=i&&!t.collapsed,r=r&&t.visible,0===s.length?{parentNode:t,listIndex:n,revealed:i,visible:r}:this.getParentNodeWithListIndex(s,t.children[a],n+1,i,r)}},{key:"getNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.getTreeNode(e)}},{key:"getNodeLocation",value:function(e){for(var t=[],n=e;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}},{key:"getParentNodeLocation",value:function(e){return 0===e.length?void 0:1===e.length?[]:function(e){if(0===e.length)throw new Error("Invalid tail call");return[e.slice(0,e.length-1),e[e.length-1]]}(e)[0]}},{key:"getFirstElementChild",value:function(e){var t=this.getTreeNode(e);if(0!==t.children.length)return t.children[0].element}}]),e}(),oK=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e.elements.map((function(e){return e.element}))])).data=e,n}return p(t,e),t}(BO);function aK(e){return e instanceof BO?new oK(e):e}var sK=function(){function e(t,n){u(this,e),this.modelProvider=t,this.dnd=n,this.autoExpandDisposable=Ru.None,this.disposables=new Tu}return h(e,[{key:"getDragURI",value:function(e){return this.dnd.getDragURI(e.element)}},{key:"getDragLabel",value:function(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((function(e){return e.element})),t)}},{key:"onDragStart",value:function(e,t){var n,i;null===(n=(i=this.dnd).onDragStart)||void 0===n||n.call(i,aK(e),t)}},{key:"onDragOver",value:function(e,t,n,i,r){var o=this,a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this.dnd.onDragOver(aK(e),t&&t.element,n,i,r),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),void 0===t)return s;if(l&&"boolean"!=typeof s&&s.autoExpand&&(this.autoExpandDisposable=yg((function(){var e=o.modelProvider(),n=e.getNodeLocation(t);e.isCollapsed(n)&&e.setCollapsed(n,!1),o.autoExpandNode=void 0}),500,this.disposables)),"boolean"==typeof s||!s.accept||void 0===s.bubble||s.feedback)return a?s:{accept:"boolean"==typeof s?s:s.accept,effect:"boolean"==typeof s?void 0:s.effect,feedback:[n]};if(1===s.bubble){var u=this.modelProvider(),c=u.getNodeLocation(t),d=u.getParentNodeLocation(c),h=u.getNode(d),f=d&&u.getListIndex(d);return this.onDragOver(e,h,f,i,r,!1)}var g=this.modelProvider(),v=g.getNodeLocation(t),p=g.getListIndex(v),m=g.getListRenderCount(v);return b(_({},s),{feedback:ha(p,p+m)})}},{key:"drop",value:function(e,t,n,i,r){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(aK(e),t&&t.element,n,i,r)}},{key:"onDragEnd",value:function(e){var t,n;null===(t=(n=this.dnd).onDragEnd)||void 0===t||t.call(n,e)}},{key:"dispose",value:function(){this.disposables.dispose(),this.dnd.dispose()}}]),e}();var lK,uK=function(){function e(t){u(this,e),this.delegate=t}return h(e,[{key:"getHeight",value:function(e){return this.delegate.getHeight(e.element)}},{key:"getTemplateId",value:function(e){return this.delegate.getTemplateId(e.element)}},{key:"hasDynamicHeight",value:function(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}},{key:"setDynamicHeight",value:function(e,t){var n,i;null===(n=(i=this.delegate).setDynamicHeight)||void 0===n||n.call(i,e.element,t)}}]),e}();!function(e){e.None="none",e.OnHover="onHover",e.Always="always"}(lK||(lK={}));var cK=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];u(this,e),this._elements=i,this.disposables=new Tu,this.onDidChange=Au.forEach(t,(function(e){return n._elements=e}),this.disposables)}return h(e,[{key:"elements",get:function(){return this._elements}},{key:"dispose",value:function(){this.disposables.dispose()}}]),e}(),dK=function(){function e(t,n,i,r,o){var a,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};u(this,e),this.renderer=t,this.modelProvider=n,this.activeNodes=r,this.renderedIndentGuides=o,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=e.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=Ru.None,this.disposables=new Tu,this.templateId=t.templateId,this.updateOptions(s),Au.map(i,(function(e){return e.node}))(this.onDidChangeNodeTwistieState,this,this.disposables),null===(a=t.onDidChangeTwistieState)||void 0===a||a.call(t,this.onDidChangeTwistieState,this,this.disposables)}return h(e,[{key:"updateOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0!==e.indent){var t=wx(e.indent,0,40);if(t!==this.indent){this.indent=t;var n=!0,i=!1,r=void 0;try{for(var o,a=this.renderedNodes[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2),l=s[0],u=s[1];this.renderTreeElement(l,u)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}if(void 0!==e.renderIndentGuides){var c=e.renderIndentGuides!==lK.None;if(c!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=c;var d=!0,h=!1,f=void 0;try{for(var g,v=this.renderedNodes[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=C(g.value,2),m=p[0],y=p[1];this._renderIndentGuides(m,y)}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}if(this.indentGuidesDisposable.dispose(),c){var _=new Tu;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,_),this.indentGuidesDisposable=_,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}void 0!==e.hideTwistiesOfChildlessElements&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}},{key:"renderTemplate",value:function(e){var t=lm(e,gm(".monaco-tl-row")),n=lm(t,gm(".monaco-tl-indent")),i=lm(t,gm(".monaco-tl-twistie")),r=lm(t,gm(".monaco-tl-contents")),o=this.renderer.renderTemplate(r);return{container:e,indent:n,twistie:i,indentGuidesDisposable:Ru.None,templateData:o}}},{key:"renderElement",value:function(e,t,n,i){this.renderedNodes.set(e,n),this.renderedElements.set(e.element,e),this.renderTreeElement(e,n),this.renderer.renderElement(e,t,n.templateData,i)}},{key:"disposeElement",value:function(e,t,n,i){var r,o;n.indentGuidesDisposable.dispose(),null===(r=(o=this.renderer).disposeElement)||void 0===r||r.call(o,e,t,n.templateData,i),"number"==typeof i&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}},{key:"disposeTemplate",value:function(e){this.renderer.disposeTemplate(e.templateData)}},{key:"onDidChangeTwistieState",value:function(e){var t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}},{key:"onDidChangeNodeTwistieState",value:function(e){var t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}},{key:"renderTreeElement",value:function(t,n){var i,r=e.DefaultIndent+(t.depth-1)*this.indent;n.twistie.style.paddingLeft="".concat(r,"px"),n.indent.style.width="".concat(r+this.indent-16,"px"),t.collapsible?n.container.setAttribute("aria-expanded",String(!t.collapsed)):n.container.removeAttribute("aria-expanded"),(i=n.twistie.classList).remove.apply(i,x(ny.asClassNameArray(bd.treeItemExpanded)));var o=!1;if(this.renderer.renderTwistie&&(o=this.renderer.renderTwistie(t.element,n.twistie)),t.collapsible&&(!this.hideTwistiesOfChildlessElements||t.visibleChildrenCount>0)){var a;if(!o)(a=n.twistie.classList).add.apply(a,x(ny.asClassNameArray(bd.treeItemExpanded)));n.twistie.classList.add("collapsible"),n.twistie.classList.toggle("collapsed",t.collapsed)}else n.twistie.classList.remove("collapsible","collapsed");this._renderIndentGuides(t,n)}},{key:"_renderIndentGuides",value:function(e,t){var n,i=function(){var i=a.getNodeLocation(e),s=a.getParentNodeLocation(i);if(!s)return"break";var l=a.getNode(s),u=gm(".indent-guide",{style:"width: ".concat(n.indent,"px")});n.activeIndentNodes.has(l)&&u.classList.add("active"),0===t.indent.childElementCount?t.indent.appendChild(u):t.indent.insertBefore(u,t.indent.firstElementChild),n.renderedIndentGuides.add(l,u),o.add(Mu((function(){return r.renderedIndentGuides.delete(l,u)}))),e=l},r=this;if(lp(t.indent),t.indentGuidesDisposable.dispose(),this.shouldRenderIndentGuides){for(var o=new Tu,a=this.modelProvider();;){if("break"===(n=this,i()))break}t.indentGuidesDisposable=o}}},{key:"_onDidChangeActiveNodes",value:function(e){var t=this;if(this.shouldRenderIndentGuides){var n=new Set,i=this.modelProvider();e.forEach((function(e){var t=i.getNodeLocation(e);try{var r=i.getParentNodeLocation(t);e.collapsible&&e.children.length>0&&!e.collapsed?n.add(e):r&&n.add(i.getNode(r))}catch(e){}})),this.activeIndentNodes.forEach((function(e){n.has(e)||t.renderedIndentGuides.forEach(e,(function(e){return e.classList.remove("active")}))})),n.forEach((function(e){t.activeIndentNodes.has(e)||t.renderedIndentGuides.forEach(e,(function(e){return e.classList.add("active")}))})),this.activeIndentNodes=n}}},{key:"dispose",value:function(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),Iu(this.disposables)}}]),e}();dK.DefaultIndent=8;var hK,fK,gK=function(){function e(t,n,i){u(this,e),this.tree=t,this.keyboardNavigationLabelProvider=n,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Tu,t.onWillRefilter(this.reset,this,this.disposables)}return h(e,[{key:"totalCount",get:function(){return this._totalCount}},{key:"matchCount",get:function(){return this._matchCount}},{key:"filter",value:function(e,t){var n=1;if(this._filter){var i=this._filter.filter(e,t);if(0===(n="boolean"==typeof i?i?1:0:tK(i)?nK(i.visibility):i))return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:wM.Default,visibility:n};var r=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),o=Array.isArray(r)?r:[r],a=!0,s=!1,l=void 0;try{for(var u,c=o[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value,h=d&&d.toString();if(void 0===h)return{data:wM.Default,visibility:n};var f=void 0;if(this.tree.findMatchType===fK.Contiguous){var g=h.toLowerCase().indexOf(this._lowercasePattern);if(g>-1){f=[Number.MAX_SAFE_INTEGER,0];for(var v=this._lowercasePattern.length;v>0;v--)f.push(g+v-1)}}else f=TM(this._pattern,this._lowercasePattern,0,h,h.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(f)return this._matchCount++,1===o.length?{data:f,visibility:n}:{data:{label:h,score:f},visibility:n}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return this.tree.findMode===hK.Filter?"number"==typeof this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:wM.Default,visibility:n}}},{key:"reset",value:function(){this._totalCount=0,this._matchCount=0}},{key:"dispose",value:function(){Iu(this.disposables)}}]),e}();!function(e){e[e.Highlight=0]="Highlight",e[e.Filter=1]="Filter"}(hK||(hK={})),function(e){e[e.Fuzzy=0]="Fuzzy",e[e.Contiguous=1]="Contiguous"}(fK||(fK={}));var vK=function(){function e(t,n,i,r,o){var a,s,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};u(this,e),this.tree=t,this.view=i,this.filter=r,this.contextViewProvider=o,this.options=l,this._pattern="",this.width=0,this._onDidChangeMode=new Zu,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new Zu,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new Zu,this._onDidChangeOpenState=new Zu,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new Tu,this.disposables=new Tu,this._mode=null!==(a=t.options.defaultFindMode)&&void 0!==a?a:hK.Highlight,this._matchType=null!==(s=t.options.defaultFindMatchType)&&void 0!==s?s:fK.Fuzzy,n.onDidSplice(this.onDidSpliceModel,this,this.disposables)}return h(e,[{key:"pattern",get:function(){return this._pattern}},{key:"mode",get:function(){return this._mode},set:function(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}},{key:"matchType",get:function(){return this._matchType},set:function(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}},{key:"updateOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0!==e.defaultFindMode&&(this.mode=e.defaultFindMode),void 0!==e.defaultFindMatchType&&(this.matchType=e.defaultFindMatchType)}},{key:"onDidSpliceModel",value:function(){this.widget&&0!==this.pattern.length&&(this.tree.refilter(),this.render())}},{key:"render",value:function(){var e,t,n,i,r=this.filter.totalCount>0&&0===this.filter.matchCount;this.pattern&&r?(_R(Xa("replFindNoResults","No results")),null===(e=this.tree.options.showNotFoundMessage)||void 0===e||e?null===(t=this.widget)||void 0===t||t.showMessage({type:2,content:Xa("not found","No elements found.")}):null===(n=this.widget)||void 0===n||n.showMessage({type:2})):(null===(i=this.widget)||void 0===i||i.clearMessage(),this.pattern&&_R(Xa("replFindResults","{0} results",this.filter.matchCount)))}},{key:"shouldAllowFocus",value:function(e){return!this.widget||!this.pattern||(this.filter.totalCount>0&&this.filter.matchCount<=1||!wM.isDefault(e.filterData))}},{key:"layout",value:function(e){var t;this.width=e,null===(t=this.widget)||void 0===t||t.layout(e)}},{key:"dispose",value:function(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}]),e}();function pK(e,t){return e.position===t.position&&mK(e,t)}function mK(e,t){return e.node.element===t.node.element&&e.startIndex===t.startIndex&&e.height===t.height&&e.endIndex===t.endIndex}var yK=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];u(this,e),this.stickyNodes=t}return h(e,[{key:"count",get:function(){return this.stickyNodes.length}},{key:"equal",value:function(e){return ea(this.stickyNodes,e.stickyNodes,pK)}},{key:"lastNodePartiallyVisible",value:function(){if(0===this.count)return!1;var e=this.stickyNodes[this.count-1];if(1===this.count)return 0!==e.position;var t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}},{key:"animationStateChanged",value:function(e){if(!ea(this.stickyNodes,e.stickyNodes,mK))return!1;if(0===this.count)return!1;var t=this.stickyNodes[this.count-1],n=e.stickyNodes[e.count-1];return t.position!==n.position}}]),e}(),_K=function(){function e(){u(this,e)}return h(e,[{key:"constrainStickyScrollNodes",value:function(e,t,n){for(var i=0;i<e.length;i++){var r=e[i];if(r.position+r.height>n||i>=t)return e.slice(0,i)}return e}}]),e}(),bK=function(e){function t(e,n,i,r,o){var a,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};u(this,t),(a=l(this,t)).tree=e,a.model=n,a.view=i,a.treeDelegate=o,a.maxWidgetViewRatio=.4;var c,d=a.validateStickySettings(s);return a.stickyScrollMaxItemCount=d.stickyScrollMaxItemCount,a.stickyScrollDelegate=null!==(c=s.stickyScrollDelegate)&&void 0!==c?c:new _K,a._widget=a._register(new kK(i.getScrollableElement(),i,e,r,o,s.accessibilityProvider)),a.onDidChangeHasFocus=a._widget.onDidChangeHasFocus,a.onContextMenu=a._widget.onContextMenu,a._register(i.onDidScroll((function(){return a.update()}))),a._register(i.onDidChangeContentHeight((function(){return a.update()}))),a._register(e.onDidChangeCollapseState((function(){return a.update()}))),a.update(),a}return p(t,e),h(t,[{key:"height",get:function(){return this._widget.height}},{key:"getNodeAtHeight",value:function(e){var t;if(!((t=0===e?this.view.firstVisibleIndex:this.view.indexAt(e+this.view.scrollTop))<0||t>=this.view.length))return this.view.element(t)}},{key:"update",value:function(){var e=this.getNodeAtHeight(0);if(e&&0!==this.tree.scrollTop){var t=this.findStickyState(e);this._widget.setState(t)}else this._widget.setState(void 0)}},{key:"findStickyState",value:function(e){for(var t=[],n=e,i=0,r=this.getNextStickyNode(n,void 0,i);r&&(t.push(r),i+=r.height,!(t.length<=this.stickyScrollMaxItemCount)||(n=this.getNextVisibleNode(r)));)r=this.getNextStickyNode(n,r.node,i);var o=this.constrainStickyNodes(t);return o.length?new yK(o):void 0}},{key:"getNextVisibleNode",value:function(e){return this.getNodeAtHeight(e.position+e.height)}},{key:"getNextStickyNode",value:function(e,t,n){var i=this.getAncestorUnderPrevious(e,t);if(i){if(i===e){if(!this.nodeIsUncollapsedParent(e))return;if(this.nodeTopAlignsWithStickyNodesBottom(e,n))return}return this.createStickyScrollNode(i,n)}}},{key:"nodeTopAlignsWithStickyNodesBottom",value:function(e,t){var n=this.getNodeIndex(e),i=this.view.getElementTop(n),r=t;return this.view.scrollTop===i-r}},{key:"createStickyScrollNode",value:function(e,t){var n=this.treeDelegate.getHeight(e),i=this.getNodeRange(e),r=i.startIndex,o=i.endIndex;return{node:e,position:this.calculateStickyNodePosition(o,t,n),height:n,startIndex:r,endIndex:o}}},{key:"getAncestorUnderPrevious",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=e,i=this.getParentNode(n);i;){if(i===t)return n;n=i,i=this.getParentNode(n)}if(void 0===t)return n}},{key:"calculateStickyNodePosition",value:function(e,t,n){var i=this.view.getRelativeTop(e);if(null===i&&this.view.firstVisibleIndex===e&&e+1<this.view.length){var r=this.treeDelegate.getHeight(this.view.element(e)),o=this.view.getRelativeTop(e+1);i=o?o-r/this.view.renderHeight:null}if(null===i)return t;var a=this.view.element(e),s=this.treeDelegate.getHeight(a),l=i*this.view.renderHeight+s;return t+n>l&&t<=l?l-n:t}},{key:"constrainStickyNodes",value:function(e){if(0===e.length)return[];var t=this.view.renderHeight*this.maxWidgetViewRatio,n=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&n.position+n.height<=t)return e;var i=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!i.length)return[];var r=i[i.length-1];if(i.length>this.stickyScrollMaxItemCount||r.position+r.height>t)throw new Error("stickyScrollDelegate violates constraints");return i}},{key:"getParentNode",value:function(e){var t=this.model.getNodeLocation(e),n=this.model.getParentNodeLocation(t);return n?this.model.getNode(n):void 0}},{key:"nodeIsUncollapsedParent",value:function(e){var t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}},{key:"getNodeIndex",value:function(e){var t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}},{key:"getNodeRange",value:function(e){var t=this.model.getNodeLocation(e),n=this.model.getListIndex(t);if(n<0)throw new Error("Node not found in tree");return{startIndex:n,endIndex:n+this.model.getListRenderCount(t)-1}}},{key:"nodePositionTopBelowWidget",value:function(e){for(var t=[],n=this.getParentNode(e);n;)t.push(n),n=this.getParentNode(n);for(var i=0,r=0;r<t.length&&r<this.stickyScrollMaxItemCount;r++)i+=this.treeDelegate.getHeight(t[r]);return i}},{key:"domFocus",value:function(){this._widget.domFocus()}},{key:"focusedLast",value:function(){return this._widget.focusedLast()}},{key:"updateOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.stickyScrollMaxItemCount){var t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}}},{key:"validateStickySettings",value:function(e){var t=7;return"number"==typeof e.stickyScrollMaxItemCount&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}}]),t}(Ru),kK=function(){function e(t,n,i,r,o,a){u(this,e),this.view=n,this.tree=i,this.treeRenderers=r,this.treeDelegate=o,this.accessibilityProvider=a,this._previousElements=[],this._previousStateDisposables=new Tu,this._rootDomNode=gm(".monaco-tree-sticky-container.empty"),t.appendChild(this._rootDomNode);var s=gm(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(s),this.stickyScrollFocus=new wK(this._rootDomNode,n),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}return h(e,[{key:"height",get:function(){if(!this._previousState)return 0;var e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}},{key:"setState",value:function(e){var t=!!this._previousState&&this._previousState.count>0,n=!!e&&e.count>0;if(!(!t&&!n||t&&n&&this._previousState.equal(e))){if(t!==n&&this.setVisible(n),!n)return this._previousState=void 0,this._previousElements=[],void this._previousStateDisposables.clear();var i=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top="".concat(i.position,"px");else{this._previousStateDisposables.clear();for(var r=Array(e.count),o=e.count-1;o>=0;o--){var a=e.stickyNodes[o],s=this.createElement(a,o,e.count),l=s.element,u=s.disposable;r[o]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(u)}this.stickyScrollFocus.updateElements(r,e),this._previousElements=r}this._previousState=e,this._rootDomNode.style.height="".concat(i.position+i.height,"px")}}},{key:"createElement",value:function(e,t,n){var i=e.startIndex,r=document.createElement("div");r.style.top="".concat(e.position,"px"),!1!==this.tree.options.setRowHeight&&(r.style.height="".concat(e.height,"px")),!1!==this.tree.options.setRowLineHeight&&(r.style.lineHeight="".concat(e.height,"px")),r.classList.add("monaco-tree-sticky-row"),r.classList.add("monaco-list-row"),r.setAttribute("data-index","".concat(i)),r.setAttribute("data-parity",i%2==0?"even":"odd"),r.setAttribute("id",this.view.getElementID(i));var o=this.setAccessibilityAttributes(r,e.node.element,t,n),a=this.treeDelegate.getTemplateId(e.node),s=this.treeRenderers.find((function(e){return e.templateId===a}));if(!s)throw new Error("No renderer found for template id ".concat(a));var l=e.node;l===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(l=new Proxy(e.node,{}));var u=s.renderTemplate(r);s.renderElement(l,e.startIndex,u,e.height);var c=Mu((function(){o.dispose(),s.disposeElement(l,e.startIndex,u,e.height),s.disposeTemplate(u),r.remove()}));return{element:r,disposable:c}}},{key:"setAccessibilityAttributes",value:function(e,t,n,i){if(!this.accessibilityProvider)return Ru.None;var r;(this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,n,i))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,n))),this.accessibilityProvider.getRole)&&e.setAttribute("role",null!==(r=this.accessibilityProvider.getRole(t))&&void 0!==r?r:"treeitem");var o=this.accessibilityProvider.getAriaLabel(t),a=o&&"string"!=typeof o?o:nO(o),s=XP((function(t){var n=t.readObservable(a);n?e.setAttribute("aria-label",n):e.removeAttribute("aria-label")}));"string"==typeof o||o&&e.setAttribute("aria-label",o.get());var l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return"number"==typeof l&&e.setAttribute("aria-level","".concat(l)),e.setAttribute("aria-selected",String(!1)),s}},{key:"setVisible",value:function(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}},{key:"domFocus",value:function(){this.stickyScrollFocus.domFocus()}},{key:"focusedLast",value:function(){return this.stickyScrollFocus.focusedLast()}},{key:"dispose",value:function(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}]),e}(),wK=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).container=e,i.view=n,i.focusedIndex=-1,i.elements=[],i._onDidChangeHasFocus=new Zu,i.onDidChangeHasFocus=i._onDidChangeHasFocus.event,i._onContextMenu=new Zu,i.onContextMenu=i._onContextMenu.event,i._domHasFocus=!1,i._register(cp(i.container,"focus",(function(){return i.onFocus()}))),i._register(cp(i.container,"blur",(function(){return i.onBlur()}))),i._register(i.view.onDidFocus((function(){return i.toggleStickyScrollFocused(!1)}))),i._register(i.view.onKeyDown((function(e){return i.onKeyDown(e)}))),i._register(i.view.onMouseDown((function(e){return i.onMouseDown(e)}))),i._register(i.view.onContextMenu((function(e){return i.handleContextMenu(e)}))),i}return p(t,e),h(t,[{key:"domHasFocus",get:function(){return this._domHasFocus},set:function(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}},{key:"handleContextMenu",value:function(e){var t=e.browserEvent.target;if(JO(t)||$O(t)){if(!im(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");var n=this.state.stickyNodes.findIndex((function(t){var n;return t.node.element===(null===(n=e.element)||void 0===n?void 0:n.element)}));if(-1===n)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");return this.container.focus(),void this.setFocus(n)}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");var i=this.state.stickyNodes[this.focusedIndex].node.element,r=this.elements[this.focusedIndex];this._onContextMenu.fire({element:i,anchor:r,browserEvent:e.browserEvent,isStickyScroll:!0})}else this.focusedLast()&&this.view.domFocus()}},{key:"onKeyDown",value:function(e){if(this.domHasFocus&&this.state)if("ArrowUp"===e.key)this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if("ArrowDown"===e.key||"ArrowRight"===e.key){if(this.focusedIndex>=this.state.count-1){var t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}},{key:"onMouseDown",value:function(e){var t=e.browserEvent.target;(JO(t)||$O(t))&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}},{key:"updateElements",value:function(e,t){if(t&&0===t.count)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");var n=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){var i=wx(n,0,t.count-1);this.setFocus(i)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}},{key:"setFocusedElement",value:function(e){var t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){var n=t.stickyNodes[e];this.scrollNodeUnderWidget(n.endIndex+1,t)}}},{key:"scrollNodeUnderWidget",value:function(e,t){var n=t.stickyNodes[t.count-1],i=t.count>1?t.stickyNodes[t.count-2]:void 0,r=this.view.getElementTop(e),o=i?i.position+i.height+n.height:n.height;this.view.scrollTop=r-o}},{key:"domFocus",value:function(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}},{key:"focusedLast",value:function(){return!!this.state&&this.view.getHTMLElement().classList.contains("sticky-scroll-focused")}},{key:"removeFocus",value:function(){-1!==this.focusedIndex&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}},{key:"setFocus",value:function(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");var t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}},{key:"toggleElementFocus",value:function(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}},{key:"toggleCurrentElementActiveFocus",value:function(e){-1!==this.focusedIndex&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}},{key:"toggleElementActiveFocus",value:function(e,t){e.classList.toggle("focused",t)}},{key:"toggleElementPassiveFocus",value:function(e,t){e.classList.toggle("passive-focused",t)}},{key:"toggleStickyScrollFocused",value:function(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}},{key:"onFocus",value:function(){if(!this.state||0===this.elements.length)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),-1===this.focusedIndex&&this.setFocus(0)}},{key:"onBlur",value:function(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}},{key:"dispose",value:function(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),g(v(t.prototype),"dispose",this).call(this)}}]),t}(Ru);function CK(e){var t=Yj.Unknown;return Tp(e.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?t=Yj.Twistie:Tp(e.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?t=Yj.Element:Tp(e.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(t=Yj.Filter),{browserEvent:e.browserEvent,element:e.element?e.element.element:null,target:t}}function SK(e){var t=JO(e.browserEvent.target);return{element:e.element?e.element.element:null,browserEvent:e.browserEvent,anchor:e.anchor,isStickyScroll:t}}function xK(e,t){t(e),e.children.forEach((function(e){return xK(e,t)}))}var LK=function(){function e(t,n){u(this,e),this.getFirstViewElementWithTrait=t,this.identityProvider=n,this.nodes=[],this._onDidChange=new Zu,this.onDidChange=this._onDidChange.event}return h(e,[{key:"nodeSet",get:function(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}},{key:"set",value:function(e,t){!(null==t?void 0:t.__forceEvent)&&ea(this.nodes,e)||this._set(e,!1,t)}},{key:"_set",value:function(e,t,n){if(this.nodes=x(e),this.elements=void 0,this._nodeSet=void 0,!t){var i=this;this._onDidChange.fire({get elements(){return i.get()},browserEvent:n})}}},{key:"get",value:function(){return this.elements||(this.elements=this.nodes.map((function(e){return e.element}))),x(this.elements)}},{key:"getNodes",value:function(){return this.nodes}},{key:"has",value:function(e){return this.nodeSet.has(e)}},{key:"onDidModelSplice",value:function(e){var t=this,n=e.insertedNodes,i=e.deletedNodes;if(!this.identityProvider){var r=this.createNodeSet(),o=function(e){return r.delete(e)};return i.forEach((function(e){return xK(e,o)})),void this.set(x(r.values()))}var a=new Set,s=function(e){return a.add(t.identityProvider.getId(e.element).toString())};i.forEach((function(e){return xK(e,s)}));var l=new Map,u=function(e){return l.set(t.identityProvider.getId(e.element).toString(),e)};n.forEach((function(e){return xK(e,u)}));var c=[],d=!0,h=!1,f=void 0;try{for(var g,v=this.nodes[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value,m=this.identityProvider.getId(p.element).toString();if(a.has(m)){var y=l.get(m);y&&y.visible&&c.push(y)}else c.push(p)}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}if(this.nodes.length>0&&0===c.length){var _=this.getFirstViewElementWithTrait();_&&c.push(_)}this._set(c,!0)}},{key:"createNodeSet",value:function(){var e=new Set,t=!0,n=!1,i=void 0;try{for(var r,o=this.nodes[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;e.add(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}}]),e}(),DK=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[e])).tree=n,r.stickyScrollProvider=i,r}return p(t,e),h(t,[{key:"onViewPointer",value:function(e){if(!(eF(e.browserEvent.target)||YO(e.browserEvent.target)||XO(e.browserEvent.target)||e.browserEvent.isHandledByList)){var n=e.element;if(!n)return g(v(t.prototype),"onViewPointer",this).call(this,e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return g(v(t.prototype),"onViewPointer",this).call(this,e);var i=e.browserEvent.target,r=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,o=$O(e.browserEvent.target),a=!1;if(a=!!o||("function"==typeof this.tree.expandOnlyOnTwistieClick?this.tree.expandOnlyOnTwistieClick(n.element):!!this.tree.expandOnlyOnTwistieClick),o)this.handleStickyScrollMouseEvent(e,n);else{if(a&&!r&&2!==e.browserEvent.detail)return g(v(t.prototype),"onViewPointer",this).call(this,e);if(!this.tree.expandOnDoubleClick&&2===e.browserEvent.detail)return g(v(t.prototype),"onViewPointer",this).call(this,e)}if(n.collapsible&&(!o||r)){var s=this.tree.getNodeLocation(n),l=e.browserEvent.altKey;if(this.tree.setFocus([s]),this.tree.toggleCollapsed(s,l),r)return void(e.browserEvent.isHandledByList=!0)}o||g(v(t.prototype),"onViewPointer",this).call(this,e)}}},{key:"handleStickyScrollMouseEvent",value:function(e,t){if(!function(e){return QO(e,"monaco-custom-toggle")}(e.browserEvent.target)&&!function(e){return QO(e,"action-item")}(e.browserEvent.target)){var n=this.stickyScrollProvider();if(!n)throw new Error("Sticky scroll controller not found");var i=this.list.indexOf(t),r=this.list.getElementTop(i),o=n.nodePositionTopBelowWidget(t);this.tree.scrollTop=r-o,this.list.domFocus(),this.list.setFocus([i]),this.list.setSelection([i])}}},{key:"onDoubleClick",value:function(e){!e.browserEvent.target.classList.contains("monaco-tl-twistie")&&this.tree.expandOnDoubleClick&&(e.browserEvent.isHandledByList||g(v(t.prototype),"onDoubleClick",this).call(this,e))}},{key:"onMouseDown",value:function(e){var n=e.browserEvent.target;JO(n)||$O(n)||g(v(t.prototype),"onMouseDown",this).call(this,e)}},{key:"onContextMenu",value:function(e){var n=e.browserEvent.target;JO(n)||$O(n)||g(v(t.prototype),"onContextMenu",this).call(this,e)}}]),t}(cF),NK=function(e){function t(e,n,i,r,o,a,s,c){var d;return u(this,t),(d=l(this,t,[e,n,i,r,c])).focusTrait=o,d.selectionTrait=a,d.anchorTrait=s,d}return p(t,e),h(t,[{key:"createMouseController",value:function(e){return new DK(this,e.tree,e.stickyScrollProvider)}},{key:"splice",value:function(e,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(g(v(t.prototype),"splice",this).call(this,e,n,r),0!==r.length){var o,a=[],s=[];r.forEach((function(t,n){i.focusTrait.has(t)&&a.push(e+n),i.selectionTrait.has(t)&&s.push(e+n),i.anchorTrait.has(t)&&(o=e+n)})),a.length>0&&g(v(t.prototype),"setFocus",this).call(this,ca(x(g(v(t.prototype),"getFocus",this).call(this)).concat(x(a)))),s.length>0&&g(v(t.prototype),"setSelection",this).call(this,ca(x(g(v(t.prototype),"getSelection",this).call(this)).concat(x(s)))),"number"==typeof o&&g(v(t.prototype),"setAnchor",this).call(this,o)}}},{key:"setFocus",value:function(e,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];g(v(t.prototype),"setFocus",this).call(this,e,n),r||this.focusTrait.set(e.map((function(e){return i.element(e)})),n)}},{key:"setSelection",value:function(e,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];g(v(t.prototype),"setSelection",this).call(this,e,n),r||this.selectionTrait.set(e.map((function(e){return i.element(e)})),n)}},{key:"setAnchor",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];g(v(t.prototype),"setAnchor",this).call(this,e),n||(void 0===e?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}]),t}(_F),IK=function(){function e(t,n,i,r){var o=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};u(this,e),this._user=t,this._options=a,this.eventBufferer=new ec,this.onDidChangeFindOpenState=Au.None,this.onDidChangeStickyScrollFocused=Au.None,this.disposables=new Tu,this._onWillRefilter=new Zu,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new Zu,this.treeDelegate=new uK(i);var s=new tc,l=new tc,c=this.disposables.add(new cK(l.event)),d=new yw;this.renderers=r.map((function(e){return new dK(e,(function(){return o.model}),s.event,c,d,a)}));var h,f=!0,g=!1,v=void 0;try{for(var p,m=this.renderers[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value;this.disposables.add(y)}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}a.keyboardNavigationLabelProvider&&(h=new gK(this,a.keyboardNavigationLabelProvider,a.filter),a=b(_({},a),{filter:h}),this.disposables.add(h)),this.focus=new LK((function(){return o.view.getFocusedElements()[0]}),a.identityProvider),this.selection=new LK((function(){return o.view.getSelectedElements()[0]}),a.identityProvider),this.anchor=new LK((function(){return o.view.getAnchorElement()}),a.identityProvider),this.view=new NK(t,n,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,b(_({},function(e,t){return t&&b(_({},t),{identityProvider:t.identityProvider&&{getId:function(e){return t.identityProvider.getId(e.element)}},dnd:t.dnd&&new sK(e,t.dnd),multipleSelectionController:t.multipleSelectionController&&{isSelectionSingleChangeEvent:function(e){return t.multipleSelectionController.isSelectionSingleChangeEvent(b(_({},e),{element:e.element}))},isSelectionRangeChangeEvent:function(e){return t.multipleSelectionController.isSelectionRangeChangeEvent(b(_({},e),{element:e.element}))}},accessibilityProvider:t.accessibilityProvider&&b(_({},t.accessibilityProvider),{getSetSize:function(t){var n=e(),i=n.getNodeLocation(t),r=n.getParentNodeLocation(i);return n.getNode(r).visibleChildrenCount},getPosInSet:function(e){return e.visibleChildIndex+1},isChecked:t.accessibilityProvider&&t.accessibilityProvider.isChecked?function(e){return t.accessibilityProvider.isChecked(e.element)}:void 0,getRole:t.accessibilityProvider&&t.accessibilityProvider.getRole?function(e){return t.accessibilityProvider.getRole(e.element)}:function(){return"treeitem"},getAriaLabel:function(e){return t.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel:function(){return t.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:t.accessibilityProvider&&t.accessibilityProvider.getWidgetRole?function(){return t.accessibilityProvider.getWidgetRole()}:function(){return"tree"},getAriaLevel:t.accessibilityProvider&&t.accessibilityProvider.getAriaLevel?function(e){return t.accessibilityProvider.getAriaLevel(e.element)}:function(e){return e.depth},getActiveDescendantId:t.accessibilityProvider.getActiveDescendantId&&function(e){return t.accessibilityProvider.getActiveDescendantId(e.element)}}),keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&b(_({},t.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel:function(e){return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}})})}((function(){return o.model}),a)),{tree:this,stickyScrollProvider:function(){return o.stickyScrollController}})),this.model=this.createModel(t,this.view,a),s.input=this.model.onDidChangeCollapseState;var k=Au.forEach(this.model.onDidSplice,(function(e){o.eventBufferer.bufferEvents((function(){o.focus.onDidModelSplice(e),o.selection.onDidModelSplice(e)}))}),this.disposables);k((function(){return null}),null,this.disposables);var w,C=this.disposables.add(new Zu),S=this.disposables.add(new vg(0));if(this.disposables.add(Au.any(k,this.focus.onDidChange,this.selection.onDidChange)((function(){S.trigger((function(){var e=new Set,t=!0,n=!1,i=void 0;try{for(var r,a=o.focus.getNodes()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;e.add(s)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var d,h=o.selection.getNodes()[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;e.add(f)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}C.fire(x(e.values()))}))}))),l.input=C.event,!1!==a.keyboardSupport){var L=Au.chain(this.view.onKeyDown,(function(e){return e.filter((function(e){return!YO(e.target)})).map((function(e){return new rg(e)}))}));Au.chain(L,(function(e){return e.filter((function(e){return 15===e.keyCode}))}))(this.onLeftArrow,this,this.disposables),Au.chain(L,(function(e){return e.filter((function(e){return 17===e.keyCode}))}))(this.onRightArrow,this,this.disposables),Au.chain(L,(function(e){return e.filter((function(e){return 10===e.keyCode}))}))(this.onSpace,this,this.disposables)}if((null===(w=a.findWidgetEnabled)||void 0===w||w)&&a.keyboardNavigationLabelProvider&&a.contextViewProvider){var D=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new vK(this,this.model,this.view,h,a.contextViewProvider,D),this.focusNavigationFilter=function(e){return o.findController.shouldAllowFocus(e)},this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=Au.None,this.onDidChangeFindMatchType=Au.None;a.enableStickyScroll&&(this.stickyScrollController=new bK(this,this.model,this.view,this.renderers,this.treeDelegate,a),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=jp(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===lK.Always)}return h(e,[{key:"onDidScroll",get:function(){return this.view.onDidScroll}},{key:"onDidChangeFocus",get:function(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}},{key:"onDidChangeSelection",get:function(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}},{key:"onMouseDblClick",get:function(){return Au.filter(Au.map(this.view.onMouseDblClick,CK),(function(e){return e.target!==Yj.Filter}))}},{key:"onMouseOver",get:function(){return Au.map(this.view.onMouseOver,CK)}},{key:"onMouseOut",get:function(){return Au.map(this.view.onMouseOut,CK)}},{key:"onContextMenu",get:function(){var e,t;return Au.any(Au.filter(Au.map(this.view.onContextMenu,SK),(function(e){return!e.isStickyScroll})),null!==(t=null===(e=this.stickyScrollController)||void 0===e?void 0:e.onContextMenu)&&void 0!==t?t:Au.None)}},{key:"onPointer",get:function(){return Au.map(this.view.onPointer,CK)}},{key:"onKeyDown",get:function(){return this.view.onKeyDown}},{key:"onDidFocus",get:function(){return this.view.onDidFocus}},{key:"onDidChangeModel",get:function(){return Au.signal(this.model.onDidSplice)}},{key:"onDidChangeCollapseState",get:function(){return this.model.onDidChangeCollapseState}},{key:"findMode",get:function(){var e,t;return null!==(t=null===(e=this.findController)||void 0===e?void 0:e.mode)&&void 0!==t?t:hK.Highlight},set:function(e){this.findController&&(this.findController.mode=e)}},{key:"findMatchType",get:function(){var e,t;return null!==(t=null===(e=this.findController)||void 0===e?void 0:e.matchType)&&void 0!==t?t:fK.Fuzzy},set:function(e){this.findController&&(this.findController.matchType=e)}},{key:"expandOnDoubleClick",get:function(){return void 0===this._options.expandOnDoubleClick||this._options.expandOnDoubleClick}},{key:"expandOnlyOnTwistieClick",get:function(){return void 0===this._options.expandOnlyOnTwistieClick||this._options.expandOnlyOnTwistieClick}},{key:"onDidDispose",get:function(){return this.view.onDidDispose}},{key:"updateOptions",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=_({},this._options,t);var n=!0,i=!1,r=void 0;try{for(var o,a=this.renderers[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.updateOptions(t)}}catch(t){i=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this.view.updateOptions(this._options),null===(e=this.findController)||void 0===e||e.updateOptions(t),this.updateStickyScroll(t),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===lK.Always)}},{key:"options",get:function(){return this._options}},{key:"updateStickyScroll",value:function(e){var t;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new bK(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=Au.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),null===(t=this.stickyScrollController)||void 0===t||t.updateOptions(e)}},{key:"getHTMLElement",value:function(){return this.view.getHTMLElement()}},{key:"scrollTop",get:function(){return this.view.scrollTop},set:function(e){this.view.scrollTop=e}},{key:"scrollHeight",get:function(){return this.view.scrollHeight}},{key:"renderHeight",get:function(){return this.view.renderHeight}},{key:"ariaLabel",get:function(){return this.view.ariaLabel},set:function(e){this.view.ariaLabel=e}},{key:"domFocus",value:function(){var e;(null===(e=this.stickyScrollController)||void 0===e?void 0:e.focusedLast())?this.stickyScrollController.domFocus():this.view.domFocus()}},{key:"layout",value:function(e,t){var n;(this.view.layout(e,t),Ea(t))&&(null===(n=this.findController)||void 0===n||n.layout(t))}},{key:"style",value:function(e){var t,n=".".concat(this.view.domId),i=[];e.treeIndentGuidesStroke&&(i.push(".monaco-list".concat(n,":hover .monaco-tl-indent > .indent-guide, .monaco-list").concat(n,".always .monaco-tl-indent > .indent-guide  { border-color: ").concat(e.treeInactiveIndentGuidesStroke,"; }")),i.push(".monaco-list".concat(n," .monaco-tl-indent > .indent-guide.active { border-color: ").concat(e.treeIndentGuidesStroke,"; }")));var r,o=null!==(t=e.treeStickyScrollBackground)&&void 0!==t?t:e.listBackground;o&&(i.push(".monaco-list".concat(n," .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ").concat(o,"; }")),i.push(".monaco-list".concat(n," .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ").concat(o,"; }"))),e.treeStickyScrollBorder&&i.push(".monaco-list".concat(n," .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ").concat(e.treeStickyScrollBorder,"; }")),e.treeStickyScrollShadow&&i.push(".monaco-list".concat(n," .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ").concat(e.treeStickyScrollShadow," 0 6px 6px -6px inset; height: 3px; }")),e.listFocusForeground&&(i.push(".monaco-list".concat(n,".sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ").concat(e.listFocusForeground,"; }")),i.push(".monaco-list".concat(n,":not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }")));var a=km(e.listFocusAndSelectionOutline,km(e.listSelectionOutline,null!==(r=e.listFocusOutline)&&void 0!==r?r:""));a&&(i.push(".monaco-list".concat(n,".sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ").concat(a,"; outline-offset: -1px;}")),i.push(".monaco-list".concat(n,":not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}"))),e.listFocusOutline&&(i.push(".monaco-list".concat(n,".sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ").concat(e.listFocusOutline,"; outline-offset: -1px; }")),i.push(".monaco-list".concat(n,":not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }")),i.push(".monaco-workbench.context-menu-visible .monaco-list".concat(n,".last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ").concat(e.listFocusOutline,"; outline-offset: -1px; }")),i.push(".monaco-workbench.context-menu-visible .monaco-list".concat(n,".last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }")),i.push(".monaco-workbench.context-menu-visible .monaco-list".concat(n,".last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }"))),this.styleElement.textContent=i.join("\n"),this.view.style(e)}},{key:"getParentElement",value:function(e){var t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}},{key:"getFirstElementChild",value:function(e){return this.model.getFirstElementChild(e)}},{key:"getNode",value:function(e){return this.model.getNode(e)}},{key:"getNodeLocation",value:function(e){return this.model.getNodeLocation(e)}},{key:"collapse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.model.setCollapsed(e,!0,t)}},{key:"expand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.model.setCollapsed(e,!1,t)}},{key:"toggleCollapsed",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.model.setCollapsed(e,void 0,t)}},{key:"isCollapsible",value:function(e){return this.model.isCollapsible(e)}},{key:"setCollapsible",value:function(e,t){return this.model.setCollapsible(e,t)}},{key:"isCollapsed",value:function(e){return this.model.isCollapsed(e)}},{key:"refilter",value:function(){this._onWillRefilter.fire(void 0),this.model.refilter()}},{key:"setSelection",value:function(e,t){var n=this;this.eventBufferer.bufferEvents((function(){var i=e.map((function(e){return n.model.getNode(e)}));n.selection.set(i,t);var r=e.map((function(e){return n.model.getListIndex(e)})).filter((function(e){return e>-1}));n.view.setSelection(r,t,!0)}))}},{key:"getSelection",value:function(){return this.selection.get()}},{key:"setFocus",value:function(e,t){var n=this;this.eventBufferer.bufferEvents((function(){var i=e.map((function(e){return n.model.getNode(e)}));n.focus.set(i,t);var r=e.map((function(e){return n.model.getListIndex(e)})).filter((function(e){return e>-1}));n.view.setFocus(r,t,!0)}))}},{key:"focusNext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:im(n)&&n.altKey?void 0:this.focusNavigationFilter;this.view.focusNext(e,t,n,i)}},{key:"focusPrevious",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:im(n)&&n.altKey?void 0:this.focusNavigationFilter;this.view.focusPrevious(e,t,n,i)}},{key:"focusNextPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:im(e)&&e.altKey?void 0:this.focusNavigationFilter;return this.view.focusNextPage(e,t)}},{key:"focusPreviousPage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:im(e)&&e.altKey?void 0:this.focusNavigationFilter;return this.view.focusPreviousPage(e,n,(function(){var e,n;return null!==(n=null===(e=t.stickyScrollController)||void 0===e?void 0:e.height)&&void 0!==n?n:0}))}},{key:"focusLast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:im(e)&&e.altKey?void 0:this.focusNavigationFilter;this.view.focusLast(e,t)}},{key:"focusFirst",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:im(e)&&e.altKey?void 0:this.focusNavigationFilter;this.view.focusFirst(e,t)}},{key:"getFocus",value:function(){return this.focus.get()}},{key:"reveal",value:function(e,t){this.model.expandTo(e);var n=this.model.getListIndex(e);if(-1!==n)if(this.stickyScrollController){var i=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(n,t,i)}else this.view.reveal(n,t)}},{key:"onLeftArrow",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.view.getFocusedElements();if(0!==t.length){var n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!0)){var r=this.model.getParentNodeLocation(i);if(!r)return;var o=this.model.getListIndex(r);this.view.reveal(o),this.view.setFocus([o])}}}},{key:"onRightArrow",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.view.getFocusedElements();if(0!==t.length){var n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!1)){if(!n.children.some((function(e){return e.visible})))return;var r=C(this.view.getFocus(),1)[0]+1;this.view.reveal(r),this.view.setFocus([r])}}}},{key:"onSpace",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.view.getFocusedElements();if(0!==t.length){var n=t[0],i=this.model.getNodeLocation(n),r=e.browserEvent.altKey;this.model.setCollapsed(i,void 0,r)}}},{key:"dispose",value:function(){var e;Iu(this.disposables),null===(e=this.stickyScrollController)||void 0===e||e.dispose(),this.view.dispose()}}]),e}(),EK=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};u(this,e),this.user=t,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new rK(t,n,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare:function(e,t){return i.sorter.compare(e.element,t.element)}}),this.identityProvider=i.identityProvider}return h(e,[{key:"setChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ts.empty(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getElementLocation(e);this._setChildren(i,this.preserveCollapseState(t),n)}},{key:"_setChildren",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ts.empty(),i=arguments.length>2?arguments[2]:void 0,r=new Set,o=new Set;this.model.splice(x(e).concat([0]),Number.MAX_VALUE,n,b(_({},i),{onDidCreateNode:function(e){var n;if(null!==e.element){var a=e;if(r.add(a.element),t.nodes.set(a.element,a),t.identityProvider){var s=t.identityProvider.getId(a.element).toString();o.add(s),t.nodesByIdentity.set(s,a)}null===(n=i.onDidCreateNode)||void 0===n||n.call(i,a)}},onDidDeleteNode:function(e){var n;if(null!==e.element){var a=e;if(r.has(a.element)||t.nodes.delete(a.element),t.identityProvider){var s=t.identityProvider.getId(a.element).toString();o.has(s)||t.nodesByIdentity.delete(s)}null===(n=i.onDidDeleteNode)||void 0===n||n.call(i,a)}}}))}},{key:"preserveCollapseState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ts.empty();return this.sorter&&(t=x(t).sort(this.sorter.compare.bind(this.sorter))),Ts.map(t,(function(t){var n,i=e.nodes.get(t.element);if(!i&&e.identityProvider){var r=e.identityProvider.getId(t.element).toString();i=e.nodesByIdentity.get(r)}if(!i)return n=void 0===t.collapsed?void 0:t.collapsed===Zj.Collapsed||t.collapsed===Zj.PreserveOrCollapsed||t.collapsed!==Zj.Expanded&&t.collapsed!==Zj.PreserveOrExpanded&&Boolean(t.collapsed),b(_({},t),{children:e.preserveCollapseState(t.children),collapsed:n});var o,a="boolean"==typeof t.collapsible?t.collapsible:i.collapsible;return o=void 0===t.collapsed||t.collapsed===Zj.PreserveOrCollapsed||t.collapsed===Zj.PreserveOrExpanded?i.collapsed:t.collapsed===Zj.Collapsed||t.collapsed!==Zj.Expanded&&Boolean(t.collapsed),b(_({},t),{collapsible:a,collapsed:o,children:e.preserveCollapseState(t.children)})}))}},{key:"rerender",value:function(e){var t=this.getElementLocation(e);this.model.rerender(t)}},{key:"getFirstElementChild",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}},{key:"has",value:function(e){return this.nodes.has(e)}},{key:"getListIndex",value:function(e){var t=this.getElementLocation(e);return this.model.getListIndex(t)}},{key:"getListRenderCount",value:function(e){var t=this.getElementLocation(e);return this.model.getListRenderCount(t)}},{key:"isCollapsible",value:function(e){var t=this.getElementLocation(e);return this.model.isCollapsible(t)}},{key:"setCollapsible",value:function(e,t){var n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}},{key:"isCollapsed",value:function(e){var t=this.getElementLocation(e);return this.model.isCollapsed(t)}},{key:"setCollapsed",value:function(e,t,n){var i=this.getElementLocation(e);return this.model.setCollapsed(i,t,n)}},{key:"expandTo",value:function(e){var t=this.getElementLocation(e);this.model.expandTo(t)}},{key:"refilter",value:function(){this.model.refilter()}},{key:"getNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e)return this.model.getNode(this.model.rootRef);var t=this.nodes.get(e);if(!t)throw new Jj(this.user,"Tree element not found: ".concat(e));return t}},{key:"getNodeLocation",value:function(e){return e.element}},{key:"getParentNodeLocation",value:function(e){if(null===e)throw new Jj(this.user,"Invalid getParentNodeLocation call");var t=this.nodes.get(e);if(!t)throw new Jj(this.user,"Tree element not found: ".concat(e));var n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return this.model.getNode(i).element}},{key:"getElementLocation",value:function(e){if(null===e)return[];var t=this.nodes.get(e);if(!t)throw new Jj(this.user,"Tree element not found: ".concat(e));return this.model.getNodeLocation(t)}}]),e}();function MK(e){return{element:{elements:[e.element],incompressible:e.incompressible||!1},children:Ts.map(Ts.from(e.children),MK),collapsible:e.collapsible,collapsed:e.collapsed}}function TK(e){for(var t,n,i=[e.element],r=e.incompressible||!1;;){var o;if(n=(o=C(Ts.consume(Ts.from(e.children),2),2))[0],t=o[1],1!==n.length)break;if(n[0].incompressible)break;e=n[0],i.push(e.element)}return{element:{elements:i,incompressible:r},children:Ts.map(Ts.concat(n,t),TK),collapsible:e.collapsible,collapsed:e.collapsed}}function RK(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=n<e.element.elements.length-1?[RK(e,n+1)]:Ts.map(Ts.from(e.children),(function(e){return RK(e,0)})),0===n&&e.element.incompressible?{element:e.element.elements[n],children:t,incompressible:!0,collapsible:e.collapsible,collapsed:e.collapsed}:{element:e.element.elements[n],children:t,collapsible:e.collapsible,collapsed:e.collapsed}}function AK(e){return RK(e,0)}function PK(e,t,n){return e.element===t?b(_({},e),{children:n}):b(_({},e),{children:Ts.map(Ts.from(e.children),(function(e){return PK(e,t,n)}))})}var OK=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};u(this,e),this.user=t,this.rootRef=null,this.nodes=new Map,this.model=new EK(t,n,i),this.enabled=void 0===i.compressionEnabled||i.compressionEnabled,this.identityProvider=i.identityProvider}return h(e,[{key:"onDidSplice",get:function(){return this.model.onDidSplice}},{key:"onDidChangeCollapseState",get:function(){return this.model.onDidChangeCollapseState}},{key:"onDidChangeRenderNodeCount",get:function(){return this.model.onDidChangeRenderNodeCount}},{key:"setChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ts.empty(),n=arguments.length>2?arguments[2]:void 0,i=n.diffIdentityProvider&&function(e){return{getId:function(t){return t.elements.map((function(t){return e.getId(t).toString()})).join("\0")}}}(n.diffIdentityProvider);if(null!==e){var r=this.nodes.get(e);if(!r)throw new Jj(this.user,"Unknown compressed tree node");var o=this.model.getNode(r),a=this.model.getParentNodeLocation(r),s=this.model.getNode(a),l=PK(AK(o),e,t),u=(this.enabled?TK:MK)(l),c=n.diffIdentityProvider?function(e,t){return n.diffIdentityProvider.getId(e)===n.diffIdentityProvider.getId(t)}:void 0;if(ea(u.element.elements,o.element.elements,c))this._setChildren(r,u.children||Ts.empty(),{diffIdentityProvider:i,diffDepth:1});else{var d=s.children.map((function(e){return e===o?u:e}));this._setChildren(s.element,d,{diffIdentityProvider:i,diffDepth:o.depth-s.depth})}}else{var h=Ts.map(t,this.enabled?TK:MK);this._setChildren(null,h,{diffIdentityProvider:i,diffDepth:1/0})}}},{key:"isCompressionEnabled",value:function(){return this.enabled}},{key:"setCompressionEnabled",value:function(e){if(e!==this.enabled){this.enabled=e;var t=this.model.getNode().children,n=Ts.map(t,AK),i=Ts.map(n,e?TK:MK);this._setChildren(null,i,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}}},{key:"_setChildren",value:function(e,t,n){var i=this,r=new Set;this.model.setChildren(e,t,b(_({},n),{onDidCreateNode:function(e){var t=!0,n=!1,o=void 0;try{for(var a,s=e.element.elements[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var l=a.value;r.add(l),i.nodes.set(l,e.element)}}catch(e){n=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw o}}},onDidDeleteNode:function(e){var t=!0,n=!1,o=void 0;try{for(var a,s=e.element.elements[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var l=a.value;r.has(l)||i.nodes.delete(l)}}catch(e){n=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw o}}}}))}},{key:"has",value:function(e){return this.nodes.has(e)}},{key:"getListIndex",value:function(e){var t=this.getCompressedNode(e);return this.model.getListIndex(t)}},{key:"getListRenderCount",value:function(e){var t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}},{key:"getNode",value:function(e){if(void 0===e)return this.model.getNode();var t=this.getCompressedNode(e);return this.model.getNode(t)}},{key:"getNodeLocation",value:function(e){var t=this.model.getNodeLocation(e);return null===t?null:t.elements[t.elements.length-1]}},{key:"getParentNodeLocation",value:function(e){var t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return null===n?null:n.elements[n.elements.length-1]}},{key:"getFirstElementChild",value:function(e){var t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}},{key:"isCollapsible",value:function(e){var t=this.getCompressedNode(e);return this.model.isCollapsible(t)}},{key:"setCollapsible",value:function(e,t){var n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}},{key:"isCollapsed",value:function(e){var t=this.getCompressedNode(e);return this.model.isCollapsed(t)}},{key:"setCollapsed",value:function(e,t,n){var i=this.getCompressedNode(e);return this.model.setCollapsed(i,t,n)}},{key:"expandTo",value:function(e){var t=this.getCompressedNode(e);this.model.expandTo(t)}},{key:"rerender",value:function(e){var t=this.getCompressedNode(e);this.model.rerender(t)}},{key:"refilter",value:function(){this.model.refilter()}},{key:"getCompressedNode",value:function(e){if(null===e)return null;var t=this.nodes.get(e);if(!t)throw new Jj(this.user,"Tree element not found: ".concat(e));return t}}]),e}(),FK=function(e){return e[e.length-1]},WK=function(){function e(t,n){u(this,e),this.unwrapper=t,this.node=n}return h(e,[{key:"element",get:function(){return null===this.node.element?null:this.unwrapper(this.node.element)}},{key:"children",get:function(){var t=this;return this.node.children.map((function(n){return new e(t.unwrapper,n)}))}},{key:"depth",get:function(){return this.node.depth}},{key:"visibleChildrenCount",get:function(){return this.node.visibleChildrenCount}},{key:"visibleChildIndex",get:function(){return this.node.visibleChildIndex}},{key:"collapsible",get:function(){return this.node.collapsible}},{key:"collapsed",get:function(){return this.node.collapsed}},{key:"visible",get:function(){return this.node.visible}},{key:"filterData",get:function(){return this.node.filterData}}]),e}();var BK=function(){function e(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};u(this,e),this.rootRef=null,this.elementMapper=r.elementMapper||FK;var o=function(e){return i.elementMapper(e.elements)};this.nodeMapper=new eK((function(e){return new WK(o,e)})),this.model=new OK(t,function(e,t){return{splice:function(n,i,r){t.splice(n,i,r.map((function(t){return e.map(t)})))},updateElementHeight:function(e,n){t.updateElementHeight(e,n)}}}(this.nodeMapper,n),function(e,t){return b(_({},t),{identityProvider:t.identityProvider&&{getId:function(n){return t.identityProvider.getId(e(n))}},sorter:t.sorter&&{compare:function(e,n){return t.sorter.compare(e.elements[0],n.elements[0])}},filter:t.filter&&{filter:function(n,i){return t.filter.filter(e(n),i)}}})}(o,r))}return h(e,[{key:"onDidSplice",get:function(){var e=this;return Au.map(this.model.onDidSplice,(function(t){var n=t.insertedNodes,i=t.deletedNodes;return{insertedNodes:n.map((function(t){return e.nodeMapper.map(t)})),deletedNodes:i.map((function(t){return e.nodeMapper.map(t)}))}}))}},{key:"onDidChangeCollapseState",get:function(){var e=this;return Au.map(this.model.onDidChangeCollapseState,(function(t){var n=t.node,i=t.deep;return{node:e.nodeMapper.map(n),deep:i}}))}},{key:"onDidChangeRenderNodeCount",get:function(){var e=this;return Au.map(this.model.onDidChangeRenderNodeCount,(function(t){return e.nodeMapper.map(t)}))}},{key:"setChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ts.empty(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.model.setChildren(e,t,n)}},{key:"isCompressionEnabled",value:function(){return this.model.isCompressionEnabled()}},{key:"setCompressionEnabled",value:function(e){this.model.setCompressionEnabled(e)}},{key:"has",value:function(e){return this.model.has(e)}},{key:"getListIndex",value:function(e){return this.model.getListIndex(e)}},{key:"getListRenderCount",value:function(e){return this.model.getListRenderCount(e)}},{key:"getNode",value:function(e){return this.nodeMapper.map(this.model.getNode(e))}},{key:"getNodeLocation",value:function(e){return e.element}},{key:"getParentNodeLocation",value:function(e){return this.model.getParentNodeLocation(e)}},{key:"getFirstElementChild",value:function(e){var t=this.model.getFirstElementChild(e);return null==t?t:this.elementMapper(t.elements)}},{key:"isCollapsible",value:function(e){return this.model.isCollapsible(e)}},{key:"setCollapsible",value:function(e,t){return this.model.setCollapsible(e,t)}},{key:"isCollapsed",value:function(e){return this.model.isCollapsed(e)}},{key:"setCollapsed",value:function(e,t,n){return this.model.setCollapsed(e,t,n)}},{key:"expandTo",value:function(e){return this.model.expandTo(e)}},{key:"rerender",value:function(e){return this.model.rerender(e)}},{key:"refilter",value:function(){return this.model.refilter()}},{key:"getCompressedTreeNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.model.getNode(e)}}]),e}(),HK=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},VK=function(e){function t(e,n,i,r){var o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return u(this,t),(o=l(this,t,[e,n,i,r,a])).user=e,o}return p(t,e),h(t,[{key:"onDidChangeCollapseState",get:function(){return this.model.onDidChangeCollapseState}},{key:"setChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ts.empty(),n=arguments.length>2?arguments[2]:void 0;this.model.setChildren(e,t,n)}},{key:"rerender",value:function(e){void 0!==e?this.model.rerender(e):this.view.rerender()}},{key:"hasElement",value:function(e){return this.model.has(e)}},{key:"createModel",value:function(e,t,n){return new EK(e,t,n)}}]),t}(IK),zK=function(){function e(t,n,i){u(this,e),this._compressedTreeNodeProvider=t,this.stickyScrollDelegate=n,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}return h(e,[{key:"compressedTreeNodeProvider",get:function(){return this._compressedTreeNodeProvider()}},{key:"renderTemplate",value:function(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}},{key:"renderElement",value:function(e,t,n,i){var r=this.stickyScrollDelegate.getCompressedNode(e);r||(r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),1===r.element.elements.length?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,i)):(n.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,n.data,i))}},{key:"disposeElement",value:function(e,t,n,i){var r,o,a,s;n.compressedTreeNode?null===(r=(o=this.renderer).disposeCompressedElements)||void 0===r||r.call(o,n.compressedTreeNode,t,n.data,i):null===(a=(s=this.renderer).disposeElement)||void 0===a||a.call(s,e,t,n.data,i)}},{key:"disposeTemplate",value:function(e){this.renderer.disposeTemplate(e.data)}},{key:"renderTwistie",value:function(e,t){return!!this.renderer.renderTwistie&&this.renderer.renderTwistie(e,t)}}]),e}();HK([QI],zK.prototype,"compressedTreeNodeProvider",null);var UK=function(){function e(t){u(this,e),this.modelProvider=t,this.compressedStickyNodes=new Map}return h(e,[{key:"getCompressedNode",value:function(e){return this.compressedStickyNodes.get(e)}},{key:"constrainStickyScrollNodes",value:function(e,t,n){if(this.compressedStickyNodes.clear(),0===e.length)return[];for(var i=0;i<e.length;i++){var r=e[i],o=r.position+r.height;if(i+1<e.length&&o+e[i+1].height>n||i>=t-1&&t<e.length){var a=e.slice(0,i),s=e.slice(i),l=this.compressStickyNodes(s);return x(a).concat([l])}}return e}},{key:"compressStickyNodes",value:function(e){if(0===e.length)throw new Error("Can't compress empty sticky nodes");var t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];for(var n=[],i=0;i<e.length;i++){var r=e[i],o=t.getCompressedTreeNode(r.node.element);if(o.element){var a;if(0!==i&&o.element.incompressible)break;(a=n).push.apply(a,x(o.element.elements))}}if(n.length<2)return e[0];var s=e[e.length-1],l={elements:n,incompressible:!1},u=b(_({},s.node),{children:[],element:l}),c=new Proxy(e[0].node,{}),d={node:c,startIndex:e[0].startIndex,endIndex:s.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(c,u),d}}]),e}();function jK(e,t){return t&&b(_({},t),{keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel:function(n){var i;try{i=e().getCompressedTreeNode(n)}catch(e){return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(n)}return 1===i.element.elements.length?t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(n):t.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}})}var KK=function(e){function t(e,n,r,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};u(this,t);var c=function(){return i(a)},d=new UK((function(){return i(a).model})),h=o.map((function(e){return new zK(c,d,e)}));return a=l(this,t,[e,n,r,h,b(_({},jK(c,s)),{stickyScrollDelegate:d})])}return p(t,e),h(t,[{key:"setChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ts.empty(),n=arguments.length>2?arguments[2]:void 0;this.model.setChildren(e,t,n)}},{key:"createModel",value:function(e,t,n){return new BK(e,t,n)}},{key:"updateOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g(v(t.prototype),"updateOptions",this).call(this,e),void 0!==e.compressionEnabled&&this.model.setCompressionEnabled(e.compressionEnabled)}},{key:"getCompressedTreeNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.model.getCompressedTreeNode(e)}}]),t}(VK);function qK(e){return b(_({},e),{children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1})}function GK(e,t){return!!t.parent&&(t.parent===e||GK(e,t.parent))}var ZK=function(){function e(t){u(this,e),this.node=t}return h(e,[{key:"element",get:function(){return this.node.element.element}},{key:"children",get:function(){return this.node.children.map((function(t){return new e(t)}))}},{key:"depth",get:function(){return this.node.depth}},{key:"visibleChildrenCount",get:function(){return this.node.visibleChildrenCount}},{key:"visibleChildIndex",get:function(){return this.node.visibleChildIndex}},{key:"collapsible",get:function(){return this.node.collapsible}},{key:"collapsed",get:function(){return this.node.collapsed}},{key:"visible",get:function(){return this.node.visible}},{key:"filterData",get:function(){return this.node.filterData}}]),e}(),YK=function(){function e(t,n,i){u(this,e),this.renderer=t,this.nodeMapper=n,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=t.templateId}return h(e,[{key:"renderTemplate",value:function(e){return{templateData:this.renderer.renderTemplate(e)}}},{key:"renderElement",value:function(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}},{key:"renderTwistie",value:function(e,t){var n,i;return e.slow?((n=t.classList).add.apply(n,x(ny.asClassNameArray(bd.treeItemLoading))),!0):((i=t.classList).remove.apply(i,x(ny.asClassNameArray(bd.treeItemLoading))),!1)}},{key:"disposeElement",value:function(e,t,n,i){var r,o;null===(r=(o=this.renderer).disposeElement)||void 0===r||r.call(o,this.nodeMapper.map(e),t,n.templateData,i)}},{key:"disposeTemplate",value:function(e){this.renderer.disposeTemplate(e.templateData)}},{key:"dispose",value:function(){this.renderedNodes.clear()}}]),e}();function QK(e){return{browserEvent:e.browserEvent,elements:e.elements.map((function(e){return e.element}))}}function XK(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,target:e.target}}var $K=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e.elements.map((function(e){return e.element}))])).data=e,n}return p(t,e),t}(BO);function JK(e){return e instanceof BO?new $K(e):e}var eq=function(){function e(t){u(this,e),this.dnd=t}return h(e,[{key:"getDragURI",value:function(e){return this.dnd.getDragURI(e.element)}},{key:"getDragLabel",value:function(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((function(e){return e.element})),t)}},{key:"onDragStart",value:function(e,t){var n,i;null===(n=(i=this.dnd).onDragStart)||void 0===n||n.call(i,JK(e),t)}},{key:"onDragOver",value:function(e,t,n,i,r){return this.dnd.onDragOver(JK(e),t&&t.element,n,i,r)}},{key:"drop",value:function(e,t,n,i,r){this.dnd.drop(JK(e),t&&t.element,n,i,r)}},{key:"onDragEnd",value:function(e){var t,n;null===(t=(n=this.dnd).onDragEnd)||void 0===t||t.call(n,e)}},{key:"dispose",value:function(){this.dnd.dispose()}}]),e}();function tq(e){return e&&b(_({},e),{collapseByDefault:!0,identityProvider:e.identityProvider&&{getId:function(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new eq(e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent:function(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(b(_({},t),{element:t.element}))},isSelectionRangeChangeEvent:function(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(b(_({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&b(_({},e.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:e.accessibilityProvider.getRole?function(t){return e.accessibilityProvider.getRole(t.element)}:function(){return"treeitem"},isChecked:e.accessibilityProvider.isChecked?function(t){var n;return!!(null===(n=e.accessibilityProvider)||void 0===n?void 0:n.isChecked(t.element))}:void 0,getAriaLabel:function(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel:function(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider.getWidgetRole?function(){return e.accessibilityProvider.getWidgetRole()}:function(){return"tree"},getAriaLevel:e.accessibilityProvider.getAriaLevel&&function(t){return e.accessibilityProvider.getAriaLevel(t.element)},getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&function(t){return e.accessibilityProvider.getActiveDescendantId(t.element)}}),filter:e.filter&&{filter:function(t,n){return e.filter.filter(t.element,n)}},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&b(_({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel:function(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),sorter:void 0,expandOnlyOnTwistieClick:void 0===e.expandOnlyOnTwistieClick?void 0:"function"!=typeof e.expandOnlyOnTwistieClick?e.expandOnlyOnTwistieClick:function(t){return e.expandOnlyOnTwistieClick(t.element)},defaultFindVisibility:function(t){return t.hasChildren&&t.stale?1:"number"==typeof e.defaultFindVisibility?e.defaultFindVisibility:void 0===e.defaultFindVisibility?2:e.defaultFindVisibility(t.element)}})}function nq(e,t){t(e),e.children.forEach((function(e){return nq(e,t)}))}var iq=function(){function e(t,n,i,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};u(this,e),this.user=t,this.dataSource=o,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new Zu,this._onDidChangeNodeSlowState=new Zu,this.nodeMapper=new eK((function(e){return new ZK(e)})),this.disposables=new Tu,this.identityProvider=a.identityProvider,this.autoExpandSingleChildren=void 0!==a.autoExpandSingleChildren&&a.autoExpandSingleChildren,this.sorter=a.sorter,this.getDefaultCollapseState=function(e){return a.collapseByDefault?a.collapseByDefault(e)?Zj.PreserveOrCollapsed:Zj.PreserveOrExpanded:void 0},this.tree=this.createTree(t,n,i,r,a),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=qK({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root=b(_({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}return h(e,[{key:"onDidScroll",get:function(){return this.tree.onDidScroll}},{key:"onDidChangeFocus",get:function(){return Au.map(this.tree.onDidChangeFocus,QK)}},{key:"onDidChangeSelection",get:function(){return Au.map(this.tree.onDidChangeSelection,QK)}},{key:"onMouseDblClick",get:function(){return Au.map(this.tree.onMouseDblClick,XK)}},{key:"onPointer",get:function(){return Au.map(this.tree.onPointer,XK)}},{key:"onDidFocus",get:function(){return this.tree.onDidFocus}},{key:"onDidChangeModel",get:function(){return this.tree.onDidChangeModel}},{key:"onDidChangeCollapseState",get:function(){return this.tree.onDidChangeCollapseState}},{key:"onDidChangeFindOpenState",get:function(){return this.tree.onDidChangeFindOpenState}},{key:"onDidChangeStickyScrollFocused",get:function(){return this.tree.onDidChangeStickyScrollFocused}},{key:"onDidDispose",get:function(){return this.tree.onDidDispose}},{key:"createTree",value:function(e,t,n,i,r){var o=this,a=new uK(n),s=i.map((function(e){return new YK(e,o.nodeMapper,o._onDidChangeNodeSlowState.event)})),l=tq(r)||{};return new VK(e,t,a,s,l)}},{key:"updateOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tree.updateOptions(e)}},{key:"getHTMLElement",value:function(){return this.tree.getHTMLElement()}},{key:"scrollTop",get:function(){return this.tree.scrollTop},set:function(e){this.tree.scrollTop=e}},{key:"scrollHeight",get:function(){return this.tree.scrollHeight}},{key:"renderHeight",get:function(){return this.tree.renderHeight}},{key:"domFocus",value:function(){this.tree.domFocus()}},{key:"layout",value:function(e,t){this.tree.layout(e,t)}},{key:"style",value:function(e){this.tree.style(e)}},{key:"getInput",value:function(){return this.root.element}},{key:"setInput",value:function(e,t){var n=this;return s((function(){var i;return E(this,(function(r){switch(r.label){case 0:return n.refreshPromises.forEach((function(e){return e.cancel()})),n.refreshPromises.clear(),n.root.element=e,i=t&&{viewState:t,focus:[],selection:[]},[4,n._updateChildren(e,!0,!1,i)];case 1:return r.sent(),i&&(n.tree.setFocus(i.focus),n.tree.setSelection(i.selection)),t&&"number"==typeof t.scrollTop&&(n.scrollTop=t.scrollTop),[2]}}))}))()}},{key:"_updateChildren",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.element,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,o=this;return s((function(){var a;return E(this,(function(s){switch(s.label){case 0:if(void 0===o.root.element)throw new Jj(o.user,"Tree input not set");return o.root.refreshPromise?[4,o.root.refreshPromise]:[3,3];case 1:return s.sent(),[4,Au.toPromise(o._onDidRender.event)];case 2:s.sent(),s.label=3;case 3:return a=o.getDataNode(e),[4,o.refreshAndRenderNode(a,t,i,r)];case 4:if(s.sent(),n)try{o.tree.rerender(a)}catch(e){}return[2]}}))}))()}},{key:"rerender",value:function(e){if(void 0!==e&&e!==this.root.element){var t=this.getDataNode(e);this.tree.rerender(t)}else this.tree.rerender()}},{key:"getNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.element,t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}},{key:"collapse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}},{key:"expand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return s((function(){var i,r;return E(this,(function(o){switch(o.label){case 0:if(void 0===n.root.element)throw new Jj(n.user,"Tree input not set");return n.root.refreshPromise?[4,n.root.refreshPromise]:[3,3];case 1:return o.sent(),[4,Au.toPromise(n._onDidRender.event)];case 2:o.sent(),o.label=3;case 3:return i=n.getDataNode(e),n.tree.hasElement(i)&&!n.tree.isCollapsible(i)?[2,!1]:i.refreshPromise?[4,n.root.refreshPromise]:[3,6];case 4:return o.sent(),[4,Au.toPromise(n._onDidRender.event)];case 5:o.sent(),o.label=6;case 6:return i===n.root||i.refreshPromise||n.tree.isCollapsed(i)?(r=n.tree.expand(i===n.root?null:i,t),i.refreshPromise?[4,n.root.refreshPromise]:[3,9]):[2,!1];case 7:return o.sent(),[4,Au.toPromise(n._onDidRender.event)];case 8:o.sent(),o.label=9;case 9:return[2,r]}}))}))()}},{key:"setSelection",value:function(e,t){var n=this,i=e.map((function(e){return n.getDataNode(e)}));this.tree.setSelection(i,t)}},{key:"getSelection",value:function(){var e=this.tree.getSelection();return e.map((function(e){return e.element}))}},{key:"setFocus",value:function(e,t){var n=this,i=e.map((function(e){return n.getDataNode(e)}));this.tree.setFocus(i,t)}},{key:"getFocus",value:function(){var e=this.tree.getFocus();return e.map((function(e){return e.element}))}},{key:"reveal",value:function(e,t){this.tree.reveal(this.getDataNode(e),t)}},{key:"getParentElement",value:function(e){var t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}},{key:"getFirstElementChild",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.element,t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}},{key:"getDataNode",value:function(e){var t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Jj(this.user,"Data tree node not found: ".concat(e));return t}},{key:"refreshAndRenderNode",value:function(e,t,n,i){var r=this;return s((function(){return E(this,(function(o){switch(o.label){case 0:return[4,r.refreshNode(e,t,n)];case 1:return o.sent(),r.disposables.isDisposed?[2]:(r.render(e,n,i),[2])}}))}))()}},{key:"refreshNode",value:function(e,t,n){var i=this;return s((function(){var r;return E(this,(function(o){return i.subTreeRefreshPromises.forEach((function(o,a){!r&&function(e,t){return e===t||GK(e,t)||GK(t,e)}(a,e)&&(r=o.then((function(){return i.refreshNode(e,t,n)})))})),r?[2,r]:e!==i.root&&i.tree.getNode(e).collapsed?(e.hasChildren=!!i.dataSource.hasChildren(e.element),e.stale=!0,i.setChildren(e,[],t,n),[2]):[2,i.doRefreshSubTree(e,t,n)]}))}))()}},{key:"doRefreshSubTree",value:function(e,t,n){var i=this;return s((function(){var r,o;return E(this,(function(a){switch(a.label){case 0:e.refreshPromise=new Promise((function(e){return r=e})),i.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally((function(){e.refreshPromise=void 0,i.subTreeRefreshPromises.delete(e)})),a.label=1;case 1:return a.trys.push([1,,4,5]),[4,i.doRefreshNode(e,t,n)];case 2:return o=a.sent(),e.stale=!1,[4,xg.settled(o.map((function(e){return i.doRefreshSubTree(e,t,n)})))];case 3:return a.sent(),[3,5];case 4:return r(),[7];case 5:return[2]}}))}))()}},{key:"doRefreshNode",value:function(e,t,n){var i=this;return s((function(){var r,o,a,s,l;return E(this,(function(u){switch(u.label){case 0:e.hasChildren=!!i.dataSource.hasChildren(e.element),e.hasChildren?Ma(o=i.doGetChildren(e))?r=Promise.resolve(o):((a=mg(800)).then((function(){e.slow=!0,i._onDidChangeNodeSlowState.fire(e)}),(function(e){return null})),r=o.finally((function(){return a.cancel()}))):r=Promise.resolve(Ts.empty()),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,r];case 2:return s=u.sent(),[2,i.setChildren(e,s,t,n)];case 3:if(l=u.sent(),e!==i.root&&i.tree.hasElement(e)&&i.tree.collapse(e),_u(l))return[2,[]];throw l;case 4:return e.slow&&(e.slow=!1,i._onDidChangeNodeSlowState.fire(e)),[7];case 5:return[2]}}))}))()}},{key:"doGetChildren",value:function(e){var t=this,n=this.refreshPromises.get(e);if(n)return n;var i=this.dataSource.getChildren(e.element);if(Ma(i))return this.processChildren(i);var r=this;return n=hg(s((function(){var e;return E(this,(function(t){switch(t.label){case 0:return e=r.processChildren,[4,i];case 1:return[2,e.apply(r,[t.sent()])]}}))}))),this.refreshPromises.set(e,n),n.finally((function(){t.refreshPromises.delete(e)}))}},{key:"_onDidChangeCollapseState",value:function(e){var t=e.node,n=e.deep;null!==t.element&&!t.collapsed&&t.element.stale&&(n?this.collapse(t.element.element):this.refreshAndRenderNode(t.element,!1).catch(vu))}},{key:"setChildren",value:function(e,t,n,i){var r,o=this,a=x(t);if(0===e.children.length&&0===a.length)return[];var s=new Map,l=new Map,u=!0,c=!1,d=void 0;try{for(var h,f=e.children[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;s.set(g.element,g),this.identityProvider&&l.set(g.id,{node:g,collapsed:this.tree.hasElement(g)&&this.tree.isCollapsed(g)})}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}var v=[],p=a.map((function(t){var r=!!o.dataSource.hasChildren(t);if(!o.identityProvider){var a=qK({element:t,parent:e,hasChildren:r,defaultCollapseState:o.getDefaultCollapseState(t)});return r&&a.defaultCollapseState===Zj.PreserveOrExpanded&&v.push(a),a}var u=o.identityProvider.getId(t).toString(),c=l.get(u);if(c){var d=c.node;return s.delete(d.element),o.nodes.delete(d.element),o.nodes.set(t,d),d.element=t,d.hasChildren=r,n?c.collapsed?(d.children.forEach((function(e){return nq(e,(function(e){return o.nodes.delete(e.element)}))})),d.children.splice(0,d.children.length),d.stale=!0):v.push(d):r&&!c.collapsed&&v.push(d),d}var h=qK({element:t,parent:e,id:u,hasChildren:r,defaultCollapseState:o.getDefaultCollapseState(t)});return i&&i.viewState.focus&&i.viewState.focus.indexOf(u)>-1&&i.focus.push(h),i&&i.viewState.selection&&i.viewState.selection.indexOf(u)>-1&&i.selection.push(h),(i&&i.viewState.expanded&&i.viewState.expanded.indexOf(u)>-1||r&&h.defaultCollapseState===Zj.PreserveOrExpanded)&&v.push(h),h})),m=!0,y=!1,_=void 0;try{for(var b,k=s.values()[Symbol.iterator]();!(m=(b=k.next()).done);m=!0){nq(b.value,(function(e){return o.nodes.delete(e.element)}))}}catch(e){y=!0,_=e}finally{try{m||null==k.return||k.return()}finally{if(y)throw _}}var w=!0,C=!1,S=void 0;try{for(var L,D=p[Symbol.iterator]();!(w=(L=D.next()).done);w=!0){var N=L.value;this.nodes.set(N.element,N)}}catch(e){C=!0,S=e}finally{try{w||null==D.return||D.return()}finally{if(C)throw S}}return(r=e.children).splice.apply(r,[0,e.children.length].concat(x(p))),e!==this.root&&this.autoExpandSingleChildren&&1===p.length&&0===v.length&&(p[0].forceExpanded=!0,v.push(p[0])),v}},{key:"render",value:function(e,t,n){var i=this,r=e.children.map((function(e){return i.asTreeElement(e,t)})),o=n&&b(_({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId:function(e){return n.diffIdentityProvider.getId(e.element)}}});this.tree.setChildren(e===this.root?null:e,r,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}},{key:"asTreeElement",value:function(e,t){var n,i=this;return e.stale?{element:e,collapsible:e.hasChildren,collapsed:!0}:(t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:e.forceExpanded?(n=!1,e.forceExpanded=!1):n=e.defaultCollapseState,{element:e,children:e.hasChildren?Ts.map(e.children,(function(e){return i.asTreeElement(e,t)})):[],collapsible:e.hasChildren,collapsed:n})}},{key:"processChildren",value:function(e){return this.sorter&&(e=x(e).sort(this.sorter.compare.bind(this.sorter))),e}},{key:"dispose",value:function(){this.disposables.dispose(),this.tree.dispose()}}]),e}(),rq=function(){function e(t){u(this,e),this.node=t}return h(e,[{key:"element",get:function(){return{elements:this.node.element.elements.map((function(e){return e.element})),incompressible:this.node.element.incompressible}}},{key:"children",get:function(){return this.node.children.map((function(t){return new e(t)}))}},{key:"depth",get:function(){return this.node.depth}},{key:"visibleChildrenCount",get:function(){return this.node.visibleChildrenCount}},{key:"visibleChildIndex",get:function(){return this.node.visibleChildIndex}},{key:"collapsible",get:function(){return this.node.collapsible}},{key:"collapsed",get:function(){return this.node.collapsed}},{key:"visible",get:function(){return this.node.visible}},{key:"filterData",get:function(){return this.node.filterData}}]),e}(),oq=function(){function e(t,n,i,r){u(this,e),this.renderer=t,this.nodeMapper=n,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=r,this.renderedNodes=new Map,this.disposables=[],this.templateId=t.templateId}return h(e,[{key:"renderTemplate",value:function(e){return{templateData:this.renderer.renderTemplate(e)}}},{key:"renderElement",value:function(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}},{key:"renderCompressedElements",value:function(e,t,n,i){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}},{key:"renderTwistie",value:function(e,t){var n,i;return e.slow?((n=t.classList).add.apply(n,x(ny.asClassNameArray(bd.treeItemLoading))),!0):((i=t.classList).remove.apply(i,x(ny.asClassNameArray(bd.treeItemLoading))),!1)}},{key:"disposeElement",value:function(e,t,n,i){var r,o;null===(r=(o=this.renderer).disposeElement)||void 0===r||r.call(o,this.nodeMapper.map(e),t,n.templateData,i)}},{key:"disposeCompressedElements",value:function(e,t,n,i){var r,o;null===(r=(o=this.renderer).disposeCompressedElements)||void 0===r||r.call(o,this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}},{key:"disposeTemplate",value:function(e){this.renderer.disposeTemplate(e.templateData)}},{key:"dispose",value:function(){this.renderedNodes.clear(),this.disposables=Iu(this.disposables)}}]),e}();var aq=function(e){function t(e,n,i,r,o,a){var s,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};return u(this,t),(s=l(this,t,[e,n,i,o,a,c])).compressionDelegate=r,s.compressibleNodeMapper=new eK((function(e){return new rq(e)})),s.filter=c.filter,s}return p(t,e),h(t,[{key:"createTree",value:function(e,t,n,i,r){var o=this,a=new uK(n),s=i.map((function(e){return new oq(e,o.nodeMapper,(function(){return o.compressibleNodeMapper}),o._onDidChangeNodeSlowState.event)})),l=function(e){var t=e&&tq(e);return t&&b(_({},t),{keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&b(_({},t.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel:function(t){return e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map((function(e){return e.element})))}})})}(r)||{};return new KK(e,t,a,s,l)}},{key:"asTreeElement",value:function(e,n){return _({incompressible:this.compressionDelegate.isIncompressible(e.element)},g(v(t.prototype),"asTreeElement",this).call(this,e,n))}},{key:"updateOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tree.updateOptions(e)}},{key:"render",value:function(e,n,i){var r=this;if(!this.identityProvider)return g(v(t.prototype),"render",this).call(this,e,n);var o=function(e){return r.identityProvider.getId(e).toString()},a=function(e){var t=new Set,n=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value,c=r.tree.getCompressedTreeNode(u===r.root?null:u);if(c.element){var d=!0,h=!1,f=void 0;try{for(var g,v=c.element.elements[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;t.add(o(p.element))}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}}}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return t},s=a(this.tree.getSelection()),l=a(this.tree.getFocus());g(v(t.prototype),"render",this).call(this,e,n,i);var u=this.getSelection(),c=!1,d=this.getFocus(),h=!1,f=function(e){var t=e.element;if(t)for(var n=0;n<t.elements.length;n++){var i=o(t.elements[n].element),r=t.elements[t.elements.length-1].element;s.has(i)&&-1===u.indexOf(r)&&(u.push(r),c=!0),l.has(i)&&-1===d.indexOf(r)&&(d.push(r),h=!0)}e.children.forEach(f)};f(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(u),h&&this.setFocus(d)}},{key:"processChildren",value:function(e){var n=this;return this.filter&&(e=Ts.filter(e,(function(e){var t=function(e){return"boolean"==typeof e?e?1:0:tK(e)?nK(e.visibility):nK(e)}(n.filter.filter(e,1));if(2===t)throw new Error("Recursive tree visibility not supported in async data compressed trees");return 1===t}))),g(v(t.prototype),"processChildren",this).call(this,e)}}]),t}(iq);var sq=function(e){function t(e,n,i,r,o){var a,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return u(this,t),(a=l(this,t,[e,n,i,r,s])).user=e,a.dataSource=o,a.identityProvider=s.identityProvider,a}return p(t,e),h(t,[{key:"createModel",value:function(e,t,n){return new EK(e,t,n)}}]),t}(IK);new jy("isMac",ms,Xa("isMac","Whether the operating system is macOS")),new jy("isLinux",ys,Xa("isLinux","Whether the operating system is Linux"));var lq=new jy("isWindows",ps,Xa("isWindows","Whether the operating system is Windows")),uq=new jy("isWeb",bs,Xa("isWeb","Whether the platform is a web browser"));new jy("isMacNative",ms&&!bs,Xa("isMacNative","Whether the operating system is macOS on a non-browser platform")),new jy("isIOS",ws,Xa("isIOS","Whether the operating system is iOS")),new jy("isMobile",Cs,Xa("isMobile","Whether the platform is a mobile web browser")),new jy("isDevelopment",!1,!0),new jy("productQualityType","",Xa("productQualityType","Quality type of VS Code"));var cq="inputFocus",dq=new jy(cq,!1,Xa("inputFocus","Whether keyboard focus is inside an input box")),hq=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},fq=function(e,t){return function(n,i){t(n,i,e)}},gq=Zm("listService"),vq=function(){function e(){u(this,e),this.disposables=new Tu,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}return h(e,[{key:"lastFocusedList",get:function(){return this._lastFocusedWidget}},{key:"setLastFocusedList",value:function(e){var t,n;e!==this._lastFocusedWidget&&(null===(t=this._lastFocusedWidget)||void 0===t||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,null===(n=this._lastFocusedWidget)||void 0===n||n.getHTMLElement().classList.add("last-focused"))}},{key:"register",value:function(e,t){var n=this;this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new dF(jp(),"").style(YF));if(this.lists.some((function(t){return t.widget===e})))throw new Error("Cannot register the same widget multiple times");var i={widget:e,extraContextKeys:t};return this.lists.push(i),Fp(e.getHTMLElement())&&this.setLastFocusedList(e),Eu(e.onDidFocus((function(){return n.setLastFocusedList(e)})),Mu((function(){return n.lists.splice(n.lists.indexOf(i),1)})),e.onDidDispose((function(){n.lists=n.lists.filter((function(e){return e!==i})),n._lastFocusedWidget===e&&n.setLastFocusedList(void 0)})))}},{key:"dispose",value:function(){this.disposables.dispose()}}]),e}(),pq=new jy("listScrollAtBoundary","none");Sy.or(pq.isEqualTo("top"),pq.isEqualTo("both")),Sy.or(pq.isEqualTo("bottom"),pq.isEqualTo("both"));var mq=new jy("listFocus",!0),yq=new jy("treestickyScrollFocused",!1),_q=new jy("listSupportsMultiselect",!0),bq=Sy.and(mq,Sy.not(cq),yq.negate()),kq=new jy("listHasSelectionOrFocus",!1),wq=new jy("listDoubleSelection",!1),Cq=new jy("listMultiSelection",!1),Sq=new jy("listSelectionNavigation",!1),xq=new jy("listSupportsFind",!0),Lq=new jy("treeElementCanCollapse",!1),Dq=new jy("treeElementHasParent",!1),Nq=new jy("treeElementCanExpand",!1),Iq=new jy("treeElementHasChild",!1),Eq=new jy("treeFindOpen",!1),Mq="listTypeNavigationMode",Tq="listAutomaticKeyboardNavigation";function Rq(e,t){var n=e.createScoped(t.getHTMLElement());return mq.bindTo(n),n}function Aq(e,t){var n=pq.bindTo(e),i=function(){var e=0===t.scrollTop,i=t.scrollHeight-t.renderHeight-t.scrollTop<1;e&&i?n.set("both"):e?n.set("top"):i?n.set("bottom"):n.set("none")};return i(),t.onDidScroll(i)}var Pq="workbench.list.multiSelectModifier",Oq="workbench.list.openMode",Fq="workbench.list.horizontalScrolling",Wq="workbench.list.defaultFindMode",Bq="workbench.list.typeNavigationMode",Hq="workbench.list.keyboardNavigation",Vq="workbench.list.scrollByPage",zq="workbench.list.defaultFindMatchType",Uq="workbench.tree.indent",jq="workbench.tree.renderIndentGuides",Kq="workbench.list.smoothScrolling",qq="workbench.list.mouseWheelScrollSensitivity",Gq="workbench.list.fastScrollSensitivity",Zq="workbench.tree.expandMode",Yq="workbench.tree.enableStickyScroll",Qq="workbench.tree.stickyScrollMaxItemCount";function Xq(e){return"alt"===e.getValue(Pq)}var $q=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).configurationService=e,n.useAltAsMultipleSelectionModifier=Xq(e),n.registerListeners(),n}return p(t,e),h(t,[{key:"registerListeners",value:function(){var e=this;this._register(this.configurationService.onDidChangeConfiguration((function(t){t.affectsConfiguration(Pq)&&(e.useAltAsMultipleSelectionModifier=Xq(e.configurationService))})))}},{key:"isSelectionSingleChangeEvent",value:function(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:sF(e)}},{key:"isSelectionRangeChangeEvent",value:function(e){return lF(e)}}]),t}(Ru);function Jq(e,t){var n,i=e.get(qb),r=e.get(ZI),o=new Tu,a=b(_({},t),{keyboardNavigationDelegate:{mightProducePrintableCharacter:function(e){return r.mightProducePrintableCharacter(e)}},smoothScrolling:Boolean(i.getValue(Kq)),mouseWheelScrollSensitivity:i.getValue(qq),fastScrollSensitivity:i.getValue(Gq),multipleSelectionController:null!==(n=t.multipleSelectionController)&&void 0!==n?n:o.add(new $q(i)),keyboardNavigationEventFilter:sG(r),scrollByPage:Boolean(i.getValue(Vq))});return[a,o]}var eG=function(e){function t(e,n,i,r,o,a,s,c,d){var h;u(this,t);var f=void 0!==o.horizontalScrolling?o.horizontalScrolling:Boolean(c.getValue(Fq)),g=C(d.invokeFunction(Jq,o),2),v=g[0],p=g[1];return(h=l(this,t,[e,n,i,r,b(_({keyboardSupport:!1},v),{horizontalScrolling:f})])).disposables.add(p),h.contextKeyService=Rq(a,h),h.disposables.add(Aq(h.contextKeyService,h)),h.listSupportsMultiSelect=_q.bindTo(h.contextKeyService),h.listSupportsMultiSelect.set(!1!==o.multipleSelectionSupport),Sq.bindTo(h.contextKeyService).set(Boolean(o.selectionNavigation)),h.listHasSelectionOrFocus=kq.bindTo(h.contextKeyService),h.listDoubleSelection=wq.bindTo(h.contextKeyService),h.listMultiSelection=Cq.bindTo(h.contextKeyService),h.horizontalScrolling=o.horizontalScrolling,h._useAltAsMultipleSelectionModifier=Xq(c),h.disposables.add(h.contextKeyService),h.disposables.add(s.register(h)),h.updateStyles(o.overrideStyles),h.disposables.add(h.onDidChangeSelection((function(){var e=h.getSelection(),t=h.getFocus();h.contextKeyService.bufferChangeEvents((function(){h.listHasSelectionOrFocus.set(e.length>0||t.length>0),h.listMultiSelection.set(e.length>1),h.listDoubleSelection.set(2===e.length)}))}))),h.disposables.add(h.onDidChangeFocus((function(){var e=h.getSelection(),t=h.getFocus();h.listHasSelectionOrFocus.set(e.length>0||t.length>0)}))),h.disposables.add(c.onDidChangeConfiguration((function(e){e.affectsConfiguration(Pq)&&(h._useAltAsMultipleSelectionModifier=Xq(c));var t={};if(e.affectsConfiguration(Fq)&&void 0===h.horizontalScrolling){var n=Boolean(c.getValue(Fq));t=b(_({},t),{horizontalScrolling:n})}if(e.affectsConfiguration(Vq)){var i=Boolean(c.getValue(Vq));t=b(_({},t),{scrollByPage:i})}if(e.affectsConfiguration(Kq)){var r=Boolean(c.getValue(Kq));t=b(_({},t),{smoothScrolling:r})}if(e.affectsConfiguration(qq)){var o=c.getValue(qq);t=b(_({},t),{mouseWheelScrollSensitivity:o})}if(e.affectsConfiguration(Gq)){var a=c.getValue(Gq);t=b(_({},t),{fastScrollSensitivity:a})}Object.keys(t).length>0&&h.updateOptions(t)}))),h.navigator=new rG(h,_({configurationService:c},o)),h.disposables.add(h.navigator),h}return p(t,e),h(t,[{key:"updateOptions",value:function(e){g(v(t.prototype),"updateOptions",this).call(this,e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}},{key:"updateStyles",value:function(e){this.style(e?QF(e):YF)}}]),t}(_F);eG=hq([fq(5,Ky),fq(6,gq),fq(7,qb),fq(8,Gm)],eG);var tG=function(e){function t(e,n,i,r,o,a,s,c,d){var h;u(this,t);var f=void 0!==o.horizontalScrolling?o.horizontalScrolling:Boolean(c.getValue(Fq)),g=C(d.invokeFunction(Jq,o),2),v=g[0],p=g[1];return(h=l(this,t,[e,n,i,r,b(_({keyboardSupport:!1},v),{horizontalScrolling:f})])).disposables=new Tu,h.disposables.add(p),h.contextKeyService=Rq(a,h),h.disposables.add(Aq(h.contextKeyService,h.widget)),h.horizontalScrolling=o.horizontalScrolling,h.listSupportsMultiSelect=_q.bindTo(h.contextKeyService),h.listSupportsMultiSelect.set(!1!==o.multipleSelectionSupport),Sq.bindTo(h.contextKeyService).set(Boolean(o.selectionNavigation)),h._useAltAsMultipleSelectionModifier=Xq(c),h.disposables.add(h.contextKeyService),h.disposables.add(s.register(h)),h.updateStyles(o.overrideStyles),h.disposables.add(c.onDidChangeConfiguration((function(e){e.affectsConfiguration(Pq)&&(h._useAltAsMultipleSelectionModifier=Xq(c));var t={};if(e.affectsConfiguration(Fq)&&void 0===h.horizontalScrolling){var n=Boolean(c.getValue(Fq));t=b(_({},t),{horizontalScrolling:n})}if(e.affectsConfiguration(Vq)){var i=Boolean(c.getValue(Vq));t=b(_({},t),{scrollByPage:i})}if(e.affectsConfiguration(Kq)){var r=Boolean(c.getValue(Kq));t=b(_({},t),{smoothScrolling:r})}if(e.affectsConfiguration(qq)){var o=c.getValue(qq);t=b(_({},t),{mouseWheelScrollSensitivity:o})}if(e.affectsConfiguration(Gq)){var a=c.getValue(Gq);t=b(_({},t),{fastScrollSensitivity:a})}Object.keys(t).length>0&&h.updateOptions(t)}))),h.navigator=new rG(h,_({configurationService:c},o)),h.disposables.add(h.navigator),h}return p(t,e),h(t,[{key:"updateOptions",value:function(e){g(v(t.prototype),"updateOptions",this).call(this,e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}},{key:"updateStyles",value:function(e){this.style(e?QF(e):YF)}},{key:"dispose",value:function(){this.disposables.dispose(),g(v(t.prototype),"dispose",this).call(this)}}]),t}(Mj);tG=hq([fq(5,Ky),fq(6,gq),fq(7,qb),fq(8,Gm)],tG);var nG=function(e){function t(e,n,i,r,o,a,s,c,d,h){var f;u(this,t);var g=void 0!==a.horizontalScrolling?a.horizontalScrolling:Boolean(d.getValue(Fq)),v=C(h.invokeFunction(Jq,a),2),p=v[0],m=v[1];return(f=l(this,t,[e,n,i,r,o,b(_({keyboardSupport:!1},p),{horizontalScrolling:g})])).disposables.add(m),f.contextKeyService=Rq(s,f),f.disposables.add(Aq(f.contextKeyService,f)),f.listSupportsMultiSelect=_q.bindTo(f.contextKeyService),f.listSupportsMultiSelect.set(!1!==a.multipleSelectionSupport),Sq.bindTo(f.contextKeyService).set(Boolean(a.selectionNavigation)),f.listHasSelectionOrFocus=kq.bindTo(f.contextKeyService),f.listDoubleSelection=wq.bindTo(f.contextKeyService),f.listMultiSelection=Cq.bindTo(f.contextKeyService),f.horizontalScrolling=a.horizontalScrolling,f._useAltAsMultipleSelectionModifier=Xq(d),f.disposables.add(f.contextKeyService),f.disposables.add(c.register(f)),f.updateStyles(a.overrideStyles),f.disposables.add(f.onDidChangeSelection((function(){var e=f.getSelection(),t=f.getFocus();f.contextKeyService.bufferChangeEvents((function(){f.listHasSelectionOrFocus.set(e.length>0||t.length>0),f.listMultiSelection.set(e.length>1),f.listDoubleSelection.set(2===e.length)}))}))),f.disposables.add(f.onDidChangeFocus((function(){var e=f.getSelection(),t=f.getFocus();f.listHasSelectionOrFocus.set(e.length>0||t.length>0)}))),f.disposables.add(d.onDidChangeConfiguration((function(e){e.affectsConfiguration(Pq)&&(f._useAltAsMultipleSelectionModifier=Xq(d));var t={};if(e.affectsConfiguration(Fq)&&void 0===f.horizontalScrolling){var n=Boolean(d.getValue(Fq));t=b(_({},t),{horizontalScrolling:n})}if(e.affectsConfiguration(Vq)){var i=Boolean(d.getValue(Vq));t=b(_({},t),{scrollByPage:i})}if(e.affectsConfiguration(Kq)){var r=Boolean(d.getValue(Kq));t=b(_({},t),{smoothScrolling:r})}if(e.affectsConfiguration(qq)){var o=d.getValue(qq);t=b(_({},t),{mouseWheelScrollSensitivity:o})}if(e.affectsConfiguration(Gq)){var a=d.getValue(Gq);t=b(_({},t),{fastScrollSensitivity:a})}Object.keys(t).length>0&&f.updateOptions(t)}))),f.navigator=new oG(f,_({configurationService:d},a)),f.disposables.add(f.navigator),f}return p(t,e),h(t,[{key:"updateOptions",value:function(e){g(v(t.prototype),"updateOptions",this).call(this,e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}},{key:"updateStyles",value:function(e){this.style(e?QF(e):YF)}},{key:"dispose",value:function(){this.disposables.dispose(),g(v(t.prototype),"dispose",this).call(this)}}]),t}(Xj);nG=hq([fq(6,Ky),fq(7,gq),fq(8,qb),fq(9,Gm)],nG);var iG=function(e){function t(e,n){var i,r;(u(this,t),(i=l(this,t)).widget=e,i._onDidOpen=i._register(new Zu),i.onDidOpen=i._onDidOpen.event,i._register(Au.filter(i.widget.onDidChangeSelection,(function(e){return im(e.browserEvent)}))((function(e){return i.onSelectionFromKeyboard(e)}))),i._register(i.widget.onPointer((function(e){return i.onPointer(e.element,e.browserEvent)}))),i._register(i.widget.onMouseDblClick((function(e){return i.onMouseDblClick(e.element,e.browserEvent)}))),"boolean"!=typeof(null==n?void 0:n.openOnSingleClick)&&(null==n?void 0:n.configurationService))?(i.openOnSingleClick="doubleClick"!==(null==n?void 0:n.configurationService.getValue(Oq)),i._register(null==n?void 0:n.configurationService.onDidChangeConfiguration((function(e){e.affectsConfiguration(Oq)&&(i.openOnSingleClick="doubleClick"!==(null==n?void 0:n.configurationService.getValue(Oq)))})))):i.openOnSingleClick=null===(r=null==n?void 0:n.openOnSingleClick)||void 0===r||r;return i}return p(t,e),h(t,[{key:"onSelectionFromKeyboard",value:function(e){if(1===e.elements.length){var t=e.browserEvent,n="boolean"!=typeof t.preserveFocus||t.preserveFocus,i="boolean"==typeof t.pinned?t.pinned:!n;this._open(this.getSelectedElement(),n,i,!1,e.browserEvent)}}},{key:"onPointer",value:function(e,t){if(this.openOnSingleClick&&!(2===t.detail)){var n=1===t.button,i=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!0,n,i,t)}}},{key:"onMouseDblClick",value:function(e,t){if(t){var n=t.target;if(!(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)){var i=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!1,!0,i,t)}}}},{key:"_open",value:function(e,t,n,i,r){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:i,element:e,browserEvent:r})}}]),t}(Ru),rG=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[e,n])).widget=e,i}return p(t,e),h(t,[{key:"getSelectedElement",value:function(){return this.widget.getSelectedElements()[0]}}]),t}(iG),oG=function(e){function t(e,n){return u(this,t),l(this,t,[e,n])}return p(t,e),h(t,[{key:"getSelectedElement",value:function(){return this.widget.getSelectedElements()[0]}}]),t}(iG),aG=function(e){function t(e,n){return u(this,t),l(this,t,[e,n])}return p(t,e),h(t,[{key:"getSelectedElement",value:function(){var e;return null!==(e=this.widget.getSelection()[0])&&void 0!==e?e:void 0}}]),t}(iG);function sG(e){var t=!1;return function(n){if(n.toKeyCodeChord().isModifierKey())return!1;if(t)return t=!1,!1;var i=e.softDispatch(n,n.target);return 1===i.kind?(t=!0,!1):(t=!1,0===i.kind)}}var lG=function(e){function t(e,n,i,r,o,a,s,c,d){var h;u(this,t);var f=a.invokeFunction(vG,o),g=f.options,v=f.getTypeNavigationMode,p=f.disposable;return(h=l(this,t,[e,n,i,r,g])).disposables.add(p),h.internals=new mG(h,o,v,o.overrideStyles,s,c,d),h.disposables.add(h.internals),h}return p(t,e),h(t,[{key:"updateOptions",value:function(e){g(v(t.prototype),"updateOptions",this).call(this,e),this.internals.updateOptions(e)}}]),t}(VK);lG=hq([fq(5,Gm),fq(6,Ky),fq(7,gq),fq(8,qb)],lG);var uG=function(e){function t(e,n,i,r,o,a,s,c,d){var h;u(this,t);var f=a.invokeFunction(vG,o),g=f.options,v=f.getTypeNavigationMode,p=f.disposable;return(h=l(this,t,[e,n,i,r,g])).disposables.add(p),h.internals=new mG(h,o,v,o.overrideStyles,s,c,d),h.disposables.add(h.internals),h}return p(t,e),h(t,[{key:"updateOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g(v(t.prototype),"updateOptions",this).call(this,e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}}]),t}(KK);uG=hq([fq(5,Gm),fq(6,Ky),fq(7,gq),fq(8,qb)],uG);var cG=function(e){function t(e,n,i,r,o,a,s,c,d,h){var f;u(this,t);var g=s.invokeFunction(vG,a),v=g.options,p=g.getTypeNavigationMode,m=g.disposable;return(f=l(this,t,[e,n,i,r,o,v])).disposables.add(m),f.internals=new mG(f,a,p,a.overrideStyles,c,d,h),f.disposables.add(f.internals),f}return p(t,e),h(t,[{key:"updateOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g(v(t.prototype),"updateOptions",this).call(this,e),void 0!==e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}}]),t}(sq);cG=hq([fq(6,Gm),fq(7,Ky),fq(8,gq),fq(9,qb)],cG);var dG=function(e){function t(e,n,i,r,o,a,s,c,d,h){var f;u(this,t);var g=s.invokeFunction(vG,a),v=g.options,p=g.getTypeNavigationMode,m=g.disposable;return(f=l(this,t,[e,n,i,r,o,v])).disposables.add(m),f.internals=new mG(f,a,p,a.overrideStyles,c,d,h),f.disposables.add(f.internals),f}return p(t,e),h(t,[{key:"onDidOpen",get:function(){return this.internals.onDidOpen}},{key:"updateOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g(v(t.prototype),"updateOptions",this).call(this,e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}}]),t}(iq);dG=hq([fq(6,Gm),fq(7,Ky),fq(8,gq),fq(9,qb)],dG);var hG=function(e){function t(e,n,i,r,o,a,s,c,d,h,f){var g;u(this,t);var v=c.invokeFunction(vG,s),p=v.options,m=v.getTypeNavigationMode,y=v.disposable;return(g=l(this,t,[e,n,i,r,o,a,p])).disposables.add(y),g.internals=new mG(g,s,m,s.overrideStyles,d,h,f),g.disposables.add(g.internals),g}return p(t,e),h(t,[{key:"updateOptions",value:function(e){g(v(t.prototype),"updateOptions",this).call(this,e),this.internals.updateOptions(e)}}]),t}(aq);function fG(e){var t=e.getValue(Wq);if("highlight"===t)return hK.Highlight;if("filter"===t)return hK.Filter;var n=e.getValue(Hq);return"simple"===n||"highlight"===n?hK.Highlight:"filter"===n?hK.Filter:void 0}function gG(e){var t=e.getValue(zq);return"fuzzy"===t?fK.Fuzzy:"contiguous"===t?fK.Contiguous:void 0}function vG(e,t){var n,i=e.get(qb),r=e.get(qI),o=e.get(Ky),a=e.get(Gm),s=void 0!==t.horizontalScrolling?t.horizontalScrolling:Boolean(i.getValue(Fq)),l=C(a.invokeFunction(Jq,t),2),u=l[0],c=l[1],d=t.paddingBottom,h=void 0!==t.renderIndentGuides?t.renderIndentGuides:i.getValue(jq);return{getTypeNavigationMode:function(){var e=o.getContextKeyValue(Mq);if("automatic"===e)return tF.Automatic;if("trigger"===e)return tF.Trigger;if(!1===o.getContextKeyValue(Tq))return tF.Trigger;var t=i.getValue(Bq);return"automatic"===t?tF.Automatic:"trigger"===t?tF.Trigger:void 0},disposable:c,options:b(_({keyboardSupport:!1},u),{indent:"number"==typeof i.getValue(Uq)?i.getValue(Uq):void 0,renderIndentGuides:h,smoothScrolling:Boolean(i.getValue(Kq)),defaultFindMode:fG(i),defaultFindMatchType:gG(i),horizontalScrolling:s,scrollByPage:Boolean(i.getValue(Vq)),paddingBottom:d,hideTwistiesOfChildlessElements:t.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:null!==(n=t.expandOnlyOnTwistieClick)&&void 0!==n?n:"doubleClick"===i.getValue(Zq),contextViewProvider:r,findWidgetStyles:GF,enableStickyScroll:Boolean(i.getValue(Yq)),stickyScrollMaxItemCount:Number(i.getValue(Qq))})}}hG=hq([fq(7,Gm),fq(8,Ky),fq(9,gq),fq(10,qb)],hG);var pG,mG=function(){function e(t,n,i,r,o,a,s){var l,c=this;u(this,e),this.tree=t,this.disposables=[],this.contextKeyService=Rq(o,t),this.disposables.push(Aq(this.contextKeyService,t)),this.listSupportsMultiSelect=_q.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==n.multipleSelectionSupport),Sq.bindTo(this.contextKeyService).set(Boolean(n.selectionNavigation)),this.listSupportFindWidget=xq.bindTo(this.contextKeyService),this.listSupportFindWidget.set(null===(l=n.findWidgetEnabled)||void 0===l||l),this.hasSelectionOrFocus=kq.bindTo(this.contextKeyService),this.hasDoubleSelection=wq.bindTo(this.contextKeyService),this.hasMultiSelection=Cq.bindTo(this.contextKeyService),this.treeElementCanCollapse=Lq.bindTo(this.contextKeyService),this.treeElementHasParent=Dq.bindTo(this.contextKeyService),this.treeElementCanExpand=Nq.bindTo(this.contextKeyService),this.treeElementHasChild=Iq.bindTo(this.contextKeyService),this.treeFindOpen=Eq.bindTo(this.contextKeyService),this.treeStickyScrollFocused=yq.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Xq(s),this.updateStyleOverrides(r);var d=function(){var e=t.getFocus()[0];if(e){var n=t.getNode(e);c.treeElementCanCollapse.set(n.collapsible&&!n.collapsed),c.treeElementHasParent.set(!!t.getParentElement(e)),c.treeElementCanExpand.set(n.collapsible&&n.collapsed),c.treeElementHasChild.set(!!t.getFirstElementChild(e))}},h=new Set;h.add(Mq),h.add(Tq),this.disposables.push(this.contextKeyService,a.register(t),t.onDidChangeSelection((function(){var e=t.getSelection(),n=t.getFocus();c.contextKeyService.bufferChangeEvents((function(){c.hasSelectionOrFocus.set(e.length>0||n.length>0),c.hasMultiSelection.set(e.length>1),c.hasDoubleSelection.set(2===e.length)}))})),t.onDidChangeFocus((function(){var e=t.getSelection(),n=t.getFocus();c.hasSelectionOrFocus.set(e.length>0||n.length>0),d()})),t.onDidChangeCollapseState(d),t.onDidChangeModel(d),t.onDidChangeFindOpenState((function(e){return c.treeFindOpen.set(e)})),t.onDidChangeStickyScrollFocused((function(e){return c.treeStickyScrollFocused.set(e)})),s.onDidChangeConfiguration((function(e){var r={};if(e.affectsConfiguration(Pq)&&(c._useAltAsMultipleSelectionModifier=Xq(s)),e.affectsConfiguration(Uq)){var o=s.getValue(Uq);r=b(_({},r),{indent:o})}if(e.affectsConfiguration(jq)&&void 0===n.renderIndentGuides){var a=s.getValue(jq);r=b(_({},r),{renderIndentGuides:a})}if(e.affectsConfiguration(Kq)){var l=Boolean(s.getValue(Kq));r=b(_({},r),{smoothScrolling:l})}if(e.affectsConfiguration(Wq)||e.affectsConfiguration(Hq)){var u=fG(s);r=b(_({},r),{defaultFindMode:u})}if(e.affectsConfiguration(Bq)||e.affectsConfiguration(Hq)){var d=i();r=b(_({},r),{typeNavigationMode:d})}if(e.affectsConfiguration(zq)){var h=gG(s);r=b(_({},r),{defaultFindMatchType:h})}if(e.affectsConfiguration(Fq)&&void 0===n.horizontalScrolling){var f=Boolean(s.getValue(Fq));r=b(_({},r),{horizontalScrolling:f})}if(e.affectsConfiguration(Vq)){var g=Boolean(s.getValue(Vq));r=b(_({},r),{scrollByPage:g})}if(e.affectsConfiguration(Zq)&&void 0===n.expandOnlyOnTwistieClick&&(r=b(_({},r),{expandOnlyOnTwistieClick:"doubleClick"===s.getValue(Zq)})),e.affectsConfiguration(Yq)){var v=s.getValue(Yq);r=b(_({},r),{enableStickyScroll:v})}if(e.affectsConfiguration(Qq)){var p=Math.max(1,s.getValue(Qq));r=b(_({},r),{stickyScrollMaxItemCount:p})}if(e.affectsConfiguration(qq)){var m=s.getValue(qq);r=b(_({},r),{mouseWheelScrollSensitivity:m})}if(e.affectsConfiguration(Gq)){var y=s.getValue(Gq);r=b(_({},r),{fastScrollSensitivity:y})}Object.keys(r).length>0&&t.updateOptions(r)})),this.contextKeyService.onDidChangeContext((function(e){e.affectsSome(h)&&t.updateOptions({typeNavigationMode:i()})}))),this.navigator=new aG(t,_({configurationService:s},n)),this.disposables.push(this.navigator)}return h(e,[{key:"onDidOpen",get:function(){return this.navigator.onDidOpen}},{key:"updateOptions",value:function(e){void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}},{key:"updateStyleOverrides",value:function(e){this.tree.style(e?QF(e):YF)}},{key:"dispose",value:function(){this.disposables=Iu(this.disposables)}}]),e}();mG=hq([fq(4,Ky),fq(5,gq),fq(6,qb)],mG),i_.as(lk).registerConfiguration({id:"workbench",order:7,title:Xa("workbenchConfigurationTitle","Workbench"),type:"object",properties:(pG={},f(pG,Pq,{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[Xa("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),Xa("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:Xa({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")}),f(pG,Oq,{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:Xa({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")}),f(pG,Fq,{type:"boolean",default:!1,description:Xa("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")}),f(pG,Vq,{type:"boolean",default:!1,description:Xa("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")}),f(pG,Uq,{type:"number",default:8,minimum:4,maximum:40,description:Xa("tree indent setting","Controls tree indentation in pixels.")}),f(pG,jq,{type:"string",enum:["none","onHover","always"],default:"onHover",description:Xa("render tree indent guides","Controls whether the tree should render indent guides.")}),f(pG,Kq,{type:"boolean",default:!1,description:Xa("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")}),f(pG,qq,{type:"number",default:1,markdownDescription:Xa("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")}),f(pG,Gq,{type:"number",default:5,markdownDescription:Xa("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")}),f(pG,Wq,{type:"string",enum:["highlight","filter"],enumDescriptions:[Xa("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),Xa("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:Xa("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")}),f(pG,Hq,{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[Xa("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),Xa("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),Xa("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:Xa("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:Xa("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and\t'workbench.list.typeNavigationMode' instead.")}),f(pG,zq,{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[Xa("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),Xa("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:Xa("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")}),f(pG,Zq,{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:Xa("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}),f(pG,Yq,{type:"boolean",default:!0,description:Xa("sticky scroll","Controls whether sticky scrolling is enabled in trees.")}),f(pG,Qq,{type:"number",minimum:1,default:7,markdownDescription:Xa("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")}),f(pG,Bq,{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:Xa("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}),pG)});var yG=function(e){function t(e,n){var i,r;return u(this,t),(i=l(this,t)).options=n,i.text="",i.title="",i.highlights=[],i.didEverRender=!1,i.supportIcons=null!==(r=null==n?void 0:n.supportIcons)&&void 0!==r&&r,i.domNode=lm(e,gm("span.monaco-highlighted-label")),i}return p(t,e),h(t,[{key:"element",get:function(){return this.domNode}},{key:"set",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e||(e=""),(arguments.length>3?arguments[3]:void 0)&&(e=t.escapeNewLines(e,n)),this.didEverRender&&this.text===e&&this.title===i&&Ka(this.highlights,n)||(this.text=e,this.title=i,this.highlights=n,this.render())}},{key:"render",value:function(){var e,t,n=[],i=0,r=!0,o=!1,a=void 0;try{for(var s,l=this.highlights[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;if(u.end!==u.start){if(i<u.start){var c,d=this.text.substring(i,u.start);if(this.supportIcons)(c=n).push.apply(c,x(AE(d)));else n.push(d);i=u.start}var h,f=this.text.substring(i,u.end),g=gm.apply(void 0,["span.highlight",void 0].concat(x(this.supportIcons?AE(f):[f])));if(u.extraClasses)(h=g.classList).add.apply(h,x(u.extraClasses));n.push(g),i=u.end}}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}if(i<this.text.length){var v,p=this.text.substring(i);if(this.supportIcons)(v=n).push.apply(v,x(AE(p)));else n.push(p)}if(cm.apply(void 0,[this.domNode].concat(x(n))),null===(t=this.options)||void 0===t||null===(e=t.hoverDelegate)||void 0===e?void 0:e.showNativeHover)this.domNode.title=this.title;else if(this.customHover||""===this.title)this.customHover&&this.customHover.update(this.title);else{var m,y,_=null!==(y=null===(m=this.options)||void 0===m?void 0:m.hoverDelegate)&&void 0!==y?y:xO("mouse");this.customHover=this._register(NO().setupManagedHover(_,this.domNode,this.title))}this.didEverRender=!0}}],[{key:"escapeNewLines",value:function(e,t){var n=0,i=0;return e.replace(/\r\n|\r|\n/g,(function(e,r){i="\r\n"===e?-1:0,r+=n;var o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;c.end<=r||(c.start>=r&&(c.start+=i),c.end>=r&&(c.end+=i))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return n+=i,"⏎"}))}}]),t}(Ru),_G=function(){function e(t){u(this,e),this._element=t}return h(e,[{key:"element",get:function(){return this._element}},{key:"textContent",set:function(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}},{key:"classNames",set:function(e){var t;this.disposed||Ka(e,this._classNames)||(this._classNames=e,this._element.classList.value="",(t=this._element.classList).add.apply(t,x(e)))}},{key:"empty",set:function(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}},{key:"dispose",value:function(){this.disposed=!0}}]),e}(),bG=function(e){function t(e,n){var i,r;return u(this,t),(i=l(this,t)).customHovers=new Map,i.creationOptions=n,i.domNode=i._register(new _G(lm(e,gm(".monaco-icon-label")))),i.labelContainer=lm(i.domNode.element,gm(".monaco-icon-label-container")),i.nameContainer=lm(i.labelContainer,gm("span.monaco-icon-name-container")),(null==n?void 0:n.supportHighlights)||(null==n?void 0:n.supportIcons)?i.nameNode=i._register(new wG(i.nameContainer,!!n.supportIcons)):i.nameNode=new kG(i.nameContainer),i.hoverDelegate=null!==(r=null==n?void 0:n.hoverDelegate)&&void 0!==r?r:xO("mouse"),i}return p(t,e),h(t,[{key:"element",get:function(){return this.domNode.element}},{key:"setLabel",value:function(e,t,n){var i,r=["monaco-icon-label"],o=["monaco-icon-label-container"],a="";if(n){var s;if(n.extraClasses)(s=r).push.apply(s,x(n.extraClasses));n.italic&&r.push("italic"),n.strikethrough&&r.push("strikethrough"),n.disabledCommand&&o.push("disabled"),n.title&&("string"==typeof n.title?a+=n.title:a+=e)}var l,u,c=this.domNode.element.querySelector(".monaco-icon-label-iconpath");(null==n?void 0:n.iconPath)?(c&&Jp(c)?l=c:(l=gm(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)),l.style.backgroundImage=_m(null==n?void 0:n.iconPath)):c&&c.remove();if(this.domNode.classNames=r,this.domNode.element.setAttribute("aria-label",a),this.labelContainer.classList.value="",(i=this.labelContainer.classList).add.apply(i,x(o)),this.setupHover((null==n?void 0:n.descriptionTitle)?this.labelContainer:this.element,null==n?void 0:n.title),this.nameNode.setLabel(e,n),t||this.descriptionNode){var d=this.getOrCreateDescriptionNode();d instanceof yG?(d.set(t||"",n?n.descriptionMatches:void 0,void 0,null==n?void 0:n.labelEscapeNewLines),this.setupHover(d.element,null==n?void 0:n.descriptionTitle)):(d.textContent=t&&(null==n?void 0:n.labelEscapeNewLines)?yG.escapeNewLines(t,[]):t||"",this.setupHover(d.element,(null==n?void 0:n.descriptionTitle)||""),d.empty=!t)}((null==n?void 0:n.suffix)||this.suffixNode)&&(this.getOrCreateSuffixNode().textContent=null!==(u=null==n?void 0:n.suffix)&&void 0!==u?u:"")}},{key:"setupHover",value:function(e,t){var n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),t)if(this.hoverDelegate.showNativeHover){!function(e,t){Da(t)?e.title=HM(t):(null==t?void 0:t.markdownNotSupportedFallback)?e.title=t.markdownNotSupportedFallback:e.removeAttribute("title")}(e,t)}else{var i=NO().setupManagedHover(this.hoverDelegate,e,t);i&&this.customHovers.set(e,i)}else e.removeAttribute("title")}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this);var e=!0,n=!1,i=void 0;try{for(var r,o=this.customHovers.values()[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){r.value.dispose()}}catch(e){n=!0,i=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}this.customHovers.clear()}},{key:"getOrCreateSuffixNode",value:function(){if(!this.suffixNode){var e=this._register(new _G(function(e,t){return e.after(t),t}(this.nameContainer,gm("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new _G(lm(e.element,gm("span.label-suffix"))))}return this.suffixNode}},{key:"getOrCreateDescriptionNode",value:function(){if(!this.descriptionNode){var e,t=this._register(new _G(lm(this.labelContainer,gm("span.monaco-icon-description-container"))));(null===(e=this.creationOptions)||void 0===e?void 0:e.supportDescriptionHighlights)?this.descriptionNode=this._register(new yG(lm(t.element,gm("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new _G(lm(t.element,gm("span.label-description"))))}return this.descriptionNode}}]),t}(Ru),kG=function(){function e(t){u(this,e),this.container=t,this.label=void 0,this.singleLabel=void 0}return h(e,[{key:"setLabel",value:function(e,t){if(this.label!==e||!Ka(this.options,t))if(this.label=e,this.options=t,"string"==typeof e)this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=lm(this.container,gm("a.label-name",{id:null==t?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(var n=0;n<e.length;n++){var i=e[n],r=(null==t?void 0:t.domId)&&"".concat(null==t?void 0:t.domId,"_").concat(n);lm(this.container,gm("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},i)),n<e.length-1&&lm(this.container,gm("span.label-separator",void 0,(null==t?void 0:t.separator)||"/"))}}}}]),e}();var wG=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).container=e,i.supportIcons=n,i.label=void 0,i.singleLabel=void 0,i}return p(t,e),h(t,[{key:"setLabel",value:function(e,t){if(this.label!==e||!Ka(this.options,t))if(this.label=e,this.options=t,"string"==typeof e)this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new yG(lm(this.container,gm("a.label-name",{id:null==t?void 0:t.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,null==t?void 0:t.matches,void 0,null==t?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(var n=(null==t?void 0:t.separator)||"/",i=function(e,t,n){if(n){var i=0;return e.map((function(e){var r={start:i,end:i+e.length},o=n.map((function(e){return LR.intersect(r,e)})).filter((function(e){return!LR.isEmpty(e)})).map((function(e){var t=e.start,n=e.end;return{start:t-i,end:n-i}}));return i=r.end+t.length,o}))}}(e,n,null==t?void 0:t.matches),r=0;r<e.length;r++){var o=e[r],a=i?i[r]:void 0,s=gm("a.label-name",{id:(null==t?void 0:t.domId)&&"".concat(null==t?void 0:t.domId,"_").concat(r),"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});this._register(new yG(lm(this.container,s),{supportIcons:this.supportIcons})).set(o,a,void 0,null==t?void 0:t.labelEscapeNewLines),r<e.length-1&&lm(s,gm("span.label-separator",void 0,n))}}}}]),t}(Ru),CG=gm,SG={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0},xG=function(e){function t(e,n,i){var r;u(this,t),(r=l(this,t)).os=n,r.keyElements=new Set,r.options=i||Object.create(null);var o=r.options.keybindingLabelForeground;return r.domNode=lm(e,CG(".monaco-keybinding")),o&&(r.domNode.style.color=o),r.hover=r._register(NO().setupManagedHover(xO("mouse"),r.domNode,"")),r.didEverRender=!1,e.appendChild(r.domNode),r}return p(t,e),h(t,[{key:"element",get:function(){return this.domNode}},{key:"set",value:function(e,n){this.didEverRender&&this.keybinding===e&&t.areSame(this.matches,n)||(this.keybinding=e,this.matches=n,this.render())}},{key:"render",value:function(){if(this.clear(),this.keybinding){var e,t=this.keybinding.getChords();t[0]&&this.renderChord(this.domNode,t[0],this.matches?this.matches.firstPart:null);for(var n=1;n<t.length;n++)lm(this.domNode,CG("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,t[n],this.matches?this.matches.chordPart:null);var i=null!==(e=this.options.disableTitle)&&void 0!==e&&e?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(i),this.domNode.setAttribute("aria-label",i||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}},{key:"clear",value:function(){lp(this.domNode),this.keyElements.clear()}},{key:"renderChord",value:function(e,t,n){var i=NA.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,i.ctrlKey,Boolean(null==n?void 0:n.ctrlKey),i.separator),t.shiftKey&&this.renderKey(e,i.shiftKey,Boolean(null==n?void 0:n.shiftKey),i.separator),t.altKey&&this.renderKey(e,i.altKey,Boolean(null==n?void 0:n.altKey),i.separator),t.metaKey&&this.renderKey(e,i.metaKey,Boolean(null==n?void 0:n.metaKey),i.separator);var r=t.keyLabel;r&&this.renderKey(e,r,Boolean(null==n?void 0:n.keyCode),"")}},{key:"renderKey",value:function(e,t,n,i){lm(e,this.createKeyElement(t,n?".highlight":"")),i&&lm(e,CG("span.monaco-keybinding-key-separator",void 0,i))}},{key:"renderUnbound",value:function(e){lm(e,this.createKeyElement(Xa("unbound","Unbound")))}},{key:"createKeyElement",value:function(e){var t=CG("span.monaco-keybinding-key"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""),void 0,e);return this.keyElements.add(t),this.options.keybindingLabelBackground&&(t.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(t.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(t.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(t.style.boxShadow="inset 0 -1px 0 ".concat(this.options.keybindingLabelShadow)),t}}],[{key:"areSame",value:function(e,t){return e===t||!e&&!t||!!e&&!!t&&Ka(e.firstPart,t.firstPart)&&Ka(e.chordPart,t.chordPart)}}]),t}(Ru),LG=new Vh((function(){var e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}));function DG(e,t,n){var i=e.toLowerCase(),r=t.toLowerCase(),o=function(e,t,n){var i=e.toLowerCase(),r=t.toLowerCase(),o=i.startsWith(n),a=r.startsWith(n);if(o!==a)return o?-1:1;if(o&&a){if(i.length<r.length)return-1;if(i.length>r.length)return 1}return 0}(e,t,n);if(o)return o;var a=i.endsWith(n);if(a!==r.endsWith(n))return a?-1:1;var s=function(e,t){var n=e||"",i=t||"",r=LG.value.collator.compare(n,i);return LG.value.collatorIsNumeric&&0===r&&n!==i?n<i?-1:1:r}(i,r);return 0!==s?s:i.localeCompare(r)}var NG,IG,EG=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},MG=function(e,t){return function(n,i){t(n,i,e)}},TG=gm,RG=function(){function e(t,n,i){var r=this;u(this,e),this.index=t,this.hasCheckbox=n,this._hidden=!1,this._init=new Vh((function(){var e,t=null!==(e=i.label)&&void 0!==e?e:"",n=zM(t).text.trim(),o=i.ariaLabel||[t,r.saneDescription,r.saneDetail].map((function(e){return function(e){return e?e.replace(/\$\((.*?)\)/g,(function(e,t){return" ".concat(t," ")})).trim():""}(e)})).filter((function(e){return!!e})).join(", ");return{saneLabel:t,saneSortLabel:n,saneAriaLabel:o}})),this._saneDescription=i.description,this._saneTooltip=i.tooltip}return h(e,[{key:"saneLabel",get:function(){return this._init.value.saneLabel}},{key:"saneSortLabel",get:function(){return this._init.value.saneSortLabel}},{key:"saneAriaLabel",get:function(){return this._init.value.saneAriaLabel}},{key:"element",get:function(){return this._element},set:function(e){this._element=e}},{key:"hidden",get:function(){return this._hidden},set:function(e){this._hidden=e}},{key:"saneDescription",get:function(){return this._saneDescription},set:function(e){this._saneDescription=e}},{key:"saneDetail",get:function(){return this._saneDetail},set:function(e){this._saneDetail=e}},{key:"saneTooltip",get:function(){return this._saneTooltip},set:function(e){this._saneTooltip=e}},{key:"labelHighlights",get:function(){return this._labelHighlights},set:function(e){this._labelHighlights=e}},{key:"descriptionHighlights",get:function(){return this._descriptionHighlights},set:function(e){this._descriptionHighlights=e}},{key:"detailHighlights",get:function(){return this._detailHighlights},set:function(e){this._detailHighlights=e}}]),e}(),AG=function(e){function t(e,n,i,r,o,a){var s,c,d,h;return u(this,t),(s=l(this,t,[e,n,o])).fireButtonTriggered=i,s._onChecked=r,s.item=o,s._separator=a,s._checked=!1,s.onChecked=n?Au.map(Au.filter(s._onChecked.event,(function(e){return e.element===s})),(function(e){return e.checked})):Au.None,s._saneDetail=o.detail,s._labelHighlights=null===(c=o.highlights)||void 0===c?void 0:c.label,s._descriptionHighlights=null===(d=o.highlights)||void 0===d?void 0:d.description,s._detailHighlights=null===(h=o.highlights)||void 0===h?void 0:h.detail,s}return p(t,e),h(t,[{key:"separator",get:function(){return this._separator},set:function(e){this._separator=e}},{key:"checked",get:function(){return this._checked},set:function(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}},{key:"checkboxDisabled",get:function(){return!!this.item.disabled}}]),t}(RG);!function(e){e[e.NONE=0]="NONE",e[e.MOUSE_HOVER=1]="MOUSE_HOVER",e[e.ACTIVE_ITEM=2]="ACTIVE_ITEM"}(IG||(IG={}));var PG=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[e,!1,i])).fireSeparatorButtonTriggered=n,r.separator=i,r.children=new Array,r.focusInsideSeparator=IG.NONE,r}return p(t,e),t}(RG),OG=function(){function e(){u(this,e)}return h(e,[{key:"getHeight",value:function(e){return e instanceof PG?30:e.saneDetail?44:22}},{key:"getTemplateId",value:function(e){return e instanceof AG?BG.ID:HG.ID}}]),e}(),FG=function(){function e(){u(this,e)}return h(e,[{key:"getWidgetAriaLabel",value:function(){return Xa("quickInput","Quick Input")}},{key:"getAriaLabel",value:function(e){var t;return(null===(t=e.separator)||void 0===t?void 0:t.label)?"".concat(e.saneAriaLabel,", ").concat(e.separator.label):e.saneAriaLabel}},{key:"getWidgetRole",value:function(){return"listbox"}},{key:"getRole",value:function(e){return e.hasCheckbox?"checkbox":"option"}},{key:"isChecked",value:function(e){if(e.hasCheckbox&&e instanceof AG)return{get value(){return e.checked},onDidChange:function(t){return e.onChecked((function(){return t()}))}}}}]),e}(),WG=function(){function e(t){u(this,e),this.hoverDelegate=t}return h(e,[{key:"renderTemplate",value:function(e){var t=Object.create(null);t.toDisposeElement=new Tu,t.toDisposeTemplate=new Tu,t.entry=lm(e,TG(".quick-input-list-entry"));var n=lm(t.entry,TG("label.quick-input-list-label"));t.toDisposeTemplate.add(hp(n,rm.CLICK,(function(e){t.checkbox.offsetParent||e.preventDefault()}))),t.checkbox=lm(n,TG("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";var i=lm(n,TG(".quick-input-list-rows")),r=lm(i,TG(".quick-input-list-row")),o=lm(i,TG(".quick-input-list-row"));t.label=new bG(r,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=um(t.label.element,TG(".quick-input-list-icon"));var a=lm(r,TG(".quick-input-list-entry-keybinding"));t.keybinding=new xG(a,Ns),t.toDisposeTemplate.add(t.keybinding);var s=lm(o,TG(".quick-input-list-label-meta"));return t.detail=new bG(s,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=lm(t.entry,TG(".quick-input-list-separator")),t.actionBar=new dW(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}},{key:"disposeTemplate",value:function(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}},{key:"disposeElement",value:function(e,t,n){n.toDisposeElement.clear(),n.actionBar.clear()}}]),e}(),BG=(pt=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[e])).themeService=n,i._itemsWithSeparatorsFrequency=new Map,i}return p(t,e),h(t,[{key:"templateId",get:function(){return NG.ID}},{key:"renderTemplate",value:function(e){var n=g(v(t.prototype),"renderTemplate",this).call(this,e);return n.toDisposeTemplate.add(hp(n.checkbox,rm.CHANGE,(function(e){n.element.checked=n.checkbox.checked}))),n}},{key:"renderElement",value:function(e,t,n){var i,r,o=e.element;n.element=o,o.element=null!==(r=n.entry)&&void 0!==r?r:void 0;var a=o.item;n.checkbox.checked=o.checked,n.toDisposeElement.add(o.onChecked((function(e){return n.checkbox.checked=e}))),n.checkbox.disabled=o.checkboxDisabled;var s,l=o.labelHighlights,u=o.descriptionHighlights,c=o.detailHighlights;if(a.iconPath){var d,h=AS(this.themeService.getColorTheme().type)?a.iconPath.dark:null!==(d=a.iconPath.light)&&void 0!==d?d:a.iconPath.dark,f=ed.revive(h);n.icon.className="quick-input-list-icon",n.icon.style.backgroundImage=_m(f)}else n.icon.style.backgroundImage="",n.icon.className=a.iconClass?"quick-input-list-icon ".concat(a.iconClass):"";!o.saneTooltip&&o.saneDescription&&(s={markdown:{value:o.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:o.saneDescription});var g,v={matches:l||[],descriptionTitle:s,descriptionMatches:u||[],labelEscapeNewLines:!0};(v.extraClasses=a.iconClasses,v.italic=a.italic,v.strikethrough=a.strikethrough,n.entry.classList.remove("quick-input-list-separator-as-item"),n.label.setLabel(o.saneLabel,o.saneDescription,v),n.keybinding.set(a.keybinding),o.saneDetail)?(o.saneTooltip||(g={markdown:{value:o.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:o.saneDetail}),n.detail.element.style.display="",n.detail.setLabel(o.saneDetail,void 0,{matches:c,title:g,labelEscapeNewLines:!0})):n.detail.element.style.display="none";(null===(i=o.separator)||void 0===i?void 0:i.label)?(n.separator.textContent=o.separator.label,n.separator.style.display="",this.addItemWithSeparator(o)):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!o.separator);var p=a.buttons;p&&p.length?(n.actionBar.push(p.map((function(e,t){return zU(e,"id-".concat(t),(function(){return o.fireButtonTriggered({button:e,item:o.item})}))})),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}},{key:"disposeElement",value:function(e,n,i){this.removeItemWithSeparator(e.element),g(v(t.prototype),"disposeElement",this).call(this,e,n,i)}},{key:"isItemWithSeparatorVisible",value:function(e){return this._itemsWithSeparatorsFrequency.has(e)}},{key:"addItemWithSeparator",value:function(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}},{key:"removeItemWithSeparator",value:function(e){var t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}}]),t}(WG),NG=pt,pt.ID="quickpickitem",pt);BG=NG=EG([MG(1,PS)],BG);var HG=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments))._visibleSeparatorsFrequency=new Map,e}return p(t,e),h(t,[{key:"templateId",get:function(){return t.ID}},{key:"visibleSeparators",get:function(){return x(this._visibleSeparatorsFrequency.keys())}},{key:"isSeparatorVisible",value:function(e){return this._visibleSeparatorsFrequency.has(e)}},{key:"renderTemplate",value:function(e){var n=g(v(t.prototype),"renderTemplate",this).call(this,e);return n.checkbox.style.display="none",n}},{key:"renderElement",value:function(e,t,n){var i,r=e.element;n.element=r,r.element=null!==(i=n.entry)&&void 0!==i?i:void 0,r.element.classList.toggle("focus-inside",!!r.focusInsideSeparator);var o,a=r.separator,s=r.labelHighlights,l=r.descriptionHighlights,u=r.detailHighlights;n.icon.style.backgroundImage="",n.icon.className="",!r.saneTooltip&&r.saneDescription&&(o={markdown:{value:r.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDescription});var c,d={matches:s||[],descriptionTitle:o,descriptionMatches:l||[],labelEscapeNewLines:!0};(n.entry.classList.add("quick-input-list-separator-as-item"),n.label.setLabel(r.saneLabel,r.saneDescription,d),r.saneDetail)?(r.saneTooltip||(c={markdown:{value:r.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDetail}),n.detail.element.style.display="",n.detail.setLabel(r.saneDetail,void 0,{matches:u,title:c,labelEscapeNewLines:!0})):n.detail.element.style.display="none";n.separator.style.display="none",n.entry.classList.add("quick-input-list-separator-border");var h=a.buttons;h&&h.length?(n.actionBar.push(h.map((function(e,t){return zU(e,"id-".concat(t),(function(){return r.fireSeparatorButtonTriggered({button:e,separator:r.separator})}))})),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions"),this.addSeparator(r)}},{key:"disposeElement",value:function(e,n,i){var r;(this.removeSeparator(e.element),this.isSeparatorVisible(e.element))||(null===(r=e.element.element)||void 0===r||r.classList.remove("focus-inside"));g(v(t.prototype),"disposeElement",this).call(this,e,n,i)}},{key:"addSeparator",value:function(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}},{key:"removeSeparator",value:function(e){var t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}}]),t}(WG);HG.ID="quickpickseparator";var VG=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t)).parent=e,s.hoverDelegate=n,s.linkOpenerDelegate=i,s.accessibilityService=a,s._onKeyDown=new Zu,s._onLeave=new Zu,s.onLeave=s._onLeave.event,s._visibleCountObservable=BP("VisibleCount",0),s.onChangedVisibleCount=Au.fromObservable(s._visibleCountObservable,s._store),s._allVisibleCheckedObservable=BP("AllVisibleChecked",!1),s.onChangedAllVisibleChecked=Au.fromObservable(s._allVisibleCheckedObservable,s._store),s._checkedCountObservable=BP("CheckedCount",0),s.onChangedCheckedCount=Au.fromObservable(s._checkedCountObservable,s._store),s._checkedElementsObservable=yO({equalsFn:ea},new Array),s.onChangedCheckedElements=Au.fromObservable(s._checkedElementsObservable,s._store),s._onButtonTriggered=new Zu,s.onButtonTriggered=s._onButtonTriggered.event,s._onSeparatorButtonTriggered=new Zu,s.onSeparatorButtonTriggered=s._onSeparatorButtonTriggered.event,s._elementChecked=new Zu,s._elementCheckedEventBufferer=new ec,s._hasCheckboxes=!1,s._inputElements=new Array,s._elementTree=new Array,s._itemElements=new Array,s._elementDisposable=s._register(new Tu),s._matchOnDescription=!1,s._matchOnDetail=!1,s._matchOnLabel=!0,s._matchOnLabelMode="fuzzy",s._sortByLabel=!0,s._shouldLoop=!0,s._container=lm(s.parent,TG(".quick-input-list")),s._separatorRenderer=new HG(n),s._itemRenderer=o.createInstance(BG,n),s._tree=s._register(o.createInstance(lG,"QuickInput",s._container,new OG,[s._itemRenderer,s._separatorRenderer],{filter:{filter:function(e){return e.hidden?0:e instanceof PG?2:1}},sorter:{compare:function(e,t){return s.sortByLabel&&s._lastQueryString?function(e,t,n){var i=e.labelHighlights||[],r=t.labelHighlights||[];if(i.length&&!r.length)return-1;if(!i.length&&r.length)return 1;if(0===i.length&&0===r.length)return 0;return DG(e.saneSortLabel,t.saneSortLabel,n)}(e,t,s._lastQueryString.toLowerCase()):0}},accessibilityProvider:new FG,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:lK.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),s._tree.getHTMLElement().id=r,s._registerListeners(),s}return p(t,e),h(t,[{key:"onDidChangeFocus",get:function(){return Au.map(this._tree.onDidChangeFocus,(function(e){return e.elements.filter((function(e){return e instanceof AG})).map((function(e){return e.item}))}),this._store)}},{key:"onDidChangeSelection",get:function(){return Au.map(this._tree.onDidChangeSelection,(function(e){return{items:e.elements.filter((function(e){return e instanceof AG})).map((function(e){return e.item})),event:e.browserEvent}}),this._store)}},{key:"displayed",get:function(){return"none"!==this._container.style.display},set:function(e){this._container.style.display=e?"":"none"}},{key:"scrollTop",get:function(){return this._tree.scrollTop},set:function(e){this._tree.scrollTop=e}},{key:"ariaLabel",get:function(){return this._tree.ariaLabel},set:function(e){this._tree.ariaLabel=null!=e?e:""}},{key:"enabled",set:function(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}},{key:"matchOnDescription",get:function(){return this._matchOnDescription},set:function(e){this._matchOnDescription=e}},{key:"matchOnDetail",get:function(){return this._matchOnDetail},set:function(e){this._matchOnDetail=e}},{key:"matchOnLabel",get:function(){return this._matchOnLabel},set:function(e){this._matchOnLabel=e}},{key:"matchOnLabelMode",get:function(){return this._matchOnLabelMode},set:function(e){this._matchOnLabelMode=e}},{key:"sortByLabel",get:function(){return this._sortByLabel},set:function(e){this._sortByLabel=e}},{key:"shouldLoop",get:function(){return this._shouldLoop},set:function(e){this._shouldLoop=e}},{key:"_registerListeners",value:function(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}},{key:"_registerOnKeyDown",value:function(){var e=this;this._register(this._tree.onKeyDown((function(t){var n=new rg(t);if(10===n.keyCode)e.toggleCheckbox();e._onKeyDown.fire(n)})))}},{key:"_registerOnContainerClick",value:function(){var e=this;this._register(cp(this._container,rm.CLICK,(function(t){(t.x||t.y)&&e._onLeave.fire()})))}},{key:"_registerOnMouseMiddleClick",value:function(){var e=this;this._register(cp(this._container,rm.AUXCLICK,(function(t){1===t.button&&e._onLeave.fire()})))}},{key:"_registerOnTreeModelChanged",value:function(){var e=this;this._register(this._tree.onDidChangeModel((function(){var t=e._itemElements.filter((function(e){return!e.hidden})).length;e._visibleCountObservable.set(t,void 0),e._hasCheckboxes&&e._updateCheckedObservables()})))}},{key:"_registerOnElementChecked",value:function(){var e=this;this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(function(e,t){return t}))((function(t){return e._updateCheckedObservables()})))}},{key:"_registerOnContextMenu",value:function(){var e=this;this._register(this._tree.onContextMenu((function(t){t.element&&(t.browserEvent.preventDefault(),e._tree.setSelection([t.element]))})))}},{key:"_registerHoverListeners",value:function(){var e=this._register(new pg(this.hoverDelegate.delay)),t=this;this._register(this._tree.onMouseOver(function(){var n=s((function(n){var i,r;return E(this,(function(o){switch(o.label){case 0:if(em(n.browserEvent.target))return e.cancel(),[2];if(!em(n.browserEvent.relatedTarget)&&Mp(n.browserEvent.relatedTarget,null===(i=n.element)||void 0===i?void 0:i.element))return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.trigger(s((function(){return E(this,(function(e){return n.element instanceof AG&&t.showHover(n.element),[2]}))})))];case 2:return o.sent(),[3,4];case 3:if(!_u(r=o.sent()))throw r;return[3,4];case 4:return[2]}}))}));return function(e){return n.apply(this,arguments)}}())),this._register(this._tree.onMouseOut((function(t){var n;Mp(t.browserEvent.relatedTarget,null===(n=t.element)||void 0===n?void 0:n.element)||e.cancel()})))}},{key:"_registerSeparatorActionShowingListeners",value:function(){var e=this;this._register(this._tree.onDidChangeFocus((function(t){var n=t.elements[0]?e._tree.getParentElement(t.elements[0]):null,i=!0,r=!1,o=void 0;try{for(var a,s=e._separatorRenderer.visibleSeparators[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=l===n;!!(l.focusInsideSeparator&IG.ACTIVE_ITEM)!==u&&(u?l.focusInsideSeparator|=IG.ACTIVE_ITEM:l.focusInsideSeparator&=~IG.ACTIVE_ITEM,e._tree.rerender(l))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}))),this._register(this._tree.onMouseOver((function(t){var n=t.element?e._tree.getParentElement(t.element):null,i=!0,r=!1,o=void 0;try{for(var a,s=e._separatorRenderer.visibleSeparators[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(l===n)!!(l.focusInsideSeparator&IG.MOUSE_HOVER)||(l.focusInsideSeparator|=IG.MOUSE_HOVER,e._tree.rerender(l))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}))),this._register(this._tree.onMouseOut((function(t){var n=t.element?e._tree.getParentElement(t.element):null,i=!0,r=!1,o=void 0;try{for(var a,s=e._separatorRenderer.visibleSeparators[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(l===n)!!(l.focusInsideSeparator&IG.MOUSE_HOVER)&&(l.focusInsideSeparator&=~IG.MOUSE_HOVER,e._tree.rerender(l))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}})))}},{key:"_registerSelectionChangeListener",value:function(){var e=this;this._register(this._tree.onDidChangeSelection((function(t){var n=t.elements.filter((function(e){return e instanceof AG}));n.length!==t.elements.length&&(1===t.elements.length&&t.elements[0]instanceof PG&&(e._tree.setFocus([t.elements[0].children[0]]),e._tree.reveal(t.elements[0],0)),e._tree.setSelection(n))})))}},{key:"setAllVisibleChecked",value:function(e){var t=this;this._elementCheckedEventBufferer.bufferEvents((function(){t._itemElements.forEach((function(t){t.hidden||t.checkboxDisabled||(t.checked=e)}))}))}},{key:"setElements",value:function(e){var t,n=this;this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes"),this._itemElements=new Array,this._elementTree=e.reduce((function(i,r,o){var a;if("separator"===r.type){if(!r.buttons)return i;t=new PG(o,(function(e){return n._onSeparatorButtonTriggered.fire(e)}),r),a=t}else{var s,l=o>0?e[o-1]:void 0;l&&"separator"===l.type&&!l.buttons&&(t=void 0,s=l);var u=new AG(o,n._hasCheckboxes,(function(e){return n._onButtonTriggered.fire(e)}),n._elementChecked,r,s);if(n._itemElements.push(u),t)return t.children.push(u),i;a=u}return i.push(a),i}),new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout((function(){var e=n._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),t=null==e?void 0:e.parentNode;if(e&&t){var i=e.nextSibling;e.remove(),t.insertBefore(e,i)}}),0)}},{key:"setFocusedElements",value:function(e){var t=this,n=e.map((function(e){return t._itemElements.find((function(t){return t.item===e}))})).filter((function(e){return!!e})).filter((function(e){return!e.hidden}));if(this._tree.setFocus(n),e.length>0){var i=this._tree.getFocus()[0];i&&this._tree.reveal(i)}}},{key:"getActiveDescendant",value:function(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}},{key:"setSelectedElements",value:function(e){var t=this,n=e.map((function(e){return t._itemElements.find((function(t){return t.item===e}))})).filter((function(e){return!!e}));this._tree.setSelection(n)}},{key:"getCheckedElements",value:function(){return this._itemElements.filter((function(e){return e.checked})).map((function(e){return e.item}))}},{key:"setCheckedElements",value:function(e){var t=this;this._elementCheckedEventBufferer.bufferEvents((function(){var n=new Set,i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;n.add(l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}var u=!0,c=!1,d=void 0;try{for(var h,f=t._itemElements[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;g.checked=n.has(g.item)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}))}},{key:"focus",value:function(e){var t=this;if(this._itemElements.length)switch(e===IU.Second&&this._itemElements.length<2&&(e=IU.First),e){case IU.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,(function(e){return e.element instanceof AG}));break;case IU.Second:this._tree.scrollTop=0;var n=!1;this._tree.focusFirst(void 0,(function(e){return e.element instanceof AG&&(!!n||(n=!n,!1))}));break;case IU.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,(function(e){return e.element instanceof AG}));break;case IU.Next:var i=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,(function(e){return e.element instanceof AG&&(t._tree.reveal(e.element),!0)}));var r=this._tree.getFocus();i.length&&i[0]===r[0]&&i[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break;case IU.Previous:var o=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,(function(e){if(!(e.element instanceof AG))return!1;var n=t._tree.getParentElement(e.element);return null===n||n.children[0]!==e.element?t._tree.reveal(e.element):t._tree.reveal(n),!0}));var a=this._tree.getFocus();o.length&&o[0]===a[0]&&o[0]===this._itemElements[0]&&this._onLeave.fire();break;case IU.NextPage:this._tree.focusNextPage(void 0,(function(e){return e.element instanceof AG&&(t._tree.reveal(e.element),!0)}));break;case IU.PreviousPage:this._tree.focusPreviousPage(void 0,(function(e){if(!(e.element instanceof AG))return!1;var n=t._tree.getParentElement(e.element);return null===n||n.children[0]!==e.element?t._tree.reveal(e.element):t._tree.reveal(n),!0}));break;case IU.NextSeparator:var s=!1,l=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,(function(e){if(s)return!0;if(e.element instanceof PG)s=!0,t._separatorRenderer.isSeparatorVisible(e.element)?t._tree.reveal(e.element.children[0]):t._tree.reveal(e.element,0);else if(e.element instanceof AG){if(e.element.separator)return t._itemRenderer.isItemWithSeparatorVisible(e.element)?t._tree.reveal(e.element):t._tree.reveal(e.element,0),!0;if(e.element===t._elementTree[0])return t._tree.reveal(e.element,0),!0}return!1})),l===this._tree.getFocus()[0]&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,(function(e){return e.element instanceof AG})));break;case IU.PreviousSeparator:var u,c,d=!!(null===(u=this._tree.getFocus()[0])||void 0===u?void 0:u.separator);this._tree.focusPrevious(void 0,!0,void 0,(function(e){if(e.element instanceof PG)d?c||(t._separatorRenderer.isSeparatorVisible(e.element)?t._tree.reveal(e.element):t._tree.reveal(e.element,0),c=e.element.children[0]):d=!0;else if(e.element instanceof AG&&!c)if(e.element.separator)t._itemRenderer.isItemWithSeparatorVisible(e.element)?t._tree.reveal(e.element):t._tree.reveal(e.element,0),c=e.element;else if(e.element===t._elementTree[0])return t._tree.reveal(e.element,0),!0;return!1})),c&&this._tree.setFocus([c])}}},{key:"clearFocus",value:function(){this._tree.setFocus([])}},{key:"domFocus",value:function(){this._tree.domFocus()}},{key:"layout",value:function(e){this._tree.getHTMLElement().style.maxHeight=e?"".concat(44*Math.floor(e/44)+6,"px"):"",this._tree.layout()}},{key:"filter",value:function(e){var t=this;if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;var n,i=e;(e=e.trim(),e&&(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))?this._itemElements.forEach((function(r){var o,a,s,l;"fuzzy"===t.matchOnLabelMode?o=t.matchOnLabel&&null!==(a=UM(e,zM(r.saneLabel)))&&void 0!==a?a:void 0:o=t.matchOnLabel&&null!==(s=function(e,t){var n=t.text,i=t.iconOffsets;if(!i||0===i.length)return zG(e,n);var r=Zh(n," "),o=n.length-r.length,a=zG(e,r);if(a){var s=!0,l=!1,u=void 0;try{for(var c,d=a[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value,f=i[h.start+o]+o;h.start+=f,h.end+=f}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}return a}(i,zM(r.saneLabel)))&&void 0!==s?s:void 0;var u,c=t.matchOnDescription&&null!==(l=UM(e,zM(r.saneDescription||"")))&&void 0!==l?l:void 0,d=t.matchOnDetail&&null!==(u=UM(e,zM(r.saneDetail||"")))&&void 0!==u?u:void 0;if(o||c||d?(r.labelHighlights=o,r.descriptionHighlights=c,r.detailHighlights=d,r.hidden=!1):(r.labelHighlights=void 0,r.descriptionHighlights=void 0,r.detailHighlights=void 0,r.hidden=!r.item||!r.item.alwaysShow),r.item?r.separator=void 0:r.separator&&(r.hidden=!0),!t.sortByLabel){var h=r.index&&t._inputElements[r.index-1]||void 0;"separator"!==(null==h?void 0:h.type)||h.buttons||(n=h),n&&!r.hidden&&(r.separator=n,n=void 0)}})):this._itemElements.forEach((function(e){e.labelHighlights=void 0,e.descriptionHighlights=void 0,e.detailHighlights=void 0,e.hidden=!1;var n=e.index&&t._inputElements[e.index-1];e.item&&(e.separator=n&&"separator"===n.type&&!n.buttons?n:void 0)}));return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}},{key:"toggleCheckbox",value:function(){var e=this;this._elementCheckedEventBufferer.bufferEvents((function(){var t=e._tree.getFocus().filter((function(e){return e instanceof AG})),n=e._allVisibleChecked(t),i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l.checkboxDisabled||(l.checked=!n)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}))}},{key:"style",value:function(e){this._tree.style(e)}},{key:"toggleHover",value:function(){var e=this,t=this._tree.getFocus()[0];if((null==t?void 0:t.saneTooltip)&&t instanceof AG)if(!this._lastHover||this._lastHover.isDisposed){this.showHover(t);var n=new Tu;n.add(this._tree.onDidChangeFocus((function(t){t.elements[0]instanceof AG&&e.showHover(t.elements[0])}))),this._lastHover&&n.add(this._lastHover),this._elementDisposable.add(n)}else this._lastHover.dispose()}},{key:"_setElementsToTree",value:function(e){var t=new Array,n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s instanceof PG?t.push({element:s,collapsible:!1,collapsed:!1,children:s.children.map((function(e){return{element:e,collapsible:!1,collapsed:!1}}))}):t.push({element:s,collapsible:!1,collapsed:!1})}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this._tree.setChildren(null,t)}},{key:"_allVisibleChecked",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0,i=e.length;n<i;n++){var r=e[n];if(!r.hidden){if(!r.checked)return!1;t=!0}}return t}},{key:"_updateCheckedObservables",value:function(){var e=this;TP((function(t){e._allVisibleCheckedObservable.set(e._allVisibleChecked(e._itemElements,!1),t);var n=e._itemElements.filter((function(e){return e.checked})).length;e._checkedCountObservable.set(n,t),e._checkedElementsObservable.set(e.getCheckedElements(),t)}))}},{key:"showHover",value:function(e){var t,n,i,r=this;this._lastHover&&!this._lastHover.isDisposed&&(null===(t=(n=this.hoverDelegate).onDidHideHover)||void 0===t||t.call(n),null===(i=this._lastHover)||void 0===i||i.dispose());e.element&&e.saneTooltip&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:function(e){r.linkOpenerDelegate(e)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}}]),t}(Ru);function zG(e,t){var n=t.toLowerCase().indexOf(e.toLowerCase());return-1!==n?[{start:n,end:n+e.length}]:null}EG([QI],VG.prototype,"onDidChangeFocus",null),EG([QI],VG.prototype,"onDidChangeSelection",null),VG=EG([MG(4,Gm),MG(5,mR)],VG);var UG={weight:200,when:Sy.and(Sy.equals(YU,"quickPick"),ZU),metadata:{description:Xa("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function jG(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o_.registerCommandAndKeybindingRule(b(_({},UG,e),{secondary:qG(e.primary,null!==(t=e.secondary)&&void 0!==t?t:[],n)}))}var KG=ms?256:2048;function qG(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.withAltMod&&t.push(512+e),n.withCtrlMod&&(t.push(KG+e),n.withAltMod&&t.push(512+KG+e)),n.withCmdMod&&ms&&(t.push(2048+e),n.withCtrlMod&&t.push(2304+e),n.withAltMod&&(t.push(2560+e),n.withCtrlMod&&t.push(2816+e))),t}function GG(e,t){return function(n){var i=n.get(TU).currentQuickInput;if(i)return t&&i.quickNavigate?i.focus(t):i.focus(e)}}jG({id:"quickInput.pageNext",primary:12,handler:GG(IU.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),jG({id:"quickInput.pagePrevious",primary:11,handler:GG(IU.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),jG({id:"quickInput.first",primary:KG+14,handler:GG(IU.First)},{withAltMod:!0,withCmdMod:!0}),jG({id:"quickInput.last",primary:KG+13,handler:GG(IU.Last)},{withAltMod:!0,withCmdMod:!0}),jG({id:"quickInput.next",primary:18,handler:GG(IU.Next)},{withCtrlMod:!0}),jG({id:"quickInput.previous",primary:16,handler:GG(IU.Previous)},{withCtrlMod:!0});var ZG=Xa("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),YG=Xa("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");ms?(jG({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:GG(IU.NextSeparator,IU.Next),metadata:{description:ZG}}),jG({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:GG(IU.NextSeparator)},{withCtrlMod:!0}),jG({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:GG(IU.PreviousSeparator,IU.Previous),metadata:{description:YG}}),jG({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:GG(IU.PreviousSeparator)},{withCtrlMod:!0})):(jG({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:GG(IU.NextSeparator,IU.Next),metadata:{description:ZG}}),jG({id:"quickInput.nextSeparator",primary:2578,handler:GG(IU.NextSeparator)}),jG({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:GG(IU.PreviousSeparator,IU.Previous),metadata:{description:YG}}),jG({id:"quickInput.previousSeparator",primary:2576,handler:GG(IU.PreviousSeparator)})),jG({id:"quickInput.acceptInBackground",when:Sy.and(UG.when,Sy.or(dq.negate(),JU)),primary:17,weight:250,handler:function(e){var t=e.get(TU).currentQuickInput;null==t||t.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var QG,XG=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},$G=function(e,t){return function(n,i){t(n,i,e)}},JG=gm,eZ=(mt=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t)).options=e,o.layoutService=n,o.instantiationService=i,o.contextKeyService=r,o.enabled=!0,o.onDidAcceptEmitter=o._register(new Zu),o.onDidCustomEmitter=o._register(new Zu),o.onDidTriggerButtonEmitter=o._register(new Zu),o.keyMods={ctrlCmd:!1,alt:!1},o.controller=null,o.onShowEmitter=o._register(new Zu),o.onShow=o.onShowEmitter.event,o.onHideEmitter=o._register(new Zu),o.onHide=o.onHideEmitter.event,o.inQuickInputContext=GU.bindTo(o.contextKeyService),o.quickInputTypeContext=QU.bindTo(o.contextKeyService),o.endOfQuickInputBoxContext=$U.bindTo(o.contextKeyService),o.idPrefix=e.idPrefix,o._container=e.container,o.styles=e.styles,o._register(Au.runAndSubscribe(op,(function(e){var t=e.window,n=e.disposables;return o.registerKeyModsListeners(t,n)}),{window:Fh,disposables:o._store})),o._register(ap((function(e){o.ui&&ep(o.ui.container)===e&&(o.reparentUI(o.layoutService.mainContainer),o.layout(o.layoutService.mainContainerDimension,o.layoutService.mainContainerOffset.quickPickTop))}))),o}return p(t,e),h(t,[{key:"currentQuickInput",get:function(){var e;return null!==(e=this.controller)&&void 0!==e?e:void 0}},{key:"container",get:function(){return this._container}},{key:"registerKeyModsListeners",value:function(e,t){for(var n=this,i=function(e){n.keyMods.ctrlCmd=e.ctrlKey||e.metaKey,n.keyMods.alt=e.altKey},r=0,o=[rm.KEY_DOWN,rm.KEY_UP,rm.MOUSE_DOWN];r<o.length;r++){var a=o[r];t.add(cp(e,a,i,!0))}}},{key:"getUI",value:function(e){var t=this;if(this.ui)return e&&ep(this._container)!==ep(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;var n=lm(this._container,JG(".quick-input-widget.show-file-icons"));n.tabIndex=-1,n.style.display="none";var i=jp(n),r=lm(n,JG(".quick-input-titlebar")),o=this._register(new dW(r,{hoverDelegate:this.options.hoverDelegate}));o.domNode.classList.add("quick-input-left-action-bar");var a=lm(r,JG(".quick-input-title")),s=this._register(new dW(r,{hoverDelegate:this.options.hoverDelegate}));s.domNode.classList.add("quick-input-right-action-bar");var l=lm(n,JG(".quick-input-header")),u=lm(l,JG("input.quick-input-check-all"));u.type="checkbox",u.setAttribute("aria-label",Xa("quickInput.checkAll","Toggle all checkboxes")),this._register(hp(u,rm.CHANGE,(function(e){var t=u.checked;E.setAllVisibleChecked(t)}))),this._register(cp(u,rm.CLICK,(function(e){(e.x||e.y)&&f.setFocus()})));var c=lm(l,JG(".quick-input-description")),d=lm(l,JG(".quick-input-and-message")),h=lm(d,JG(".quick-input-filter")),f=this._register(new Dj(h,this.styles.inputBox,this.styles.toggle));f.setAttribute("aria-describedby","".concat(this.idPrefix,"message"));var g=lm(h,JG(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");var v=new aj(g,{countFormat:Xa({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),p=lm(h,JG(".quick-input-count"));p.setAttribute("aria-live","polite");var m=new aj(p,{countFormat:Xa({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),y=this._register(new dW(l,{hoverDelegate:this.options.hoverDelegate}));y.domNode.classList.add("quick-input-inline-action-bar");var k=lm(l,JG(".quick-input-action")),w=this._register(new oj(k,this.styles.button));w.label=Xa("ok","OK"),this._register(w.onDidClick((function(e){t.onDidAcceptEmitter.fire()})));var C=lm(l,JG(".quick-input-action")),S=this._register(new oj(C,b(_({},this.styles.button),{supportIcons:!0})));S.label=Xa("custom","Custom"),this._register(S.onDidClick((function(e){t.onDidCustomEmitter.fire()})));var x=lm(d,JG("#".concat(this.idPrefix,"message.quick-input-message"))),L=this._register(new hj(n,this.styles.progressBar));L.getContainer().classList.add("quick-input-progress");var D=lm(n,JG(".quick-input-html-widget"));D.tabIndex=-1;var N=lm(n,JG(".quick-input-description")),I=this.idPrefix+"list",E=this._register(this.instantiationService.createInstance(VG,n,this.options.hoverDelegate,this.options.linkOpenerDelegate,I));f.setAttribute("aria-controls",I),this._register(E.onDidChangeFocus((function(){var e;f.setAttribute("aria-activedescendant",null!==(e=E.getActiveDescendant())&&void 0!==e?e:"")}))),this._register(E.onChangedAllVisibleChecked((function(e){u.checked=e}))),this._register(E.onChangedVisibleCount((function(e){v.setCount(e)}))),this._register(E.onChangedCheckedCount((function(e){m.setCount(e)}))),this._register(E.onLeave((function(){setTimeout((function(){t.controller&&(f.setFocus(),t.controller instanceof nj&&t.controller.canSelectMany&&E.clearFocus())}),0)})));var M=sm(n);return this._register(M),this._register(cp(n,rm.FOCUS,(function(e){var n=t.getUI();if(Mp(e.relatedTarget,n.inputContainer)){var i=n.inputBox.isSelectionAtEnd();t.endOfQuickInputBoxContext.get()!==i&&t.endOfQuickInputBoxContext.set(i)}Mp(e.relatedTarget,n.container)||(t.inQuickInputContext.set(!0),t.previousFocusElement=Jp(e.relatedTarget)?e.relatedTarget:void 0)}),!0)),this._register(M.onDidBlur((function(){t.getUI().ignoreFocusOut||t.options.ignoreFocusOut()||t.hide(DU.Blur),t.inQuickInputContext.set(!1),t.endOfQuickInputBoxContext.set(!1),t.previousFocusElement=void 0}))),this._register(f.onKeyDown((function(e){var n=t.getUI().inputBox.isSelectionAtEnd();t.endOfQuickInputBoxContext.get()!==n&&t.endOfQuickInputBoxContext.set(n)}))),this._register(cp(n,rm.FOCUS,(function(e){f.setFocus()}))),this._register(hp(n,rm.KEY_DOWN,(function(e){if(!Mp(e.target,D))switch(e.keyCode){case 3:om(e,!0),t.enabled&&t.onDidAcceptEmitter.fire();break;case 9:om(e,!0),t.hide(DU.Gesture);break;case 2:if(!e.altKey&&!e.ctrlKey&&!e.metaKey){var i=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(n.classList.contains("show-checkboxes")?i.push("input"):i.push("input[type=text]"),t.getUI().list.displayed&&i.push(".monaco-list"),t.getUI().message&&i.push(".quick-input-message a"),t.getUI().widget){if(Mp(e.target,t.getUI().widget))break;i.push(".quick-input-html-widget")}var r=n.querySelectorAll(i.join(", "));e.shiftKey&&e.target===r[0]?(om(e,!0),E.clearFocus()):!e.shiftKey&&Mp(e.target,r[r.length-1])&&(om(e,!0),r[0].focus())}break;case 10:e.ctrlKey&&(om(e,!0),t.getUI().list.toggleHover())}}))),this.ui={container:n,styleSheet:i,leftActionBar:o,titleBar:r,title:a,description1:N,description2:c,widget:D,rightActionBar:s,inlineActionBar:y,checkAll:u,inputContainer:d,filterContainer:h,inputBox:f,visibleCountContainer:g,visibleCount:v,countContainer:p,count:m,okContainer:k,ok:w,message:x,customButtonContainer:C,customButton:S,list:E,progressBar:L,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:function(e){return t.show(e)},hide:function(){return t.hide()},setVisibilities:function(e){return t.setVisibilities(e)},setEnabled:function(e){return t.setEnabled(e)},setContextKey:function(e){return t.options.setContextKey(e)},linkOpenerDelegate:function(e){return t.options.linkOpenerDelegate(e)}},this.updateStyles(),this.ui}},{key:"reparentUI",value:function(e){this.ui&&(this._container=e,lm(this._container,this.ui.container))}},{key:"pick",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uu.None;return new Promise((function(r,o){var a=function(e){var t;a=r,null===(t=n.onKeyMods)||void 0===t||t.call(n,l.keyMods),r(e)};if(i.isCancellationRequested)a(void 0);else{var s,l=t.createQuickPick({useSeparators:!0}),u=[l,l.onDidAccept((function(){if(l.canSelectMany)a(l.selectedItems.slice()),l.hide();else{var e=l.activeItems[0];e&&(a(e),l.hide())}})),l.onDidChangeActive((function(e){var t=e[0];t&&n.onDidFocus&&n.onDidFocus(t)})),l.onDidChangeSelection((function(e){if(!l.canSelectMany){var t=e[0];t&&(a(t),l.hide())}})),l.onDidTriggerItemButton((function(e){return n.onDidTriggerItemButton&&n.onDidTriggerItemButton(b(_({},e),{removeItem:function(){var t=l.items.indexOf(e.item);if(-1!==t){var n=l.items.slice(),i=n.splice(t,1),r=l.activeItems.filter((function(e){return e!==i[0]})),o=l.keepScrollPosition;l.keepScrollPosition=!0,l.items=n,r&&(l.activeItems=r),l.keepScrollPosition=o}}}))})),l.onDidTriggerSeparatorButton((function(e){var t;return null===(t=n.onDidTriggerSeparatorButton)||void 0===t?void 0:t.call(n,e)})),l.onDidChangeValue((function(e){!s||e||1===l.activeItems.length&&l.activeItems[0]===s||(l.activeItems=[s])})),i.onCancellationRequested((function(){l.hide()})),l.onDidHide((function(){Iu(u),a(void 0)}))];l.title=n.title,n.value&&(l.value=n.value),l.canSelectMany=!!n.canPickMany,l.placeholder=n.placeHolder,l.ignoreFocusOut=!!n.ignoreFocusLost,l.matchOnDescription=!!n.matchOnDescription,l.matchOnDetail=!!n.matchOnDetail,l.matchOnLabel=void 0===n.matchOnLabel||n.matchOnLabel,l.quickNavigate=n.quickNavigate,l.hideInput=!!n.hideInput,l.contextKey=n.contextKey,l.busy=!0,Promise.all([e,n.activeItem]).then((function(e){var t=C(e,2),n=t[0],i=t[1];s=i,l.busy=!1,l.items=n,l.canSelectMany&&(l.selectedItems=n.filter((function(e){return"separator"!==e.type&&e.picked}))),s&&(l.activeItems=[s])})),l.show(),Promise.resolve(e).then(void 0,(function(e){o(e),l.hide()}))}}))}},{key:"createQuickPick",value:function(){var e=this.getUI(!0);return new nj(e)}},{key:"createInputBox",value:function(){var e=this.getUI(!0);return new ij(e)}},{key:"show",value:function(e){var t=this.getUI(!0);this.onShowEmitter.fire();var n=this.controller;this.controller=e,null==n||n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",cm(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(tx.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),cm(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;var i=this.options.backKeybindingLabel();ej.tooltip=i?Xa("quickInput.backWithKeybinding","Back ({0})",i):Xa("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}},{key:"isVisible",value:function(){return!!this.ui&&"none"!==this.ui.container.style.display}},{key:"setVisibilities",value:function(e){var t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=!e.description||e.inputBox||e.checkAll?"none":"",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}},{key:"setEnabled",value:function(e){if(e!==this.enabled){this.enabled=e;var t=!0,n=!1,i=void 0;try{for(var r,o=this.getUI().leftActionBar.viewItems[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.action.enabled=e}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}var a=!0,s=!1,l=void 0;try{for(var u,c=this.getUI().rightActionBar.viewItems[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){u.value.action.enabled=e}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}},{key:"hide",value:function(e){var t,n=this.controller;if(n){n.willHide(e);var i=null===(t=this.ui)||void 0===t?void 0:t.container,r=i&&!Wp(i);if(this.controller=null,this.onHideEmitter.fire(),i&&(i.style.display="none"),!r){for(var o=this.previousFocusElement;o&&!o.offsetParent;){var a;o=null!==(a=o.parentElement)&&void 0!==a?a:void 0}(null==o?void 0:o.offsetParent)?(o.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}n.didHide(e)}}},{key:"layout",value:function(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}},{key:"updateLayout",value:function(){if(this.ui&&this.isVisible()){this.ui.container.style.top="".concat(this.titleBarOffset,"px");var e=this.ui.container.style,t=Math.min(.62*this.dimension.width,QG.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&.4*this.dimension.height)}}},{key:"applyStyles",value:function(e){this.styles=e,this.updateStyles()}},{key:"updateStyles",value:function(){if(this.ui){var e=this.styles.widget,t=e.quickInputTitleBackground,n=e.quickInputBackground,i=e.quickInputForeground,r=e.widgetBorder,o=e.widgetShadow;this.ui.titleBar.style.backgroundColor=null!=t?t:"",this.ui.container.style.backgroundColor=null!=n?n:"",this.ui.container.style.color=null!=i?i:"",this.ui.container.style.border=r?"1px solid ".concat(r):"",this.ui.container.style.boxShadow=o?"0 0 8px 2px ".concat(o):"",this.ui.list.style(this.styles.list);var a=[];this.styles.pickerGroup.pickerGroupBorder&&a.push(".quick-input-list .quick-input-list-entry { border-top-color:  ".concat(this.styles.pickerGroup.pickerGroupBorder,"; }")),this.styles.pickerGroup.pickerGroupForeground&&a.push(".quick-input-list .quick-input-list-separator { color:  ".concat(this.styles.pickerGroup.pickerGroupForeground,"; }")),this.styles.pickerGroup.pickerGroupForeground&&a.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(a.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&a.push("background-color: ".concat(this.styles.keybindingLabel.keybindingLabelBackground,";")),this.styles.keybindingLabel.keybindingLabelBorder&&a.push("border-color: ".concat(this.styles.keybindingLabel.keybindingLabelBorder,";")),this.styles.keybindingLabel.keybindingLabelBottomBorder&&a.push("border-bottom-color: ".concat(this.styles.keybindingLabel.keybindingLabelBottomBorder,";")),this.styles.keybindingLabel.keybindingLabelShadow&&a.push("box-shadow: inset 0 -1px 0 ".concat(this.styles.keybindingLabel.keybindingLabelShadow,";")),this.styles.keybindingLabel.keybindingLabelForeground&&a.push("color: ".concat(this.styles.keybindingLabel.keybindingLabelForeground,";")),a.push("}"));var s=a.join("\n");s!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=s)}}}]),t}(Ru),QG=mt,mt.MAX_WIDTH=600,mt);eZ=QG=XG([$G(1,QS),$G(2,Gm),$G(3,Ky)],eZ);var tZ=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},nZ=function(e,t){return function(n,i){t(n,i,e)}},iZ=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t,[i])).instantiationService=e,a.contextKeyService=n,a.layoutService=r,a.configurationService=o,a._onShow=a._register(new Zu),a._onHide=a._register(new Zu),a.contexts=new Map,a}return p(t,e),h(t,[{key:"controller",get:function(){return this._controller||(this._controller=this._register(this.createController())),this._controller}},{key:"hasController",get:function(){return!!this._controller}},{key:"currentQuickInput",get:function(){return this.controller.currentQuickInput}},{key:"quickAccess",get:function(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(PU))),this._quickAccess}},{key:"createController",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.layoutService,n=arguments.length>1?arguments[1]:void 0,i={idPrefix:"quickInput_",container:t.activeContainer,ignoreFocusOut:function(){return!1},backKeybindingLabel:function(){},setContextKey:function(t){return e.setContextKey(t)},linkOpenerDelegate:function(t){e.instantiationService.invokeFunction((function(e){e.get(xE).open(t,{allowCommands:!0,fromUserGesture:!0})}))},returnFocus:function(){return t.focus()},styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(rj))},r=this._register(this.instantiationService.createInstance(eZ,_({},i,n)));return r.layout(t.activeContainerDimension,t.activeContainerOffset.quickPickTop),this._register(t.onDidLayoutActiveContainer((function(e){ep(t.activeContainer)===ep(r.container)&&r.layout(e,t.activeContainerOffset.quickPickTop)}))),this._register(t.onDidChangeActiveContainer((function(){r.isVisible()||r.layout(t.activeContainerDimension,t.activeContainerOffset.quickPickTop)}))),this._register(r.onShow((function(){e.resetContextKeys(),e._onShow.fire()}))),this._register(r.onHide((function(){e.resetContextKeys(),e._onHide.fire()}))),r}},{key:"setContextKey",value:function(e){var t;e&&((t=this.contexts.get(e))||(t=new jy(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),t&&t.get()||(this.resetContextKeys(),null==t||t.set(!0))}},{key:"resetContextKeys",value:function(){this.contexts.forEach((function(e){e.get()&&e.reset()}))}},{key:"pick",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uu.None;return this.controller.pick(e,t,n)}},{key:"createQuickPick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{useSeparators:!1};return this.controller.createQuickPick(e)}},{key:"createInputBox",value:function(){return this.controller.createInputBox()}},{key:"updateStyles",value:function(){this.hasController&&this.controller.applyStyles(this.computeStyles())}},{key:"computeStyles",value:function(){return{widget:{quickInputBackground:NL(RI),quickInputForeground:NL(AI),quickInputTitleBackground:NL(PI),widgetBorder:NL(HD),widgetShadow:NL(BD)},inputBox:qF,toggle:KF,countBadge:ZF,button:UF,progressBar:jF,keybindingLabel:zF,list:QF({listBackground:RI,listFocusBackground:VI,listFocusForeground:BI,listInactiveFocusForeground:BI,listInactiveSelectionIconForeground:HI,listInactiveFocusBackground:VI,listFocusOutline:qL,listInactiveFocusOutline:qL}),pickerGroup:{pickerGroupBorder:NL(FI),pickerGroupForeground:NL(OI)}}}}]),t}(zS),rZ=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},oZ=function(e,t){return function(n,i){t(n,i,e)}},aZ=function(e){function t(e,n,i,r,o,a){var s;u(this,t),(s=l(this,t,[n,i,r,new ex(e.getContainerDomNode(),o),a])).host=void 0;var c=lZ.get(e);if(c){var d=c.widget;s.host={_serviceBrand:void 0,get mainContainer(){return d.getDomNode()},getContainer:function(){return d.getDomNode()},whenContainerStylesLoaded:function(){},get containers(){return[d.getDomNode()]},get activeContainer(){return d.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return Au.map(e.onDidLayoutChange,(function(e){return{container:d.getDomNode(),dimension:e}}))},get onDidChangeActiveContainer(){return Au.None},get onDidAddContainer(){return Au.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:function(){return e.focus()}}}else s.host=void 0;return s}return p(t,e),h(t,[{key:"createController",value:function(){return g(v(t.prototype),"createController",this).call(this,this.host)}}]),t}(iZ=tZ([nZ(0,Gm),nZ(1,Ky),nZ(2,PS),nZ(3,QS),nZ(4,qb)],iZ));aZ=rZ([oZ(1,Gm),oZ(2,Ky),oZ(3,PS),oZ(4,Ym),oZ(5,qb)],aZ);var sZ=function(){function e(t,n){u(this,e),this.instantiationService=t,this.codeEditorService=n,this.mapEditorToService=new Map}return h(e,[{key:"activeService",get:function(){var e=this,t=this.codeEditorService.getFocusedCodeEditor();if(!t)throw new Error("Quick input service needs a focused editor to work.");var n=this.mapEditorToService.get(t);if(!n){var i=n=this.instantiationService.createInstance(aZ,t);this.mapEditorToService.set(t,n),Du(t.onDidDispose)((function(){i.dispose(),e.mapEditorToService.delete(t)}))}return n}},{key:"currentQuickInput",get:function(){return this.activeService.currentQuickInput}},{key:"quickAccess",get:function(){return this.activeService.quickAccess}},{key:"pick",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uu.None;return this.activeService.pick(e,t,n)}},{key:"createQuickPick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{useSeparators:!1};return this.activeService.createQuickPick(e)}},{key:"createInputBox",value:function(){return this.activeService.createInputBox()}}]),e}();sZ=rZ([oZ(0,Gm),oZ(1,Ym)],sZ);var lZ=function(){function e(t){u(this,e),this.editor=t,this.widget=new uZ(this.editor)}return h(e,[{key:"dispose",value:function(){this.widget.dispose()}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();lZ.ID="editor.controller.quickInput";var uZ=function(){function e(t){u(this,e),this.codeEditor=t,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}return h(e,[{key:"getId",value:function(){return e.ID}},{key:"getDomNode",value:function(){return this.domNode}},{key:"getPosition",value:function(){return{preference:2}}},{key:"dispose",value:function(){this.codeEditor.removeOverlayWidget(this)}}]),e}();uZ.ID="editor.contrib.quickInputWidget",B_(lZ.ID,lZ,4);var cZ=function e(t,n,i,r,o){u(this,e),this._parsedThemeRuleBrand=void 0,this.token=t,this.index=n,this.fontStyle=i,this.foreground=r,this.background=o};var dZ=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/,hZ=function(){function e(){u(this,e),this._lastColorId=0,this._id2color=[],this._color2id=new Map}return h(e,[{key:"getId",value:function(e){if(null===e)return 0;var t=e.match(dZ);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();var n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=XC.fromHex("#"+e),n)}},{key:"getColorMap",value:function(){return this._id2color.slice(0)}}]),e}(),fZ=function(){function e(t,n){u(this,e),this._colorMap=t,this._root=n,this._cache=new Map}return h(e,[{key:"getColorMap",value:function(){return this._colorMap.getColorMap()}},{key:"_match",value:function(e){return this._root.match(e)}},{key:"match",value:function(e,t){var n=this._cache.get(t);if(void 0===n){var i=this._match(t),r=function(e){var t=e.match(gZ);if(!t)return 0;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}(t);n=(i.metadata|r<<8)>>>0,this._cache.set(t,n)}return(n|e)>>>0}}],[{key:"createFromRawTokenTheme",value:function(e,t){return this.createFromParsedTokenTheme(function(e){if(!e||!Array.isArray(e))return[];for(var t=[],n=0,i=0,r=e.length;i<r;i++){var o=e[i],a=-1;if("string"==typeof o.fontStyle){a=0;for(var s=o.fontStyle.split(" "),l=0,u=s.length;l<u;l++)switch(s[l]){case"italic":a|=1;break;case"bold":a|=2;break;case"underline":a|=4;break;case"strikethrough":a|=8}}var c=null;"string"==typeof o.foreground&&(c=o.foreground);var d=null;"string"==typeof o.background&&(d=o.background),t[n++]=new cZ(o.token||"",i,a,c,d)}return t}(e),t)}},{key:"createFromParsedTokenTheme",value:function(e,t){return function(e,t){e.sort((function(e,t){var n=function(e,t){return e<t?-1:e>t?1:0}(e.token,t.token);return 0!==n?n:e.index-t.index}));for(var n=0,i="000000",r="ffffff";e.length>=1&&""===e[0].token;){var o=e.shift();-1!==o.fontStyle&&(n=o.fontStyle),null!==o.foreground&&(i=o.foreground),null!==o.background&&(r=o.background)}var a=new hZ,s=!0,l=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;a.getId(h)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}for(var f=a.getId(i),g=a.getId(r),v=new pZ(n,f,g),p=new mZ(v),m=0,y=e.length;m<y;m++){var _=e[m];p.insert(_.token,_.fontStyle,a.getId(_.foreground),a.getId(_.background))}return new fZ(a,p)}(e,t)}}]),e}(),gZ=/\b(comment|string|regex|regexp)\b/;var vZ,pZ=function(){function e(t,n,i){u(this,e),this._themeTrieElementRuleBrand=void 0,this._fontStyle=t,this._foreground=n,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}return h(e,[{key:"clone",value:function(){return new e(this._fontStyle,this._foreground,this._background)}},{key:"acceptOverwrite",value:function(e,t,n){-1!==e&&(this._fontStyle=e),0!==t&&(this._foreground=t),0!==n&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}]),e}(),mZ=function(){function e(t){u(this,e),this._themeTrieElementBrand=void 0,this._mainRule=t,this._children=new Map}return h(e,[{key:"match",value:function(e){if(""===e)return this._mainRule;var t,n,i=e.indexOf(".");-1===i?(t=e,n=""):(t=e.substring(0,i),n=e.substring(i+1));var r=this._children.get(t);return void 0!==r?r.match(n):this._mainRule}},{key:"insert",value:function(t,n,i,r){if(""!==t){var o,a,s=t.indexOf(".");-1===s?(o=t,a=""):(o=t.substring(0,s),a=t.substring(s+1));var l=this._children.get(o);void 0===l&&(l=new e(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,n,i,r)}else this._mainRule.acceptOverwrite(n,i,r)}}]),e}();var yZ,_Z,bZ,kZ,wZ,CZ={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:(vZ={},f(vZ,tD,"#FFFFFE"),f(vZ,nD,"#000000"),f(vZ,mD,"#E5EBF1"),f(vZ,qW,"#D3D3D3"),f(vZ,$W,"#939393"),f(vZ,yD,"#ADD6FF4D"),vZ)},SZ={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:(yZ={},f(yZ,tD,"#1E1E1E"),f(yZ,nD,"#D4D4D4"),f(yZ,mD,"#3A3D41"),f(yZ,qW,"#404040"),f(yZ,$W,"#707070"),f(yZ,yD,"#ADD6FF26"),yZ)},xZ={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:(_Z={},f(_Z,tD,"#000000"),f(_Z,nD,"#FFFFFF"),f(_Z,qW,"#FFFFFF"),f(_Z,$W,"#FFFFFF"),_Z)},LZ={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:(bZ={},f(bZ,tD,"#FFFFFF"),f(bZ,nD,"#292929"),f(bZ,qW,"#292929"),f(bZ,$W,"#292929"),bZ)};!function(e){e.getDefinition=function(e,t){for(var n=e.defaults;ny.isThemeIcon(n);){var i=NZ.getIcon(n.id);if(!i)return;n=i.defaults}return n}}(kZ||(kZ={})),function(e){e.toJSONObject=function(e){return{weight:e.weight,style:e.style,src:e.src.map((function(e){return{format:e.format,location:e.location.toString()}}))}},e.fromJSONObject=function(e){var t=function(e){return Da(e)?e:void 0};if(e&&Array.isArray(e.src)&&e.src.every((function(e){return Da(e.format)&&Da(e.location)})))return{weight:t(e.weight),style:t(e.style),src:e.src.map((function(e){return{format:e.format,location:ed.parse(e.location)}}))}}}(wZ||(wZ={}));var DZ=function(){function e(){u(this,e),this._onDidChange=new Zu,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:Xa("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:Xa("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:"^".concat(ny.iconNameExpression,"$"),enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}return h(e,[{key:"registerIcon",value:function(e,t,n,i){var r=this.iconsById[e];if(r){if(n&&!r.description){r.description=n,this.iconSchema.properties[e].markdownDescription="".concat(n," $(").concat(e,")");var o=this.iconReferenceSchema.enum.indexOf(e);-1!==o&&(this.iconReferenceSchema.enumDescriptions[o]=n),this._onDidChange.fire()}return r}var a={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=a;var s={$ref:"#/definitions/icons"};return i&&(s.deprecationMessage=i),n&&(s.markdownDescription="".concat(n,": $(").concat(e,")")),this.iconSchema.properties[e]=s,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}},{key:"getIcons",value:function(){var e=this;return Object.keys(this.iconsById).map((function(t){return e.iconsById[t]}))}},{key:"getIcon",value:function(e){return this.iconsById[e]}},{key:"getIconSchema",value:function(){return this.iconSchema}},{key:"toString",value:function(){var e=this,t=function(e,t){return e.id.localeCompare(t.id)},n=function(t){for(;ny.isThemeIcon(t.defaults);)t=e.iconsById[t.defaults.id];return"codicon codicon-".concat(t?t.id:"")},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");var r=Object.keys(this.iconsById).map((function(t){return e.iconsById[t]})),o=!0,a=!1,s=void 0;try{for(var l,u=r.filter((function(e){return!!e.description})).sort(t)[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;i.push('|<i class="'.concat(n(c),'"></i>|').concat(c.id,"|").concat(ny.isThemeIcon(c.defaults)?c.defaults.id:c.id,"|").concat(c.description||"","|"))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");var d=!0,h=!1,f=void 0;try{for(var g,v=r.filter((function(e){return!ny.isThemeIcon(e.defaults)})).sort(t)[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;i.push('|<i class="'.concat(n(p),'"></i>|').concat(p.id,"|"))}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}return i.join("\n")}}]),e}(),NZ=new DZ;function IZ(e,t,n,i){return NZ.registerIcon(e,t,n,i)}function EZ(){return NZ}i_.add("base.contributions.icons",NZ),function(){var e=pd();for(var t in e){var n="\\"+e[t].toString(16);NZ.registerIcon(t,{fontCharacter:n})}}();var MZ="vscode://schemas/icons",TZ=i_.as(ok);TZ.registerSchema(MZ,NZ.getIconSchema());var RZ=new Sg((function(){return TZ.notifySchemaChanged(MZ)}),200);NZ.onDidChange((function(){RZ.isScheduled()||RZ.schedule()}));var AZ=IZ("widget-close",bd.close,Xa("widgetClose","Icon for the close action in widgets."));IZ("goto-previous-location",bd.arrowUp,Xa("previousChangeIcon","Icon for goto previous editor location.")),IZ("goto-next-location",bd.arrowDown,Xa("nextChangeIcon","Icon for goto next editor location.")),ny.modify(bd.sync,"spin"),ny.modify(bd.loading,"spin");var PZ=function(){function e(){u(this,e)}return h(e,[{key:"getIcon",value:function(e){for(var t=EZ(),n=e.defaults;ny.isThemeIcon(n);){var i=t.getIcon(n.id);if(!i)return;n=i.defaults}return n}}]),e}(),OZ="vs",FZ="vs-dark",WZ="hc-black",BZ="hc-light",HZ=i_.as(IL),VZ=i_.as(WS),zZ=function(){function e(t,n){u(this,e),this.semanticHighlighting=!1,this.themeData=n;var i=n.base;t.length>0?(UZ(t)?this.id=t:this.id=i+" "+t,this.themeName=t):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}return h(e,[{key:"base",get:function(){return this.themeData.base}},{key:"notifyBaseUpdated",value:function(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}},{key:"getColors",value:function(){if(!this.colors){var e=new Map;for(var t in this.themeData.colors)e.set(t,XC.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){var n=jZ(this.themeData.base);for(var i in n.colors)e.has(i)||e.set(i,XC.fromHex(n.colors[i]))}this.colors=e}return this.colors}},{key:"getColor",value:function(e,t){var n=this.getColors().get(e);return n||(!1!==t?this.getDefault(e):void 0)}},{key:"getDefault",value:function(e){var t=this.defaultColors[e];return t||(t=HZ.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}},{key:"defines",value:function(e){return this.getColors().has(e)}},{key:"type",get:function(){switch(this.base){case OZ:return ES.LIGHT;case WZ:return ES.HIGH_CONTRAST_DARK;case BZ:return ES.HIGH_CONTRAST_LIGHT;default:return ES.DARK}}},{key:"tokenTheme",get:function(){if(!this._tokenTheme){var e=[],t=[];if(this.themeData.inherit){var n=jZ(this.themeData.base);e=n.rules,n.encodedTokensColors&&(t=n.encodedTokensColors)}var i=this.themeData.colors["editor.foreground"],r=this.themeData.colors["editor.background"];if(i||r){var o={token:""};i&&(o.foreground=i),r&&(o.background=r),e.push(o)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=fZ.createFromRawTokenTheme(e,t)}return this._tokenTheme}},{key:"getTokenStyleMetadata",value:function(e,t,n){var i=this.tokenTheme._match([e].concat(t).join(".")).metadata,r=Rx.getForeground(i),o=Rx.getFontStyle(i);return{foreground:r,italic:Boolean(1&o),bold:Boolean(2&o),underline:Boolean(4&o),strikethrough:Boolean(8&o)}}}]),e}();function UZ(e){return e===OZ||e===FZ||e===WZ||e===BZ}function jZ(e){switch(e){case OZ:return CZ;case FZ:return SZ;case WZ:return xZ;case BZ:return LZ}}function KZ(e){var t=jZ(e);return new zZ(e,t)}var qZ=function(e){function t(){var e;u(this,t),(e=l(this,t))._onColorThemeChange=e._register(new Zu),e.onDidColorThemeChange=e._onColorThemeChange.event,e._onProductIconThemeChange=e._register(new Zu),e.onDidProductIconThemeChange=e._onProductIconThemeChange.event,e._environment=Object.create(null),e._builtInProductIconTheme=new PZ,e._autoDetectHighContrast=!0,e._knownThemes=new Map,e._knownThemes.set(OZ,KZ(OZ)),e._knownThemes.set(FZ,KZ(FZ)),e._knownThemes.set(WZ,KZ(WZ)),e._knownThemes.set(BZ,KZ(BZ));var n=e._register(function(e){var t=new Tu,n=t.add(new Zu),i=EZ();return t.add(i.onDidChange((function(){return n.fire()}))),e&&t.add(e.onDidProductIconThemeChange((function(){return n.fire()}))),{dispose:function(){return t.dispose()},onDidChange:n.event,getCSS:function(){var t=e?e.getProductIconTheme():new PZ,n={},r=[],o=[],a=!0,s=!1,l=void 0;try{for(var u,c=i.getIcons()[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value,h=t.getIcon(d);if(h){var f=h.font,g="--vscode-icon-".concat(d.id,"-font-family"),v="--vscode-icon-".concat(d.id,"-content");f?(n[f.id]=f.definition,o.push("".concat(g,": ").concat(bm(f.id),";"),"".concat(v,": '").concat(h.fontCharacter,"';")),r.push(".codicon-".concat(d.id,":before { content: '").concat(h.fontCharacter,"'; font-family: ").concat(bm(f.id),"; }"))):(o.push("".concat(v,": '").concat(h.fontCharacter,"'; ").concat(g,": 'codicon';")),r.push(".codicon-".concat(d.id,":before { content: '").concat(h.fontCharacter,"'; }")))}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}for(var p in n){var m=n[p],y=m.weight?"font-weight: ".concat(m.weight,";"):"",_=m.style?"font-style: ".concat(m.style,";"):"",b=m.src.map((function(e){return"".concat(_m(e.location)," format('").concat(e.format,"')")})).join(", ");r.push("@font-face { src: ".concat(b,"; font-family: ").concat(bm(p),";").concat(y).concat(_," font-display: block; }"))}return r.push(":root { ".concat(o.join(" ")," }")),r.join("\n")}}}(e));return e._codiconCSS=n.getCSS(),e._themeCSS="",e._allCSS="".concat(e._codiconCSS,"\n").concat(e._themeCSS),e._globalStyleElement=null,e._styleElements=[],e._colorMapOverride=null,e.setTheme(OZ),e._onOSSchemeChanged(),e._register(n.onDidChange((function(){e._codiconCSS=n.getCSS(),e._updateCSS()}))),Bf(Fh,"(forced-colors: active)",(function(){e._onOSSchemeChanged()})),e}return p(t,e),h(t,[{key:"registerEditorContainer",value:function(e){return Ap(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}},{key:"_registerRegularEditorContainer",value:function(){var e=this;return this._globalStyleElement||(this._globalStyleElement=jp(void 0,(function(t){t.className="monaco-colors",t.textContent=e._allCSS})),this._styleElements.push(this._globalStyleElement)),Ru.None}},{key:"_registerShadowDomContainer",value:function(e){var t=this,n=jp(e,(function(e){e.className="monaco-colors",e.textContent=t._allCSS}));return this._styleElements.push(n),{dispose:function(){for(var e=0;e<t._styleElements.length;e++)if(t._styleElements[e]===n)return void t._styleElements.splice(e,1)}}}},{key:"defineTheme",value:function(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!UZ(t.base)&&!UZ(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new zZ(e,t)),UZ(e)&&this._knownThemes.forEach((function(t){t.base===e&&t.notifyBaseUpdated()})),this._theme.themeName===e&&this.setTheme(e)}},{key:"getColorTheme",value:function(){return this._theme}},{key:"setColorMapOverride",value:function(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}},{key:"setTheme",value:function(e){var t;t=this._knownThemes.has(e)?this._knownThemes.get(e):this._knownThemes.get(OZ),this._updateActualTheme(t)}},{key:"_updateActualTheme",value:function(e){e&&this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}},{key:"_onOSSchemeChanged",value:function(){if(this._autoDetectHighContrast){var e,t=Fh.matchMedia("(forced-colors: active)").matches;if(t!==RS(this._theme.type))e=AS(this._theme.type)?t?WZ:FZ:t?BZ:OZ,this._updateActualTheme(this._knownThemes.get(e))}}},{key:"setAutoDetectHighContrast",value:function(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}},{key:"_updateThemeOrColorMap",value:function(){var e=this,t=[],n={},i={addRule:function(e){n[e]||(t.push(e),n[e]=!0)}};VZ.getThemingParticipants().forEach((function(t){return t(e._theme,i,e._environment)}));var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=HZ.getColors()[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=this._theme.getColor(c.id,!0);d&&r.push("".concat(DL(c.id),": ").concat(d.toString(),";"))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}i.addRule(".monaco-editor, .monaco-diff-editor, .monaco-component { ".concat(r.join("\n")," }"));var h=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(function(e){for(var t=[],n=1,i=e.length;n<i;n++){var r=e[n];t[n]=".mtk".concat(n," { color: ").concat(r,"; }")}return t.push(".mtki { font-style: italic; }"),t.push(".mtkb { font-weight: bold; }"),t.push(".mtku { text-decoration: underline; text-underline-position: under; }"),t.push(".mtks { text-decoration: line-through; }"),t.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),t.join("\n")}(h)),this._themeCSS=t.join("\n"),this._updateCSS(),Rh.setColorMap(h),this._onColorThemeChange.fire(this._theme)}},{key:"_updateCSS",value:function(){var e=this;this._allCSS="".concat(this._codiconCSS,"\n").concat(this._themeCSS),this._styleElements.forEach((function(t){return t.textContent=e._allCSS}))}},{key:"getFileIconTheme",value:function(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}},{key:"getProductIconTheme",value:function(){return this._builtInProductIconTheme}}]),t}(Ru),GZ=Zm("themeService"),ZZ=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},YZ=function(e,t){return function(n,i){t(n,i,e)}},QZ=function(e){function t(e,n,i){var r;u(this,t),(r=l(this,t))._contextKeyService=e,r._layoutService=n,r._configurationService=i,r._accessibilitySupport=0,r._onDidChangeScreenReaderOptimized=new Zu,r._onDidChangeReducedMotion=new Zu,r._onDidChangeLinkUnderline=new Zu,r._accessibilityModeEnabledContext=yR.bindTo(r._contextKeyService);var o=function(){return r._accessibilityModeEnabledContext.set(r.isScreenReaderOptimized())};r._register(r._configurationService.onDidChangeConfiguration((function(e){e.affectsConfiguration("editor.accessibilitySupport")&&(o(),r._onDidChangeScreenReaderOptimized.fire()),e.affectsConfiguration("workbench.reduceMotion")&&(r._configMotionReduced=r._configurationService.getValue("workbench.reduceMotion"),r._onDidChangeReducedMotion.fire())}))),o(),r._register(r.onDidChangeScreenReaderOptimized((function(){return o()})));var a=Fh.matchMedia("(prefers-reduced-motion: reduce)");return r._systemMotionReduced=a.matches,r._configMotionReduced=r._configurationService.getValue("workbench.reduceMotion"),r._linkUnderlinesEnabled=r._configurationService.getValue("accessibility.underlineLinks"),r.initReducedMotionListeners(a),r.initLinkUnderlineListeners(),r}return p(t,e),h(t,[{key:"initReducedMotionListeners",value:function(e){var t=this;this._register(cp(e,"change",(function(){t._systemMotionReduced=e.matches,"auto"===t._configMotionReduced&&t._onDidChangeReducedMotion.fire()})));var n=function(){var e=t.isMotionReduced();t._layoutService.mainContainer.classList.toggle("reduce-motion",e),t._layoutService.mainContainer.classList.toggle("enable-motion",!e)};n(),this._register(this.onDidChangeReducedMotion((function(){return n()})))}},{key:"initLinkUnderlineListeners",value:function(){var e=this;this._register(this._configurationService.onDidChangeConfiguration((function(t){if(t.affectsConfiguration("accessibility.underlineLinks")){var n=e._configurationService.getValue("accessibility.underlineLinks");e._linkUnderlinesEnabled=n,e._onDidChangeLinkUnderline.fire()}})));var t=function(){var t=e._linkUnderlinesEnabled;e._layoutService.mainContainer.classList.toggle("underline-links",t)};t(),this._register(this.onDidChangeLinkUnderlines((function(){return t()})))}},{key:"onDidChangeLinkUnderlines",value:function(e){return this._onDidChangeLinkUnderline.event(e)}},{key:"onDidChangeScreenReaderOptimized",get:function(){return this._onDidChangeScreenReaderOptimized.event}},{key:"isScreenReaderOptimized",value:function(){var e=this._configurationService.getValue("editor.accessibilitySupport");return"on"===e||"auto"===e&&2===this._accessibilitySupport}},{key:"onDidChangeReducedMotion",get:function(){return this._onDidChangeReducedMotion.event}},{key:"isMotionReduced",value:function(){var e=this._configMotionReduced;return"on"===e||"auto"===e&&this._systemMotionReduced}},{key:"getAccessibilitySupport",value:function(){return this._accessibilitySupport}}]),t}(Ru);QZ=ZZ([YZ(0,Ky),YZ(1,QS),YZ(2,qb)],QZ);var XZ,$Z,JZ=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},eY=function(e,t){return function(n,i){t(n,i,e)}},tY=function(){function e(t,n,i){u(this,e),this._commandService=t,this._keybindingService=n,this._hiddenStates=new nY(i)}return h(e,[{key:"createMenu",value:function(e,t,n){return new oY(e,this._hiddenStates,_({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,this._keybindingService,t)}},{key:"getMenuActions",value:function(e,t,n){var i=new oY(e,this._hiddenStates,_({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,this._keybindingService,t),r=i.getActions(n);return i.dispose(),r}},{key:"resetHiddenStates",value:function(e){this._hiddenStates.reset(e)}}]),e}();tY=JZ([eY(0,ay),eY(1,ZI),eY(2,BF)],tY);var nY=(yt=function(){function e(t){var n=this;u(this,e),this._storageService=t,this._disposables=new Tu,this._onDidChange=new Zu,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{var i=t.get(XZ._key,0,"{}");this._data=JSON.parse(i)}catch(e){this._data=Object.create(null)}this._disposables.add(t.onDidChangeValue(0,XZ._key,this._disposables)((function(){if(!n._ignoreChangeEvent)try{var e=t.get(XZ._key,0,"{}");n._data=JSON.parse(e)}catch(e){console.log("FAILED to read storage after UPDATE",e)}n._onDidChange.fire()})))}return h(e,[{key:"dispose",value:function(){this._onDidChange.dispose(),this._disposables.dispose()}},{key:"_isHiddenByDefault",value:function(e,t){var n;return null!==(n=this._hiddenByDefaultCache.get("".concat(e.id,"/").concat(t)))&&void 0!==n&&n}},{key:"setDefaultState",value:function(e,t,n){this._hiddenByDefaultCache.set("".concat(e.id,"/").concat(t),n)}},{key:"isHidden",value:function(e,t){var n,i,r=this._isHiddenByDefault(e,t),o=null!==(i=null===(n=this._data[e.id])||void 0===n?void 0:n.includes(t))&&void 0!==i&&i;return r?!o:o}},{key:"updateHidden",value:function(e,t,n){this._isHiddenByDefault(e,t)&&(n=!n);var i=this._data[e.id];if(n)i?i.indexOf(t)<0&&i.push(t):this._data[e.id]=[t];else if(i){var r=i.indexOf(t);r>=0&&function(e,t){var n=e.length-1;t<n&&(e[t]=e[n]),e.pop()}(i,r),0===i.length&&delete this._data[e.id]}this._persist()}},{key:"reset",value:function(e){if(void 0===e)this._data=Object.create(null),this._persist();else{var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value.id;this._data[a]&&delete this._data[a]}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}this._persist()}}},{key:"_persist",value:function(){try{this._ignoreChangeEvent=!0;var e=JSON.stringify(this._data);this._storageService.store(XZ._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}}]),e}(),XZ=yt,yt._key="menu.hiddenCommands",yt);nY=XZ=JZ([eY(0,BF)],nY);var iY=function(){function e(t,n){u(this,e),this._id=t,this._collectContextKeysForSubmenus=n,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}return h(e,[{key:"allMenuIds",get:function(){return this._allMenuIds}},{key:"structureContextKeys",get:function(){return this._structureContextKeys}},{key:"preconditionContextKeys",get:function(){return this._preconditionContextKeys}},{key:"toggledContextKeys",get:function(){return this._toggledContextKeys}},{key:"refresh",value:function(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();var e,t=this._sort(g_.getMenuItems(this._id)),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=s.group||"";e&&e[0]===l||(e=[l,[]],this._menuGroups.push(e)),e[1].push(s),this._collectContextKeysAndSubmenuIds(s)}}catch(t){i=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this._allMenuIds.add(this._id)}},{key:"_sort",value:function(e){return e}},{key:"_collectContextKeysAndSubmenuIds",value:function(t){if(e._fillInKbExprKeys(t.when,this._structureContextKeys),c_(t)){if(t.command.precondition&&e._fillInKbExprKeys(t.command.precondition,this._preconditionContextKeys),t.command.toggled){var n=t.command.toggled.condition||t.command.toggled;e._fillInKbExprKeys(n,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(g_.getMenuItems(t.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(t.submenu))}}],[{key:"_fillInKbExprKeys",value:function(e,t){if(e){var n=!0,i=!1,r=void 0;try{for(var o,a=e.keys()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.add(s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}}]),e}(),rY=$Z=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t,[e,i]))._hiddenStates=n,s._commandService=r,s._keybindingService=o,s._contextKeyService=a,s.refresh(),s}return p(t,e),h(t,[{key:"createActionGroups",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=this._menuGroups[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2),l=s[0],u=s[1],c=void 0,d=!0,h=!1,f=void 0;try{for(var g,v=u[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;if(this._contextKeyService.contextMatchesRules(p.when)){var m=c_(p);m&&this._hiddenStates.setDefaultState(this._id,p.command.id,!!p.isHiddenByDefault);var y=aY(this._id,m?p.command:p,this._hiddenStates);if(m){var _=sY(this._commandService,this._keybindingService,p.command.id,p.when);(null!=c?c:c=[]).push(new p_(p.command,p.alt,e,y,_,this._contextKeyService,this._commandService))}else{var b,k=new $Z(p.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),w=(b=ey).join.apply(b,x(k.map((function(e){return e[1]}))));w.length>0&&(null!=c?c:c=[]).push(new v_(p,y,w))}}}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}c&&c.length>0&&t.push([l,c])}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}},{key:"_sort",value:function(e){return e.sort($Z._compareMenuItems)}}],[{key:"_compareMenuItems",value:function(e,t){var n=e.group,i=t.group;if(n!==i){if(!n)return 1;if(!i)return-1;if("navigation"===n)return-1;if("navigation"===i)return 1;var r=n.localeCompare(i);if(0!==r)return r}var o=e.order||0,a=t.order||0;return o<a?-1:o>a?1:$Z._compareTitles(c_(e)?e.command.title:e.title,c_(t)?t.command.title:t.title)}},{key:"_compareTitles",value:function(e,t){var n="string"==typeof e?e:e.original,i="string"==typeof t?t:t.original;return n.localeCompare(i)}}]),t}(iY);rY=$Z=JZ([eY(3,ay),eY(4,ZI),eY(5,Ky)],rY);var oY=function(){function e(t,n,i,r,o,a){var s=this;u(this,e),this._disposables=new Tu,this._menuInfo=new rY(t,n,i.emitEventsForSubmenuChanges,r,o,a);var l=new Sg((function(){s._menuInfo.refresh(),s._onDidChange.fire({menu:s,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})}),i.eventDebounceDelay);this._disposables.add(l),this._disposables.add(g_.onDidChangeMenu((function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=s._menuInfo.allMenuIds[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(e.has(a)){l.schedule();break}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}})));var c=this._disposables.add(new Tu);this._onDidChange=new Xu({onWillAddFirstListener:function(){c.add(a.onDidChangeContext((function(e){var t=e.affectsSome(s._menuInfo.structureContextKeys),n=e.affectsSome(s._menuInfo.preconditionContextKeys),i=e.affectsSome(s._menuInfo.toggledContextKeys);(t||n||i)&&s._onDidChange.fire({menu:s,isStructuralChange:t,isEnablementChange:n,isToggleChange:i})}))),c.add(n.onDidChange((function(e){s._onDidChange.fire({menu:s,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})})))},onDidRemoveLastListener:c.clear.bind(c),delay:i.eventDebounceDelay,merge:function(e){var t=!1,n=!1,i=!1,r=!0,o=!1,a=void 0;try{for(var l,u=e[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;if(t=t||c.isStructuralChange,n=n||c.isEnablementChange,i=i||c.isToggleChange,t&&n&&i)break}}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return{menu:s,isStructuralChange:t,isEnablementChange:n,isToggleChange:i}}}),this.onDidChange=this._onDidChange.event}return h(e,[{key:"getActions",value:function(e){return this._menuInfo.createActionGroups(e)}},{key:"dispose",value:function(){this._disposables.dispose(),this._onDidChange.dispose()}}]),e}();function aY(e,t,n){var i=function(e){return void 0!==e.submenu}(t)?t.submenu.id:t.id,r="string"==typeof t.title?t.title:t.title.value,o=oy({id:"hide/".concat(e.id,"/").concat(i),label:Xa("hide.label","Hide '{0}'",r),run:function(){n.updateHidden(e,i,!0)}}),a=oy({id:"toggle/".concat(e.id,"/").concat(i),label:r,get checked(){return!n.isHidden(e,i)},run:function(){n.updateHidden(e,i,!!this.checked)}});return{hide:o,toggle:a,get isHidden(){return!a.checked}}}function sY(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return oy({id:"configureKeybinding/".concat(n),label:Xa("configure keybinding","Configure Keybinding"),enabled:r,run:function(){var r=!!!t.lookupKeybinding(n)&&i?i.serialize():void 0;e.executeCommand("workbench.action.openGlobalKeybindings","@command:".concat(n)+(r?" +when:".concat(r):""))}})}oY=JZ([eY(3,ay),eY(4,ZI),eY(5,Ky)],oY);var lY,uY=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},cY=function(e,t){return function(n,i){t(n,i,e)}},dY="application/vnd.code.resources",hY=(_t=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).layoutService=e,i.logService=n,i.mapTextToType=new Map,i.findText="",i.resources=[],i.resourcesStateHash=void 0,(jf||Kf)&&i.installWebKitWriteTextWorkaround(),i._register(Au.runAndSubscribe(op,(function(e){var t=e.window;e.disposables.add(cp(t.document,"copy",(function(){return i.clearResourcesState()})))}),{window:Fh,disposables:i._store})),i}return p(t,e),h(t,[{key:"installWebKitWriteTextWorkaround",value:function(){var e=this,t=function(){var t=new Ng;e.webKitPendingClipboardWritePromise&&!e.webKitPendingClipboardWritePromise.isSettled&&e.webKitPendingClipboardWritePromise.cancel(),e.webKitPendingClipboardWritePromise=t;var n=e;Hp().navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(function(){var e=s((function(e){return E(this,(function(i){return e instanceof Error&&"NotAllowedError"===e.name&&t.isRejected||n.logService.error(e),[2]}))}));return function(t){return e.apply(this,arguments)}}())};this._register(Au.runAndSubscribe(this.layoutService.onDidAddContainer,(function(e){var n=e.container,i=e.disposables;i.add(cp(n,"click",t)),i.add(cp(n,"keydown",t))}),{container:this.layoutService.mainContainer,disposables:this._store}))}},{key:"writeText",value:function(e,t){var n=this;return s((function(){var i;return E(this,(function(r){switch(r.label){case 0:if(n.clearResourcesState(),t)return n.mapTextToType.set(t,e),[2];if(n.webKitPendingClipboardWritePromise)return[2,n.webKitPendingClipboardWritePromise.complete(e)];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Hp().navigator.clipboard.writeText(e)];case 2:return[2,r.sent()];case 3:return i=r.sent(),console.error(i),[3,4];case 4:return n.fallbackWriteText(e),[2]}}))}))()}},{key:"fallbackWriteText",value:function(e){var t=Bp(),n=t.activeElement,i=t.body.appendChild(gm("textarea",{"aria-hidden":!0}));i.style.height="1px",i.style.width="1px",i.style.position="absolute",i.value=e,i.focus(),i.select(),t.execCommand("copy"),Jp(n)&&n.focus(),i.remove()}},{key:"readText",value:function(e){var t=this;return s((function(){var n;return E(this,(function(i){switch(i.label){case 0:if(e)return[2,t.mapTextToType.get(e)||""];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Hp().navigator.clipboard.readText()];case 2:return[2,i.sent()];case 3:return n=i.sent(),console.error(n),[3,4];case 4:return[2,""]}}))}))()}},{key:"readFindText",value:function(){var e=this;return s((function(){return E(this,(function(t){return[2,e.findText]}))}))()}},{key:"writeFindText",value:function(e){var t=this;return s((function(){return E(this,(function(n){return t.findText=e,[2]}))}))()}},{key:"readResources",value:function(){var e=this;return s((function(){var t,n,i,r,o,a,s,l,u,c,d,h;return E(this,(function(f){switch(f.label){case 0:return f.trys.push([0,11,,12]),[4,Hp().navigator.clipboard.read()];case 1:t=f.sent(),n=!0,i=!1,r=void 0,f.label=2;case 2:f.trys.push([2,8,9,10]),o=t[Symbol.iterator](),f.label=3;case 3:return(n=(a=o.next()).done)?[3,7]:(s=a.value).types.includes("web ".concat(dY))?[4,s.getType("web ".concat(dY))]:[3,6];case 4:return l=f.sent(),c=JSON.parse,[4,l.text()];case 5:return u=c.apply(JSON,[f.sent()]).map((function(e){return ed.from(e)})),[2,u];case 6:return n=!0,[3,3];case 7:return[3,10];case 8:return d=f.sent(),i=!0,r=d,[3,10];case 9:try{n||null==o.return||o.return()}finally{if(i)throw r}return[7];case 10:return[3,12];case 11:return f.sent(),[3,12];case 12:return[4,e.computeResourcesStateHash()];case 13:return h=f.sent(),e.resourcesStateHash!==h&&e.clearResourcesState(),[2,e.resources]}}))}))()}},{key:"computeResourcesStateHash",value:function(){var e=this;return s((function(){return E(this,(function(t){switch(t.label){case 0:return 0===e.resources.length?[2,void 0]:[4,e.readText()];case 1:return[2,Kv(t.sent().substring(0,lY.MAX_RESOURCE_STATE_SOURCE_LENGTH))]}}))}))()}},{key:"clearInternalState",value:function(){this.clearResourcesState()}},{key:"clearResourcesState",value:function(){this.resources=[],this.resourcesStateHash=void 0}}]),t}(Ru),lY=_t,_t.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,_t);hY=lY=uY([cY(0,QS),cY(1,k_)],hY);var fY=Zm("clipboardService"),gY=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},vY=function(e,t){return function(n,i){t(n,i,e)}},pY="data-keybinding-context",mY=function(){function e(t,n){u(this,e),this._id=t,this._parent=n,this._value=Object.create(null),this._value._contextId=t}return h(e,[{key:"value",get:function(){return _({},this._value)}},{key:"setValue",value:function(e,t){return this._value[e]!==t&&(this._value[e]=t,!0)}},{key:"removeValue",value:function(e){return e in this._value&&(delete this._value[e],!0)}},{key:"getValue",value:function(e){var t=this._value[e];return void 0===t&&this._parent?this._parent.getValue(e):t}}]),e}(),yY=function(e){function t(){return u(this,t),l(this,t,[-1,null])}return p(t,e),h(t,[{key:"setValue",value:function(e,t){return!1}},{key:"removeValue",value:function(e){return!1}},{key:"getValue",value:function(e){}}]),t}(mY);yY.INSTANCE=new yY;var _Y=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[e,null]))._configurationService=n,r._values=jA.forConfigKeys(),r._listener=r._configurationService.onDidChangeConfiguration((function(e){if(7===e.source){var t=Array.from(r._values,(function(e){return C(e,1)[0]}));r._values.clear(),i.fire(new wY(t))}else{var n=[],o=!0,a=!1,s=void 0;try{for(var l,u=e.affectedKeys[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c,d=l.value,h="config.".concat(d),f=r._values.findSuperstr(h);if(void 0!==f)(c=n).push.apply(c,x(Ts.map(f,(function(e){return C(e,1)[0]})))),r._values.deleteSuperstr(h);r._values.has(h)&&(n.push(h),r._values.delete(h))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}i.fire(new wY(n))}})),r}return p(t,e),h(t,[{key:"dispose",value:function(){this._listener.dispose()}},{key:"getValue",value:function(e){if(0!==e.indexOf(t._keyPrefix))return g(v(t.prototype),"getValue",this).call(this,e);if(this._values.has(e))return this._values.get(e);var n=e.substr(t._keyPrefix.length),i=this._configurationService.getValue(n),r=void 0;switch(void 0===i?"undefined":L(i)){case"number":case"boolean":case"string":r=i;break;default:r=Array.isArray(i)?JSON.stringify(i):i}return this._values.set(e,r),r}},{key:"setValue",value:function(e,n){return g(v(t.prototype),"setValue",this).call(this,e,n)}},{key:"removeValue",value:function(e){return g(v(t.prototype),"removeValue",this).call(this,e)}}]),t}(mY);_Y._keyPrefix="config.";var bY=function(){function e(t,n,i){u(this,e),this._service=t,this._key=n,this._defaultValue=i,this.reset()}return h(e,[{key:"set",value:function(e){this._service.setContext(this._key,e)}},{key:"reset",value:function(){void 0===this._defaultValue?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}},{key:"get",value:function(){return this._service.getContextKeyValue(this._key)}}]),e}(),kY=function(){function e(t){u(this,e),this.key=t}return h(e,[{key:"affectsSome",value:function(e){return e.has(this.key)}},{key:"allKeysContainedIn",value:function(e){return this.affectsSome(e)}}]),e}(),wY=function(){function e(t){u(this,e),this.keys=t}return h(e,[{key:"affectsSome",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this.keys[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(e.has(a))return!0}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return!1}},{key:"allKeysContainedIn",value:function(e){return this.keys.every((function(t){return e.has(t)}))}}]),e}(),CY=function(){function e(t){u(this,e),this.events=t}return h(e,[{key:"affectsSome",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this.events[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){if(r.value.affectsSome(e))return!0}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return!1}},{key:"allKeysContainedIn",value:function(e){return this.events.every((function(t){return t.allKeysContainedIn(e)}))}}]),e}();var SY=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._onDidChangeContext=n._register(new Qu({merge:function(e){return new CY(e)}})),n.onDidChangeContext=n._onDidChangeContext.event,n._isDisposed=!1,n._myContextId=e,n}return p(t,e),h(t,[{key:"createKey",value:function(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new bY(this,e,t)}},{key:"bufferChangeEvents",value:function(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}},{key:"createScoped",value:function(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new LY(this,e)}},{key:"contextMatchesRules",value:function(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");var t=this.getContextValuesContainer(this._myContextId);return!e||e.evaluate(t)}},{key:"getContextKeyValue",value:function(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}},{key:"setContext",value:function(e,t){if(!this._isDisposed){var n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new kY(e))}}},{key:"removeContext",value:function(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new kY(e))}},{key:"getContext",value:function(e){return this._isDisposed?yY.INSTANCE:this.getContextValuesContainer(function(e){for(;e;){if(e.hasAttribute(pY)){var t=e.getAttribute(pY);return t?parseInt(t,10):NaN}e=e.parentElement}return 0}(e))}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._isDisposed=!0}}]),t}(Ru),xY=function(e){function t(e){var n;u(this,t),(n=l(this,t,[0]))._contexts=new Map,n._lastContextId=0;var i=n._register(new _Y(n._myContextId,e,n._onDidChangeContext));return n._contexts.set(n._myContextId,i),n}return p(t,e),h(t,[{key:"getContextValuesContainer",value:function(e){return this._isDisposed?yY.INSTANCE:this._contexts.get(e)||yY.INSTANCE}},{key:"createChildContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._myContextId;if(this._isDisposed)throw new Error("ContextKeyService has been disposed");var t=++this._lastContextId;return this._contexts.set(t,new mY(t,this.getContextValuesContainer(e))),t}},{key:"disposeContext",value:function(e){this._isDisposed||this._contexts.delete(e)}}]),t}(SY);xY=gY([vY(0,qb)],xY);var LY=function(e){function t(e,n){var i;if(u(this,t),(i=l(this,t,[e.createChildContext()]))._parentChangeListener=i._register(new Pu),i._parent=e,i._updateParentChangeListener(),i._domNode=n,i._domNode.hasAttribute(pY)){var r="";i._domNode.classList&&(r=Array.from(i._domNode.classList.values()).join(", ")),console.error("Element already has context attribute".concat(r?": "+r:""))}return i._domNode.setAttribute(pY,String(i._myContextId)),i}return p(t,e),h(t,[{key:"_updateParentChangeListener",value:function(){var e=this;this._parentChangeListener.value=this._parent.onDidChangeContext((function(t){(function(e,t){return e.allKeysContainedIn(new Set(Object.keys(t)))})(t,e._parent.getContextValuesContainer(e._myContextId).value)||e._onDidChangeContext.fire(t)}))}},{key:"dispose",value:function(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(pY),g(v(t.prototype),"dispose",this).call(this))}},{key:"getContextValuesContainer",value:function(e){return this._isDisposed?yY.INSTANCE:this._parent.getContextValuesContainer(e)}},{key:"createChildContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._myContextId;if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}},{key:"disposeContext",value:function(e){this._isDisposed||this._parent.disposeContext(e)}}]),t}(SY);sy.registerCommand("_setContext",(function(e,t,n){e.get(Ky).createKey(String(t),function(e){return za(e,(function(e){return"object"===(void 0===e?"undefined":L(e))&&1===e.$mid?ed.revive(e).toString():e instanceof ed?e.toString():void 0}))}(n))})),sy.registerCommand({id:"getContextKeyInfo",handler:function(){return x(jy.all()).sort((function(e,t){return e.key.localeCompare(t.key)}))},metadata:{description:Xa("getContextKeyInfo","A command that returns information about context keys"),args:[]}}),sy.registerCommand("_generateContextKeyInfo",(function(){var e=[],t=new Set,n=!0,i=!1,r=void 0;try{for(var o,a=jy.all()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.has(s.key)||(t.add(s.key),e.push(s))}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}e.sort((function(e,t){return e.key.localeCompare(t.key)})),console.log(JSON.stringify(e,void 0,2))}));var DY=function e(t,n){u(this,e),this.key=t,this.data=n,this.incoming=new Map,this.outgoing=new Map},NY=function(){function e(t){u(this,e),this._hashFn=t,this._nodes=new Map}return h(e,[{key:"roots",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this._nodes.values()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;0===a.outgoing.size&&e.push(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}},{key:"insertEdge",value:function(e,t){var n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}},{key:"removeNode",value:function(e){var t=this._hashFn(e);this._nodes.delete(t);var n=!0,i=!1,r=void 0;try{for(var o,a=this._nodes.values()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.outgoing.delete(t),s.incoming.delete(t)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},{key:"lookupOrInsertNode",value:function(e){var t=this._hashFn(e),n=this._nodes.get(t);return n||(n=new DY(t,e),this._nodes.set(t,n)),n}},{key:"isEmpty",value:function(){return 0===this._nodes.size}},{key:"toString",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this._nodes[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=C(r.value,2),s=a[0],l=a[1];e.push("".concat(s,"\n\t(-> incoming)[").concat(x(l.incoming.keys()).join(", "),"]\n\t(outgoing ->)[").concat(x(l.outgoing.keys()).join(","),"]\n"))}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e.join("\n")}},{key:"findCycleSlow",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this._nodes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=C(i.value,2),a=o[0],s=o[1],l=new Set([a]),u=this._findCycle(s,l);if(u)return u}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"_findCycle",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=e.outgoing[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2),l=s[0],u=s[1];if(t.has(l))return x(t).concat([l]).join(" -> ");t.add(l);var c=this._findCycle(u,t);if(c)return c;t.delete(l)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}]),e}(),IY=function(){function e(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];u(this,e),this._entries=new Map;var r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=C(s.value,2),d=c[0],h=c[1];this.set(d,h)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}return h(e,[{key:"set",value:function(e,t){var n=this._entries.get(e);return this._entries.set(e,t),n}},{key:"get",value:function(e){return this._entries.get(e)}}]),e}(),EY=function(e){function t(e){var n,i;return u(this,t),(n=l(this,t,["cyclic dependency between services"])).message=null!==(i=e.findCycleSlow())&&void 0!==i?i:"UNABLE to detect cycle, dumping graph: \n".concat(e.toString()),n}return p(t,e),t}(N(Error)),MY=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new IY,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];u(this,e),this._services=n,this._strict=i,this._parent=r,this._enableTracing=o,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(Gm,this),this._globalGraph=o?null!==(t=null==r?void 0:r._globalGraph)&&void 0!==t?t:new NY((function(e){return e})):void 0}return h(e,[{key:"dispose",value:function(){if(!this._isDisposed){this._isDisposed=!0,Iu(this._children),this._children.clear();var e=!0,t=!1,n=void 0;try{for(var i,r=this._servicesToMaybeDispose[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;Nu(o)&&o.dispose()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this._servicesToMaybeDispose.clear()}}},{key:"_throwIfDisposed",value:function(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}},{key:"createChild",value:function(t,n){this._throwIfDisposed();var i=this,r=new(function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"dispose",value:function(){i._children.delete(r),g(v(t.prototype),"dispose",this).call(this)}}]),t}(e))(t,this._strict,this,this._enableTracing);return this._children.add(r),null==n||n.add(r),r}},{key:"invokeFunction",value:function(e){for(var t=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this._throwIfDisposed();var o=TY.traceInvocation(this._enableTracing,e),a=!1;try{var s={get:function(e){if(a)throw Cu("service accessor is only valid during the invocation of its target method");var n=t._getOrCreateServiceInstance(e,o);if(!n)throw new Error("[invokeFunction] unknown service '".concat(e,"'"));return n}};return e.apply(void 0,[s].concat(x(i)))}finally{a=!0,o.stop()}}},{key:"createInstance",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,o;return this._throwIfDisposed(),e instanceof ek?(r=TY.traceCreation(this._enableTracing,e.ctor),o=this._createInstance(e.ctor,e.staticArguments.concat(n),r)):(r=TY.traceCreation(this._enableTracing,e),o=this._createInstance(e,n,r)),r.stop(),o}},{key:"_createInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=Bm.getServiceDependencies(e).sort((function(e,t){return e.index-t.index})),r=[],o=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=this._getOrCreateServiceInstance(c.id,n);d||this._throwIfStrict("[createInstance] ".concat(e.name," depends on UNKNOWN service ").concat(c.id,"."),!1),r.push(d)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var h=i.length>0?i[0].index:t.length;if(t.length!==h){console.trace("[createInstance] First service dependency of ".concat(e.name," at position ").concat(h+1," conflicts with ").concat(t.length," static arguments"));var f=h-t.length;t=f>0?t.concat(new Array(f)):t.slice(0,h)}return Reflect.construct(e,t.concat(r))}},{key:"_setCreatedServiceInstance",value:function(e,t){if(this._services.get(e)instanceof ek)this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setCreatedServiceInstance(e,t)}}},{key:"_getServiceInstanceOrDescriptor",value:function(e){var t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}},{key:"_getOrCreateServiceInstance",value:function(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));var n=this._getServiceInstanceOrDescriptor(e);return n instanceof ek?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}},{key:"_safeCreateAndCacheServiceInstance",value:function(e,t,n){if(this._activeInstantiations.has(e))throw new Error("illegal state - RECURSIVELY instantiating service '".concat(e,"'"));this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}},{key:"_createAndCacheServiceInstance",value:function(e,t,n){for(var i=new NY((function(e){return e.id.toString()})),r=0,o=[{id:e,desc:t,_trace:n}],a=new Set;o.length;){var s=o.pop();if(!a.has(String(s.id))){if(a.add(String(s.id)),i.lookupOrInsertNode(s),r++>1e3)throw new EY(i);var l=!0,u=!1,c=void 0;try{for(var d,h=Bm.getServiceDependencies(s.desc.ctor)[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f,g=d.value,v=this._getServiceInstanceOrDescriptor(g.id);if(v||this._throwIfStrict("[createInstance] ".concat(e," depends on ").concat(g.id," which is NOT registered."),!0),null===(f=this._globalGraph)||void 0===f||f.insertEdge(String(s.id),String(g.id)),v instanceof ek){var p={id:g.id,desc:v,_trace:s._trace.branch(g.id,!0)};i.insertEdge(s,p),o.push(p)}}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}}for(;;){var m=i.roots();if(0===m.length){if(!i.isEmpty())throw new EY(i);break}var y=!0,_=!1,b=void 0;try{for(var k,w=m[Symbol.iterator]();!(y=(k=w.next()).done);y=!0){var C=k.value.data;if(this._getServiceInstanceOrDescriptor(C.id)instanceof ek){var S=this._createServiceInstanceWithOwner(C.id,C.desc.ctor,C.desc.staticArguments,C.desc.supportsDelayedInstantiation,C._trace);this._setCreatedServiceInstance(C.id,S)}i.removeNode(C)}}catch(e){_=!0,b=e}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}}return this._getServiceInstanceOrDescriptor(e)}},{key:"_createServiceInstanceWithOwner",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(this._services.get(e)instanceof ek)return this._createServiceInstance(e,t,n,i,r,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,r);throw new Error("illegalState - creating UNKNOWN service instance ".concat(t.name))}},{key:"_createServiceInstance",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;if(arguments.length>3?arguments[3]:void 0){var a=new e(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(t);var s=new Map,l=new Dg((function(){var e=a._createInstance(n,i,r),t=!0,l=!1,u=void 0;try{for(var c,d=s[Symbol.iterator]();!(t=(c=d.next()).done);t=!0){var h=C(c.value,2),f=h[0],g=h[1],v=e[f];if("function"==typeof v){var p=!0,m=!1,y=void 0;try{for(var _,b=g[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){var k=_.value;k.disposable=v.apply(e,k.listener)}}catch(e){m=!0,y=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw y}}}}}catch(e){l=!0,u=e}finally{try{t||null==d.return||d.return()}finally{if(l)throw u}}return s.clear(),o.add(e),e}));return new Proxy(Object.create(null),{get:function(e,t){if(!l.isInitialized&&"string"==typeof t&&(t.startsWith("onDid")||t.startsWith("onWill"))){var n=s.get(t);n||(n=new Hs,s.set(t,n));return function(e,i,r){if(l.isInitialized)return l.value[t](e,i,r);var o={listener:[e,i,r],disposable:void 0},a=n.push(o),s=Mu((function(){var e;a(),null===(e=o.disposable)||void 0===e||e.dispose()}));return s}}if(t in e)return e[t];var i=l.value,r=i[t];return"function"!=typeof r||(r=r.bind(i),e[t]=r),r},set:function(e,t,n){return l.value[t]=n,!0},getPrototypeOf:function(e){return n.prototype}})}var u=this._createInstance(n,i,r);return o.add(u),u}},{key:"_throwIfStrict",value:function(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}]),e}(),TY=function(){function e(t,n){u(this,e),this.type=t,this.name=n,this._start=Date.now(),this._dep=[]}return h(e,[{key:"branch",value:function(t,n){var i=new e(3,t.toString());return this._dep.push([t,n,i]),i}},{key:"stop",value:function(){var t=Date.now()-this._start;e._totals+=t;var n=!1;var i=["".concat(1===this.type?"CREATE":"CALL"," ").concat(this.name),"".concat(function e(t,i){var r=[],o=new Array(t+1).join("\t"),a=!0,s=!1,l=void 0;try{for(var u,c=i._dep[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=C(u.value,3),h=d[0],f=d[1],g=d[2];if(f&&g){n=!0,r.push("".concat(o,"CREATES -> ").concat(h));var v=e(t+1,g);v&&r.push(v)}else r.push("".concat(o,"uses -> ").concat(h))}}catch(t){s=!0,l=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return r.join("\n")}(1,this)),"DONE, took ".concat(t.toFixed(2),"ms (grand total ").concat(e._totals.toFixed(2),"ms)")];(t>2||n)&&e.all.add(i.join("\n"))}}],[{key:"traceInvocation",value:function(t,n){return t?new e(2,n.name||(new Error).stack.split("\n").slice(3,4).join("\n")):e._None}},{key:"traceCreation",value:function(t,n){return t?new e(1,n.name):e._None}}]),e}();TY.all=new Set,TY._None=new(function(e){function t(){return u(this,t),l(this,t,[0,null])}return p(t,e),h(t,[{key:"stop",value:function(){}},{key:"branch",value:function(){return this}}]),t}(TY)),TY._totals=0;var RY=new Set([Pv.inMemory,Pv.vscodeSourceControl,Pv.walkThrough,Pv.walkThroughSnippet,Pv.vscodeChatCodeBlock]),AY=function(){function e(){u(this,e),this._byResource=new cw,this._byOwner=new Map}return h(e,[{key:"set",value:function(e,t,n){var i=this._byResource.get(e);i||(i=new Map,this._byResource.set(e,i)),i.set(t,n);var r=this._byOwner.get(t);r||(r=new cw,this._byOwner.set(t,r)),r.set(e,n)}},{key:"get",value:function(e,t){var n=this._byResource.get(e);return null==n?void 0:n.get(t)}},{key:"delete",value:function(e,t){var n=!1,i=!1,r=this._byResource.get(e);r&&(n=r.delete(t));var o=this._byOwner.get(t);if(o&&(i=o.delete(e)),n!==i)throw new Error("illegal state");return n&&i}},{key:"values",value:function(e){var t,n,i,r,o;return"string"==typeof e?null!==(i=null===(n=this._byOwner.get(e))||void 0===n?void 0:n.values())&&void 0!==i?i:Ts.empty():ed.isUri(e)?null!==(o=null===(r=this._byResource.get(e))||void 0===r?void 0:r.values())&&void 0!==o?o:Ts.empty():Ts.map((t=Ts).concat.apply(t,x(this._byOwner.values())),(function(e){return e[1]}))}}]),e}(),PY=function(){function e(t){u(this,e),this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new cw,this._service=t,this._subscription=t.onMarkerChanged(this._update,this)}return h(e,[{key:"dispose",value:function(){this._subscription.dispose()}},{key:"_update",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=this._data.get(a);s&&this._substract(s);var l=this._resourceStats(a);this._add(l),this._data.set(a,l)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"_resourceStats",value:function(e){var t={errors:0,warnings:0,infos:0,unknowns:0};if(RY.has(e.scheme))return t;var n=!0,i=!1,r=void 0;try{for(var o,a=this._service.read({resource:e})[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value.severity;s===EW.Error?t.errors+=1:s===EW.Warning?t.warnings+=1:s===EW.Info?t.infos+=1:t.unknowns+=1}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}},{key:"_substract",value:function(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}},{key:"_add",value:function(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}]),e}(),OY=function(){function e(){u(this,e),this._onMarkerChanged=new Xu({delay:0,merge:e._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new AY,this._stats=new PY(this)}return h(e,[{key:"dispose",value:function(){this._stats.dispose(),this._onMarkerChanged.dispose()}},{key:"remove",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=(t||[])[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this.changeOne(e,s,[])}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},{key:"changeOne",value:function(t,n,i){if(la(i)){this._data.delete(n,t)&&this._onMarkerChanged.fire([n])}else{var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=e._toMarker(t,n,c);d&&r.push(d)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}this._data.set(n,t,r),this._onMarkerChanged.fire([n])}}},{key:"changeAll",value:function(t,n){var i=[],r=this._data.values(t);if(r){var o=!0,a=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=Ts.first(c);d&&(i.push(d.resource),this._data.delete(d.resource,t))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}if(ua(n)){var h=new cw,f=!0,g=!1,v=void 0;try{for(var p,m=n[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value,_=y.resource,b=y.marker,k=e._toMarker(t,_,b);if(k){var w=h.get(_);w?w.push(k):(h.set(_,[k]),i.push(_))}}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}var S=!0,x=!1,L=void 0;try{for(var D,N=h[Symbol.iterator]();!(S=(D=N.next()).done);S=!0){var I=C(D.value,2),E=I[0],M=I[1];this._data.set(E,t,M)}}catch(e){x=!0,L=e}finally{try{S||null==N.return||N.return()}finally{if(x)throw L}}}i.length>0&&this._onMarkerChanged.fire(i)}},{key:"read",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.create(null),n=t.owner,i=t.resource,r=t.severities,o=t.take;if((!o||o<0)&&(o=-1),n&&i){var a=this._data.get(i,n);if(a){var s=[],l=!0,u=!1,c=void 0;try{for(var d,h=a[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;if(e._accept(f,r)){var g=s.push(f);if(o>0&&g===o)break}}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return s}return[]}if(n||i){var v=this._data.values(null!=i?i:n),p=[],m=!0,y=!1,_=void 0;try{for(var b,k=v[Symbol.iterator]();!(m=(b=k.next()).done);m=!0){var w=b.value,C=!0,S=!1,x=void 0;try{for(var L,D=w[Symbol.iterator]();!(C=(L=D.next()).done);C=!0){var N=L.value;if(e._accept(N,r)){var I=p.push(N);if(o>0&&I===o)return p}}}catch(e){S=!0,x=e}finally{try{C||null==D.return||D.return()}finally{if(S)throw x}}}}catch(e){y=!0,_=e}finally{try{m||null==k.return||k.return()}finally{if(y)throw _}}return p}var E=[],M=!0,T=!1,R=void 0;try{for(var A,P=this._data.values()[Symbol.iterator]();!(M=(A=P.next()).done);M=!0){var O=A.value,F=!0,W=!1,B=void 0;try{for(var H,V=O[Symbol.iterator]();!(F=(H=V.next()).done);F=!0){var z=H.value;if(e._accept(z,r)){var U=E.push(z);if(o>0&&U===o)return E}}}catch(e){W=!0,B=e}finally{try{F||null==V.return||V.return()}finally{if(W)throw B}}}}catch(e){T=!0,R=e}finally{try{M||null==P.return||P.return()}finally{if(T)throw R}}return E}}],[{key:"_toMarker",value:function(e,t,n){var i=n.code,r=n.severity,o=n.message,a=n.source,s=n.startLineNumber,l=n.startColumn,u=n.endLineNumber,c=n.endColumn,d=n.relatedInformation,h=n.tags;if(o)return{resource:t,owner:e,code:i,severity:r,message:o,source:a,startLineNumber:s=s>0?s:1,startColumn:l=l>0?l:1,endLineNumber:u=u>=s?u:s,endColumn:c=c>0?c:l,relatedInformation:d,tags:h}}},{key:"_accept",value:function(e,t){return void 0===t||(t&e.severity)===e.severity}},{key:"_merge",value:function(e){var t=new cw,n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=!0,u=!1,c=void 0;try{for(var d,h=s[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;t.set(f,!0)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return Array.from(t.keys())}}]),e}(),FY=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).logService=e,n._configurationModel=cA.createEmptyModel(n.logService),n}return p(t,e),h(t,[{key:"configurationModel",get:function(){return this._configurationModel}},{key:"reload",value:function(){return this.resetConfigurationModel(),this.configurationModel}},{key:"getConfigurationDefaultOverrides",value:function(){return{}}},{key:"resetConfigurationModel",value:function(){this._configurationModel=cA.createEmptyModel(this.logService);var e=i_.as(lk).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}},{key:"updateConfigurationModel",value:function(e,t){var n=this.getConfigurationDefaultOverrides(),i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=n[l],c=t[l];void 0!==u?this._configurationModel.setValue(l,u):c?this._configurationModel.setValue(l,c.default):this._configurationModel.removeValue(l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}}]),t}(Ru),WY=Zm("accessibilitySignalService"),BY=function(){function e(t){u(this,e),this.fileName=t}return h(e,null,[{key:"register",value:function(t){return new e(t.fileName)}}]),e}();BY.error=BY.register({fileName:"error.mp3"}),BY.warning=BY.register({fileName:"warning.mp3"}),BY.success=BY.register({fileName:"success.mp3"}),BY.foldedArea=BY.register({fileName:"foldedAreas.mp3"}),BY.break=BY.register({fileName:"break.mp3"}),BY.quickFixes=BY.register({fileName:"quickFixes.mp3"}),BY.taskCompleted=BY.register({fileName:"taskCompleted.mp3"}),BY.taskFailed=BY.register({fileName:"taskFailed.mp3"}),BY.terminalBell=BY.register({fileName:"terminalBell.mp3"}),BY.diffLineInserted=BY.register({fileName:"diffLineInserted.mp3"}),BY.diffLineDeleted=BY.register({fileName:"diffLineDeleted.mp3"}),BY.diffLineModified=BY.register({fileName:"diffLineModified.mp3"}),BY.chatRequestSent=BY.register({fileName:"chatRequestSent.mp3"}),BY.chatResponseReceived1=BY.register({fileName:"chatResponseReceived1.mp3"}),BY.chatResponseReceived2=BY.register({fileName:"chatResponseReceived2.mp3"}),BY.chatResponseReceived3=BY.register({fileName:"chatResponseReceived3.mp3"}),BY.chatResponseReceived4=BY.register({fileName:"chatResponseReceived4.mp3"}),BY.clear=BY.register({fileName:"clear.mp3"}),BY.save=BY.register({fileName:"save.mp3"}),BY.format=BY.register({fileName:"format.mp3"}),BY.voiceRecordingStarted=BY.register({fileName:"voiceRecordingStarted.mp3"}),BY.voiceRecordingStopped=BY.register({fileName:"voiceRecordingStopped.mp3"}),BY.progress=BY.register({fileName:"progress.mp3"});var HY=function e(t){u(this,e),this.randomOneOf=t},VY=function(){function e(t,n,i,r,o,a){u(this,e),this.sound=t,this.name=n,this.legacySoundSettingsKey=i,this.settingsKey=r,this.legacyAnnouncementSettingsKey=o,this.announcementMessage=a}return h(e,null,[{key:"register",value:function(t){var n=new e(new HY("randomOneOf"in t.sound?t.sound.randomOneOf:[t.sound]),t.name,t.legacySoundSettingsKey,t.settingsKey,t.legacyAnnouncementSettingsKey,t.announcementMessage);return e._signals.add(n),n}}]),e}();VY._signals=new Set,VY.errorAtPosition=VY.register({name:Xa("accessibilitySignals.positionHasError.name","Error at Position"),sound:BY.error,announcementMessage:Xa("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"}),VY.warningAtPosition=VY.register({name:Xa("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:BY.warning,announcementMessage:Xa("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"}),VY.errorOnLine=VY.register({name:Xa("accessibilitySignals.lineHasError.name","Error on Line"),sound:BY.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:Xa("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"}),VY.warningOnLine=VY.register({name:Xa("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:BY.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:Xa("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"}),VY.foldedArea=VY.register({name:Xa("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:BY.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:Xa("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),VY.break=VY.register({name:Xa("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:BY.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:Xa("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),VY.inlineSuggestion=VY.register({name:Xa("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:BY.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),VY.terminalQuickFix=VY.register({name:Xa("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:BY.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:Xa("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),VY.onDebugBreak=VY.register({name:Xa("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:BY.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:Xa("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),VY.noInlayHints=VY.register({name:Xa("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:BY.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:Xa("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),VY.taskCompleted=VY.register({name:Xa("accessibilitySignals.taskCompleted","Task Completed"),sound:BY.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:Xa("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),VY.taskFailed=VY.register({name:Xa("accessibilitySignals.taskFailed","Task Failed"),sound:BY.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:Xa("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),VY.terminalCommandFailed=VY.register({name:Xa("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:BY.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:Xa("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),VY.terminalCommandSucceeded=VY.register({name:Xa("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:BY.success,announcementMessage:Xa("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"}),VY.terminalBell=VY.register({name:Xa("accessibilitySignals.terminalBell","Terminal Bell"),sound:BY.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:Xa("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),VY.notebookCellCompleted=VY.register({name:Xa("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:BY.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:Xa("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),VY.notebookCellFailed=VY.register({name:Xa("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:BY.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:Xa("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),VY.diffLineInserted=VY.register({name:Xa("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:BY.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),VY.diffLineDeleted=VY.register({name:Xa("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:BY.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),VY.diffLineModified=VY.register({name:Xa("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:BY.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),VY.chatRequestSent=VY.register({name:Xa("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:BY.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:Xa("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),VY.chatResponseReceived=VY.register({name:Xa("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[BY.chatResponseReceived1,BY.chatResponseReceived2,BY.chatResponseReceived3,BY.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),VY.progress=VY.register({name:Xa("accessibilitySignals.progress","Progress"),sound:BY.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:Xa("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"}),VY.clear=VY.register({name:Xa("accessibilitySignals.clear","Clear"),sound:BY.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:Xa("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"}),VY.save=VY.register({name:Xa("accessibilitySignals.save","Save"),sound:BY.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:Xa("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"}),VY.format=VY.register({name:Xa("accessibilitySignals.format","Format"),sound:BY.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:Xa("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"}),VY.voiceRecordingStarted=VY.register({name:Xa("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:BY.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}),VY.voiceRecordingStopped=VY.register({name:Xa("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:BY.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});var zY=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return u(this,t),(n=l(this,t)).logger=new x_([e].concat(x(i))),n._register(e.onDidChangeLogLevel((function(e){return n.setLevel(e)}))),n}return p(t,e),h(t,[{key:"onDidChangeLogLevel",get:function(){return this.logger.onDidChangeLogLevel}},{key:"setLevel",value:function(e){this.logger.setLevel(e)}},{key:"getLevel",value:function(){return this.logger.getLevel()}},{key:"trace",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r;(r=this.logger).trace.apply(r,[e].concat(x(n)))}},{key:"debug",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r;(r=this.logger).debug.apply(r,[e].concat(x(n)))}},{key:"info",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r;(r=this.logger).info.apply(r,[e].concat(x(n)))}},{key:"warn",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r;(r=this.logger).warn.apply(r,[e].concat(x(n)))}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r;(r=this.logger).error.apply(r,[e].concat(x(n)))}}]),t}(Ru),UY=[];function jY(e){UY.push(e)}var KY=function(){function e(){u(this,e)}return h(e,[{key:"getParseResult",value:function(e){}}]),e}(),qY=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},GY=function(e,t){return function(n,i){t(n,i,e)}},ZY=function(){function e(t){u(this,e),this.disposed=!1,this.model=t,this._onWillDispose=new Zu}return h(e,[{key:"textEditorModel",get:function(){return this.model}},{key:"dispose",value:function(){this.disposed=!0,this._onWillDispose.fire()}}]),e}(),YY=function(){function e(t){u(this,e),this.modelService=t}return h(e,[{key:"createModelReference",value:function(e){var t=this.modelService.getModel(e);return t?Promise.resolve(new Fu(new ZY(t))):Promise.reject(new Error("Model not found"))}}]),e}();YY=qY([GY(0,Qm)],YY);var QY=function(){function e(){u(this,e)}return h(e,[{key:"show",value:function(){return e.NULL_PROGRESS_RUNNER}},{key:"showWhile",value:function(e,t){return s((function(){return E(this,(function(t){switch(t.label){case 0:return[4,e];case 1:return t.sent(),[2]}}))}))()}}]),e}();QY.NULL_PROGRESS_RUNNER={done:function(){},total:function(){},worked:function(){}};var XY=function(){function e(){u(this,e)}return h(e,[{key:"withProgress",value:function(e,t,n){return t({report:function(){}})}}]),e}(),$Y=function(){function e(){u(this,e)}return h(e,[{key:"confirm",value:function(e){var t=this;return s((function(){return E(this,(function(n){return[2,{confirmed:t.doConfirm(e.message,e.detail),checkboxChecked:!1}]}))}))()}},{key:"doConfirm",value:function(e,t){var n=e;return t&&(n=n+"\n\n"+t),Fh.confirm(n)}},{key:"prompt",value:function(e){var t=this;return s((function(){var n,i,r,o;return E(this,(function(a){switch(a.label){case 0:return n=void 0,t.doConfirm(e.message,e.detail)?(o=x(null!==(r=e.buttons)&&void 0!==r?r:[]),e.cancelButton&&"string"!=typeof e.cancelButton&&"boolean"!=typeof e.cancelButton&&o.push(e.cancelButton),[4,null===(i=o[0])||void 0===i?void 0:i.run({checkboxChecked:!1})]):[3,2];case 1:n=a.sent(),a.label=2;case 2:return[2,{result:n}]}}))}))()}},{key:"error",value:function(e,t){var n=this;return s((function(){return E(this,(function(i){switch(i.label){case 0:return[4,n.prompt({type:tx.Error,message:e,detail:t})];case 1:return i.sent(),[2]}}))}))()}}]),e}(),JY=function(){function e(){u(this,e)}return h(e,[{key:"info",value:function(e){return this.notify({severity:tx.Info,message:e})}},{key:"warn",value:function(e){return this.notify({severity:tx.Warning,message:e})}},{key:"error",value:function(e){return this.notify({severity:tx.Error,message:e})}},{key:"notify",value:function(t){switch(t.severity){case tx.Error:console.error(t.message);break;case tx.Warning:console.warn(t.message);break;default:console.log(t.message)}return e.NO_OP}},{key:"prompt",value:function(t,n,i,r){return e.NO_OP}},{key:"status",value:function(e,t){return Ru.None}}]),e}();JY.NO_OP=new function e(){u(this,e)};var eQ=function(){function e(t){u(this,e),this._onWillExecuteCommand=new Zu,this._onDidExecuteCommand=new Zu,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=t}return h(e,[{key:"executeCommand",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=sy.getCommand(e);if(!r)return Promise.reject(new Error("command '".concat(e,"' not found")));try{this._onWillExecuteCommand.fire({commandId:e,args:n});var o=this._instantiationService.invokeFunction.apply(this._instantiationService,[r.handler].concat(x(n)));return this._onDidExecuteCommand.fire({commandId:e,args:n}),Promise.resolve(o)}catch(e){return Promise.reject(e)}}}]),e}();eQ=qY([GY(0,Gm)],eQ);var tQ=function(e){function t(e,n,i,r,o,a){var s;u(this,t),(s=l(this,t,[e,n,i,r,o]))._cachedResolver=null,s._dynamicKeybindings=[],s._domNodeListeners=[];var c=function(e){var t=new Tu;t.add(cp(e,rm.KEY_DOWN,(function(e){var t=new rg(e);s._dispatch(t,t.target)&&(t.preventDefault(),t.stopPropagation())}))),t.add(cp(e,rm.KEY_UP,(function(e){var t=new rg(e);s._singleModifierDispatch(t,t.target)&&t.preventDefault()}))),s._domNodeListeners.push(new nQ(e,t))},d=function(e){for(var t=0;t<s._domNodeListeners.length;t++){var n=s._domNodeListeners[t];n.domNode===e&&(s._domNodeListeners.splice(t,1),n.dispose())}},h=function(e){e.getOption(61)||c(e.getContainerDomNode())};s._register(a.onCodeEditorAdd(h)),s._register(a.onCodeEditorRemove((function(e){e.getOption(61)||d(e.getContainerDomNode())}))),a.listCodeEditors().forEach(h);var f=function(e){c(e.getContainerDomNode())};return s._register(a.onDiffEditorAdd(f)),s._register(a.onDiffEditorRemove((function(e){d(e.getContainerDomNode())}))),a.listDiffEditors().forEach(f),s}return p(t,e),h(t,[{key:"addDynamicKeybinding",value:function(e,t,n,i){return Eu(sy.registerCommand(e,n),this.addDynamicKeybindings([{keybinding:t,command:e,when:i}]))}},{key:"addDynamicKeybindings",value:function(e){var t=this,n=e.map((function(e){var t;return{keybinding:Xf(e.keybinding,Ns),command:null!==(t=e.command)&&void 0!==t?t:null,commandArgs:e.commandArgs,when:e.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(n),this.updateResolver(),Mu((function(){for(var e=0;e<t._dynamicKeybindings.length;e++)if(t._dynamicKeybindings[e]===n[0])return t._dynamicKeybindings.splice(e,n.length),void t.updateResolver()}))}},{key:"updateResolver",value:function(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}},{key:"_getResolver",value:function(){var e=this;if(!this._cachedResolver){var t=this._toNormalizedKeybindingItems(o_.getDefaultKeybindings(),!0),n=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new _A(t,n,(function(t){return e._log(t)}))}return this._cachedResolver}},{key:"_documentHasFocus",value:function(){return Fh.document.hasFocus()}},{key:"_toNormalizedKeybindingItems",value:function(e,t){var n=[],i=0,r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=u.when||void 0,d=u.keybinding;if(d){var h=AA.resolveKeybinding(d,Ns),f=!0,g=!1,v=void 0;try{for(var p,m=h[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value;n[i++]=new xA(y,u.command,u.commandArgs,c,t,null,!1)}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}}else n[i++]=new xA(void 0,u.command,u.commandArgs,c,t,null,!1)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}},{key:"resolveKeyboardEvent",value:function(e){var t=new Jf(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new AA([t],Ns)}}]),t}(CA);tQ=qY([GY(0,Ky),GY(1,ay),GY(2,b_),GY(3,rx),GY(4,k_),GY(5,Ym)],tQ);var nQ=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).domNode=e,i._register(n),i}return p(t,e),t}(Ru);function iQ(e){return e&&"object"===(void 0===e?"undefined":L(e))&&(!e.overrideIdentifier||"string"==typeof e.overrideIdentifier)&&(!e.resource||e.resource instanceof ed)}var rQ=function(){function e(t){u(this,e),this.logService=t,this._onDidChangeConfiguration=new Zu,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;var n=new FY(t);this._configuration=new fA(n.reload(),cA.createEmptyModel(t),cA.createEmptyModel(t),cA.createEmptyModel(t),cA.createEmptyModel(t),cA.createEmptyModel(t),new cw,cA.createEmptyModel(t),new cw,t),n.dispose()}return h(e,[{key:"getValue",value:function(e,t){var n="string"==typeof e?e:void 0,i=iQ(e)?e:iQ(t)?t:{};return this._configuration.getValue(n,i,void 0)}},{key:"updateValues",value:function(e){var t={data:this._configuration.toData()},n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=C(a.value,2),u=l[0],c=l[1];this.getValue(u)!==c&&(this._configuration.updateValue(u,c),n.push(u))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}if(n.length>0){var d=new gA({keys:n,overrides:[]},t,this._configuration,void 0,this.logService);d.source=8,this._onDidChangeConfiguration.fire(d)}return Promise.resolve()}},{key:"updateValue",value:function(e,t,n,i){return this.updateValues([[e,t]])}},{key:"inspect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._configuration.inspect(e,t,void 0)}}]),e}();rQ=qY([GY(0,k_)],rQ);var oQ=function(){function e(t,n,i){var r=this;u(this,e),this.configurationService=t,this.modelService=n,this.languageService=i,this._onDidChangeConfiguration=new Zu,this.configurationService.onDidChangeConfiguration((function(e){r._onDidChangeConfiguration.fire({affectedKeys:e.affectedKeys,affectsConfiguration:function(t,n){return e.affectsConfiguration(n)}})}))}return h(e,[{key:"getValue",value:function(e,t,n){var i=dd.isIPosition(t)?t:null,r=i?"string"==typeof n?n:void 0:"string"==typeof t?t:void 0,o=e?this.getLanguage(e,i):void 0;return void 0===r?this.configurationService.getValue({resource:e,overrideIdentifier:o}):this.configurationService.getValue(r,{resource:e,overrideIdentifier:o})}},{key:"getLanguage",value:function(e,t){var n=this.modelService.getModel(e);return n?t?n.getLanguageIdAtPosition(t.lineNumber,t.column):n.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}}]),e}();oQ=qY([GY(0,qb),GY(1,Qm),GY(2,Jb)],oQ);var aQ=function(){function e(t){u(this,e),this.configurationService=t}return h(e,[{key:"getEOL",value:function(e,t){var n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&"string"==typeof n&&"auto"!==n?n:ys||ms?"\n":"\r\n"}}]),e}();aQ=qY([GY(0,qb)],aQ);var sQ=function(){function e(){u(this,e)}return h(e,[{key:"publicLog2",value:function(){}}]),e}(),lQ=function(){function e(){u(this,e);var t=ed.from({scheme:e.SCHEME,authority:"model",path:"/"});this.workspace={id:oP,folders:[new YA({uri:t,name:"",index:0})]}}return h(e,[{key:"getWorkspace",value:function(){return this.workspace}},{key:"getWorkspaceFolder",value:function(t){return t&&t.scheme===e.SCHEME?this.workspace.folders[0]:null}}]),e}();function uQ(e,t,n){if(t&&e instanceof rQ){var i=[];Object.keys(t).forEach((function(e){(function(e){return sA()["editor.".concat(e)]||!1})(e)&&i.push(["editor.".concat(e),t[e]]),n&&function(e){return sA()["diffEditor.".concat(e)]||!1}(e)&&i.push(["diffEditor.".concat(e),t[e]])})),i.length>0&&e.updateValues(i)}}lQ.SCHEME="inmemory";var cQ=function(){function e(t){u(this,e),this._modelService=t}return h(e,[{key:"hasPreviewHandler",value:function(){return!1}},{key:"apply",value:function(e,t){var n=this;return s((function(){var t,i,r,o,a,s,l,u,c,d,h,f,g,v,p,m,y,_,b,k;return E(this,(function(w){t=Array.isArray(e)?e:KR.convert(e),i=new Map,r=!0,o=!1,a=void 0;try{for(s=t[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){if(!((u=l.value)instanceof qR))throw new Error("bad edit - only text edits are supported");if(!(c=n._modelService.getModel(u.resource)))throw new Error("bad edit - model not found");if("number"==typeof u.versionId&&c.getVersionId()!==u.versionId)throw new Error("bad state - model changed in the meantime");(d=i.get(c))||(d=[],i.set(c,d)),d.push(lA.replaceMove(hd.lift(u.textEdit.range),u.textEdit.text))}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}h=0,f=0,g=!0,v=!1,p=void 0;try{for(m=i[Symbol.iterator]();!(g=(y=m.next()).done);g=!0)_=C(y.value,2),b=_[0],k=_[1],b.pushStackElement(),b.pushEditOperations([],k,(function(){return[]})),b.pushStackElement(),f+=1,h+=k.length}catch(e){v=!0,p=e}finally{try{g||null==m.return||m.return()}finally{if(v)throw p}}return[2,{ariaSummary:jh(rP.bulkEditServiceSummary,h,f),isApplied:h>0}]}))}))()}}]),e}();cQ=qY([GY(0,Qm)],cQ);var dQ=function(){function e(){u(this,e)}return h(e,[{key:"getUriLabel",value:function(e,t){return"file"===e.scheme?e.fsPath:e.path}},{key:"getUriBasenameLabel",value:function(e){return YM(e)}}]),e}(),hQ=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[e]))._codeEditorService=n,i}return p(t,e),h(t,[{key:"showContextView",value:function(e,n,i){if(!n){var r=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();r&&(n=r.getContainerDomNode())}return g(v(t.prototype),"showContextView",this).call(this,e,n,i)}}]),t}(OR);hQ=qY([GY(0,QS),GY(1,Ym)],hQ);var fQ=function(){function e(){u(this,e),this._neverEmitter=new Zu,this.onDidChangeTrust=this._neverEmitter.event}return h(e,[{key:"isWorkspaceTrusted",value:function(){return!0}}]),e}(),gQ=function(e){function t(){return u(this,t),l(this,t)}return p(t,e),t}(_O),vQ=function(e){function t(){return u(this,t),l(this,t,[new S_])}return p(t,e),t}(zY),pQ=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t,[e,n,i,r,o,a])).configure({blockMouse:!1}),s}return p(t,e),t}(SW);pQ=qY([GY(0,b_),GY(1,rx),GY(2,qI),GY(3,ZI),GY(4,h_),GY(5,Ky)],pQ);var mQ={amdModuleId:"vs/editor/common/services/editorSimpleWorker",esmModuleLocation:void 0,label:"editorWorkerService"},yQ=function(e){function t(e,n,i,r,o){return u(this,t),l(this,t,[mQ,e,n,i,r,o])}return p(t,e),t}(DS);yQ=qY([GY(0,Qm),GY(1,bS),GY(2,k_),GY(3,Ek),GY(4,wS)],yQ);var _Q,bQ=function(){function e(){u(this,e)}return h(e,[{key:"playSignal",value:function(e,t){return s((function(){return E(this,(function(e){return[2]}))}))()}}]),e}();nk(k_,vQ,0),nk(qb,rQ,0),nk(bS,oQ,0),nk(kS,aQ,0),nk(KA,lQ,0),nk(PA,dQ,0),nk(b_,sQ,0),nk(nx,$Y,0),nk(Lx,(function e(){u(this,e),this.isExtensionDevelopment=!1,this.isBuilt=!1}),0),nk(rx,JY,0),nk(RW,OY,0),nk(Jb,gQ,0),nk(GZ,qZ,0),nk(Qm,wU,0),nk(FB,PB,0),nk(Ky,xY,0),nk(OA,XY,0),nk(WA,QY,0),nk(BF,VF,0),nk(TW,yQ,0),nk(jR,cQ,0),nk(aP,fQ,0),nk(Xm,YY,0),nk(mR,QZ,0),nk(gq,vq,0),nk(ay,eQ,0),nk(ZI,tQ,0),nk(TU,sZ,0),nk(qI,hQ,0),nk(xE,IW,0),nk(fY,hY,0),nk(GI,pQ,0),nk(h_,tY,0),nk(WY,bQ,0),nk(Lz,KY,0),function(e){var t=new IY,n=!0,i=!1,r=void 0;try{for(var o,a=ik()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2),l=s[0],u=s[1];t.set(l,u)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}var c=new MY(t,!0);t.set(Gm,c),e.get=function(e){d||f({});var n=t.get(e);if(!n)throw new Error("Missing service "+e);return n instanceof ek?c.invokeFunction((function(t){return t.get(e)})):n};var d=!1,h=new Zu;function f(e){if(d)return c;d=!0;var n=!0,i=!1,r=void 0;try{for(var o,a=ik()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2),l=s[0],u=s[1];t.get(l)||t.set(l,u)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}for(var f in e)if(e.hasOwnProperty(f)){var g=Zm(f);t.get(g)instanceof ek&&t.set(g,e[f])}var v=UY.slice(0),p=!0,m=!1,y=void 0;try{for(var _,b=v[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){var k=_.value;try{c.createInstance(k)}catch(e){vu(e)}}}catch(e){m=!0,y=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw y}}return h.fire(),c}e.initialize=f,e.withServices=function(e){if(d)return e();var t=new Tu,n=t.add(h.event((function(){n.dispose(),t.add(e())})));return t}}(_Q||(_Q={}));var kQ=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[{amdModuleId:mQ.amdModuleId,esmModuleLocation:mQ.esmModuleLocation,label:n.label},n.keepIdleModels||!1,e]))._foreignModuleId=n.moduleId,i._foreignModuleCreateData=n.createData||null,i._foreignModuleHost=n.host||null,i._foreignProxy=null,i}return p(t,e),h(t,[{key:"fhr",value:function(e,t){if(!this._foreignModuleHost||"function"!=typeof this._foreignModuleHost[e])return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(e){return Promise.reject(e)}}},{key:"_getForeignProxy",value:function(){var e=this;return this._foreignProxy||(this._foreignProxy=this._getProxy().then((function(t){var n=e._foreignModuleHost?qa(e._foreignModuleHost):[];return t.$loadForeignModule(e._foreignModuleId,e._foreignModuleCreateData,n).then((function(n){e._foreignModuleCreateData=null;var i=function(e,n){return t.$fmr(e,n)},r=function(e,t){return function(){var n=Array.prototype.slice.call(arguments,0);return t(e,n)}},o={},a=!0,s=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;o[d]=r(d,i)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return o}))}))),this._foreignProxy}},{key:"getProxy",value:function(){return this._getForeignProxy()}},{key:"withSyncedResources",value:function(e){var t=this;return this.workerWithSyncedResources(e).then((function(e){return t.getProxy()}))}}]),t}(TS),wQ={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},CQ=function(){function e(t,n,i,r){u(this,e),this.startColumn=t,this.endColumn=n,this.className=i,this.type=r,this._lineDecorationBrand=void 0}return h(e,null,[{key:"_equals",value:function(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}},{key:"equalsArr",value:function(t,n){var i=t.length;if(i!==n.length)return!1;for(var r=0;r<i;r++)if(!e._equals(t[r],n[r]))return!1;return!0}},{key:"extractWrapped",value:function(t,n,i){if(0===t.length)return t;var r=n+1,o=i+1,a=i-n,s=[],l=0,u=!0,c=!1,d=void 0;try{for(var h,f=t[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;g.endColumn<=r||g.startColumn>=o||(s[l++]=new e(Math.max(1,g.startColumn-r+1),Math.min(a+1,g.endColumn-r+1),g.className,g.type))}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}return s}},{key:"filter",value:function(t,n,i,r){if(0===t.length)return[];for(var o=[],a=0,s=0,l=t.length;s<l;s++){var u=t[s],c=u.range;if(!(c.endLineNumber<n||c.startLineNumber>n)&&(!c.isEmpty()||0!==u.type&&3!==u.type)){var d=c.startLineNumber===n?c.startColumn:i,h=c.endLineNumber===n?c.endColumn:r;o[a++]=new e(d,h,u.inlineClassName,u.type)}}return o}},{key:"_typeCompare",value:function(e,t){var n=[2,0,1,3];return n[e]-n[t]}},{key:"compare",value:function(t,n){if(t.startColumn!==n.startColumn)return t.startColumn-n.startColumn;if(t.endColumn!==n.endColumn)return t.endColumn-n.endColumn;var i=e._typeCompare(t.type,n.type);return 0!==i?i:t.className!==n.className?t.className<n.className?-1:1:0}}]),e}(),SQ=function e(t,n,i,r){u(this,e),this.startOffset=t,this.endOffset=n,this.className=i,this.metadata=r},xQ=function(){function e(){u(this,e),this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}return h(e,[{key:"consumeLowerThan",value:function(t,n,i){for(;this.count>0&&this.stopOffsets[0]<t;){for(var r=0;r+1<this.count&&this.stopOffsets[r]===this.stopOffsets[r+1];)r++;i.push(new SQ(n,this.stopOffsets[r],this.classNames.join(" "),e._metadata(this.metadata))),n=this.stopOffsets[r]+1,this.stopOffsets.splice(0,r+1),this.classNames.splice(0,r+1),this.metadata.splice(0,r+1),this.count-=r+1}return this.count>0&&n<t&&(i.push(new SQ(n,t-1,this.classNames.join(" "),e._metadata(this.metadata))),n=t),n}},{key:"insert",value:function(e,t,n){if(0===this.count||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(var i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}}],[{key:"_metadata",value:function(e){for(var t=0,n=0,i=e.length;n<i;n++)t|=e[n];return t}}]),e}(),LQ=function(){function e(){u(this,e)}return h(e,null,[{key:"normalize",value:function(e,t){if(0===t.length)return[];for(var n=[],i=new xQ,r=0,o=0,a=t.length;o<a;o++){var s=t[o],l=s.startColumn,u=s.endColumn,c=s.className,d=1===s.type?2:2===s.type?4:0;if(l>1)ff(e.charCodeAt(l-2))&&l--;if(u>1)ff(e.charCodeAt(u-2))&&u--;var h=l-1,f=u-2;r=i.consumeLowerThan(h,r,n),0===i.count&&(r=h),i.insert(f,c,d)}return i.consumeLowerThan(1073741824,r,n),n}}]),e}(),DQ=function(){function e(t,n,i,r){u(this,e),this.endIndex=t,this.type=n,this.metadata=i,this.containsRTL=r,this._linePartBrand=void 0}return h(e,[{key:"isWhitespace",value:function(){return!!(1&this.metadata)}},{key:"isPseudoAfter",value:function(){return!!(4&this.metadata)}}]),e}(),NQ=function(){function e(t,n){u(this,e),this.startOffset=t,this.endOffset=n}return h(e,[{key:"equals",value:function(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}]),e}(),IQ=function(){function e(t,n,i,r,o,a,s,l,c,d,h,f,g,v,p,m,y,_,b){u(this,e),this.useMonospaceOptimizations=t,this.canUseHalfwidthRightwardsArrow=n,this.lineContent=i,this.continuesWithWrappedLine=r,this.isBasicASCII=o,this.containsRTL=a,this.fauxIndentLength=s,this.lineTokens=l,this.lineDecorations=c.sort(CQ.compare),this.tabSize=d,this.startVisibleColumn=h,this.spaceWidth=f,this.stopRenderingLineAfter=p,this.renderWhitespace="all"===m?4:"boundary"===m?1:"selection"===m?2:"trailing"===m?3:0,this.renderControlCharacters=y,this.fontLigatures=_,this.selectionsOnLine=b&&b.sort((function(e,t){return e.startOffset<t.startOffset?-1:1})),Math.abs(v-f)<Math.abs(g-f)?(this.renderSpaceWidth=v,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=g,this.renderSpaceCharCode=183)}return h(e,[{key:"sameSelection",value:function(e){if(null===this.selectionsOnLine)return null===e;if(null===e)return!1;if(e.length!==this.selectionsOnLine.length)return!1;for(var t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}},{key:"equals",value:function(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&CQ.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}]),e}(),EQ=function e(t,n){u(this,e),this.partIndex=t,this.charIndex=n},MQ=function(){function e(t,n){u(this,e),this.length=t,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}return h(e,[{key:"setColumnInfo",value:function(e,t,n,i){var r=(t<<16|n)>>>0;this._data[e-1]=r,this._horizontalOffset[e-1]=i}},{key:"getHorizontalOffset",value:function(e){return 0===this._horizontalOffset.length?0:this._horizontalOffset[e-1]}},{key:"charOffsetToPartData",value:function(e){return 0===this.length?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}},{key:"getDomPosition",value:function(t){var n=this.charOffsetToPartData(t-1),i=e.getPartIndex(n),r=e.getCharIndex(n);return new EQ(i,r)}},{key:"getColumn",value:function(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}},{key:"partDataToCharOffset",value:function(t,n,i){if(0===this.length)return 0;for(var r=(t<<16|i)>>>0,o=0,a=this.length-1;o+1<a;){var s=o+a>>>1,l=this._data[s];if(l===r)return s;l>r?a=s:o=s}if(o===a)return o;var u=this._data[o],c=this._data[a];if(u===r)return o;if(c===r)return a;var d=e.getPartIndex(u);return i-e.getCharIndex(u)<=(d!==e.getPartIndex(c)?n:e.getCharIndex(c))-i?o:a}}],[{key:"getPartIndex",value:function(e){return(4294901760&e)>>>16}},{key:"getCharIndex",value:function(e){return(65535&e)>>>0}}]),e}(),TQ=function e(t,n,i){u(this,e),this._renderLineOutputBrand=void 0,this.characterMapping=t,this.containsRTL=n,this.containsForeignElements=i};function RQ(e,t){if(0===e.lineContent.length){if(e.lineDecorations.length>0){t.appendString("<span>");var n=0,i=0,r=0,o=!0,a=!1,s=void 0;try{for(var l,u=e.lineDecorations[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;1!==c.type&&2!==c.type||(t.appendString('<span class="'),t.appendString(c.className),t.appendString('"></span>'),1===c.type&&(r|=1,n++),2===c.type&&(r|=2,i++))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}t.appendString("</span>");var d=new MQ(1,n+i);return d.setColumnInfo(1,n,0,0),new TQ(d,!1,r)}return t.appendString("<span><span></span></span>"),new TQ(new MQ(0,0),!1,0)}return function(e,t){var n=e.fontIsMonospace,i=e.canUseHalfwidthRightwardsArrow,r=e.containsForeignElements,o=e.lineContent,a=e.len,s=e.isOverflowing,l=e.overflowingCharCount,u=e.parts,c=e.fauxIndentLength,d=e.tabSize,h=e.startVisibleColumn,f=e.containsRTL,g=e.spaceWidth,v=e.renderSpaceCharCode,p=e.renderWhitespace,m=e.renderControlCharacters,y=new MQ(a+1,u.length),_=!1,b=0,k=h,w=0,C=0,S=0;f?t.appendString('<span dir="ltr">'):t.appendString("<span>");for(var x=0,L=u.length;x<L;x++){var D=u[x],N=D.endIndex,I=D.type,E=D.containsRTL,M=0!==p&&D.isWhitespace(),T=M&&!n&&("mtkw"===I||!r),R=b===N&&D.isPseudoAfter();if(w=0,t.appendString("<span "),E&&t.appendString('style="unicode-bidi:isolate" '),t.appendString('class="'),t.appendString(T?"mtkz":I),t.appendASCIICharCode(34),M){for(var A=0,P=b,O=k;P<N;P++){var F=0|(9===o.charCodeAt(P)?d-O%d:1);A+=F,P>=c&&(O+=F)}for(T&&(t.appendString(' style="width:'),t.appendString(String(g*A)),t.appendString('px"')),t.appendASCIICharCode(62);b<N;b++){y.setColumnInfo(b+1,x-S,w,C),S=0;var W=void 0,B=void 0;if(9===o.charCodeAt(b)){B=W=d-k%d|0,!i||B>1?t.appendCharCode(8594):t.appendCharCode(65515);for(var H=2;H<=B;H++)t.appendCharCode(160)}else W=2,B=1,t.appendCharCode(v),t.appendCharCode(8204);w+=W,C+=B,b>=c&&(k+=B)}}else for(t.appendASCIICharCode(62);b<N;b++){y.setColumnInfo(b+1,x-S,w,C),S=0;var V=o.charCodeAt(b),z=1,U=1;switch(V){case 9:U=z=d-k%d;for(var j=1;j<=z;j++)t.appendCharCode(160);break;case 32:t.appendCharCode(160);break;case 60:t.appendString("&lt;");break;case 62:t.appendString("&gt;");break;case 38:t.appendString("&amp;");break;case 0:m?t.appendCharCode(9216):t.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:t.appendCharCode(65533);break;default:Df(V)&&U++,m&&V<32?t.appendCharCode(9216+V):m&&127===V?t.appendCharCode(9249):m&&FQ(V)?(t.appendString("[U+"),t.appendString(WQ(V)),t.appendString("]"),U=z=8):t.appendCharCode(V)}w+=z,C+=U,b>=c&&(k+=U)}R?S++:S=0,b>=a&&!_&&D.isPseudoAfter()&&(_=!0,y.setColumnInfo(b+1,x,w,C)),t.appendString("</span>")}_||y.setColumnInfo(a+1,u.length-1,w,C);s&&(t.appendString('<span class="mtkoverflow">'),t.appendString(Xa("showMore","Show more ({0})",function(e){if(e<1024)return Xa("overflow.chars","{0} chars",e);if(e<1048576)return"".concat((e/1024).toFixed(1)," KB");return"".concat((e/1024/1024).toFixed(1)," MB")}(l))),t.appendString("</span>"));return t.appendString("</span>"),new TQ(y,f,r)}(function(e){var t,n,i,r=e.lineContent;-1!==e.stopRenderingLineAfter&&e.stopRenderingLineAfter<r.length?(t=!0,n=r.length-e.stopRenderingLineAfter,i=e.stopRenderingLineAfter):(t=!1,n=0,i=r.length);var o=function(e,t,n,i,r){var o=[],a=0;i>0&&(o[a++]=new DQ(i,"",0,!1));for(var s=i,l=0,u=n.getCount();l<u;l++){var c=n.getEndOffset(l);if(!(c<=i)){var d=n.getClassName(l);if(c>=r){var h=!!t&&wf(e.substring(s,r));o[a++]=new DQ(r,d,0,h);break}var f=!!t&&wf(e.substring(s,c));o[a++]=new DQ(c,d,0,f),s=c}}return o}(r,e.containsRTL,e.lineTokens,e.fauxIndentLength,i);e.renderControlCharacters&&!e.isBasicASCII&&(o=function(e,t){var n=[],i=new DQ(0,"",0,!1),r=0,o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){for(var c=l.value,d=c.endIndex;r<d;r++){FQ(e.charCodeAt(r))&&(r>i.endIndex&&(i=new DQ(r,c.type,c.metadata,c.containsRTL),n.push(i)),i=new DQ(r+1,"mtkcontrol",c.metadata,!1),n.push(i))}r>i.endIndex&&(i=new DQ(d,c.type,c.metadata,c.containsRTL),n.push(i))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return n}(r,o));(4===e.renderWhitespace||1===e.renderWhitespace||2===e.renderWhitespace&&e.selectionsOnLine||3===e.renderWhitespace&&!e.continuesWithWrappedLine)&&(o=function(e,t,n,i){var r,o=e.continuesWithWrappedLine,a=e.fauxIndentLength,s=e.tabSize,l=e.startVisibleColumn,u=e.useMonospaceOptimizations,c=e.selectionsOnLine,d=1===e.renderWhitespace,h=3===e.renderWhitespace,f=e.renderSpaceWidth!==e.spaceWidth,g=[],v=0,p=0,m=i[p].type,y=i[p].containsRTL,_=i[p].endIndex,b=i.length,k=!1,w=$h(t);-1===w?(k=!0,w=n,r=n):r=ef(t);for(var C=!1,S=0,x=c&&c[S],L=l%s,D=a;D<n;D++){var N=t.charCodeAt(D);x&&D>=x.endOffset&&(S++,x=c&&c[S]);var I=void 0;if(D<w||D>r)I=!0;else if(9===N)I=!0;else if(32===N)if(d)if(C)I=!0;else{var E=D+1<n?t.charCodeAt(D+1):0;I=32===E||9===E}else I=!0;else I=!1;if(I&&c&&(I=!!x&&x.startOffset<=D&&x.endOffset>D),I&&h&&(I=k||D>r),I&&y&&D>=w&&D<=r&&(I=!1),C){if(!I||!u&&L>=s){if(f)for(var M=(v>0?g[v-1].endIndex:a)+1;M<=D;M++)g[v++]=new DQ(M,"mtkw",1,!1);else g[v++]=new DQ(D,"mtkw",1,!1);L%=s}}else(D===_||I&&D>a)&&(g[v++]=new DQ(D,m,0,y),L%=s);for(9===N?L=s:Df(N)?L+=2:L++,C=I;D===_&&++p<b;)m=i[p].type,y=i[p].containsRTL,_=i[p].endIndex}var T=!1;if(C)if(o&&d){var R=n>0?t.charCodeAt(n-1):0,A=n>1?t.charCodeAt(n-2):0;32===R&&32!==A&&9!==A||(T=!0)}else T=!0;if(T)if(f)for(var P=(v>0?g[v-1].endIndex:a)+1;P<=n;P++)g[v++]=new DQ(P,"mtkw",1,!1);else g[v++]=new DQ(n,"mtkw",1,!1);else g[v++]=new DQ(n,m,0,y);return g}(e,r,i,o));var a=0;if(e.lineDecorations.length>0){for(var s=0,l=e.lineDecorations.length;s<l;s++){var u=e.lineDecorations[s];3===u.type||1===u.type?a|=1:2===u.type&&(a|=2)}o=function(e,t,n,i){i.sort(CQ.compare);for(var r=LQ.normalize(e,i),o=r.length,a=0,s=[],l=0,u=0,c=0,d=n.length;c<d;c++){for(var h=n[c],f=h.endIndex,g=h.type,v=h.metadata,p=h.containsRTL;a<o&&r[a].startOffset<f;){var m=r[a];if(m.startOffset>u&&(u=m.startOffset,s[l++]=new DQ(u,g,v,p)),!(m.endOffset+1<=f)){u=f,s[l++]=new DQ(u,g+" "+m.className,v|m.metadata,p);break}u=m.endOffset+1,s[l++]=new DQ(u,g+" "+m.className,v|m.metadata,p),a++}f>u&&(u=f,s[l++]=new DQ(u,g,v,p))}var y=n[n.length-1].endIndex;if(a<o&&r[a].startOffset===y)for(;a<o&&r[a].startOffset===y;){var _=r[a];s[l++]=new DQ(u,_.className,_.metadata,!1),a++}return s}(r,0,o,e.lineDecorations)}e.containsRTL||(o=function(e,t,n){var i=0,r=[],o=0;if(n)for(var a=0,s=t.length;a<s;a++){var l=t[a],u=l.endIndex;if(i+50<u){for(var c=l.type,d=l.metadata,h=l.containsRTL,f=-1,g=i,v=i;v<u;v++)32===e.charCodeAt(v)&&(f=v),-1!==f&&v-g>=50&&(r[o++]=new DQ(f+1,c,d,h),g=f+1,f=-1);g!==u&&(r[o++]=new DQ(u,c,d,h))}else r[o++]=l;i=u}else for(var p=0,m=t.length;p<m;p++){var y=t[p],_=y.endIndex,b=_-i;if(b>50){for(var k=y.type,w=y.metadata,C=y.containsRTL,S=Math.ceil(b/50),x=1;x<S;x++){var L=i+50*x;r[o++]=new DQ(L,k,w,C)}r[o++]=new DQ(_,k,w,C)}else r[o++]=y;i=_}return r}(r,o,!e.isBasicASCII||e.fontLigatures));return new OQ(e.useMonospaceOptimizations,e.canUseHalfwidthRightwardsArrow,r,i,t,n,o,a,e.fauxIndentLength,e.tabSize,e.startVisibleColumn,e.containsRTL,e.spaceWidth,e.renderSpaceCharCode,e.renderWhitespace,e.renderControlCharacters)}(e),t)}var AQ=function e(t,n,i,r){u(this,e),this.characterMapping=t,this.html=n,this.containsRTL=i,this.containsForeignElements=r};function PQ(e){var t=new Tb(1e4),n=RQ(e,t);return new AQ(n.characterMapping,t.build(),n.containsRTL,n.containsForeignElements)}var OQ=function e(t,n,i,r,o,a,s,l,c,d,h,f,g,v,p,m){u(this,e),this.fontIsMonospace=t,this.canUseHalfwidthRightwardsArrow=n,this.lineContent=i,this.len=r,this.isOverflowing=o,this.overflowingCharCount=a,this.parts=s,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=d,this.startVisibleColumn=h,this.containsRTL=f,this.spaceWidth=g,this.renderSpaceCharCode=v,this.renderWhitespace=p,this.renderControlCharacters=m};function FQ(e){return e<32?9!==e:127===e||(e>=8234&&e<=8238||e>=8294&&e<=8297||e>=8206&&e<=8207||1564===e)}function WQ(e){return e.toString(16).toUpperCase().padStart(4,"0")}var BQ=function e(t,n,i,r){u(this,e),this._viewportBrand=void 0,this.top=0|t,this.left=0|n,this.width=0|i,this.height=0|r},HQ=function e(t,n){u(this,e),this.tabSize=t,this.data=n},VQ=function e(t,n,i,r,o,a,s){u(this,e),this._viewLineDataBrand=void 0,this.content=t,this.continuesWithWrappedLine=n,this.minColumn=i,this.maxColumn=r,this.startVisibleColumn=o,this.tokens=a,this.inlineDecorations=s},zQ=function(){function e(t,n,i,r,o,a,s,l,c,d){u(this,e),this.minColumn=t,this.maxColumn=n,this.content=i,this.continuesWithWrappedLine=r,this.isBasicASCII=e.isBasicASCII(i,a),this.containsRTL=e.containsRTL(i,this.isBasicASCII,o),this.tokens=s,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}return h(e,null,[{key:"isBasicASCII",value:function(e,t){return!t||Sf(e)}},{key:"containsRTL",value:function(e,t,n){return!(t||!n)&&wf(e)}}]),e}(),UQ=function e(t,n,i){u(this,e),this.range=t,this.inlineClassName=n,this.type=i},jQ=function(){function e(t,n,i,r){u(this,e),this.startOffset=t,this.endOffset=n,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=r}return h(e,[{key:"toInlineDecoration",value:function(e){return new UQ(new hd(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}]),e}(),KQ=function e(t,n){u(this,e),this._viewModelDecorationBrand=void 0,this.range=t,this.options=n},qQ=function(){function e(t,n,i){u(this,e),this.color=t,this.zIndex=n,this.data=i}return h(e,null,[{key:"compareByRenderingProps",value:function(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}},{key:"equals",value:function(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&ea(e.data,t.data)}},{key:"equalsArr",value:function(t,n){return ea(t,n,e.equals)}}]),e}();function GQ(e){return!function(e){return Array.isArray(e)}(e)}function ZQ(e){return"string"==typeof e}function YQ(e){return!ZQ(e)}function QQ(e){return!e}function XQ(e,t){return e.ignoreCase&&t?t.toLowerCase():t}function $Q(e){return e.replace(/[&<>'"_]/g,"-")}function JQ(e,t){console.log("".concat(e.languageId,": ").concat(t))}function eX(e,t){return new Error("".concat(e.languageId,": ").concat(t))}function tX(e,t,n,i,r){var o=null;return t.replace(/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,(function(t,a,s,l,u,c,d,h,f){return QQ(s)?QQ(l)?!QQ(u)&&u<i.length?XQ(e,i[u]):!QQ(d)&&e&&"string"==typeof e[d]?e[d]:(null===o&&(o=r.split(".")).unshift(r),!QQ(c)&&c<o.length?XQ(e,o[c]):""):XQ(e,n):"$"}))}function nX(e,t){for(var n=t;n&&n.length>0;){var i=e.tokenizer[n];if(i)return i;var r=n.lastIndexOf(".");n=r<0?null:n.substr(0,r)}return null}var iX,rX=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},oX=function(e,t){return function(n,i){t(n,i,e)}},aX=function(){function e(t){u(this,e),this._maxCacheDepth=t,this._entries=Object.create(null)}return h(e,[{key:"create",value:function(e,t){if(null!==e&&e.depth>=this._maxCacheDepth)return new sX(e,t);var n=sX.getStackElementId(e);n.length>0&&(n+="|"),n+=t;var i=this._entries[n];return i||(i=new sX(e,t),this._entries[n]=i,i)}}],[{key:"create",value:function(e,t){return this._INSTANCE.create(e,t)}}]),e}();aX._INSTANCE=new aX(5);var sX=function(){function e(t,n){u(this,e),this.parent=t,this.state=n,this.depth=(this.parent?this.parent.depth:0)+1}return h(e,[{key:"equals",value:function(t){return e._equals(this,t)}},{key:"push",value:function(e){return aX.create(this,e)}},{key:"pop",value:function(){return this.parent}},{key:"popall",value:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"switchTo",value:function(e){return aX.create(this.parent,e)}}],[{key:"getStackElementId",value:function(e){for(var t="";null!==e;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}},{key:"_equals",value:function(e,t){for(;null!==e&&null!==t;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return null===e&&null===t}}]),e}(),lX=function(){function e(t,n){u(this,e),this.languageId=t,this.state=n}return h(e,[{key:"equals",value:function(e){return this.languageId===e.languageId&&this.state.equals(e.state)}},{key:"clone",value:function(){var t=this.state.clone();return t===this.state?this:new e(this.languageId,this.state)}}]),e}(),uX=function(){function e(t){u(this,e),this._maxCacheDepth=t,this._entries=Object.create(null)}return h(e,[{key:"create",value:function(e,t){if(null!==t)return new cX(e,t);if(null!==e&&e.depth>=this._maxCacheDepth)return new cX(e,t);var n=sX.getStackElementId(e),i=this._entries[n];return i||(i=new cX(e,null),this._entries[n]=i,i)}}],[{key:"create",value:function(e,t){return this._INSTANCE.create(e,t)}}]),e}();uX._INSTANCE=new uX(5);var cX=function(){function e(t,n){u(this,e),this.stack=t,this.embeddedLanguageData=n}return h(e,[{key:"clone",value:function(){var e=this.embeddedLanguageData?this.embeddedLanguageData.clone():null;return e===this.embeddedLanguageData?this:uX.create(this.stack,this.embeddedLanguageData)}},{key:"equals",value:function(t){return t instanceof e&&(!!this.stack.equals(t.stack)&&(null===this.embeddedLanguageData&&null===t.embeddedLanguageData||null!==this.embeddedLanguageData&&null!==t.embeddedLanguageData&&this.embeddedLanguageData.equals(t.embeddedLanguageData)))}}]),e}(),dX=function(){function e(){u(this,e),this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}return h(e,[{key:"enterLanguage",value:function(e){this._languageId=e}},{key:"emit",value:function(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new Cd(e,t,this._languageId)))}},{key:"nestedLanguageTokenize",value:function(e,t,n,i){var r=n.languageId,o=n.state,a=Rh.get(r);if(!a)return this.enterLanguage(r),this.emit(i,""),o;var s=a.tokenize(e,t,o);if(0!==i){var l=!0,u=!1,c=void 0;try{for(var d,h=s.tokens[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;this._tokens.push(new Cd(f.offset+i,f.type,f.language))}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}else this._tokens=this._tokens.concat(s.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,s.endState}},{key:"finalize",value:function(e){return new Sd(this._tokens,e)}}]),e}(),hX=function(){function e(t,n){u(this,e),this._languageService=t,this._theme=n,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}return h(e,[{key:"enterLanguage",value:function(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}},{key:"emit",value:function(e,t){var n=1024|this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}},{key:"nestedLanguageTokenize",value:function(t,n,i,r){var o=i.languageId,a=i.state,s=Rh.get(o);if(!s)return this.enterLanguage(o),this.emit(r,""),a;var l=s.tokenizeEncoded(t,n,a);if(0!==r)for(var u=0,c=l.tokens.length;u<c;u+=2)l.tokens[u]+=r;return this._prependTokens=e._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}},{key:"finalize",value:function(t){return new xd(e._merge(this._prependTokens,this._tokens,null),t)}}],[{key:"_merge",value:function(e,t,n){var i=null!==e?e.length:0,r=t.length,o=null!==n?n.length:0;if(0===i&&0===r&&0===o)return new Uint32Array(0);if(0===i&&0===r)return n;if(0===r&&0===o)return e;var a=new Uint32Array(i+r+o);null!==e&&a.set(e);for(var s=0;s<r;s++)a[i+s]=t[s];return null!==n&&a.set(n,i+r),a}}]),e}(),fX=iX=function(e){function t(e,n,i,r,o){var a;u(this,t),(a=l(this,t))._configurationService=o,a._languageService=e,a._standaloneThemeService=n,a._languageId=i,a._lexer=r,a._embeddedLanguages=Object.create(null),a.embeddedLoaded=Promise.resolve(void 0);var s=!1;return a._register(Rh.onDidChange((function(e){if(!s){for(var t=!1,n=0,i=e.changedLanguages.length;n<i;n++){var r=e.changedLanguages[n];if(a._embeddedLanguages[r]){t=!0;break}}t&&(s=!0,Rh.handleChange([a._languageId]),s=!1)}}))),a._maxTokenizationLineLength=a._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:a._languageId}),a._register(a._configurationService.onDidChangeConfiguration((function(e){e.affectsConfiguration("editor.maxTokenizationLineLength")&&(a._maxTokenizationLineLength=a._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:a._languageId}))}))),a}return p(t,e),h(t,[{key:"getLoadStatus",value:function(){var e=[];for(var t in this._embeddedLanguages){var n=Rh.get(t);if(n){if(n instanceof iX){var i=n.getLoadStatus();!1===i.loaded&&e.push(i.promise)}}else Rh.isResolved(t)||e.push(Rh.getOrCreate(t))}return 0===e.length?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then((function(e){}))}}},{key:"getInitialState",value:function(){var e=aX.create(null,this._lexer.start);return uX.create(e,null)}},{key:"tokenize",value:function(e,t,n){if(e.length>=this._maxTokenizationLineLength)return $T(this._languageId,n);var i=new dX,r=this._tokenize(e,t,n,i);return i.finalize(r)}},{key:"tokenizeEncoded",value:function(e,t,n){if(e.length>=this._maxTokenizationLineLength)return JT(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),n);var i=new hX(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),r=this._tokenize(e,t,n,i);return i.finalize(r)}},{key:"_tokenize",value:function(e,t,n,i){return n.embeddedLanguageData?this._nestedTokenize(e,t,n,0,i):this._myTokenize(e,t,n,0,i)}},{key:"_findLeavingNestedLanguageOffset",value:function(e,t){var n=this._lexer.tokenizer[t.stack.state];if(!n&&!(n=nX(this._lexer,t.stack.state)))throw eX(this._lexer,"tokenizer state is not defined: "+t.stack.state);var i=-1,r=!1,o=!0,a=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;if(YQ(c.action)&&"@pop"===c.action.nextEmbedded){r=!0;var d=c.resolveRegex(t.stack.state),h=d.source;if("^(?:"===h.substr(0,4)&&")"===h.substr(h.length-1,1)){var f=(d.ignoreCase?"i":"")+(d.unicode?"u":"");d=new RegExp(h.substr(4,h.length-5),f)}var g=e.search(d);-1===g||0!==g&&c.matchOnlyAtLineStart||(-1===i||g<i)&&(i=g)}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}if(!r)throw eX(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return i}},{key:"_nestedTokenize",value:function(e,t,n,i,r){var o=this._findLeavingNestedLanguageOffset(e,n);if(-1===o){var a=r.nestedLanguageTokenize(e,t,n.embeddedLanguageData,i);return uX.create(n.stack,new lX(n.embeddedLanguageData.languageId,a))}var s=e.substring(0,o);s.length>0&&r.nestedLanguageTokenize(s,!1,n.embeddedLanguageData,i);var l=e.substring(o);return this._myTokenize(l,t,n,i+o,r)}},{key:"_safeRuleName",value:function(e){return e?e.name:"(unknown)"}},{key:"_myTokenize",value:function(e,t,n,i,r){var o=this;r.enterLanguage(this._languageId);for(var a=e.length,s=t&&this._lexer.includeLF?e+"\n":e,l=s.length,u=n.embeddedLanguageData,c=n.stack,d=0,h=null,f=!0;f||d<l;){var g=d,v=c.depth,p=h?h.groups.length:0,m=c.state,y=null,_=null,b=null,k=null,w=null;if(h){y=h.matches;var C=h.groups.shift();_=C.matched,b=C.action,k=h.rule,0===h.groups.length&&(h=null)}else{if(!f&&d>=l)break;f=!1;var S=this._lexer.tokenizer[m];if(!S&&!(S=nX(this._lexer,m)))throw eX(this._lexer,"tokenizer state is not defined: "+m);var x=s.substr(d),L=!0,D=!1,N=void 0;try{for(var I,E=S[Symbol.iterator]();!(L=(I=E.next()).done);L=!0){var M=I.value;if((0===d||!M.matchOnlyAtLineStart)&&(y=x.match(M.resolveRegex(m)))){_=y[0],b=M.action;break}}}catch(e){D=!0,N=e}finally{try{L||null==E.return||E.return()}finally{if(D)throw N}}}if(y||(y=[""],_=""),b||(d<l&&(_=(y=[s.charAt(d)])[0]),b=this._lexer.defaultToken),null===_)break;for(d+=_.length;GQ(b)&&YQ(b)&&b.test;)b=b.test(_,y,m,d===l);var T=null;if("string"==typeof b||Array.isArray(b))T=b;else if(b.group)T=b.group;else if(null!==b.token&&void 0!==b.token){if(T=b.tokenSubst?tX(this._lexer,b.token,_,y,m):b.token,b.nextEmbedded)if("@pop"===b.nextEmbedded){if(!u)throw eX(this._lexer,"cannot pop embedded language if not inside one");u=null}else{if(u)throw eX(this._lexer,"cannot enter embedded language from within an embedded language");w=tX(this._lexer,b.nextEmbedded,_,y,m)}if(b.goBack&&(d=Math.max(0,d-b.goBack)),b.switchTo&&"string"==typeof b.switchTo){var R=tX(this._lexer,b.switchTo,_,y,m);if("@"===R[0]&&(R=R.substr(1)),!nX(this._lexer,R))throw eX(this._lexer,"trying to switch to a state '"+R+"' that is undefined in rule: "+this._safeRuleName(k));c=c.switchTo(R)}else{if(b.transform&&"function"==typeof b.transform)throw eX(this._lexer,"action.transform not supported");if(b.next)if("@push"===b.next){if(c.depth>=this._lexer.maxStack)throw eX(this._lexer,"maximum tokenizer stack size reached: ["+c.state+","+c.parent.state+",...]");c=c.push(m)}else if("@pop"===b.next){if(c.depth<=1)throw eX(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(k));c=c.pop()}else if("@popall"===b.next)c=c.popall();else{var A=tX(this._lexer,b.next,_,y,m);if("@"===A[0]&&(A=A.substr(1)),!nX(this._lexer,A))throw eX(this._lexer,"trying to set a next state '"+A+"' that is undefined in rule: "+this._safeRuleName(k));c=c.push(A)}}b.log&&"string"==typeof b.log&&JQ(this._lexer,this._lexer.languageId+": "+tX(this._lexer,b.log,_,y,m))}if(null===T)throw eX(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(k));var P=function(n){var a=o._languageService.getLanguageIdByLanguageName(n)||o._languageService.getLanguageIdByMimeType(n)||n,s=o._getNestedEmbeddedLanguageData(a);if(d<l){var u=e.substr(d);return o._nestedTokenize(u,t,uX.create(c,s),i+d,r)}return uX.create(c,s)};if(Array.isArray(T)){if(h&&h.groups.length>0)throw eX(this._lexer,"groups cannot be nested: "+this._safeRuleName(k));if(y.length!==T.length+1)throw eX(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(k));for(var O=0,F=1;F<y.length;F++)O+=y[F].length;if(O!==_.length)throw eX(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(k));h={rule:k,matches:y,groups:[]};for(var W=0;W<T.length;W++)h.groups[W]={action:T[W],matched:y[W+1]};d-=_.length}else{if("@rematch"===T&&(d-=_.length,_="",y=null,T="",null!==w))return P(w);if(0===_.length){if(0===l||v!==c.depth||m!==c.state||(h?h.groups.length:0)!==p)continue;throw eX(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(k))}var B=null;if(ZQ(T)&&0===T.indexOf("@brackets")){var H=T.substr(9),V=gX(this._lexer,_);if(!V)throw eX(this._lexer,"@brackets token returned but no bracket defined as: "+_);B=$Q(V.token+H)}else{B=$Q(""===T?"":T+this._lexer.tokenPostfix)}if(g<a&&r.emit(g+i,B),null!==w)return P(w)}}return uX.create(c,u)}},{key:"_getNestedEmbeddedLanguageData",value:function(e){if(!this._languageService.isRegisteredLanguageId(e))return new lX(e,XT);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),Rh.getOrCreate(e),this._embeddedLanguages[e]=!0);var t=Rh.get(e);return new lX(e,t?t.getInitialState():XT)}}]),t}(Ru);function gX(e,t){if(!t)return null;t=XQ(e,t);var n=e.brackets,i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(l.open===t)return{token:l.token,bracketType:1};if(l.close===t)return{token:l.token,bracketType:-1}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return null}fX=iX=rX([oX(4,qb)],fX);var vX=rb("standaloneColorizer",{createHTML:function(e){return e}}),pX=function(){function e(){u(this,e)}return h(e,null,[{key:"colorizeElement",value:function(e,t,n,i){var r=(i=i||{}).theme||"vs",o=i.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();var a=t.getLanguageIdByMimeType(o)||o;e.setTheme(r);var s=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+r;return this.colorize(t,s||"",a,i).then((function(e){var t,i=null!==(t=null==vX?void 0:vX.createHTML(e))&&void 0!==t?t:e;n.innerHTML=i}),(function(e){return console.error(e)}))}},{key:"colorize",value:function(e,t,n,i){return s((function(){var r,o,a,s;return E(this,(function(l){switch(l.label){case 0:return r=e.languageIdCodec,o=4,i&&"number"==typeof i.tabSize&&(o=i.tabSize),Ef(t)&&(t=t.substr(1)),a=Xh(t),e.isRegisteredLanguageId(n)?[4,Rh.getOrCreate(n)]:[2,yX(a,o,r)];case 1:return(s=l.sent())?[2,mX(a,o,s,r)]:[2,yX(a,o,r)]}}))}))()}},{key:"colorizeLine",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,o=zQ.isBasicASCII(e,t),a=zQ.containsRTL(e,o,n);return PQ(new IQ(!1,!0,e,!1,o,a,0,i,[],r,0,0,0,0,-1,"none",!1,!1,null)).html}},{key:"colorizeModelLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=e.getLineContent(t);e.tokenization.forceTokenization(t);var r=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(i,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,n)}}]),e}();function mX(e,t,n,i){return new Promise((function(r,o){var a=function(){var s=function(e,t,n,i){for(var r=[],o=n.getInitialState(),a=0,s=e.length;a<s;a++){var l=e[a],u=n.tokenizeEncoded(l,!0,o);YT.convertToEndOffset(u.tokens,l.length);var c=new YT(u.tokens,l,i),d=zQ.isBasicASCII(l,!0),h=zQ.containsRTL(l,d,!0),f=PQ(new IQ(!1,!0,l,!1,d,h,0,c.inflate(),[],t,0,0,0,0,-1,"none",!1,!1,null));(r=r.concat(f.html)).push("<br/>"),o=u.endState}return r.join("")}(e,t,n,i);if(n instanceof fX){var l=n.getLoadStatus();if(!1===l.loaded)return void l.promise.then(a,o)}r(s)};a()}))}function yX(e,t,n){var i=[],r=new Uint32Array(2);r[0]=0,r[1]=33587200;for(var o=0,a=e.length;o<a;o++){var s=e[o];r[0]=s.length;var l=new YT(r,s,n),u=zQ.isBasicASCII(s,!0),c=zQ.containsRTL(s,u,!0),d=PQ(new IQ(!1,!0,s,!1,u,c,0,l,[],t,0,0,0,0,-1,"none",!1,!1,null));(i=i.concat(d.html)).push("<br/>")}return i.join("")}var _X=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},bX=function(e,t){return function(n,i){t(n,i,e)}},kX=(bt=function(){function e(t,n){u(this,e)}return h(e,[{key:"dispose",value:function(){}}]),e}(),bt.ID="editor.contrib.markerDecorations",bt);B_((kX=_X([bX(1,FB)],kX)).ID,kX,0);var wX=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._onDidChange=i._register(new Zu),i.onDidChange=i._onDidChange.event,i._referenceDomElement=e,i._width=-1,i._height=-1,i._resizeObserver=null,i.measureReferenceDomElement(!1,n),i}return p(t,e),h(t,[{key:"dispose",value:function(){this.stopObserving(),g(v(t.prototype),"dispose",this).call(this)}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"startObserving",value:function(){var e=this;if(!this._resizeObserver&&this._referenceDomElement){var t=null,n=!1,i=!1,r=function(){if(n&&!i)try{n=!1,i=!0,t?e.observe({width:t.width,height:t.height}):e.observe()}finally{pp(ep(e._referenceDomElement),(function(){i=!1,r()}))}};this._resizeObserver=new ResizeObserver((function(e){t=e&&e[0]&&e[0].contentRect?{width:e[0].contentRect.width,height:e[0].contentRect.height}:null,n=!0,r()})),this._resizeObserver.observe(this._referenceDomElement)}}},{key:"stopObserving",value:function(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}},{key:"observe",value:function(e){this.measureReferenceDomElement(!0,e)}},{key:"measureReferenceDomElement",value:function(e,t){var n=0,i=0;t?(n=t.width,i=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,i=this._referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),this._width===n&&this._height===i||(this._width=n,this._height=i,e&&this._onDidChange.fire())}}]),t}(Ru),CX=function(){function e(t,n){u(this,e),this.key=t,this.migrate=n}return h(e,[{key:"apply",value:function(t){var n=e._read(t,this.key);this.migrate(n,(function(n){return e._read(t,n)}),(function(n,i){return e._write(t,n,i)}))}}],[{key:"_read",value:function(e,t){if(void 0!==e){var n=t.indexOf(".");if(n>=0){var i=t.substring(0,n);return this._read(e[i],t.substring(n+1))}return e[t]}}},{key:"_write",value:function(e,t,n){var i=t.indexOf(".");if(i>=0){var r=t.substring(0,i);return e[r]=e[r]||{},void this._write(e[r],t.substring(i+1),n)}e[t]=n}}]),e}();function SX(e,t){CX.items.push(new CX(e,t))}function xX(e,t){SX(e,(function(n,i,r){if(void 0!==n){var o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=C(l.value,2),d=c[0],h=c[1];if(n===d)return void r(e,h)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}}))}CX.items=[],xX("wordWrap",[[!0,"on"],[!1,"off"]]),xX("lineNumbers",[[!0,"on"],[!1,"off"]]),xX("cursorBlinking",[["visible","solid"]]),xX("renderWhitespace",[[!0,"boundary"],[!1,"none"]]),xX("renderLineHighlight",[[!0,"line"],[!1,"none"]]),xX("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]),xX("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]),xX("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),xX("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),xX("autoIndent",[[!1,"advanced"],[!0,"full"]]),xX("matchBrackets",[[!0,"always"],[!1,"never"]]),xX("renderFinalNewline",[[!0,"on"],[!1,"off"]]),xX("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]),xX("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]),xX("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]),SX("autoClosingBrackets",(function(e,t,n){!1===e&&(n("autoClosingBrackets","never"),void 0===t("autoClosingQuotes")&&n("autoClosingQuotes","never"),void 0===t("autoSurround")&&n("autoSurround","never"))})),SX("renderIndentGuides",(function(e,t,n){void 0!==e&&(n("renderIndentGuides",void 0),void 0===t("guides.indentation")&&n("guides.indentation",!!e))})),SX("highlightActiveIndentGuide",(function(e,t,n){void 0!==e&&(n("highlightActiveIndentGuide",void 0),void 0===t("guides.highlightActiveIndentation")&&n("guides.highlightActiveIndentation",!!e))}));var LX={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};SX("suggest.filteredTypes",(function(e,t,n){if(e&&"object"===(void 0===e?"undefined":L(e))){var i=!0,r=!1,o=void 0;try{for(var a,s=Object.entries(LX)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;!1===e[l[0]]&&void 0===t("suggest.".concat(l[1]))&&n("suggest.".concat(l[1]),!1)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}n("suggest.filteredTypes",void 0)}})),SX("quickSuggestions",(function(e,t,n){if("boolean"==typeof e){var i=e?"on":"off";n("quickSuggestions",{comments:i,strings:i,other:i})}})),SX("experimental.stickyScroll.enabled",(function(e,t,n){"boolean"==typeof e&&(n("experimental.stickyScroll.enabled",void 0),void 0===t("stickyScroll.enabled")&&n("stickyScroll.enabled",e))})),SX("experimental.stickyScroll.maxLineCount",(function(e,t,n){"number"==typeof e&&(n("experimental.stickyScroll.maxLineCount",void 0),void 0===t("stickyScroll.maxLineCount")&&n("stickyScroll.maxLineCount",e))})),SX("codeActionsOnSave",(function(e,t,n){if(e&&"object"===(void 0===e?"undefined":L(e))){var i=!1,r={},o=!0,a=!1,s=void 0;try{for(var l,u=Object.entries(e)[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;"boolean"==typeof c[1]?(i=!0,r[c[0]]=c[1]?"explicit":"never"):r[c[0]]=c[1]}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}i&&n("codeActionsOnSave",r)}})),SX("codeActionWidget.includeNearbyQuickfixes",(function(e,t,n){"boolean"==typeof e&&(n("codeActionWidget.includeNearbyQuickfixes",void 0),void 0===t("codeActionWidget.includeNearbyQuickFixes")&&n("codeActionWidget.includeNearbyQuickFixes",e))})),SX("lightbulb.enabled",(function(e,t,n){"boolean"==typeof e&&n("lightbulb.enabled",e?void 0:"off")}));var DX=function(){function e(){u(this,e),this._tabFocus=!1,this._onDidChangeTabFocus=new Zu,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}return h(e,[{key:"getTabFocusMode",value:function(){return this._tabFocus}},{key:"setTabFocusMode",value:function(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}]),e}(),NX=new DX,IX=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},EX=function(e,t){return function(n,i){t(n,i,e)}},MX=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t))._accessibilityService=o,a._onDidChange=a._register(new Zu),a.onDidChange=a._onDidChange.event,a._onDidChangeFast=a._register(new Zu),a.onDidChangeFast=a._onDidChangeFast.event,a._isDominatedByLongLines=!1,a._viewLineCount=1,a._lineNumbersDigitCount=1,a._reservedHeight=0,a._glyphMarginDecorationLaneCount=1,a._computeOptionsMemory=new Zs,a.isSimpleWidget=e,a.contextMenuId=n,a._containerObserver=a._register(new wX(r,i.dimension)),a._targetWindowId=ep(r).vscodeWindowId,a._rawOptions=FX(i),a._validatedOptions=OX.validateOptions(a._rawOptions),a.options=a._computeOptions(),a.options.get(13)&&a._containerObserver.startObserving(),a._register(Hm.onDidChangeZoomLevel((function(){return a._recomputeOptions()}))),a._register(NX.onDidChangeTabFocus((function(){return a._recomputeOptions()}))),a._register(a._containerObserver.onDidChange((function(){return a._recomputeOptions()}))),a._register(qm.onDidChange((function(){return a._recomputeOptions()}))),a._register(Tm.getInstance(ep(r)).onDidChange((function(){return a._recomputeOptions()}))),a._register(a._accessibilityService.onDidChangeScreenReaderOptimized((function(){return a._recomputeOptions()}))),a}return p(t,e),h(t,[{key:"_recomputeOptions",value:function(){var e=this._computeOptions(),t=OX.checkEquals(this.options,e);null!==t&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}},{key:"_computeOptions",value:function(){var e=this._readEnvConfiguration(),t=zm.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),n=this._readFontInfo(t),i={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:n,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:NX.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return OX.computeOptions(this._validatedOptions,i)}},{key:"_readEnvConfiguration",value:function(){return{extraEditorClassName:TX(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:zf||Vf,pixelRatio:Tm.getInstance(rp(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}},{key:"_readFontInfo",value:function(e){return qm.readFontInfo(rp(this._targetWindowId,!0).window,e)}},{key:"getRawOptions",value:function(){return this._rawOptions}},{key:"updateOptions",value:function(e){var t=FX(e);OX.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=OX.validateOptions(this._rawOptions),this._recomputeOptions())}},{key:"observeContainer",value:function(e){this._containerObserver.observe(e)}},{key:"setIsDominatedByLongLines",value:function(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}},{key:"setModelLineCount",value:function(e){var t=function(e){var t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}},{key:"setViewLineCount",value:function(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}},{key:"setReservedHeight",value:function(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}},{key:"setGlyphMarginDecorationLaneCount",value:function(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}}]),t}(Ru);function TX(){var e="";return jf||Kf||(e+="no-user-select "),jf&&(e+="no-minimap-shadow ",e+="enable-user-select "),ms&&(e+="mac "),e}MX=IX([EX(4,mR)],MX);var RX,AX=function(){function e(){u(this,e),this._values=[]}return h(e,[{key:"_read",value:function(e){return this._values[e]}},{key:"get",value:function(e){return this._values[e]}},{key:"_write",value:function(e,t){this._values[e]=t}}]),e}(),PX=function(){function e(){u(this,e),this._values=[]}return h(e,[{key:"_read",value:function(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}},{key:"get",value:function(e){return this._read(e)}},{key:"_write",value:function(e,t){this._values[e]=t}}]),e}(),OX=function(){function e(){u(this,e)}return h(e,null,[{key:"validateOptions",value:function(e){var t=new AX,n=!0,i=!1,r=void 0;try{for(var o,a=cu[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l="_never_"===s.name?void 0:e[s.name];t._write(s.id,s.validate(l))}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}},{key:"computeOptions",value:function(e,t){var n=new PX,i=!0,r=!1,o=void 0;try{for(var a,s=cu[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;n._write(l.id,l.compute(t,n,e._read(l.id)))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}},{key:"_deepEquals",value:function(t,n){if("object"!==(void 0===t?"undefined":L(t))||"object"!==(void 0===n?"undefined":L(n))||!t||!n)return t===n;if(Array.isArray(t)||Array.isArray(n))return!(!Array.isArray(t)||!Array.isArray(n))&&ea(t,n);if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var i in t)if(!e._deepEquals(t[i],n[i]))return!1;return!0}},{key:"checkEquals",value:function(t,n){var i=[],r=!1,o=!0,a=!1,s=void 0;try{for(var l,u=cu[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=!e._deepEquals(t._read(c.id),n._read(c.id));i[c.id]=d,d&&(r=!0)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return r?new Gs(i):null}},{key:"applyUpdate",value:function(e,t){var n=!1,i=!0,r=!1,o=void 0;try{for(var a,s=cu[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(t.hasOwnProperty(l.name)){var u=l.applyUpdate(e[l.name],t[l.name]);e[l.name]=u.newValue,n=n||u.didChange}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}]),e}();function FX(e){var t=Ha(e);return function(e){CX.items.forEach((function(t){return t.apply(e)}))}(t),t}!function(e){var t={total:0,min:Number.MAX_VALUE,max:0},n=_({},t),i=_({},t),r=_({},t),o=0,a={keydown:0,input:0,render:0};function s(){1===a.keydown&&(performance.mark("keydown/end"),a.keydown=2)}function l(){performance.mark("input/start"),a.input=1,d()}function u(){1===a.input&&(performance.mark("input/end"),a.input=2)}function c(){1===a.render&&(performance.mark("render/end"),a.render=2)}function d(){setTimeout(h)}function h(){2===a.keydown&&2===a.input&&2===a.render&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),f("keydown",t),f("input",n),f("render",i),f("inputlatency",r),o++,performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),a.keydown=0,a.input=0,a.render=0)}function f(e,t){var n=performance.getEntriesByName(e)[0].duration;t.total+=n,t.min=Math.min(t.min,n),t.max=Math.max(t.max,n)}function g(e){return{average:e.total/o,max:e.max,min:e.min}}function v(e){e.total=0,e.min=Number.MAX_VALUE,e.max=0}e.onKeyDown=function(){h(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),a.keydown=1,queueMicrotask(s)},e.onBeforeInput=l,e.onInput=function(){0===a.input&&l(),queueMicrotask(u)},e.onKeyUp=function(){h()},e.onSelectionChange=function(){h()},e.onRenderStart=function(){2===a.keydown&&2===a.input&&0===a.render&&(performance.mark("render/start"),a.render=1,queueMicrotask(c),d())},e.getAndClearMeasurements=function(){if(0!==o){var e={keydown:g(t),input:g(n),render:g(i),total:g(r),sampleCount:o};return v(t),v(n),v(i),v(r),o=0,e}}}(RX||(RX={}));var WX=function(){function e(t,n){u(this,e),this.x=t,this.y=n,this._pageCoordinatesBrand=void 0}return h(e,[{key:"toClientCoordinates",value:function(e){return new BX(this.x-e.scrollX,this.y-e.scrollY)}}]),e}(),BX=function(){function e(t,n){u(this,e),this.clientX=t,this.clientY=n,this._clientCoordinatesBrand=void 0}return h(e,[{key:"toPageCoordinates",value:function(e){return new WX(this.clientX+e.scrollX,this.clientY+e.scrollY)}}]),e}(),HX=function e(t,n,i,r){u(this,e),this.x=t,this.y=n,this.width=i,this.height=r,this._editorPagePositionBrand=void 0},VX=function e(t,n){u(this,e),this.x=t,this.y=n,this._positionRelativeToEditorBrand=void 0};function zX(e){var t=xp(e);return new HX(t.left,t.top,t.width,t.height)}function UX(e,t,n){var i=t.width/e.offsetWidth,r=t.height/e.offsetHeight,o=(n.x-t.x)/i,a=(n.y-t.y)/r;return new VX(o,a)}var jX=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[ep(i),e]))._editorMouseEventBrand=void 0,r.isFromPointerCapture=n,r.pos=new WX(r.posx,r.posy),r.editorPos=zX(i),r.relativePos=UX(i,r.editorPos,r.pos),r}return p(t,e),t}(lg),KX=function(){function e(t){u(this,e),this._editorViewDomNode=t}return h(e,[{key:"_create",value:function(e){return new jX(e,!1,this._editorViewDomNode)}},{key:"onContextMenu",value:function(e,t){var n=this;return cp(e,"contextmenu",(function(e){t(n._create(e))}))}},{key:"onMouseUp",value:function(e,t){var n=this;return cp(e,"mouseup",(function(e){t(n._create(e))}))}},{key:"onMouseDown",value:function(e,t){var n=this;return cp(e,rm.MOUSE_DOWN,(function(e){t(n._create(e))}))}},{key:"onPointerDown",value:function(e,t){var n=this;return cp(e,rm.POINTER_DOWN,(function(e){t(n._create(e),e.pointerId)}))}},{key:"onMouseLeave",value:function(e,t){var n=this;return cp(e,rm.MOUSE_LEAVE,(function(e){t(n._create(e))}))}},{key:"onMouseMove",value:function(e,t){var n=this;return cp(e,"mousemove",(function(e){return t(n._create(e))}))}}]),e}(),qX=function(){function e(t){u(this,e),this._editorViewDomNode=t}return h(e,[{key:"_create",value:function(e){return new jX(e,!1,this._editorViewDomNode)}},{key:"onPointerUp",value:function(e,t){var n=this;return cp(e,"pointerup",(function(e){t(n._create(e))}))}},{key:"onPointerDown",value:function(e,t){var n=this;return cp(e,rm.POINTER_DOWN,(function(e){t(n._create(e),e.pointerId)}))}},{key:"onPointerLeave",value:function(e,t){var n=this;return cp(e,rm.POINTER_LEAVE,(function(e){t(n._create(e))}))}},{key:"onPointerMove",value:function(e,t){var n=this;return cp(e,"pointermove",(function(e){return t(n._create(e))}))}}]),e}(),GX=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._editorViewDomNode=e,n._globalPointerMoveMonitor=n._register(new YI),n._keydownListener=null,n}return p(t,e),h(t,[{key:"startMonitoring",value:function(e,t,n,i,r){var o=this;this._keydownListener=hp(e.ownerDocument,"keydown",(function(e){e.toKeyCodeChord().isModifierKey()||o._globalPointerMoveMonitor.stopMonitoring(!0,e.browserEvent)}),!0),this._globalPointerMoveMonitor.startMonitoring(e,t,n,(function(e){i(new jX(e,!0,o._editorViewDomNode))}),(function(e){o._keydownListener.dispose(),r(e)}))}},{key:"stopMonitoring",value:function(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}]),t}(Ru),ZX=function(){function e(t){var n=this;u(this,e),this._editor=t,this._instanceId=++e._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new Sg((function(){return n.garbageCollect()}),1e3)}return h(e,[{key:"createClassNameRef",value:function(e){var t=this,n=this.getOrCreateRule(e);return n.increaseRefCount(),{className:n.className,dispose:function(){n.decreaseRefCount(),t._garbageCollectionScheduler.schedule()}}}},{key:"getOrCreateRule",value:function(e){var t=this.computeUniqueKey(e),n=this._rules.get(t);if(!n){var i=this._counter++;n=new YX(t,"dyn-rule-".concat(this._instanceId,"-").concat(i),Ap(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}},{key:"computeUniqueKey",value:function(e){return JSON.stringify(e)}},{key:"garbageCollect",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this._rules.values()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;o.hasReferences()||(this._rules.delete(o.key),o.dispose())}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}}]),e}();ZX._idPool=0;var YX=function(){function e(t,n,i,r){u(this,e),this.key=t,this.className=n,this.properties=r,this._referenceCount=0,this._styleElementDisposables=new Tu,this._styleElement=jp(i,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}return h(e,[{key:"getCssText",value:function(e,t){var n=".".concat(e," {");for(var i in t){var r=t[i],o=void 0;o="object"===(void 0===r?"undefined":L(r))?NL(r.id):r;var a=QX(i);n+="\n\t".concat(a,": ").concat(o,";")}return n+="\n}"}},{key:"dispose",value:function(){this._styleElementDisposables.dispose(),this._styleElement=void 0}},{key:"increaseRefCount",value:function(){this._referenceCount++}},{key:"decreaseRefCount",value:function(){this._referenceCount--}},{key:"hasReferences",value:function(){return this._referenceCount>0}}]),e}();function QX(e){return e.replace(/(^[A-Z])/,(function(e){return C(e,1)[0].toLowerCase()})).replace(/([A-Z])/g,(function(e){var t=C(e,1)[0];return"-".concat(t.toLowerCase())}))}var XX=function(e){function t(){var e;return u(this,t),(e=l(this,t))._shouldRender=!0,e}return p(t,e),h(t,[{key:"shouldRender",value:function(){return this._shouldRender}},{key:"forceShouldRender",value:function(){this._shouldRender=!0}},{key:"setShouldRender",value:function(){this._shouldRender=!0}},{key:"onDidRender",value:function(){this._shouldRender=!1}},{key:"onCompositionStart",value:function(e){return!1}},{key:"onCompositionEnd",value:function(e){return!1}},{key:"onConfigurationChanged",value:function(e){return!1}},{key:"onCursorStateChanged",value:function(e){return!1}},{key:"onDecorationsChanged",value:function(e){return!1}},{key:"onFlushed",value:function(e){return!1}},{key:"onFocusChanged",value:function(e){return!1}},{key:"onLanguageConfigurationChanged",value:function(e){return!1}},{key:"onLineMappingChanged",value:function(e){return!1}},{key:"onLinesChanged",value:function(e){return!1}},{key:"onLinesDeleted",value:function(e){return!1}},{key:"onLinesInserted",value:function(e){return!1}},{key:"onRevealRangeRequest",value:function(e){return!1}},{key:"onScrollChanged",value:function(e){return!1}},{key:"onThemeChanged",value:function(e){return!1}},{key:"onTokensChanged",value:function(e){return!1}},{key:"onTokensColorsChanged",value:function(e){return!1}},{key:"onZonesChanged",value:function(e){return!1}},{key:"handleEvents",value:function(e){for(var t=!1,n=0,i=e.length;n<i;n++){var r=e[n];switch(r.type){case 0:this.onCompositionStart(r)&&(t=!0);break;case 1:this.onCompositionEnd(r)&&(t=!0);break;case 2:this.onConfigurationChanged(r)&&(t=!0);break;case 3:this.onCursorStateChanged(r)&&(t=!0);break;case 4:this.onDecorationsChanged(r)&&(t=!0);break;case 5:this.onFlushed(r)&&(t=!0);break;case 6:this.onFocusChanged(r)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(r)&&(t=!0);break;case 8:this.onLineMappingChanged(r)&&(t=!0);break;case 9:this.onLinesChanged(r)&&(t=!0);break;case 10:this.onLinesDeleted(r)&&(t=!0);break;case 11:this.onLinesInserted(r)&&(t=!0);break;case 12:this.onRevealRangeRequest(r)&&(t=!0);break;case 13:this.onScrollChanged(r)&&(t=!0);break;case 15:this.onTokensChanged(r)&&(t=!0);break;case 14:this.onThemeChanged(r)&&(t=!0);break;case 16:this.onTokensColorsChanged(r)&&(t=!0);break;case 17:this.onZonesChanged(r)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(r)}}t&&(this._shouldRender=!0)}}]),t}(Ru),$X=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._context=e,n._context.addEventHandler(n),n}return p(t,e),h(t,[{key:"dispose",value:function(){this._context.removeEventHandler(this),g(v(t.prototype),"dispose",this).call(this)}}]),t}(XX),JX=function(){function e(){u(this,e)}return h(e,null,[{key:"write",value:function(e,t){e.setAttribute("data-mprt",String(t))}},{key:"read",value:function(e){var t=e.getAttribute("data-mprt");return null===t?0:parseInt(t,10)}},{key:"collect",value:function(e,t){for(var n=[],i=0;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[i++]=this.read(e)),e=e.parentElement;for(var r=new Uint8Array(i),o=0;o<i;o++)r[o]=n[i-o-1];return r}}]),e}(),e$=function(){function e(t,n){u(this,e),this._restrictedRenderingContextBrand=void 0,this._viewLayout=t,this.viewportData=n,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;var i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}return h(e,[{key:"getScrolledTopFromAbsoluteTop",value:function(e){return e-this.scrollTop}},{key:"getVerticalOffsetForLineNumber",value:function(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}},{key:"getVerticalOffsetAfterLineNumber",value:function(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}},{key:"getDecorationsInViewport",value:function(){return this.viewportData.getDecorationsInViewport()}}]),e}(),t$=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[e,n]))._renderingContextBrand=void 0,r._viewLines=i,r}return p(t,e),h(t,[{key:"linesVisibleRangesForRange",value:function(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}},{key:"visibleRangeForPosition",value:function(e){return this._viewLines.visibleRangeForPosition(e)}}]),t}(e$),n$=function e(t,n,i,r){u(this,e),this.outsideRenderedLine=t,this.lineNumber=n,this.ranges=i,this.continuesOnNextLine=r},i$=function(){function e(t,n){u(this,e),this._horizontalRangeBrand=void 0,this.left=Math.round(t),this.width=Math.round(n)}return h(e,[{key:"toString",value:function(){return"[".concat(this.left,",").concat(this.width,"]")}}],[{key:"from",value:function(t){for(var n=new Array(t.length),i=0,r=t.length;i<r;i++){var o=t[i];n[i]=new e(o.left,o.width)}return n}}]),e}(),r$=function(){function e(t,n){u(this,e),this._floatHorizontalRangeBrand=void 0,this.left=t,this.width=n}return h(e,[{key:"toString",value:function(){return"[".concat(this.left,",").concat(this.width,"]")}}],[{key:"compare",value:function(e,t){return e.left-t.left}}]),e}(),o$=function e(t,n){u(this,e),this.outsideRenderedLine=t,this.originalLeft=n,this.left=Math.round(this.originalLeft)},a$=function e(t,n){u(this,e),this.outsideRenderedLine=t,this.ranges=n},s$=function(){function e(){u(this,e)}return h(e,null,[{key:"_createRange",value:function(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}},{key:"_detachRange",value:function(e,t){e.selectNodeContents(t)}},{key:"_readClientRects",value:function(e,t,n,i,r){var o=this._createRange();try{return o.setStart(e,t),o.setEnd(n,i),o.getClientRects()}catch(e){return null}finally{this._detachRange(o,r)}}},{key:"_mergeAdjacentRanges",value:function(e){if(1===e.length)return e;e.sort(r$.compare);for(var t=[],n=0,i=e[0],r=1,o=e.length;r<o;r++){var a=e[r];i.left+i.width+.9>=a.left?i.width=Math.max(i.width,a.left+a.width-i.left):(t[n++]=i,i=a)}return t[n++]=i,t}},{key:"_createHorizontalRangesFromClientRects",value:function(e,t,n){if(!e||0===e.length)return null;for(var i=[],r=0,o=e.length;r<o;r++){var a=e[r];i[r]=new r$(Math.max(0,(a.left-t)/n),a.width/n)}return this._mergeAdjacentRanges(i)}},{key:"readHorizontalRanges",value:function(e,t,n,i,r,o){var a=e.children.length-1;if(0>a)return null;if((t=Math.min(a,Math.max(0,t)))===(i=Math.min(a,Math.max(0,i)))&&n===r&&0===n&&!e.children[t].firstChild){var s=e.children[t].getClientRects();return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(s,o.clientRectDeltaLeft,o.clientRectScale)}t!==i&&i>0&&0===r&&(i--,r=1073741824);var l=e.children[t].firstChild,u=e.children[i].firstChild;if(l&&u||(!l&&0===n&&t>0&&(l=e.children[t-1].firstChild,n=1073741824),!u&&0===r&&i>0&&(u=e.children[i-1].firstChild,r=1073741824)),!l||!u)return null;n=Math.min(l.textContent.length,Math.max(0,n)),r=Math.min(u.textContent.length,Math.max(0,r));var c=this._readClientRects(l,n,u,r,o.endNode);return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(c,o.clientRectDeltaLeft,o.clientRectScale)}}]),e}(),l$=!!_s||!(ys||Vf||jf),u$=!0,c$=function(){function e(t,n){u(this,e),this.themeType=n;var i=t.options,r=i.get(50),o=i.get(38);this.renderWhitespace="off"===o?i.get(100):"none",this.renderControlCharacters=i.get(95),this.spaceWidth=r.spaceWidth,this.middotWidth=r.middotWidth,this.wsmiddotWidth=r.wsmiddotWidth,this.useMonospaceOptimizations=r.isMonospace&&!i.get(33),this.canUseHalfwidthRightwardsArrow=r.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(118),this.fontLigatures=i.get(51)}return h(e,[{key:"equals",value:function(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}]),e}(),d$=function(){function e(t){u(this,e),this._options=t,this._isMaybeInvalid=!0,this._renderedViewLine=null}return h(e,[{key:"getDomNode",value:function(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}},{key:"setDomNode",value:function(e){if(!this._renderedViewLine)throw new Error("I have no rendered view line to set the dom node to...");this._renderedViewLine.domNode=Pm(e)}},{key:"onContentChanged",value:function(){this._isMaybeInvalid=!0}},{key:"onTokensChanged",value:function(){this._isMaybeInvalid=!0}},{key:"onDecorationsChanged",value:function(){this._isMaybeInvalid=!0}},{key:"onOptionsChanged",value:function(e){this._isMaybeInvalid=!0,this._options=e}},{key:"onSelectionChanged",value:function(){return!(!RS(this._options.themeType)&&"selection"!==this._options.renderWhitespace)&&(this._isMaybeInvalid=!0,!0)}},{key:"renderLine",value:function(t,n,i,r,o){if(!1===this._isMaybeInvalid)return!1;this._isMaybeInvalid=!1;var a=r.getViewLineRenderingData(t),s=this._options,l=CQ.filter(a.inlineDecorations,t,a.minColumn,a.maxColumn),u=null;if(RS(s.themeType)||"selection"===this._options.renderWhitespace){var c=r.selections,d=!0,h=!1,f=void 0;try{for(var g,v=c[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;if(!(p.endLineNumber<t||p.startLineNumber>t)){var m=p.startLineNumber===t?p.startColumn:a.minColumn,y=p.endLineNumber===t?p.endColumn:a.maxColumn;m<y&&(RS(s.themeType)&&l.push(new CQ(m,y,"inline-selected-text",0)),"selection"===this._options.renderWhitespace&&(u||(u=[]),u.push(new NQ(m-1,y-1))))}}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}}var _=new IQ(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,a.content,a.continuesWithWrappedLine,a.isBasicASCII,a.containsRTL,a.minColumn-1,a.tokens,l,a.tabSize,a.startVisibleColumn,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,s.stopRenderingLineAfter,s.renderWhitespace,s.renderControlCharacters,s.fontLigatures!==vl.OFF,u);if(this._renderedViewLine&&this._renderedViewLine.input.equals(_))return!1;o.appendString('<div style="top:'),o.appendString(String(n)),o.appendString("px;height:"),o.appendString(String(i)),o.appendString('px;" class="'),o.appendString(e.CLASS_NAME),o.appendString('">');var b=RQ(_,o);o.appendString("</div>");var k=null;return u$&&l$&&a.isBasicASCII&&s.useMonospaceOptimizations&&0===b.containsForeignElements&&(k=new h$(this._renderedViewLine?this._renderedViewLine.domNode:null,_,b.characterMapping)),k||(k=v$(this._renderedViewLine?this._renderedViewLine.domNode:null,_,b.characterMapping,b.containsRTL,b.containsForeignElements)),this._renderedViewLine=k,!0}},{key:"layoutLine",value:function(e,t,n){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(n))}},{key:"getWidth",value:function(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}},{key:"getWidthIsFast",value:function(){return!this._renderedViewLine||this._renderedViewLine.getWidthIsFast()}},{key:"needsMonospaceFontCheck",value:function(){return!!this._renderedViewLine&&this._renderedViewLine instanceof h$}},{key:"monospaceAssumptionsAreValid",value:function(){return this._renderedViewLine&&this._renderedViewLine instanceof h$?this._renderedViewLine.monospaceAssumptionsAreValid():u$}},{key:"onMonospaceAssumptionsInvalidated",value:function(){this._renderedViewLine&&this._renderedViewLine instanceof h$&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}},{key:"getVisibleRangesForRange",value:function(e,t,n,i){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));var r=this._renderedViewLine.input.stopRenderingLineAfter;if(-1!==r&&t>r+1&&n>r+1)return new a$(!0,[new r$(this.getWidth(i),0)]);-1!==r&&t>r+1&&(t=r+1),-1!==r&&n>r+1&&(n=r+1);var o=this._renderedViewLine.getVisibleRangesForRange(e,t,n,i);return o&&o.length>0?new a$(!1,o):null}},{key:"getColumnOfNodeOffset",value:function(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}}]),e}();d$.CLASS_NAME="view-line";var h$=function(){function e(t,n,i){u(this,e),this._cachedWidth=-1,this.domNode=t,this.input=n;var r=Math.floor(n.lineContent.length/300);if(r>0){this._keyColumnPixelOffsetCache=new Float32Array(r);for(var o=0;o<r;o++)this._keyColumnPixelOffsetCache[o]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=n.spaceWidth}return h(e,[{key:"getWidth",value:function(e){if(!this.domNode||this.input.lineContent.length<300){var t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,null==e||e.markDidDomLayout()),this._cachedWidth}},{key:"getWidthIsFast",value:function(){return this.input.lineContent.length<300||-1!==this._cachedWidth}},{key:"monospaceAssumptionsAreValid",value:function(){if(!this.domNode)return u$;if(this.input.lineContent.length<300){var e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),u$=!1)}return u$}},{key:"toSlowRenderedLine",value:function(){return v$(this.domNode,this.input,this._characterMapping,!1,0)}},{key:"getVisibleRangesForRange",value:function(e,t,n,i){var r=this._getColumnPixelOffset(e,t,i),o=this._getColumnPixelOffset(e,n,i);return[new r$(r,o-r)]}},{key:"_getColumnPixelOffset",value:function(e,t,n){if(t<=300){var i=this._characterMapping.getHorizontalOffset(t);return this._charWidth*i}var r=Math.floor((t-1)/300)-1,o=300*(r+1)+1,a=-1;if(this._keyColumnPixelOffsetCache&&-1===(a=this._keyColumnPixelOffsetCache[r])&&(a=this._actualReadPixelOffset(e,o,n),this._keyColumnPixelOffsetCache[r]=a),-1===a){var s=this._characterMapping.getHorizontalOffset(t);return this._charWidth*s}var l=this._characterMapping.getHorizontalOffset(o),u=this._characterMapping.getHorizontalOffset(t);return a+this._charWidth*(u-l)}},{key:"_getReadingTarget",value:function(e){return e.domNode.firstChild}},{key:"_actualReadPixelOffset",value:function(e,t,n){if(!this.domNode)return-1;var i=this._characterMapping.getDomPosition(t),r=s$.readHorizontalRanges(this._getReadingTarget(this.domNode),i.partIndex,i.charIndex,i.partIndex,i.charIndex,n);return r&&0!==r.length?r[0].left:-1}},{key:"getColumnOfNodeOffset",value:function(e,t){return y$(this._characterMapping,e,t)}}]),e}(),f$=function(){function e(t,n,i,r,o){if(u(this,e),this.domNode=t,this.input=n,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(n.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!r||0===this._characterMapping.length){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(var a=0,s=this._characterMapping.length;a<=s;a++)this._pixelOffsetCache[a]=-1}}return h(e,[{key:"_getReadingTarget",value:function(e){return e.domNode.firstChild}},{key:"getWidth",value:function(e){return this.domNode?(-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,null==e||e.markDidDomLayout()),this._cachedWidth):0}},{key:"getWidthIsFast",value:function(){return-1!==this._cachedWidth}},{key:"getVisibleRangesForRange",value:function(e,t,n,i){if(!this.domNode)return null;if(null!==this._pixelOffsetCache){var r=this._readPixelOffset(this.domNode,e,t,i);if(-1===r)return null;var o=this._readPixelOffset(this.domNode,e,n,i);return-1===o?null:[new r$(r,o-r)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,i)}},{key:"_readVisibleRangesForRange",value:function(e,t,n,i,r){if(n===i){var o=this._readPixelOffset(e,t,n,r);return-1===o?null:[new r$(o,0)]}return this._readRawVisibleRangesForRange(e,n,i,r)}},{key:"_readPixelOffset",value:function(e,t,n,i){if(0===this._characterMapping.length){if(0===this._containsForeignElements)return 0;if(2===this._containsForeignElements)return 0;if(1===this._containsForeignElements)return this.getWidth(i);var r=this._getReadingTarget(e);return r.firstChild?(i.markDidDomLayout(),r.firstChild.offsetWidth):0}if(null!==this._pixelOffsetCache){var o=this._pixelOffsetCache[n];if(-1!==o)return o;var a=this._actualReadPixelOffset(e,t,n,i);return this._pixelOffsetCache[n]=a,a}return this._actualReadPixelOffset(e,t,n,i)}},{key:"_actualReadPixelOffset",value:function(e,t,n,i){if(0===this._characterMapping.length){var r=s$.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,i);return r&&0!==r.length?r[0].left:-1}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&0===this._containsForeignElements)return this.getWidth(i);var o=this._characterMapping.getDomPosition(n),a=s$.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,i);if(!a||0===a.length)return-1;var s=a[0].left;if(this.input.isBasicASCII){var l=this._characterMapping.getHorizontalOffset(n),u=Math.round(this.input.spaceWidth*l);if(Math.abs(u-s)<=1)return u}return s}},{key:"_readRawVisibleRangesForRange",value:function(e,t,n,i){if(1===t&&n===this._characterMapping.length)return[new r$(0,this.getWidth(i))];var r=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(n);return s$.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,o.partIndex,o.charIndex,i)}},{key:"getColumnOfNodeOffset",value:function(e,t){return y$(this._characterMapping,e,t)}}]),e}(),g$=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_readVisibleRangesForRange",value:function(e,n,i,r,o){var a=g(v(t.prototype),"_readVisibleRangesForRange",this).call(this,e,n,i,r,o);if(!a||0===a.length||i===r||1===i&&r===this._characterMapping.length)return a;if(!this.input.containsRTL){var s=this._readPixelOffset(e,n,r,o);if(-1!==s){var l=a[a.length-1];l.left<s&&(l.width=s-l.left)}}return a}}]),t}(f$),v$=zf?p$:m$;function p$(e,t,n,i,r){return new g$(e,t,n,i,r)}function m$(e,t,n,i,r){return new f$(e,t,n,i,r)}function y$(e,t,n){for(var i=t.textContent.length,r=-1;t;)t=t.previousSibling,r++;return e.getColumn(new EQ(r,n),i)}var _$,b$=function(){function e(){u(this,e)}return h(e,null,[{key:"whitespaceVisibleColumn",value:function(e,t,n){for(var i=e.length,r=0,o=-1,a=-1,s=0;s<i;s++){if(s===t)return[o,a,r];switch(r%n==0&&(o=s,a=r),e.charCodeAt(s)){case 32:r+=1;break;case 9:r=WB.nextRenderTabStop(r,n);break;default:return[-1,-1,-1]}}return t===i?[o,a,r]:[-1,-1,-1]}},{key:"atomicPosition",value:function(t,n,i,r){var o,a=t.length,s=C(e.whitespaceVisibleColumn(t,n,i),3),l=s[0],u=s[1],c=s[2];if(-1===c)return-1;switch(r){case 0:o=!0;break;case 1:o=!1;break;case 2:if(c%i==0)return n;o=c%i<=i/2}if(o){if(-1===l)return-1;for(var d=u,h=l;h<a;++h){if(d===u+i)return l;switch(t.charCodeAt(h)){case 32:d+=1;break;case 9:d=WB.nextRenderTabStop(d,i);break;default:return-1}}return d===u+i?l:-1}for(var f=WB.nextRenderTabStop(c,i),g=c,v=n;v<a;v++){if(g===f)return v;switch(t.charCodeAt(v)){case 32:g+=1;break;case 9:g=WB.nextRenderTabStop(g,i);break;default:return-1}}return g===f?a:-1}}]),e}(),k$=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;u(this,e),this.hitTarget=t,this.type=0},w$=function(){function e(t,n,i){u(this,e),this.position=t,this.spanNode=n,this.injectedText=i,this.type=1}return h(e,[{key:"hitTarget",get:function(){return this.spanNode}}]),e}();!function(e){e.createFromDOMInfo=function(e,t,n){var i=e.getPositionFromDOMInfo(t,n);return i?new w$(i,t,null):new k$(t)}}(_$||(_$={}));var C$=function e(t,n){u(this,e),this.lastViewCursorsRenderData=t,this.lastTextareaPosition=n},S$=function(){function e(){u(this,e)}return h(e,null,[{key:"_deduceRage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return!t&&e?new hd(e.lineNumber,e.column,e.lineNumber,e.column):null!=t?t:null}},{key:"createUnknown",value:function(e,t,n){return{type:0,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}},{key:"createTextarea",value:function(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}},{key:"createMargin",value:function(e,t,n,i,r,o){return{type:e,element:t,mouseColumn:n,position:i,range:r,detail:o}}},{key:"createViewZone",value:function(e,t,n,i,r){return{type:e,element:t,mouseColumn:n,position:i,range:this._deduceRage(i),detail:r}}},{key:"createContentText",value:function(e,t,n,i,r){return{type:6,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,i),detail:r}}},{key:"createContentEmpty",value:function(e,t,n,i){return{type:7,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:i}}},{key:"createContentWidget",value:function(e,t,n){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:n}}},{key:"createScrollbar",value:function(e,t,n){return{type:11,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}},{key:"createOverlayWidget",value:function(e,t,n){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:n}}},{key:"createOutsideEditor",value:function(e,t,n,i){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:n,outsideDistance:i}}},{key:"_typeToString",value:function(e){return 1===e?"TEXTAREA":2===e?"GUTTER_GLYPH_MARGIN":3===e?"GUTTER_LINE_NUMBERS":4===e?"GUTTER_LINE_DECORATIONS":5===e?"GUTTER_VIEW_ZONE":6===e?"CONTENT_TEXT":7===e?"CONTENT_EMPTY":8===e?"CONTENT_VIEW_ZONE":9===e?"CONTENT_WIDGET":10===e?"OVERVIEW_RULER":11===e?"SCROLLBAR":12===e?"OVERLAY_WIDGET":"UNKNOWN"}},{key:"toString",value:function(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}]),e}(),x$=function(){function e(){u(this,e)}return h(e,null,[{key:"isTextArea",value:function(e){return 2===e.length&&3===e[0]&&7===e[1]}},{key:"isChildOfViewLines",value:function(e){return e.length>=4&&3===e[0]&&8===e[3]}},{key:"isStrictChildOfViewLines",value:function(e){return e.length>4&&3===e[0]&&8===e[3]}},{key:"isChildOfScrollableElement",value:function(e){return e.length>=2&&3===e[0]&&6===e[1]}},{key:"isChildOfMinimap",value:function(e){return e.length>=2&&3===e[0]&&9===e[1]}},{key:"isChildOfContentWidgets",value:function(e){return e.length>=4&&3===e[0]&&1===e[3]}},{key:"isChildOfOverflowGuard",value:function(e){return e.length>=1&&3===e[0]}},{key:"isChildOfOverflowingContentWidgets",value:function(e){return e.length>=1&&2===e[0]}},{key:"isChildOfOverlayWidgets",value:function(e){return e.length>=2&&3===e[0]&&4===e[1]}},{key:"isChildOfOverflowingOverlayWidgets",value:function(e){return e.length>=1&&5===e[0]}}]),e}(),L$=function(){function e(t,n,i){u(this,e),this.viewModel=t.viewModel;var r=t.configuration.options;this.layoutInfo=r.get(146),this.viewDomNode=n.viewDomNode,this.lineHeight=r.get(67),this.stickyTabStops=r.get(117),this.typicalHalfwidthCharacterWidth=r.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=t,this._viewHelper=n}return h(e,[{key:"getZoneAtCoord",value:function(t){return e.getZoneAtCoord(this._context,t)}},{key:"getFullLineRangeAtCoord",value:function(e){if(this._context.viewLayout.isAfterLines(e)){var t=this._context.viewModel.getLineCount(),n=this._context.viewModel.getLineMaxColumn(t);return{range:new hd(t,n,t,n),isAfterLines:!0}}var i=this._context.viewLayout.getLineNumberAtVerticalOffset(e),r=this._context.viewModel.getLineMaxColumn(i);return{range:new hd(i,1,i,r),isAfterLines:!1}}},{key:"getLineNumberAtVerticalOffset",value:function(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}},{key:"isAfterLines",value:function(e){return this._context.viewLayout.isAfterLines(e)}},{key:"isInTopPadding",value:function(e){return this._context.viewLayout.isInTopPadding(e)}},{key:"isInBottomPadding",value:function(e){return this._context.viewLayout.isInBottomPadding(e)}},{key:"getVerticalOffsetForLineNumber",value:function(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}},{key:"findAttribute",value:function(t,n){return e._findAttribute(t,n,this._viewHelper.viewDomNode)}},{key:"getLineWidth",value:function(e){return this._viewHelper.getLineWidth(e)}},{key:"visibleRangeForPosition",value:function(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}},{key:"getPositionFromDOMInfo",value:function(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}},{key:"getCurrentScrollTop",value:function(){return this._context.viewLayout.getCurrentScrollTop()}},{key:"getCurrentScrollLeft",value:function(){return this._context.viewLayout.getCurrentScrollLeft()}}],[{key:"getZoneAtCoord",value:function(e,t){var n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){var i,r=n.verticalOffset+n.height/2,o=e.viewModel.getLineCount(),a=null,s=null;return n.afterLineNumber!==o&&(s=new dd(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(a=new dd(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),i=null===s?a:null===a?s:t<r?a:s,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:a,positionAfter:s,position:i}}return null}},{key:"_findAttribute",value:function(e,t,n){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}}]),e}(),D$=function(e){function t(e,n,i,r,o){var a;u(this,t),(a=l(this,t,[e,n,i,r])).hitTestResult=new Vh((function(){return E$.doHitTest(a._ctx,a)})),a._targetPathCacheElement=null,a._targetPathCacheValue=new Uint8Array(0),a._ctx=e,a._eventTarget=o;var s=Boolean(a._eventTarget);return a._useHitTestTarget=!s,a}return p(t,e),h(t,[{key:"target",get:function(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}},{key:"targetPath",get:function(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=JX.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}},{key:"toString",value:function(){return"pos(".concat(this.pos.x,",").concat(this.pos.y,"), editorPos(").concat(this.editorPos.x,",").concat(this.editorPos.y,"), relativePos(").concat(this.relativePos.x,",").concat(this.relativePos.y,"), mouseVerticalOffset: ").concat(this.mouseVerticalOffset,", mouseContentHorizontalOffset: ").concat(this.mouseContentHorizontalOffset,"\n\ttarget: ").concat(this.target?this.target.outerHTML:null)}},{key:"wouldBenefitFromHitTestTargetSwitch",get:function(){return!this._useHitTestTarget&&null!==this.hitTestResult.value.hitTarget&&this.target!==this.hitTestResult.value.hitTarget}},{key:"switchToHitTestTarget",value:function(){this._useHitTestTarget=!0}},{key:"_getMouseColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?WB.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}},{key:"fulfillUnknown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return S$.createUnknown(this.target,this._getMouseColumn(e),e)}},{key:"fulfillTextarea",value:function(){return S$.createTextarea(this.target,this._getMouseColumn())}},{key:"fulfillMargin",value:function(e,t,n,i){return S$.createMargin(e,this.target,this._getMouseColumn(t),t,n,i)}},{key:"fulfillViewZone",value:function(e,t,n){return S$.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}},{key:"fulfillContentText",value:function(e,t,n){return S$.createContentText(this.target,this._getMouseColumn(e),e,t,n)}},{key:"fulfillContentEmpty",value:function(e,t){return S$.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}},{key:"fulfillContentWidget",value:function(e){return S$.createContentWidget(this.target,this._getMouseColumn(),e)}},{key:"fulfillScrollbar",value:function(e){return S$.createScrollbar(this.target,this._getMouseColumn(e),e)}},{key:"fulfillOverlayWidget",value:function(e){return S$.createOverlayWidget(this.target,this._getMouseColumn(),e)}}]),t}((function e(t,n,i,r){u(this,e),this.editorPos=n,this.pos=i,this.relativePos=r,this.mouseVerticalOffset=Math.max(0,t.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=t.getCurrentScrollLeft()+this.relativePos.x-t.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<t.layoutInfo.contentLeft&&this.relativePos.x>=t.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,E$._getMouseColumn(this.mouseContentHorizontalOffset,t.typicalHalfwidthCharacterWidth))})),N$={isAfterLines:!0};function I$(e){return{isAfterLines:!1,horizontalDistanceToText:e}}var E$=function(){function e(t,n){u(this,e),this._context=t,this._viewHelper=n}return h(e,[{key:"mouseTargetIsWidget",value:function(e){var t=e.target,n=JX.collect(t,this._viewHelper.viewDomNode);return!(!x$.isChildOfContentWidgets(n)&&!x$.isChildOfOverflowingContentWidgets(n))||!(!x$.isChildOfOverlayWidgets(n)&&!x$.isChildOfOverflowingOverlayWidgets(n))}},{key:"createMouseTarget",value:function(t,n,i,r,o){var a=new L$(this._context,this._viewHelper,t),s=new D$(a,n,i,r,o);try{var l=e._createMouseTarget(a,s);if(6===l.type&&a.stickyTabStops&&null!==l.position){var u=e._snapToSoftTabBoundary(l.position,a.viewModel),c=hd.fromPositions(u,u).plusRange(l.range);return s.fulfillContentText(u,c,l.detail)}return l}catch(e){return s.fulfillUnknown()}}},{key:"getMouseColumn",value:function(t){var n=this._context.configuration.options,i=n.get(146),r=this._context.viewLayout.getCurrentScrollLeft()+t.x-i.contentLeft;return e._getMouseColumn(r,n.get(50).typicalHalfwidthCharacterWidth)}}],[{key:"_createMouseTarget",value:function(t,n){if(null===n.target)return n.fulfillUnknown();var i=n,r=null;return x$.isChildOfOverflowGuard(n.targetPath)||x$.isChildOfOverflowingContentWidgets(n.targetPath)||x$.isChildOfOverflowingOverlayWidgets(n.targetPath)||(r=r||n.fulfillUnknown()),(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=r||e._hitTestContentWidget(t,i))||e._hitTestOverlayWidget(t,i))||e._hitTestMinimap(t,i))||e._hitTestScrollbarSlider(t,i))||e._hitTestViewZone(t,i))||e._hitTestMargin(t,i))||e._hitTestViewCursor(t,i))||e._hitTestTextArea(t,i))||e._hitTestViewLines(t,i))||e._hitTestScrollbar(t,i))||n.fulfillUnknown()}},{key:"_hitTestContentWidget",value:function(e,t){if(x$.isChildOfContentWidgets(t.targetPath)||x$.isChildOfOverflowingContentWidgets(t.targetPath)){var n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}},{key:"_hitTestOverlayWidget",value:function(e,t){if(x$.isChildOfOverlayWidgets(t.targetPath)||x$.isChildOfOverflowingOverlayWidgets(t.targetPath)){var n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}},{key:"_hitTestViewCursor",value:function(e,t){if(t.target){var n=e.lastRenderData.lastViewCursorsRenderData,i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(t.target===l.domNode)return t.fulfillContentText(l.position,null,{mightBeForeignElement:!1,injectedText:null})}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}if(t.isInContentArea){var u=e.lastRenderData.lastViewCursorsRenderData,c=t.mouseContentHorizontalOffset,d=t.mouseVerticalOffset,h=!0,f=!1,g=void 0;try{for(var v,p=u[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var m=v.value;if(!(c<m.contentLeft)&&!(c>m.contentLeft+m.width)){var y=e.getVerticalOffsetForLineNumber(m.position.lineNumber);if(y<=d&&d<=y+m.height)return t.fulfillContentText(m.position,null,{mightBeForeignElement:!1,injectedText:null})}}}catch(e){f=!0,g=e}finally{try{h||null==p.return||p.return()}finally{if(f)throw g}}}return null}},{key:"_hitTestViewZone",value:function(e,t){var n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){var i=t.isInContentArea?8:5;return t.fulfillViewZone(i,n.position,n)}return null}},{key:"_hitTestTextArea",value:function(e,t){return x$.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}},{key:"_hitTestMargin",value:function(e,t){if(t.isInMarginArea){var n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),i=n.range.getStartPosition(),r=Math.abs(t.relativePos.x),o={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:r};if((r-=e.layoutInfo.glyphMarginLeft)<=e.layoutInfo.glyphMarginWidth){var a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(n.range.getStartPosition()),s=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return o.glyphMarginLane=s[Math.floor(r/e.lineHeight)],t.fulfillMargin(2,i,n.range,o)}return(r-=e.layoutInfo.glyphMarginWidth)<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,i,n.range,o):(r-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,i,n.range,o))}return null}},{key:"_hitTestViewLines",value:function(t,n){if(!x$.isChildOfViewLines(n.targetPath))return null;if(t.isInTopPadding(n.mouseVerticalOffset))return n.fulfillContentEmpty(new dd(1,1),N$);if(t.isAfterLines(n.mouseVerticalOffset)||t.isInBottomPadding(n.mouseVerticalOffset)){var i=t.viewModel.getLineCount(),r=t.viewModel.getLineMaxColumn(i);return n.fulfillContentEmpty(new dd(i,r),N$)}if(x$.isStrictChildOfViewLines(n.targetPath)){var o=t.getLineNumberAtVerticalOffset(n.mouseVerticalOffset);if(0===t.viewModel.getLineLength(o)){var a=t.getLineWidth(o),s=I$(n.mouseContentHorizontalOffset-a);return n.fulfillContentEmpty(new dd(o,1),s)}var l=t.getLineWidth(o);if(n.mouseContentHorizontalOffset>=l){var u=I$(n.mouseContentHorizontalOffset-l),c=new dd(o,t.viewModel.getLineMaxColumn(o));return n.fulfillContentEmpty(c,u)}}var d=n.hitTestResult.value;return 1===d.type?e.createMouseTargetFromHitTestPosition(t,n,d.spanNode,d.position,d.injectedText):n.wouldBenefitFromHitTestTargetSwitch?(n.switchToHitTestTarget(),this._createMouseTarget(t,n)):n.fulfillUnknown()}},{key:"_hitTestMinimap",value:function(e,t){if(x$.isChildOfMinimap(t.targetPath)){var n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new dd(n,i))}return null}},{key:"_hitTestScrollbarSlider",value:function(e,t){if(x$.isChildOfScrollableElement(t.targetPath)&&t.target&&1===t.target.nodeType){var n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){var i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new dd(i,r))}}return null}},{key:"_hitTestScrollbar",value:function(e,t){if(x$.isChildOfScrollableElement(t.targetPath)){var n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new dd(n,i))}return null}},{key:"_getMouseColumn",value:function(e,t){return e<0?1:Math.round(e/t)+1}},{key:"createMouseTargetFromHitTestPosition",value:function(e,t,n,i,r){var o=i.lineNumber,a=i.column,s=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>s){var l=I$(t.mouseContentHorizontalOffset-s);return t.fulfillContentEmpty(i,l)}var u=e.visibleRangeForPosition(o,a);if(!u)return t.fulfillUnknown(i);var c=u.left;if(Math.abs(t.mouseContentHorizontalOffset-c)<1)return t.fulfillContentText(i,null,{mightBeForeignElement:!!r,injectedText:r});var d=[];if(d.push({offset:u.left,column:a}),a>1){var h=e.visibleRangeForPosition(o,a-1);h&&d.push({offset:h.left,column:a-1})}if(a<e.viewModel.getLineMaxColumn(o)){var f=e.visibleRangeForPosition(o,a+1);f&&d.push({offset:f.left,column:a+1})}d.sort((function(e,t){return e.offset-t.offset}));for(var g=t.pos.toClientCoordinates(ep(e.viewDomNode)),v=n.getBoundingClientRect(),p=v.left<=g.clientX&&g.clientX<=v.right,m=null,y=1;y<d.length;y++){var _=d[y-1],b=d[y];if(_.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=b.offset){m=new hd(o,_.column,o,b.column);var k=Math.abs(_.offset-t.mouseContentHorizontalOffset),w=Math.abs(b.offset-t.mouseContentHorizontalOffset);i=new dd(o,k<w?_.column:b.column);break}}return t.fulfillContentText(i,m,{mightBeForeignElement:!p||!!r,injectedText:r})}},{key:"_doHitTestWithCaretRangeFromPoint",value:function(e,t){var n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.getVerticalOffsetForLineNumber(n),r=i+e.lineHeight;if(!(n===e.viewModel.getLineCount()&&t.mouseVerticalOffset>r)){var o=Math.floor((i+r)/2),a=t.pos.y+(o-t.mouseVerticalOffset);a<=t.editorPos.y&&(a=t.editorPos.y+1),a>=t.editorPos.y+t.editorPos.height&&(a=t.editorPos.y+t.editorPos.height-1);var s=new WX(t.pos.x,a),l=this._actualDoHitTestWithCaretRangeFromPoint(e,s.toClientCoordinates(ep(e.viewDomNode)));if(1===l.type)return l}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(ep(e.viewDomNode)))}},{key:"_actualDoHitTestWithCaretRangeFromPoint",value:function(e,t){var n,i=Pp(e.viewDomNode);if(n=i?void 0===i.caretRangeFromPoint?function(e,t,n){var i=document.createRange(),r=e.elementFromPoint(t,n);if(null!==r){for(;r&&r.firstChild&&r.firstChild.nodeType!==r.firstChild.TEXT_NODE&&r.lastChild&&r.lastChild.firstChild;)r=r.lastChild;var o,a=r.getBoundingClientRect(),s=ep(r),l=s.getComputedStyle(r,null).getPropertyValue("font-style"),u=s.getComputedStyle(r,null).getPropertyValue("font-variant"),c=s.getComputedStyle(r,null).getPropertyValue("font-weight"),d=s.getComputedStyle(r,null).getPropertyValue("font-size"),h=s.getComputedStyle(r,null).getPropertyValue("line-height"),f=s.getComputedStyle(r,null).getPropertyValue("font-family"),g="".concat(l," ").concat(u," ").concat(c," ").concat(d,"/").concat(h," ").concat(f),v=r.innerText,p=a.left,m=0;if(t>a.left+a.width)m=v.length;else for(var y=M$.getInstance(),_=0;_<v.length+1;_++){if(t<(p+=o=y.getCharWidth(v.charAt(_),g)/2)){m=_;break}p+=o}i.setStart(r.firstChild,m),i.setEnd(r.firstChild,m)}return i}(i,t.clientX,t.clientY):i.caretRangeFromPoint(t.clientX,t.clientY):e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!n||!n.startContainer)return new k$;var r=n.startContainer;if(r.nodeType===r.TEXT_NODE){var o=r.parentNode,a=o?o.parentNode:null,s=a?a.parentNode:null;return(s&&s.nodeType===s.ELEMENT_NODE?s.className:null)===d$.CLASS_NAME?_$.createFromDOMInfo(e,o,n.startOffset):new k$(r.parentNode)}if(r.nodeType===r.ELEMENT_NODE){var l=r.parentNode,u=l?l.parentNode:null;return(u&&u.nodeType===u.ELEMENT_NODE?u.className:null)===d$.CLASS_NAME?_$.createFromDOMInfo(e,r,r.textContent.length):new k$(r)}return new k$}},{key:"_doHitTestWithCaretPositionFromPoint",value:function(e,t){var n=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){var i=n.offsetNode.parentNode,r=i?i.parentNode:null,o=r?r.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===d$.CLASS_NAME?_$.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new k$(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){var a=n.offsetNode.parentNode,s=a&&a.nodeType===a.ELEMENT_NODE?a.className:null,l=a?a.parentNode:null,u=l&&l.nodeType===l.ELEMENT_NODE?l.className:null;if(s===d$.CLASS_NAME){var c=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(c)return _$.createFromDOMInfo(e,c,0)}else if(u===d$.CLASS_NAME)return _$.createFromDOMInfo(e,n.offsetNode,0)}return new k$(n.offsetNode)}},{key:"_snapToSoftTabBoundary",value:function(e,t){var n=t.getLineContent(e.lineNumber),i=t.model.getOptions().tabSize,r=b$.atomicPosition(n,e.column-1,i,2);return-1!==r?new dd(e.lineNumber,r+1):e}},{key:"doHitTest",value:function(e,t){var n=new k$;if("function"==typeof e.viewDomNode.ownerDocument.caretRangeFromPoint?n=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(ep(e.viewDomNode)))),1===n.type){var i=e.viewModel.getInjectedTextAt(n.position),r=e.viewModel.normalizePosition(n.position,2);!i&&r.equals(n.position)||(n=new w$(r,n.spanNode,i))}return n}}]),e}();var M$=function(){function e(){u(this,e),this._cache={},this._canvas=document.createElement("canvas")}return h(e,[{key:"getCharWidth",value:function(e,t){var n=e+t;if(this._cache[n])return this._cache[n];var i=this._canvas.getContext("2d");i.font=t;var r=i.measureText(e).width;return this._cache[n]=r,r}}],[{key:"getInstance",value:function(){return e._INSTANCE||(e._INSTANCE=new e),e._INSTANCE}}]),e}();M$._INSTANCE=null;var T$=function(e){function t(e,n,i){var r;u(this,t),(r=l(this,t))._mouseLeaveMonitor=null,r._context=e,r.viewController=n,r.viewHelper=i,r.mouseTargetFactory=new E$(r._context,i),r._mouseDownOperation=r._register(new R$(r._context,r.viewController,r.viewHelper,r.mouseTargetFactory,(function(e,t){return r._createMouseTarget(e,t)}),(function(e){return r._getMouseColumn(e)}))),r.lastMouseLeaveTime=-1,r._height=r._context.configuration.options.get(146).height;var o=new KX(r.viewHelper.viewDomNode);r._register(o.onContextMenu(r.viewHelper.viewDomNode,(function(e){return r._onContextMenu(e,!0)}))),r._register(o.onMouseMove(r.viewHelper.viewDomNode,(function(e){r._onMouseMove(e),r._mouseLeaveMonitor||(r._mouseLeaveMonitor=cp(r.viewHelper.viewDomNode.ownerDocument,"mousemove",(function(e){r.viewHelper.viewDomNode.contains(e.target)||r._onMouseLeave(new jX(e,!1,r.viewHelper.viewDomNode))})))}))),r._register(o.onMouseUp(r.viewHelper.viewDomNode,(function(e){return r._onMouseUp(e)}))),r._register(o.onMouseLeave(r.viewHelper.viewDomNode,(function(e){return r._onMouseLeave(e)})));var a=0;return r._register(o.onPointerDown(r.viewHelper.viewDomNode,(function(e,t){a=t}))),r._register(cp(r.viewHelper.viewDomNode,rm.POINTER_UP,(function(e){r._mouseDownOperation.onPointerUp()}))),r._register(o.onMouseDown(r.viewHelper.viewDomNode,(function(e){return r._onMouseDown(e,a)}))),r._setupMouseWheelZoomListener(),r._context.addEventHandler(r),r}return p(t,e),h(t,[{key:"_setupMouseWheelZoomListener",value:function(){var e=this,t=gE.INSTANCE,n=0,i=Hm.getZoomLevel(),r=!1,o=0;function a(e){return ms?(e.metaKey||e.ctrlKey)&&!e.shiftKey&&!e.altKey:e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey}this._register(cp(this.viewHelper.viewDomNode,rm.MOUSE_WHEEL,(function(s){if(e.viewController.emitMouseWheel(s),e._context.configuration.options.get(76)){var l=new ug(s);if(t.acceptStandardWheelEvent(l),t.isPhysicalMouseWheel()){if(a(s)){var u=Hm.getZoomLevel(),c=l.deltaY>0?1:-1;Hm.setZoomLevel(u+c),l.preventDefault(),l.stopPropagation()}}else Date.now()-n>50&&(i=Hm.getZoomLevel(),r=a(s),o=0),n=Date.now(),o+=l.deltaY,r&&(Hm.setZoomLevel(i+o/5),l.preventDefault(),l.stopPropagation())}}),{capture:!0,passive:!1}))}},{key:"dispose",value:function(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),g(v(t.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){if(e.hasChanged(146)){var t=this._context.configuration.options.get(146).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}},{key:"onCursorStateChanged",value:function(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}},{key:"onFocusChanged",value:function(e){return!1}},{key:"getTargetAtClientPoint",value:function(e,t){var n=new BX(e,t).toPageCoordinates(ep(this.viewHelper.viewDomNode)),i=zX(this.viewHelper.viewDomNode);if(n.y<i.y||n.y>i.y+i.height||n.x<i.x||n.x>i.x+i.width)return null;var r=UX(this.viewHelper.viewDomNode,i,n);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),i,n,r,null)}},{key:"_createMouseTarget",value:function(e,t){var n=this,i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){var r=Pp(this.viewHelper.viewDomNode);r&&(i=r.elementsFromPoint(e.posx,e.posy).find((function(e){return n.viewHelper.viewDomNode.contains(e)})))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}},{key:"_getMouseColumn",value:function(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}},{key:"_onContextMenu",value:function(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}},{key:"_onMouseMove",value:function(e){(this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),this._mouseDownOperation.isActive())||(e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)}))}},{key:"_onMouseLeave",value:function(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=(new Date).getTime(),this.viewController.emitMouseLeave({event:e,target:null})}},{key:"_onMouseUp",value:function(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}},{key:"_onMouseDown",value:function(e,t){var n=this,i=this._createMouseTarget(e,!0),r=6===i.type||7===i.type,o=2===i.type||3===i.type||4===i.type,a=3===i.type,s=this._context.configuration.options.get(110),l=8===i.type||5===i.type,u=9===i.type,c=e.leftButton||e.middleButton;ms&&e.leftButton&&e.ctrlKey&&(c=!1);var d=function(){e.preventDefault(),n.viewHelper.focusTextArea()};if(c&&(r||a&&s))d(),this._mouseDownOperation.start(i.type,e,t);else if(o)e.preventDefault();else if(l){var h=i.detail;c&&this.viewHelper.shouldSuppressMouseDownOnViewZone(h.viewZoneId)&&(d(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else u&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(d(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}]),t}(XX),R$=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t))._context=e,s._viewController=n,s._viewHelper=i,s._mouseTargetFactory=r,s._createMouseTarget=o,s._getMouseColumn=a,s._mouseMoveMonitor=s._register(new GX(s._viewHelper.viewDomNode)),s._topBottomDragScrolling=s._register(new A$(s._context,s._viewHelper,s._mouseTargetFactory,(function(e,t,n){return s._dispatchMouse(e,t,n)}))),s._mouseState=new O$,s._currentSelection=new fd(1,1,1,1),s._isActive=!1,s._lastMouseEvent=null,s}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}},{key:"isActive",value:function(){return this._isActive}},{key:"_onMouseDownThenMove",value:function(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);var t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):13!==t.type||"above"!==t.outsidePosition&&"below"!==t.outsidePosition?(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)):this._topBottomDragScrolling.start(t,e))}},{key:"start",value:function(e,t,n){var i=this;this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(3===e),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);var r=this._findMousePosition(t,!0);if(r&&r.position){this._mouseState.trySetCount(t.detail,r.position),t.detail=this._mouseState.count;var o=this._context.configuration.options;if(!o.get(92)&&o.get(35)&&!o.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&6===r.type&&r.position&&this._currentSelection.containsPosition(r.position))return this._mouseState.isDragAndDrop=!0,this._isActive=!0,void this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,(function(e){return i._onMouseDownThenMove(e)}),(function(e){var t=i._findMousePosition(i._lastMouseEvent,!1);im(e)?i._viewController.emitMouseDropCanceled():i._viewController.emitMouseDrop({event:i._lastMouseEvent,target:t?i._createMouseTarget(i._lastMouseEvent,!0):null}),i._stop()}));this._mouseState.isDragAndDrop=!1,this._dispatchMouse(r,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,(function(e){return i._onMouseDownThenMove(e)}),(function(){return i._stop()})))}}},{key:"_stop",value:function(){this._isActive=!1,this._topBottomDragScrolling.stop()}},{key:"onHeightChanged",value:function(){this._mouseMoveMonitor.stopMonitoring()}},{key:"onPointerUp",value:function(){this._mouseMoveMonitor.stopMonitoring()}},{key:"onCursorStateChanged",value:function(e){this._currentSelection=e.selections[0]}},{key:"_getPositionOutsideEditor",value:function(e){var t=e.editorPos,n=this._context.viewModel,i=this._context.viewLayout,r=this._getMouseColumn(e);if(e.posy<t.y){var o=t.y-e.posy,a=Math.max(i.getCurrentScrollTop()-o,0),s=L$.getZoneAtCoord(this._context,a);if(s){var l=this._helpPositionJumpOverViewZone(s);if(l)return S$.createOutsideEditor(r,l,"above",o)}var u=i.getLineNumberAtVerticalOffset(a);return S$.createOutsideEditor(r,new dd(u,1),"above",o)}if(e.posy>t.y+t.height){var c=e.posy-t.y-t.height,d=i.getCurrentScrollTop()+e.relativePos.y,h=L$.getZoneAtCoord(this._context,d);if(h){var f=this._helpPositionJumpOverViewZone(h);if(f)return S$.createOutsideEditor(r,f,"below",c)}var g=i.getLineNumberAtVerticalOffset(d);return S$.createOutsideEditor(r,new dd(g,n.getLineMaxColumn(g)),"below",c)}var v=i.getLineNumberAtVerticalOffset(i.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){var p=t.x-e.posx;return S$.createOutsideEditor(r,new dd(v,1),"left",p)}if(e.posx>t.x+t.width){var m=e.posx-t.x-t.width;return S$.createOutsideEditor(r,new dd(v,n.getLineMaxColumn(v)),"right",m)}return null}},{key:"_findMousePosition",value:function(e,t){var n=this._getPositionOutsideEditor(e);if(n)return n;var i=this._createMouseTarget(e,t);if(!i.position)return null;if(8===i.type||5===i.type){var r=this._helpPositionJumpOverViewZone(i.detail);if(r)return S$.createViewZone(i.type,i.element,i.mouseColumn,r,i.detail)}return i}},{key:"_helpPositionJumpOverViewZone",value:function(e){var t=new dd(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,i=e.positionAfter;return n&&i?n.isBefore(t)?n:i:null}},{key:"_dispatchMouse",value:function(e,t,n){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:n,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:6===e.type&&null!==e.detail.injectedText})}}]),t}(Ru),A$=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t))._context=e,o._viewHelper=n,o._mouseTargetFactory=i,o._dispatchMouse=r,o._operation=null,o}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this.stop()}},{key:"start",value:function(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new P$(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}},{key:"stop",value:function(){this._operation&&(this._operation.dispose(),this._operation=null)}}]),t}(Ru),P$=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t))._context=e,s._viewHelper=n,s._mouseTargetFactory=i,s._dispatchMouse=r,s._position=o,s._mouseEvent=a,s._lastTime=Date.now(),s._animationFrameDisposable=pp(ep(a.browserEvent),(function(){return s._execute()})),s}return p(t,e),h(t,[{key:"dispose",value:function(){this._animationFrameDisposable.dispose(),g(v(t.prototype),"dispose",this).call(this)}},{key:"setPosition",value:function(e,t){this._position=e,this._mouseEvent=t}},{key:"_tick",value:function(){var e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}},{key:"_getScrollSpeed",value:function(){var e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(146).height/e,n=this._position.outsideDistance/e;return n<=1.5?Math.max(30,t*(1+n)):n<=3?Math.max(60,t*(2+n)):Math.max(200,t*(7+n))}},{key:"_execute",value:function(){var e=this,t=this._context.configuration.options.get(67),n=this._getScrollSpeed()*(this._tick()/1e3)*t,i="above"===this._position.outsidePosition?-n:n;this._context.viewModel.viewLayout.deltaScrollNow(0,i),this._viewHelper.renderNow();var r,o=this._context.viewLayout.getLinesViewportData(),a="above"===this._position.outsidePosition?o.startLineNumber:o.endLineNumber,s=zX(this._viewHelper.viewDomNode),l=this._context.configuration.options.get(146).horizontalScrollbarHeight,u=new WX(this._mouseEvent.pos.x,s.y+s.height-l-.1),c=UX(this._viewHelper.viewDomNode,s,u);(r=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),s,u,c,null)).position&&r.position.lineNumber===a||(r="above"===this._position.outsidePosition?S$.createOutsideEditor(this._position.mouseColumn,new dd(a,1),"above",this._position.outsideDistance):S$.createOutsideEditor(this._position.mouseColumn,new dd(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(r,!0,2),this._animationFrameDisposable=pp(ep(r.element),(function(){return e._execute()}))}}]),t}(Ru),O$=function(){function e(){u(this,e),this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}return h(e,[{key:"altKey",get:function(){return this._altKey}},{key:"ctrlKey",get:function(){return this._ctrlKey}},{key:"metaKey",get:function(){return this._metaKey}},{key:"shiftKey",get:function(){return this._shiftKey}},{key:"leftButton",get:function(){return this._leftButton}},{key:"middleButton",get:function(){return this._middleButton}},{key:"startedOnLineNumbers",get:function(){return this._startedOnLineNumbers}},{key:"count",get:function(){return this._lastMouseDownCount}},{key:"setModifiers",value:function(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}},{key:"setStartButtons",value:function(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}},{key:"setStartedOnLineNumbers",value:function(e){this._startedOnLineNumbers=e}},{key:"trySetCount",value:function(t,n){var i=(new Date).getTime();i-this._lastSetMouseDownCountTime>e.CLEAR_MOUSE_DOWN_COUNT_TIME&&(t=1),this._lastSetMouseDownCountTime=i,t>this._lastMouseDownCount+1&&(t=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(n)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=n,this._lastMouseDownCount=Math.min(t,this._lastMouseDownPositionEqualCount)}}]),e}();O$.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var F$=function(){function e(t,n,i,r,o){u(this,e),this.value=t,this.selectionStart=n,this.selectionEnd=i,this.selection=r,this.newlineCountBeforeSelection=o}return h(e,[{key:"toString",value:function(){return"[ <".concat(this.value,">, selectionStart: ").concat(this.selectionStart,", selectionEnd: ").concat(this.selectionEnd,"]")}},{key:"collapseSelection",value:function(){return this.selectionStart===this.value.length?this:new e(this.value,this.value.length,this.value.length,null,void 0)}},{key:"writeToTextArea",value:function(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}},{key:"deduceEditorPosition",value:function(e){var t;if(e<=this.selectionStart){var n,i,r=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(null!==(i=null===(n=this.selection)||void 0===n?void 0:n.getStartPosition())&&void 0!==i?i:null,r,-1)}if(e>=this.selectionEnd){var o,a,s=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(null!==(a=null===(o=this.selection)||void 0===o?void 0:o.getEndPosition())&&void 0!==a?a:null,s,1)}var l,u,c=this.value.substring(this.selectionStart,e);if(-1===c.indexOf(String.fromCharCode(8230)))return this._finishDeduceEditorPosition(null!==(u=null===(l=this.selection)||void 0===l?void 0:l.getStartPosition())&&void 0!==u?u:null,c,1);var d,h=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(null!==(d=null===(t=this.selection)||void 0===t?void 0:t.getEndPosition())&&void 0!==d?d:null,h,-1)}},{key:"_finishDeduceEditorPosition",value:function(e,t,n){for(var i=0,r=-1;-1!==(r=t.indexOf("\n",r+1));)i++;return[e,n*t.length,i]}}],[{key:"readFromTextArea",value:function(t,n){var i=t.getValue(),r=t.getSelectionStart(),o=t.getSelectionEnd(),a=void 0;n&&(i.substring(0,r)===n.value.substring(0,n.selectionStart)&&(a=n.newlineCountBeforeSelection));return new e(i,r,o,null,a)}},{key:"deduceInput",value:function(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};var i=Math.min(df(e.value,t.value),e.selectionStart,t.selectionStart),r=Math.min(hf(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(i,e.value.length-r);var o=t.value.substring(i,t.value.length-r),a=e.selectionStart-i,s=e.selectionEnd-i;return t.selectionStart-i===t.selectionEnd-i?{text:o,replacePrevCharCnt:e.selectionStart-i,replaceNextCharCnt:0,positionDelta:0}:{text:o,replacePrevCharCnt:s-a,replaceNextCharCnt:0,positionDelta:0}}},{key:"deduceAndroidCompositionInput",value:function(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};var n=Math.min(df(e.value,t.value),e.selectionEnd),i=Math.min(hf(e.value,t.value),e.value.length-e.selectionEnd),r=e.value.substring(n,e.value.length-i),o=t.value.substring(n,t.value.length-i);e.selectionStart;var a=e.selectionEnd-n;t.selectionStart;var s=t.selectionEnd-n;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:r.length-a,positionDelta:s-o.length}}}]),e}();F$.EMPTY=new F$("",0,0,null,void 0);var W$,B$=function(){function e(){u(this,e)}return h(e,null,[{key:"_getPageOfLine",value:function(e,t){return Math.floor((e-1)/t)}},{key:"_getRangeForPage",value:function(e,t){var n=e*t;return new hd(n+1,1,n+t+1,1)}},{key:"fromEditorSelection",value:function(t,n,i,r){var o=500,a=e._getPageOfLine(n.startLineNumber,i),s=e._getRangeForPage(a,i),l=e._getPageOfLine(n.endLineNumber,i),u=e._getRangeForPage(l,i),c=s.intersectRanges(new hd(1,1,n.startLineNumber,n.startColumn));if(r&&t.getValueLengthInRange(c,1)>o){var d=t.modifyPosition(c.getEndPosition(),-o);c=hd.fromPositions(d,c.getEndPosition())}var h=t.getValueInRange(c,1),f=t.getLineCount(),g=t.getLineMaxColumn(f),v=u.intersectRanges(new hd(n.endLineNumber,n.endColumn,f,g));if(r&&t.getValueLengthInRange(v,1)>o){var p=t.modifyPosition(v.getStartPosition(),o);v=hd.fromPositions(v.getStartPosition(),p)}var m,y=t.getValueInRange(v,1);if(a===l||a+1===l)m=t.getValueInRange(n,1);else{var _=s.intersectRanges(n),b=u.intersectRanges(n);m=t.getValueInRange(_,1)+String.fromCharCode(8230)+t.getValueInRange(b,1)}return r&&m.length>2*o&&(m=m.substring(0,o)+String.fromCharCode(8230)+m.substring(m.length-o,m.length)),new F$(h+m+y,h.length,h.length+m.length,n,c.endLineNumber-c.startLineNumber)}}]),e}(),H$=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},V$=function(e,t){return function(n,i){t(n,i,e)}};!function(e){e.Tap="-monaco-textarea-synthetic-tap"}(W$||(W$={}));var z$={forceCopyWithSyntaxHighlighting:!1},U$=function(){function e(){u(this,e),this._lastState=null}return h(e,[{key:"set",value:function(e,t){this._lastState={lastCopiedValue:e,data:t}}},{key:"get",value:function(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}]),e}();U$.INSTANCE=new U$;var j$=function(){function e(){u(this,e),this._lastTypeTextLength=0}return h(e,[{key:"handleCompositionUpdate",value:function(e){e=e||"";var t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}]),e}(),K$=function(e){function t(e,n,i,r,o,a){var s;u(this,t),(s=l(this,t))._host=e,s._textArea=n,s._OS=i,s._browser=r,s._accessibilityService=o,s._logService=a,s._onFocus=s._register(new Zu),s.onFocus=s._onFocus.event,s._onBlur=s._register(new Zu),s.onBlur=s._onBlur.event,s._onKeyDown=s._register(new Zu),s.onKeyDown=s._onKeyDown.event,s._onKeyUp=s._register(new Zu),s.onKeyUp=s._onKeyUp.event,s._onCut=s._register(new Zu),s.onCut=s._onCut.event,s._onPaste=s._register(new Zu),s.onPaste=s._onPaste.event,s._onType=s._register(new Zu),s.onType=s._onType.event,s._onCompositionStart=s._register(new Zu),s.onCompositionStart=s._onCompositionStart.event,s._onCompositionUpdate=s._register(new Zu),s.onCompositionUpdate=s._onCompositionUpdate.event,s._onCompositionEnd=s._register(new Zu),s.onCompositionEnd=s._onCompositionEnd.event,s._onSelectionChangeRequest=s._register(new Zu),s.onSelectionChangeRequest=s._onSelectionChangeRequest.event,s._asyncFocusGainWriteScreenReaderContent=s._register(new Pu),s._asyncTriggerCut=s._register(new Sg((function(){return s._onCut.fire()}),0)),s._textAreaState=F$.EMPTY,s._selectionChangeListener=null,s._accessibilityService.isScreenReaderOptimized()&&s.writeNativeTextAreaContent("ctor"),s._register(Au.runAndSubscribe(s._accessibilityService.onDidChangeScreenReaderOptimized,(function(){s._accessibilityService.isScreenReaderOptimized()&&!s._asyncFocusGainWriteScreenReaderContent.value?s._asyncFocusGainWriteScreenReaderContent.value=s._register(new Sg((function(){return s.writeNativeTextAreaContent("asyncFocusGain")}),0)):s._asyncFocusGainWriteScreenReaderContent.clear()}))),s._hasFocus=!1,s._currentComposition=null;var c=null;return s._register(s._textArea.onKeyDown((function(e){var t=new rg(e);(114===t.keyCode||s._currentComposition&&1===t.keyCode)&&t.stopPropagation(),t.equals(9)&&t.preventDefault(),c=t,s._onKeyDown.fire(t)}))),s._register(s._textArea.onKeyUp((function(e){var t=new rg(e);s._onKeyUp.fire(t)}))),s._register(s._textArea.onCompositionStart((function(e){var t=new j$;if(s._currentComposition)s._currentComposition=t;else{if(s._currentComposition=t,2===s._OS&&c&&c.equals(114)&&s._textAreaState.selectionStart===s._textAreaState.selectionEnd&&s._textAreaState.selectionStart>0&&s._textAreaState.value.substr(s._textAreaState.selectionStart-1,1)===e.data&&("ArrowRight"===c.code||"ArrowLeft"===c.code))return t.handleCompositionUpdate("x"),void s._onCompositionStart.fire({data:e.data});s._browser.isAndroid,s._onCompositionStart.fire({data:e.data})}}))),s._register(s._textArea.onCompositionUpdate((function(e){var t=s._currentComposition;if(t){if(s._browser.isAndroid){var n=F$.readFromTextArea(s._textArea,s._textAreaState),i=F$.deduceAndroidCompositionInput(s._textAreaState,n);return s._textAreaState=n,s._onType.fire(i),void s._onCompositionUpdate.fire(e)}var r=t.handleCompositionUpdate(e.data);s._textAreaState=F$.readFromTextArea(s._textArea,s._textAreaState),s._onType.fire(r),s._onCompositionUpdate.fire(e)}}))),s._register(s._textArea.onCompositionEnd((function(e){var t=s._currentComposition;if(t){if(s._currentComposition=null,s._browser.isAndroid){var n=F$.readFromTextArea(s._textArea,s._textAreaState),i=F$.deduceAndroidCompositionInput(s._textAreaState,n);return s._textAreaState=n,s._onType.fire(i),void s._onCompositionEnd.fire()}var r=t.handleCompositionUpdate(e.data);s._textAreaState=F$.readFromTextArea(s._textArea,s._textAreaState),s._onType.fire(r),s._onCompositionEnd.fire()}}))),s._register(s._textArea.onInput((function(e){if(s._textArea.setIgnoreSelectionChangeTime("received input event"),!s._currentComposition){var t=F$.readFromTextArea(s._textArea,s._textAreaState),n=F$.deduceInput(s._textAreaState,t,2===s._OS);(0!==n.replacePrevCharCnt||1!==n.text.length||!ff(n.text.charCodeAt(0))&&127!==n.text.charCodeAt(0))&&(s._textAreaState=t,""===n.text&&0===n.replacePrevCharCnt&&0===n.replaceNextCharCnt&&0===n.positionDelta||s._onType.fire(n))}}))),s._register(s._textArea.onCut((function(e){s._textArea.setIgnoreSelectionChangeTime("received cut event"),s._ensureClipboardGetsEditorSelection(e),s._asyncTriggerCut.schedule()}))),s._register(s._textArea.onCopy((function(e){s._ensureClipboardGetsEditorSelection(e)}))),s._register(s._textArea.onPaste((function(e){if(s._textArea.setIgnoreSelectionChangeTime("received paste event"),e.preventDefault(),e.clipboardData){var t=C(q$.getTextData(e.clipboardData),2),n=t[0],i=t[1];n&&(i=i||U$.INSTANCE.get(n),s._onPaste.fire({text:n,metadata:i}))}}))),s._register(s._textArea.onFocus((function(){var e=s._hasFocus;s._setHasFocus(!0),s._accessibilityService.isScreenReaderOptimized()&&s._browser.isSafari&&!e&&s._hasFocus&&(s._asyncFocusGainWriteScreenReaderContent.value||(s._asyncFocusGainWriteScreenReaderContent.value=new Sg((function(){return s.writeNativeTextAreaContent("asyncFocusGain")}),0)),s._asyncFocusGainWriteScreenReaderContent.value.schedule())}))),s._register(s._textArea.onBlur((function(){s._currentComposition&&(s._currentComposition=null,s.writeNativeTextAreaContent("blurWithoutCompositionEnd"),s._onCompositionEnd.fire()),s._setHasFocus(!1)}))),s._register(s._textArea.onSyntheticTap((function(){s._browser.isAndroid&&s._currentComposition&&(s._currentComposition=null,s.writeNativeTextAreaContent("tapWithoutCompositionEnd"),s._onCompositionEnd.fire())}))),s}return p(t,e),h(t,[{key:"textAreaState",get:function(){return this._textAreaState}},{key:"_installSelectionChangeListener",value:function(){var e=this,t=0;return cp(this._textArea.ownerDocument,"selectionchange",(function(n){if(RX.onSelectionChange(),e._hasFocus&&!e._currentComposition&&e._browser.isChrome){var i=Date.now(),r=i-t;if(t=i,!(r<5)){var o=i-e._textArea.getIgnoreSelectionChangeTime();if(e._textArea.resetSelectionChangeTime(),!(o<100)&&e._textAreaState.selection){var a=e._textArea.getValue();if(e._textAreaState.value===a){var s=e._textArea.getSelectionStart(),l=e._textArea.getSelectionEnd();if(e._textAreaState.selectionStart!==s||e._textAreaState.selectionEnd!==l){var u=e._textAreaState.deduceEditorPosition(s),c=e._host.deduceModelPosition(u[0],u[1],u[2]),d=e._textAreaState.deduceEditorPosition(l),h=e._host.deduceModelPosition(d[0],d[1],d[2]),f=new fd(c.lineNumber,c.column,h.lineNumber,h.column);e._onSelectionChangeRequest.fire(f)}}}}}}))}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}},{key:"focusTextArea",value:function(){this._setHasFocus(!0),this.refreshFocusState()}},{key:"isFocused",value:function(){return this._hasFocus}},{key:"refreshFocusState",value:function(){this._setHasFocus(this._textArea.hasFocus())}},{key:"_setHasFocus",value:function(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}},{key:"_setAndWriteTextAreaState",value:function(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}},{key:"writeNativeTextAreaContent",value:function(e){!this._accessibilityService.isScreenReaderOptimized()&&"render"===e||this._currentComposition||(this._logService.trace("writeTextAreaState(reason: ".concat(e,")")),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}},{key:"_ensureClipboardGetsEditorSelection",value:function(e){var t=this._host.getDataToCopy(),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};U$.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,"\n"):t.text,n),e.preventDefault(),e.clipboardData&&q$.setTextData(e.clipboardData,t.text,t.html,n)}}]),t}(Ru);K$=H$([V$(4,mR),V$(5,k_)],K$);var q$={getTextData:function(e){var t=e.getData(rk.text),n=null,i=e.getData("vscode-editor-data");if("string"==typeof i)try{1!==(n=JSON.parse(i)).version&&(n=null)}catch(e){}return 0===t.length&&null===n&&e.files.length>0?[Array.prototype.slice.call(e.files,0).map((function(e){return e.name})).join("\n"),null]:[t,n]},setTextData:function(e,t,n,i){e.setData(rk.text,t),"string"==typeof n&&e.setData("text/html",n),e.setData("vscode-editor-data",JSON.stringify(i))}},G$=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._actual=e,n.onKeyDown=n._register(new LE(n._actual,"keydown")).event,n.onKeyUp=n._register(new LE(n._actual,"keyup")).event,n.onCompositionStart=n._register(new LE(n._actual,"compositionstart")).event,n.onCompositionUpdate=n._register(new LE(n._actual,"compositionupdate")).event,n.onCompositionEnd=n._register(new LE(n._actual,"compositionend")).event,n.onBeforeInput=n._register(new LE(n._actual,"beforeinput")).event,n.onInput=n._register(new LE(n._actual,"input")).event,n.onCut=n._register(new LE(n._actual,"cut")).event,n.onCopy=n._register(new LE(n._actual,"copy")).event,n.onPaste=n._register(new LE(n._actual,"paste")).event,n.onFocus=n._register(new LE(n._actual,"focus")).event,n.onBlur=n._register(new LE(n._actual,"blur")).event,n._onSyntheticTap=n._register(new Zu),n.onSyntheticTap=n._onSyntheticTap.event,n._ignoreSelectionChangeTime=0,n._register(n.onKeyDown((function(){return RX.onKeyDown()}))),n._register(n.onBeforeInput((function(){return RX.onBeforeInput()}))),n._register(n.onInput((function(){return RX.onInput()}))),n._register(n.onKeyUp((function(){return RX.onKeyUp()}))),n._register(cp(n._actual,W$.Tap,(function(){return n._onSyntheticTap.fire()}))),n}return p(t,e),h(t,[{key:"ownerDocument",get:function(){return this._actual.ownerDocument}},{key:"hasFocus",value:function(){var e=Pp(this._actual);return e?e.activeElement===this._actual:!!this._actual.isConnected&&Op()===this._actual}},{key:"setIgnoreSelectionChangeTime",value:function(e){this._ignoreSelectionChangeTime=Date.now()}},{key:"getIgnoreSelectionChangeTime",value:function(){return this._ignoreSelectionChangeTime}},{key:"resetSelectionChangeTime",value:function(){this._ignoreSelectionChangeTime=0}},{key:"getValue",value:function(){return this._actual.value}},{key:"setValue",value:function(e,t){var n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}},{key:"getSelectionStart",value:function(){return"backward"===this._actual.selectionDirection?this._actual.selectionEnd:this._actual.selectionStart}},{key:"getSelectionEnd",value:function(){return"backward"===this._actual.selectionDirection?this._actual.selectionStart:this._actual.selectionEnd}},{key:"setSelectionRange",value:function(e,t,n){var i=this._actual,r=null,o=Pp(i);r=o?o.activeElement:Op();var a=ep(r),s=r===i,l=i.selectionStart,u=i.selectionEnd;if(s&&l===t&&u===n)Vf&&a.parent!==a&&i.focus();else{if(s)return this.setIgnoreSelectionChangeTime("setSelectionRange"),i.setSelectionRange(t,n),void(Vf&&a.parent!==a&&i.focus());try{var c=function(e){for(var t=[],n=0;e&&e.nodeType===e.ELEMENT_NODE;n++)t[n]=e.scrollTop,e=e.parentNode;return t}(i);this.setIgnoreSelectionChangeTime("setSelectionRange"),i.focus(),i.setSelectionRange(t,n),function(e,t){for(var n=0;e&&e.nodeType===e.ELEMENT_NODE;n++)e.scrollTop!==t[n]&&(e.scrollTop=t[n]),e=e.parentNode}(i,c)}catch(e){}}}}]),t}(Ru),Z$=function(e){function t(e,n,i){var r;u(this,t),(r=l(this,t,[e,n,i]))._register(JI.addTarget(r.viewHelper.linesContentDomNode)),r._register(cp(r.viewHelper.linesContentDomNode,XI.Tap,(function(e){return r.onTap(e)}))),r._register(cp(r.viewHelper.linesContentDomNode,XI.Change,(function(e){return r.onChange(e)}))),r._register(cp(r.viewHelper.linesContentDomNode,XI.Contextmenu,(function(e){return r._onContextMenu(new jX(e,!1,r.viewHelper.viewDomNode),!1)}))),r._lastPointerType="mouse",r._register(cp(r.viewHelper.linesContentDomNode,"pointerdown",(function(e){var t=e.pointerType;r._lastPointerType="mouse"!==t?"touch"===t?"touch":"pen":"mouse"})));var o=new qX(r.viewHelper.viewDomNode);return r._register(o.onPointerMove(r.viewHelper.viewDomNode,(function(e){return r._onMouseMove(e)}))),r._register(o.onPointerUp(r.viewHelper.viewDomNode,(function(e){return r._onMouseUp(e)}))),r._register(o.onPointerLeave(r.viewHelper.viewDomNode,(function(e){return r._onMouseLeave(e)}))),r._register(o.onPointerDown(r.viewHelper.viewDomNode,(function(e,t){return r._onMouseDown(e,t)}))),r}return p(t,e),h(t,[{key:"onTap",value:function(e){e.initialTarget&&this.viewHelper.linesContentDomNode.contains(e.initialTarget)&&(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}},{key:"onChange",value:function(e){"touch"===this._lastPointerType&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),"pen"===this._lastPointerType&&this._dispatchGesture(e,!0)}},{key:"_dispatchGesture",value:function(e,t){var n=this._createMouseTarget(new jX(e,!1,this.viewHelper.viewDomNode),!1);n.position&&this.viewController.dispatchMouse({position:n.position,mouseColumn:n.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:6===n.type&&null!==n.detail.injectedText})}},{key:"_onMouseDown",value:function(e,n){"touch"!==e.browserEvent.pointerType&&g(v(t.prototype),"_onMouseDown",this).call(this,e,n)}}]),t}(T$),Y$=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[e,n,i]))._register(JI.addTarget(r.viewHelper.linesContentDomNode)),r._register(cp(r.viewHelper.linesContentDomNode,XI.Tap,(function(e){return r.onTap(e)}))),r._register(cp(r.viewHelper.linesContentDomNode,XI.Change,(function(e){return r.onChange(e)}))),r._register(cp(r.viewHelper.linesContentDomNode,XI.Contextmenu,(function(e){return r._onContextMenu(new jX(e,!1,r.viewHelper.viewDomNode),!1)}))),r}return p(t,e),h(t,[{key:"onTap",value:function(e){e.preventDefault(),this.viewHelper.focusTextArea();var t=this._createMouseTarget(new jX(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){var n=document.createEvent("CustomEvent");n.initEvent(W$.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position,1)}}},{key:"onChange",value:function(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}]),t}(T$),Q$=function(e){function t(e,n,i){var r;return u(this,t),r=l(this,t),(ws||Fs&&Cs)&&Qf?r.handler=r._register(new Z$(e,n,i)):Fh.TouchEvent?r.handler=r._register(new Y$(e,n,i)):r.handler=r._register(new T$(e,n,i)),r}return p(t,e),h(t,[{key:"getTargetAtClientPoint",value:function(e,t){return this.handler.getTargetAtClientPoint(e,t)}}]),t}(Ru),X$=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),t}(XX),$$=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._context=e,n._readConfig(),n._lastCursorModelPosition=new dd(1,1),n._renderResult=null,n._activeLineNumber=1,n._context.addEventHandler(n),n}return p(t,e),h(t,[{key:"_readConfig",value:function(){var e=this._context.configuration.options;this._lineHeight=e.get(67);var t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(96);var n=e.get(146);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}},{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,g(v(t.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){return this._readConfig(),!0}},{key:"onCursorStateChanged",value:function(e){var t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);var n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),2!==this._renderLineNumbers&&3!==this._renderLineNumbers||(n=!0),n}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onDecorationsChanged",value:function(e){return e.affectsLineNumber}},{key:"_getLineRenderLineNumber",value:function(e){var t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new dd(e,1));if(1!==t.column)return"";var n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(2===this._renderLineNumbers){var i=Math.abs(this._lastCursorModelPosition.lineNumber-n);return 0===i?'<span class="relative-current-line-number">'+n+"</span>":String(i)}return 3===this._renderLineNumbers?this._lastCursorModelPosition.lineNumber===n||n%10==0||n===this._context.viewModel.getLineCount()?String(n):"":String(n)}},{key:"prepareRender",value:function(e){if(0!==this._renderLineNumbers){var n=ys?this._lineHeight%2==0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,o=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter((function(e){return!!e.options.lineNumberClassName}));o.sort((function(e,t){return hd.compareRangesUsingEnds(e.range,t.range)}));for(var a=0,s=this._context.viewModel.getLineCount(),l=[],u=i;u<=r;u++){for(var c=u-i,d=this._getLineRenderLineNumber(u),h="";a<o.length&&o[a].range.endLineNumber<u;)a++;for(var f=a;f<o.length;f++){var g=o[f],v=g.range,p=g.options;v.startLineNumber<=u&&(h+=" "+p.lineNumberClassName)}d||h?(u===s&&0===this._context.viewModel.getLineLength(u)&&("off"===this._renderFinalNewline&&(d=""),"dimmed"===this._renderFinalNewline&&(h+=" dimmed-line-number")),u===this._activeLineNumber&&(h+=" active-line-number"),l[c]='<div class="'.concat(t.CLASS_NAME).concat(n).concat(h,'" style="left:').concat(this._lineNumbersLeft,"px;width:").concat(this._lineNumbersWidth,'px;">').concat(d,"</div>")):l[c]=""}this._renderResult=l}else this._renderResult=null}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}]),t}(X$);$$.CLASS_NAME="line-numbers",VS((function(e,t){var n=e.getColor(UW),i=e.getColor(oB);i?t.addRule(".monaco-editor .line-numbers.dimmed-line-number { color: ".concat(i,"; }")):n&&t.addRule(".monaco-editor .line-numbers.dimmed-line-number { color: ".concat(n.transparent(.4),"; }"))}));var J$=function(e){function t(e){var n;u(this,t);var i=(n=l(this,t,[e]))._context.configuration.options,r=i.get(146);return n._canUseLayerHinting=!i.get(32),n._contentLeft=r.contentLeft,n._glyphMarginLeft=r.glyphMarginLeft,n._glyphMarginWidth=r.glyphMarginWidth,n._domNode=Pm(document.createElement("div")),n._domNode.setClassName(t.OUTER_CLASS_NAME),n._domNode.setPosition("absolute"),n._domNode.setAttribute("role","presentation"),n._domNode.setAttribute("aria-hidden","true"),n._glyphMarginBackgroundDomNode=Pm(document.createElement("div")),n._glyphMarginBackgroundDomNode.setClassName(t.CLASS_NAME),n._domNode.appendChild(n._glyphMarginBackgroundDomNode),n}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}},{key:"getDomNode",value:function(){return this._domNode}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,n=t.get(146);return this._canUseLayerHinting=!t.get(32),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}},{key:"onScrollChanged",value:function(e){return g(v(t.prototype),"onScrollChanged",this).call(this,e)||e.scrollTopChanged}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");var t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);var n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}]),t}($X);J$.CLASS_NAME="glyph-margin",J$.OUTER_CLASS_NAME="margin";var eJ="monaco-mouse-cursor-text",tJ=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},nJ=function(e,t){return function(n,i){t(n,i,e)}},iJ=function(){function e(t,n,i,r,o){u(this,e),this._context=t,this.modelLineNumber=n,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=r,this.distanceToModelLineEnd=o,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}return h(e,[{key:"prepareRender",value:function(e){var t=new dd(this.modelLineNumber,this.distanceToModelLineStart+1),n=new dd(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}},{key:"definePresentation",value:function(e){return this._previousPresentation||(this._previousPresentation=e||{foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}]),e}(),rJ=Vf,oJ=function(e){function t(e,n,i,r,o){var a;u(this,t),(a=l(this,t,[e]))._keybindingService=r,a._instantiationService=o,a._primaryCursorPosition=new dd(1,1),a._primaryCursorVisibleRange=null,a._viewController=n,a._visibleRangeProvider=i,a._scrollLeft=0,a._scrollTop=0;var s=a._context.configuration.options,c=s.get(146);a._setAccessibilityOptions(s),a._contentLeft=c.contentLeft,a._contentWidth=c.contentWidth,a._contentHeight=c.height,a._fontInfo=s.get(50),a._lineHeight=s.get(67),a._emptySelectionClipboard=s.get(37),a._copyWithSyntaxHighlighting=s.get(25),a._visibleTextArea=null,a._selections=[new fd(1,1,1,1)],a._modelSelections=[new fd(1,1,1,1)],a._lastRenderPosition=null,a.textArea=Pm(document.createElement("textarea")),JX.write(a.textArea,7),a.textArea.setClassName("inputarea ".concat(eJ)),a.textArea.setAttribute("wrap",a._textAreaWrapping&&!a._visibleTextArea?"on":"off");var d=a._context.viewModel.model.getOptions().tabSize;a.textArea.domNode.style.tabSize="".concat(d*a._fontInfo.spaceWidth,"px"),a.textArea.setAttribute("autocorrect","off"),a.textArea.setAttribute("autocapitalize","off"),a.textArea.setAttribute("autocomplete","off"),a.textArea.setAttribute("spellcheck","false"),a.textArea.setAttribute("aria-label",a._getAriaLabel(s)),a.textArea.setAttribute("aria-required",s.get(5)?"true":"false"),a.textArea.setAttribute("tabindex",String(s.get(125))),a.textArea.setAttribute("role","textbox"),a.textArea.setAttribute("aria-roledescription",Xa("editor","editor")),a.textArea.setAttribute("aria-multiline","true"),a.textArea.setAttribute("aria-autocomplete",s.get(92)?"none":"both"),a._ensureReadOnlyAttribute(),a.textAreaCover=Pm(document.createElement("div")),a.textAreaCover.setPosition("absolute");var h={getLineCount:function(){return a._context.viewModel.getLineCount()},getLineMaxColumn:function(e){return a._context.viewModel.getLineMaxColumn(e)},getValueInRange:function(e,t){return a._context.viewModel.getValueInRange(e,t)},getValueLengthInRange:function(e,t){return a._context.viewModel.getValueLengthInRange(e,t)},modifyPosition:function(e,t){return a._context.viewModel.modifyPosition(e,t)}},f={getDataToCopy:function(){var e=a._context.viewModel.getPlainTextToCopy(a._modelSelections,a._emptySelectionClipboard,ps),t=a._context.viewModel.model.getEOL(),n=a._emptySelectionClipboard&&1===a._modelSelections.length&&a._modelSelections[0].isEmpty(),i=Array.isArray(e)?e:null,r=Array.isArray(e)?e.join(t):e,o=void 0,s=null;if(z$.forceCopyWithSyntaxHighlighting||a._copyWithSyntaxHighlighting&&r.length<65536){var l=a._context.viewModel.getRichTextToCopy(a._modelSelections,a._emptySelectionClipboard);l&&(o=l.html,s=l.mode)}return{isFromEmptySelection:n,multicursorText:i,text:r,html:o,mode:s}},getScreenReaderContent:function(){if(1===a._accessibilitySupport){var e=a._selections[0];if(ms&&e.isEmpty()){var t=e.getStartPosition(),n=a._getWordBeforePosition(t);if(0===n.length&&(n=a._getCharacterBeforePosition(t)),n.length>0)return new F$(n,n.length,n.length,hd.fromPositions(t),0)}if(ms&&!e.isEmpty()&&h.getValueLengthInRange(e,0)<500){var i=h.getValueInRange(e,0);return new F$(i,0,i.length,e,0)}if(jf&&!e.isEmpty()){var r="vscode-placeholder";return new F$(r,0,18,null,void 0)}return F$.EMPTY}if(qf){var o=a._selections[0];if(o.isEmpty()){var s=o.getStartPosition(),l=C(a._getAndroidWordAtPosition(s),2),u=l[0],c=l[1];if(u.length>0)return new F$(u,c,c,hd.fromPositions(s),0)}return F$.EMPTY}return B$.fromEditorSelection(h,a._selections[0],a._accessibilityPageSize,0===a._accessibilitySupport)},deduceModelPosition:function(e,t,n){return a._context.viewModel.deduceModelPositionRelativeToViewPosition(e,t,n)}},g=a._register(new G$(a.textArea.domNode));return a._textAreaInput=a._register(a._instantiationService.createInstance(K$,f,g,Ns,{isAndroid:qf,isChrome:Uf,isFirefox:Vf,isSafari:jf})),a._register(a._textAreaInput.onKeyDown((function(e){a._viewController.emitKeyDown(e)}))),a._register(a._textAreaInput.onKeyUp((function(e){a._viewController.emitKeyUp(e)}))),a._register(a._textAreaInput.onPaste((function(e){var t=!1,n=null,i=null;e.metadata&&(t=a._emptySelectionClipboard&&!!e.metadata.isFromEmptySelection,n=void 0!==e.metadata.multicursorText?e.metadata.multicursorText:null,i=e.metadata.mode),a._viewController.paste(e.text,t,n,i)}))),a._register(a._textAreaInput.onCut((function(){a._viewController.cut()}))),a._register(a._textAreaInput.onType((function(e){e.replacePrevCharCnt||e.replaceNextCharCnt||e.positionDelta?a._viewController.compositionType(e.text,e.replacePrevCharCnt,e.replaceNextCharCnt,e.positionDelta):a._viewController.type(e.text)}))),a._register(a._textAreaInput.onSelectionChangeRequest((function(e){a._viewController.setSelection(e)}))),a._register(a._textAreaInput.onCompositionStart((function(e){var t=a.textArea.domNode,n=a._modelSelections[0],i=function(){var e=t.value.substring(0,Math.min(t.selectionStart,t.selectionEnd)),i=e.lastIndexOf("\n"),r=e.substring(i+1),o=r.lastIndexOf("\t"),s=r.length-o-1,l=n.getStartPosition(),u=Math.min(l.column-1,s),c=l.column-1-u,d=r.substring(0,r.length-u),h=a._context.viewModel.model.getOptions().tabSize,f=function(e,t,n,i){if(0===t.length)return 0;var r=e.createElement("div");r.style.position="absolute",r.style.top="-50000px",r.style.width="50000px";var o=e.createElement("span");Om(o,n),o.style.whiteSpace="pre",o.style.tabSize="".concat(i*n.spaceWidth,"px"),o.append(t),r.appendChild(o),e.body.appendChild(r);var a=o.offsetWidth;return r.remove(),a}(a.textArea.domNode.ownerDocument,d,a._fontInfo,h);return{distanceToModelLineStart:c,widthOfHiddenTextBefore:f}}(),r=i.distanceToModelLineStart,o=i.widthOfHiddenTextBefore,s=function(){var e=t.value.substring(Math.max(t.selectionStart,t.selectionEnd)),i=e.indexOf("\n"),r=-1===i?e:e.substring(0,i),o=r.indexOf("\t"),s=-1===o?r.length:r.length-o-1,l=n.getEndPosition(),u=Math.min(a._context.viewModel.model.getLineMaxColumn(l.lineNumber)-l.column,s);return{distanceToModelLineEnd:a._context.viewModel.model.getLineMaxColumn(l.lineNumber)-l.column-u}}().distanceToModelLineEnd;a._context.viewModel.revealRange("keyboard",!0,hd.fromPositions(a._selections[0].getStartPosition()),0,1),a._visibleTextArea=new iJ(a._context,n.startLineNumber,r,o,s),a.textArea.setAttribute("wrap",a._textAreaWrapping&&!a._visibleTextArea?"on":"off"),a._visibleTextArea.prepareRender(a._visibleRangeProvider),a._render(),a.textArea.setClassName("inputarea ".concat(eJ," ime-input")),a._viewController.compositionStart(),a._context.viewModel.onCompositionStart()}))),a._register(a._textAreaInput.onCompositionUpdate((function(e){a._visibleTextArea&&(a._visibleTextArea.prepareRender(a._visibleRangeProvider),a._render())}))),a._register(a._textAreaInput.onCompositionEnd((function(){a._visibleTextArea=null,a.textArea.setAttribute("wrap",a._textAreaWrapping&&!a._visibleTextArea?"on":"off"),a._render(),a.textArea.setClassName("inputarea ".concat(eJ)),a._viewController.compositionEnd(),a._context.viewModel.onCompositionEnd()}))),a._register(a._textAreaInput.onFocus((function(){a._context.viewModel.setHasFocus(!0)}))),a._register(a._textAreaInput.onBlur((function(){a._context.viewModel.setHasFocus(!1)}))),a._register(pA.onDidChange((function(){a._ensureReadOnlyAttribute()}))),a}return p(t,e),h(t,[{key:"writeScreenReaderContent",value:function(e){this._textAreaInput.writeNativeTextAreaContent(e)}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}},{key:"_getAndroidWordAtPosition",value:function(e){for(var t=this._context.viewModel.getLineContent(e.lineNumber),n=kw('`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',[]),i=!0,r=e.column,o=!0,a=e.column,s=0;s<50&&(i||o);){if(i&&r<=1&&(i=!1),i){var l=t.charCodeAt(r-2);0!==n.get(l)?i=!1:r--}if(o&&a>t.length&&(o=!1),o){var u=t.charCodeAt(a-1);0!==n.get(u)?o=!1:a++}s++}return[t.substring(r-1,a-1),e.column-r]}},{key:"_getWordBeforePosition",value:function(e){for(var t=this._context.viewModel.getLineContent(e.lineNumber),n=kw(this._context.configuration.options.get(132),[]),i=e.column,r=0;i>1;){var o=t.charCodeAt(i-2);if(0!==n.get(o)||r>50)return t.substring(i-1,e.column-1);r++,i--}return t.substring(0,e.column-1)}},{key:"_getCharacterBeforePosition",value:function(e){if(e.column>1){var t=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!ff(t.charCodeAt(0)))return t}return""}},{key:"_getAriaLabel",value:function(e){if(1===e.get(2)){var t,n,i,r=null===(t=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))||void 0===t?void 0:t.getAriaLabel(),o=null===(n=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))||void 0===n?void 0:n.getAriaLabel(),a=null===(i=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))||void 0===i?void 0:i.getAriaLabel(),s=Xa("accessibilityModeOff","The editor is not accessible at this time.");return r?Xa("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",s,r):o?Xa("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",s,o):a?Xa("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",s,a):s}return e.get(4)}},{key:"_setAccessibilityOptions",value:function(e){this._accessibilitySupport=e.get(2);var t=e.get(3);2===this._accessibilitySupport&&t===hu.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;var n=e.get(146).wrappingColumn;if(-1!==n&&1!==this._accessibilitySupport){var i=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(n*i.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=rJ?0:1}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,n=t.get(146);this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");var i=this._context.viewModel.model.getOptions().tabSize;return this.textArea.domNode.style.tabSize="".concat(i*this._fontInfo.spaceWidth,"px"),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(125))),(e.hasChanged(34)||e.hasChanged(92))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}},{key:"onZonesChanged",value:function(e){return!0}},{key:"isFocused",value:function(){return this._textAreaInput.isFocused()}},{key:"focusTextArea",value:function(){this._textAreaInput.focusTextArea()}},{key:"getLastRenderData",value:function(){return this._lastRenderPosition}},{key:"setAriaOptions",value:function(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}},{key:"_ensureReadOnlyAttribute",value:function(){var e=this._context.configuration.options;!pA.enabled||e.get(34)&&e.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}},{key:"prepareRender",value:function(e){var t;this._primaryCursorPosition=new dd(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),null===(t=this._visibleTextArea)||void 0===t||t.prepareRender(e)}},{key:"render",value:function(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}},{key:"_render",value:function(){if(this._visibleTextArea){var e=this._visibleTextArea.visibleTextareaStart,t=this._visibleTextArea.visibleTextareaEnd,n=this._visibleTextArea.startPosition,i=this._visibleTextArea.endPosition;if(n&&i&&e&&t&&t.left>=this._scrollLeft&&e.left<=this._scrollLeft+this._contentWidth){var r=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,o=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart)),a=this._visibleTextArea.widthOfHiddenLineTextBefore,s=this._contentLeft+e.left-this._scrollLeft,l=t.left-e.left+1;if(s<this._contentLeft){var u=this._contentLeft-s;s+=u,a+=u,l-=u}l>this._contentWidth&&(l=this._contentWidth);var c=this._context.viewModel.getViewLineData(n.lineNumber),d=c.tokens.findTokenIndexAtOffset(n.column-1),h=d===c.tokens.findTokenIndexAtOffset(i.column-1),f=this._visibleTextArea.definePresentation(h?c.tokens.getPresentation(d):null);this.textArea.domNode.scrollTop=o*this._lineHeight,this.textArea.domNode.scrollLeft=a,this._doRender({lastRenderPosition:null,top:r,left:s,width:l,height:this._lineHeight,useCover:!1,color:(Rh.getColorMap()||[])[f.foreground],italic:f.italic,bold:f.bold,underline:f.underline,strikethrough:f.strikethrough})}}else if(this._primaryCursorVisibleRange){var g=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(g<this._contentLeft||g>this._contentLeft+this._contentWidth)this._renderAtTopLeft();else{var v=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(v<0||v>this._contentHeight)this._renderAtTopLeft();else if(ms||2===this._accessibilitySupport){var p;this._doRender({lastRenderPosition:this._primaryCursorPosition,top:v,left:this._textAreaWrapping?this._contentLeft:g,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;var m=null!==(p=this._textAreaInput.textAreaState.newlineCountBeforeSelection)&&void 0!==p?p:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=m*this._lineHeight}else this._doRender({lastRenderPosition:this._primaryCursorPosition,top:v,left:this._textAreaWrapping?this._contentLeft:g,width:this._textAreaWidth,height:rJ?0:1,useCover:!1})}}else this._renderAtTopLeft()}},{key:"_newlinecount",value:function(e){for(var t=0,n=-1;;){if(-1===(n=e.indexOf("\n",n+1)))break;t++}return t}},{key:"_renderAtTopLeft",value:function(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:rJ?0:1,useCover:!0})}},{key:"_doRender",value:function(e){this._lastRenderPosition=e.lastRenderPosition;var t=this.textArea,n=this.textAreaCover;Om(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?XC.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration("".concat(e.underline?" underline":"").concat(e.strikethrough?" line-through":"")),n.setTop(e.useCover?e.top:0),n.setLeft(e.useCover?e.left:0),n.setWidth(e.useCover?e.width:0),n.setHeight(e.useCover?e.height:0);var i=this._context.configuration.options;i.get(57)?n.setClassName("monaco-editor-background textAreaCover "+J$.OUTER_CLASS_NAME):0!==i.get(68).renderType?n.setClassName("monaco-editor-background textAreaCover "+$$.CLASS_NAME):n.setClassName("monaco-editor-background textAreaCover")}}]),t}($X);oJ=tJ([nJ(3,ZI),nJ(4,Gm)],oJ);var aJ=function(){return!0},sJ=function(){return!1},lJ=function(e){return" "===e||"\t"===e},uJ=function(){function e(t,n,i,r){u(this,e),this.languageConfigurationService=r,this._cursorMoveConfigurationBrand=void 0,this._languageId=t;var o=i.options,a=o.get(146),s=o.get(50);this.readOnly=o.get(92),this.tabSize=n.tabSize,this.indentSize=n.indentSize,this.insertSpaces=n.insertSpaces,this.stickyTabStops=o.get(117),this.lineHeight=s.lineHeight,this.typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(a.height/this.lineHeight)-2),this.useTabStops=o.get(129),this.wordSeparators=o.get(132),this.emptySelectionClipboard=o.get(37),this.copyWithSyntaxHighlighting=o.get(25),this.multiCursorMergeOverlapping=o.get(77),this.multiCursorPaste=o.get(79),this.multiCursorLimit=o.get(80),this.autoClosingBrackets=o.get(6),this.autoClosingComments=o.get(7),this.autoClosingQuotes=o.get(11),this.autoClosingDelete=o.get(9),this.autoClosingOvertype=o.get(10),this.autoSurround=o.get(14),this.autoIndent=o.get(12),this.wordSegmenterLocales=o.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(t,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(t,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(t,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(t).getAutoClosingPairs();var l=this.languageConfigurationService.getLanguageConfiguration(t).getSurroundingPairs();if(l){var c=!0,d=!1,h=void 0;try{for(var f,g=l[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;this.surroundingPairs[v.open]=v.close}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}}var p,m=this.languageConfigurationService.getLanguageConfiguration(t).comments;this.blockCommentStartToken=null!==(p=null==m?void 0:m.blockCommentStartToken)&&void 0!==p?p:null}return h(e,[{key:"electricChars",get:function(){if(!this._electricChars){var e;this._electricChars={};var t=null===(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)||void 0===e?void 0:e.getElectricCharacters();if(t){var n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._electricChars[s]=!0}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}return this._electricChars}},{key:"onElectricCharacter",value:function(e,t,n){var i=gb(t,n-1),r=this.languageConfigurationService.getLanguageConfiguration(i.languageId).electricCharacter;return r?r.onElectricCharacter(e,i,n-i.firstCharOffset):null}},{key:"normalizeIndentation",value:function(e){return BB(e,this.indentSize,this.insertSpaces)}},{key:"_getShouldAutoClose",value:function(e,t,n){switch(t){case"beforeWhitespace":return lJ;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,n);case"always":return aJ;case"never":return sJ}}},{key:"_getLanguageDefinedShouldAutoClose",value:function(e,t){var n=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return function(e){return-1!==n.indexOf(e)}}},{key:"visibleColumnFromColumn",value:function(e,t){return WB.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}},{key:"columnFromVisibleColumn",value:function(e,t,n){var i=WB.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),r=e.getLineMinColumn(t);if(i<r)return r;var o=e.getLineMaxColumn(t);return i>o?o:i}}],[{key:"shouldRecreate",value:function(e){return e.hasChanged(146)||e.hasChanged(132)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(129)||e.hasChanged(50)||e.hasChanged(92)||e.hasChanged(131)}}]),e}(),cJ=function(){function e(t,n){u(this,e),this._cursorStateBrand=void 0,this.modelState=t,this.viewState=n}return h(e,[{key:"equals",value:function(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}],[{key:"fromModelState",value:function(e){return new dJ(e)}},{key:"fromViewState",value:function(e){return new hJ(e)}},{key:"fromModelSelection",value:function(t){var n=fd.liftSelection(t),i=new fJ(hd.fromPositions(n.getSelectionStart()),0,0,n.getPosition(),0);return e.fromModelState(i)}},{key:"fromModelSelections",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}}]),e}(),dJ=function e(t){u(this,e),this.modelState=t,this.viewState=null},hJ=function e(t){u(this,e),this.modelState=null,this.viewState=t},fJ=function(){function e(t,n,i,r,o){u(this,e),this.selectionStart=t,this.selectionStartKind=n,this.selectionStartLeftoverVisibleColumns=i,this.position=r,this.leftoverVisibleColumns=o,this._singleCursorStateBrand=void 0,this.selection=e._computeSelection(this.selectionStart,this.position)}return h(e,[{key:"equals",value:function(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}},{key:"hasSelection",value:function(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}},{key:"move",value:function(t,n,i,r){return t?new e(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new dd(n,i),r):new e(new hd(n,i,n,i),0,r,new dd(n,i),r)}}],[{key:"_computeSelection",value:function(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?fd.fromPositions(e.getStartPosition(),t):fd.fromPositions(e.getEndPosition(),t)}}]),e}(),gJ=function e(t,n,i){u(this,e),this._editOperationResultBrand=void 0,this.type=t,this.commands=n,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter};function vJ(e){return"'"===e||'"'===e||"`"===e}var pJ=function(){function e(){u(this,e)}return h(e,null,[{key:"columnSelect",value:function(e,t,n,i,r,o){for(var a=Math.abs(r-n)+1,s=n>r,l=i>o,u=i<o,c=[],d=0;d<a;d++){var h=n+(s?-d:d),f=e.columnFromVisibleColumn(t,h,i),g=e.columnFromVisibleColumn(t,h,o),v=e.visibleColumnFromColumn(t,new dd(h,f)),p=e.visibleColumnFromColumn(t,new dd(h,g));if(u){if(v>o)continue;if(p<i)continue}if(l){if(p>i)continue;if(v<o)continue}c.push(new fJ(new hd(h,f,h,f),0,0,new dd(h,g),0))}if(0===c.length)for(var m=0;m<a;m++){var y=n+(s?-m:m),_=t.getLineMaxColumn(y);c.push(new fJ(new hd(y,_,y,_),0,0,new dd(y,_),0))}return{viewStates:c,reversed:s,fromLineNumber:n,fromVisualColumn:i,toLineNumber:r,toVisualColumn:o}}},{key:"columnSelectLeft",value:function(t,n,i){var r=i.toViewVisualColumn;return r>0&&r--,e.columnSelect(t,n,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,r)}},{key:"columnSelectRight",value:function(e,t,n){for(var i=0,r=Math.min(n.fromViewLineNumber,n.toViewLineNumber),o=Math.max(n.fromViewLineNumber,n.toViewLineNumber),a=r;a<=o;a++){var s=t.getLineMaxColumn(a),l=e.visibleColumnFromColumn(t,new dd(a,s));i=Math.max(i,l)}var u=n.toViewVisualColumn;return u<i&&u++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,u)}},{key:"columnSelectUp",value:function(e,t,n,i){var r=i?e.pageSize:1,o=Math.max(1,n.toViewLineNumber-r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}},{key:"columnSelectDown",value:function(e,t,n,i){var r=i?e.pageSize:1,o=Math.min(t.getLineCount(),n.toViewLineNumber+r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}}]),e}(),mJ=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];u(this,e),this._range=t,this._text=n,this.insertsAutoWhitespace=i}return h(e,[{key:"getEditOperations",value:function(e,t){t.addTrackedEditOperation(this._range,this._text)}},{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations()[0].range;return fd.fromPositions(n.getEndPosition())}}]),e}(),yJ=function(){function e(t,n){u(this,e),this._range=t,this._text=n}return h(e,[{key:"getEditOperations",value:function(e,t){t.addTrackedEditOperation(this._range,this._text)}},{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations()[0].range;return fd.fromRange(n,0)}}]),e}(),_J=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];u(this,e),this._range=t,this._text=n,this.insertsAutoWhitespace=i}return h(e,[{key:"getEditOperations",value:function(e,t){t.addTrackedEditOperation(this._range,this._text)}},{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations()[0].range;return fd.fromPositions(n.getStartPosition())}}]),e}(),bJ=function(){function e(t,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];u(this,e),this._range=t,this._text=n,this._columnDeltaOffset=r,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=o}return h(e,[{key:"getEditOperations",value:function(e,t){t.addTrackedEditOperation(this._range,this._text)}},{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations()[0].range;return fd.fromPositions(n.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}]),e}(),kJ=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];u(this,e),this._range=t,this._text=n,this._initialSelection=i,this._forceMoveMarkers=r,this._selectionId=null}return h(e,[{key:"getEditOperations",value:function(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this._selectionId)}}]),e}(),wJ=function e(t,n,i){u(this,e),this._cursorPositionBrand=void 0,this.lineNumber=t,this.column=n,this.leftoverVisibleColumns=i},CJ=function(){function e(){u(this,e)}return h(e,null,[{key:"leftPosition",value:function(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-bf(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){var n=t.lineNumber-1;return new dd(n,e.getLineMaxColumn(n))}return t}},{key:"leftPositionAtomicSoftTabs",value:function(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){var i=e.getLineMinColumn(t.lineNumber),r=e.getLineContent(t.lineNumber),o=b$.atomicPosition(r,t.column-1,n,0);if(-1!==o&&o+1>=i)return new dd(t.lineNumber,o+1)}return this.leftPosition(e,t)}},{key:"left",value:function(t,n,i){var r=t.stickyTabStops?e.leftPositionAtomicSoftTabs(n,i,t.tabSize):e.leftPosition(n,i);return new wJ(r.lineNumber,r.column,0)}},{key:"moveLeft",value:function(t,n,i,r,o){var a,s;if(i.hasSelection()&&!r)a=i.selection.startLineNumber,s=i.selection.startColumn;else{var l=i.position.delta(void 0,-(o-1)),u=n.normalizePosition(e.clipPositionColumn(l,n),0),c=e.left(t,n,u);a=c.lineNumber,s=c.column}return i.move(r,a,s,0)}},{key:"clipPositionColumn",value:function(t,n){return new dd(t.lineNumber,e.clipRange(t.column,n.getLineMinColumn(t.lineNumber),n.getLineMaxColumn(t.lineNumber)))}},{key:"clipRange",value:function(e,t,n){return e<t?t:e>n?n:e}},{key:"rightPosition",value:function(e,t,n){return n<e.getLineMaxColumn(t)?n+=_f(e.getLineContent(t),n-1):t<e.getLineCount()&&(t+=1,n=e.getLineMinColumn(t)),new dd(t,n)}},{key:"rightPositionAtomicSoftTabs",value:function(e,t,n,i,r){if(n<e.getLineIndentColumn(t)){var o=e.getLineContent(t),a=b$.atomicPosition(o,n-1,i,1);if(-1!==a)return new dd(t,a+1)}return this.rightPosition(e,t,n)}},{key:"right",value:function(t,n,i){var r=t.stickyTabStops?e.rightPositionAtomicSoftTabs(n,i.lineNumber,i.column,t.tabSize,t.indentSize):e.rightPosition(n,i.lineNumber,i.column);return new wJ(r.lineNumber,r.column,0)}},{key:"moveRight",value:function(t,n,i,r,o){var a,s;if(i.hasSelection()&&!r)a=i.selection.endLineNumber,s=i.selection.endColumn;else{var l=i.position.delta(void 0,o-1),u=n.normalizePosition(e.clipPositionColumn(l,n),1),c=e.right(t,n,u);a=c.lineNumber,s=c.column}return i.move(r,a,s,0)}},{key:"vertical",value:function(e,t,n,i,r,o,a,s){var l=WB.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+r,u=t.getLineCount(),c=1===n&&1===i,d=n===u&&i===t.getLineMaxColumn(n),h=o<n?c:d;if((n=o)<1?(n=1,i=a?t.getLineMinColumn(n):Math.min(t.getLineMaxColumn(n),i)):n>u?(n=u,i=a?t.getLineMaxColumn(n):Math.min(t.getLineMaxColumn(n),i)):i=e.columnFromVisibleColumn(t,n,l),r=h?0:l-WB.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),void 0!==s){var f=new dd(n,i),g=t.normalizePosition(f,s);r+=i-g.column,n=g.lineNumber,i=g.column}return new wJ(n,i,r)}},{key:"down",value:function(e,t,n,i,r,o,a){return this.vertical(e,t,n,i,r,n+o,a,4)}},{key:"moveDown",value:function(t,n,i,r,o){var a,s;i.hasSelection()&&!r?(a=i.selection.endLineNumber,s=i.selection.endColumn):(a=i.position.lineNumber,s=i.position.column);var l,u=0;do{if(l=e.down(t,n,a+u,s,i.leftoverVisibleColumns,o,!0),n.normalizePosition(new dd(l.lineNumber,l.column),2).lineNumber>a)break}while(u++<10&&a+u<n.getLineCount());return i.move(r,l.lineNumber,l.column,l.leftoverVisibleColumns)}},{key:"translateDown",value:function(t,n,i){var r=i.selection,o=e.down(t,n,r.selectionStartLineNumber,r.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),a=e.down(t,n,r.positionLineNumber,r.positionColumn,i.leftoverVisibleColumns,1,!1);return new fJ(new hd(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new dd(a.lineNumber,a.column),a.leftoverVisibleColumns)}},{key:"up",value:function(e,t,n,i,r,o,a){return this.vertical(e,t,n,i,r,n-o,a,3)}},{key:"moveUp",value:function(t,n,i,r,o){var a,s;i.hasSelection()&&!r?(a=i.selection.startLineNumber,s=i.selection.startColumn):(a=i.position.lineNumber,s=i.position.column);var l=e.up(t,n,a,s,i.leftoverVisibleColumns,o,!0);return i.move(r,l.lineNumber,l.column,l.leftoverVisibleColumns)}},{key:"translateUp",value:function(t,n,i){var r=i.selection,o=e.up(t,n,r.selectionStartLineNumber,r.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),a=e.up(t,n,r.positionLineNumber,r.positionColumn,i.leftoverVisibleColumns,1,!1);return new fJ(new hd(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new dd(a.lineNumber,a.column),a.leftoverVisibleColumns)}},{key:"_isBlankLine",value:function(e,t){return 0===e.getLineFirstNonWhitespaceColumn(t)}},{key:"moveToPrevBlankLine",value:function(e,t,n,i){for(var r=n.position.lineNumber;r>1&&this._isBlankLine(t,r);)r--;for(;r>1&&!this._isBlankLine(t,r);)r--;return n.move(i,r,t.getLineMinColumn(r),0)}},{key:"moveToNextBlankLine",value:function(e,t,n,i){for(var r=t.getLineCount(),o=n.position.lineNumber;o<r&&this._isBlankLine(t,o);)o++;for(;o<r&&!this._isBlankLine(t,o);)o++;return n.move(i,o,t.getLineMinColumn(o),0)}},{key:"moveToBeginningOfLine",value:function(e,t,n,i){var r,o=n.position.lineNumber,a=t.getLineMinColumn(o),s=t.getLineFirstNonWhitespaceColumn(o)||a;return r=n.position.column===s?a:s,n.move(i,o,r,0)}},{key:"moveToEndOfLine",value:function(e,t,n,i,r){var o=n.position.lineNumber,a=t.getLineMaxColumn(o);return n.move(i,o,a,r?1073741824-a:0)}},{key:"moveToBeginningOfBuffer",value:function(e,t,n,i){return n.move(i,1,1,0)}},{key:"moveToEndOfBuffer",value:function(e,t,n,i){var r=t.getLineCount(),o=t.getLineMaxColumn(r);return n.move(i,r,o,0)}}]),e}(),SJ=function(){function e(){u(this,e)}return h(e,null,[{key:"deleteRight",value:function(e,t,n,i){for(var r=[],o=3!==e,a=0,s=i.length;a<s;a++){var l=i[a],u=l;if(u.isEmpty()){var c=l.getPosition(),d=CJ.right(t,n,c);u=new hd(d.lineNumber,d.column,c.lineNumber,c.column)}u.isEmpty()?r[a]=null:(u.startLineNumber!==u.endLineNumber&&(o=!0),r[a]=new mJ(u,""))}return[o,r]}},{key:"isAutoClosingPairDelete",value:function(e,t,n,i,r,o,a){if("never"===t&&"never"===n)return!1;if("never"===e)return!1;for(var s=0,l=o.length;s<l;s++){var u=o[s],c=u.getPosition();if(!u.isEmpty())return!1;var d=r.getLineContent(c.lineNumber);if(c.column<2||c.column>=d.length+1)return!1;var h=d.charAt(c.column-2),f=i.get(h);if(!f)return!1;if(vJ(h)){if("never"===n)return!1}else if("never"===t)return!1;var g=d.charAt(c.column-1),v=!1,p=!0,m=!1,y=void 0;try{for(var _,b=f[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){var k=_.value;k.open===h&&k.close===g&&(v=!0)}}catch(e){m=!0,y=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw y}}if(!v)return!1;if("auto"===e){for(var w=!1,C=0,S=a.length;C<S;C++){var x=a[C];if(c.lineNumber===x.startLineNumber&&c.column===x.startColumn){w=!0;break}}if(!w)return!1}}return!0}},{key:"_runAutoClosingPairDelete",value:function(e,t,n){for(var i=[],r=0,o=n.length;r<o;r++){var a=n[r].getPosition(),s=new hd(a.lineNumber,a.column-1,a.lineNumber,a.column+1);i[r]=new mJ(s,"")}return[!0,i]}},{key:"deleteLeft",value:function(t,n,i,r,o){if(this.isAutoClosingPairDelete(n.autoClosingDelete,n.autoClosingBrackets,n.autoClosingQuotes,n.autoClosingPairs.autoClosingPairsOpenByEnd,i,r,o))return this._runAutoClosingPairDelete(n,i,r);for(var a=[],s=2!==t,l=0,u=r.length;l<u;l++){var c=e.getDeleteRange(r[l],i,n);c.isEmpty()?a[l]=null:(c.startLineNumber!==c.endLineNumber&&(s=!0),a[l]=new mJ(c,""))}return[s,a]}},{key:"getDeleteRange",value:function(t,n,i){if(!t.isEmpty())return t;var r=t.getPosition();if(i.useTabStops&&r.column>1){var o=n.getLineContent(r.lineNumber),a=$h(o),s=-1===a?o.length+1:a+1;if(r.column<=s){var l=i.visibleColumnFromColumn(n,r),u=WB.prevIndentTabStop(l,i.indentSize),c=i.columnFromVisibleColumn(n,r.lineNumber,u);return new hd(r.lineNumber,c,r.lineNumber,r.column)}}return hd.fromPositions(e.getPositionAfterDeleteLeft(r,n),r)}},{key:"getPositionAfterDeleteLeft",value:function(e,t){if(e.column>1){var n=Af(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}if(e.lineNumber>1){var i=e.lineNumber-1;return new dd(i,t.getLineMaxColumn(i))}return e}},{key:"cut",value:function(e,t,n){var i=[],r=null;n.sort((function(e,t){return dd.compare(e.getStartPosition(),t.getEndPosition())}));for(var o=0,a=n.length;o<a;o++){var s=n[o];if(s.isEmpty())if(e.emptySelectionClipboard){var l=s.getPosition(),u=void 0,c=void 0,d=void 0,h=void 0;l.lineNumber<t.getLineCount()?(u=l.lineNumber,c=1,d=l.lineNumber+1,h=1):l.lineNumber>1&&(null==r?void 0:r.endLineNumber)!==l.lineNumber?(u=l.lineNumber-1,c=t.getLineMaxColumn(l.lineNumber-1),d=l.lineNumber,h=t.getLineMaxColumn(l.lineNumber)):(u=l.lineNumber,c=1,d=l.lineNumber,h=t.getLineMaxColumn(l.lineNumber));var f=new hd(u,c,d,h);r=f,f.isEmpty()?i[o]=null:i[o]=new mJ(f,"")}else i[o]=null;else i[o]=new mJ(s,"")}return new gJ(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}]),e}(),xJ=function(){function e(){u(this,e)}return h(e,null,[{key:"_createWord",value:function(e,t,n,i,r){return{start:i,end:r,wordType:t,nextCharClass:n}}},{key:"_createIntlWord",value:function(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}},{key:"_findPreviousWordOnLine",value:function(e,t,n){var i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}},{key:"_doFindPreviousWordOnLine",value:function(e,t,n){for(var i=0,r=t.findPrevIntlWordBeforeOrAtOffset(e,n.column-2),o=n.column-2;o>=0;o--){var a=e.charCodeAt(o),s=t.get(a);if(r&&o===r.index)return this._createIntlWord(r,s);if(0===s){if(2===i)return this._createWord(e,i,s,o+1,this._findEndOfWord(e,t,i,o+1));i=1}else if(2===s){if(1===i)return this._createWord(e,i,s,o+1,this._findEndOfWord(e,t,i,o+1));i=2}else if(1===s&&0!==i)return this._createWord(e,i,s,o+1,this._findEndOfWord(e,t,i,o+1))}return 0!==i?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}},{key:"_findEndOfWord",value:function(e,t,n,i){for(var r=t.findNextIntlWordAtOrAfterOffset(e,i),o=e.length,a=i;a<o;a++){var s=e.charCodeAt(a),l=t.get(s);if(r&&a===r.index+r.segment.length)return a;if(1===l)return a;if(1===n&&2===l)return a;if(2===n&&0===l)return a}return o}},{key:"_findNextWordOnLine",value:function(e,t,n){var i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}},{key:"_doFindNextWordOnLine",value:function(e,t,n){for(var i=0,r=e.length,o=t.findNextIntlWordAtOrAfterOffset(e,n.column-1),a=n.column-1;a<r;a++){var s=e.charCodeAt(a),l=t.get(s);if(o&&a===o.index)return this._createIntlWord(o,l);if(0===l){if(2===i)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,a-1),a);i=1}else if(2===l){if(1===i)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,a-1),a);i=2}else if(1===l&&0!==i)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,a-1),a)}return 0!==i?this._createWord(e,i,1,this._findStartOfWord(e,t,i,r-1),r):null}},{key:"_findStartOfWord",value:function(e,t,n,i){for(var r=t.findPrevIntlWordBeforeOrAtOffset(e,i),o=i;o>=0;o--){var a=e.charCodeAt(o),s=t.get(a);if(r&&o===r.index)return o;if(1===s)return o+1;if(1===n&&2===s)return o+1;if(2===n&&0===s)return o+1}return 0}},{key:"moveWordLeft",value:function(t,n,i,r,o){var a=i.lineNumber,s=i.column;1===s&&a>1&&(a-=1,s=n.getLineMaxColumn(a));var l=e._findPreviousWordOnLine(t,n,new dd(a,s));if(0===r)return new dd(a,l?l.start+1:1);if(1===r)return!o&&l&&2===l.wordType&&l.end-l.start==1&&0===l.nextCharClass&&(l=e._findPreviousWordOnLine(t,n,new dd(a,l.start+1))),new dd(a,l?l.start+1:1);if(3===r){for(;l&&2===l.wordType;)l=e._findPreviousWordOnLine(t,n,new dd(a,l.start+1));return new dd(a,l?l.start+1:1)}return l&&s<=l.end+1&&(l=e._findPreviousWordOnLine(t,n,new dd(a,l.start+1))),new dd(a,l?l.end+1:1)}},{key:"_moveWordPartLeft",value:function(e,t){var n=t.lineNumber,i=e.getLineMaxColumn(n);if(1===t.column)return n>1?new dd(n-1,e.getLineMaxColumn(n-1)):t;for(var r=e.getLineContent(n),o=t.column-1;o>1;o--){var a=r.charCodeAt(o-2),s=r.charCodeAt(o-1);if(95===a&&95!==s)return new dd(n,o);if(45===a&&45!==s)return new dd(n,o);if((sf(a)||af(a))&&lf(s))return new dd(n,o);if(lf(a)&&lf(s)&&o+1<i){var l=r.charCodeAt(o);if(sf(l)||af(l))return new dd(n,o)}}return new dd(n,1)}},{key:"moveWordRight",value:function(t,n,i,r){var o=i.lineNumber,a=i.column,s=!1;a===n.getLineMaxColumn(o)&&o<n.getLineCount()&&(s=!0,o+=1,a=1);var l=e._findNextWordOnLine(t,n,new dd(o,a));if(2===r)l&&2===l.wordType&&l.end-l.start==1&&0===l.nextCharClass&&(l=e._findNextWordOnLine(t,n,new dd(o,l.end+1))),a=l?l.end+1:n.getLineMaxColumn(o);else if(3===r){for(s&&(a=0);l&&(2===l.wordType||l.start+1<=a);)l=e._findNextWordOnLine(t,n,new dd(o,l.end+1));a=l?l.start+1:n.getLineMaxColumn(o)}else l&&!s&&a>=l.start+1&&(l=e._findNextWordOnLine(t,n,new dd(o,l.end+1))),a=l?l.start+1:n.getLineMaxColumn(o);return new dd(o,a)}},{key:"_moveWordPartRight",value:function(e,t){var n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===i)return n<e.getLineCount()?new dd(n+1,1):t;for(var r=e.getLineContent(n),o=t.column+1;o<i;o++){var a=r.charCodeAt(o-2),s=r.charCodeAt(o-1);if(95!==a&&95===s)return new dd(n,o);if(45!==a&&45===s)return new dd(n,o);if((sf(a)||af(a))&&lf(s))return new dd(n,o);if(lf(a)&&lf(s)&&o+1<i){var l=r.charCodeAt(o);if(sf(l)||af(l))return new dd(n,o)}}return new dd(n,i)}},{key:"_deleteWordLeftWhitespace",value:function(e,t){var n=e.getLineContent(t.lineNumber),i=t.column-2,r=ef(n,i);return r+1<i?new hd(t.lineNumber,r+2,t.lineNumber,t.column):null}},{key:"deleteWordLeft",value:function(t,n){var i=t.wordSeparators,r=t.model,o=t.selection,a=t.whitespaceHeuristics;if(!o.isEmpty())return o;if(SJ.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,t.model,[t.selection],t.autoClosedCharacters)){var s=t.selection.getPosition();return new hd(s.lineNumber,s.column-1,s.lineNumber,s.column+1)}var l=new dd(o.positionLineNumber,o.positionColumn),u=l.lineNumber,c=l.column;if(1===u&&1===c)return null;if(a){var d=this._deleteWordLeftWhitespace(r,l);if(d)return d}var h=e._findPreviousWordOnLine(i,r,l);return 0===n?h?c=h.start+1:c>1?c=1:(u--,c=r.getLineMaxColumn(u)):(h&&c<=h.end+1&&(h=e._findPreviousWordOnLine(i,r,new dd(u,h.start+1))),h?c=h.end+1:c>1?c=1:(u--,c=r.getLineMaxColumn(u))),new hd(u,c,l.lineNumber,l.column)}},{key:"deleteInsideWord",value:function(e,t,n){if(!n.isEmpty())return n;var i=new dd(n.positionLineNumber,n.positionColumn),r=this._deleteInsideWordWhitespace(t,i);return r||this._deleteInsideWordDetermineDeleteRange(e,t,i)}},{key:"_charAtIsWhitespace",value:function(e,t){var n=e.charCodeAt(t);return 32===n||9===n}},{key:"_deleteInsideWordWhitespace",value:function(e,t){var n=e.getLineContent(t.lineNumber),i=n.length;if(0===i)return null;var r=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,r))return null;var o=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,o))return null;for(;r>0&&this._charAtIsWhitespace(n,r-1);)r--;for(;o+1<i&&this._charAtIsWhitespace(n,o+1);)o++;return new hd(t.lineNumber,r+1,t.lineNumber,o+2)}},{key:"_deleteInsideWordDetermineDeleteRange",value:function(t,n,i){var r=this,o=n.getLineContent(i.lineNumber),a=o.length;if(0===a)return i.lineNumber>1?new hd(i.lineNumber-1,n.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<n.getLineCount()?new hd(i.lineNumber,1,i.lineNumber+1,1):new hd(i.lineNumber,1,i.lineNumber,1);var s=function(e){return e.start+1<=i.column&&i.column<=e.end+1},l=function(e,t){return e=Math.min(e,i.column),t=Math.max(t,i.column),new hd(i.lineNumber,e,i.lineNumber,t)},u=function(e){for(var t=e.start+1,n=e.end+1,i=!1;n-1<a&&r._charAtIsWhitespace(o,n-1);)i=!0,n++;if(!i)for(;t>1&&r._charAtIsWhitespace(o,t-2);)t--;return l(t,n)},c=e._findPreviousWordOnLine(t,n,i);if(c&&s(c))return u(c);var d=e._findNextWordOnLine(t,n,i);return d&&s(d)?u(d):c&&d?l(c.end+1,d.start+1):c?l(c.start+1,c.end+1):d?l(d.start+1,d.end+1):l(1,a+1)}},{key:"_deleteWordPartLeft",value:function(t,n){if(!n.isEmpty())return n;var i=n.getPosition(),r=e._moveWordPartLeft(t,i);return new hd(i.lineNumber,i.column,r.lineNumber,r.column)}},{key:"_findFirstNonWhitespaceChar",value:function(e,t){for(var n=e.length,i=t;i<n;i++){var r=e.charAt(i);if(" "!==r&&"\t"!==r)return i}return n}},{key:"_deleteWordRightWhitespace",value:function(e,t){var n=e.getLineContent(t.lineNumber),i=t.column-1,r=this._findFirstNonWhitespaceChar(n,i);return i+1<r?new hd(t.lineNumber,t.column,t.lineNumber,r+1):null}},{key:"deleteWordRight",value:function(t,n){var i=t.wordSeparators,r=t.model,o=t.selection,a=t.whitespaceHeuristics;if(!o.isEmpty())return o;var s=new dd(o.positionLineNumber,o.positionColumn),l=s.lineNumber,u=s.column,c=r.getLineCount(),d=r.getLineMaxColumn(l);if(l===c&&u===d)return null;if(a){var h=this._deleteWordRightWhitespace(r,s);if(h)return h}var f=e._findNextWordOnLine(i,r,s);return 2===n?f?u=f.end+1:u<d||l===c?u=d:(l++,u=(f=e._findNextWordOnLine(i,r,new dd(l,1)))?f.start+1:r.getLineMaxColumn(l)):(f&&u>=f.start+1&&(f=e._findNextWordOnLine(i,r,new dd(l,f.end+1))),f?u=f.start+1:u<d||l===c?u=d:(l++,u=(f=e._findNextWordOnLine(i,r,new dd(l,1)))?f.start+1:r.getLineMaxColumn(l))),new hd(l,u,s.lineNumber,s.column)}},{key:"_deleteWordPartRight",value:function(t,n){if(!n.isEmpty())return n;var i=n.getPosition(),r=e._moveWordPartRight(t,i);return new hd(i.lineNumber,i.column,r.lineNumber,r.column)}},{key:"_createWordAtPosition",value:function(e,t,n){var i=new hd(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}},{key:"getWordAtPosition",value:function(t,n,i,r){var o=kw(n,i),a=e._findPreviousWordOnLine(o,t,r);if(a&&1===a.wordType&&a.start<=r.column-1&&r.column-1<=a.end)return e._createWordAtPosition(t,r.lineNumber,a);var s=e._findNextWordOnLine(o,t,r);return s&&1===s.wordType&&s.start<=r.column-1&&r.column-1<=s.end?e._createWordAtPosition(t,r.lineNumber,s):null}},{key:"word",value:function(t,n,i,r,o){var a,s,l,u,c=kw(t.wordSeparators,t.wordSegmenterLocales),d=e._findPreviousWordOnLine(c,n,o),h=e._findNextWordOnLine(c,n,o);if(!r)return d&&1===d.wordType&&d.start<=o.column-1&&o.column-1<=d.end?(a=d.start+1,s=d.end+1):h&&1===h.wordType&&h.start<=o.column-1&&o.column-1<=h.end?(a=h.start+1,s=h.end+1):(a=d?d.end+1:1,s=h?h.start+1:n.getLineMaxColumn(o.lineNumber)),new fJ(new hd(o.lineNumber,a,o.lineNumber,s),1,0,new dd(o.lineNumber,s),0);d&&1===d.wordType&&d.start<o.column-1&&o.column-1<d.end?(l=d.start+1,u=d.end+1):h&&1===h.wordType&&h.start<o.column-1&&o.column-1<h.end?(l=h.start+1,u=h.end+1):(l=o.column,u=o.column);var f,g=o.lineNumber;if(i.selectionStart.containsPosition(o))f=i.selectionStart.endColumn;else if(o.isBeforeOrEqual(i.selectionStart.getStartPosition())){var v=new dd(g,f=l);i.selectionStart.containsPosition(v)&&(f=i.selectionStart.endColumn)}else{var p=new dd(g,f=u);i.selectionStart.containsPosition(p)&&(f=i.selectionStart.startColumn)}return i.move(!0,g,f,0)}}]),e}(),LJ=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,null,[{key:"deleteWordPartLeft",value:function(e){var t=DJ([xJ.deleteWordLeft(e,0),xJ.deleteWordLeft(e,2),xJ._deleteWordPartLeft(e.model,e.selection)]);return t.sort(hd.compareRangesUsingEnds),t[2]}},{key:"deleteWordPartRight",value:function(e){var t=DJ([xJ.deleteWordRight(e,0),xJ.deleteWordRight(e,2),xJ._deleteWordPartRight(e.model,e.selection)]);return t.sort(hd.compareRangesUsingStarts),t[0]}},{key:"moveWordPartLeft",value:function(e,t,n,i){var r=DJ([xJ.moveWordLeft(e,t,n,0,i),xJ.moveWordLeft(e,t,n,2,i),xJ._moveWordPartLeft(t,n)]);return r.sort(dd.compare),r[2]}},{key:"moveWordPartRight",value:function(e,t,n){var i=DJ([xJ.moveWordRight(e,t,n,0),xJ.moveWordRight(e,t,n,2),xJ._moveWordPartRight(t,n)]);return i.sort(dd.compare),i[0]}}]),t}(xJ);function DJ(e){return e.filter((function(e){return Boolean(e)}))}var NJ,IJ=function(){function e(){u(this,e)}return h(e,null,[{key:"addCursorDown",value:function(e,t,n){for(var i=[],r=0,o=0,a=t.length;o<a;o++){var s=t[o];i[r++]=new cJ(s.modelState,s.viewState),i[r++]=n?cJ.fromModelState(CJ.translateDown(e.cursorConfig,e.model,s.modelState)):cJ.fromViewState(CJ.translateDown(e.cursorConfig,e,s.viewState))}return i}},{key:"addCursorUp",value:function(e,t,n){for(var i=[],r=0,o=0,a=t.length;o<a;o++){var s=t[o];i[r++]=new cJ(s.modelState,s.viewState),i[r++]=n?cJ.fromModelState(CJ.translateUp(e.cursorConfig,e.model,s.modelState)):cJ.fromViewState(CJ.translateUp(e.cursorConfig,e,s.viewState))}return i}},{key:"moveToBeginningOfLine",value:function(e,t,n){for(var i=[],r=0,o=t.length;r<o;r++){var a=t[r];i[r]=this._moveToLineStart(e,a,n)}return i}},{key:"_moveToLineStart",value:function(e,t,n){var i=t.viewState.position.column,r=i===t.modelState.position.column,o=t.viewState.position.lineNumber,a=e.getLineFirstNonWhitespaceColumn(o);return r||i===a?this._moveToLineStartByModel(e,t,n):this._moveToLineStartByView(e,t,n)}},{key:"_moveToLineStartByView",value:function(e,t,n){return cJ.fromViewState(CJ.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}},{key:"_moveToLineStartByModel",value:function(e,t,n){return cJ.fromModelState(CJ.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}},{key:"moveToEndOfLine",value:function(e,t,n,i){for(var r=[],o=0,a=t.length;o<a;o++){var s=t[o];r[o]=this._moveToLineEnd(e,s,n,i)}return r}},{key:"_moveToLineEnd",value:function(e,t,n,i){var r=t.viewState.position,o=e.getLineMaxColumn(r.lineNumber),a=r.column===o,s=t.modelState.position,l=e.model.getLineMaxColumn(s.lineNumber),u=o-r.column==l-s.column;return a||u?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}},{key:"_moveToLineEndByView",value:function(e,t,n,i){return cJ.fromViewState(CJ.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}},{key:"_moveToLineEndByModel",value:function(e,t,n,i){return cJ.fromModelState(CJ.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}},{key:"expandLineSelection",value:function(e,t){for(var n=[],i=0,r=t.length;i<r;i++){var o=t[i],a=o.modelState.selection.startLineNumber,s=e.model.getLineCount(),l=o.modelState.selection.endLineNumber,u=void 0;l===s?u=e.model.getLineMaxColumn(s):(l++,u=1),n[i]=cJ.fromModelState(new fJ(new hd(a,1,a,1),0,0,new dd(l,u),0))}return n}},{key:"moveToBeginningOfBuffer",value:function(e,t,n){for(var i=[],r=0,o=t.length;r<o;r++){var a=t[r];i[r]=cJ.fromModelState(CJ.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}},{key:"moveToEndOfBuffer",value:function(e,t,n){for(var i=[],r=0,o=t.length;r<o;r++){var a=t[r];i[r]=cJ.fromModelState(CJ.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}},{key:"selectAll",value:function(e,t){var n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return cJ.fromModelState(new fJ(new hd(1,1,1,1),0,0,new dd(n,i),0))}},{key:"line",value:function(e,t,n,i,r){var o=e.model.validatePosition(i),a=r?e.coordinatesConverter.validateViewPosition(new dd(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!n){var s=e.model.getLineCount(),l=o.lineNumber+1,u=1;return l>s&&(l=s,u=e.model.getLineMaxColumn(l)),cJ.fromModelState(new fJ(new hd(o.lineNumber,1,l,u),2,0,new dd(l,u),0))}var c=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<c)return cJ.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(o.lineNumber>c){var d=e.getLineCount(),h=a.lineNumber+1,f=1;return h>d&&(h=d,f=e.getLineMaxColumn(h)),cJ.fromViewState(t.viewState.move(!0,h,f,0))}var g=t.modelState.selectionStart.getEndPosition();return cJ.fromModelState(t.modelState.move(!0,g.lineNumber,g.column,0))}},{key:"word",value:function(e,t,n,i){var r=e.model.validatePosition(i);return cJ.fromModelState(xJ.word(e.cursorConfig,e.model,t.modelState,n,r))}},{key:"cancelSelection",value:function(e,t){if(!t.modelState.hasSelection())return new cJ(t.modelState,t.viewState);var n=t.viewState.position.lineNumber,i=t.viewState.position.column;return cJ.fromViewState(new fJ(new hd(n,i,n,i),0,0,new dd(n,i),0))}},{key:"moveTo",value:function(e,t,n,i,r){if(n){if(1===t.modelState.selectionStartKind)return this.word(e,t,n,i);if(2===t.modelState.selectionStartKind)return this.line(e,t,n,i,r)}var o=e.model.validatePosition(i),a=r?e.coordinatesConverter.validateViewPosition(new dd(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return cJ.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}},{key:"simpleMove",value:function(e,t,n,i,r,o){switch(n){case 0:return 4===o?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,r);case 1:return 4===o?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,r);case 2:return 2===o?this._moveUpByViewLines(e,t,i,r):this._moveUpByModelLines(e,t,i,r);case 3:return 2===o?this._moveDownByViewLines(e,t,i,r):this._moveDownByModelLines(e,t,i,r);case 4:return 2===o?t.map((function(t){return cJ.fromViewState(CJ.moveToPrevBlankLine(e.cursorConfig,e,t.viewState,i))})):t.map((function(t){return cJ.fromModelState(CJ.moveToPrevBlankLine(e.cursorConfig,e.model,t.modelState,i))}));case 5:return 2===o?t.map((function(t){return cJ.fromViewState(CJ.moveToNextBlankLine(e.cursorConfig,e,t.viewState,i))})):t.map((function(t){return cJ.fromModelState(CJ.moveToNextBlankLine(e.cursorConfig,e.model,t.modelState,i))}));case 6:return this._moveToViewMinColumn(e,t,i);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case 8:return this._moveToViewCenterColumn(e,t,i);case 9:return this._moveToViewMaxColumn(e,t,i);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}},{key:"viewportMove",value:function(e,t,n,i,r){var o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(n){case 11:var s=this._firstLineNumberInRange(e.model,a,r),l=e.model.getLineFirstNonWhitespaceColumn(s);return[this._moveToModelPosition(e,t[0],i,s,l)];case 13:var u=this._lastLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(e,t[0],i,u,c)];case 12:var d=Math.round((a.startLineNumber+a.endLineNumber)/2),h=e.model.getLineFirstNonWhitespaceColumn(d);return[this._moveToModelPosition(e,t[0],i,d,h)];case 14:for(var f=[],g=0,v=t.length;g<v;g++){var p=t[g];f[g]=this.findPositionInViewportIfOutside(e,p,o,i)}return f;default:return null}}},{key:"findPositionInViewportIfOutside",value:function(e,t,n,i){var r,o=t.viewState.position.lineNumber;if(n.startLineNumber<=o&&o<=n.endLineNumber-1)return new cJ(t.modelState,t.viewState);r=o>n.endLineNumber-1?n.endLineNumber-1:o<n.startLineNumber?n.startLineNumber:o;var a=CJ.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return cJ.fromViewState(t.viewState.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns))}},{key:"_firstLineNumberInRange",value:function(e,t,n){var i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}},{key:"_lastLineNumberInRange",value:function(e,t,n){var i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}},{key:"_moveLeft",value:function(e,t,n,i){return t.map((function(t){return cJ.fromViewState(CJ.moveLeft(e.cursorConfig,e,t.viewState,n,i))}))}},{key:"_moveHalfLineLeft",value:function(e,t,n){for(var i=[],r=0,o=t.length;r<o;r++){var a=t[r],s=a.viewState.position.lineNumber,l=Math.round(e.getLineLength(s)/2);i[r]=cJ.fromViewState(CJ.moveLeft(e.cursorConfig,e,a.viewState,n,l))}return i}},{key:"_moveRight",value:function(e,t,n,i){return t.map((function(t){return cJ.fromViewState(CJ.moveRight(e.cursorConfig,e,t.viewState,n,i))}))}},{key:"_moveHalfLineRight",value:function(e,t,n){for(var i=[],r=0,o=t.length;r<o;r++){var a=t[r],s=a.viewState.position.lineNumber,l=Math.round(e.getLineLength(s)/2);i[r]=cJ.fromViewState(CJ.moveRight(e.cursorConfig,e,a.viewState,n,l))}return i}},{key:"_moveDownByViewLines",value:function(e,t,n,i){for(var r=[],o=0,a=t.length;o<a;o++){var s=t[o];r[o]=cJ.fromViewState(CJ.moveDown(e.cursorConfig,e,s.viewState,n,i))}return r}},{key:"_moveDownByModelLines",value:function(e,t,n,i){for(var r=[],o=0,a=t.length;o<a;o++){var s=t[o];r[o]=cJ.fromModelState(CJ.moveDown(e.cursorConfig,e.model,s.modelState,n,i))}return r}},{key:"_moveUpByViewLines",value:function(e,t,n,i){for(var r=[],o=0,a=t.length;o<a;o++){var s=t[o];r[o]=cJ.fromViewState(CJ.moveUp(e.cursorConfig,e,s.viewState,n,i))}return r}},{key:"_moveUpByModelLines",value:function(e,t,n,i){for(var r=[],o=0,a=t.length;o<a;o++){var s=t[o];r[o]=cJ.fromModelState(CJ.moveUp(e.cursorConfig,e.model,s.modelState,n,i))}return r}},{key:"_moveToViewPosition",value:function(e,t,n,i,r){return cJ.fromViewState(t.viewState.move(n,i,r,0))}},{key:"_moveToModelPosition",value:function(e,t,n,i,r){return cJ.fromModelState(t.modelState.move(n,i,r,0))}},{key:"_moveToViewMinColumn",value:function(e,t,n){for(var i=[],r=0,o=t.length;r<o;r++){var a=t[r],s=a.viewState.position.lineNumber,l=e.getLineMinColumn(s);i[r]=this._moveToViewPosition(e,a,n,s,l)}return i}},{key:"_moveToViewFirstNonWhitespaceColumn",value:function(e,t,n){for(var i=[],r=0,o=t.length;r<o;r++){var a=t[r],s=a.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(s);i[r]=this._moveToViewPosition(e,a,n,s,l)}return i}},{key:"_moveToViewCenterColumn",value:function(e,t,n){for(var i=[],r=0,o=t.length;r<o;r++){var a=t[r],s=a.viewState.position.lineNumber,l=Math.round((e.getLineMaxColumn(s)+e.getLineMinColumn(s))/2);i[r]=this._moveToViewPosition(e,a,n,s,l)}return i}},{key:"_moveToViewMaxColumn",value:function(e,t,n){for(var i=[],r=0,o=t.length;r<o;r++){var a=t[r],s=a.viewState.position.lineNumber,l=e.getLineMaxColumn(s);i[r]=this._moveToViewPosition(e,a,n,s,l)}return i}},{key:"_moveToViewLastNonWhitespaceColumn",value:function(e,t,n){for(var i=[],r=0,o=t.length;r<o;r++){var a=t[r],s=a.viewState.position.lineNumber,l=e.getLineLastNonWhitespaceColumn(s);i[r]=this._moveToViewPosition(e,a,n,s,l)}return i}}]),e}();!function(e){e.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory logical position value providing where to move the cursor.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',\n\t\t\t\t\t\t'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'\n\t\t\t\t\t\t'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'\n\t\t\t\t\t\t'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'character', 'halfLine'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'select': If 'true' makes the selection. Default is 'false'.\n\t\t\t\t",constraint:function(e){if(!Na(e))return!1;var t=e;return!!Da(t.to)&&(!(!Ra(t.select)&&!Ta(t.select))&&(!(!Ra(t.by)&&!Da(t.by))&&!(!Ra(t.value)&&!Ea(t.value))))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},e.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"},e.parse=function(t){if(!t.to)return null;var n;switch(t.to){case e.RawDirection.Left:n=0;break;case e.RawDirection.Right:n=1;break;case e.RawDirection.Up:n=2;break;case e.RawDirection.Down:n=3;break;case e.RawDirection.PrevBlankLine:n=4;break;case e.RawDirection.NextBlankLine:n=5;break;case e.RawDirection.WrappedLineStart:n=6;break;case e.RawDirection.WrappedLineFirstNonWhitespaceCharacter:n=7;break;case e.RawDirection.WrappedLineColumnCenter:n=8;break;case e.RawDirection.WrappedLineEnd:n=9;break;case e.RawDirection.WrappedLineLastNonWhitespaceCharacter:n=10;break;case e.RawDirection.ViewPortTop:n=11;break;case e.RawDirection.ViewPortBottom:n=13;break;case e.RawDirection.ViewPortCenter:n=12;break;case e.RawDirection.ViewPortIfOutside:n=14;break;default:return null}var i=0;switch(t.by){case e.RawUnit.Line:i=1;break;case e.RawUnit.WrappedLine:i=2;break;case e.RawUnit.Character:i=3;break;case e.RawUnit.HalfLine:i=4}return{direction:n,unit:i,select:!!t.select,value:t.value||1}}}(NJ||(NJ={}));var EJ=function(){function e(t,n,i){u(this,e),this._indentRulesSupport=n,this._indentationLineProcessor=new TJ(t,i)}return h(e,[{key:"shouldIncrease",value:function(e,t){var n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(n)}},{key:"shouldDecrease",value:function(e,t){var n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(n)}},{key:"shouldIgnore",value:function(e,t){var n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(n)}},{key:"shouldIndentNextLine",value:function(e,t){var n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(n)}}]),e}(),MJ=function(){function e(t,n){u(this,e),this.model=t,this.indentationLineProcessor=new TJ(t,n)}return h(e,[{key:"getProcessedTokenContextAroundRange",value:function(e){return{beforeRangeProcessedTokens:this._getProcessedTokensBeforeRange(e),afterRangeProcessedTokens:this._getProcessedTokensAfterRange(e),previousLineProcessedTokens:this._getProcessedPreviousLineTokens(e)}}},{key:"_getProcessedTokensBeforeRange",value:function(e){this.model.tokenization.forceTokenization(e.startLineNumber);var t,n=this.model.tokenization.getLineTokens(e.startLineNumber),i=gb(n,e.startColumn-1);if(RJ(this.model,e.getStartPosition())){var r=e.startColumn-1-i.firstCharOffset,o=i.firstCharOffset,a=o+r;t=n.sliceAndInflate(o,a,0)}else{var s=e.startColumn-1;t=n.sliceAndInflate(0,s,0)}return this.indentationLineProcessor.getProcessedTokens(t)}},{key:"_getProcessedTokensAfterRange",value:function(e){var t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);var n=this.model.tokenization.getLineTokens(t.lineNumber),i=gb(n,t.column-1),r=t.column-1-i.firstCharOffset,o=i.firstCharOffset+r,a=i.firstCharOffset+i.getLineLength(),s=n.sliceAndInflate(o,a,0);return this.indentationLineProcessor.getProcessedTokens(s)}},{key:"_getProcessedPreviousLineTokens",value:function(e){var t=this;this.model.tokenization.forceTokenization(e.startLineNumber);var n=gb(this.model.tokenization.getLineTokens(e.startLineNumber),e.startColumn-1),i=YT.createEmpty("",n.languageIdCodec),r=e.startLineNumber-1;if(0===r)return i;if(!(0===n.firstCharOffset))return i;var o=function(e){return t.model.tokenization.forceTokenization(e),gb(t.model.tokenization.getLineTokens(e),t.model.getLineMaxColumn(e)-1)}(r);if(!(n.languageId===o.languageId))return i;var a=o.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(a)}}]),e}(),TJ=function(){function e(t,n){u(this,e),this.model=t,this.languageConfigurationService=n}return h(e,[{key:"getProcessedLine",value:function(e,t){var n,i;null===(n=(i=this.model.tokenization).forceTokenization)||void 0===n||n.call(i,e);var r=this.model.tokenization.getLineTokens(e),o=this.getProcessedTokens(r).getLineContent();return void 0!==t&&(o=function(e,t){var n=Jh(e);return t+e.substring(n.length)}(o,t)),o}},{key:"getProcessedTokens",value:function(e){var t=e.getLanguageId(0),n=this.languageConfigurationService.getLanguageConfiguration(t).bracketsNew.getBracketRegExp({global:!0}),i=[];return e.forEach((function(t){var r=e.getStandardTokenType(t),o=e.getTokenText(t);(function(e){return 2===e||3===e||1===e})(r)&&(o=o.replace(n,""));var a=e.getMetadata(t);i.push({text:o,metadata:a})})),YT.createFromTextAndMetadata(i,e.languageIdCodec)}}]),e}();function RJ(e,t){e.tokenization.forceTokenization(t.lineNumber);var n=e.tokenization.getLineTokens(t.lineNumber),i=gb(n,t.column-1),r=0===i.firstCharOffset,o=n.getLanguageId(0)===i.languageId;return!r&&!o}function AJ(e,t,n,i){t.tokenization.forceTokenization(n.startLineNumber);var r=t.getLanguageIdAtPosition(n.startLineNumber,n.startColumn),o=i.getLanguageConfiguration(r);if(!o)return null;var a=new MJ(t,i).getProcessedTokenContextAroundRange(n),s=a.previousLineProcessedTokens.getLineContent(),l=a.beforeRangeProcessedTokens.getLineContent(),u=a.afterRangeProcessedTokens.getLineContent(),c=o.onEnter(e,s,l,u);if(!c)return null;var d=c.indentAction,h=c.appendText,f=c.removeText||0;h?d===ab.Indent&&(h="\t"+h):h=d===ab.Indent||d===ab.IndentOutdent?"\t":"";var g=Ak(t,n.startLineNumber,n.startColumn);return f&&(g=g.substring(0,g.length-f)),{indentAction:d,appendText:h,removeText:f,indentation:g}}var PJ,OJ=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},FJ=function(e,t){return function(n,i){t(n,i,e)}},WJ=Object.create(null);function BJ(e,t){if(t<=0)return"";WJ[e]||(WJ[e]=["",e]);for(var n=WJ[e],i=n.length;i<=t;i++)n[i]=n[i-1]+e;return n[t]}var HJ=PJ=function(){function e(t,n,i){u(this,e),this._languageConfigurationService=i,this._opts=n,this._selection=t,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}return h(e,[{key:"_addEditOperation",value:function(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}},{key:"getEditOperations",value:function(e,t){var n=this._selection.startLineNumber,i=this._selection.endLineNumber;1===this._selection.endColumn&&n!==i&&(i-=1);var r=this._opts,o=r.tabSize,a=r.indentSize,s=r.insertSpaces,l=n===i;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);for(var u=0,c=0,d=n;d<=i;d++,u=c){c=0;var h=e.getLineContent(d),f=$h(h);if((!this._opts.isUnshift||0!==h.length&&0!==f)&&(l||this._opts.isUnshift||0!==h.length)){if(-1===f&&(f=h.length),d>1)if(WB.visibleColumnFromColumn(h,f+1,o)%a!=0&&e.tokenization.isCheapToTokenize(d-1)){var g=AJ(this._opts.autoIndent,e,new hd(d-1,e.getLineMaxColumn(d-1),d-1,e.getLineMaxColumn(d-1)),this._languageConfigurationService);if(g){if(c=u,g.appendText)for(var v=0,p=g.appendText.length;v<p&&c<a&&32===g.appendText.charCodeAt(v);v++)c++;g.removeText&&(c=Math.max(0,c-g.removeText));for(var m=0;m<c&&(0!==f&&32===h.charCodeAt(f-1));m++)f--}}if(!this._opts.isUnshift||0!==f){var y=void 0;y=this._opts.isUnshift?PJ.unshiftIndent(h,f+1,o,a,s):PJ.shiftIndent(h,f+1,o,a,s),this._addEditOperation(t,new hd(d,1,d,f+1),y),d!==n||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&0===e.getLineLength(n)&&(this._useLastEditRangeForCursorEndPosition=!0);for(var _=s?BJ(" ",a):"\t",b=n;b<=i;b++){var k=e.getLineContent(b),w=$h(k);if((!this._opts.isUnshift||0!==k.length&&0!==w)&&((l||this._opts.isUnshift||0!==k.length)&&(-1===w&&(w=k.length),!this._opts.isUnshift||0!==w)))if(this._opts.isUnshift){w=Math.min(w,a);for(var C=0;C<w;C++){if(9===k.charCodeAt(C)){w=C+1;break}}this._addEditOperation(t,new hd(b,1,b,w+1),"")}else this._addEditOperation(t,new hd(b,1,b,1),_),b!==n||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=1===this._selection.startColumn)}}this._selectionId=t.trackSelection(this._selection)}},{key:"computeCursorState",value:function(e,t){if(this._useLastEditRangeForCursorEndPosition){var n=t.getInverseEditOperations()[0];return new fd(n.range.endLineNumber,n.range.endColumn,n.range.endLineNumber,n.range.endColumn)}var i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){var r=this._selection.startColumn;return i.startColumn<=r?i:0===i.getDirection()?new fd(i.startLineNumber,r,i.endLineNumber,i.endColumn):new fd(i.endLineNumber,i.endColumn,i.startLineNumber,r)}return i}}],[{key:"unshiftIndent",value:function(e,t,n,i,r){var o=WB.visibleColumnFromColumn(e,t,n);if(r){var a=BJ(" ",i);return BJ(a,WB.prevIndentTabStop(o,i)/i)}return BJ("\t",WB.prevRenderTabStop(o,n)/n)}},{key:"shiftIndent",value:function(e,t,n,i,r){var o=WB.visibleColumnFromColumn(e,t,n);if(r){var a=BJ(" ",i);return BJ(a,WB.nextIndentTabStop(o,i)/i)}return BJ("\t",WB.nextRenderTabStop(o,n)/n)}}]),e}();HJ=PJ=OJ([FJ(2,Ek)],HJ);var VJ=function(){function e(t,n,i){u(this,e),this._range=t,this._charBeforeSelection=n,this._charAfterSelection=i}return h(e,[{key:"getEditOperations",value:function(e,t){t.addTrackedEditOperation(new hd(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new hd(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}},{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations(),i=n[0].range,r=n[1].range;return new fd(i.endLineNumber,i.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)}}]),e}(),zJ=function(){function e(t,n,i){u(this,e),this._position=t,this._text=n,this._charAfter=i}return h(e,[{key:"getEditOperations",value:function(e,t){t.addTrackedEditOperation(new hd(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}},{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations()[0].range;return new fd(n.endLineNumber,n.startColumn,n.endLineNumber,n.endColumn-this._charAfter.length)}}]),e}();function UJ(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4?arguments[4]:void 0;if(e<4)return null;var o=r.getLanguageConfiguration(t.tokenization.getLanguageId()).indentRulesSupport;if(!o)return null;var a=new EJ(t,o,r);if(n<=1)return{indentation:"",action:null};for(var s=n-1;s>0&&""===t.getLineContent(s);s--)if(1===s)return{indentation:"",action:null};var l=function(e,t,n){var i=e.tokenization.getLanguageIdAtPosition(t,0);if(t>1){var r,o=-1;for(r=t-1;r>=1;r--){if(e.tokenization.getLanguageIdAtPosition(r,0)!==i)return o;var a=e.getLineContent(r);if(!n.shouldIgnore(r)&&!/^\s+$/.test(a)&&""!==a)return r;o=r}}return-1}(t,n,a);if(l<0)return null;if(l<1)return{indentation:"",action:null};if(a.shouldIncrease(l)||a.shouldIndentNextLine(l))return{indentation:Jh(t.getLineContent(l)),action:ab.Indent,line:l};if(a.shouldDecrease(l))return{indentation:Jh(t.getLineContent(l)),action:null,line:l};if(1===l)return{indentation:Jh(t.getLineContent(l)),action:null,line:l};var u=l-1,c=o.getIndentMetadata(t.getLineContent(u));if(!(3&c)&&4&c){for(var d=0,h=u-1;h>0;h--)if(!a.shouldIndentNextLine(h)){d=h;break}return{indentation:Jh(t.getLineContent(d+1)),action:null,line:d+1}}if(i)return{indentation:Jh(t.getLineContent(l)),action:null,line:l};for(var f=l;f>0;f--){if(a.shouldIncrease(f))return{indentation:Jh(t.getLineContent(f)),action:ab.Indent,line:f};if(a.shouldIndentNextLine(f)){for(var g=0,v=f-1;v>0;v--)if(!a.shouldIndentNextLine(f)){g=v;break}return{indentation:Jh(t.getLineContent(g+1)),action:null,line:g+1}}if(a.shouldDecrease(f))return{indentation:Jh(t.getLineContent(f)),action:null,line:f}}return{indentation:Jh(t.getLineContent(1)),action:null,line:1}}function jJ(e,t,n,i,r,o){if(e<4)return null;var a=o.getLanguageConfiguration(n);if(!a)return null;var s=o.getLanguageConfiguration(n).indentRulesSupport;if(!s)return null;var l=new EJ(t,s,o),u=UJ(e,t,i,void 0,o);if(u){var c=u.line;if(void 0!==c){for(var d=!0,h=c;h<i-1;h++)if(!/^\s*$/.test(t.getLineContent(h))){d=!1;break}if(d){var f=a.onEnter(e,"",t.getLineContent(c),"");if(f){var g=Jh(t.getLineContent(c));return f.removeText&&(g=g.substring(0,g.length-f.removeText)),f.indentAction===ab.Indent||f.indentAction===ab.IndentOutdent?g=r.shiftIndent(g):f.indentAction===ab.Outdent&&(g=r.unshiftIndent(g)),l.shouldDecrease(i)&&(g=r.unshiftIndent(g)),f.appendText&&(g+=f.appendText),Jh(g)}}}return l.shouldDecrease(i)?u.action===ab.Indent?u.indentation:r.unshiftIndent(u.indentation):u.action===ab.Indent?r.shiftIndent(u.indentation):u.indentation}return null}function KJ(e,t,n){var i=n.getLanguageConfiguration(e.getLanguageId()).indentRulesSupport;return i?t<1||t>e.getLineCount()?null:i.getIndentMetadata(e.getLineContent(t)):null}var qJ=function(){function e(){u(this,e)}return h(e,null,[{key:"getEdits",value:function(e,t,n,i,r){if(!r&&this._isAutoIndentType(e,t,n)){var o=[],a=!0,s=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value,h=this._findActualIndentationForSelection(e,t,d,i);if(null===h)return;o.push({selection:d,indentation:h})}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}var f=YJ.getAutoClosingPairClose(e,t,n,i,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,o,i,f)}}},{key:"_isAutoIndentType",value:function(e,t,n){if(e.autoIndent<4)return!1;for(var i=0,r=n.length;i<r;i++)if(!t.tokenization.isCheapToTokenize(n[i].getEndPosition().lineNumber))return!1;return!0}},{key:"_findActualIndentationForSelection",value:function(e,t,n,i){var r=function(e,t,n,i,r,o){var a=e.autoIndent;if(a<4)return null;if(RJ(t,n.getStartPosition()))return null;var s=t.getLanguageIdAtPosition(n.startLineNumber,n.startColumn),l=o.getLanguageConfiguration(s).indentRulesSupport;if(!l)return null;var u=new MJ(t,o).getProcessedTokenContextAroundRange(n),c=u.beforeRangeProcessedTokens.getLineContent(),d=u.afterRangeProcessedTokens.getLineContent(),h=c+d,f=c+i+d;if(!l.shouldDecrease(h)&&l.shouldDecrease(f)){var g=UJ(a,t,n.startLineNumber,!1,o);if(!g)return null;var v=g.indentation;return g.action!==ab.Indent&&(v=r.unshiftIndent(v)),v}var p=n.startLineNumber-1;if(p>0){var m=t.getLineContent(p);if(l.shouldIndentNextLine(m)&&l.shouldIncrease(f)){var y=UJ(a,t,n.startLineNumber,!1,o),_=null==y?void 0:y.indentation;if(void 0!==_){var b=Jh(t.getLineContent(n.startLineNumber)),k=r.shiftIndent(_)===b,w=/^\s*$/.test(h),C=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i),S=C&&C.length>0;if(k&&S&&w)return _}}}return null}(e,t,n,i,{shiftIndent:function(t){return f0(e,t)},unshiftIndent:function(t){return g0(e,t)}},e.languageConfigurationService);if(null===r)return null;var o=Ak(t,n.startLineNumber,n.startColumn);return r===e.normalizeIndentation(o)?null:r}},{key:"_getIndentationAndAutoClosingPairEdits",value:function(e,t,n,i,r){var o=this,a=n.map((function(n){var a=n.selection,s=n.indentation;if(null!==r){var l=o._getEditFromIndentationAndSelection(e,t,s,a,i,!1);return new a0(l,a,i,r)}var u=o._getEditFromIndentationAndSelection(e,t,s,a,i,!0);return h0(u.range,u.text,!1)}));return new gJ(4,a,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}},{key:"_getEditFromIndentationAndSelection",value:function(e,t,n,i,r){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=i.startLineNumber,s=t.getLineFirstNonWhitespaceColumn(a),l=e.normalizeIndentation(n);0!==s&&(l+=t.getLineContent(a).substring(s-1,i.startColumn-1));return l+=o?r:"",{range:new hd(a,1,i.endLineNumber,i.endColumn),text:l}}}]),e}(),GJ=function(){function e(){u(this,e)}return h(e,null,[{key:"getEdits",value:function(e,t,n,i,r,o){if(d0(t,n,i,r,o))return this._runAutoClosingOvertype(e,i,o)}},{key:"_runAutoClosingOvertype",value:function(e,t,n){for(var i=[],r=0,o=t.length;r<o;r++){var a=t[r].getPosition(),s=new hd(a.lineNumber,a.column,a.lineNumber,a.column+1);i[r]=new mJ(s,n)}return new gJ(4,i,{shouldPushStackElementBefore:l0(e,4),shouldPushStackElementAfter:!1})}}]),e}(),ZJ=function(){function e(){u(this,e)}return h(e,null,[{key:"getEdits",value:function(e,t,n,i,r){if(d0(e,t,n,i,r)){var o=n.map((function(e){return new mJ(new hd(e.positionLineNumber,e.positionColumn,e.positionLineNumber,e.positionColumn+1),"",!1)}));return new gJ(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}]),e}(),YJ=function(){function e(){u(this,e)}return h(e,null,[{key:"getEdits",value:function(e,t,n,i,r,o){if(!o){var a=this.getAutoClosingPairClose(e,t,n,i,r);if(null!==a)return this._runAutoClosingOpenCharType(n,i,r,a)}}},{key:"_runAutoClosingOpenCharType",value:function(e,t,n,i){for(var r=[],o=0,a=e.length;o<a;o++){var s=e[o];r[o]=new o0(s,t,!n,i)}return new gJ(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}},{key:"getAutoClosingPairClose",value:function(e,t,n,i,r){var o=!0,a=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){if(!l.value.isEmpty())return null}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var c,d,h=n.map((function(e){var t=e.getPosition();return r?{lineNumber:t.lineNumber,beforeColumn:t.column-i.length,afterColumn:t.column}:{lineNumber:t.lineNumber,beforeColumn:t.column,afterColumn:t.column}})),f=this._findAutoClosingPairOpen(e,t,h.map((function(e){return new dd(e.lineNumber,e.beforeColumn)})),i);if(!f)return null;vJ(i)?(c=e.autoClosingQuotes,d=e.shouldAutoCloseBefore.quote):!!e.blockCommentStartToken&&f.open.includes(e.blockCommentStartToken)?(c=e.autoClosingComments,d=e.shouldAutoCloseBefore.comment):(c=e.autoClosingBrackets,d=e.shouldAutoCloseBefore.bracket);if("never"===c)return null;var g=this._findContainedAutoClosingPair(e,f),v=g?g.close:"",p=!0,m=!0,y=!1,_=void 0;try{for(var b,k=h[Symbol.iterator]();!(m=(b=k.next()).done);m=!0){var w=b.value,C=w.lineNumber,S=w.beforeColumn,x=w.afterColumn,L=t.getLineContent(C),D=L.substring(0,S-1),N=L.substring(x-1);if(N.startsWith(v)||(p=!1),N.length>0){var I=N.charAt(0);if(!this._isBeforeClosingBrace(e,N)&&!d(I))return null}if(1===f.open.length&&("'"===i||'"'===i)&&"always"!==c){var E=kw(e.wordSeparators,[]);if(D.length>0){var M=D.charCodeAt(D.length-1);if(0===E.get(M))return null}}if(!t.tokenization.isCheapToTokenize(C))return null;t.tokenization.forceTokenization(C);var T=gb(t.tokenization.getLineTokens(C),S-1);if(!f.shouldAutoClose(T,S-T.firstCharOffset))return null;var R=f.findNeutralCharacter();if(R){var A=t.tokenization.getTokenTypeIfInsertingCharacter(C,S,R);if(!f.isOK(A))return null}}}catch(e){y=!0,_=e}finally{try{m||null==k.return||k.return()}finally{if(y)throw _}}return p?f.close.substring(0,f.close.length-v.length):f.close}},{key:"_findContainedAutoClosingPair",value:function(e,t){if(t.open.length<=1)return null;var n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[],r=null,o=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;c.open!==t.open&&t.open.includes(c.open)&&t.close.endsWith(c.close)&&(!r||c.open.length>r.open.length)&&(r=c)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return r}},{key:"_findAutoClosingPairOpen",value:function(e,t,n,i){var r=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!r)return null;var o=null,a=!0,s=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;if(null===o||d.open.length>o.open.length){var h=!0,f=!0,g=!1,v=void 0;try{for(var p,m=n[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value;if(t.getValueInRange(new hd(y.lineNumber,y.column-d.open.length+1,y.lineNumber,y.column))+i!==d.open){h=!1;break}}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}h&&(o=d)}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return o}},{key:"_isBeforeClosingBrace",value:function(e,t){var n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],r=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],o=i.some((function(e){return t.startsWith(e.open)})),a=r.some((function(e){return t.startsWith(e.close)}));return!o&&a}}]),e}(),QJ=function(){function e(){u(this,e)}return h(e,null,[{key:"getEdits",value:function(e,t,n,i,r){if(!r&&this._isSurroundSelectionType(e,t,n,i))return this._runSurroundSelectionType(e,n,i)}},{key:"_runSurroundSelectionType",value:function(e,t,n){for(var i=[],r=0,o=t.length;r<o;r++){var a=t[r],s=e.surroundingPairs[n];i[r]=new VJ(a,n,s)}return new gJ(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}},{key:"_isSurroundSelectionType",value:function(e,t,n,i){if(!v0(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;var r=vJ(i),o=!0,a=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;if(c.isEmpty())return!1;for(var d=!0,h=c.startLineNumber;h<=c.endLineNumber;h++){var f=t.getLineContent(h),g=h===c.startLineNumber?c.startColumn-1:0,v=h===c.endLineNumber?c.endColumn-1:f.length,p=f.substring(g,v);if(/[^ \t]/.test(p)){d=!1;break}}if(d)return!1;if(r&&c.startLineNumber===c.endLineNumber&&c.startColumn+1===c.endColumn)if(vJ(t.getValueInRange(c)))return!1}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return!0}}]),e}(),XJ=function(){function e(){u(this,e)}return h(e,null,[{key:"getEdits",value:function(e,t,n,i,r,o){if(!o&&this._isTypeInterceptorElectricChar(t,n,i)){var a=this._typeInterceptorElectricChar(e,t,n,i[0],r);if(a)return a}}},{key:"_isTypeInterceptorElectricChar",value:function(e,t,n){return!(1!==n.length||!t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}},{key:"_typeInterceptorElectricChar",value:function(e,t,n,i,r){if(!t.electricChars.hasOwnProperty(r)||!i.isEmpty())return null;var o=i.getPosition();n.tokenization.forceTokenization(o.lineNumber);var a,s=n.tokenization.getLineTokens(o.lineNumber);try{a=t.onElectricCharacter(r,s,o.column)}catch(e){return vu(e),null}if(!a)return null;if(a.matchOpenBracket){var l=(s.getLineContent()+r).lastIndexOf(a.matchOpenBracket)+1,u=n.bracketPairs.findMatchingBracketUp(a.matchOpenBracket,{lineNumber:o.lineNumber,column:l},500);if(u){if(u.startLineNumber===o.lineNumber)return null;var c=Jh(n.getLineContent(u.startLineNumber)),d=t.normalizeIndentation(c),h=n.getLineContent(o.lineNumber),f=n.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,g=d+h.substring(f-1,o.column-1)+r,v=new hd(o.lineNumber,1,o.lineNumber,o.column),p=new mJ(v,g);return new gJ(s0(g,e),[p],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}]),e}(),$J=function(){function e(){u(this,e)}return h(e,null,[{key:"getEdits",value:function(e,t,n){for(var i=[],r=0,o=t.length;r<o;r++)i[r]=new mJ(t[r],n);var a=s0(n,e);return new gJ(a,i,{shouldPushStackElementBefore:l0(e,a),shouldPushStackElementAfter:!1})}}]),e}(),JJ=function(){function e(){u(this,e)}return h(e,null,[{key:"getEdits",value:function(e,t,n,i,r){if(!r&&"\n"===i){for(var o=[],a=0,s=n.length;a<s;a++)o[a]=this._enter(e,t,!1,n[a]);return new gJ(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}},{key:"_enter",value:function(e,t,n,i){if(0===e.autoIndent)return h0(i,"\n",n);if(!t.tokenization.isCheapToTokenize(i.getStartPosition().lineNumber)||1===e.autoIndent){var r=Jh(t.getLineContent(i.startLineNumber)).substring(0,i.startColumn-1);return h0(i,"\n"+e.normalizeIndentation(r),n)}var o=AJ(e.autoIndent,t,i,e.languageConfigurationService);if(o){if(o.indentAction===ab.None)return h0(i,"\n"+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===ab.Indent)return h0(i,"\n"+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===ab.IndentOutdent){var a=e.normalizeIndentation(o.indentation),s=e.normalizeIndentation(o.indentation+o.appendText),l="\n"+s+"\n"+a;return n?new _J(i,l,!0):new bJ(i,l,-1,s.length-a.length,!0)}if(o.indentAction===ab.Outdent){var u=g0(e,o.indentation);return h0(i,"\n"+e.normalizeIndentation(u+o.appendText),n)}}var c=Jh(t.getLineContent(i.startLineNumber)).substring(0,i.startColumn-1);if(e.autoIndent>=4){var d=function(e,t,n,i,r){if(e<4)return null;var o=t.getLanguageIdAtPosition(n.startLineNumber,n.startColumn),a=r.getLanguageConfiguration(o).indentRulesSupport;if(!a)return null;t.tokenization.forceTokenization(n.startLineNumber);var s=new MJ(t,r).getProcessedTokenContextAroundRange(n),l=s.afterRangeProcessedTokens,u=s.beforeRangeProcessedTokens,c=Jh(u.getLineContent()),d=function(e,t,n){return{tokenization:{getLineTokens:function(i){return i===t?n:e.tokenization.getLineTokens(i)},getLanguageId:function(){return e.getLanguageId()},getLanguageIdAtPosition:function(t,n){return e.getLanguageIdAtPosition(t,n)}},getLineContent:function(i){return i===t?n.getLineContent():e.getLineContent(i)}}}(t,n.startLineNumber,u),h=RJ(t,n.getStartPosition()),f=Jh(t.getLineContent(n.startLineNumber)),g=UJ(e,d,n.startLineNumber+1,void 0,r);if(!g){var v=h?f:c;return{beforeEnter:v,afterEnter:v}}var p=h?f:g.indentation;return g.action===ab.Indent&&(p=i.shiftIndent(p)),a.shouldDecrease(l.getLineContent())&&(p=i.unshiftIndent(p)),{beforeEnter:h?f:c,afterEnter:p}}(e.autoIndent,t,i,{unshiftIndent:function(t){return g0(e,t)},shiftIndent:function(t){return f0(e,t)},normalizeIndentation:function(t){return e.normalizeIndentation(t)}},e.languageConfigurationService);if(d){var h=e.visibleColumnFromColumn(t,i.getEndPosition()),f=i.endColumn,g=$h(t.getLineContent(i.endLineNumber));if(i=g>=0?i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,g+1)):i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new _J(i,"\n"+e.normalizeIndentation(d.afterEnter),!0);var v=0;return f<=g+1&&(e.insertSpaces||(h=Math.ceil(h/e.indentSize)),v=Math.min(h+1-e.normalizeIndentation(d.afterEnter).length-1,0)),new bJ(i,"\n"+e.normalizeIndentation(d.afterEnter),0,v,!0)}}return h0(i,"\n"+e.normalizeIndentation(c),n)}},{key:"lineInsertBefore",value:function(e,t,n){if(null===t||null===n)return[];for(var i=[],r=0,o=n.length;r<o;r++){var a=n[r].positionLineNumber;if(1===a)i[r]=new _J(new hd(1,1,1,1),"\n");else{a--;var s=t.getLineMaxColumn(a);i[r]=this._enter(e,t,!1,new hd(a,s,a,s))}}return i}},{key:"lineInsertAfter",value:function(e,t,n){if(null===t||null===n)return[];for(var i=[],r=0,o=n.length;r<o;r++){var a=n[r].positionLineNumber,s=t.getLineMaxColumn(a);i[r]=this._enter(e,t,!1,new hd(a,s,a,s))}return i}},{key:"lineBreakInsert",value:function(e,t,n){for(var i=[],r=0,o=n.length;r<o;r++)i[r]=this._enter(e,t,!0,n[r]);return i}}]),e}(),e0=function(){function e(){u(this,e)}return h(e,null,[{key:"getEdits",value:function(e,t,n,i,r,o){var a=this._distributePasteToCursors(e,n,i,r,o);return a?(n=n.sort(hd.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,i,r)}},{key:"_distributePasteToCursors",value:function(e,t,n,i,r){if(i)return null;if(1===t.length)return null;if(r&&r.length===t.length)return r;if("spread"===e.multiCursorPaste){10===n.charCodeAt(n.length-1)&&(n=n.substring(0,n.length-1)),13===n.charCodeAt(n.length-1)&&(n=n.substring(0,n.length-1));var o=Xh(n);if(o.length===t.length)return o}return null}},{key:"_distributedPaste",value:function(e,t,n,i){for(var r=[],o=0,a=n.length;o<a;o++)r[o]=new mJ(n[o],i[o]);return new gJ(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}},{key:"_simplePaste",value:function(e,t,n,i,r){for(var o=[],a=0,s=n.length;a<s;a++){var l=n[a],u=l.getPosition();if(r&&!l.isEmpty()&&(r=!1),r&&i.indexOf("\n")!==i.length-1&&(r=!1),r){var c=new hd(u.lineNumber,1,u.lineNumber,1);o[a]=new kJ(c,i,l,!0)}else o[a]=new mJ(l,i)}return new gJ(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}]),e}(),t0=function(){function e(){u(this,e)}return h(e,null,[{key:"getEdits",value:function(e,t,n,i,r,o,a,s){var l=this,u=i.map((function(e){return l._compositionType(n,e,r,o,a,s)}));return new gJ(4,u,{shouldPushStackElementBefore:l0(e,4),shouldPushStackElementAfter:!1})}},{key:"_compositionType",value:function(e,t,n,i,r,o){if(!t.isEmpty())return null;var a=t.getPosition(),s=Math.max(1,a.column-i),l=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+r),u=new hd(a.lineNumber,s,a.lineNumber,l);return e.getValueInRange(u)===n&&0===o?null:new bJ(u,n,0,o)}}]),e}(),n0=function(){function e(){u(this,e)}return h(e,null,[{key:"getEdits",value:function(e,t,n){for(var i=[],r=0,o=t.length;r<o;r++)i[r]=new mJ(t[r],n);var a=s0(n,e);return new gJ(a,i,{shouldPushStackElementBefore:l0(e,a),shouldPushStackElementAfter:!1})}}]),e}(),i0=function(){function e(){u(this,e)}return h(e,null,[{key:"getCommands",value:function(e,t,n){for(var i=[],r=0,o=n.length;r<o;r++){var a=n[r];if(a.isEmpty()){var s=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(s)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){var l=this._goodIndentForLine(e,t,a.startLineNumber);l=l||"\t";var u=e.normalizeIndentation(l);if(!s.startsWith(u)){i[r]=new mJ(new hd(a.startLineNumber,1,a.startLineNumber,s.length+1),u,!0);continue}}i[r]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){var c=t.getLineMaxColumn(a.startLineNumber);if(1!==a.startColumn||a.endColumn!==c){i[r]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}i[r]=new HJ(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return i}},{key:"_goodIndentForLine",value:function(e,t,n){var i=null,r="",o=UJ(e.autoIndent,t,n,!1,e.languageConfigurationService);if(o)i=o.action,r=o.indentation;else if(n>1){var a;for(a=n-1;a>=1;a--){if(ef(t.getLineContent(a))>=0)break}if(a<1)return null;var s=t.getLineMaxColumn(a),l=AJ(e.autoIndent,t,new hd(a,s,a,s),e.languageConfigurationService);l&&(r=l.indentation+l.appendText)}return i&&(i===ab.Indent&&(r=f0(e,r)),i===ab.Outdent&&(r=g0(e,r)),r=e.normalizeIndentation(r)),r||null}},{key:"_replaceJumpToNextIndent",value:function(e,t,n,i){var r="",o=n.getStartPosition();if(e.insertSpaces)for(var a=e.visibleColumnFromColumn(t,o),s=e.indentSize,l=s-a%s,u=0;u<l;u++)r+=" ";else r="\t";return new mJ(n,r,i)}}]),e}(),r0=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t,[e,n,i,r]))._openCharacter=o,s._closeCharacter=a,s.closeCharacterRange=null,s.enclosingRange=null,s}return p(t,e),h(t,[{key:"_computeCursorStateWithRange",value:function(e,n,i){return this.closeCharacterRange=new hd(n.startLineNumber,n.endColumn-this._closeCharacter.length,n.endLineNumber,n.endColumn),this.enclosingRange=new hd(n.startLineNumber,n.endColumn-this._openCharacter.length-this._closeCharacter.length,n.endLineNumber,n.endColumn),g(v(t.prototype),"computeCursorState",this).call(this,e,i)}}]),t}(bJ),o0=function(e){function t(e,n,i,r){u(this,t);return l(this,t,[e,(i?n:"")+r,0,-r.length,n,r])}return p(t,e),h(t,[{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,n,t)}}]),t}(r0),a0=function(e){function t(e,n,i,r){var o;u(this,t);var a=i+r;return(o=l(this,t,[n,a,0,i.length,i,r]))._autoIndentationEdit=e,o._autoClosingEdit={range:n,text:a},o}return p(t,e),h(t,[{key:"getEditOperations",value:function(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}},{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations();if(2!==n.length)throw new Error("There should be two inverse edit operations!");var i=n[0].range,r=n[1].range,o=i.plusRange(r);return this._computeCursorStateWithRange(e,o,t)}}]),t}(r0);function s0(e,t){return" "===e?5===t||6===t?6:5:4}function l0(e,t){return!(!c0(e)||c0(t))||5!==e&&u0(e)!==u0(t)}function u0(e){return 6===e||5===e?"space":e}function c0(e){return 4===e||5===e||6===e}function d0(e,t,n,i,r){if("never"===e.autoClosingOvertype)return!1;if(!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(r))return!1;for(var o=0,a=n.length;o<a;o++){var s=n[o];if(!s.isEmpty())return!1;var l=s.getPosition(),u=t.getLineContent(l.lineNumber);if(u.charAt(l.column-1)!==r)return!1;var c=vJ(r);if(92===(l.column>2?u.charCodeAt(l.column-2):0)&&c)return!1;if("auto"===e.autoClosingOvertype){for(var d=!1,h=0,f=i.length;h<f;h++){var g=i[h];if(l.lineNumber===g.startLineNumber&&l.column===g.startColumn){d=!0;break}}if(!d)return!1}}return!0}function h0(e,t,n){return n?new _J(e,t,!0):new mJ(e,t,!0)}function f0(e,t,n){return n=n||1,HJ.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}function g0(e,t,n){return n=n||1,HJ.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}function v0(e,t){return vJ(t)?"quotes"===e.autoSurround||"languageDefined"===e.autoSurround:"brackets"===e.autoSurround||"languageDefined"===e.autoSurround}var p0,m0=function(){function e(){u(this,e)}return h(e,null,[{key:"indent",value:function(e,t,n){if(null===t||null===n)return[];for(var i=[],r=0,o=n.length;r<o;r++)i[r]=new HJ(n[r],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}},{key:"outdent",value:function(e,t,n){for(var i=[],r=0,o=n.length;r<o;r++)i[r]=new HJ(n[r],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}},{key:"paste",value:function(e,t,n,i,r,o){return e0.getEdits(e,t,n,i,r,o)}},{key:"tab",value:function(e,t,n){return i0.getCommands(e,t,n)}},{key:"compositionType",value:function(e,t,n,i,r,o,a,s){return t0.getEdits(e,t,n,i,r,o,a,s)}},{key:"compositionEndWithInterceptors",value:function(e,t,n,i,r,o){if(!i)return null;var a=null,s=!0,l=!1,u=void 0;try{for(var c,d=i[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;if(null===a)a=h.insertedText;else if(a!==h.insertedText)return null}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}if(!a||1!==a.length)return null;var f=a,g=!1,v=!0,p=!1,m=void 0;try{for(var y,_=i[Symbol.iterator]();!(v=(y=_.next()).done);v=!0){if(0!==y.value.deletedText.length){g=!0;break}}}catch(e){p=!0,m=e}finally{try{v||null==_.return||_.return()}finally{if(p)throw m}}if(g){if(!v0(t,f)||!t.surroundingPairs.hasOwnProperty(f))return null;var b=vJ(f),k=!0,w=!1,C=void 0;try{for(var S,x=i[Symbol.iterator]();!(k=(S=x.next()).done);k=!0){var L=S.value;if(0!==L.deletedSelectionStart||L.deletedSelectionEnd!==L.deletedText.length)return null;if(/^[ \t]+$/.test(L.deletedText))return null;if(b&&vJ(L.deletedText))return null}}catch(e){w=!0,C=e}finally{try{k||null==x.return||x.return()}finally{if(w)throw C}}var D=[],N=!0,I=!1,E=void 0;try{for(var M,T=r[Symbol.iterator]();!(N=(M=T.next()).done);N=!0){var R=M.value;if(!R.isEmpty())return null;D.push(R.getPosition())}}catch(e){I=!0,E=e}finally{try{N||null==T.return||T.return()}finally{if(I)throw E}}if(D.length!==i.length)return null;for(var A=[],P=0,O=D.length;P<O;P++)A.push(new zJ(D[P],i[P].deletedText,t.surroundingPairs[f]));return new gJ(4,A,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}var F=ZJ.getEdits(t,n,r,o,f);if(void 0!==F)return F;var W=YJ.getEdits(t,n,r,f,!0,!1);return void 0!==W?W:null}},{key:"typeWithInterceptors",value:function(e,t,n,i,r,o,a){var s=JJ.getEdits(n,i,r,a,e);if(void 0!==s)return s;var l=qJ.getEdits(n,i,r,a,e);if(void 0!==l)return l;var u=GJ.getEdits(t,n,i,r,o,a);if(void 0!==u)return u;var c=YJ.getEdits(n,i,r,a,!1,e);if(void 0!==c)return c;var d=QJ.getEdits(n,i,r,a,e);if(void 0!==d)return d;var h=XJ.getEdits(t,n,i,r,a,e);return void 0!==h?h:$J.getEdits(t,r,a)}},{key:"typeWithoutInterceptors",value:function(e,t,n,i,r){return n0.getEdits(e,i,r)}}]),e}(),y0=function e(t,n,i,r,o,a){u(this,e),this.deletedText=t,this.deletedSelectionStart=n,this.deletedSelectionEnd=i,this.insertedText=r,this.insertedSelectionStart=o,this.insertedSelectionEnd=a};!function(e){e.editorSimpleInput=new jy("editorSimpleInput",!1,!0),e.editorTextFocus=new jy("editorTextFocus",!1,Xa("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),e.focus=new jy("editorFocus",!1,Xa("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),e.textInputFocus=new jy("textInputFocus",!1,Xa("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),e.readOnly=new jy("editorReadonly",!1,Xa("editorReadonly","Whether the editor is read-only")),e.inDiffEditor=new jy("inDiffEditor",!1,Xa("inDiffEditor","Whether the context is a diff editor")),e.isEmbeddedDiffEditor=new jy("isEmbeddedDiffEditor",!1,Xa("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),e.inMultiDiffEditor=new jy("inMultiDiffEditor",!1,Xa("inMultiDiffEditor","Whether the context is a multi diff editor")),e.multiDiffEditorAllCollapsed=new jy("multiDiffEditorAllCollapsed",void 0,Xa("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),e.hasChanges=new jy("diffEditorHasChanges",!1,Xa("diffEditorHasChanges","Whether the diff editor has changes")),e.comparingMovedCode=new jy("comparingMovedCode",!1,Xa("comparingMovedCode","Whether a moved code block is selected for comparison")),e.accessibleDiffViewerVisible=new jy("accessibleDiffViewerVisible",!1,Xa("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),e.diffEditorRenderSideBySideInlineBreakpointReached=new jy("diffEditorRenderSideBySideInlineBreakpointReached",!1,Xa("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),e.diffEditorInlineMode=new jy("diffEditorInlineMode",!1,Xa("diffEditorInlineMode","Whether inline mode is active")),e.diffEditorOriginalWritable=new jy("diffEditorOriginalWritable",!1,Xa("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),e.diffEditorModifiedWritable=new jy("diffEditorModifiedWritable",!1,Xa("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),e.diffEditorOriginalUri=new jy("diffEditorOriginalUri","",Xa("diffEditorOriginalUri","The uri of the original document")),e.diffEditorModifiedUri=new jy("diffEditorModifiedUri","",Xa("diffEditorModifiedUri","The uri of the modified document")),e.columnSelection=new jy("editorColumnSelection",!1,Xa("editorColumnSelection","Whether `editor.columnSelection` is enabled")),e.writable=e.readOnly.toNegated(),e.hasNonEmptySelection=new jy("editorHasSelection",!1,Xa("editorHasSelection","Whether the editor has text selected")),e.hasOnlyEmptySelection=e.hasNonEmptySelection.toNegated(),e.hasMultipleSelections=new jy("editorHasMultipleSelections",!1,Xa("editorHasMultipleSelections","Whether the editor has multiple selections")),e.hasSingleSelection=e.hasMultipleSelections.toNegated(),e.tabMovesFocus=new jy("editorTabMovesFocus",!1,Xa("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),e.tabDoesNotMoveFocus=e.tabMovesFocus.toNegated(),e.isInEmbeddedEditor=new jy("isInEmbeddedEditor",!1,!0),e.canUndo=new jy("canUndo",!1,!0),e.canRedo=new jy("canRedo",!1,!0),e.hoverVisible=new jy("editorHoverVisible",!1,Xa("editorHoverVisible","Whether the editor hover is visible")),e.hoverFocused=new jy("editorHoverFocused",!1,Xa("editorHoverFocused","Whether the editor hover is focused")),e.stickyScrollFocused=new jy("stickyScrollFocused",!1,Xa("stickyScrollFocused","Whether the sticky scroll is focused")),e.stickyScrollVisible=new jy("stickyScrollVisible",!1,Xa("stickyScrollVisible","Whether the sticky scroll is visible")),e.standaloneColorPickerVisible=new jy("standaloneColorPickerVisible",!1,Xa("standaloneColorPickerVisible","Whether the standalone color picker is visible")),e.standaloneColorPickerFocused=new jy("standaloneColorPickerFocused",!1,Xa("standaloneColorPickerFocused","Whether the standalone color picker is focused")),e.inCompositeEditor=new jy("inCompositeEditor",void 0,Xa("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),e.notInCompositeEditor=e.inCompositeEditor.toNegated(),e.languageId=new jy("editorLangId","",Xa("editorLangId","The language identifier of the editor")),e.hasCompletionItemProvider=new jy("editorHasCompletionItemProvider",!1,Xa("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),e.hasCodeActionsProvider=new jy("editorHasCodeActionsProvider",!1,Xa("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),e.hasCodeLensProvider=new jy("editorHasCodeLensProvider",!1,Xa("editorHasCodeLensProvider","Whether the editor has a code lens provider")),e.hasDefinitionProvider=new jy("editorHasDefinitionProvider",!1,Xa("editorHasDefinitionProvider","Whether the editor has a definition provider")),e.hasDeclarationProvider=new jy("editorHasDeclarationProvider",!1,Xa("editorHasDeclarationProvider","Whether the editor has a declaration provider")),e.hasImplementationProvider=new jy("editorHasImplementationProvider",!1,Xa("editorHasImplementationProvider","Whether the editor has an implementation provider")),e.hasTypeDefinitionProvider=new jy("editorHasTypeDefinitionProvider",!1,Xa("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),e.hasHoverProvider=new jy("editorHasHoverProvider",!1,Xa("editorHasHoverProvider","Whether the editor has a hover provider")),e.hasDocumentHighlightProvider=new jy("editorHasDocumentHighlightProvider",!1,Xa("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),e.hasDocumentSymbolProvider=new jy("editorHasDocumentSymbolProvider",!1,Xa("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),e.hasReferenceProvider=new jy("editorHasReferenceProvider",!1,Xa("editorHasReferenceProvider","Whether the editor has a reference provider")),e.hasRenameProvider=new jy("editorHasRenameProvider",!1,Xa("editorHasRenameProvider","Whether the editor has a rename provider")),e.hasSignatureHelpProvider=new jy("editorHasSignatureHelpProvider",!1,Xa("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),e.hasInlayHintsProvider=new jy("editorHasInlayHintsProvider",!1,Xa("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),e.hasDocumentFormattingProvider=new jy("editorHasDocumentFormattingProvider",!1,Xa("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),e.hasDocumentSelectionFormattingProvider=new jy("editorHasDocumentSelectionFormattingProvider",!1,Xa("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),e.hasMultipleDocumentFormattingProvider=new jy("editorHasMultipleDocumentFormattingProvider",!1,Xa("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),e.hasMultipleDocumentSelectionFormattingProvider=new jy("editorHasMultipleDocumentSelectionFormattingProvider",!1,Xa("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))}(p0||(p0={}));var _0,b0,k0=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t,n){var i=t._getViewModel();i&&this.runCoreEditorCommand(i,n||{})}}]),t}(E_);!function(e){e.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t",constraint:function(e){if(!Na(e))return!1;var t=e;return!!Da(t.to)&&(!(!Ra(t.by)&&!Da(t.by))&&(!(!Ra(t.value)&&!Ea(t.value))&&!(!Ra(t.revealCursor)&&!Ta(t.revealCursor))))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},e.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"},e.parse=function(t){var n,i;switch(t.to){case e.RawDirection.Up:n=1;break;case e.RawDirection.Right:n=2;break;case e.RawDirection.Down:n=3;break;case e.RawDirection.Left:n=4;break;default:return null}switch(t.by){case e.RawUnit.Line:i=1;break;case e.RawUnit.WrappedLine:i=2;break;case e.RawUnit.Page:i=3;break;case e.RawUnit.HalfPage:i=4;break;case e.RawUnit.Editor:i=5;break;case e.RawUnit.Column:i=6;break;default:i=2}return{direction:n,unit:i,value:Math.floor(t.value||1),revealCursor:!!t.revealCursor,select:!!t.select}}}(_0||(_0={})),function(e){e.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t```\n\t\t\t\t",constraint:function(e){if(!Na(e))return!1;var t=e;return!(!Ea(t.lineNumber)&&!Da(t.lineNumber))&&!(!Ra(t.at)&&!Da(t.at))},schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},e.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}}(b0||(b0={}));var w0,C0=function(){function e(t){var n=this;u(this,e),t.addImplementation(1e4,"code-editor",(function(e,t){var i=e.get(Ym).getFocusedCodeEditor();return!(!i||!i.hasTextFocus())&&n._runEditorCommand(e,i,t)})),t.addImplementation(1e3,"generic-dom-input-textarea",(function(e,t){var i=Op();return!!(i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0)&&(n.runDOMCommand(i),!0)})),t.addImplementation(0,"generic-dom",(function(e,t){var i=e.get(Ym).getActiveCodeEditor();return!!i&&(i.focus(),n._runEditorCommand(e,i,t))}))}return h(e,[{key:"_runEditorCommand",value:function(e,t,n){var i=this.runEditorCommand(e,t,n);return i||!0}}]),e}();!function(e){var t=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._inSelectionMode=e.inSelectionMode,n}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[IJ.moveTo(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)])&&2!==t.revealType&&e.revealAllCursors(t.source,!0,!0))}}]),t}(k0);e.MoveTo=P_(new t({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),e.MoveToSelect=P_(new t({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));var n=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement();var n=this._getColumnSelectResult(e,e.getPrimaryCursorState(),e.getCursorColumnSelectData(),t);null!==n&&(e.setCursorStates(t.source,3,n.viewStates.map((function(e){return cJ.fromViewState(e)}))),e.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:n.fromLineNumber,fromViewVisualColumn:n.fromVisualColumn,toViewLineNumber:n.toLineNumber,toViewVisualColumn:n.toVisualColumn}),n.reversed?e.revealTopMostCursor(t.source):e.revealBottomMostCursor(t.source))}}]),t}(k0);e.ColumnSelect=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"columnSelect",precondition:void 0}])}return p(t,e),h(t,[{key:"_getColumnSelectResult",value:function(e,t,n,i){if(void 0===i.position||void 0===i.viewPosition||void 0===i.mouseColumn)return null;var r=e.model.validatePosition(i.position),o=e.coordinatesConverter.validateViewPosition(new dd(i.viewPosition.lineNumber,i.viewPosition.column),r),a=i.doColumnSelect?n.fromViewLineNumber:o.lineNumber,s=i.doColumnSelect?n.fromViewVisualColumn:i.mouseColumn-1;return pJ.columnSelect(e.cursorConfig,e,a,s,o.lineNumber,i.mouseColumn-1)}}]),t}(n))),e.CursorColumnSelectLeft=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:3599,linux:{primary:0}}}])}return p(t,e),h(t,[{key:"_getColumnSelectResult",value:function(e,t,n,i){return pJ.columnSelectLeft(e.cursorConfig,e,n)}}]),t}(n))),e.CursorColumnSelectRight=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:3601,linux:{primary:0}}}])}return p(t,e),h(t,[{key:"_getColumnSelectResult",value:function(e,t,n,i){return pJ.columnSelectRight(e.cursorConfig,e,n)}}]),t}(n)));var i=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._isPaged=e.isPaged,n}return p(t,e),h(t,[{key:"_getColumnSelectResult",value:function(e,t,n,i){return pJ.columnSelectUp(e.cursorConfig,e,n,this._isPaged)}}]),t}(n);e.CursorColumnSelectUp=P_(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:3600,linux:{primary:0}}})),e.CursorColumnSelectPageUp=P_(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:3595,linux:{primary:0}}}));var r=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._isPaged=e.isPaged,n}return p(t,e),h(t,[{key:"_getColumnSelectResult",value:function(e,t,n,i){return pJ.columnSelectDown(e.cursorConfig,e,n,this._isPaged)}}]),t}(n);e.CursorColumnSelectDown=P_(new r({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:3602,linux:{primary:0}}})),e.CursorColumnSelectPageDown=P_(new r({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:3596,linux:{primary:0}}}));var o=function(e){function t(){return u(this,t),l(this,t,[{id:"cursorMove",precondition:void 0,metadata:NJ.metadata}])}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){var n=NJ.parse(t);n&&this._runCursorMove(e,t.source,n)}},{key:"_runCursorMove",value:function(e,n,i){e.model.pushStackElement(),e.setCursorStates(n,3,t._move(e,e.getCursorStates(),i)),e.revealAllCursors(n,!0)}}],[{key:"_move",value:function(e,t,n){var i=n.select,r=n.value;switch(n.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return IJ.simpleMove(e,t,n.direction,i,r,n.unit);case 11:case 13:case 12:case 14:return IJ.viewportMove(e,t,n.direction,i,r);default:return null}}}]),t}(k0);e.CursorMoveImpl=o,e.CursorMove=P_(new o);var a=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._staticArgs=e.args,n}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){var n=this._staticArgs;-1===this._staticArgs.value&&(n={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:t.pageSize||e.cursorConfig.pageSize}),e.model.pushStackElement(),e.setCursorStates(t.source,3,IJ.simpleMove(e,e.getCursorStates(),n.direction,n.select,n.value,n.unit)),e.revealAllCursors(t.source,!0)}}]),t}(k0);e.CursorLeft=P_(new a({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),e.CursorLeftSelect=P_(new a({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:1039}})),e.CursorRight=P_(new a({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),e.CursorRightSelect=P_(new a({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:1041}})),e.CursorUp=P_(new a({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),e.CursorUpSelect=P_(new a({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),e.CursorPageUp=P_(new a({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:11}})),e.CursorPageUpSelect=P_(new a({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:1035}})),e.CursorDown=P_(new a({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),e.CursorDownSelect=P_(new a({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),e.CursorPageDown=P_(new a({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:12}})),e.CursorPageDownSelect=P_(new a({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:1036}})),e.CreateCursor=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"createCursor",precondition:void 0}])}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){if(t.position){var n;n=t.wholeLine?IJ.line(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition):IJ.moveTo(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition);var i=e.getCursorStates();if(i.length>1)for(var r=n.modelState?n.modelState.position:null,o=n.viewState?n.viewState.position:null,a=0,s=i.length;a<s;a++){var l=i[a];if((!r||l.modelState.selection.containsPosition(r))&&(!o||l.viewState.selection.containsPosition(o)))return i.splice(a,1),e.model.pushStackElement(),void e.setCursorStates(t.source,3,i)}i.push(n),e.model.pushStackElement(),e.setCursorStates(t.source,3,i)}}}]),t}(k0))),e.LastCursorMoveToSelect=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"_lastCursorMoveToSelect",precondition:void 0}])}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){if(t.position){var n=e.getLastAddedCursorIndex(),i=e.getCursorStates(),r=i.slice(0);r[n]=IJ.moveTo(e,i[n],!0,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,r)}}}]),t}(k0)));var s=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._inSelectionMode=e.inSelectionMode,n}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,IJ.moveToBeginningOfLine(e,e.getCursorStates(),this._inSelectionMode)),e.revealAllCursors(t.source,!0)}}]),t}(k0);e.CursorHome=P_(new s({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),e.CursorHomeSelect=P_(new s({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));var c=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._inSelectionMode=e.inSelectionMode,n}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e.getCursorStates())),e.revealAllCursors(t.source,!0)}},{key:"_exec",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],o=r.modelState.position.lineNumber;t[n]=cJ.fromModelState(r.modelState.move(this._inSelectionMode,o,1,0))}return t}}]),t}(k0);e.CursorLineStart=P_(new c({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:0,mac:{primary:287}}})),e.CursorLineStartSelect=P_(new c({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:0,mac:{primary:1311}}}));var d=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._inSelectionMode=e.inSelectionMode,n}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,IJ.moveToEndOfLine(e,e.getCursorStates(),this._inSelectionMode,t.sticky||!1)),e.revealAllCursors(t.source,!0)}}]),t}(k0);e.CursorEnd=P_(new d({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:p0.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:Xa("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),e.CursorEndSelect=P_(new d({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:p0.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:Xa("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));var f=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._inSelectionMode=e.inSelectionMode,n}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e,e.getCursorStates())),e.revealAllCursors(t.source,!0)}},{key:"_exec",value:function(e,t){for(var n=[],i=0,r=t.length;i<r;i++){var o=t[i],a=o.modelState.position.lineNumber,s=e.model.getLineMaxColumn(a);n[i]=cJ.fromModelState(o.modelState.move(this._inSelectionMode,a,s,0))}return n}}]),t}(k0);e.CursorLineEnd=P_(new f({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:0,mac:{primary:291}}})),e.CursorLineEndSelect=P_(new f({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:0,mac:{primary:1315}}}));var g=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._inSelectionMode=e.inSelectionMode,n}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,IJ.moveToBeginningOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealAllCursors(t.source,!0)}}]),t}(k0);e.CursorTop=P_(new g({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:2062,mac:{primary:2064}}})),e.CursorTopSelect=P_(new g({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:3086,mac:{primary:3088}}}));var v=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._inSelectionMode=e.inSelectionMode,n}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,IJ.moveToEndOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealAllCursors(t.source,!0)}}]),t}(k0);e.CursorBottom=P_(new v({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:2061,mac:{primary:2066}}})),e.CursorBottomSelect=P_(new v({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:3085,mac:{primary:3090}}}));var m=function(e){function t(){return u(this,t),l(this,t,[{id:"editorScroll",precondition:void 0,metadata:_0.metadata}])}return p(t,e),h(t,[{key:"determineScrollMethod",value:function(e){return[6].includes(e.unit)&&[4,2].includes(e.direction)?this._runHorizontalEditorScroll.bind(this):[1,2,3,4,5,6].includes(e.unit)&&[1,3].includes(e.direction)?this._runVerticalEditorScroll.bind(this):null}},{key:"runCoreEditorCommand",value:function(e,t){var n=_0.parse(t);if(n){var i=this.determineScrollMethod(n);i&&i(e,t.source,n)}}},{key:"_runVerticalEditorScroll",value:function(e,t,n){var i=this._computeDesiredScrollTop(e,n);if(n.revealCursor){var r=e.getCompletelyVisibleViewRangeAtScrollTop(i);e.setCursorStates(t,3,[IJ.findPositionInViewportIfOutside(e,e.getPrimaryCursorState(),r,n.select)])}e.viewLayout.setScrollPosition({scrollTop:i},0)}},{key:"_computeDesiredScrollTop",value:function(e,t){if(1===t.unit){var n,i=e.viewLayout.getFutureViewport(),r=e.getCompletelyVisibleViewRangeAtScrollTop(i.top),o=e.coordinatesConverter.convertViewRangeToModelRange(r);n=1===t.direction?Math.max(1,o.startLineNumber-t.value):Math.min(e.model.getLineCount(),o.startLineNumber+t.value);var a=e.coordinatesConverter.convertModelPositionToViewPosition(new dd(n,1));return e.viewLayout.getVerticalOffsetForLineNumber(a.lineNumber)}if(5===t.unit){var s=0;return 3===t.direction&&(s=e.model.getLineCount()-e.cursorConfig.pageSize),e.viewLayout.getVerticalOffsetForLineNumber(s)}var l;l=3===t.unit?e.cursorConfig.pageSize*t.value:4===t.unit?Math.round(e.cursorConfig.pageSize/2)*t.value:t.value;var u=(1===t.direction?-1:1)*l;return e.viewLayout.getCurrentScrollTop()+u*e.cursorConfig.lineHeight}},{key:"_runHorizontalEditorScroll",value:function(e,t,n){var i=this._computeDesiredScrollLeft(e,n);e.viewLayout.setScrollPosition({scrollLeft:i},0)}},{key:"_computeDesiredScrollLeft",value:function(e,t){var n=(4===t.direction?-1:1)*t.value;return e.viewLayout.getCurrentScrollLeft()+n*e.cursorConfig.typicalHalfwidthCharacterWidth}}]),t}(k0);e.EditorScrollImpl=m,e.EditorScroll=P_(new m),e.ScrollLineUp=P_(new(function(t){function n(){return u(this,n),l(this,n,[{id:"scrollLineUp",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:2064,mac:{primary:267}}}])}return p(n,t),h(n,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:_0.RawDirection.Up,by:_0.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:n.source})}}]),n}(k0))),e.ScrollPageUp=P_(new(function(t){function n(){return u(this,n),l(this,n,[{id:"scrollPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}}])}return p(n,t),h(n,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:_0.RawDirection.Up,by:_0.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:n.source})}}]),n}(k0))),e.ScrollEditorTop=P_(new(function(t){function n(){return u(this,n),l(this,n,[{id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus}}])}return p(n,t),h(n,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:_0.RawDirection.Up,by:_0.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:n.source})}}]),n}(k0))),e.ScrollLineDown=P_(new(function(t){function n(){return u(this,n),l(this,n,[{id:"scrollLineDown",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:2066,mac:{primary:268}}}])}return p(n,t),h(n,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:_0.RawDirection.Down,by:_0.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:n.source})}}]),n}(k0))),e.ScrollPageDown=P_(new(function(t){function n(){return u(this,n),l(this,n,[{id:"scrollPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}}])}return p(n,t),h(n,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:_0.RawDirection.Down,by:_0.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:n.source})}}]),n}(k0))),e.ScrollEditorBottom=P_(new(function(t){function n(){return u(this,n),l(this,n,[{id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus}}])}return p(n,t),h(n,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:_0.RawDirection.Down,by:_0.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:n.source})}}]),n}(k0))),e.ScrollLeft=P_(new(function(t){function n(){return u(this,n),l(this,n,[{id:"scrollLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus}}])}return p(n,t),h(n,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:_0.RawDirection.Left,by:_0.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:n.source})}}]),n}(k0))),e.ScrollRight=P_(new(function(t){function n(){return u(this,n),l(this,n,[{id:"scrollRight",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus}}])}return p(n,t),h(n,[{key:"runCoreEditorCommand",value:function(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:_0.RawDirection.Right,by:_0.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:n.source})}}]),n}(k0)));var y=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._inSelectionMode=e.inSelectionMode,n}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[IJ.word(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position)]),2!==t.revealType&&e.revealAllCursors(t.source,!0,!0))}}]),t}(k0);e.WordSelect=P_(new y({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),e.WordSelectDrag=P_(new y({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),e.LastCursorWordSelect=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"lastCursorWordSelect",precondition:void 0}])}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){if(t.position){var n=e.getLastAddedCursorIndex(),i=e.getCursorStates(),r=i.slice(0),o=i[n];r[n]=IJ.word(e,o,o.modelState.hasSelection(),t.position),e.model.pushStackElement(),e.setCursorStates(t.source,3,r)}}}]),t}(k0)));var _=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._inSelectionMode=e.inSelectionMode,n}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[IJ.line(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]),2!==t.revealType&&e.revealAllCursors(t.source,!1,!0))}}]),t}(k0);e.LineSelect=P_(new _({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),e.LineSelectDrag=P_(new _({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));var b=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._inSelectionMode=e.inSelectionMode,n}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){if(t.position){var n=e.getLastAddedCursorIndex(),i=e.getCursorStates(),r=i.slice(0);r[n]=IJ.line(e,i[n],this._inSelectionMode,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,r)}}}]),t}(k0);e.LastCursorLineSelect=P_(new b({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),e.LastCursorLineSelectDrag=P_(new b({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),e.CancelSelection=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"cancelSelection",precondition:p0.hasNonEmptySelection,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:9,secondary:[1033]}}])}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[IJ.cancelSelection(e,e.getPrimaryCursorState())]),e.revealAllCursors(t.source,!0)}}]),t}(k0))),e.RemoveSecondaryCursors=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"removeSecondaryCursors",precondition:p0.hasMultipleSelections,kbOpts:{weight:1,kbExpr:p0.textInputFocus,primary:9,secondary:[1033]}}])}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[e.getPrimaryCursorState()]),e.revealAllCursors(t.source,!0),bR(Xa("removedCursor","Removed secondary cursors"))}}]),t}(k0))),e.RevealLine=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"revealLine",precondition:void 0,metadata:b0.metadata}])}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){var n=t,i=n.lineNumber||0,r="number"==typeof i?i+1:parseInt(i)+1;r<1&&(r=1);var o=e.model.getLineCount();r>o&&(r=o);var a=new hd(r,1,r,e.model.getLineMaxColumn(r)),s=0;if(n.at)switch(n.at){case b0.RawAtArgument.Top:s=3;break;case b0.RawAtArgument.Center:s=1;break;case b0.RawAtArgument.Bottom:s=4}var l=e.coordinatesConverter.convertModelRangeToViewRange(a);e.revealRange(t.source,!1,l,s,0)}}]),t}(k0))),e.SelectAll=new(function(e){function t(){return u(this,t),l(this,t,[j_])}return p(t,e),h(t,[{key:"runDOMCommand",value:function(e){Vf&&(e.focus(),e.select()),e.ownerDocument.execCommand("selectAll")}},{key:"runEditorCommand",value:function(e,t,n){var i=t._getViewModel();i&&this.runCoreEditorCommand(i,n)}},{key:"runCoreEditorCommand",value:function(e,t){e.model.pushStackElement(),e.setCursorStates("keyboard",3,[IJ.selectAll(e,e.getPrimaryCursorState())])}}]),t}(C0)),e.SetSelection=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"setSelection",precondition:void 0}])}return p(t,e),h(t,[{key:"runCoreEditorCommand",value:function(e,t){t.selection&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[cJ.fromModelSelection(t.selection)]))}}]),t}(k0)))}(w0||(w0={}));var S0,x0=Sy.and(p0.textInputFocus,p0.columnSelection);function L0(e,t){o_.registerKeybindingRule({id:e,primary:t,when:x0,weight:1})}function D0(e){return e.register(),e}L0(w0.CursorColumnSelectLeft.id,1039),L0(w0.CursorColumnSelectRight.id,1041),L0(w0.CursorColumnSelectUp.id,1040),L0(w0.CursorColumnSelectPageUp.id,1035),L0(w0.CursorColumnSelectDown.id,1042),L0(w0.CursorColumnSelectPageDown.id,1036),function(e){var t=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t,n){var i=t._getViewModel();i&&this.runCoreEditingCommand(t,i,n||{})}}]),t}(E_);e.CoreEditingCommand=t,e.LineBreakInsert=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"lineBreakInsert",precondition:p0.writable,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:0,mac:{primary:301}}}])}return p(t,e),h(t,[{key:"runCoreEditingCommand",value:function(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,JJ.lineBreakInsert(t.cursorConfig,t.model,t.getCursorStates().map((function(e){return e.modelState.selection}))))}}]),t}(t))),e.Outdent=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"outdent",precondition:p0.writable,kbOpts:{weight:0,kbExpr:Sy.and(p0.editorTextFocus,p0.tabDoesNotMoveFocus),primary:1026}}])}return p(t,e),h(t,[{key:"runCoreEditingCommand",value:function(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,m0.outdent(t.cursorConfig,t.model,t.getCursorStates().map((function(e){return e.modelState.selection})))),e.pushUndoStop()}}]),t}(t))),e.Tab=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"tab",precondition:p0.writable,kbOpts:{weight:0,kbExpr:Sy.and(p0.editorTextFocus,p0.tabDoesNotMoveFocus),primary:2}}])}return p(t,e),h(t,[{key:"runCoreEditingCommand",value:function(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,m0.tab(t.cursorConfig,t.model,t.getCursorStates().map((function(e){return e.modelState.selection})))),e.pushUndoStop()}}]),t}(t))),e.DeleteLeft=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"deleteLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}}])}return p(t,e),h(t,[{key:"runCoreEditingCommand",value:function(e,t,n){var i=C(SJ.deleteLeft(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((function(e){return e.modelState.selection})),t.getCursorAutoClosedCharacters()),2),r=i[0],o=i[1];r&&e.pushUndoStop(),e.executeCommands(this.id,o),t.setPrevEditOperationType(2)}}]),t}(t))),e.DeleteRight=P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"deleteRight",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}}])}return p(t,e),h(t,[{key:"runCoreEditingCommand",value:function(e,t,n){var i=C(SJ.deleteRight(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((function(e){return e.modelState.selection}))),2),r=i[0],o=i[1];r&&e.pushUndoStop(),e.executeCommands(this.id,o),t.setPrevEditOperationType(3)}}]),t}(t))),e.Undo=new(function(e){function t(){return u(this,t),l(this,t,[z_])}return p(t,e),h(t,[{key:"runDOMCommand",value:function(e){e.ownerDocument.execCommand("undo")}},{key:"runEditorCommand",value:function(e,t,n){if(t.hasModel()&&!0!==t.getOption(92))return t.getModel().undo()}}]),t}(C0)),e.Redo=new(function(e){function t(){return u(this,t),l(this,t,[U_])}return p(t,e),h(t,[{key:"runDOMCommand",value:function(e){e.ownerDocument.execCommand("redo")}},{key:"runEditorCommand",value:function(e,t,n){if(t.hasModel()&&!0!==t.getOption(92))return t.getModel().redo()}}]),t}(C0))}(S0||(S0={}));var N0=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[{id:e,precondition:void 0,metadata:i}]))._handlerId=n,r}return p(t,e),h(t,[{key:"runCommand",value:function(e,t){var n=e.get(Ym).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}]),t}(D_);function I0(e,t){D0(new N0("default:"+e,e)),D0(new N0(e,e,t))}I0("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),I0("replacePreviousChar"),I0("compositionType"),I0("compositionStart"),I0("compositionEnd"),I0("paste"),I0("cut");var E0=function(){function e(t,n,i,r){u(this,e),this.configuration=t,this.viewModel=n,this.userInputEvents=i,this.commandDelegate=r}return h(e,[{key:"paste",value:function(e,t,n,i){this.commandDelegate.paste(e,t,n,i)}},{key:"type",value:function(e){this.commandDelegate.type(e)}},{key:"compositionType",value:function(e,t,n,i){this.commandDelegate.compositionType(e,t,n,i)}},{key:"compositionStart",value:function(){this.commandDelegate.startComposition()}},{key:"compositionEnd",value:function(){this.commandDelegate.endComposition()}},{key:"cut",value:function(){this.commandDelegate.cut()}},{key:"setSelection",value:function(e){w0.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}},{key:"_validateViewColumn",value:function(e){var t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new dd(e.lineNumber,t):e}},{key:"_hasMulticursorModifier",value:function(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}},{key:"_hasNonMulticursorModifier",value:function(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}},{key:"dispatchMouse",value:function(e){var t=this.configuration.options,n=ys&&t.get(108),i=t.get(22);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):2===e.mouseDownCount?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||i?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}},{key:"_usualArgs",value:function(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}},{key:"moveTo",value:function(e,t){w0.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_moveToSelect",value:function(e,t){w0.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_columnSelect",value:function(e,t,n){e=this._validateViewColumn(e),w0.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}},{key:"_createCursor",value:function(e,t){e=this._validateViewColumn(e),w0.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}},{key:"_lastCursorMoveToSelect",value:function(e,t){w0.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_wordSelect",value:function(e,t){w0.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_wordSelectDrag",value:function(e,t){w0.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_lastCursorWordSelect",value:function(e,t){w0.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_lineSelect",value:function(e,t){w0.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_lineSelectDrag",value:function(e,t){w0.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_lastCursorLineSelect",value:function(e,t){w0.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_lastCursorLineSelectDrag",value:function(e,t){w0.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_selectAll",value:function(){w0.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}},{key:"_convertViewToModelPosition",value:function(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}},{key:"emitKeyDown",value:function(e){this.userInputEvents.emitKeyDown(e)}},{key:"emitKeyUp",value:function(e){this.userInputEvents.emitKeyUp(e)}},{key:"emitContextMenu",value:function(e){this.userInputEvents.emitContextMenu(e)}},{key:"emitMouseMove",value:function(e){this.userInputEvents.emitMouseMove(e)}},{key:"emitMouseLeave",value:function(e){this.userInputEvents.emitMouseLeave(e)}},{key:"emitMouseUp",value:function(e){this.userInputEvents.emitMouseUp(e)}},{key:"emitMouseDown",value:function(e){this.userInputEvents.emitMouseDown(e)}},{key:"emitMouseDrag",value:function(e){this.userInputEvents.emitMouseDrag(e)}},{key:"emitMouseDrop",value:function(e){this.userInputEvents.emitMouseDrop(e)}},{key:"emitMouseDropCanceled",value:function(){this.userInputEvents.emitMouseDropCanceled()}},{key:"emitMouseWheel",value:function(e){this.userInputEvents.emitMouseWheel(e)}}]),e}(),M0=function(){function e(t){u(this,e),this._lineFactory=t,this._set(1,[])}return h(e,[{key:"flush",value:function(){this._set(1,[])}},{key:"_set",value:function(e,t){this._lines=t,this._rendLineNumberStart=e}},{key:"_get",value:function(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}},{key:"getStartLineNumber",value:function(){return this._rendLineNumberStart}},{key:"getEndLineNumber",value:function(){return this._rendLineNumberStart+this._lines.length-1}},{key:"getCount",value:function(){return this._lines.length}},{key:"getLine",value:function(e){var t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Lu("Illegal value for lineNumber");return this._lines[t]}},{key:"onLinesDeleted",value:function(e,t){if(0===this.getCount())return null;var n=this.getStartLineNumber(),i=this.getEndLineNumber();if(t<n){var r=t-e+1;return this._rendLineNumberStart-=r,null}if(e>i)return null;for(var o=0,a=0,s=n;s<=i;s++){var l=s-this._rendLineNumberStart;e<=s&&s<=t&&(0===a?(o=l,a=1):a++)}if(e<n){var u=0;u=t<n?t-e+1:n-e,this._rendLineNumberStart-=u}return this._lines.splice(o,a)}},{key:"onLinesChanged",value:function(e,t){var n=e+t-1;if(0===this.getCount())return!1;for(var i=this.getStartLineNumber(),r=this.getEndLineNumber(),o=!1,a=e;a<=n;a++)a>=i&&a<=r&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),o=!0);return o}},{key:"onLinesInserted",value:function(e,t){if(0===this.getCount())return null;var n=t-e+1,i=this.getStartLineNumber(),r=this.getEndLineNumber();if(e<=i)return this._rendLineNumberStart+=n,null;if(e>r)return null;if(n+e>r)return this._lines.splice(e-this._rendLineNumberStart,r-e+1);for(var o=[],a=0;a<n;a++)o[a]=this._lineFactory.createLine();var s=e-this._rendLineNumberStart,l=this._lines.slice(0,s),u=this._lines.slice(s,this._lines.length-n),c=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(o).concat(u),c}},{key:"onTokensChanged",value:function(e){if(0===this.getCount())return!1;for(var t=this.getStartLineNumber(),n=this.getEndLineNumber(),i=!1,r=0,o=e.length;r<o;r++){var a=e[r];if(!(a.toLineNumber<t||a.fromLineNumber>n))for(var s=Math.max(t,a.fromLineNumber),l=Math.min(n,a.toLineNumber),u=s;u<=l;u++){var c=u-this._rendLineNumberStart;this._lines[c].onTokensChanged(),i=!0}}return i}}]),e}(),T0=function(){function e(t){u(this,e),this._lineFactory=t,this.domNode=this._createDomNode(),this._linesCollection=new M0(this._lineFactory)}return h(e,[{key:"_createDomNode",value:function(){var e=Pm(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}},{key:"onConfigurationChanged",value:function(e){return!!e.hasChanged(146)}},{key:"onFlushed",value:function(e){return this._linesCollection.flush(),!0}},{key:"onLinesChanged",value:function(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}},{key:"onLinesDeleted",value:function(e){var t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(var n=0,i=t.length;n<i;n++){var r=t[n].getDomNode();null==r||r.remove()}return!0}},{key:"onLinesInserted",value:function(e){var t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(var n=0,i=t.length;n<i;n++){var r=t[n].getDomNode();null==r||r.remove()}return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onTokensChanged",value:function(e){return this._linesCollection.onTokensChanged(e.ranges)}},{key:"onZonesChanged",value:function(e){return!0}},{key:"getStartLineNumber",value:function(){return this._linesCollection.getStartLineNumber()}},{key:"getEndLineNumber",value:function(){return this._linesCollection.getEndLineNumber()}},{key:"getVisibleLine",value:function(e){return this._linesCollection.getLine(e)}},{key:"renderLines",value:function(e){var t=this._linesCollection._get(),n=new R0(this.domNode.domNode,this._lineFactory,e),i={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},r=n.render(i,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(r.rendLineNumberStart,r.lines)}}]),e}(),R0=function(){function e(t,n,i){u(this,e),this._domNode=t,this._lineFactory=n,this._viewportData=i}return h(e,[{key:"render",value:function(e,t,n,i){var r={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(r.rendLineNumberStart+r.linesLength-1<t||n<r.rendLineNumberStart){r.rendLineNumberStart=t,r.linesLength=n-t+1,r.lines=[];for(var o=t;o<=n;o++)r.lines[o-t]=this._lineFactory.createLine();return this._finishRendering(r,!0,i),r}if(this._renderUntouchedLines(r,Math.max(t-r.rendLineNumberStart,0),Math.min(n-r.rendLineNumberStart,r.linesLength-1),i,t),r.rendLineNumberStart>t){var a=t,s=Math.min(n,r.rendLineNumberStart-1);a<=s&&(this._insertLinesBefore(r,a,s,i,t),r.linesLength+=s-a+1)}else if(r.rendLineNumberStart<t){var l=Math.min(r.linesLength,t-r.rendLineNumberStart);l>0&&(this._removeLinesBefore(r,l),r.linesLength-=l)}if(r.rendLineNumberStart=t,r.rendLineNumberStart+r.linesLength-1<n){var u=r.rendLineNumberStart+r.linesLength,c=n;u<=c&&(this._insertLinesAfter(r,u,c,i,t),r.linesLength+=c-u+1)}else if(r.rendLineNumberStart+r.linesLength-1>n){var d=Math.max(0,n-r.rendLineNumberStart+1),h=r.linesLength-1-d+1;h>0&&(this._removeLinesAfter(r,h),r.linesLength-=h)}return this._finishRendering(r,!1,i),r}},{key:"_renderUntouchedLines",value:function(e,t,n,i,r){for(var o=e.rendLineNumberStart,a=e.lines,s=t;s<=n;s++){var l=o+s;a[s].layoutLine(l,i[l-r],this._viewportData.lineHeight)}}},{key:"_insertLinesBefore",value:function(e,t,n,i,r){for(var o=[],a=0,s=t;s<=n;s++)o[a++]=this._lineFactory.createLine();e.lines=o.concat(e.lines)}},{key:"_removeLinesBefore",value:function(e,t){for(var n=0;n<t;n++){var i=e.lines[n].getDomNode();null==i||i.remove()}e.lines.splice(0,t)}},{key:"_insertLinesAfter",value:function(e,t,n,i,r){for(var o=[],a=0,s=t;s<=n;s++)o[a++]=this._lineFactory.createLine();e.lines=e.lines.concat(o)}},{key:"_removeLinesAfter",value:function(e,t){for(var n=e.linesLength-t,i=0;i<t;i++){var r=e.lines[n+i].getDomNode();null==r||r.remove()}e.lines.splice(n,t)}},{key:"_finishRenderingNewLines",value:function(t,n,i,r){e._ttPolicy&&(i=e._ttPolicy.createHTML(i));var o=this._domNode.lastChild;n||!o?this._domNode.innerHTML=i:o.insertAdjacentHTML("afterend",i);for(var a=this._domNode.lastChild,s=t.linesLength-1;s>=0;s--){var l=t.lines[s];r[s]&&(l.setDomNode(a),a=a.previousSibling)}}},{key:"_finishRenderingInvalidLines",value:function(t,n,i){var r=document.createElement("div");e._ttPolicy&&(n=e._ttPolicy.createHTML(n)),r.innerHTML=n;for(var o=0;o<t.linesLength;o++){var a=t.lines[o];if(i[o]){var s=r.firstChild,l=a.getDomNode();l.parentNode.replaceChild(s,l),a.setDomNode(s)}}}},{key:"_finishRendering",value:function(t,n,i){var r=e._sb,o=t.linesLength,a=t.lines,s=t.rendLineNumberStart,l=[];r.reset();for(var u=!1,c=0;c<o;c++){var d=a[c];if(l[c]=!1,!d.getDomNode())d.renderLine(c+s,i[c],this._viewportData.lineHeight,this._viewportData,r)&&(l[c]=!0,u=!0)}u&&this._finishRenderingNewLines(t,n,r.build(),l),r.reset();for(var h=!1,f=[],g=0;g<o;g++){var v=a[g];if(f[g]=!1,!l[g])v.renderLine(g+s,i[g],this._viewportData.lineHeight,this._viewportData,r)&&(f[g]=!0,h=!0)}h&&this._finishRenderingInvalidLines(t,r.build(),f)}}]),e}();R0._ttPolicy=rb("editorViewLayer",{createHTML:function(e){return e}}),R0._sb=new Tb(1e5);var A0=function(e){function t(e){var n;u(this,t),(n=l(this,t,[e]))._dynamicOverlays=[],n._isFocused=!1,n._visibleLines=new T0({createLine:function(){return new P0(n._dynamicOverlays)}}),n.domNode=n._visibleLines.domNode;var i=n._context.configuration.options.get(50);return Om(n.domNode,i),n.domNode.setClassName("view-overlays"),n}return p(t,e),h(t,[{key:"shouldRender",value:function(){if(g(v(t.prototype),"shouldRender",this).call(this))return!0;for(var e=0,n=this._dynamicOverlays.length;e<n;e++){if(this._dynamicOverlays[e].shouldRender())return!0}return!1}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this);for(var e=0,n=this._dynamicOverlays.length;e<n;e++){this._dynamicOverlays[e].dispose()}this._dynamicOverlays=[]}},{key:"getDomNode",value:function(){return this.domNode}},{key:"addDynamicOverlay",value:function(e){this._dynamicOverlays.push(e)}},{key:"onConfigurationChanged",value:function(e){this._visibleLines.onConfigurationChanged(e);var t=this._context.configuration.options.get(50);return Om(this.domNode,t),!0}},{key:"onFlushed",value:function(e){return this._visibleLines.onFlushed(e)}},{key:"onFocusChanged",value:function(e){return this._isFocused=e.isFocused,!0}},{key:"onLinesChanged",value:function(e){return this._visibleLines.onLinesChanged(e)}},{key:"onLinesDeleted",value:function(e){return this._visibleLines.onLinesDeleted(e)}},{key:"onLinesInserted",value:function(e){return this._visibleLines.onLinesInserted(e)}},{key:"onScrollChanged",value:function(e){return this._visibleLines.onScrollChanged(e)||!0}},{key:"onTokensChanged",value:function(e){return this._visibleLines.onTokensChanged(e)}},{key:"onZonesChanged",value:function(e){return this._visibleLines.onZonesChanged(e)}},{key:"prepareRender",value:function(e){for(var t=this._dynamicOverlays.filter((function(e){return e.shouldRender()})),n=0,i=t.length;n<i;n++){var r=t[n];r.prepareRender(e),r.onDidRender()}}},{key:"render",value:function(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}},{key:"_viewOverlaysRender",value:function(e){this._visibleLines.renderLines(e.viewportData)}}]),t}($X),P0=function(){function e(t){u(this,e),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}return h(e,[{key:"getDomNode",value:function(){return this._domNode?this._domNode.domNode:null}},{key:"setDomNode",value:function(e){this._domNode=Pm(e)}},{key:"onContentChanged",value:function(){}},{key:"onTokensChanged",value:function(){}},{key:"renderLine",value:function(e,t,n,i,r){for(var o="",a=0,s=this._dynamicOverlays.length;a<s;a++){o+=this._dynamicOverlays[a].render(i.startLineNumber,e)}return this._renderedContent!==o&&(this._renderedContent=o,r.appendString('<div style="top:'),r.appendString(String(t)),r.appendString("px;height:"),r.appendString(String(n)),r.appendString('px;">'),r.appendString(o),r.appendString("</div>"),!0)}},{key:"layoutLine",value:function(e,t,n){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(n))}}]),e}(),O0=function(e){function t(e){var n;u(this,t);var i=(n=l(this,t,[e]))._context.configuration.options.get(146);return n._contentWidth=i.contentWidth,n.domNode.setHeight(0),n}return p(t,e),h(t,[{key:"onConfigurationChanged",value:function(e){var n=this._context.configuration.options.get(146);return this._contentWidth=n.contentWidth,g(v(t.prototype),"onConfigurationChanged",this).call(this,e)||!0}},{key:"onScrollChanged",value:function(e){return g(v(t.prototype),"onScrollChanged",this).call(this,e)||e.scrollWidthChanged}},{key:"_viewOverlaysRender",value:function(e){g(v(t.prototype),"_viewOverlaysRender",this).call(this,e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}]),t}(A0),F0=function(e){function t(e){var n;u(this,t);var i=(n=l(this,t,[e]))._context.configuration.options,r=i.get(146);return n._contentLeft=r.contentLeft,n.domNode.setClassName("margin-view-overlays"),n.domNode.setWidth(1),Om(n.domNode,i.get(50)),n}return p(t,e),h(t,[{key:"onConfigurationChanged",value:function(e){var n=this._context.configuration.options;Om(this.domNode,n.get(50));var i=n.get(146);return this._contentLeft=i.contentLeft,g(v(t.prototype),"onConfigurationChanged",this).call(this,e)||!0}},{key:"onScrollChanged",value:function(e){return g(v(t.prototype),"onScrollChanged",this).call(this,e)||e.scrollHeightChanged}},{key:"_viewOverlaysRender",value:function(e){g(v(t.prototype),"_viewOverlaysRender",this).call(this,e);var n=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(n),this.domNode.setWidth(this._contentLeft)}}]),t}(A0),W0=function(){function e(t){u(this,e),this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=t}return h(e,[{key:"emitKeyDown",value:function(e){var t;null===(t=this.onKeyDown)||void 0===t||t.call(this,e)}},{key:"emitKeyUp",value:function(e){var t;null===(t=this.onKeyUp)||void 0===t||t.call(this,e)}},{key:"emitContextMenu",value:function(e){var t;null===(t=this.onContextMenu)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseMove",value:function(e){var t;null===(t=this.onMouseMove)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseLeave",value:function(e){var t;null===(t=this.onMouseLeave)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDown",value:function(e){var t;null===(t=this.onMouseDown)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseUp",value:function(e){var t;null===(t=this.onMouseUp)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDrag",value:function(e){var t;null===(t=this.onMouseDrag)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDrop",value:function(e){var t;null===(t=this.onMouseDrop)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDropCanceled",value:function(){var e;null===(e=this.onMouseDropCanceled)||void 0===e||e.call(this)}},{key:"emitMouseWheel",value:function(e){var t;null===(t=this.onMouseWheel)||void 0===t||t.call(this,e)}},{key:"_convertViewToModelMouseEvent",value:function(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}},{key:"_convertViewToModelMouseTarget",value:function(t){return e.convertViewToModelMouseTarget(t,this._coordinatesConverter)}}],[{key:"convertViewToModelMouseTarget",value:function(e,t){var n=_({},e);return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),5!==n.type&&8!==n.type||(n.detail=this.convertViewToModelViewZoneData(n.detail,t)),n}},{key:"convertViewToModelViewZoneData",value:function(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new dd(e.afterLineNumber,1)).lineNumber}}}]),e}(),B0=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e])).blocks=[],n.contentWidth=-1,n.contentLeft=0,n.domNode=Pm(document.createElement("div")),n.domNode.setAttribute("role","presentation"),n.domNode.setAttribute("aria-hidden","true"),n.domNode.setClassName("blockDecorations-container"),n.update(),n}return p(t,e),h(t,[{key:"update",value:function(){var e=!1,t=this._context.configuration.options.get(146),n=t.contentWidth-t.verticalScrollbarWidth;this.contentWidth!==n&&(this.contentWidth=n,e=!0);var i=t.contentLeft;return this.contentLeft!==i&&(this.contentLeft=i,e=!0),e}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){return this.update()}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged||e.scrollLeftChanged}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onZonesChanged",value:function(e){return!0}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){var t=0,n=e.getDecorationsInViewport(),i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(l.options.blockClassName){var u=this.blocks[t];u||(u=this.blocks[t]=Pm(document.createElement("div")),this.domNode.appendChild(u));var c,d=void 0,h=void 0;l.options.blockIsAfterEnd?(d=e.getVerticalOffsetAfterLineNumber(l.range.endLineNumber,!1),h=e.getVerticalOffsetAfterLineNumber(l.range.endLineNumber,!0)):(d=e.getVerticalOffsetForLineNumber(l.range.startLineNumber,!0),h=l.range.isEmpty()&&!l.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(l.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(l.range.endLineNumber,!0));var f=C(null!==(c=l.options.blockPadding)&&void 0!==c?c:[0,0,0,0],4),g=f[0],v=f[1],p=f[2],m=f[3];u.setClassName("blockDecorations-block "+l.options.blockClassName),u.setLeft(this.contentLeft-m),u.setWidth(this.contentWidth+m+v),u.setTop(d-e.scrollTop-g),u.setHeight(h-d+g+p),t++}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}for(var y=t;y<this.blocks.length;y++)this.blocks[y].domNode.remove();this.blocks.length=t}}]),t}($X),H0=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[e]))._viewDomNode=n,i._widgets={},i.domNode=Pm(document.createElement("div")),JX.write(i.domNode,1),i.domNode.setClassName("contentWidgets"),i.domNode.setPosition("absolute"),i.domNode.setTop(0),i.overflowingContentWidgetsDomNode=Pm(document.createElement("div")),JX.write(i.overflowingContentWidgetsDomNode,2),i.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets"),i}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._widgets={}}},{key:"onConfigurationChanged",value:function(e){var t=Object.keys(this._widgets),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._widgets[s].onConfigurationChanged(e)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLineMappingChanged",value:function(e){return this._updateAnchorsViewPositions(),!0}},{key:"onLinesChanged",value:function(e){return this._updateAnchorsViewPositions(),!0}},{key:"onLinesDeleted",value:function(e){return this._updateAnchorsViewPositions(),!0}},{key:"onLinesInserted",value:function(e){return this._updateAnchorsViewPositions(),!0}},{key:"onScrollChanged",value:function(e){return!0}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_updateAnchorsViewPositions",value:function(){var e=Object.keys(this._widgets),t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this._widgets[a].updateAnchorViewPosition()}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"addWidget",value:function(e){var t=new V0(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}},{key:"setWidgetPosition",value:function(e,t,n,i,r){this._widgets[e.getId()].setPosition(t,n,i,r),this.setShouldRender()}},{key:"removeWidget",value:function(e){var t=e.getId();if(this._widgets.hasOwnProperty(t)){var n=this._widgets[t];delete this._widgets[t];var i=n.domNode.domNode;i.remove(),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}},{key:"shouldSuppressMouseDownOnWidget",value:function(e){return!!this._widgets.hasOwnProperty(e)&&this._widgets[e].suppressMouseDown}},{key:"onBeforeRender",value:function(e){var t=Object.keys(this._widgets),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._widgets[s].onBeforeRender(e)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},{key:"prepareRender",value:function(e){var t=Object.keys(this._widgets),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._widgets[s].prepareRender(e)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},{key:"render",value:function(e){var t=Object.keys(this._widgets),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._widgets[s].render(e)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}]),t}($X),V0=function(){function e(t,n,i){u(this,e),this._primaryAnchor=new z0(null,null),this._secondaryAnchor=new z0(null,null),this._context=t,this._viewDomNode=n,this._actual=i,this.domNode=Pm(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;var r=this._context.configuration.options,o=r.get(146);this._fixedOverflowWidgets=r.get(42),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=r.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}return h(e,[{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(146)){var n=t.get(146);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}},{key:"updateAnchorViewPosition",value:function(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}},{key:"_setPosition",value:function(e,t,n){function i(e,t,n){if(!e)return new z0(null,null);var i=t.model.validatePosition(e);if(t.coordinatesConverter.modelPositionIsVisible(i)){var r=t.coordinatesConverter.convertModelPositionToViewPosition(i,null!=n?n:void 0);return new z0(e,r)}return new z0(e,null)}this._affinity=e,this._primaryAnchor=i(t,this._context.viewModel,this._affinity),this._secondaryAnchor=i(n,this._context.viewModel,this._affinity)}},{key:"_getMaxWidth",value:function(){var e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?(null==t?void 0:t.innerWidth)||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}},{key:"setPosition",value:function(e,t,n,i){this._setPosition(i,e,t),this._preference=n,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}},{key:"_layoutBoxInViewport",value:function(e,t,n,i){var r=e.top,o=r,a=e.top+e.height,s=r-n,l=o>=n,u=a,c=i.viewportHeight-a>=n,d=e.left;return d+t>i.scrollLeft+i.viewportWidth&&(d=i.scrollLeft+i.viewportWidth-t),d<i.scrollLeft&&(d=i.scrollLeft),{fitsAbove:l,aboveTop:s,fitsBelow:c,belowTop:u,left:d}}},{key:"_layoutHorizontalSegmentInPage",value:function(e,t,n,i){var r,o=Math.max(15,t.left-i),a=Math.min(t.left+t.width+i,e.width-15),s=this._viewDomNode.domNode.ownerDocument.defaultView,l=t.left+n-(null!==(r=null==s?void 0:s.scrollX)&&void 0!==r?r:0);if(l+i>a){var u=l-(a-i);l-=u,n-=u}if(l<o){var c=l-o;l-=c,n-=c}return[n,l]}},{key:"_layoutBoxInPage",value:function(e,t,n,i){var r,o,a=e.top-n,s=e.top+e.height,l=xp(this._viewDomNode.domNode),u=this._viewDomNode.domNode.ownerDocument,c=u.defaultView,d=l.top+a-(null!==(r=null==c?void 0:c.scrollY)&&void 0!==r?r:0),h=l.top+s-(null!==(o=null==c?void 0:c.scrollY)&&void 0!==o?o:0),f=kp(u.body),g=C(this._layoutHorizontalSegmentInPage(f,l,e.left-i.scrollLeft+this._contentLeft,t),2),v=g[0],p=g[1],m=d>=22,y=h+n<=f.height-22;return this._fixedOverflowWidgets?{fitsAbove:m,aboveTop:Math.max(d,22),fitsBelow:y,belowTop:h,left:p}:{fitsAbove:m,aboveTop:a,fitsBelow:y,belowTop:s,left:v}}},{key:"_prepareRenderWidgetAtExactPositionOverflowing",value:function(e){return new U0(e.top,e.left+this._contentLeft)}},{key:"_getAnchorsCoordinates",value:function(e){var t,n;return{primary:i(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),secondary:i((null===(t=this._secondaryAnchor.viewPosition)||void 0===t?void 0:t.lineNumber)===(null===(n=this._primaryAnchor.viewPosition)||void 0===n?void 0:n.lineNumber)?this._secondaryAnchor.viewPosition:null,this._affinity,this._lineHeight)};function i(t,n,i){if(!t)return null;var r=e.visibleRangeForPosition(t);if(!r)return null;var o=1===t.column&&3===n?0:r.left,a=e.getVerticalOffsetForLineNumber(t.lineNumber)-e.scrollTop;return new j0(a,o,i)}}},{key:"_reduceAnchorCoordinates",value:function(e,t,n){if(!t)return e;var i=this._context.configuration.options.get(50),r=t.left;return r=r<e.left?Math.max(r,e.left-n+i.typicalFullwidthCharacterWidth):Math.min(r,e.left+n-i.typicalFullwidthCharacterWidth),new j0(e.top,r,e.height)}},{key:"_prepareRenderWidget",value:function(e){if(!this._preference||0===this._preference.length)return null;var t=this._getAnchorsCoordinates(e),n=t.primary,i=t.secondary;if(!n)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(-1===this._cachedDomNodeOffsetWidth||-1===this._cachedDomNodeOffsetHeight){var r=null;if("function"==typeof this._actual.beforeRender&&(r=K0(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeOffsetWidth=r.width,this._cachedDomNodeOffsetHeight=r.height;else{var o=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(o.width),this._cachedDomNodeOffsetHeight=Math.round(o.height)}}var a,s=this._reduceAnchorCoordinates(n,i,this._cachedDomNodeOffsetWidth);a=this.allowEditorOverflow?this._layoutBoxInPage(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):this._layoutBoxInViewport(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(var l=1;l<=2;l++){var u=!0,c=!1,d=void 0;try{for(var h,f=this._preference[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;if(1===g){if(!a)return null;if(2===l||a.fitsAbove)return{kind:"inViewport",coordinate:new U0(a.aboveTop,a.left),position:1}}else{if(2!==g)return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new U0(s.top,s.left)),position:0}:{kind:"inViewport",coordinate:new U0(s.top,s.left),position:0};if(!a)return null;if(2===l||a.fitsBelow)return{kind:"inViewport",coordinate:new U0(a.belowTop,a.left),position:2}}}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}return null}},{key:"onBeforeRender",value:function(e){this._primaryAnchor.viewPosition&&this._preference&&(this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth))}},{key:"prepareRender",value:function(e){this._renderData=this._prepareRenderWidget(e)}},{key:"render",value:function(e){var t;this._renderData&&"offViewport"!==this._renderData.kind?(this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),"function"==typeof this._actual.afterRender&&K0(this._actual.afterRender,this._actual,this._renderData.position)):(this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,"offViewport"===(null===(t=this._renderData)||void 0===t?void 0:t.kind)&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),"function"==typeof this._actual.afterRender&&K0(this._actual.afterRender,this._actual,null))}}]),e}(),z0=function e(t,n){u(this,e),this.modelPosition=t,this.viewPosition=n},U0=function e(t,n){u(this,e),this.top=t,this.left=n,this._coordinateBrand=void 0},j0=function e(t,n,i){u(this,e),this.top=t,this.left=n,this.height=i,this._anchorCoordinateBrand=void 0};function K0(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];try{var o;return(o=e).call.apply(o,[t].concat(x(i)))}catch(e){return null}}var q0=function(e){function t(e){var n;u(this,t),(n=l(this,t))._context=e;var i=n._context.configuration.options,r=i.get(146);return n._renderLineHighlight=i.get(97),n._renderLineHighlightOnlyWhenFocus=i.get(98),n._wordWrap=r.isViewportWrapping,n._contentLeft=r.contentLeft,n._contentWidth=r.contentWidth,n._selectionIsEmpty=!0,n._focused=!1,n._cursorLineNumbers=[1],n._selections=[new fd(1,1,1,1)],n._renderData=null,n._context.addEventHandler(n),n}return p(t,e),h(t,[{key:"dispose",value:function(){this._context.removeEventHandler(this),g(v(t.prototype),"dispose",this).call(this)}},{key:"_readFromSelections",value:function(){var e=!1,t=new Set,n=!0,i=!1,r=void 0;try{for(var o,a=this._selections[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.add(s.positionLineNumber)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}var l=Array.from(t);l.sort((function(e,t){return e-t})),ea(this._cursorLineNumbers,l)||(this._cursorLineNumbers=l,e=!0);var u=this._selections.every((function(e){return e.isEmpty()}));return this._selectionIsEmpty!==u&&(this._selectionIsEmpty=u,e=!0),e}},{key:"onThemeChanged",value:function(e){return this._readFromSelections()}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,n=t.get(146);return this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=n.isViewportWrapping,this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections,this._readFromSelections()}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollWidthChanged||e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onFocusChanged",value:function(e){return!!this._renderLineHighlightOnlyWhenFocus&&(this._focused=e.isFocused,!0)}},{key:"prepareRender",value:function(e){if(this._shouldRenderThis()){for(var t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=[],r=t;r<=n;r++){i[r-t]=""}if(this._wordWrap){var o=this._renderOne(e,!1),a=!0,s=!1,l=void 0;try{for(var u,c=this._cursorLineNumbers[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)for(var d=u.value,h=this._context.viewModel.coordinatesConverter,f=h.convertViewPositionToModelPosition(new dd(d,1)).lineNumber,g=h.convertModelPositionToViewPosition(new dd(f,1)).lineNumber,v=h.convertModelPositionToViewPosition(new dd(f,this._context.viewModel.model.getLineMaxColumn(f))).lineNumber,p=Math.max(g,t),m=Math.min(v,n),y=p;y<=m;y++){i[y-t]=o}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}}var _=this._renderOne(e,!0),b=!0,k=!1,w=void 0;try{for(var C,S=this._cursorLineNumbers[Symbol.iterator]();!(b=(C=S.next()).done);b=!0){var x=C.value;if(!(x<t||x>n))i[x-t]=_}}catch(e){k=!0,w=e}finally{try{b||null==S.return||S.return()}finally{if(k)throw w}}this._renderData=i}else this._renderData=null}},{key:"render",value:function(e,t){if(!this._renderData)return"";var n=t-e;return n>=this._renderData.length?"":this._renderData[n]}},{key:"_shouldRenderInMargin",value:function(){return("gutter"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}},{key:"_shouldRenderInContent",value:function(){return("line"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}]),t}(X$),G0=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_renderOne",value:function(e,t){var n="current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"");return'<div class="'.concat(n,'" style="width:').concat(Math.max(e.scrollWidth,this._contentWidth),'px;"></div>')}},{key:"_shouldRenderThis",value:function(){return this._shouldRenderInContent()}},{key:"_shouldRenderOther",value:function(){return this._shouldRenderInMargin()}}]),t}(q0),Z0=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_renderOne",value:function(e,t){var n="current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"");return'<div class="'.concat(n,'" style="width:').concat(this._contentLeft,'px"></div>')}},{key:"_shouldRenderThis",value:function(){return!0}},{key:"_shouldRenderOther",value:function(){return this._shouldRenderInContent()}}]),t}(q0);VS((function(e,t){var n=e.getColor(AW);if(n&&(t.addRule(".monaco-editor .view-overlays .current-line { background-color: ".concat(n,"; }")),t.addRule(".monaco-editor .margin-view-overlays .current-line-margin { background-color: ".concat(n,"; border: none; }"))),!n||n.isTransparent()||e.defines(PW)){var i=e.getColor(PW);i&&(t.addRule(".monaco-editor .view-overlays .current-line-exact { border: 2px solid ".concat(i,"; }")),t.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ".concat(i,"; }")),RS(e.type)&&(t.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),t.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}}));var Y0=function(e){function t(e){var n;u(this,t),(n=l(this,t))._context=e;var i=n._context.configuration.options;return n._typicalHalfwidthCharacterWidth=i.get(50).typicalHalfwidthCharacterWidth,n._renderResult=null,n._context.addEventHandler(n),n}return p(t,e),h(t,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,g(v(t.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged||e.scrollWidthChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"prepareRender",value:function(e){for(var t=e.getDecorationsInViewport(),n=[],i=0,r=0,o=t.length;r<o;r++){var a=t[r];a.options.className&&(n[i++]=a)}n=n.sort((function(e,t){if(e.options.zIndex<t.options.zIndex)return-1;if(e.options.zIndex>t.options.zIndex)return 1;var n=e.options.className,i=t.options.className;return n<i?-1:n>i?1:hd.compareRangesUsingStarts(e.range,t.range)}));for(var s=e.visibleRange.startLineNumber,l=e.visibleRange.endLineNumber,u=[],c=s;c<=l;c++){u[c-s]=""}this._renderWholeLineDecorations(e,n,u),this._renderNormalDecorations(e,n,u),this._renderResult=u}},{key:"_renderWholeLineDecorations",value:function(e,t,n){for(var i=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,o=0,a=t.length;o<a;o++){var s=t[o];if(s.options.isWholeLine)for(var l='<div class="cdr '+s.options.className+'" style="left:0;width:100%;"></div>',u=Math.max(s.range.startLineNumber,i),c=Math.min(s.range.endLineNumber,r),d=u;d<=c;d++){n[d-i]+=l}}}},{key:"_renderNormalDecorations",value:function(e,t,n){for(var i=e.visibleRange.startLineNumber,r=null,o=!1,a=null,s=!1,l=0,u=t.length;l<u;l++){var c=t[l];if(!c.options.isWholeLine){var d,h=c.options.className,f=Boolean(c.options.showIfCollapsed),g=c.range;if(f&&1===g.endColumn&&g.endLineNumber!==g.startLineNumber&&(g=new hd(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.viewModel.getLineMaxColumn(g.endLineNumber-1))),r===h&&o===f&&hd.areIntersectingOrTouching(a,g))a=hd.plusRange(a,g);else null!==r&&this._renderNormalDecoration(e,a,r,s,o,i,n),r=h,o=f,a=g,s=null!==(d=c.options.shouldFillLineOnLineBreak)&&void 0!==d&&d}}null!==r&&this._renderNormalDecoration(e,a,r,s,o,i,n)}},{key:"_renderNormalDecoration",value:function(e,t,n,i,r,o,a){var s=e.linesVisibleRangesForRange(t,"findMatch"===n);if(s)for(var l=0,u=s.length;l<u;l++){var c=s[l];if(!c.outsideRenderedLine){var d=c.lineNumber-o;if(r&&1===c.ranges.length){var h=c.ranges[0];if(h.width<this._typicalHalfwidthCharacterWidth){var f=Math.round(h.left+h.width/2),g=Math.max(0,Math.round(f-this._typicalHalfwidthCharacterWidth/2));c.ranges[0]=new i$(g,this._typicalHalfwidthCharacterWidth)}}for(var v=0,p=c.ranges.length;v<p;v++){var m=i&&c.continuesOnNextLine&&1===p,y=c.ranges[v],_='<div class="cdr '+n+'" style="left:'+String(y.left)+"px;width:"+(m?"100%;":String(y.width)+"px;")+'"></div>';a[d]+=_}}}}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}]),t}(X$),Q0=function(e){function t(e,n,i,r){var o;u(this,t);var a=(o=l(this,t,[e]))._context.configuration.options,s=a.get(104),c=a.get(75),d=a.get(40),h=a.get(107),f={listenOnDomNode:i.domNode,className:"editor-scrollable "+FS(e.theme.type),useShadows:!1,lazyRender:!0,vertical:s.vertical,horizontal:s.horizontal,verticalHasArrows:s.verticalHasArrows,horizontalHasArrows:s.horizontalHasArrows,verticalScrollbarSize:s.verticalScrollbarSize,verticalSliderSize:s.verticalSliderSize,horizontalScrollbarSize:s.horizontalScrollbarSize,horizontalSliderSize:s.horizontalSliderSize,handleMouseWheel:s.handleMouseWheel,alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel,arrowSize:s.arrowSize,mouseWheelScrollSensitivity:c,fastScrollSensitivity:d,scrollPredominantAxis:h,scrollByPage:s.scrollByPage};o.scrollbar=o._register(new mE(n.domNode,f,o._context.viewLayout.getScrollable())),JX.write(o.scrollbar.getDomNode(),6),o.scrollbarDomNode=Pm(o.scrollbar.getDomNode()),o.scrollbarDomNode.setPosition("absolute"),o._setLayout();var g=function(e,t,n){var i={},r=e.scrollTop;if(r&&(i.scrollTop=o._context.viewLayout.getCurrentScrollTop()+r,e.scrollTop=0),n){var a=e.scrollLeft;a&&(i.scrollLeft=o._context.viewLayout.getCurrentScrollLeft()+a,e.scrollLeft=0)}o._context.viewModel.viewLayout.setScrollPosition(i,1)};return o._register(cp(i.domNode,"scroll",(function(e){return g(i.domNode,0,!0)}))),o._register(cp(n.domNode,"scroll",(function(e){return g(n.domNode,0,!1)}))),o._register(cp(r.domNode,"scroll",(function(e){return g(r.domNode,0,!1)}))),o._register(cp(o.scrollbarDomNode.domNode,"scroll",(function(e){return g(o.scrollbarDomNode.domNode,0,!1)}))),o}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}},{key:"_setLayout",value:function(){var e=this._context.configuration.options,t=e.get(146);this.scrollbarDomNode.setLeft(t.contentLeft),"right"===e.get(73).side?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}},{key:"getOverviewRulerLayoutInfo",value:function(){return this.scrollbar.getOverviewRulerLayoutInfo()}},{key:"getDomNode",value:function(){return this.scrollbarDomNode}},{key:"delegateVerticalScrollbarPointerDown",value:function(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}},{key:"delegateScrollFromMouseWheelEvent",value:function(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}},{key:"onConfigurationChanged",value:function(e){if(e.hasChanged(104)||e.hasChanged(75)||e.hasChanged(40)){var t=this._context.configuration.options,n=t.get(104),i=t.get(75),r=t.get(40),o=t.get(107),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:r,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(146)&&this._setLayout(),!0}},{key:"onScrollChanged",value:function(e){return!0}},{key:"onThemeChanged",value:function(e){return this.scrollbar.updateClassName("editor-scrollable "+FS(this._context.theme.type)),!0}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this.scrollbar.renderNow()}}]),t}($X),X0=function e(t,n,i,r,o){u(this,e),this.startLineNumber=t,this.endLineNumber=n,this.className=i,this.tooltip=r,this._decorationToRenderBrand=void 0,this.zIndex=null!=o?o:0},$0=function e(t,n,i){u(this,e),this.className=t,this.zIndex=n,this.tooltip=i},J0=function(){function e(){u(this,e),this.decorations=[]}return h(e,[{key:"add",value:function(e){this.decorations.push(e)}},{key:"getDecorations",value:function(){return this.decorations}}]),e}(),e1=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_render",value:function(e,t,n){for(var i=[],r=e;r<=t;r++){i[r-e]=new J0}if(0===n.length)return i;n.sort((function(e,t){return e.className===t.className?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.className<t.className?-1:1}));for(var o=null,a=0,s=0,l=n.length;s<l;s++){var u=n[s],c=u.className,d=u.zIndex,h=Math.max(u.startLineNumber,e)-e,f=Math.min(u.endLineNumber,t)-e;o===c?(h=Math.max(a+1,h),a=Math.max(a,f)):(o=c,a=f);for(var g=h;g<=a;g++)i[g].add(new $0(c,d,u.tooltip))}return i}}]),t}(X$),t1=function(e){function t(e){var n;u(this,t),(n=l(this,t,[e]))._widgets={},n._context=e;var i=n._context.configuration.options,r=i.get(146);return n.domNode=Pm(document.createElement("div")),n.domNode.setClassName("glyph-margin-widgets"),n.domNode.setPosition("absolute"),n.domNode.setTop(0),n._lineHeight=i.get(67),n._glyphMargin=i.get(57),n._glyphMarginLeft=r.glyphMarginLeft,n._glyphMarginWidth=r.glyphMarginWidth,n._glyphMarginDecorationLaneCount=r.glyphMarginDecorationLaneCount,n._managedDomNodes=[],n._decorationGlyphsToRender=[],n}return p(t,e),h(t,[{key:"dispose",value:function(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},g(v(t.prototype),"dispose",this).call(this)}},{key:"getWidgets",value:function(){return Object.values(this._widgets)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,n=t.get(146);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"addWidget",value:function(e){var t=Pm(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}},{key:"setWidgetPosition",value:function(e,t){var n=this._widgets[e.getId()];return(n.preference.lane!==t.lane||n.preference.zIndex!==t.zIndex||!hd.equalsRange(n.preference.range,t.range))&&(n.preference=t,this.setShouldRender(),!0)}},{key:"removeWidget",value:function(e){var t=e.getId();if(this._widgets[t]){var n=this._widgets[t].domNode.domNode;delete this._widgets[t],n.remove(),this.setShouldRender()}}},{key:"_collectDecorationBasedGlyphRenderRequest",value:function(e,t){var n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,r=e.getDecorationsInViewport(),o=!0,a=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c,d=l.value,h=d.options.glyphMarginClassName;if(h)for(var f,g,v=Math.max(d.range.startLineNumber,n),p=Math.min(d.range.endLineNumber,i),m=null!==(f=null===(c=d.options.glyphMargin)||void 0===c?void 0:c.position)&&void 0!==f?f:hw.Center,y=null!==(g=d.options.zIndex)&&void 0!==g?g:0,_=v;_<=p;_++){var b=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new dd(_,0)),k=this._context.viewModel.glyphLanes.getLanesAtLine(b.lineNumber).indexOf(m);t.push(new n1(_,k,y,h))}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}},{key:"_collectWidgetBasedGlyphRenderRequest",value:function(e,t){var n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,r=!0,o=!1,a=void 0;try{for(var s,l=Object.values(this._widgets)[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=u.preference.range,d=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(hd.lift(c)),h=d.startLineNumber,f=d.endLineNumber;if(!(!h||!f||f<n||h>i)){var g=Math.max(h,n),v=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new dd(g,0)),p=this._context.viewModel.glyphLanes.getLanesAtLine(v.lineNumber).indexOf(u.preference.lane);t.push(new i1(g,p,u.preference.zIndex,u))}}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}},{key:"_collectSortedGlyphRenderRequests",value:function(e){var t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((function(e,t){return e.lineNumber===t.lineNumber?e.laneIndex===t.laneIndex?e.zIndex===t.zIndex?t.type===e.type?0===e.type&&0===t.type?e.className<t.className?-1:1:0:t.type-e.type:t.zIndex-e.zIndex:e.laneIndex-t.laneIndex:e.lineNumber-t.lineNumber})),t}},{key:"prepareRender",value:function(e){var t=function(){var e=s.peek();if(!e)return"break";var t=s.takeWhile((function(t){return t.lineNumber===e.lineNumber&&t.laneIndex===e.laneIndex}));if(!t||0===t.length)return"break";var n=t[0];if(0===n.type){var i=[],r=!0,o=!1,a=void 0;try{for(var u,c=t[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var d=u.value;if(d.zIndex!==n.zIndex||d.type!==n.type)break;0!==i.length&&i[i.length-1]===d.className||i.push(d.className)}}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}l.push(n.accept(i.join(" ")))}else n.widget.renderInfo={lineNumber:n.lineNumber,laneIndex:n.laneIndex}};if(this._glyphMargin){var n=!0,i=!1,r=void 0;try{for(var o,a=Object.values(this._widgets)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.renderInfo=null}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}for(var s=new Sa(this._collectSortedGlyphRenderRequests(e)),l=[];s.length>0;){if("break"===t())break}this._decorationGlyphsToRender=l}else this._decorationGlyphsToRender=[]}},{key:"render",value:function(e){if(this._glyphMargin){var t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount),n=!0,i=!1,r=void 0;try{for(var o,a=Object.values(this._widgets)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s.renderInfo){var l=e.viewportData.relativeVerticalOffset[s.renderInfo.lineNumber-e.viewportData.startLineNumber],u=this._glyphMarginLeft+s.renderInfo.laneIndex*this._lineHeight;s.domNode.setDisplay("block"),s.domNode.setTop(l),s.domNode.setLeft(u),s.domNode.setWidth(t),s.domNode.setHeight(this._lineHeight)}else s.domNode.setDisplay("none")}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}for(var c=0;c<this._decorationGlyphsToRender.length;c++){var d=this._decorationGlyphsToRender[c],h=e.viewportData.relativeVerticalOffset[d.lineNumber-e.viewportData.startLineNumber],f=this._glyphMarginLeft+d.laneIndex*this._lineHeight,g=void 0;c<this._managedDomNodes.length?g=this._managedDomNodes[c]:(g=Pm(document.createElement("div")),this._managedDomNodes.push(g),this.domNode.appendChild(g)),g.setClassName("cgmr codicon "+d.combinedClassName),g.setPosition("absolute"),g.setTop(h),g.setLeft(f),g.setWidth(t),g.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){var v=this._managedDomNodes.pop();null==v||v.domNode.remove()}}else{var p=!0,m=!1,y=void 0;try{for(var _,b=Object.values(this._widgets)[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){_.value.domNode.setDisplay("none")}}catch(e){m=!0,y=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw y}}for(;this._managedDomNodes.length>0;){var k=this._managedDomNodes.pop();null==k||k.domNode.remove()}}}}]),t}($X),n1=function(){function e(t,n,i,r){u(this,e),this.lineNumber=t,this.laneIndex=n,this.zIndex=i,this.className=r,this.type=0}return h(e,[{key:"accept",value:function(e){return new r1(this.lineNumber,this.laneIndex,e)}}]),e}(),i1=function e(t,n,i,r){u(this,e),this.lineNumber=t,this.laneIndex=n,this.zIndex=i,this.widget=r,this.type=1},r1=function e(t,n,i){u(this,e),this.lineNumber=t,this.laneIndex=n,this.combinedClassName=i},o1=function(e){function t(e){var n;u(this,t),(n=l(this,t))._context=e,n._primaryPosition=null;var i=n._context.configuration.options,r=i.get(147),o=i.get(50);return n._spaceWidth=o.spaceWidth,n._maxIndentLeft=-1===r.wrappingColumn?-1:r.wrappingColumn*o.typicalHalfwidthCharacterWidth,n._bracketPairGuideOptions=i.get(16),n._renderResult=null,n._context.addEventHandler(n),n}return p(t,e),h(t,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,g(v(t.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,n=t.get(147),i=t.get(50);return this._spaceWidth=i.spaceWidth,this._maxIndentLeft=-1===n.wrappingColumn?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}},{key:"onCursorStateChanged",value:function(e){var t,n=e.selections[0].getPosition();return!(null===(t=this._primaryPosition)||void 0===t?void 0:t.equals(n))&&(this._primaryPosition=n,!0)}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onLanguageConfigurationChanged",value:function(e){return!0}},{key:"prepareRender",value:function(e){if(this._bracketPairGuideOptions.indentation||!1!==this._bracketPairGuideOptions.bracketPairs){for(var t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=e.scrollWidth,r=this._primaryPosition,o=this.getGuidesByLine(t,Math.min(n+1,this._context.viewModel.getLineCount()),r),a=[],s=t;s<=n;s++){var l,u,c=s-t,d=o[c],h="",f=null!==(u=null===(l=e.visibleRangeForPosition(new dd(s,1)))||void 0===l?void 0:l.left)&&void 0!==u?u:0,g=!0,v=!1,p=void 0;try{for(var m,y=d[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var _,b=m.value,k=-1===b.column?f+(b.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new dd(s,b.column)).left;if(k>i||this._maxIndentLeft>0&&k>this._maxIndentLeft)break;var w,C=b.horizontalLine?b.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",S=b.horizontalLine?(null!==(w=null===(_=e.visibleRangeForPosition(new dd(s,b.horizontalLine.endColumn)))||void 0===_?void 0:_.left)&&void 0!==w?w:k+this._spaceWidth)-k:this._spaceWidth;h+='<div class="core-guide '.concat(b.className," ").concat(C,'" style="left:').concat(k,"px;width:").concat(S,'px"></div>')}}catch(e){v=!0,p=e}finally{try{g||null==y.return||y.return()}finally{if(v)throw p}}a[c]=h}this._renderResult=a}else this._renderResult=null}},{key:"getGuidesByLine",value:function(e,t,n){var i=!1!==this._bracketPairGuideOptions.bracketPairs?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:!0===this._bracketPairGuideOptions.bracketPairsHorizontal?oV.Enabled:"active"===this._bracketPairGuideOptions.bracketPairsHorizontal?oV.EnabledForActive:oV.Disabled,includeInactive:!0===this._bracketPairGuideOptions.bracketPairs}):null,r=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null,o=0,a=0,s=0;if(!1!==this._bracketPairGuideOptions.highlightActiveIndentation&&n){var l=this._context.viewModel.getActiveIndentGuide(n.lineNumber,e,t);o=l.startLineNumber,a=l.endLineNumber,s=l.indent}for(var u=this._context.viewModel.model.getOptions().indentSize,c=[],d=e;d<=t;d++){var h,f,g=function(e){var t,n=(e-1)*u+1,i=("always"===h._bracketPairGuideOptions.highlightActiveIndentation||0===p.length)&&o<=d&&d<=a&&e===s;(t=v).push.apply(t,x(m.takeWhile((function(e){return e.visibleColumn<n}))||[]));var r=m.peek();r&&r.visibleColumn===n&&!r.horizontalLine||v.push(new uV(n,-1,"core-guide-indent lvl-".concat((e-1)%30)+(i?" indent-active":""),null,-1,-1))},v=new Array;c.push(v);for(var p=i?i[d-e]:[],m=new Sa(p),y=r?r[d-e]:0,_=1;_<=y;_++)h=this,g(_);(f=v).push.apply(f,x(m.takeWhile((function(e){return!0}))||[]))}return c}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}]),t}(X$);function a1(e){if(!e||!e.isTransparent())return e}VS((function(e,t){var n=[{bracketColor:gB,guideColor:kB,guideColorActive:DB},{bracketColor:vB,guideColor:wB,guideColorActive:NB},{bracketColor:pB,guideColor:CB,guideColorActive:IB},{bracketColor:mB,guideColor:SB,guideColorActive:EB},{bracketColor:yB,guideColor:xB,guideColorActive:MB},{bracketColor:_B,guideColor:LB,guideColorActive:TB}],i=new hV,r=[{indentColor:qW,indentColorActive:$W},{indentColor:GW,indentColorActive:JW},{indentColor:ZW,indentColorActive:eB},{indentColor:YW,indentColorActive:tB},{indentColor:QW,indentColorActive:nB},{indentColor:XW,indentColorActive:iB}],o=n.map((function(t){var n,i,r=e.getColor(t.bracketColor),o=e.getColor(t.guideColor),a=e.getColor(t.guideColorActive),s=a1(null!==(n=a1(o))&&void 0!==n?n:null==r?void 0:r.transparent(.3)),l=a1(null!==(i=a1(a))&&void 0!==i?i:r);if(s&&l)return{guideColor:s,guideColorActive:l}})).filter(Aa),a=r.map((function(t){var n=e.getColor(t.indentColor),i=e.getColor(t.indentColorActive),r=a1(n),o=a1(i);if(r&&o)return{indentColor:r,indentColorActive:o}})).filter(Aa);if(o.length>0){for(var s=0;s<30;s++){var l=o[s%o.length];t.addRule(".monaco-editor .".concat(i.getInlineClassNameOfLevel(s).replace(/ /g,".")," { --guide-color: ").concat(l.guideColor,"; --guide-color-active: ").concat(l.guideColorActive,"; }"))}t.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),t.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),t.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),t.addRule(".monaco-editor .vertical.".concat(i.activeClassName," { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }")),t.addRule(".monaco-editor .horizontal-top.".concat(i.activeClassName," { border-top: 1px solid var(--guide-color-active); }")),t.addRule(".monaco-editor .horizontal-bottom.".concat(i.activeClassName," { border-bottom: 1px solid var(--guide-color-active); }"))}if(a.length>0){for(var u=0;u<30;u++){var c=a[u%a.length];t.addRule(".monaco-editor .lines-content .core-guide-indent.lvl-".concat(u," { --indent-color: ").concat(c.indentColor,"; --indent-color-active: ").concat(c.indentColorActive,"; }"))}t.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),t.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}}));var s1=function(){function e(t,n){u(this,e),this._domNode=t,this.endNode=n,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}return h(e,[{key:"didDomLayout",get:function(){return this._didDomLayout}},{key:"readClientRect",value:function(){if(!this._clientRectRead){this._clientRectRead=!0;var e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}},{key:"clientRectDeltaLeft",get:function(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}},{key:"clientRectScale",get:function(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}},{key:"markDidDomLayout",value:function(){this._didDomLayout=!0}}]),e}(),l1=function(){function e(){u(this,e),this._currentVisibleRange=new hd(1,1,1,1)}return h(e,[{key:"getCurrentVisibleRange",value:function(){return this._currentVisibleRange}},{key:"setCurrentVisibleRange",value:function(e){this._currentVisibleRange=e}}]),e}(),u1=function e(t,n,i,r,o,a,s){u(this,e),this.minimalReveal=t,this.lineNumber=n,this.startColumn=i,this.endColumn=r,this.startScrollTop=o,this.stopScrollTop=a,this.scrollType=s,this.type="range",this.minLineNumber=n,this.maxLineNumber=n},c1=function e(t,n,i,r,o){u(this,e),this.minimalReveal=t,this.selections=n,this.startScrollTop=i,this.stopScrollTop=r,this.scrollType=o,this.type="selections";for(var a=n[0].startLineNumber,s=n[0].endLineNumber,l=1,c=n.length;l<c;l++){var d=n[l];a=Math.min(a,d.startLineNumber),s=Math.max(s,d.endLineNumber)}this.minLineNumber=a,this.maxLineNumber=s},d1=function(e){function t(e,n){var i;u(this,t);var r=(i=l(this,t,[e]))._context.configuration,o=i._context.configuration.options,a=o.get(50),s=o.get(147);return i._lineHeight=o.get(67),i._typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,i._isViewportWrapping=s.isViewportWrapping,i._revealHorizontalRightPadding=o.get(101),i._cursorSurroundingLines=o.get(29),i._cursorSurroundingLinesStyle=o.get(30),i._canUseLayerHinting=!o.get(32),i._viewLineOptions=new c$(r,i._context.theme.type),i._linesContent=n,i._textRangeRestingSpot=document.createElement("div"),i._visibleLines=new T0({createLine:function(){return new d$(i._viewLineOptions)}}),i.domNode=i._visibleLines.domNode,JX.write(i.domNode,8),i.domNode.setClassName("view-lines ".concat(eJ)),Om(i.domNode,a),i._maxLineWidth=0,i._asyncUpdateLineWidths=new Sg((function(){i._updateLineWidthsSlow()}),200),i._asyncCheckMonospaceFontAssumptions=new Sg((function(){i._checkMonospaceFontAssumptions()}),2e3),i._lastRenderedData=new l1,i._horizontalRevealRequest=null,i._stickyScrollEnabled=o.get(116).enabled,i._maxNumberStickyLines=o.get(116).maxLineCount,i}return p(t,e),h(t,[{key:"dispose",value:function(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),g(v(t.prototype),"dispose",this).call(this)}},{key:"getDomNode",value:function(){return this.domNode}},{key:"onConfigurationChanged",value:function(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(147)&&(this._maxLineWidth=0);var t=this._context.configuration.options,n=t.get(50),i=t.get(147);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=i.isViewportWrapping,this._revealHorizontalRightPadding=t.get(101),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(116).enabled,this._maxNumberStickyLines=t.get(116).maxLineCount,Om(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(146)&&(this._maxLineWidth=0),!0}},{key:"_onOptionsMaybeChanged",value:function(){var e=this._context.configuration,t=new c$(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;for(var n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),r=n;r<=i;r++){this._visibleLines.getVisibleLine(r).onOptionsChanged(this._viewLineOptions)}return!0}return!1}},{key:"onCursorStateChanged",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),i=!1,r=t;r<=n;r++)i=this._visibleLines.getVisibleLine(r).onSelectionChanged()||i;return i}},{key:"onDecorationsChanged",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged();return!0}},{key:"onFlushed",value:function(e){var t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}},{key:"onLinesChanged",value:function(e){return this._visibleLines.onLinesChanged(e)}},{key:"onLinesDeleted",value:function(e){return this._visibleLines.onLinesDeleted(e)}},{key:"onLinesInserted",value:function(e){return this._visibleLines.onLinesInserted(e)}},{key:"onRevealRangeRequest",value:function(e){var t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(-1===t)return!1;var n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new u1(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new c1(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;var i=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(n,i),!0}},{key:"onScrollChanged",value:function(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){var t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}},{key:"onTokensChanged",value:function(e){return this._visibleLines.onTokensChanged(e)}},{key:"onZonesChanged",value:function(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}},{key:"onThemeChanged",value:function(e){return this._onOptionsMaybeChanged()}},{key:"getPositionFromDOMInfo",value:function(e,t){var n=this._getViewLineDomNode(e);if(null===n)return null;var i=this._getLineNumberFor(n);if(-1===i)return null;if(i<1||i>this._context.viewModel.getLineCount())return null;if(1===this._context.viewModel.getLineMaxColumn(i))return new dd(i,1);var r=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(i<r||i>o)return null;var a=this._visibleLines.getVisibleLine(i).getColumnOfNodeOffset(e,t),s=this._context.viewModel.getLineMinColumn(i);return a<s&&(a=s),new dd(i,a)}},{key:"_getViewLineDomNode",value:function(e){for(;e&&1===e.nodeType;){if(e.className===d$.CLASS_NAME)return e;e=e.parentElement}return null}},{key:"_getLineNumberFor",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),i=t;i<=n;i++){if(e===this._visibleLines.getVisibleLine(i).getDomNode())return i}return-1}},{key:"getLineWidth",value:function(e){var t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();if(e<t||e>n)return-1;var i=new s1(this.domNode.domNode,this._textRangeRestingSpot),r=this._visibleLines.getVisibleLine(e).getWidth(i);return this._updateLineWidthsSlowIfDomDidLayout(i),r}},{key:"linesVisibleRangesForRange",value:function(e,t){if(this.shouldRender())return null;var n=e.endLineNumber,i=hd.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!i)return null;var r=[],o=0,a=new s1(this.domNode.domNode,this._textRangeRestingSpot),s=0;t&&(s=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new dd(i.startLineNumber,1)).lineNumber);for(var l=this._visibleLines.getStartLineNumber(),u=this._visibleLines.getEndLineNumber(),c=i.startLineNumber;c<=i.endLineNumber;c++)if(!(c<l||c>u)){var d=c===i.startLineNumber?i.startColumn:1,h=c!==i.endLineNumber,f=h?this._context.viewModel.getLineMaxColumn(c):i.endColumn,g=this._visibleLines.getVisibleLine(c).getVisibleRangesForRange(c,d,f,a);if(g){if(t&&c<n)s!==(s=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new dd(c+1,1)).lineNumber)&&(g.ranges[g.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth);r[o++]=new n$(g.outsideRenderedLine,c,i$.from(g.ranges),h)}}return this._updateLineWidthsSlowIfDomDidLayout(a),0===o?null:r}},{key:"_visibleRangesForLineRange",value:function(e,t,n){if(this.shouldRender())return null;if(e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;var i=new s1(this.domNode.domNode,this._textRangeRestingSpot),r=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,i);return this._updateLineWidthsSlowIfDomDidLayout(i),r}},{key:"visibleRangeForPosition",value:function(e){var t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new o$(t.outsideRenderedLine,t.ranges[0].left):null}},{key:"_updateLineWidthsFast",value:function(){return this._updateLineWidths(!0)}},{key:"_updateLineWidthsSlow",value:function(){this._updateLineWidths(!1)}},{key:"_updateLineWidthsSlowIfDomDidLayout",value:function(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}},{key:"_updateLineWidths",value:function(e){for(var t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),i=1,r=!0,o=t;o<=n;o++){var a=this._visibleLines.getVisibleLine(o);!e||a.getWidthIsFast()?i=Math.max(i,a.getWidth(null)):r=!1}return r&&1===t&&n===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(i),r}},{key:"_checkMonospaceFontAssumptions",value:function(){for(var e=-1,t=-1,n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),r=n;r<=i;r++){var o=this._visibleLines.getVisibleLine(r);if(o.needsMonospaceFontCheck()){var a=o.getWidth(null);a>t&&(t=a,e=r)}}if(-1!==e&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(var s=n;s<=i;s++){this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}}},{key:"prepareRender",value:function(){throw new Error("Not supported")}},{key:"render",value:function(){throw new Error("Not supported")}},{key:"renderText",value:function(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){var t=this._horizontalRevealRequest;if(e.startLineNumber<=t.minLineNumber&&t.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();var n=this._computeScrollLeftToReveal(t);n&&(this._isViewportWrapping||this._ensureMaxLineWidth(n.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:n.scrollLeft},t.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),ys&&!this._asyncCheckMonospaceFontAssumptions.isScheduled())for(var i=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber(),o=i;o<=r;o++){if(this._visibleLines.getVisibleLine(o).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");var a=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-a),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}},{key:"_ensureMaxLineWidth",value:function(e){var t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}},{key:"_computeScrollTopToRevealRange",value:function(e,t,n,i,r,o){var a,s,l,u=e.top,c=e.height,d=u+c;if(r&&r.length>0){for(var h=r[0].startLineNumber,f=r[0].endLineNumber,g=1,v=r.length;g<v;g++){var p=r[g];h=Math.min(h,p.startLineNumber),f=Math.max(f,p.endLineNumber)}a=!1,s=this._context.viewLayout.getVerticalOffsetForLineNumber(h),l=this._context.viewLayout.getVerticalOffsetForLineNumber(f)+this._lineHeight}else{if(!i)return-1;a=!0,s=this._context.viewLayout.getVerticalOffsetForLineNumber(i.startLineNumber),l=this._context.viewLayout.getVerticalOffsetForLineNumber(i.endLineNumber)+this._lineHeight}var m,y=0,_=0;if(("mouse"===t||n)&&"default"===this._cursorSurroundingLinesStyle)n||(y=this._lineHeight);else{var b=c/this._lineHeight,k=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),w=Math.min(b/2,k);y=w*this._lineHeight,_=Math.max(0,w-1)*this._lineHeight}if(n||0!==o&&4!==o||(_+=this._lineHeight),(l+=_)-(s-=y)>c){if(!a)return-1;m=s}else if(5===o||6===o)if(6===o&&u<=s&&l<=d)m=u;else{var C=s-Math.max(5*this._lineHeight,.2*c),S=l-c;m=Math.max(S,C)}else if(1===o||2===o)if(2===o&&u<=s&&l<=d)m=u;else{var x=(s+l)/2;m=Math.max(0,x-c/2)}else m=this._computeMinimumScrolling(u,d,s,l,3===o,4===o);return m}},{key:"_computeScrollLeftToReveal",value:function(e){var n=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(146),r=n.left,o=r+n.width-i.verticalScrollbarWidth,a=1073741824,s=0;if("range"===e.type){var l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;var u=!0,c=!1,d=void 0;try{for(var h,f=l.ranges[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;a=Math.min(a,Math.round(g.left)),s=Math.max(s,Math.round(g.left+g.width))}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}else{var v=!0,p=!1,m=void 0;try{for(var y,_=e.selections[Symbol.iterator]();!(v=(y=_.next()).done);v=!0){var b=y.value;if(b.startLineNumber!==b.endLineNumber)return null;var k=this._visibleRangesForLineRange(b.startLineNumber,b.startColumn,b.endColumn);if(!k)return null;var w=!0,C=!1,S=void 0;try{for(var x,L=k.ranges[Symbol.iterator]();!(w=(x=L.next()).done);w=!0){var D=x.value;a=Math.min(a,Math.round(D.left)),s=Math.max(s,Math.round(D.left+D.width))}}catch(e){C=!0,S=e}finally{try{w||null==L.return||L.return()}finally{if(C)throw S}}}}catch(e){p=!0,m=e}finally{try{v||null==_.return||_.return()}finally{if(p)throw m}}}return e.minimalReveal||(a=Math.max(0,a-t.HORIZONTAL_EXTRA_PX),s+=this._revealHorizontalRightPadding),"selections"===e.type&&s-a>n.width?null:{scrollLeft:this._computeMinimumScrolling(r,o,a,s),maxHorizontalOffset:s}}},{key:"_computeMinimumScrolling",value:function(e,t,n,i,r,o){e|=0,r=!!r,o=!!o;var a=(t|=0)-e;return(i|=0)-(n|=0)<a?r?n:o?Math.max(0,i-a):n<e?n:i>t?Math.max(0,i-a):e:n}}]),t}($X);d1.HORIZONTAL_EXTRA_PX=30;var h1=function(e){function t(e){var n;u(this,t),(n=l(this,t))._context=e;var i=n._context.configuration.options.get(146);return n._decorationsLeft=i.decorationsLeft,n._decorationsWidth=i.decorationsWidth,n._renderResult=null,n._context.addEventHandler(n),n}return p(t,e),h(t,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,g(v(t.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options.get(146);return this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getDecorations",value:function(e){for(var t=e.getDecorationsInViewport(),n=[],i=0,r=0,o=t.length;r<o;r++){var a,s=t[r],l=s.options.linesDecorationsClassName,u=s.options.zIndex;if(l)n[i++]=new X0(s.range.startLineNumber,s.range.endLineNumber,l,null!==(a=s.options.linesDecorationsTooltip)&&void 0!==a?a:null,u);var c,d=s.options.firstLineDecorationClassName;if(d)n[i++]=new X0(s.range.startLineNumber,s.range.startLineNumber,d,null!==(c=s.options.linesDecorationsTooltip)&&void 0!==c?c:null,u)}return n}},{key:"prepareRender",value:function(e){for(var t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),r='" style="left:'+this._decorationsLeft.toString()+"px;width:"+this._decorationsWidth.toString()+'px;"></div>',o=[],a=t;a<=n;a++){var s=a-t,l=i[s].getDecorations(),u="",c=!0,d=!1,h=void 0;try{for(var f,g=l[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value,p='<div class="cldr '+v.className;null!==v.tooltip&&(p+='" title="'+v.tooltip),u+=p+=r}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}o[s]=u}this._renderResult=o}},{key:"render",value:function(e,t){return this._renderResult?this._renderResult[t-e]:""}}]),t}(e1),f1=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._context=e,n._renderResult=null,n._context.addEventHandler(n),n}return p(t,e),h(t,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,g(v(t.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){return!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getDecorations",value:function(e){for(var t=e.getDecorationsInViewport(),n=[],i=0,r=0,o=t.length;r<o;r++){var a=t[r],s=a.options.marginClassName,l=a.options.zIndex;s&&(n[i++]=new X0(a.range.startLineNumber,a.range.endLineNumber,s,null,l))}return n}},{key:"prepareRender",value:function(e){for(var t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),r=[],o=t;o<=n;o++){var a=o-t,s=i[a].getDecorations(),l="",u=!0,c=!1,d=void 0;try{for(var h,f=s[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){l+='<div class="cmdr '+h.value.className+'" style=""></div>'}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}r[a]=l}this._renderResult=r}},{key:"render",value:function(e,t){return this._renderResult?this._renderResult[t-e]:""}}]),t}(e1),g1=function(){function e(t,n,i,r){u(this,e),this._rgba8Brand=void 0,this.r=e._clamp(t),this.g=e._clamp(n),this.b=e._clamp(i),this.a=e._clamp(r)}return h(e,[{key:"equals",value:function(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}}],[{key:"_clamp",value:function(e){return e<0?0:e>255?255:0|e}}]),e}();g1.Empty=new g1(0,0,0,0);var v1=function(e){function t(){var e;return u(this,t),(e=l(this,t))._onDidChange=new Zu,e.onDidChange=e._onDidChange.event,e._updateColorMap(),e._register(Rh.onDidChange((function(t){t.changedColorMap&&e._updateColorMap()}))),e}return p(t,e),h(t,[{key:"_updateColorMap",value:function(){var e=Rh.getColorMap();if(!e)return this._colors=[g1.Empty],void(this._backgroundIsLight=!0);this._colors=[g1.Empty];for(var t=1;t<e.length;t++){var n=e[t].rgba;this._colors[t]=new g1(n.r,n.g,n.b,Math.round(255*n.a))}var i=e[2].getRelativeLuminance();this._backgroundIsLight=i>=.5,this._onDidChange.fire(void 0)}},{key:"getColor",value:function(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}},{key:"backgroundIsLight",value:function(){return this._backgroundIsLight}}],[{key:"getInstance",value:function(){return this._INSTANCE||(this._INSTANCE=new t),this._INSTANCE}}]),t}(Ru);v1._INSTANCE=null;var p1=function(){for(var e=[],t=32;t<=126;t++)e.push(t);return e.push(65533),e}(),m1=function(){function e(t,n){u(this,e),this.scale=n,this._minimapCharRendererBrand=void 0,this.charDataNormal=e.soften(t,.8),this.charDataLight=e.soften(t,50/60)}return h(e,[{key:"renderChar",value:function(e,t,n,i,r,o,a,s,l,u,c){var d=1*this.scale,h=2*this.scale,f=c?1:h;if(t+d>e.width||n+f>e.height)console.warn("bad render request outside image data");else for(var g=u?this.charDataLight:this.charDataNormal,v=function(e,t){return(e-=32)<0||e>96?t<=2?(e+96)%96:95:e}(i,l),p=4*e.width,m=a.r,y=a.g,_=a.b,b=r.r-m,k=r.g-y,w=r.b-_,C=Math.max(o,s),S=e.data,x=v*d*h,L=n*p+4*t,D=0;D<f;D++){for(var N=L,I=0;I<d;I++){var E=g[x++]/255*(o/255);S[N++]=m+b*E,S[N++]=y+k*E,S[N++]=_+w*E,S[N++]=C}L+=p}}},{key:"blockRenderChar",value:function(e,t,n,i,r,o,a,s){var l=1*this.scale,u=2*this.scale,c=s?1:u;if(t+l>e.width||n+c>e.height)console.warn("bad render request outside image data");else for(var d=4*e.width,h=r/255*.5,f=o.r,g=o.g,v=o.b,p=f+(i.r-f)*h,m=g+(i.g-g)*h,y=v+(i.b-v)*h,_=Math.max(r,a),b=e.data,k=n*d+4*t,w=0;w<c;w++){for(var C=k,S=0;S<l;S++)b[C++]=p,b[C++]=m,b[C++]=y,b[C++]=_;k+=d}}}],[{key:"soften",value:function(e,t){for(var n=new Uint8ClampedArray(e.length),i=0,r=e.length;i<r;i++)n[i]=Zk(e[i]*t);return n}}]),e}(),y1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},_1=function(e){for(var t=new Uint8ClampedArray(e.length/2),n=0;n<e.length;n+=2)t[n>>1]=y1[e[n]]<<4|15&y1[e[n+1]];return t},b1={1:Du((function(){return _1("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")})),2:Du((function(){return _1("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126")}))},k1=function(){function e(){u(this,e)}return h(e,null,[{key:"create",value:function(t,n){return this.lastCreated&&t===this.lastCreated.scale&&n===this.lastFontFamily?this.lastCreated:(i=b1[t]?new m1(b1[t](),t):e.createFromSampleData(e.createSampleData(n).data,t),this.lastFontFamily=n,this.lastCreated=i,i);var i}},{key:"createSampleData",value:function(e){var t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="".concat(16,"px"),t.height=16,t.width=960,t.style.width="960px",n.fillStyle="#ffffff",n.font="bold ".concat(16,"px ").concat(e),n.textBaseline="middle";var i=0,r=!0,o=!1,a=void 0;try{for(var s,l=p1[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;n.fillText(String.fromCharCode(u),i,8),i+=10}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n.getImageData(0,0,960,16)}},{key:"createFromSampleData",value:function(t,n){if(61440!==t.length)throw new Error("Unexpected source in MinimapCharRenderer");var i=e._downsample(t,n);return new m1(i,n)}},{key:"_downsampleChar",value:function(e,t,n,i,r){for(var o=1*r,a=2*r,s=i,l=0,u=0;u<a;u++)for(var c=u/a*16,d=(u+1)/a*16,h=0;h<o;h++){for(var f=h/o*10,g=(h+1)/o*10,v=0,p=0,m=c;m<d;m++)for(var y=t+3840*Math.floor(m),_=1-(m-Math.floor(m)),b=f;b<g;b++){var k=1-(b-Math.floor(b)),w=y+4*Math.floor(b),C=k*_;p+=C,v+=e[w]*e[w+3]/255*C}var S=v/p;l=Math.max(l,S),n[s++]=Zk(S)}return l}},{key:"_downsample",value:function(e,t){for(var n=2*t*1*t,i=96*n,r=new Uint8ClampedArray(i),o=0,a=0,s=0,l=0;l<96;l++)s=Math.max(s,this._downsampleChar(e,a,r,o,t)),o+=n,a+=40;if(s>0)for(var u=255/s,c=0;c<i;c++)r[c]*=u;return r}}]),e}(),w1=ps?'"Segoe WPC", "Segoe UI", sans-serif':ms?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif',C1=function(){function e(t,n,i){var r=this;u(this,e);var o=t.options,a=o.get(144),s=o.get(146),l=s.minimap,c=o.get(50),d=o.get(73);this.renderMinimap=l.renderMinimap,this.size=d.size,this.minimapHeightIsEditorHeight=l.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=o.get(106),this.paddingTop=o.get(84).top,this.paddingBottom=o.get(84).bottom,this.showSlider=d.showSlider,this.autohide=d.autohide,this.pixelRatio=a,this.typicalHalfwidthCharacterWidth=c.typicalHalfwidthCharacterWidth,this.lineHeight=o.get(67),this.minimapLeft=l.minimapLeft,this.minimapWidth=l.minimapWidth,this.minimapHeight=s.height,this.canvasInnerWidth=l.minimapCanvasInnerWidth,this.canvasInnerHeight=l.minimapCanvasInnerHeight,this.canvasOuterWidth=l.minimapCanvasOuterWidth,this.canvasOuterHeight=l.minimapCanvasOuterHeight,this.isSampling=l.minimapIsSampling,this.editorHeight=s.height,this.fontScale=l.minimapScale,this.minimapLineHeight=l.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=w1,this.sectionHeaderFontSize=d.sectionHeaderFontSize*a,this.sectionHeaderLetterSpacing=d.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=e._getSectionHeaderColor(n,i.getColor(1)),this.charRenderer=Du((function(){return k1.create(r.fontScale,c.fontFamily)})),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=e._getMinimapBackground(n,this.defaultBackgroundColor),this.foregroundAlpha=e._getMinimapForegroundOpacity(n)}return h(e,[{key:"equals",value:function(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}],[{key:"_getMinimapBackground",value:function(e,t){var n=e.getColor(cN);return n?new g1(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}},{key:"_getMinimapForegroundOpacity",value:function(e){var t=e.getColor(dN);return t?g1._clamp(Math.round(255*t.rgba.a)):255}},{key:"_getSectionHeaderColor",value:function(e,t){var n=e.getColor(nD);return n?new g1(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}}]),e}(),S1=function(){function e(t,n,i,r,o,a,s,l,c){u(this,e),this.scrollTop=t,this.scrollHeight=n,this.sliderNeeded=i,this._computedSliderRatio=r,this.sliderTop=o,this.sliderHeight=a,this.topPaddingLineCount=s,this.startLineNumber=l,this.endLineNumber=c}return h(e,[{key:"getDesiredScrollTopFromDelta",value:function(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}},{key:"getDesiredScrollTopFromTouchLocation",value:function(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}},{key:"intersectWithViewport",value:function(e){var t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumber,e.endLineNumber);return t>n?null:[t,n]}},{key:"getYForLineNumber",value:function(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}}],[{key:"create",value:function(t,n,i,r,o,a,s,l,u,c,d){var h,f=t.pixelRatio,g=t.minimapLineHeight,v=Math.floor(t.canvasInnerHeight/g),p=t.lineHeight;if(t.minimapHeightIsEditorHeight){var m=l*t.lineHeight+t.paddingTop+t.paddingBottom;t.scrollBeyondLastLine&&(m+=Math.max(0,o-t.lineHeight-t.paddingBottom));var y=Math.max(1,Math.floor(o*o/m)),_=Math.max(0,t.minimapHeight-y),b=_/(c-o),k=u*b,w=_>0,C=Math.floor(t.canvasInnerHeight/t.minimapLineHeight);return new e(u,c,w,b,k,y,Math.floor(t.paddingTop/t.lineHeight),1,Math.min(s,C))}if(a&&i!==s){var S=i-n+1;h=Math.floor(S*g/f)}else{var x=o/p;h=Math.floor(x*g/f)}var L,D=Math.floor(t.paddingTop/p),N=Math.floor(t.paddingBottom/p);if(t.scrollBeyondLastLine){var I=o/p;N=Math.max(N,I-1)}N>0?L=(D+s+N-o/p-1)*g/f:L=Math.max(0,(D+s)*g/f-h);var E,M,T=(L=Math.min(t.minimapHeight-h,L))/(c-o),R=u*T;if(v>=D+s+N)return new e(u,c,L>0,T,R,h,D,1,s);E=n>1?n+D:Math.max(1,u/p);var A=Math.max(1,Math.floor(E-R*f/g));A<D?(M=D-A+1,A=1):(M=0,A=Math.max(1,A-D)),d&&d.scrollHeight===c&&(d.scrollTop>u&&(A=Math.min(A,d.startLineNumber),M=Math.max(M,d.topPaddingLineCount)),d.scrollTop<u&&(A=Math.max(A,d.startLineNumber),M=Math.min(M,d.topPaddingLineCount)));var P=Math.min(s,A-M+v-1),O=(u-r)/p;return new e(u,c,!0,T,u>=t.paddingTop?(n-A+M+O)*g/f:u/t.paddingTop*(M+O)*g/f,h,M,A,P)}}]),e}(),x1=function(){function e(t){u(this,e),this.dy=t}return h(e,[{key:"onContentChanged",value:function(){this.dy=-1}},{key:"onTokensChanged",value:function(){this.dy=-1}}]),e}();x1.INVALID=new x1(-1);var L1=function(){function e(t,n,i){u(this,e),this.renderedLayout=t,this._imageData=n,this._renderedLines=new M0({createLine:function(){return x1.INVALID}}),this._renderedLines._set(t.startLineNumber,i)}return h(e,[{key:"linesEquals",value:function(e){if(!this.scrollEquals(e))return!1;for(var t=this._renderedLines._get().lines,n=0,i=t.length;n<i;n++)if(-1===t[n].dy)return!1;return!0}},{key:"scrollEquals",value:function(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}},{key:"_get",value:function(){var e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}},{key:"onLinesChanged",value:function(e,t){return this._renderedLines.onLinesChanged(e,t)}},{key:"onLinesDeleted",value:function(e,t){this._renderedLines.onLinesDeleted(e,t)}},{key:"onLinesInserted",value:function(e,t){this._renderedLines.onLinesInserted(e,t)}},{key:"onTokensChanged",value:function(e){return this._renderedLines.onTokensChanged(e)}}]),e}(),D1=function(){function e(t,n,i,r){u(this,e),this._backgroundFillData=e._createBackgroundFillData(n,i,r),this._buffers=[t.createImageData(n,i),t.createImageData(n,i)],this._lastUsedBuffer=0}return h(e,[{key:"getBuffer",value:function(){this._lastUsedBuffer=1-this._lastUsedBuffer;var e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}}],[{key:"_createBackgroundFillData",value:function(e,t,n){for(var i=n.r,r=n.g,o=n.b,a=n.a,s=new Uint8ClampedArray(e*t*4),l=0,u=0;u<t;u++)for(var c=0;c<e;c++)s[l]=i,s[l+1]=r,s[l+2]=o,s[l+3]=a,l+=4;return s}}]),e}(),N1=function(){function e(t,n){u(this,e),this.samplingRatio=t,this.minimapLines=n}return h(e,[{key:"modelLineToMinimapLine",value:function(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}},{key:"modelLineRangeToMinimapLineRange",value:function(e,t){for(var n=this.modelLineToMinimapLine(e)-1;n>0&&this.minimapLines[n-1]>=e;)n--;for(var i=this.modelLineToMinimapLine(t)-1;i+1<this.minimapLines.length&&this.minimapLines[i+1]<=t;)i++;if(n===i){var r=this.minimapLines[n];if(r<e||r>t)return null}return[n+1,i+1]}},{key:"decorationLineRangeToMinimapLineRange",value:function(e,t){var n=this.modelLineToMinimapLine(e),i=this.modelLineToMinimapLine(t);return e!==t&&i===n&&(i===this.minimapLines.length?n>1&&n--:i++),[n,i]}},{key:"onLinesDeleted",value:function(e){for(var t=e.toLineNumber-e.fromLineNumber+1,n=this.minimapLines.length,i=0,r=this.minimapLines.length-1;r>=0&&!(this.minimapLines[r]<e.fromLineNumber);r--)this.minimapLines[r]<=e.toLineNumber?(this.minimapLines[r]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,r),i=Math.max(i,r)):this.minimapLines[r]-=t;return[n,i]}},{key:"onLinesInserted",value:function(e){for(var t=e.toLineNumber-e.fromLineNumber+1,n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}],[{key:"compute",value:function(t,n,i){if(0===t.renderMinimap||!t.isSampling)return[null,[]];var r=Cl.computeContainedMinimapLineCount({viewLineCount:n,scrollBeyondLastLine:t.scrollBeyondLastLine,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:t.editorHeight,lineHeight:t.lineHeight,pixelRatio:t.pixelRatio}).minimapLineCount,o=n/r,a=o/2;if(!i||0===i.minimapLines.length){var s=[];if(s[0]=1,r>1){for(var l=0,u=r-1;l<u;l++)s[l]=Math.round(l*o+a);s[r-1]=n}return[new e(o,s),[]]}for(var c=i.minimapLines,d=c.length,h=[],f=0,g=0,v=1,p=[],m=null,y=0;y<r;y++){for(var _=Math.max(v,Math.round(y*o)),b=Math.max(_,Math.round((y+1)*o));f<d&&c[f]<_;){if(p.length<10){var k=f+1+g;m&&"deleted"===m.type&&m._oldIndex===f-1?m.deleteToLineNumber++:(m={type:"deleted",_oldIndex:f,deleteFromLineNumber:k,deleteToLineNumber:k},p.push(m)),g--}f++}var w=void 0;if(f<d&&c[f]<=b)w=c[f],f++;else if(w=0===y?1:y+1===r?n:Math.round(y*o+a),p.length<10){var C=f+1+g;m&&"inserted"===m.type&&m._i===y-1?m.insertToLineNumber++:(m={type:"inserted",_i:y,insertFromLineNumber:C,insertToLineNumber:C},p.push(m)),g++}h[y]=w,v=w}if(p.length<10)for(;f<d;){var S=f+1+g;m&&"deleted"===m.type&&m._oldIndex===f-1?m.deleteToLineNumber++:(m={type:"deleted",_oldIndex:f,deleteFromLineNumber:S,deleteToLineNumber:S},p.push(m)),g--,f++}else p=[{type:"flush"}];return[new e(o,h),p]}}]),e}(),I1=function(e){function t(e){var n;u(this,t),(n=l(this,t,[e]))._sectionHeaderCache=new pw(10,1.5),n.tokensColorTracker=v1.getInstance(),n._selections=[],n._minimapSelections=null,n.options=new C1(n._context.configuration,n._context.theme,n.tokensColorTracker);var i=C(N1.compute(n.options,n._context.viewModel.getLineCount(),null),1)[0];return n._samplingState=i,n._shouldCheckSampling=!1,n._actual=new E1(e.theme,n),n}return p(t,e),h(t,[{key:"dispose",value:function(){this._actual.dispose(),g(v(t.prototype),"dispose",this).call(this)}},{key:"getDomNode",value:function(){return this._actual.getDomNode()}},{key:"_onOptionsMaybeChanged",value:function(){var e=new C1(this._context.configuration,this._context.theme,this.tokensColorTracker);return!this.options.equals(e)&&(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}},{key:"onConfigurationChanged",value:function(e){return this._onOptionsMaybeChanged()}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}},{key:"onDecorationsChanged",value:function(e){return!!e.affectsMinimap&&this._actual.onDecorationsChanged()}},{key:"onFlushed",value:function(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}},{key:"onLinesChanged",value:function(e){if(this._samplingState){var t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return!!t&&this._actual.onLinesChanged(t[0],t[1]-t[0]+1)}return this._actual.onLinesChanged(e.fromLineNumber,e.count)}},{key:"onLinesDeleted",value:function(e){if(this._samplingState){var t=C(this._samplingState.onLinesDeleted(e),2),n=t[0],i=t[1];return n<=i&&this._actual.onLinesChanged(n+1,i-n+1),this._shouldCheckSampling=!0,!0}return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}},{key:"onLinesInserted",value:function(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}},{key:"onScrollChanged",value:function(e){return this._actual.onScrollChanged()}},{key:"onThemeChanged",value:function(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}},{key:"onTokensChanged",value:function(e){if(this._samplingState){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e.ranges[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=this._samplingState.modelLineRangeToMinimapLineRange(s.fromLineNumber,s.toLineNumber);l&&t.push({fromLineNumber:l[0],toLineNumber:l[1]})}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return!!t.length&&this._actual.onTokensChanged(t)}return this._actual.onTokensChanged(e.ranges)}},{key:"onTokensColorsChanged",value:function(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}},{key:"onZonesChanged",value:function(e){return this._actual.onZonesChanged()}},{key:"prepareRender",value:function(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}},{key:"render",value:function(e){var t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));var i={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(i)}},{key:"_recreateLineSampling",value:function(){this._minimapSelections=null;var e=Boolean(this._samplingState),t=C(N1.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState),2),n=t[0],i=t[1];if(this._samplingState=n,e&&this._samplingState){var r=!0,o=!1,a=void 0;try{for(var s,l=i[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;switch(u.type){case"deleted":this._actual.onLinesDeleted(u.deleteFromLineNumber,u.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(u.insertFromLineNumber,u.insertToLineNumber);break;case"flush":this._actual.onFlushed()}}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}}},{key:"getLineCount",value:function(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}},{key:"getRealLineCount",value:function(){return this._context.viewModel.getLineCount()}},{key:"getLineContent",value:function(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}},{key:"getLineMaxColumn",value:function(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}},{key:"getMinimapLinesRenderingData",value:function(e,t,n){if(this._samplingState){for(var i=[],r=0,o=t-e+1;r<o;r++)n[r]?i[r]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+r-1]):i[r]=null;return i}return this._context.viewModel.getMinimapLinesRenderingData(e,t,n).data}},{key:"getSelections",value:function(){if(null===this._minimapSelections)if(this._samplingState){this._minimapSelections=[];var e=!0,t=!1,n=void 0;try{for(var i,r=this._selections[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value,a=C(this._samplingState.decorationLineRangeToMinimapLineRange(o.startLineNumber,o.endLineNumber),2),s=a[0],l=a[1];this._minimapSelections.push(new fd(s,o.startColumn,l,o.endColumn))}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}else this._minimapSelections=this._selections;return this._minimapSelections}},{key:"getMinimapDecorationsInViewport",value:function(e,t){var n=this._getMinimapDecorationsInViewport(e,t).filter((function(e){var t;return!(null===(t=e.options.minimap)||void 0===t?void 0:t.sectionHeaderStyle)}));if(this._samplingState){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;if(u.options.minimap){var c=u.range,d=this._samplingState.modelLineToMinimapLine(c.startLineNumber),h=this._samplingState.modelLineToMinimapLine(c.endLineNumber);i.push(new KQ(new hd(d,c.startColumn,h,c.endColumn),u.options))}}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return i}return n}},{key:"getSectionHeaderDecorationsInViewport",value:function(e,t){var n=this.options.minimapLineHeight,i=this.options.sectionHeaderFontSize/n;return e=Math.floor(Math.max(1,e-i)),this._getMinimapDecorationsInViewport(e,t).filter((function(e){var t;return!!(null===(t=e.options.minimap)||void 0===t?void 0:t.sectionHeaderStyle)}))}},{key:"_getMinimapDecorationsInViewport",value:function(e,t){var n;if(this._samplingState){var i=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];n=new hd(i,1,r,this._context.viewModel.getLineMaxColumn(r))}else n=new hd(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(n)}},{key:"getSectionHeaderText",value:function(e,t){var n,i=null===(n=e.options.minimap)||void 0===n?void 0:n.sectionHeaderText;if(!i)return null;var r=this._sectionHeaderCache.get(i);if(r)return r;var o=t(i);return this._sectionHeaderCache.set(i,o),o}},{key:"getOptions",value:function(){return this._context.viewModel.model.getOptions()}},{key:"revealLineNumber",value:function(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new hd(e,1,e,1),1,0)}},{key:"setScrollTop",value:function(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}]),t}($X),E1=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._renderDecorations=!1,i._gestureInProgress=!1,i._theme=e,i._model=n,i._lastRenderData=null,i._buffers=null,i._selectionColor=i._theme.getColor(aN),i._domNode=Pm(document.createElement("div")),JX.write(i._domNode,9),i._domNode.setClassName(i._getMinimapDomNodeClassName()),i._domNode.setPosition("absolute"),i._domNode.setAttribute("role","presentation"),i._domNode.setAttribute("aria-hidden","true"),i._shadow=Pm(document.createElement("div")),i._shadow.setClassName("minimap-shadow-hidden"),i._domNode.appendChild(i._shadow),i._canvas=Pm(document.createElement("canvas")),i._canvas.setPosition("absolute"),i._canvas.setLeft(0),i._domNode.appendChild(i._canvas),i._decorationsCanvas=Pm(document.createElement("canvas")),i._decorationsCanvas.setPosition("absolute"),i._decorationsCanvas.setClassName("minimap-decorations-layer"),i._decorationsCanvas.setLeft(0),i._domNode.appendChild(i._decorationsCanvas),i._slider=Pm(document.createElement("div")),i._slider.setPosition("absolute"),i._slider.setClassName("minimap-slider"),i._slider.setLayerHinting(!0),i._slider.setContain("strict"),i._domNode.appendChild(i._slider),i._sliderHorizontal=Pm(document.createElement("div")),i._sliderHorizontal.setPosition("absolute"),i._sliderHorizontal.setClassName("minimap-slider-horizontal"),i._slider.appendChild(i._sliderHorizontal),i._applyLayout(),i._pointerDownListener=hp(i._domNode.domNode,rm.POINTER_DOWN,(function(e){if(e.preventDefault(),0!==i._model.options.renderMinimap&&i._lastRenderData)if("proportional"===i._model.options.size){var t=i._model.options.minimapLineHeight,n=i._model.options.canvasInnerHeight/i._model.options.canvasOuterHeight*e.offsetY,r=Math.floor(n/t)+i._lastRenderData.renderedLayout.startLineNumber-i._lastRenderData.renderedLayout.topPaddingLineCount;r=Math.min(r,i._model.getLineCount()),i._model.revealLineNumber(r)}else if(0===e.button&&i._lastRenderData){var o=xp(i._slider.domNode),a=o.top+o.height/2;i._startSliderDragging(e,a,i._lastRenderData.renderedLayout)}})),i._sliderPointerMoveMonitor=new YI,i._sliderPointerDownListener=hp(i._slider.domNode,rm.POINTER_DOWN,(function(e){e.preventDefault(),e.stopPropagation(),0===e.button&&i._lastRenderData&&i._startSliderDragging(e,e.pageY,i._lastRenderData.renderedLayout)})),i._gestureDisposable=JI.addTarget(i._domNode.domNode),i._sliderTouchStartListener=cp(i._domNode.domNode,XI.Start,(function(e){e.preventDefault(),e.stopPropagation(),i._lastRenderData&&(i._slider.toggleClassName("active",!0),i._gestureInProgress=!0,i.scrollDueToTouchEvent(e))}),{passive:!1}),i._sliderTouchMoveListener=cp(i._domNode.domNode,XI.Change,(function(e){e.preventDefault(),e.stopPropagation(),i._lastRenderData&&i._gestureInProgress&&i.scrollDueToTouchEvent(e)}),{passive:!1}),i._sliderTouchEndListener=hp(i._domNode.domNode,XI.End,(function(e){e.preventDefault(),e.stopPropagation(),i._gestureInProgress=!1,i._slider.toggleClassName("active",!1)})),i}return p(t,e),h(t,[{key:"_startSliderDragging",value:function(e,t,n){var i=this;if(e.target&&e.target instanceof Element){var r=e.pageX;this._slider.toggleClassName("active",!0);var o=function(e,o){var a=xp(i._domNode.domNode),s=Math.min(Math.abs(o-r),Math.abs(o-a.left),Math.abs(o-a.left-a.width));if(ps&&s>140)i._model.setScrollTop(n.scrollTop);else{var l=e-t;i._model.setScrollTop(n.getDesiredScrollTopFromDelta(l))}};e.pageY!==t&&o(e.pageY,r),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,(function(e){return o(e.pageY,e.pageX)}),(function(){i._slider.toggleClassName("active",!1)}))}}},{key:"scrollDueToTouchEvent",value:function(e){var t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}},{key:"dispose",value:function(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),g(v(t.prototype),"dispose",this).call(this)}},{key:"_getMinimapDomNodeClassName",value:function(){var e=["minimap"];return"always"===this._model.options.showSlider?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}},{key:"getDomNode",value:function(){return this._domNode}},{key:"_applyLayout",value:function(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}},{key:"_getBuffer",value:function(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new D1(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}},{key:"onDidChangeOptions",value:function(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}},{key:"onSelectionChanged",value:function(){return this._renderDecorations=!0,!0}},{key:"onDecorationsChanged",value:function(){return this._renderDecorations=!0,!0}},{key:"onFlushed",value:function(){return this._lastRenderData=null,!0}},{key:"onLinesChanged",value:function(e,t){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(e,t)}},{key:"onLinesDeleted",value:function(e,t){var n;return null===(n=this._lastRenderData)||void 0===n||n.onLinesDeleted(e,t),!0}},{key:"onLinesInserted",value:function(e,t){var n;return null===(n=this._lastRenderData)||void 0===n||n.onLinesInserted(e,t),!0}},{key:"onScrollChanged",value:function(){return this._renderDecorations=!0,!0}},{key:"onThemeChanged",value:function(){return this._selectionColor=this._theme.getColor(aN),this._renderDecorations=!0,!0}},{key:"onTokensChanged",value:function(e){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(e)}},{key:"onTokensColorsChanged",value:function(){return this._lastRenderData=null,this._buffers=null,!0}},{key:"onZonesChanged",value:function(){return this._lastRenderData=null,!0}},{key:"render",value:function(e){if(0===this._model.options.renderMinimap)return this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),void this._sliderHorizontal.setHeight(0);e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");var t=S1.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(t.sliderNeeded?"block":"none"),this._slider.setTop(t.sliderTop),this._slider.setHeight(t.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(t.sliderHeight),this.renderDecorations(t),this._lastRenderData=this.renderLines(t)}},{key:"renderDecorations",value:function(e){if(this._renderDecorations){this._renderDecorations=!1;var t=this._model.getSelections();t.sort(hd.compareRangesUsingStarts);var n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((function(e,t){return(e.options.zIndex||0)-(t.options.zIndex||0)}));var i=this._model.options,r=i.canvasInnerWidth,o=i.canvasInnerHeight,a=this._model.options.minimapLineHeight,s=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,u=this._decorationsCanvas.domNode.getContext("2d");u.clearRect(0,0,r,o);var c=new M1(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(u,t,c,e,a),this._renderDecorationsLineHighlights(u,n,c,e,a);var d=new M1(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(u,t,d,e,a,l,s,r),this._renderDecorationsHighlights(u,n,d,e,a,l,s,r),this._renderSectionHeaders(e)}}},{key:"_renderSelectionLineHighlights",value:function(e,t,n,i,r){if(this._selectionColor&&!this._selectionColor.isTransparent()){e.fillStyle=this._selectionColor.transparent(.5).toString();var o=0,a=0,s=!0,l=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value,f=i.intersectWithViewport(h);if(f){for(var g=C(f,2),v=g[0],p=g[1],m=v;m<=p;m++)n.set(m,!0);var y=i.getYForLineNumber(v,r),_=i.getYForLineNumber(p,r);a>=y||(a>o&&e.fillRect(8,o,e.canvas.width,a-o),o=y),a=_}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}a>o&&e.fillRect(8,o,e.canvas.width,a-o)}}},{key:"_renderDecorationsLineHighlights",value:function(e,t,n,i,r){for(var o=new Map,a=t.length-1;a>=0;a--){var s=t[a],l=s.options.minimap;if(l&&1===l.position){var u=i.intersectWithViewport(s.range);if(u){var c=C(u,2),d=c[0],h=c[1],f=l.getColor(this._theme.value);if(f&&!f.isTransparent()){var g=o.get(f.toString());g||(g=f.transparent(.5).toString(),o.set(f.toString(),g)),e.fillStyle=g;for(var v=d;v<=h;v++)if(!n.has(v)){n.set(v,!0);var p=i.getYForLineNumber(d,r);e.fillRect(8,p,e.canvas.width,r)}}}}}}},{key:"_renderSelectionsHighlights",value:function(e,t,n,i,r,o,a,s){if(this._selectionColor&&!this._selectionColor.isTransparent()){var l=!0,u=!1,c=void 0;try{for(var d,h=t[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value,g=i.intersectWithViewport(f);if(g)for(var v=C(g,2),p=v[0],m=v[1],y=p;y<=m;y++)this.renderDecorationOnLine(e,n,f,this._selectionColor,i,y,r,r,o,a,s)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}}},{key:"_renderDecorationsHighlights",value:function(e,t,n,i,r,o,a,s){var l=!0,u=!1,c=void 0;try{for(var d,h=t[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value,g=f.options.minimap;if(g){var v=i.intersectWithViewport(f.range);if(v){var p=C(v,2),m=p[0],y=p[1],_=g.getColor(this._theme.value);if(_&&!_.isTransparent())for(var b=m;b<=y;b++)switch(g.position){case 1:this.renderDecorationOnLine(e,n,f.range,_,i,b,r,r,o,a,s);continue;case 2:var k=i.getYForLineNumber(b,r);this.renderDecoration(e,_,2,k,2,r);continue}}}}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}},{key:"renderDecorationOnLine",value:function(e,t,n,i,r,o,a,s,l,u,c){var d=r.getYForLineNumber(o,s);if(!(d+a<0||d>this._model.options.canvasInnerHeight)){var h=n.startLineNumber,f=n.endLineNumber,g=h===o?n.startColumn:1,v=f===o?n.endColumn:this._model.getLineMaxColumn(o),p=this.getXOffsetForPosition(t,o,g,l,u,c),m=this.getXOffsetForPosition(t,o,v,l,u,c);this.renderDecoration(e,i,p,d,m-p,a)}}},{key:"getXOffsetForPosition",value:function(e,t,n,i,r,o){if(1===n)return 8;if((n-1)*r>=o)return o;var a=e.get(t);if(!a){var s=this._model.getLineContent(t);a=[8];for(var l=8,u=1;u<s.length+1;u++){var c=s.charCodeAt(u-1),d=l+(9===c?i*r:Df(c)?2*r:r);if(d>=o){a[u]=o;break}a[u]=d,l=d}e.set(t,a)}return n-1<a.length?a[n-1]:o}},{key:"renderDecoration",value:function(e,t,n,i,r,o){e.fillStyle=t&&t.toString()||"",e.fillRect(n,i,r,o)}},{key:"_renderSectionHeaders",value:function(e){var n=this._model.options.minimapLineHeight,i=this._model.options.sectionHeaderFontSize,r=this._model.options.sectionHeaderLetterSpacing,o=1.5*i,a=this._model.options.canvasInnerWidth,s=this._model.options.backgroundColor,l="rgb(".concat(s.r," ").concat(s.g," ").concat(s.b," / .7)"),u=this._model.options.sectionHeaderFontColor,c="rgb(".concat(u.r," ").concat(u.g," ").concat(u.b,")"),d=c,h=this._decorationsCanvas.domNode.getContext("2d");h.letterSpacing=r+"px",h.font="500 "+i+"px "+this._model.options.sectionHeaderFontFamily,h.strokeStyle=d,h.lineWidth=.2;var f=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);f.sort((function(e,t){return e.range.startLineNumber-t.range.startLineNumber}));var g=t._fitSectionHeader.bind(null,h,a-8),v=!0,p=!1,m=void 0;try{for(var y,_=f[Symbol.iterator]();!(v=(y=_.next()).done);v=!0){var b,k=y.value,w=e.getYForLineNumber(k.range.startLineNumber,n)+i,C=w-i,S=C+2,x=this._model.getSectionHeaderText(k,g);t._renderSectionLabel(h,x,2===(null===(b=k.options.minimap)||void 0===b?void 0:b.sectionHeaderStyle),l,c,a,C,o,w,S)}}catch(e){p=!0,m=e}finally{try{v||null==_.return||_.return()}finally{if(p)throw m}}}},{key:"renderLines",value:function(e){var n=e.startLineNumber,i=e.endLineNumber,r=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){var o=this._lastRenderData._get();return new L1(e,o.imageData,o.lines)}var a=this._getBuffer();if(!a)return null;for(var s=C(t._renderUntouchedLines(a,e.topPaddingLineCount,n,i,r,this._lastRenderData),3),l=s[0],u=s[1],c=s[2],d=this._model.getMinimapLinesRenderingData(n,i,c),h=this._model.getOptions().tabSize,f=this._model.options.defaultBackgroundColor,g=this._model.options.backgroundColor,v=this._model.options.foregroundAlpha,p=this._model.tokensColorTracker,m=p.backgroundIsLight(),y=this._model.options.renderMinimap,_=this._model.options.charRenderer(),b=this._model.options.fontScale,k=this._model.options.minimapCharWidth,w=(1===y?2:3)*b,S=r>w?Math.floor((r-w)/2):0,x=g.a/255,L=new g1(Math.round((g.r-f.r)*x+f.r),Math.round((g.g-f.g)*x+f.g),Math.round((g.b-f.b)*x+f.b),255),D=e.topPaddingLineCount*r,N=[],I=0,E=i-n+1;I<E;I++)c[I]&&t._renderLine(a,L,g.a,m,y,k,p,v,_,D,S,h,d[I],b,r),N[I]=new x1(D),D+=r;var M=-1===l?0:l,T=(-1===u?a.height:u)-M;return this._canvas.domNode.getContext("2d").putImageData(a,0,0,0,M,a.width,T),new L1(e,a,N)}}],[{key:"_fitSectionHeader",value:function(e,t,n){if(!n)return n;var i=e.measureText(n).width,r=e.measureText("…").width;if(i<=t||i<=r)return n;for(var o=n.length,a=i/n.length,s=Math.floor((t-r)/a)-1,l=Math.ceil(s/2);l>0&&/\s/.test(n[l-1]);)--l;return n.substring(0,l)+"…"+n.substring(o-(s-l))}},{key:"_renderSectionLabel",value:function(e,t,n,i,r,o,a,s,l,u){t&&(e.fillStyle=i,e.fillRect(0,a,o,s),e.fillStyle=r,e.fillText(t,8,l)),n&&(e.beginPath(),e.moveTo(0,u),e.lineTo(o,u),e.closePath(),e.stroke())}},{key:"_renderUntouchedLines",value:function(e,t,n,i,r,o){var a=[];if(!o){for(var s=0,l=i-n+1;s<l;s++)a[s]=!0;return[-1,-1,a]}for(var u=o._get(),c=u.imageData.data,d=u.rendLineNumberStart,h=u.lines,f=h.length,g=e.width,v=e.data,p=(i-n+1)*r*g*4,m=-1,y=-1,_=-1,b=-1,k=-1,w=-1,C=t*r,S=n;S<=i;S++){var x=S-n,L=S-d,D=L>=0&&L<f?h[L].dy:-1;if(-1!==D){var N=D*g*4,I=(D+r)*g*4,E=C*g*4,M=(C+r)*g*4;b===N&&w===E?(b=I,w=M):(-1!==_&&(v.set(c.subarray(_,b),k),-1===m&&0===_&&_===k&&(m=b),-1===y&&b===p&&_===k&&(y=_)),_=N,b=I,k=E,w=M),a[x]=!1,C+=r}else a[x]=!0,C+=r}return-1!==_&&(v.set(c.subarray(_,b),k),-1===m&&0===_&&_===k&&(m=b),-1===y&&b===p&&_===k&&(y=_)),[-1===m?-1:m/(4*g),-1===y?-1:y/(4*g),a]}},{key:"_renderLine",value:function(e,t,n,i,r,o,a,s,l,u,c,d,h,f,g){for(var v=h.content,p=h.tokens,m=e.width-o,y=1===g,_=8,b=0,k=0,w=0,C=p.getCount();w<C;w++)for(var S=p.getEndOffset(w),x=p.getForeground(w),L=a.getColor(x);b<S;b++){if(_>m)return;var D=v.charCodeAt(b);if(9===D){var N=d-(b+k)%d;k+=N-1,_+=N*o}else if(32===D)_+=o;else for(var I=Df(D)?2:1,E=0;E<I;E++)if(2===r?l.blockRenderChar(e,_,u+c,L,s,t,n,y):l.renderChar(e,_,u+c,D,L,s,t,n,f,i,y),(_+=o)>m)return}}}]),t}(Ru),M1=function(){function e(t,n,i){u(this,e),this._startLineNumber=t,this._endLineNumber=n,this._defaultValue=i,this._values=[];for(var r=0,o=this._endLineNumber-this._startLineNumber+1;r<o;r++)this._values[r]=i}return h(e,[{key:"has",value:function(e){return this.get(e)!==this._defaultValue}},{key:"set",value:function(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}},{key:"get",value:function(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}]),e}(),T1=function(e){function t(e,n){var i;u(this,t),(i=l(this,t,[e]))._viewDomNode=n;var r=i._context.configuration.options.get(146);return i._widgets={},i._verticalScrollbarWidth=r.verticalScrollbarWidth,i._minimapWidth=r.minimap.minimapWidth,i._horizontalScrollbarHeight=r.horizontalScrollbarHeight,i._editorHeight=r.height,i._editorWidth=r.width,i._viewDomNodeRect={top:0,left:0,width:0,height:0},i._domNode=Pm(document.createElement("div")),JX.write(i._domNode,4),i._domNode.setClassName("overlayWidgets"),i.overflowingOverlayWidgetsDomNode=Pm(document.createElement("div")),JX.write(i.overflowingOverlayWidgetsDomNode,5),i.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets"),i}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._widgets={}}},{key:"getDomNode",value:function(){return this._domNode}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,!0}},{key:"addWidget",value:function(e){var t=Pm(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}},{key:"setWidgetPosition",value:function(e,t){var n=this._widgets[e.getId()],i=t?t.preference:null,r=null==t?void 0:t.stackOridinal;return n.preference===i&&n.stack===r?(this._updateMaxMinWidth(),!1):(n.preference=i,n.stack=r,this.setShouldRender(),this._updateMaxMinWidth(),!0)}},{key:"removeWidget",value:function(e){var t=e.getId();if(this._widgets.hasOwnProperty(t)){var n=this._widgets[t].domNode.domNode;delete this._widgets[t],n.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}},{key:"_updateMaxMinWidth",value:function(){for(var e=0,t=Object.keys(this._widgets),n=0,i=t.length;n<i;n++){var r,o,a=t[n],s=null===(r=(o=this._widgets[a].widget).getMinContentWidthInPx)||void 0===r?void 0:r.call(o);void 0!==s&&(e=Math.max(e,s))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}},{key:"_renderWidget",value:function(e,t){var n=e.domNode;if(null!==e.preference){var i=2*this._verticalScrollbarWidth+this._minimapWidth;if(0===e.preference||1===e.preference){if(1===e.preference){var r=n.domNode.clientHeight;n.setTop(this._editorHeight-r-2*this._horizontalScrollbarHeight)}else n.setTop(0);void 0!==e.stack?(n.setTop(t[e.preference]),t[e.preference]+=n.domNode.clientWidth):n.setRight(i)}else if(2===e.preference)n.domNode.style.right="50%",void 0!==e.stack?(n.setTop(t[2]),t[2]+=n.domNode.clientHeight):n.setTop(0);else{var o=e.preference,a=o.top,s=o.left;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){var l=this._viewDomNodeRect;n.setTop(a+l.top),n.setLeft(s+l.left),n.setPosition("fixed")}else n.setTop(a),n.setLeft(s),n.setPosition("absolute")}}else n.setTop("")}},{key:"prepareRender",value:function(e){this._viewDomNodeRect=xp(this._viewDomNode.domNode)}},{key:"render",value:function(e){var t=this;this._domNode.setWidth(this._editorWidth);var n=Object.keys(this._widgets),i=Array.from({length:3},(function(){return 0}));n.sort((function(e,n){return(t._widgets[e].stack||0)-(t._widgets[n].stack||0)}));for(var r=0,o=n.length;r<o;r++){var a=n[r];this._renderWidget(this._widgets[a],i)}}}]),t}($X),R1=function(){function e(t,n){u(this,e);var i=t.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(144),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);var r=n.getColor(aB);this.borderColor=r?r.toString():null,this.hideCursor=i.get(59);var o=n.getColor(OW);this.cursorColorSingle=o?o.transparent(.7).toString():null;var a=n.getColor(WW);this.cursorColorPrimary=a?a.transparent(.7).toString():null;var s=n.getColor(HW);this.cursorColorSecondary=s?s.transparent(.7).toString():null,this.themeType=n.type;var l=i.get(73),c=l.enabled,d=l.side,h=n.getColor(sB),f=Rh.getDefaultBackground();this.backgroundColor=h||(c&&"right"===d?f:null);var g=i.get(146).overviewRuler;this.top=g.top,this.right=g.right,this.domWidth=g.width,this.domHeight=g.height,0===this.overviewRulerLanes?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);var v=C(this._initLanes(1,this.canvasWidth,this.overviewRulerLanes),2),p=v[0],m=v[1];this.x=p,this.w=m}return h(e,[{key:"_initLanes",value:function(e,t,n){var i=t-e;if(n>=3){var r=Math.floor(i/3),o=Math.floor(i/3),a=i-r-o,s=e+r;return[[0,e,s,e,e+r+a,e,s,e],[0,r,a,r+a,o,r+a+o,a+o,r+a+o]]}if(2===n){var l=Math.floor(i/2),u=i-l;return[[0,e,e,e,e+l,e,e,e],[0,l,l,l,u,l+u,l+u,l+u]]}return[[0,e,e,e,e,e,e,e],[0,i,i,i,i,i,i,i]]}},{key:"equals",value:function(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&XC.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}]),e}(),A1=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._actualShouldRender=0,n._renderedDecorations=[],n._renderedCursorPositions=[],n._domNode=Pm(document.createElement("canvas")),n._domNode.setClassName("decorationsOverviewRuler"),n._domNode.setPosition("absolute"),n._domNode.setLayerHinting(!0),n._domNode.setContain("strict"),n._domNode.setAttribute("aria-hidden","true"),n._updateSettings(!1),n._tokensColorTrackerListener=Rh.onDidChange((function(e){e.changedColorMap&&n._updateSettings(!0)})),n._cursorPositions=[{position:new dd(1,1),color:n._settings.cursorColorSingle}],n}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._tokensColorTrackerListener.dispose()}},{key:"_updateSettings",value:function(e){var t=new R1(this._context.configuration,this._context.theme);return(!this._settings||!this._settings.equals(t))&&(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}},{key:"_markRenderingIsNeeded",value:function(){return this._actualShouldRender=2,!0}},{key:"_markRenderingIsMaybeNeeded",value:function(){return this._actualShouldRender=1,!0}},{key:"onConfigurationChanged",value:function(e){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()}},{key:"onCursorStateChanged",value:function(e){this._cursorPositions=[];for(var t=0,n=e.selections.length;t<n;t++){var i=this._settings.cursorColorSingle;n>1&&(i=0===t?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:i})}return this._cursorPositions.sort((function(e,t){return dd.compare(e.position,t.position)})),this._markRenderingIsMaybeNeeded()}},{key:"onDecorationsChanged",value:function(e){return!!e.affectsOverviewRuler&&this._markRenderingIsMaybeNeeded()}},{key:"onFlushed",value:function(e){return this._markRenderingIsNeeded()}},{key:"onScrollChanged",value:function(e){return!!e.scrollHeightChanged&&this._markRenderingIsNeeded()}},{key:"onZonesChanged",value:function(e){return this._markRenderingIsNeeded()}},{key:"onThemeChanged",value:function(e){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()}},{key:"getDomNode",value:function(){return this._domNode.domNode}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._render(),this._actualShouldRender=0}},{key:"_render",value:function(){var e=this._settings.backgroundColor;if(0===this._settings.overviewRulerLanes)return this._domNode.setBackgroundColor(e?XC.Format.CSS.formatHexA(e):""),void this._domNode.setDisplay("none");var t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(qQ.compareByRenderingProps),1!==this._actualShouldRender||qQ.equalsArr(this._renderedDecorations,t)||(this._actualShouldRender=2),1!==this._actualShouldRender||ea(this._renderedCursorPositions,this._cursorPositions,(function(e,t){return e.position.lineNumber===t.position.lineNumber&&e.color===t.color}))||(this._actualShouldRender=2),1!==this._actualShouldRender){this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");var n=this._settings.canvasWidth,i=this._settings.canvasHeight,r=this._settings.lineHeight,o=this._context.viewLayout,a=i/this._context.viewLayout.getScrollHeight(),s=6*this._settings.pixelRatio|0,l=s/2|0,u=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(u.fillStyle=XC.Format.CSS.formatHexA(e),u.fillRect(0,0,n,i)):(u.clearRect(0,0,n,i),u.fillStyle=XC.Format.CSS.formatHexA(e),u.fillRect(0,0,n,i)):u.clearRect(0,0,n,i);var c=this._settings.x,d=this._settings.w,h=!0,f=!1,g=void 0;try{for(var v,p=t[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var m=v.value,y=m.color,_=m.data;u.fillStyle=y;for(var b=0,k=0,w=0,C=0,S=_.length/3;C<S;C++){var x=_[3*C],L=_[3*C+1],D=_[3*C+2],N=o.getVerticalOffsetForLineNumber(L)*a|0,I=(o.getVerticalOffsetForLineNumber(D)+r)*a|0;if(I-N<s){var E=(N+I)/2|0;E<l?E=l:E+l>i&&(E=i-l),N=E-l,I=E+l}N>w+1||x!==b?(0!==C&&u.fillRect(c[b],k,d[b],w-k),b=x,k=N,w=I):I>w&&(w=I)}u.fillRect(c[b],k,d[b],w-k)}}catch(e){f=!0,g=e}finally{try{h||null==p.return||p.return()}finally{if(f)throw g}}if(!this._settings.hideCursor){for(var M=2*this._settings.pixelRatio|0,T=M/2|0,R=this._settings.x[7],A=this._settings.w[7],P=-100,O=-100,F=null,W=0,B=this._cursorPositions.length;W<B;W++){var H=this._cursorPositions[W].color;if(H){var V=this._cursorPositions[W].position,z=o.getVerticalOffsetForLineNumber(V.lineNumber)*a|0;z<T?z=T:z+T>i&&(z=i-T);var U=z-T,j=U+M;U>O+1||H!==F?(0!==W&&F&&u.fillRect(R,P,A,O-P),P=U,O=j):j>O&&(O=j),F=H,u.fillStyle=H}}F&&u.fillRect(R,P,A,O-P)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(u.beginPath(),u.lineWidth=1,u.strokeStyle=this._settings.borderColor,u.moveTo(0,0),u.lineTo(0,i),u.moveTo(1,0),u.lineTo(n,0),u.stroke())}}}]),t}($X),P1=function(){function e(t,n,i){u(this,e),this._colorZoneBrand=void 0,this.from=0|t,this.to=0|n,this.colorId=0|i}return h(e,null,[{key:"compare",value:function(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}]),e}(),O1=function(){function e(t,n,i,r){u(this,e),this._overviewRulerZoneBrand=void 0,this.startLineNumber=t,this.endLineNumber=n,this.heightInLines=i,this.color=r,this._colorZone=null}return h(e,[{key:"setColorZone",value:function(e){this._colorZone=e}},{key:"getColorZones",value:function(){return this._colorZone}}],[{key:"compare",value:function(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}}]),e}(),F1=function(){function e(t){u(this,e),this._getVerticalOffsetForLine=t,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}return h(e,[{key:"getId2Color",value:function(){return this._id2Color}},{key:"setZones",value:function(e){this._zones=e,this._zones.sort(O1.compare)}},{key:"setLineHeight",value:function(e){return this._lineHeight!==e&&(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this._colorZonesInvalid=!0}},{key:"getDOMWidth",value:function(){return this._domWidth}},{key:"getCanvasWidth",value:function(){return this._domWidth*this._pixelRatio}},{key:"setDOMWidth",value:function(e){return this._domWidth!==e&&(this._domWidth=e,this._colorZonesInvalid=!0,!0)}},{key:"getDOMHeight",value:function(){return this._domHeight}},{key:"getCanvasHeight",value:function(){return this._domHeight*this._pixelRatio}},{key:"setDOMHeight",value:function(e){return this._domHeight!==e&&(this._domHeight=e,this._colorZonesInvalid=!0,!0)}},{key:"getOuterHeight",value:function(){return this._outerHeight}},{key:"setOuterHeight",value:function(e){return this._outerHeight!==e&&(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}},{key:"resolveColorZones",value:function(){for(var e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),i=n/Math.floor(this._outerHeight),r=Math.floor(4*this._pixelRatio/2),o=[],a=0,s=this._zones.length;a<s;a++){var l=this._zones[a];if(!e){var u=l.getColorZones();if(u){o.push(u);continue}}var c=this._getVerticalOffsetForLine(l.startLineNumber),d=0===l.heightInLines?this._getVerticalOffsetForLine(l.endLineNumber)+t:c+l.heightInLines*t,h=Math.floor(i*c),f=Math.floor(i*d),g=Math.floor((h+f)/2),v=f-g;v<r&&(v=r),g-v<0&&(g=v),g+v>n&&(g=n-v);var p=l.color,m=this._color2Id[p];m||(m=++this._lastAssignedId,this._color2Id[p]=m,this._id2Color[m]=p);var y=new P1(g-v,g+v,m);l.setColorZone(y),o.push(y)}return this._colorZonesInvalid=!1,o.sort(P1.compare),o}}]),e}(),W1=function(e){function t(e,n){var i;u(this,t),(i=l(this,t))._context=e;var r=i._context.configuration.options;return i._domNode=Pm(document.createElement("canvas")),i._domNode.setClassName(n),i._domNode.setPosition("absolute"),i._domNode.setLayerHinting(!0),i._domNode.setContain("strict"),i._zoneManager=new F1((function(e){return i._context.viewLayout.getVerticalOffsetForLineNumber(e)})),i._zoneManager.setDOMWidth(0),i._zoneManager.setDOMHeight(0),i._zoneManager.setOuterHeight(i._context.viewLayout.getScrollHeight()),i._zoneManager.setLineHeight(r.get(67)),i._zoneManager.setPixelRatio(r.get(144)),i._context.addEventHandler(i),i}return p(t,e),h(t,[{key:"dispose",value:function(){this._context.removeEventHandler(this),g(v(t.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(144)&&(this._zoneManager.setPixelRatio(t.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}},{key:"onFlushed",value:function(e){return this._render(),!0}},{key:"onScrollChanged",value:function(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}},{key:"onZonesChanged",value:function(e){return this._render(),!0}},{key:"getDomNode",value:function(){return this._domNode.domNode}},{key:"setLayout",value:function(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);var t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,(t=this._zoneManager.setDOMHeight(e.height)||t)&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}},{key:"setZones",value:function(e){this._zoneManager.setZones(e),this._render()}},{key:"_render",value:function(){if(0===this._zoneManager.getOuterHeight())return!1;var e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),i=this._zoneManager.getId2Color(),r=this._domNode.domNode.getContext("2d");return r.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(r,n,i,e),!0}},{key:"_renderOneLane",value:function(e,t,n,i){var r=0,o=0,a=0,s=!0,l=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value,f=h.colorId,g=h.from,v=h.to;f!==r?(e.fillRect(0,o,i,a-o),r=f,e.fillStyle=n[r],o=g,a=v):a>=g?a=Math.max(a,v):(e.fillRect(0,o,i,a-o),o=g,a=v)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}e.fillRect(0,o,i,a-o)}}]),t}(XX),B1=function(e){function t(e){var n;u(this,t),(n=l(this,t,[e])).domNode=Pm(document.createElement("div")),n.domNode.setAttribute("role","presentation"),n.domNode.setAttribute("aria-hidden","true"),n.domNode.setClassName("view-rulers"),n._renderedRulers=[];var i=n._context.configuration.options;return n._rulers=i.get(103),n._typicalHalfwidthCharacterWidth=i.get(50).typicalHalfwidthCharacterWidth,n}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}},{key:"onScrollChanged",value:function(e){return e.scrollHeightChanged}},{key:"prepareRender",value:function(e){}},{key:"_ensureRulersCount",value:function(){var e=this._renderedRulers.length,t=this._rulers.length;if(e!==t)if(e<t)for(var n=this._context.viewModel.model.getOptions().tabSize,i=t-e;i>0;){var r=Pm(document.createElement("div"));r.setClassName("view-ruler"),r.setWidth(n),this.domNode.appendChild(r),this._renderedRulers.push(r),i--}else for(var o=e-t;o>0;){var a=this._renderedRulers.pop();this.domNode.removeChild(a),o--}}},{key:"render",value:function(e){this._ensureRulersCount();for(var t=0,n=this._rulers.length;t<n;t++){var i=this._renderedRulers[t],r=this._rulers[t];i.setBoxShadow(r.color?"1px 0 0 0 ".concat(r.color," inset"):""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(r.column*this._typicalHalfwidthCharacterWidth)}}}]),t}($X),H1=function(e){function t(e){var n;u(this,t),(n=l(this,t,[e]))._scrollTop=0,n._width=0,n._updateWidth(),n._shouldShow=!1;var i=n._context.configuration.options.get(104);return n._useShadows=i.useShadows,n._domNode=Pm(document.createElement("div")),n._domNode.setAttribute("role","presentation"),n._domNode.setAttribute("aria-hidden","true"),n}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}},{key:"_updateShouldShow",value:function(){var e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e&&(this._shouldShow=e,!0)}},{key:"getDomNode",value:function(){return this._domNode}},{key:"_updateWidth",value:function(){var e=this._context.configuration.options,t=e.get(146);0===t.minimap.renderMinimap||t.minimap.minimapWidth>0&&0===t.minimap.minimapLeft?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options.get(104);return this._useShadows=t.useShadows,this._updateWidth(),this._updateShouldShow(),!0}},{key:"onScrollChanged",value:function(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}]),t}($X),V1=function e(t){u(this,e),this.left=t.left,this.width=t.width,this.startStyle=null,this.endStyle=null},z1=function e(t,n){u(this,e),this.lineNumber=t,this.ranges=n};function U1(e){return new V1(e)}function j1(e){return new z1(e.lineNumber,e.ranges.map(U1))}var K1=function(e){function t(e){var n;u(this,t),(n=l(this,t))._previousFrameVisibleRangesWithStyle=[],n._context=e;var i=n._context.configuration.options;return n._roundedSelection=i.get(102),n._typicalHalfwidthCharacterWidth=i.get(50).typicalHalfwidthCharacterWidth,n._selections=[],n._renderResult=null,n._context.addEventHandler(n),n}return p(t,e),h(t,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,g(v(t.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;return this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections.slice(0),!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_visibleRangesHaveGaps",value:function(e){for(var t=0,n=e.length;t<n;t++){if(e[t].ranges.length>1)return!0}return!1}},{key:"_enrichVisibleRangesWithStyle",value:function(e,t,n){var i=this._typicalHalfwidthCharacterWidth/4,r=null,o=null;if(n&&n.length>0&&t.length>0){var a=t[0].lineNumber;if(a===e.startLineNumber)for(var s=0;!r&&s<n.length;s++)n[s].lineNumber===a&&(r=n[s].ranges[0]);var l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(var u=n.length-1;!o&&u>=0;u--)n[u].lineNumber===l&&(o=n[u].ranges[0]);r&&!r.startStyle&&(r=null),o&&!o.startStyle&&(o=null)}for(var c=0,d=t.length;c<d;c++){var h=t[c].ranges[0],f=h.left,g=h.left+h.width,v={top:0,bottom:0},p={top:0,bottom:0};if(c>0){var m=t[c-1].ranges[0].left,y=t[c-1].ranges[0].left+t[c-1].ranges[0].width;q1(f-m)<i?v.top=2:f>m&&(v.top=1),q1(g-y)<i?p.top=2:m<g&&g<y&&(p.top=1)}else r&&(v.top=r.startStyle.top,p.top=r.endStyle.top);if(c+1<d){var _=t[c+1].ranges[0].left,b=t[c+1].ranges[0].left+t[c+1].ranges[0].width;q1(f-_)<i?v.bottom=2:_<f&&f<b&&(v.bottom=1),q1(g-b)<i?p.bottom=2:g<b&&(p.bottom=1)}else o&&(v.bottom=o.startStyle.bottom,p.bottom=o.endStyle.bottom);h.startStyle=v,h.endStyle=p}}},{key:"_getVisibleRangesWithStyle",value:function(e,t,n){var i=(t.linesVisibleRangesForRange(e,!0)||[]).map(j1);return!this._visibleRangesHaveGaps(i)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,i,n),i}},{key:"_createSelectionPiece",value:function(e,t,n,i,r){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+i.toString()+"px;width:"+r.toString()+'px;"></div>'}},{key:"_actualRenderOneSelection",value:function(e,n,i,r){if(0!==r.length)for(var o=!!r[0].ranges[0].startStyle,a=r[0].lineNumber,s=r[r.length-1].lineNumber,l=0,u=r.length;l<u;l++){for(var c=r[l],d=c.lineNumber,h=d-n,f=i&&d===a?1:0,g=i&&d!==a&&d===s?1:0,v="",p="",m=0,y=c.ranges.length;m<y;m++){var _=c.ranges[m];if(o){var b=_.startStyle,k=_.endStyle;if(1===b.top||1===b.bottom){v+=this._createSelectionPiece(f,g,t.SELECTION_CLASS_NAME,_.left-t.ROUNDED_PIECE_WIDTH,t.ROUNDED_PIECE_WIDTH);var w=t.EDITOR_BACKGROUND_CLASS_NAME;1===b.top&&(w+=" "+t.SELECTION_TOP_RIGHT),1===b.bottom&&(w+=" "+t.SELECTION_BOTTOM_RIGHT),v+=this._createSelectionPiece(f,g,w,_.left-t.ROUNDED_PIECE_WIDTH,t.ROUNDED_PIECE_WIDTH)}if(1===k.top||1===k.bottom){v+=this._createSelectionPiece(f,g,t.SELECTION_CLASS_NAME,_.left+_.width,t.ROUNDED_PIECE_WIDTH);var C=t.EDITOR_BACKGROUND_CLASS_NAME;1===k.top&&(C+=" "+t.SELECTION_TOP_LEFT),1===k.bottom&&(C+=" "+t.SELECTION_BOTTOM_LEFT),v+=this._createSelectionPiece(f,g,C,_.left+_.width,t.ROUNDED_PIECE_WIDTH)}}var S=t.SELECTION_CLASS_NAME;if(o){var x=_.startStyle,L=_.endStyle;0===x.top&&(S+=" "+t.SELECTION_TOP_LEFT),0===x.bottom&&(S+=" "+t.SELECTION_BOTTOM_LEFT),0===L.top&&(S+=" "+t.SELECTION_TOP_RIGHT),0===L.bottom&&(S+=" "+t.SELECTION_BOTTOM_RIGHT)}p+=this._createSelectionPiece(f,g,S,_.left,_.width)}e[h][0]+=v,e[h][1]+=p}}},{key:"prepareRender",value:function(e){for(var t=[],n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,r=n;r<=i;r++){t[r-n]=["",""]}for(var o=[],a=0,s=this._selections.length;a<s;a++){var l=this._selections[a];if(l.isEmpty())o[a]=null;else{var u=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[a]);o[a]=u,this._actualRenderOneSelection(t,n,this._selections.length>1,u)}}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map((function(e){var t=C(e,2);return t[0]+t[1]}))}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}]),t}(X$);function q1(e){return e<0?-e:e}K1.SELECTION_CLASS_NAME="selected-text",K1.SELECTION_TOP_LEFT="top-left-radius",K1.SELECTION_BOTTOM_LEFT="bottom-left-radius",K1.SELECTION_TOP_RIGHT="top-right-radius",K1.SELECTION_BOTTOM_RIGHT="bottom-right-radius",K1.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",K1.ROUNDED_PIECE_WIDTH=10,VS((function(e,t){var n=e.getColor(pD);n&&!n.isTransparent()&&t.addRule(".monaco-editor .view-line span.inline-selected-text { color: ".concat(n,"; }"))}));var G1,Z1=function e(t,n,i,r,o,a,s){u(this,e),this.top=t,this.left=n,this.paddingLeft=i,this.width=r,this.height=o,this.textContent=a,this.textContentClassName=s};!function(e){e[e.Single=0]="Single",e[e.MultiPrimary=1]="MultiPrimary",e[e.MultiSecondary=2]="MultiSecondary"}(G1||(G1={}));var Y1=function(){function e(t,n){u(this,e),this._context=t;var i=this._context.configuration.options,r=i.get(50);this._cursorStyle=i.get(28),this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Pm(document.createElement("div")),this._domNode.setClassName("cursor ".concat(eJ)),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Om(this._domNode,r),this._domNode.setDisplay("none"),this._position=new dd(1,1),this._pluralityClass="",this.setPlurality(n),this._lastRenderedContent="",this._renderData=null}return h(e,[{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return this._position}},{key:"setPlurality",value:function(e){switch(e){default:case G1.Single:this._pluralityClass="";break;case G1.MultiPrimary:this._pluralityClass="cursor-primary";break;case G1.MultiSecondary:this._pluralityClass="cursor-secondary"}}},{key:"show",value:function(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}},{key:"hide",value:function(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,n=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),Om(this._domNode,n),!0}},{key:"onCursorPositionChanged",value:function(e,t){return this._domNode.domNode.style.transitionProperty=t?"none":"",this._position=e,!0}},{key:"_getGraphemeAwarePosition",value:function(){var e=this._position,t=e.lineNumber,n=e.column,i=this._context.viewModel.getLineContent(t),r=C(function(e,t){t>0&&gf(e.charCodeAt(t))&&t--;var n=t+_f(e,t);return[n-bf(e,n),n]}(i,n-1),2),o=r[0],a=r[1];return[new dd(t,o+1),i.substring(o,a)]}},{key:"_prepareRender",value:function(e){var t="",n="",i=C(this._getGraphemeAwarePosition(),2),r=i[0],o=i[1];if(this._cursorStyle===ul.Line||this._cursorStyle===ul.LineThin){var a=e.visibleRangeForPosition(r);if(!a||a.outsideRenderedLine)return null;var s,l=ep(this._domNode.domNode);this._cursorStyle===ul.Line?(s=mm(l,this._lineCursorWidth>0?this._lineCursorWidth:2))>2&&(t=o,n=this._getTokenClassName(r)):s=mm(l,1);var u=a.left,c=0;s>=2&&u>=1&&(u-=c=1);var d=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.bigNumbersDelta;return new Z1(d,u,c,s,this._lineHeight,t,n)}var h=e.linesVisibleRangesForRange(new hd(r.lineNumber,r.column,r.lineNumber,r.column+o.length),!1);if(!h||0===h.length)return null;var f=h[0];if(f.outsideRenderedLine||0===f.ranges.length)return null;var g=f.ranges[0],v="\t"===o||g.width<1?this._typicalHalfwidthCharacterWidth:g.width;this._cursorStyle===ul.Block&&(t=o,n=this._getTokenClassName(r));var p=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.bigNumbersDelta,m=this._lineHeight;return this._cursorStyle!==ul.Underline&&this._cursorStyle!==ul.UnderlineThin||(p+=this._lineHeight-2,m=2),new Z1(p,g.left,0,v,m,t,n)}},{key:"_getTokenClassName",value:function(e){var t=this._context.viewModel.getViewLineData(e.lineNumber),n=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(n)}},{key:"prepareRender",value:function(e){this._renderData=this._prepareRender(e)}},{key:"render",value:function(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName("cursor ".concat(this._pluralityClass," ").concat(eJ," ").concat(this._renderData.textContentClassName)),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}]),e}(),Q1=function(e){function t(e){var n;u(this,t);var i=(n=l(this,t,[e]))._context.configuration.options;return n._readOnly=i.get(92),n._cursorBlinking=i.get(26),n._cursorStyle=i.get(28),n._cursorSmoothCaretAnimation=i.get(27),n._selectionIsEmpty=!0,n._isComposingInput=!1,n._isVisible=!1,n._primaryCursor=new Y1(n._context,G1.Single),n._secondaryCursors=[],n._renderData=[],n._domNode=Pm(document.createElement("div")),n._domNode.setAttribute("role","presentation"),n._domNode.setAttribute("aria-hidden","true"),n._updateDomClassName(),n._domNode.appendChild(n._primaryCursor.getDomNode()),n._startCursorBlinkAnimation=new wg,n._cursorFlatBlinkInterval=new yp,n._blinkingEnabled=!1,n._editorHasFocus=!1,n._updateBlinking(),n}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}},{key:"getDomNode",value:function(){return this._domNode}},{key:"onCompositionStart",value:function(e){return this._isComposingInput=!0,this._updateBlinking(),!0}},{key:"onCompositionEnd",value:function(e){return this._isComposingInput=!1,this._updateBlinking(),!0}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(var n=0,i=this._secondaryCursors.length;n<i;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}},{key:"_onCursorPositionChanged",value:function(e,t,n){var i=this._secondaryCursors.length!==t.length||"explicit"===this._cursorSmoothCaretAnimation&&3!==n;if(this._primaryCursor.setPlurality(t.length?G1.MultiPrimary:G1.Single),this._primaryCursor.onCursorPositionChanged(e,i),this._updateBlinking(),this._secondaryCursors.length<t.length)for(var r=t.length-this._secondaryCursors.length,o=0;o<r;o++){var a=new Y1(this._context,G1.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}else if(this._secondaryCursors.length>t.length)for(var s=this._secondaryCursors.length-t.length,l=0;l<s;l++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1);for(var u=0;u<t.length;u++)this._secondaryCursors[u].onCursorPositionChanged(t[u],i)}},{key:"onCursorStateChanged",value:function(e){for(var t=[],n=0,i=e.selections.length;n<i;n++)t[n]=e.selections[n].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);var r=e.selections[0].isEmpty();return this._selectionIsEmpty!==r&&(this._selectionIsEmpty=r,this._updateDomClassName()),!0}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onFocusChanged",value:function(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return!0}},{key:"onTokensChanged",value:function(e){var t=function(t){for(var n=0,i=e.ranges.length;n<i;n++)if(e.ranges[n].fromLineNumber<=t.lineNumber&&t.lineNumber<=e.ranges[n].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;var n=!0,i=!1,r=void 0;try{for(var o,a=this._secondaryCursors[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){if(t(o.value.getPosition()))return!0}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return!1}},{key:"onZonesChanged",value:function(e){return!0}},{key:"_getCursorBlinking",value:function(){return this._isComposingInput?0:this._editorHasFocus?this._readOnly?5:this._cursorBlinking:0}},{key:"_updateBlinking",value:function(){var e=this;this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();var n=this._getCursorBlinking(),i=0===n,r=5===n;i?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),i||r||(1===n?this._cursorFlatBlinkInterval.cancelAndSet((function(){e._isVisible?e._hide():e._show()}),t.BLINK_INTERVAL,ep(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet((function(){e._blinkingEnabled=!0,e._updateDomClassName()}),t.BLINK_INTERVAL))}},{key:"_updateDomClassName",value:function(){this._domNode.setClassName(this._getClassName())}},{key:"_getClassName",value:function(){var e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case ul.Line:e+=" cursor-line-style";break;case ul.Block:e+=" cursor-block-style";break;case ul.Underline:e+=" cursor-underline-style";break;case ul.LineThin:e+=" cursor-line-thin-style";break;case ul.BlockOutline:e+=" cursor-block-outline-style";break;case ul.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return"on"!==this._cursorSmoothCaretAnimation&&"explicit"!==this._cursorSmoothCaretAnimation||(e+=" cursor-smooth-caret-animation"),e}},{key:"_show",value:function(){this._primaryCursor.show();for(var e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}},{key:"_hide",value:function(){this._primaryCursor.hide();for(var e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}},{key:"prepareRender",value:function(e){this._primaryCursor.prepareRender(e);for(var t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}},{key:"render",value:function(e){var t=[],n=0,i=this._primaryCursor.render(e);i&&(t[n++]=i);for(var r=0,o=this._secondaryCursors.length;r<o;r++){var a=this._secondaryCursors[r].render(e);a&&(t[n++]=a)}this._renderData=t}},{key:"getLastRenderData",value:function(){return this._renderData}}]),t}($X);Q1.BLINK_INTERVAL=500,VS((function(e,t){var n=[{class:".cursor",foreground:OW,background:FW},{class:".cursor-primary",foreground:WW,background:BW},{class:".cursor-secondary",foreground:HW,background:VW}],i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=e.getColor(l.foreground);if(u){var c=e.getColor(l.background);c||(c=u.opposite()),t.addRule(".monaco-editor .cursors-layer ".concat(l.class," { background-color: ").concat(u,"; border-color: ").concat(u,"; color: ").concat(c,"; }")),RS(e.type)&&t.addRule(".monaco-editor .cursors-layer.has-selection ".concat(l.class," { border-left: 1px solid ").concat(c,"; border-right: 1px solid ").concat(c,"; }"))}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}));var X1=function(){throw new Error("Invalid change accessor")},$1=function(e){function t(e){var n;u(this,t);var i=(n=l(this,t,[e]))._context.configuration.options,r=i.get(146);return n._lineHeight=i.get(67),n._contentWidth=r.contentWidth,n._contentLeft=r.contentLeft,n.domNode=Pm(document.createElement("div")),n.domNode.setClassName("view-zones"),n.domNode.setPosition("absolute"),n.domNode.setAttribute("role","presentation"),n.domNode.setAttribute("aria-hidden","true"),n.marginDomNode=Pm(document.createElement("div")),n.marginDomNode.setClassName("margin-view-zones"),n.marginDomNode.setPosition("absolute"),n.marginDomNode.setAttribute("role","presentation"),n.marginDomNode.setAttribute("aria-hidden","true"),n._zones={},n}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._zones={}}},{key:"_recomputeWhitespacesProps",value:function(){var e=this,t=this._context.viewLayout.getWhitespaces(),n=new Map,i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;n.set(l.id,l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}var u=!1;return this._context.viewModel.changeWhitespace((function(t){for(var i=Object.keys(e._zones),r=0,o=i.length;r<o;r++){var a=i[r],s=e._zones[a],l=e._computeWhitespaceProps(s.delegate);s.isInHiddenArea=l.isInHiddenArea;var c=n.get(a);!c||c.afterLineNumber===l.afterViewLineNumber&&c.height===l.heightInPx||(t.changeOneWhitespace(a,l.afterViewLineNumber,l.heightInPx),e._safeCallOnComputedHeight(s.delegate,l.heightInPx),u=!0)}})),u}},{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options,n=t.get(146);return this._lineHeight=t.get(67),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}},{key:"onLineMappingChanged",value:function(e){return this._recomputeWhitespacesProps()}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged||e.scrollWidthChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"_getZoneOrdinal",value:function(e){var t,n;return null!==(n=null!==(t=e.ordinal)&&void 0!==t?t:e.afterColumn)&&void 0!==n?n:1e4}},{key:"_computeWhitespaceProps",value:function(e){if(0===e.afterLineNumber)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};var t,n;if(void 0!==e.afterColumn)t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{var i=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new dd(i,this._context.viewModel.model.getLineMaxColumn(i))}n=t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});var r=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),o=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!o,afterViewLineNumber:r.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}},{key:"changeViewZones",value:function(e){var t=this,n=!1;return this._context.viewModel.changeWhitespace((function(i){var r={addZone:function(e){return n=!0,t._addZone(i,e)},removeZone:function(e){e&&(n=t._removeZone(i,e)||n)},layoutZone:function(e){e&&(n=t._layoutZone(i,e)||n)}};!function(e,t){try{return e(t)}catch(e){vu(e)}}(e,r),r.addZone=X1,r.removeZone=X1,r.layoutZone=X1})),n}},{key:"_addZone",value:function(e,t){var n=this._computeWhitespaceProps(t),i={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:Pm(t.domNode),marginDomNode:t.marginDomNode?Pm(t.marginDomNode):null};return this._safeCallOnComputedHeight(i.delegate,n.heightInPx),i.domNode.setPosition("absolute"),i.domNode.domNode.style.width="100%",i.domNode.setDisplay("none"),i.domNode.setAttribute("monaco-view-zone",i.whitespaceId),this.domNode.appendChild(i.domNode),i.marginDomNode&&(i.marginDomNode.setPosition("absolute"),i.marginDomNode.domNode.style.width="100%",i.marginDomNode.setDisplay("none"),i.marginDomNode.setAttribute("monaco-view-zone",i.whitespaceId),this.marginDomNode.appendChild(i.marginDomNode)),this._zones[i.whitespaceId]=i,this.setShouldRender(),i.whitespaceId}},{key:"_removeZone",value:function(e,t){if(this._zones.hasOwnProperty(t)){var n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.remove(),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}},{key:"_layoutZone",value:function(e,t){if(this._zones.hasOwnProperty(t)){var n=this._zones[t],i=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=i.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,i.afterViewLineNumber,i.heightInPx),this._safeCallOnComputedHeight(n.delegate,i.heightInPx),this.setShouldRender(),!0}return!1}},{key:"shouldSuppressMouseDownOnViewZone",value:function(e){if(this._zones.hasOwnProperty(e)){var t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}},{key:"_heightInPixels",value:function(e){return"number"==typeof e.heightInPx?e.heightInPx:"number"==typeof e.heightInLines?this._lineHeight*e.heightInLines:this._lineHeight}},{key:"_minWidthInPixels",value:function(e){return"number"==typeof e.minWidthInPx?e.minWidthInPx:0}},{key:"_safeCallOnComputedHeight",value:function(e,t){if("function"==typeof e.onComputedHeight)try{e.onComputedHeight(t)}catch(e){vu(e)}}},{key:"_safeCallOnDomNodeTop",value:function(e,t){if("function"==typeof e.onDomNodeTop)try{e.onDomNodeTop(t)}catch(e){vu(e)}}},{key:"prepareRender",value:function(e){}},{key:"render",value:function(e){var t=e.viewportData.whitespaceViewportData,n={},i=!1,r=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;this._zones[u.id].isInHiddenArea||(n[u.id]=u,i=!0)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}for(var c=Object.keys(this._zones),d=0,h=c.length;d<h;d++){var f=c[d],g=this._zones[f],v=0,p=0,m="none";n.hasOwnProperty(f)?(v=n[f].verticalOffset-e.bigNumbersDelta,p=n[f].height,m="block",g.isVisible||(g.domNode.setAttribute("monaco-visible-view-zone","true"),g.isVisible=!0),this._safeCallOnDomNodeTop(g.delegate,e.getScrolledTopFromAbsoluteTop(n[f].verticalOffset))):(g.isVisible&&(g.domNode.removeAttribute("monaco-visible-view-zone"),g.isVisible=!1),this._safeCallOnDomNodeTop(g.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),g.domNode.setTop(v),g.domNode.setHeight(p),g.domNode.setDisplay(m),g.marginDomNode&&(g.marginDomNode.setTop(v),g.marginDomNode.setHeight(p),g.marginDomNode.setDisplay(m))}i&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}]),t}($X);var J1=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._context=e,n._options=new e2(n._context.configuration),n._selection=[],n._renderResult=null,n._context.addEventHandler(n),n}return p(t,e),h(t,[{key:"dispose",value:function(){this._context.removeEventHandler(this),this._renderResult=null,g(v(t.prototype),"dispose",this).call(this)}},{key:"onConfigurationChanged",value:function(e){var t=new e2(this._context.configuration);return this._options.equals(t)?e.hasChanged(146):(this._options=t,!0)}},{key:"onCursorStateChanged",value:function(e){return this._selection=e.selections,"selection"===this._options.renderWhitespace}},{key:"onDecorationsChanged",value:function(e){return!0}},{key:"onFlushed",value:function(e){return!0}},{key:"onLinesChanged",value:function(e){return!0}},{key:"onLinesDeleted",value:function(e){return!0}},{key:"onLinesInserted",value:function(e){return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onZonesChanged",value:function(e){return!0}},{key:"prepareRender",value:function(e){if("none"!==this._options.renderWhitespace){for(var t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber-t+1,i=new Array(n),r=0;r<n;r++)i[r]=!0;var o=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,i);this._renderResult=[];for(var a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){var s=a-e.viewportData.startLineNumber,l=o.data[s],u=null;if("selection"===this._options.renderWhitespace){var c=this._selection,d=!0,h=!1,f=void 0;try{for(var g,v=c[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;if(!(p.endLineNumber<a||p.startLineNumber>a)){var m=p.startLineNumber===a?p.startColumn:l.minColumn,y=p.endLineNumber===a?p.endColumn:l.maxColumn;m<y&&(u||(u=[]),u.push(new NQ(m-1,y-1)))}}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}}this._renderResult[s]=this._applyRenderWhitespace(e,a,u,l)}}else this._renderResult=null}},{key:"_applyRenderWhitespace",value:function(e,t,n,i){if("selection"===this._options.renderWhitespace&&!n)return"";if("trailing"===this._options.renderWhitespace&&i.continuesWithWrappedLine)return"";var r,o=this._context.theme.getColor(zW),a=this._options.renderWithSVG,s=i.content,l=-1===this._options.stopRenderingLineAfter?s.length:Math.min(this._options.stopRenderingLineAfter,s.length),u=i.continuesWithWrappedLine,c=i.minColumn-1,d="boundary"===this._options.renderWhitespace,h="trailing"===this._options.renderWhitespace,f=this._options.lineHeight,g=this._options.middotWidth,v=this._options.wsmiddotWidth,p=this._options.spaceWidth,m=Math.abs(v-p)<Math.abs(g-p)?11825:183,y=this._options.canUseHalfwidthRightwardsArrow,_="",b=!1,k=$h(s);-1===k?(b=!0,k=l,r=l):r=ef(s);for(var w=0,C=n&&n[w],S=0,x=c;x<l;x++){var L=s.charCodeAt(x);if(C&&x>=C.endOffset&&(w++,C=n&&n[w]),!(9!==L&&32!==L||h&&!b&&x<=r)){if(d&&x>=k&&x<=r&&32===L){var D=x-1>=0?s.charCodeAt(x-1):0,N=x+1<l?s.charCodeAt(x+1):0;if(32!==D&&32!==N)continue}if(d&&u&&x===l-1){var I=x-1>=0?s.charCodeAt(x-1):0;if(32===L&&32!==I&&9!==I)continue}if(!n||!(!C||C.startOffset>x||C.endOffset<=x)){var E=e.visibleRangeForPosition(new dd(t,x+1));E&&(a?(S=Math.max(S,E.left),_+=9===L?this._renderArrow(f,p,E.left):'<circle cx="'.concat((E.left+p/2).toFixed(2),'" cy="').concat((f/2).toFixed(2),'" r="').concat((p/7).toFixed(2),'" />')):_+=9===L?'<div class="mwh" style="left:'.concat(E.left,"px;height:").concat(f,'px;">').concat(y?String.fromCharCode(65515):String.fromCharCode(8594),"</div>"):'<div class="mwh" style="left:'.concat(E.left,"px;height:").concat(f,'px;">').concat(String.fromCharCode(m),"</div>"))}}}return a?(S=Math.round(S+p),'<svg style="bottom:0;position:absolute;width:'.concat(S,"px;height:").concat(f,'px" viewBox="0 0 ').concat(S," ").concat(f,'" xmlns="http://www.w3.org/2000/svg" fill="').concat(o,'">')+_+"</svg>"):_}},{key:"_renderArrow",value:function(e,t,n){var i=e/2,r=n,o={x:0,y:t/7/2},a={x:.8*t,y:o.y},s={x:a.x-.2*a.x,y:a.y+.2*a.x},l={x:s.x+.1*a.x,y:s.y+.1*a.x},u={x:l.x+.35*a.x,y:l.y-.35*a.x},c=[o,a,s,l,u,{x:u.x,y:-u.y},{x:l.x,y:-l.y},{x:s.x,y:-s.y},{x:a.x,y:-a.y},{x:o.x,y:-o.y}].map((function(e){return"".concat((r+e.x).toFixed(2)," ").concat((i+e.y).toFixed(2))})).join(" L ");return'<path d="M '.concat(c,'" />')}},{key:"render",value:function(e,t){if(!this._renderResult)return"";var n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}]),t}(X$),e2=function(){function e(t){u(this,e);var n=t.options,i=n.get(50),r=n.get(38);"off"===r?(this.renderWhitespace="none",this.renderWithSVG=!1):"svg"===r?(this.renderWhitespace=n.get(100),this.renderWithSVG=!0):(this.renderWhitespace=n.get(100),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(67),this.stopRenderingLineAfter=n.get(118)}return h(e,[{key:"equals",value:function(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}]),e}(),t2=function(){function e(t,n,i,r){u(this,e),this.selections=t,this.startLineNumber=0|n.startLineNumber,this.endLineNumber=0|n.endLineNumber,this.relativeVerticalOffset=n.relativeVerticalOffset,this.bigNumbersDelta=0|n.bigNumbersDelta,this.lineHeight=0|n.lineHeight,this.whitespaceViewportData=i,this._model=r,this.visibleRange=new hd(n.startLineNumber,this._model.getLineMinColumn(n.startLineNumber),n.endLineNumber,this._model.getLineMaxColumn(n.endLineNumber))}return h(e,[{key:"getViewLineRenderingData",value:function(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}},{key:"getDecorationsInViewport",value:function(){return this._model.getDecorationsInViewport(this.visibleRange)}}]),e}(),n2=function(){function e(t){u(this,e),this._theme=t}return h(e,[{key:"type",get:function(){return this._theme.type}},{key:"value",get:function(){return this._theme}},{key:"update",value:function(e){this._theme=e}},{key:"getColor",value:function(e){return this._theme.getColor(e)}}]),e}(),i2=function(){function e(t,n,i){u(this,e),this.configuration=t,this.theme=new n2(n),this.viewModel=i,this.viewLayout=i.viewLayout}return h(e,[{key:"addEventHandler",value:function(e){this.viewModel.addViewEventHandler(e)}},{key:"removeEventHandler",value:function(e){this.viewModel.removeViewEventHandler(e)}}]),e}(),r2=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o2=function(e,t){return function(n,i){t(n,i,e)}},a2=function(e){function t(e,n,i,r,o,a,s){var c;u(this,t),(c=l(this,t))._instantiationService=s,c._shouldRecomputeGlyphMarginLanes=!1,c._selections=[new fd(1,1,1,1)],c._renderAnimationFrame=null;var d=new E0(n,r,o,e);c._context=new i2(n,i,r),c._context.addEventHandler(c),c._viewParts=[],c._textAreaHandler=c._instantiationService.createInstance(oJ,c._context,d,c._createTextAreaHandlerHelper()),c._viewParts.push(c._textAreaHandler),c._linesContent=Pm(document.createElement("div")),c._linesContent.setClassName("lines-content monaco-editor-background"),c._linesContent.setPosition("absolute"),c.domNode=Pm(document.createElement("div")),c.domNode.setClassName(c._getEditorClassName()),c.domNode.setAttribute("role","code"),c._overflowGuardContainer=Pm(document.createElement("div")),JX.write(c._overflowGuardContainer,3),c._overflowGuardContainer.setClassName("overflow-guard"),c._scrollbar=new Q0(c._context,c._linesContent,c.domNode,c._overflowGuardContainer),c._viewParts.push(c._scrollbar),c._viewLines=new d1(c._context,c._linesContent),c._viewZones=new $1(c._context),c._viewParts.push(c._viewZones);var h=new A1(c._context);c._viewParts.push(h);var f=new H1(c._context);c._viewParts.push(f);var g=new O0(c._context);c._viewParts.push(g),g.addDynamicOverlay(new G0(c._context)),g.addDynamicOverlay(new K1(c._context)),g.addDynamicOverlay(new o1(c._context)),g.addDynamicOverlay(new Y0(c._context)),g.addDynamicOverlay(new J1(c._context));var v=new F0(c._context);c._viewParts.push(v),v.addDynamicOverlay(new Z0(c._context)),v.addDynamicOverlay(new f1(c._context)),v.addDynamicOverlay(new h1(c._context)),v.addDynamicOverlay(new $$(c._context)),c._glyphMarginWidgets=new t1(c._context),c._viewParts.push(c._glyphMarginWidgets);var p=new J$(c._context);p.getDomNode().appendChild(c._viewZones.marginDomNode),p.getDomNode().appendChild(v.getDomNode()),p.getDomNode().appendChild(c._glyphMarginWidgets.domNode),c._viewParts.push(p),c._contentWidgets=new H0(c._context,c.domNode),c._viewParts.push(c._contentWidgets),c._viewCursors=new Q1(c._context),c._viewParts.push(c._viewCursors),c._overlayWidgets=new T1(c._context,c.domNode),c._viewParts.push(c._overlayWidgets);var m=new B1(c._context);c._viewParts.push(m);var y=new B0(c._context);c._viewParts.push(y);var _=new I1(c._context);if(c._viewParts.push(_),h){var b=c._scrollbar.getOverviewRulerLayoutInfo();b.parent.insertBefore(h.getDomNode(),b.insertBefore)}return c._linesContent.appendChild(g.getDomNode()),c._linesContent.appendChild(m.domNode),c._linesContent.appendChild(c._viewZones.domNode),c._linesContent.appendChild(c._viewLines.getDomNode()),c._linesContent.appendChild(c._contentWidgets.domNode),c._linesContent.appendChild(c._viewCursors.getDomNode()),c._overflowGuardContainer.appendChild(p.getDomNode()),c._overflowGuardContainer.appendChild(c._scrollbar.getDomNode()),c._overflowGuardContainer.appendChild(f.getDomNode()),c._overflowGuardContainer.appendChild(c._textAreaHandler.textArea),c._overflowGuardContainer.appendChild(c._textAreaHandler.textAreaCover),c._overflowGuardContainer.appendChild(c._overlayWidgets.getDomNode()),c._overflowGuardContainer.appendChild(_.getDomNode()),c._overflowGuardContainer.appendChild(y.domNode),c.domNode.appendChild(c._overflowGuardContainer),a?(a.appendChild(c._contentWidgets.overflowingContentWidgetsDomNode.domNode),a.appendChild(c._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(c.domNode.appendChild(c._contentWidgets.overflowingContentWidgetsDomNode),c.domNode.appendChild(c._overlayWidgets.overflowingOverlayWidgetsDomNode)),c._applyLayout(),c._pointerHandler=c._register(new Q$(c._context,d,c._createPointerHandlerHelper())),c}return p(t,e),h(t,[{key:"_computeGlyphMarginLanes",value:function(){var e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes,n=[],i=0;n=n.concat(e.getAllMarginDecorations().map((function(e){var t,n,r,o=null!==(r=null===(t=e.options.glyphMargin)||void 0===t?void 0:t.position)&&void 0!==r?r:hw.Center;return i=Math.max(i,e.range.endLineNumber),{range:e.range,lane:o,persist:null===(n=e.options.glyphMargin)||void 0===n?void 0:n.persistLane}}))),n=n.concat(this._glyphMarginWidgets.getWidgets().map((function(t){var n=e.validateRange(t.preference.range);return i=Math.max(i,n.endLineNumber),{range:n,lane:t.preference.lane}}))),n.sort((function(e,t){return hd.compareRangesUsingStarts(e.range,t.range)})),t.reset(i);var r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;t.push(u.lane,u.range,u.persist)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return t}},{key:"_createPointerHandlerHelper",value:function(){var e=this;return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:function(){e.focus()},dispatchTextAreaEvent:function(t){e._textAreaHandler.textArea.domNode.dispatchEvent(t)},getLastRenderData:function(){var t=e._viewCursors.getLastRenderData()||[],n=e._textAreaHandler.getLastRenderData();return new C$(t,n)},renderNow:function(){e.render(!0,!1)},shouldSuppressMouseDownOnViewZone:function(t){return e._viewZones.shouldSuppressMouseDownOnViewZone(t)},shouldSuppressMouseDownOnWidget:function(t){return e._contentWidgets.shouldSuppressMouseDownOnWidget(t)},getPositionFromDOMInfo:function(t,n){return e._flushAccumulatedAndRenderNow(),e._viewLines.getPositionFromDOMInfo(t,n)},visibleRangeForPosition:function(t,n){return e._flushAccumulatedAndRenderNow(),e._viewLines.visibleRangeForPosition(new dd(t,n))},getLineWidth:function(t){return e._flushAccumulatedAndRenderNow(),e._viewLines.getLineWidth(t)}}}},{key:"_createTextAreaHandlerHelper",value:function(){var e=this;return{visibleRangeForPosition:function(t){return e._flushAccumulatedAndRenderNow(),e._viewLines.visibleRangeForPosition(t)}}}},{key:"_applyLayout",value:function(){var e=this._context.configuration.options,t=e.get(146);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}},{key:"_getEditorClassName",value:function(){var e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+FS(this._context.theme.type)+e}},{key:"handleEvents",value:function(e){g(v(t.prototype),"handleEvents",this).call(this,e),this._scheduleRender()}},{key:"onConfigurationChanged",value:function(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}},{key:"onCursorStateChanged",value:function(e){return this._selections=e.selections,!1}},{key:"onDecorationsChanged",value:function(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}},{key:"onFocusChanged",value:function(e){return this.domNode.setClassName(this._getEditorClassName()),!1}},{key:"onThemeChanged",value:function(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}},{key:"dispose",value:function(){null!==this._renderAnimationFrame&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();var e=!0,n=!1,i=void 0;try{for(var r,o=this._viewParts[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){r.value.dispose()}}catch(e){n=!0,i=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}g(v(t.prototype),"dispose",this).call(this)}},{key:"_scheduleRender",value:function(){var e=this;if(this._store.isDisposed)throw new Lu;if(null===this._renderAnimationFrame){var t,n=this._createCoordinatedRendering();this._renderAnimationFrame=l2.INSTANCE.scheduleCoordinatedRendering({window:ep(null===(t=this.domNode)||void 0===t?void 0:t.domNode),prepareRenderText:function(){if(e._store.isDisposed)throw new Lu;try{return n.prepareRenderText()}finally{e._renderAnimationFrame=null}},renderText:function(){if(e._store.isDisposed)throw new Lu;return n.renderText()},prepareRender:function(t,i){if(e._store.isDisposed)throw new Lu;return n.prepareRender(t,i)},render:function(t,i){if(e._store.isDisposed)throw new Lu;return n.render(t,i)}})}}},{key:"_flushAccumulatedAndRenderNow",value:function(){var e=this._createCoordinatedRendering();s2((function(){return e.prepareRenderText()}));var t=s2((function(){return e.renderText()}));if(t){var n=C(t,2),i=n[0],r=n[1];s2((function(){return e.prepareRender(i,r)})),s2((function(){return e.render(i,r)}))}}},{key:"_getViewPartsToRender",value:function(){var e=[],t=0,n=!0,i=!1,r=void 0;try{for(var o,a=this._viewParts[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.shouldRender()&&(e[t++]=s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return e}},{key:"_createCoordinatedRendering",value:function(){var e=this;return{prepareRenderText:function(){if(e._shouldRecomputeGlyphMarginLanes){e._shouldRecomputeGlyphMarginLanes=!1;var t=e._computeGlyphMarginLanes();e._context.configuration.setGlyphMarginDecorationLaneCount(t.requiredLanes)}RX.onRenderStart()},renderText:function(){if(!e.domNode.domNode.isConnected)return null;var t=e._getViewPartsToRender();if(!e._viewLines.shouldRender()&&0===t.length)return null;var n=e._context.viewLayout.getLinesViewportData();e._context.viewModel.setViewport(n.startLineNumber,n.endLineNumber,n.centeredLineNumber);var i=new t2(e._selections,n,e._context.viewLayout.getWhitespaceViewportData(),e._context.viewModel);return e._contentWidgets.shouldRender()&&e._contentWidgets.onBeforeRender(i),e._viewLines.shouldRender()&&(e._viewLines.renderText(i),e._viewLines.onDidRender(),t=e._getViewPartsToRender()),[t,new t$(e._context.viewLayout,i,e._viewLines)]},prepareRender:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.prepareRender(t)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}},render:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.render(t),s.onDidRender()}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}}},{key:"delegateVerticalScrollbarPointerDown",value:function(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}},{key:"delegateScrollFromMouseWheelEvent",value:function(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}},{key:"restoreState",value:function(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}},{key:"getOffsetForColumn",value:function(e,t){var n=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();var r=this._viewLines.visibleRangeForPosition(new dd(i.lineNumber,i.column));return r?r.left:-1}},{key:"getTargetAtClientPoint",value:function(e,t){var n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?W0.convertViewToModelMouseTarget(n,this._context.viewModel.coordinatesConverter):null}},{key:"createOverviewRuler",value:function(e){return new W1(this._context,e)}},{key:"change",value:function(e){this._viewZones.changeViewZones(e),this._scheduleRender()}},{key:"render",value:function(e,t){if(t){this._viewLines.forceShouldRender();var n=!0,i=!1,r=void 0;try{for(var o,a=this._viewParts[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.forceShouldRender()}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}},{key:"writeScreenReaderContent",value:function(e){this._textAreaHandler.writeScreenReaderContent(e)}},{key:"focus",value:function(){this._textAreaHandler.focusTextArea()}},{key:"isFocused",value:function(){return this._textAreaHandler.isFocused()}},{key:"setAriaOptions",value:function(e){this._textAreaHandler.setAriaOptions(e)}},{key:"addContentWidget",value:function(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}},{key:"layoutContentWidget",value:function(e){var t,n,i,r,o,a,s,l;this._contentWidgets.setWidgetPosition(e.widget,null!==(o=null===(t=e.position)||void 0===t?void 0:t.position)&&void 0!==o?o:null,null!==(a=null===(n=e.position)||void 0===n?void 0:n.secondaryPosition)&&void 0!==a?a:null,null!==(s=null===(i=e.position)||void 0===i?void 0:i.preference)&&void 0!==s?s:null,null!==(l=null===(r=e.position)||void 0===r?void 0:r.positionAffinity)&&void 0!==l?l:null),this._scheduleRender()}},{key:"removeContentWidget",value:function(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}},{key:"addOverlayWidget",value:function(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}},{key:"layoutOverlayWidget",value:function(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}},{key:"removeOverlayWidget",value:function(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}},{key:"addGlyphMarginWidget",value:function(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}},{key:"layoutGlyphMarginWidget",value:function(e){var t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}},{key:"removeGlyphMarginWidget",value:function(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}}]),t}(XX);function s2(e){try{return e()}catch(e){return vu(e),null}}a2=r2([o2(6,Gm)],a2);var l2=function(){function e(){u(this,e),this._coordinatedRenderings=[],this._animationFrameRunners=new Map}return h(e,[{key:"scheduleCoordinatedRendering",value:function(e){var t=this;return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:function(){var n=t._coordinatedRenderings.indexOf(e);if(-1!==n&&(t._coordinatedRenderings.splice(n,1),0===t._coordinatedRenderings.length)){var i=!0,r=!1,o=void 0;try{for(var a,s=t._animationFrameRunners[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=C(a.value,2);l[0];l[1].dispose()}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}t._animationFrameRunners.clear()}}}}},{key:"_scheduleRender",value:function(e){var t=this;if(!this._animationFrameRunners.has(e)){this._animationFrameRunners.set(e,vp(e,(function(){t._animationFrameRunners.delete(e),t._onRenderScheduled()}),100))}}},{key:"_onRenderScheduled",value:function(){var e=function(e,t){var n=i[e];c[e]=s2((function(){return n.renderText()}))},t=function(e,t){var n=i[e],r=c[e];if(!r)return"continue";var o=C(r,2),a=o[0],s=o[1];s2((function(){return n.prepareRender(a,s)}))},n=function(e,t){var n=i[e],r=c[e];if(!r)return"continue";var o=C(r,2),a=o[0],s=o[1];s2((function(){return n.render(a,s)}))},i=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];var r=!0,o=!1,a=void 0;try{for(var s,l=function(){var e=s.value;s2((function(){return e.prepareRenderText()}))},u=i[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)l()}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}for(var c=[],d=0,h=i.length;d<h;d++)e(d);for(var f=0,g=i.length;f<g;f++)t(f);for(var v=0,p=i.length;v<p;v++)n(v)}}]),e}();l2.INSTANCE=new l2;var u2=function(){function e(t,n,i,r,o){u(this,e),this.injectionOffsets=t,this.injectionOptions=n,this.breakOffsets=i,this.breakOffsetsVisibleColumn=r,this.wrappedTextIndentLength=o}return h(e,[{key:"getOutputLineCount",value:function(){return this.breakOffsets.length}},{key:"getMinOutputOffset",value:function(e){return e>0?this.wrappedTextIndentLength:0}},{key:"getLineLength",value:function(e){var t=e>0?this.breakOffsets[e-1]:0,n=this.breakOffsets[e]-t;return e>0&&(n+=this.wrappedTextIndentLength),n}},{key:"getMaxOutputOffset",value:function(e){return this.getLineLength(e)}},{key:"translateToInputOffset",value:function(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));var n=0===e?t:this.breakOffsets[e-1]+t;if(null!==this.injectionOffsets)for(var i=0;i<this.injectionOffsets.length&&n>this.injectionOffsets[i];i++)n<this.injectionOffsets[i]+this.injectionOptions[i].content.length?n=this.injectionOffsets[i]:n-=this.injectionOptions[i].content.length;return n}},{key:"translateToOutputPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e;if(null!==this.injectionOffsets)for(var i=0;i<this.injectionOffsets.length&&!(e<this.injectionOffsets[i])&&(1===t||e!==this.injectionOffsets[i]);i++)n+=this.injectionOptions[i].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}},{key:"offsetInInputWithInjectionsToOutputPosition",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=0,i=this.breakOffsets.length-1,r=0,o=0;n<=i;){r=n+(i-n)/2|0;var a=this.breakOffsets[r];if(o=r>0?this.breakOffsets[r-1]:0,0===t)if(e<=o)i=r-1;else{if(!(e>a))break;n=r+1}else if(e<o)i=r-1;else{if(!(e>=a))break;n=r+1}}var s=e-o;return r>0&&(s+=this.wrappedTextIndentLength),new h2(r,s)}},{key:"normalizeOutputPosition",value:function(e,t,n){if(null!==this.injectionOffsets){var i=this.outputPositionToOffsetInInputWithInjections(e,t),r=this.normalizeOffsetInInputWithInjectionsAroundInjections(i,n);if(r!==i)return this.offsetInInputWithInjectionsToOutputPosition(r,n)}if(0===n){if(e>0&&t===this.getMinOutputOffset(e))return new h2(e-1,this.getMaxOutputOffset(e-1))}else if(1===n){if(e<this.getOutputLineCount()-1&&t===this.getMaxOutputOffset(e))return new h2(e+1,this.getMinOutputOffset(e+1))}return new h2(e,t)}},{key:"outputPositionToOffsetInInputWithInjections",value:function(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}},{key:"normalizeOffsetInInputWithInjectionsAroundInjections",value:function(e,t){var n=this.getInjectedTextAtOffset(e);if(!n)return e;if(2===t){if(e===n.offsetInInputWithInjections+n.length&&c2(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;var i=n.offsetInInputWithInjections;if(d2(this.injectionOptions[n.injectedTextIndex].cursorStops))return i;for(var r=n.injectedTextIndex-1;r>=0&&this.injectionOffsets[r]===this.injectionOffsets[n.injectedTextIndex]&&!c2(this.injectionOptions[r].cursorStops)&&(i-=this.injectionOptions[r].content.length,!d2(this.injectionOptions[r].cursorStops));)r--;return i}if(1===t||4===t){for(var o=n.offsetInInputWithInjections+n.length,a=n.injectedTextIndex;a+1<this.injectionOffsets.length&&this.injectionOffsets[a+1]===this.injectionOffsets[a];)o+=this.injectionOptions[a+1].content.length,a++;return o}if(0===t||3===t){for(var s=n.offsetInInputWithInjections,l=n.injectedTextIndex;l-1>=0&&this.injectionOffsets[l-1]===this.injectionOffsets[l];)s-=this.injectionOptions[l-1].content.length,l--;return s}$y()}},{key:"getInjectedText",value:function(e,t){var n=this.outputPositionToOffsetInInputWithInjections(e,t),i=this.getInjectedTextAtOffset(n);return i?{options:this.injectionOptions[i.injectedTextIndex]}:null}},{key:"getInjectedTextAtOffset",value:function(e){var t=this.injectionOffsets,n=this.injectionOptions;if(null!==t)for(var i=0,r=0;r<t.length;r++){var o=n[r].content.length,a=t[r]+i,s=t[r]+i+o;if(a>e)break;if(e<=s)return{injectedTextIndex:r,offsetInInputWithInjections:a,length:o};i+=o}}}]),e}();function c2(e){return null==e||(e===fw.Right||e===fw.Both)}function d2(e){return null==e||(e===fw.Left||e===fw.Both)}var h2=function(){function e(t,n){u(this,e),this.outputLineIndex=t,this.outputOffset=n}return h(e,[{key:"toString",value:function(){return"".concat(this.outputLineIndex,":").concat(this.outputOffset)}},{key:"toPosition",value:function(e){return new dd(e+this.outputLineIndex,this.outputOffset+1)}}]),e}(),f2=rb("domLineBreaksComputer",{createHTML:function(e){return e}}),g2=function(){function e(t){u(this,e),this.targetWindow=t}return h(e,[{key:"createLineBreaksComputer",value:function(e,t,n,i,r){var o=this,a=[],s=[];return{addRequest:function(e,t,n){a.push(e),s.push(t)},finalize:function(){return function(e,t,n,i,r,o,a,s){function l(e){var n=s[e];if(n){var i=Hz.applyInjectedText(t[e],n),r=n.map((function(e){return e.options})),o=n.map((function(e){return e.column-1}));return new u2(o,r,[i.length],[],0)}return null}if(-1===r){for(var u=[],c=0,d=t.length;c<d;c++)u[c]=l(c);return u}var h=Math.round(r*n.typicalHalfwidthCharacterWidth),f=3===o?2:2===o?1:0,g=Math.round(i*f),v=Math.ceil(n.spaceWidth*g),p=document.createElement("div");Om(p,n);for(var m=new Tb(1e4),y=[],_=[],b=[],k=[],w=[],C=0;C<t.length;C++){var S=Hz.applyInjectedText(t[C],s[C]),x=0,L=0,D=h;if(0!==o)if(-1===(x=$h(S)))x=0;else{for(var N=0;N<x;N++){L+=9===S.charCodeAt(N)?i-L%i:1}var I=Math.ceil(n.spaceWidth*L);I+n.typicalFullwidthCharacterWidth>h?(x=0,L=0):D=h-I}var E=S.substr(x),M=v2(E,L,i,D,m,v);y[C]=x,_[C]=L,b[C]=E,k[C]=M[0],w[C]=M[1]}var T,R=m.build(),A=null!==(T=null==f2?void 0:f2.createHTML(R))&&void 0!==T?T:R;p.innerHTML=A,p.style.position="absolute",p.style.top="10000","keepAll"===a?(p.style.wordBreak="keep-all",p.style.overflowWrap="anywhere"):(p.style.wordBreak="inherit",p.style.overflowWrap="break-word");e.document.body.appendChild(p);for(var P=document.createRange(),O=Array.prototype.slice.call(p.children,0),F=[],W=0;W<t.length;W++){var B=p2(P,O[W],b[W],k[W]);if(null!==B){for(var H=y[W],V=_[W]+g,z=w[W],U=[],j=0,K=B.length;j<K;j++)U[j]=z[B[j]];if(0!==H)for(var q=0,G=B.length;q<G;q++)B[q]+=H;var Z=void 0,Y=void 0,Q=s[W];Q?(Z=Q.map((function(e){return e.options})),Y=Q.map((function(e){return e.column-1}))):(Z=null,Y=null),F[W]=new u2(Y,Z,B,U,V)}else F[W]=l(W)}return p.remove(),F}(Fa(o.targetWindow.deref()),a,e,t,n,i,r,s)}}}}],[{key:"create",value:function(t){return new e(new WeakRef(t))}}]),e}();function v2(e,t,n,i,r,o){if(0!==o){var a=String(o);r.appendString('<div style="text-indent: -'),r.appendString(a),r.appendString("px; padding-left: "),r.appendString(a),r.appendString("px; box-sizing: border-box; width:")}else r.appendString('<div style="width:');r.appendString(String(i)),r.appendString('px;">');var s=e.length,l=t,u=0,c=[],d=[],h=0<s?e.charCodeAt(0):0;r.appendString("<span>");for(var f=0;f<s;f++){0!==f&&f%16384==0&&r.appendString("</span><span>"),c[f]=u,d[f]=l;var g=h;h=f+1<s?e.charCodeAt(f+1):0;var v=1,p=1;switch(g){case 9:p=v=n-l%n;for(var m=1;m<=v;m++)m<v?r.appendCharCode(160):r.appendASCIICharCode(32);break;case 32:32===h?r.appendCharCode(160):r.appendASCIICharCode(32);break;case 60:r.appendString("&lt;");break;case 62:r.appendString("&gt;");break;case 38:r.appendString("&amp;");break;case 0:r.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:r.appendCharCode(65533);break;default:Df(g)&&p++,g<32?r.appendCharCode(9216+g):r.appendCharCode(g)}u+=v,l+=p}return r.appendString("</span>"),c[e.length]=u,d[e.length]=l,r.appendString("</div>"),[c,d]}function p2(e,t,n,i){if(n.length<=1)return null;var r=Array.prototype.slice.call(t.children,0),o=[];try{m2(e,r,i,0,null,n.length-1,null,o)}catch(e){return console.log(e),null}return 0===o.length?null:(o.push(n.length),o)}function m2(e,t,n,i,r,o,a,s){if(i!==o&&(r=r||y2(e,t,n[i],n[i+1]),a=a||y2(e,t,n[o],n[o+1]),!(Math.abs(r[0].top-a[0].top)<=.1)))if(i+1!==o){var l=i+(o-i)/2|0,u=y2(e,t,n[l],n[l+1]);m2(e,t,n,i,r,l,u,s),m2(e,t,n,l,u,o,a,s)}else s.push(o)}function y2(e,t,n,i){return e.setStart(t[n/16384|0].firstChild,n%16384),e.setEnd(t[i/16384|0].firstChild,i%16384),e.getClientRects()}var _2=function(e){function t(){var e;return u(this,t),(e=l(this,t))._editor=null,e._instantiationService=null,e._instances=e._register(new Wu),e._pending=new Map,e._finishedInstantiation=[],e._finishedInstantiation[0]=!1,e._finishedInstantiation[1]=!1,e._finishedInstantiation[2]=!1,e._finishedInstantiation[3]=!1,e}return p(t,e),h(t,[{key:"initialize",value:function(e,t,n){var i=this;this._editor=e,this._instantiationService=n;var r=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;this._pending.has(u.id)?vu(new Error("Cannot have two contributions with the same id ".concat(u.id))):this._pending.set(u.id,u)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}this._instantiateSome(0),this._register(gp(ep(this._editor.getDomNode()),(function(){i._instantiateSome(1)}))),this._register(gp(ep(this._editor.getDomNode()),(function(){i._instantiateSome(2)}))),this._register(gp(ep(this._editor.getDomNode()),(function(){i._instantiateSome(3)}),5e3))}},{key:"saveViewState",value:function(){var e={},t=!0,n=!1,i=void 0;try{for(var r,o=this._instances[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=C(r.value,2),s=a[0],l=a[1];"function"==typeof l.saveViewState&&(e[s]=l.saveViewState())}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}},{key:"restoreViewState",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._instances[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=C(r.value,2),s=a[0],l=a[1];"function"==typeof l.restoreViewState&&l.restoreViewState(e[s])}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"get",value:function(e){return this._instantiateById(e),this._instances.get(e)||null}},{key:"onBeforeInteractionEvent",value:function(){this._instantiateSome(2)}},{key:"onAfterModelAttached",value:function(){var e,t=this;return gp(ep(null===(e=this._editor)||void 0===e?void 0:e.getDomNode()),(function(){t._instantiateSome(1)}),50)}},{key:"_instantiateSome",value:function(e){if(!this._finishedInstantiation[e]){this._finishedInstantiation[e]=!0;var t=this._findPendingContributionsByInstantiation(e),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._instantiateById(s.id)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}},{key:"_findPendingContributionsByInstantiation",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=this._pending[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2)[1];s.instantiation===e&&t.push(s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}},{key:"_instantiateById",value:function(e){var t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{var n=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,n),"function"==typeof n.restoreViewState&&0!==t.instantiation&&console.warn("Editor contribution '".concat(t.id,"' should be eager instantiated because it uses saveViewState / restoreViewState."))}catch(e){vu(e)}}}}]),t}(Ru),b2=function(){function e(t,n,i,r,o,a,s){u(this,e),this.id=t,this.label=n,this.alias=i,this.metadata=r,this._precondition=o,this._run=a,this._contextKeyService=s}return h(e,[{key:"isSupported",value:function(){return this._contextKeyService.contextMatchesRules(this._precondition)}},{key:"run",value:function(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}]),e}(),k2=function(){function e(t,n){u(this,e),this.classifier=new w2(t,n)}return h(e,[{key:"createLineBreaksComputer",value:function(e,t,n,i,r){var o=this,a=[],s=[],l=[];return{addRequest:function(e,t,n){a.push(e),s.push(t),l.push(n)},finalize:function(){for(var u=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,c=[],d=0,h=a.length;d<h;d++){var f=s[d],g=l[d];!g||g.injectionOptions||f?c[d]=L2(o.classifier,a[d],f,t,n,u,i,r):c[d]=x2(o.classifier,g,a[d],t,n,u,i,r)}return C2.length=0,S2.length=0,c}}}}],[{key:"create",value:function(t){return new e(t.get(135),t.get(134))}}]),e}(),w2=function(e){function t(e,n){var i;u(this,t),i=l(this,t,[0]);for(var r=0;r<e.length;r++)i.set(e.charCodeAt(r),1);for(var o=0;o<n.length;o++)i.set(n.charCodeAt(o),2);return i}return p(t,e),h(t,[{key:"get",value:function(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}]),t}(Qk),C2=[],S2=[];function x2(e,t,n,i,r,o,a,s){if(-1===r)return null;var l=n.length;if(l<=1)return null;var u="keepAll"===s,c=t.breakOffsets,d=t.breakOffsetsVisibleColumn,h=E2(n,i,r,o,a),f=r-h,g=C2,v=S2,p=0,m=0,y=0,_=r,b=c.length,k=0;if(k>=0)for(var w=Math.abs(d[k]-_);k+1<b;){var C=Math.abs(d[k+1]-_);if(C>=w)break;w=C,k++}for(;k<b;){var S=k<0?0:c[k],x=k<0?0:d[k];m>S&&(S=m,x=y);var L=0,D=0,N=0,I=0;if(x<=_){for(var E=x,M=0===S?0:n.charCodeAt(S-1),T=0===S?0:e.get(M),R=!0,A=S;A<l;A++){var P=A,O=n.charCodeAt(A),F=void 0,W=void 0;if(ff(O)?(A++,F=0,W=2):(F=e.get(O),W=D2(O,E,i,o)),P>m&&I2(M,T,O,F,u)&&(L=P,D=E),(E+=W)>_){P>m?(N=P,I=E-W):(N=A+1,I=E),E-D>f&&(L=0),R=!1;break}M=O,T=F}if(R){p>0&&(g[p]=c[c.length-1],v[p]=d[c.length-1],p++);break}}if(0===L){for(var B=x,H=n.charCodeAt(S),V=e.get(H),z=!1,U=S-1;U>=m;U--){var j=U+1,K=n.charCodeAt(U);if(9===K){z=!0;break}var q=void 0,G=void 0;if(gf(K)?(U--,q=0,G=2):(q=e.get(K),G=Df(K)?o:1),B<=_){if(0===N&&(N=j,I=B),B<=_-f)break;if(I2(K,q,H,V,u)){L=j,D=B;break}}B-=G,H=K,V=q}if(0!==L){var Z=f-(I-D);if(Z<=i){var Y=n.charCodeAt(N);Z-(ff(Y)?2:D2(Y,I,i,o))<0&&(L=0)}}if(z){k--;continue}}if(0===L&&(L=N,D=I),L<=m){var Q=n.charCodeAt(m);ff(Q)?(L=m+2,D=y+2):(L=m+1,D=y+D2(Q,y,i,o))}for(m=L,g[p]=L,y=D,v[p]=D,p++,_=D+f;k<0||k<b&&d[k]<D;)k++;for(var X=Math.abs(d[k]-_);k+1<b;){var $=Math.abs(d[k+1]-_);if($>=X)break;X=$,k++}}return 0===p?null:(g.length=p,v.length=p,C2=t.breakOffsets,S2=t.breakOffsetsVisibleColumn,t.breakOffsets=g,t.breakOffsetsVisibleColumn=v,t.wrappedTextIndentLength=h,t)}function L2(e,t,n,i,r,o,a,s){var l,u,c=Hz.applyInjectedText(t,n);if(n&&n.length>0?(l=n.map((function(e){return e.options})),u=n.map((function(e){return e.column-1}))):(l=null,u=null),-1===r)return l?new u2(u,l,[c.length],[],0):null;var d=c.length;if(d<=1)return l?new u2(u,l,[c.length],[],0):null;var h="keepAll"===s,f=E2(c,i,r,o,a),g=r-f,v=[],p=[],m=0,y=0,_=0,b=r,k=c.charCodeAt(0),w=e.get(k),C=D2(k,0,i,o),S=1;ff(k)&&(C+=1,k=c.charCodeAt(1),w=e.get(k),S++);for(var x=S;x<d;x++){var L=x,D=c.charCodeAt(x),N=void 0,I=void 0;ff(D)?(x++,N=0,I=2):(N=e.get(D),I=D2(D,C,i,o)),I2(k,w,D,N,h)&&(y=L,_=C),(C+=I)>b&&((0===y||C-_>g)&&(y=L,_=C-I),v[m]=y,p[m]=_,m++,b=_+g,y=0),k=D,w=N}return 0!==m||n&&0!==n.length?(v[m]=d,p[m]=C,new u2(u,l,v,p,f)):null}function D2(e,t,n,i){return 9===e?n-t%n:Df(e)||e<32?i:1}function N2(e,t){return t-e%t}function I2(e,t,n,i,r){return 32!==n&&(2===t&&2!==i||1!==t&&1===i||!r&&3===t&&2!==i||!r&&3===i&&1!==t)}function E2(e,t,n,i,r){var o=0;if(0!==r){var a=$h(e);if(-1!==a){for(var s=0;s<a;s++){o+=9===e.charCodeAt(s)?N2(o,t):1}for(var l=3===r?2:2===r?1:0,u=0;u<l;u++){o+=N2(o,t)}o+i>n&&(o=0)}}return o}var M2=function(){function e(t){u(this,e),this._selTrackedRange=null,this._trackSelection=!0,this._setState(t,new fJ(new hd(1,1,1,1),0,0,new dd(1,1),0),new fJ(new hd(1,1,1,1),0,0,new dd(1,1),0))}return h(e,[{key:"dispose",value:function(e){this._removeTrackedRange(e)}},{key:"startTrackingSelection",value:function(e){this._trackSelection=!0,this._updateTrackedRange(e)}},{key:"stopTrackingSelection",value:function(e){this._trackSelection=!1,this._removeTrackedRange(e)}},{key:"_updateTrackedRange",value:function(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}},{key:"_removeTrackedRange",value:function(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}},{key:"asCursorState",value:function(){return new cJ(this.modelState,this.viewState)}},{key:"readSelectionFromMarkers",value:function(e){var t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?fd.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):fd.fromRange(t,this.modelState.selection.getDirection())}},{key:"ensureValidState",value:function(e){this._setState(e,this.modelState,this.viewState)}},{key:"setState",value:function(e,t,n){this._setState(e,t,n)}},{key:"_setState",value:function(t,n,i){if(i&&(i=e._validateViewState(t.viewModel,i)),n){var r=t.model.validateRange(n.selectionStart),o=n.selectionStart.equalsRange(r)?n.selectionStartLeftoverVisibleColumns:0,a=t.model.validatePosition(n.position),s=n.position.equals(a)?n.leftoverVisibleColumns:0;n=new fJ(r,n.selectionStartKind,o,a,s)}else{if(!i)return;var l=t.model.validateRange(t.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),u=t.model.validatePosition(t.coordinatesConverter.convertViewPositionToModelPosition(i.position));n=new fJ(l,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,u,i.leftoverVisibleColumns)}if(i){var c=t.coordinatesConverter.validateViewRange(i.selectionStart,n.selectionStart),d=t.coordinatesConverter.validateViewPosition(i.position,n.position);i=new fJ(c,n.selectionStartKind,n.selectionStartLeftoverVisibleColumns,d,n.leftoverVisibleColumns)}else{var h=t.coordinatesConverter.convertModelPositionToViewPosition(new dd(n.selectionStart.startLineNumber,n.selectionStart.startColumn)),f=t.coordinatesConverter.convertModelPositionToViewPosition(new dd(n.selectionStart.endLineNumber,n.selectionStart.endColumn)),g=new hd(h.lineNumber,h.column,f.lineNumber,f.column),v=t.coordinatesConverter.convertModelPositionToViewPosition(n.position);i=new fJ(g,n.selectionStartKind,n.selectionStartLeftoverVisibleColumns,v,n.leftoverVisibleColumns)}this.modelState=n,this.viewState=i,this._updateTrackedRange(t)}}],[{key:"_validatePositionWithCache",value:function(e,t,n,i){return t.equals(n)?i:e.normalizePosition(t,2)}},{key:"_validateViewState",value:function(e,t){var n=t.position,i=t.selectionStart.getStartPosition(),r=t.selectionStart.getEndPosition(),o=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,i,n,o),s=this._validatePositionWithCache(e,r,i,a);return n.equals(o)&&i.equals(a)&&r.equals(s)?t:new fJ(hd.fromPositions(a,s),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+i.column-a.column,o,t.leftoverVisibleColumns+n.column-o.column)}}]),e}(),T2=function(){function e(t){u(this,e),this.context=t,this.cursors=[new M2(t)],this.lastAddedCursorIndex=0}return h(e,[{key:"dispose",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.cursors[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.dispose(this.context)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"startTrackingSelections",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.cursors[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.startTrackingSelection(this.context)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"stopTrackingSelections",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.cursors[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.stopTrackingSelection(this.context)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"updateContext",value:function(e){this.context=e}},{key:"ensureValidState",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.cursors[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.ensureValidState(this.context)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"readSelectionFromMarkers",value:function(){var e=this;return this.cursors.map((function(t){return t.readSelectionFromMarkers(e.context)}))}},{key:"getAll",value:function(){return this.cursors.map((function(e){return e.asCursorState()}))}},{key:"getViewPositions",value:function(){return this.cursors.map((function(e){return e.viewState.position}))}},{key:"getTopMostViewPosition",value:function(){return function(e,t){return qw(e,(function(e,n){return-t(e,n)}))}(this.cursors,ba((function(e){return e.viewState.position}),dd.compare)).viewState.position}},{key:"getBottomMostViewPosition",value:function(){return function(e,t){if(0!==e.length){for(var n=e[0],i=1;i<e.length;i++){var r=e[i];t(r,n)>=0&&(n=r)}return n}}(this.cursors,ba((function(e){return e.viewState.position}),dd.compare)).viewState.position}},{key:"getSelections",value:function(){return this.cursors.map((function(e){return e.modelState.selection}))}},{key:"getViewSelections",value:function(){return this.cursors.map((function(e){return e.viewState.selection}))}},{key:"setSelections",value:function(e){this.setStates(cJ.fromModelSelections(e))}},{key:"getPrimaryCursor",value:function(){return this.cursors[0].asCursorState()}},{key:"setStates",value:function(e){null!==e&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}},{key:"_setSecondaryStates",value:function(e){var t=this.cursors.length-1,n=e.length;if(t<n)for(var i=n-t,r=0;r<i;r++)this._addSecondaryCursor();else if(t>n)for(var o=t-n,a=0;a<o;a++)this._removeSecondaryCursor(this.cursors.length-2);for(var s=0;s<n;s++)this.cursors[s+1].setState(this.context,e[s].modelState,e[s].viewState)}},{key:"killSecondaryCursors",value:function(){this._setSecondaryStates([])}},{key:"_addSecondaryCursor",value:function(){this.cursors.push(new M2(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}},{key:"getLastAddedCursorIndex",value:function(){return 1===this.cursors.length||0===this.lastAddedCursorIndex?0:this.lastAddedCursorIndex}},{key:"_removeSecondaryCursor",value:function(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}},{key:"normalize",value:function(){if(1!==this.cursors.length){for(var e=this.cursors.slice(0),t=[],n=0,i=e.length;n<i;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort(ba((function(e){return e.selection}),hd.compareRangesUsingStarts));for(var r=0;r<t.length-1;r++){var o=t[r],a=t[r+1],s=o.selection,l=a.selection;if(this.context.cursorConfig.multiCursorMergeOverlapping){if(l.isEmpty()||s.isEmpty()?l.getStartPosition().isBeforeOrEqual(s.getEndPosition()):l.getStartPosition().isBefore(s.getEndPosition())){var u=o.index<a.index?r:r+1,c=o.index<a.index?r+1:r,d=t[c].index,h=t[u].index,f=t[c].selection,g=t[u].selection;if(!f.equalsSelection(g)){var v=f.plusRange(g),p=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,m=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn,y=void 0;d===this.lastAddedCursorIndex?(y=p,this.lastAddedCursorIndex=h):y=m;var _=void 0;_=y?new fd(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn):new fd(v.endLineNumber,v.endColumn,v.startLineNumber,v.startColumn),t[u].selection=_;var b=cJ.fromModelSelection(_);e[h].setState(this.context,b.modelState,b.viewState)}var k=!0,w=!1,C=void 0;try{for(var S,x=t[Symbol.iterator]();!(k=(S=x.next()).done);k=!0){var L=S.value;L.index>d&&L.index--}}catch(e){w=!0,C=e}finally{try{k||null==x.return||x.return()}finally{if(w)throw C}}e.splice(d,1),t.splice(c,1),this._removeSecondaryCursor(d-1),r--}}}}}}]),e}(),R2=function e(t,n,i,r){u(this,e),this._cursorContextBrand=void 0,this.model=t,this.viewModel=n,this.coordinatesConverter=i,this.cursorConfig=r},A2=function e(){u(this,e),this.type=0},P2=function e(){u(this,e),this.type=1},O2=function(){function e(t){u(this,e),this.type=2,this._source=t}return h(e,[{key:"hasChanged",value:function(e){return this._source.hasChanged(e)}}]),e}(),F2=function e(t,n,i){u(this,e),this.selections=t,this.modelSelections=n,this.reason=i,this.type=3},W2=function e(t){u(this,e),this.type=4,t?(this.affectsMinimap=t.affectsMinimap,this.affectsOverviewRuler=t.affectsOverviewRuler,this.affectsGlyphMargin=t.affectsGlyphMargin,this.affectsLineNumber=t.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)},B2=function e(){u(this,e),this.type=5},H2=function e(t){u(this,e),this.type=6,this.isFocused=t},V2=function e(){u(this,e),this.type=7},z2=function e(){u(this,e),this.type=8},U2=function e(t,n){u(this,e),this.fromLineNumber=t,this.count=n,this.type=9},j2=function e(t,n){u(this,e),this.type=10,this.fromLineNumber=t,this.toLineNumber=n},K2=function e(t,n){u(this,e),this.type=11,this.fromLineNumber=t,this.toLineNumber=n},q2=function e(t,n,i,r,o,a,s){u(this,e),this.source=t,this.minimalReveal=n,this.range=i,this.selections=r,this.verticalType=o,this.revealHorizontal=a,this.scrollType=s,this.type=12},G2=function e(t){u(this,e),this.type=13,this.scrollWidth=t.scrollWidth,this.scrollLeft=t.scrollLeft,this.scrollHeight=t.scrollHeight,this.scrollTop=t.scrollTop,this.scrollWidthChanged=t.scrollWidthChanged,this.scrollLeftChanged=t.scrollLeftChanged,this.scrollHeightChanged=t.scrollHeightChanged,this.scrollTopChanged=t.scrollTopChanged},Z2=function e(t){u(this,e),this.theme=t,this.type=14},Y2=function e(t){u(this,e),this.type=15,this.ranges=t},Q2=function e(){u(this,e),this.type=16},X2=function e(){u(this,e),this.type=17},$2=function(e){function t(){var e;return u(this,t),(e=l(this,t))._onEvent=e._register(new Zu),e.onEvent=e._onEvent.event,e._eventHandlers=[],e._viewEventQueue=null,e._isConsumingViewEventQueue=!1,e._collector=null,e._collectorCnt=0,e._outgoingEvents=[],e}return p(t,e),h(t,[{key:"emitOutgoingEvent",value:function(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}},{key:"_addOutgoingEvent",value:function(e){for(var t=0,n=this._outgoingEvents.length;t<n;t++){var i=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(i)return void(this._outgoingEvents[t]=i)}this._outgoingEvents.push(e)}},{key:"_emitOutgoingEvents",value:function(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;var e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}},{key:"addViewEventHandler",value:function(e){for(var t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}},{key:"removeViewEventHandler",value:function(e){for(var t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}},{key:"beginEmitViewEvents",value:function(){return this._collectorCnt++,1===this._collectorCnt&&(this._collector=new J2),this._collector}},{key:"endEmitViewEvents",value:function(){if(this._collectorCnt--,0===this._collectorCnt){var e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;var n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._addOutgoingEvent(s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}},{key:"emitSingleViewEvent",value:function(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}},{key:"_emitMany",value:function(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}},{key:"_consumeViewEventQueue",value:function(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}},{key:"_doConsumeQueue",value:function(){for(;this._viewEventQueue;){var e=this._viewEventQueue;this._viewEventQueue=null;var t=this._eventHandlers.slice(0),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.handleEvents(e)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}}]),t}(Ru),J2=function(){function e(){u(this,e),this.viewEvents=[],this.outgoingEvents=[]}return h(e,[{key:"emitViewEvent",value:function(e){this.viewEvents.push(e)}},{key:"emitOutgoingEvent",value:function(e){this.outgoingEvents.push(e)}}]),e}(),e4=function(){function e(t,n,i,r){u(this,e),this.kind=0,this._oldContentWidth=t,this._oldContentHeight=n,this.contentWidth=i,this.contentHeight=r,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}return h(e,[{key:"isNoOp",value:function(){return!this.contentWidthChanged&&!this.contentHeightChanged}},{key:"attemptToMerge",value:function(t){return t.kind!==this.kind?null:new e(this._oldContentWidth,this._oldContentHeight,t.contentWidth,t.contentHeight)}}]),e}(),t4=function(){function e(t,n){u(this,e),this.kind=1,this.oldHasFocus=t,this.hasFocus=n}return h(e,[{key:"isNoOp",value:function(){return this.oldHasFocus===this.hasFocus}},{key:"attemptToMerge",value:function(t){return t.kind!==this.kind?null:new e(this.oldHasFocus,t.hasFocus)}}]),e}(),n4=function(){function e(t,n,i,r,o,a,s,l){u(this,e),this.kind=2,this._oldScrollWidth=t,this._oldScrollLeft=n,this._oldScrollHeight=i,this._oldScrollTop=r,this.scrollWidth=o,this.scrollLeft=a,this.scrollHeight=s,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}return h(e,[{key:"isNoOp",value:function(){return!(this.scrollWidthChanged||this.scrollLeftChanged||this.scrollHeightChanged||this.scrollTopChanged)}},{key:"attemptToMerge",value:function(t){return t.kind!==this.kind?null:new e(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,t.scrollWidth,t.scrollLeft,t.scrollHeight,t.scrollTop)}}]),e}(),i4=function(){function e(){u(this,e),this.kind=3}return h(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return e.kind!==this.kind?null:this}}]),e}(),r4=function(){function e(){u(this,e),this.kind=4}return h(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return e.kind!==this.kind?null:this}}]),e}(),o4=function(){function e(t,n,i,r,o,a,s){u(this,e),this.kind=6,this.oldSelections=t,this.selections=n,this.oldModelVersionId=i,this.modelVersionId=r,this.source=o,this.reason=a,this.reachedMaxCursorCount=s}return h(e,[{key:"isNoOp",value:function(){return e._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}},{key:"attemptToMerge",value:function(t){return t.kind!==this.kind?null:new e(this.oldSelections,t.selections,this.oldModelVersionId,t.modelVersionId,t.source,t.reason,this.reachedMaxCursorCount||t.reachedMaxCursorCount)}}],[{key:"_selectionsAreEqual",value:function(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(!e[i].equalsSelection(t[i]))return!1;return!0}}]),e}(),a4=function(){function e(){u(this,e),this.kind=5}return h(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return e.kind!==this.kind?null:this}}]),e}(),s4=function(){function e(t){u(this,e),this.event=t,this.kind=7}return h(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return null}}]),e}(),l4=function(){function e(t){u(this,e),this.event=t,this.kind=8}return h(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return null}}]),e}(),u4=function(){function e(t){u(this,e),this.event=t,this.kind=9}return h(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return null}}]),e}(),c4=function(){function e(t){u(this,e),this.event=t,this.kind=10}return h(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return null}}]),e}(),d4=function(){function e(t){u(this,e),this.event=t,this.kind=11}return h(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return null}}]),e}(),h4=function(){function e(t){u(this,e),this.event=t,this.kind=12}return h(e,[{key:"isNoOp",value:function(){return!1}},{key:"attemptToMerge",value:function(e){return null}}]),e}(),f4=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t))._model=e,o._knownModelVersionId=o._model.getVersionId(),o._viewModel=n,o._coordinatesConverter=i,o.context=new R2(o._model,o._viewModel,o._coordinatesConverter,r),o._cursors=new T2(o.context),o._hasFocus=!1,o._isHandling=!1,o._compositionState=null,o._columnSelectData=null,o._autoClosedActions=[],o._prevEditOperationType=0,o}return p(t,e),h(t,[{key:"dispose",value:function(){this._cursors.dispose(),this._autoClosedActions=Iu(this._autoClosedActions),g(v(t.prototype),"dispose",this).call(this)}},{key:"updateConfiguration",value:function(e){this.context=new R2(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}},{key:"onLineMappingChanged",value:function(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}},{key:"setHasFocus",value:function(e){this._hasFocus=e}},{key:"_validateAutoClosedActions",value:function(){if(this._autoClosedActions.length>0)for(var e=this._cursors.getSelections(),t=0;t<this._autoClosedActions.length;t++){var n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}},{key:"getPrimaryCursorState",value:function(){return this._cursors.getPrimaryCursor()}},{key:"getLastAddedCursorIndex",value:function(){return this._cursors.getLastAddedCursorIndex()}},{key:"getCursorStates",value:function(){return this._cursors.getAll()}},{key:"setStates",value:function(e,t,n,i){var r=!1,o=this.context.cursorConfig.multiCursorLimit;null!==i&&i.length>o&&(i=i.slice(0,o),r=!0);var a=g4.from(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,a,r)}},{key:"setCursorColumnSelectData",value:function(e){this._columnSelectData=e}},{key:"revealAll",value:function(e,t,n,i,r,o){var a=this._cursors.getViewPositions(),s=null,l=null;a.length>1?l=this._cursors.getViewSelections():s=hd.fromPositions(a[0],a[0]),e.emitViewEvent(new q2(t,n,s,l,i,r,o))}},{key:"revealPrimary",value:function(e,t,n,i,r,o){var a=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new q2(t,n,null,a,i,r,o))}},{key:"saveState",value:function(){for(var e=[],t=this._cursors.getSelections(),n=0,i=t.length;n<i;n++){var r=t[n];e.push({inSelectionMode:!r.isEmpty(),selectionStart:{lineNumber:r.selectionStartLineNumber,column:r.selectionStartColumn},position:{lineNumber:r.positionLineNumber,column:r.positionColumn}})}return e}},{key:"restoreState",value:function(e,t){for(var n=[],i=0,r=t.length;i<r;i++){var o=t[i],a=1,s=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(s=o.position.column);var l=a,u=s;o.selectionStart&&o.selectionStart.lineNumber&&(l=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(u=o.selectionStart.column),n.push({selectionStartLineNumber:l,selectionStartColumn:u,positionLineNumber:a,positionColumn:s})}this.setStates(e,"restoreState",0,cJ.fromModelSelections(n)),this.revealAll(e,"restoreState",!1,0,!0,1)}},{key:"onModelContentChanged",value:function(e,t){if(t instanceof qz){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{var n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;var i=n.containsEvent(1);if(this._prevEditOperationType=0,i)this._cursors.dispose(),this._cursors=new T2(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){var r=cJ.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?5:n.isRedoing?6:2,r)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{var o=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,cJ.fromModelSelections(o))}}}},{key:"getSelection",value:function(){return this._cursors.getPrimaryCursor().modelState.selection}},{key:"getTopMostViewPosition",value:function(){return this._cursors.getTopMostViewPosition()}},{key:"getBottomMostViewPosition",value:function(){return this._cursors.getBottomMostViewPosition()}},{key:"getCursorColumnSelectData",value:function(){if(this._columnSelectData)return this._columnSelectData;var e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}},{key:"getSelections",value:function(){return this._cursors.getSelections()}},{key:"setSelections",value:function(e,t,n,i){this.setStates(e,t,i,cJ.fromModelSelections(n))}},{key:"getPrevEditOperationType",value:function(){return this._prevEditOperationType}},{key:"setPrevEditOperationType",value:function(e){this._prevEditOperationType=e}},{key:"_pushAutoClosedAction",value:function(e,t){for(var n=[],i=[],r=0,o=e.length;r<o;r++)n.push({range:e[r],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),i.push({range:t[r],options:{description:"auto-closed-enclosing",stickiness:1}});var a=this._model.deltaDecorations([],n),s=this._model.deltaDecorations([],i);this._autoClosedActions.push(new v4(this._model,a,s))}},{key:"_executeEditOperation",value:function(e){if(e){e.shouldPushStackElementBefore&&this._model.pushStackElement();var t=p4.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);for(var n=[],i=[],r=0;r<e.commands.length;r++){var o=e.commands[r];o instanceof r0&&o.enclosingRange&&o.closeCharacterRange&&(n.push(o.closeCharacterRange),i.push(o.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,i),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}}},{key:"_interpretCommandResult",value:function(e){e&&0!==e.length||(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}},{key:"_emitStateChangedIfNecessary",value:function(e,t,n,i,r){var o=g4.from(this._model,this);if(o.equals(i))return!1;var a=this._cursors.getSelections(),s=this._cursors.getViewSelections();if(e.emitViewEvent(new F2(s,a,n)),!i||i.cursorState.length!==o.cursorState.length||o.cursorState.some((function(e,t){return!e.modelState.equals(i.cursorState[t].modelState)}))){var l=i?i.cursorState.map((function(e){return e.modelState.selection})):null,u=i?i.modelVersionId:0;e.emitOutgoingEvent(new o4(l,a,u,o.modelVersionId,t||"keyboard",n,r))}return!0}},{key:"_findAutoClosingPairs",value:function(e){if(!e.length)return null;for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];if(!r.text||r.text.indexOf("\n")>=0)return null;var o=r.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;var a=o[1],s=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!s||1!==s.length)return null;var l=s[0].open,u=r.text.length-o[2].length-1,c=r.text.lastIndexOf(l,u-1);if(-1===c)return null;t.push([c,u])}return t}},{key:"executeEdits",value:function(e,t,n,i){var r=this,o=null;"snippet"===t&&(o=this._findAutoClosingPairs(n)),o&&(n[0]._isTracked=!0);var a=[],s=[],l=this._model.pushEditOperations(this.getSelections(),n,(function(e){if(o)for(var t=0,n=o.length;t<n;t++){var l=C(o[t],2),u=l[0],c=l[1],d=e[t],h=d.range.startLineNumber,f=d.range.startColumn-1+u,g=d.range.startColumn-1+c;a.push(new hd(h,g+1,h,g+2)),s.push(new hd(h,f+1,h,g+2))}var v=i(e);return v&&(r._isHandling=!0),v}));l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),a.length>0&&this._pushAutoClosedAction(a,s)}},{key:"_executeEdit",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.context.cursorConfig.readOnly){var r=g4.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(e){vu(e)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,i,r,!1)&&this.revealAll(t,n,!1,0,!0,0)}}},{key:"getAutoClosedCharacters",value:function(){return v4.getAllAutoClosedCharacters(this._autoClosedActions)}},{key:"startComposition",value:function(e){this._compositionState=new y4(this._model,this.getSelections())}},{key:"endComposition",value:function(e,t){var n=this,i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit((function(){"keyboard"===t&&n._executeEditOperation(m0.compositionEndWithInterceptors(n._prevEditOperationType,n.context.cursorConfig,n._model,i,n.getSelections(),n.getAutoClosedCharacters()))}),e,t)}},{key:"type",value:function(e,t,n){var i=this;this._executeEdit((function(){if("keyboard"===n)for(var e=t.length,r=0;r<e;){var o=_f(t,r),a=t.substr(r,o);i._executeEditOperation(m0.typeWithInterceptors(!!i._compositionState,i._prevEditOperationType,i.context.cursorConfig,i._model,i.getSelections(),i.getAutoClosedCharacters(),a)),r+=o}else i._executeEditOperation(m0.typeWithoutInterceptors(i._prevEditOperationType,i.context.cursorConfig,i._model,i.getSelections(),t))}),e,n)}},{key:"compositionType",value:function(e,t,n,i,r,o){var a=this;if(0!==t.length||0!==n||0!==i)this._executeEdit((function(){a._executeEditOperation(m0.compositionType(a._prevEditOperationType,a.context.cursorConfig,a._model,a.getSelections(),t,n,i,r))}),e,o);else if(0!==r){var s=this.getSelections().map((function(e){var t=e.getPosition();return new fd(t.lineNumber,t.column+r,t.lineNumber,t.column+r)}));this.setSelections(e,o,s,0)}}},{key:"paste",value:function(e,t,n,i,r){var o=this;this._executeEdit((function(){o._executeEditOperation(m0.paste(o.context.cursorConfig,o._model,o.getSelections(),t,n,i||[]))}),e,r,4)}},{key:"cut",value:function(e,t){var n=this;this._executeEdit((function(){n._executeEditOperation(SJ.cut(n.context.cursorConfig,n._model,n.getSelections()))}),e,t)}},{key:"executeCommand",value:function(e,t,n){var i=this;this._executeEdit((function(){i._cursors.killSecondaryCursors(),i._executeEditOperation(new gJ(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),e,n)}},{key:"executeCommands",value:function(e,t,n){var i=this;this._executeEdit((function(){i._executeEditOperation(new gJ(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),e,n)}}]),t}(Ru),g4=function(){function e(t,n){u(this,e),this.modelVersionId=t,this.cursorState=n}return h(e,[{key:"equals",value:function(e){if(!e)return!1;if(this.modelVersionId!==e.modelVersionId)return!1;if(this.cursorState.length!==e.cursorState.length)return!1;for(var t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}],[{key:"from",value:function(t,n){return new e(t.getVersionId(),n.getCursorStates())}}]),e}(),v4=function(){function e(t,n,i){u(this,e),this._model=t,this._autoClosedCharactersDecorations=n,this._autoClosedEnclosingDecorations=i}return h(e,[{key:"dispose",value:function(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}},{key:"getAutoClosedCharactersRanges",value:function(){for(var e=[],t=0;t<this._autoClosedCharactersDecorations.length;t++){var n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}},{key:"isValid",value:function(e){for(var t=[],n=0;n<this._autoClosedEnclosingDecorations.length;n++){var i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(hd.compareRangesUsingStarts),e.sort(hd.compareRangesUsingStarts);for(var r=0;r<e.length;r++){if(r>=t.length)return!1;if(!t[r].strictContainsRange(e[r]))return!1}return!0}}],[{key:"getAllAutoClosedCharacters",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t=t.concat(s.getAutoClosedCharactersRanges())}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}}]),e}(),p4=function(){function e(){u(this,e)}return h(e,null,[{key:"executeCommands",value:function(e,t,n){for(var i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},r=this._innerExecuteCommands(i,n),o=0,a=i.trackedRanges.length;o<a;o++)i.model._setTrackedRange(i.trackedRanges[o],null,0);return r}},{key:"_innerExecuteCommands",value:function(e,t){if(this._arrayIsEmpty(t))return null;var n=this._getEditOperations(e,t);if(0===n.operations.length)return null;var i=n.operations,r=this._getLoserCursorMap(i);if(r.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;for(var o=[],a=0,s=i.length;a<s;a++)r.hasOwnProperty(i[a].identifier.major.toString())||o.push(i[a]);n.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);var l=e.model.pushEditOperations(e.selectionsBefore,o,(function(n){for(var i=function(n){r[n].length>0?(r[n].sort(h),f[n]=t[n].computeCursorState(e.model,{getInverseEditOperations:function(){return r[n]},getTrackedSelection:function(t){var n=parseInt(t,10),i=e.model._getTrackedRange(e.trackedRanges[n]);return 0===e.trackedRangesDirection[n]?new fd(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn):new fd(i.endLineNumber,i.endColumn,i.startLineNumber,i.startColumn)}})):f[n]=e.selectionsBefore[n]},r=[],o=0;o<e.selectionsBefore.length;o++)r[o]=[];var a=!0,s=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;d.identifier&&r[d.identifier.major].push(d)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}for(var h=function(e,t){return e.identifier.minor-t.identifier.minor},f=[],g=0;g<e.selectionsBefore.length;g++)i(g);return f}));l||(l=e.selectionsBefore);var u=[];for(var c in r)r.hasOwnProperty(c)&&u.push(parseInt(c,10));u.sort((function(e,t){return t-e}));var d=!0,h=!1,f=void 0;try{for(var g,v=u[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;l.splice(p,1)}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}return l}},{key:"_arrayIsEmpty",value:function(e){for(var t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}},{key:"_getEditOperations",value:function(e,t){for(var n=[],i=!1,r=0,o=t.length;r<o;r++){var a=t[r];if(a){var s=this._getEditOperationsFromCommand(e,r,a);n=n.concat(s.operations),i=i||s.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:i}}},{key:"_getEditOperationsFromCommand",value:function(e,t,n){var i=[],r=0,o=function(e,o){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];hd.isEmpty(e)&&""===o||i.push({identifier:{major:t,minor:r++},range:e,text:o,forceMoveMarkers:a,isAutoWhitespaceEdit:n.insertsAutoWhitespace})},a=!1,s={addEditOperation:o,addTrackedEditOperation:function(e,t,n){a=!0,o(e,t,n)},trackSelection:function(t,n){var i,r=fd.liftSelection(t);if(r.isEmpty())if("boolean"==typeof n)i=n?2:3;else{var o=e.model.getLineMaxColumn(r.startLineNumber);i=r.startColumn===o?2:3}else i=1;var a=e.trackedRanges.length,s=e.model._setTrackedRange(null,r,i);return e.trackedRanges[a]=s,e.trackedRangesDirection[a]=r.getDirection(),a.toString()}};try{n.getEditOperations(e.model,s)}catch(e){return vu(e),{operations:[],hadTrackedEditOperation:!1}}return{operations:i,hadTrackedEditOperation:a}}},{key:"_getLoserCursorMap",value:function(e){e=e.slice(0),e.sort((function(e,t){return-hd.compareRangesUsingEnds(e.range,t.range)}));for(var t={},n=1;n<e.length;n++){var i=e[n-1],r=e[n];if(hd.getStartPosition(i.range).isBefore(hd.getEndPosition(r.range))){var o=void 0;t[(o=i.identifier.major>r.identifier.major?i.identifier.major:r.identifier.major).toString()]=!0;for(var a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}]),e}(),m4=function e(t,n,i){u(this,e),this.text=t,this.startSelection=n,this.endSelection=i},y4=function(){function e(t,n){u(this,e),this._original=e._capture(t,n)}return h(e,[{key:"deduceOutcome",value:function(t,n){if(!this._original)return null;var i=e._capture(t,n);if(!i)return null;if(this._original.length!==i.length)return null;for(var r=[],o=0,a=this._original.length;o<a;o++)r.push(e._deduceOutcome(this._original[o],i[o]));return r}}],[{key:"_capture",value:function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(l.startLineNumber!==l.endLineNumber)return null;n.push(new m4(e.getLineContent(l.startLineNumber),l.startColumn-1,l.endColumn-1))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}},{key:"_deduceOutcome",value:function(e,t){var n=Math.min(e.startSelection,t.startSelection,df(e.text,t.text)),i=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,hf(e.text,t.text)),r=e.text.substring(n,e.text.length-i),o=t.text.substring(n,t.text.length-i);return new y0(r,e.startSelection-n,e.endSelection-n,o,t.startSelection-n,t.endSelection-n)}}]),e}(),_4=function(){function e(){u(this,e),this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}return h(e,[{key:"insert",value:function(e){this._hasPending=!0,this._inserts.push(e)}},{key:"change",value:function(e){this._hasPending=!0,this._changes.push(e)}},{key:"remove",value:function(e){this._hasPending=!0,this._removes.push(e)}},{key:"mustCommit",value:function(){return this._hasPending}},{key:"commit",value:function(e){if(this._hasPending){var t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}}}]),e}(),b4=function e(t,n,i,r,o){u(this,e),this.id=t,this.afterLineNumber=n,this.ordinal=i,this.height=r,this.minWidth=o,this.prefixSum=0},k4=(kt=function(){function e(t,n,i,r){u(this,e),this._instanceId=Mf(++e.INSTANCE_COUNT),this._pendingChanges=new _4,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=t,this._lineHeight=n,this._paddingTop=i,this._paddingBottom=r}return h(e,[{key:"setLineHeight",value:function(e){this._checkPendingChanges(),this._lineHeight=e}},{key:"setPadding",value:function(e,t){this._paddingTop=e,this._paddingBottom=t}},{key:"onFlushed",value:function(e){this._checkPendingChanges(),this._lineCount=e}},{key:"changeWhitespace",value:function(e){var t=this,n=!1;try{var i={insertWhitespace:function(e,i,r,o){n=!0,e|=0,i|=0,r|=0,o|=0;var a=t._instanceId+ ++t._lastWhitespaceId;return t._pendingChanges.insert(new b4(a,e,i,r,o)),a},changeOneWhitespace:function(e,i,r){n=!0,i|=0,r|=0,t._pendingChanges.change({id:e,newAfterLineNumber:i,newHeight:r})},removeWhitespace:function(e){n=!0,t._pendingChanges.remove({id:e})}};e(i)}finally{this._pendingChanges.commit(this)}return n}},{key:"_commitPendingChanges",value:function(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){var i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;this._insertWhitespace(l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}var u=!0,c=!1,d=void 0;try{for(var h,f=t[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;this._changeOneWhitespace(g.id,g.newAfterLineNumber,g.newHeight)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}var v=!0,p=!1,m=void 0;try{for(var y,_=n[Symbol.iterator]();!(v=(y=_.next()).done);v=!0){var b=y.value,k=this._findWhitespaceIndex(b.id);-1!==k&&this._removeWhitespace(k)}}catch(e){p=!0,m=e}finally{try{v||null==_.return||_.return()}finally{if(p)throw m}}}else{var w=new Set,C=!0,S=!1,x=void 0;try{for(var L,D=n[Symbol.iterator]();!(C=(L=D.next()).done);C=!0){var N=L.value;w.add(N.id)}}catch(e){S=!0,x=e}finally{try{C||null==D.return||D.return()}finally{if(S)throw x}}var I=new Map,E=!0,M=!1,T=void 0;try{for(var R,A=t[Symbol.iterator]();!(E=(R=A.next()).done);E=!0){var P=R.value;I.set(P.id,P)}}catch(e){M=!0,T=e}finally{try{E||null==A.return||A.return()}finally{if(M)throw T}}var O=function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(!w.has(s.id)){if(I.has(s.id)){var l=I.get(s.id);s.afterLineNumber=l.newAfterLineNumber,s.height=l.newHeight}t.push(s)}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t},F=O(this._arr).concat(O(e));F.sort((function(e,t){return e.afterLineNumber===t.afterLineNumber?e.ordinal-t.ordinal:e.afterLineNumber-t.afterLineNumber})),this._arr=F,this._prefixSumValidIndex=-1}}},{key:"_checkPendingChanges",value:function(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}},{key:"_insertWhitespace",value:function(t){var n=e.findInsertionIndex(this._arr,t.afterLineNumber,t.ordinal);this._arr.splice(n,0,t),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)}},{key:"_findWhitespaceIndex",value:function(e){for(var t=this._arr,n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}},{key:"_changeOneWhitespace",value:function(e,t,n){var i=this._findWhitespaceIndex(e);if(-1!==i&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){var r=this._arr[i];this._removeWhitespace(i),r.afterLineNumber=t,this._insertWhitespace(r)}}},{key:"_removeWhitespace",value:function(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}},{key:"onLinesDeleted",value:function(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount-=t-e+1;for(var n=0,i=this._arr.length;n<i;n++){var r=this._arr[n].afterLineNumber;e<=r&&r<=t?this._arr[n].afterLineNumber=e-1:r>t&&(this._arr[n].afterLineNumber-=t-e+1)}}},{key:"onLinesInserted",value:function(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount+=t-e+1;for(var n=0,i=this._arr.length;n<i;n++){e<=this._arr[n].afterLineNumber&&(this._arr[n].afterLineNumber+=t-e+1)}}},{key:"getWhitespacesTotalHeight",value:function(){return this._checkPendingChanges(),0===this._arr.length?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}},{key:"getWhitespacesAccumulatedHeight",value:function(e){this._checkPendingChanges(),e|=0;var t=Math.max(0,this._prefixSumValidIndex+1);0===t&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(var n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}},{key:"getLinesTotalHeight",value:function(){this._checkPendingChanges();var e=this._lineHeight*this._lineCount;return e+this.getWhitespacesTotalHeight()+this._paddingTop+this._paddingBottom}},{key:"getWhitespaceAccumulatedHeightBeforeLineNumber",value:function(e){this._checkPendingChanges(),e|=0;var t=this._findLastWhitespaceBeforeLineNumber(e);return-1===t?0:this.getWhitespacesAccumulatedHeight(t)}},{key:"_findLastWhitespaceBeforeLineNumber",value:function(e){e|=0;for(var t=this._arr,n=0,i=t.length-1;n<=i;){var r=n+((i-n|0)/2|0)|0;if(t[r].afterLineNumber<e){if(r+1>=t.length||t[r+1].afterLineNumber>=e)return r;n=r+1|0}else i=r-1|0}return-1}},{key:"_findFirstWhitespaceAfterLineNumber",value:function(e){e|=0;var t=this._findLastWhitespaceBeforeLineNumber(e)+1;return t<this._arr.length?t:-1}},{key:"getFirstWhitespaceIndexAfterLineNumber",value:function(e){return this._checkPendingChanges(),e|=0,this._findFirstWhitespaceAfterLineNumber(e)}},{key:"getVerticalOffsetForLineNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._checkPendingChanges(),e|=0,(e>1?this._lineHeight*(e-1):0)+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0))+this._paddingTop}},{key:"getVerticalOffsetAfterLineNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._checkPendingChanges(),e|=0,this._lineHeight*e+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0))+this._paddingTop}},{key:"getWhitespaceMinWidth",value:function(){if(this._checkPendingChanges(),-1===this._minWidth){for(var e=0,t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}},{key:"isAfterLines",value:function(e){return this._checkPendingChanges(),e>this.getLinesTotalHeight()}},{key:"isInTopPadding",value:function(e){return 0!==this._paddingTop&&(this._checkPendingChanges(),e<this._paddingTop)}},{key:"isInBottomPadding",value:function(e){return 0!==this._paddingBottom&&(this._checkPendingChanges(),e>=this.getLinesTotalHeight()-this._paddingBottom)}},{key:"getLineNumberAtOrAfterVerticalOffset",value:function(e){if(this._checkPendingChanges(),e|=0,e<0)return 1;for(var t=0|this._lineCount,n=this._lineHeight,i=1,r=t;i<r;){var o=(i+r)/2|0,a=0|this.getVerticalOffsetForLineNumber(o);if(e>=a+n)i=o+1;else{if(e>=a)return o;r=o}}return i>t?t:i}},{key:"getLinesViewportData",value:function(e,t){this._checkPendingChanges(),e|=0,t|=0;var n,i,r=this._lineHeight,o=0|this.getLineNumberAtOrAfterVerticalOffset(e),a=0|this.getVerticalOffsetForLineNumber(o),s=0|this._lineCount,l=0|this.getFirstWhitespaceIndexAfterLineNumber(o),u=0|this.getWhitespacesCount();-1===l?(l=u,i=s+1,n=0):(i=0|this.getAfterLineNumberForWhitespaceIndex(l),n=0|this.getHeightForWhitespaceIndex(l));var c=a,d=c,h=5e5,f=0;a>=h&&(f=Math.floor(a/h)*h,d-=f=Math.floor(f/r)*r);for(var g=[],v=e+(t-e)/2,p=-1,m=o;m<=s;m++){if(-1===p){(c<=v&&v<c+r||c>v)&&(p=m)}for(c+=r,g[m-o]=d,d+=r;i===m;)d+=n,c+=n,++l>=u?i=s+1:(i=0|this.getAfterLineNumberForWhitespaceIndex(l),n=0|this.getHeightForWhitespaceIndex(l));if(c>=t){s=m;break}}-1===p&&(p=s);var y=0|this.getVerticalOffsetForLineNumber(s),_=o,b=s;return _<b&&a<e&&_++,_<b&&y+r>t&&b--,{bigNumbersDelta:f,startLineNumber:o,endLineNumber:s,relativeVerticalOffset:g,centeredLineNumber:p,completelyVisibleStartLineNumber:_,completelyVisibleEndLineNumber:b,lineHeight:this._lineHeight}}},{key:"getVerticalOffsetForWhitespaceIndex",value:function(e){this._checkPendingChanges(),e|=0;var t=this.getAfterLineNumberForWhitespaceIndex(e);return(t>=1?this._lineHeight*t:0)+(e>0?this.getWhitespacesAccumulatedHeight(e-1):0)+this._paddingTop}},{key:"getWhitespaceIndexAtOrAfterVerticallOffset",value:function(e){this._checkPendingChanges(),e|=0;var t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;if(e>=this.getVerticalOffsetForWhitespaceIndex(n)+this.getHeightForWhitespaceIndex(n))return-1;for(;t<n;){var i=Math.floor((t+n)/2),r=this.getVerticalOffsetForWhitespaceIndex(i);if(e>=r+this.getHeightForWhitespaceIndex(i))t=i+1;else{if(e>=r)return i;n=i}}return t}},{key:"getWhitespaceAtVerticalOffset",value:function(e){this._checkPendingChanges(),e|=0;var t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0)return null;if(t>=this.getWhitespacesCount())return null;var n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;var i=this.getHeightForWhitespaceIndex(t);return{id:this.getIdForWhitespaceIndex(t),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(t),verticalOffset:n,height:i}}},{key:"getWhitespaceViewportData",value:function(e,t){this._checkPendingChanges(),e|=0,t|=0;var n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];for(var r=[],o=n;o<=i;o++){var a=this.getVerticalOffsetForWhitespaceIndex(o),s=this.getHeightForWhitespaceIndex(o);if(a>=t)break;r.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:s})}return r}},{key:"getWhitespaces",value:function(){return this._checkPendingChanges(),this._arr.slice(0)}},{key:"getWhitespacesCount",value:function(){return this._checkPendingChanges(),this._arr.length}},{key:"getIdForWhitespaceIndex",value:function(e){return this._checkPendingChanges(),e|=0,this._arr[e].id}},{key:"getAfterLineNumberForWhitespaceIndex",value:function(e){return this._checkPendingChanges(),e|=0,this._arr[e].afterLineNumber}},{key:"getHeightForWhitespaceIndex",value:function(e){return this._checkPendingChanges(),e|=0,this._arr[e].height}}],[{key:"findInsertionIndex",value:function(e,t,n){for(var i=0,r=e.length;i<r;){var o=i+r>>>1;t===e[o].afterLineNumber?n<e[o].ordinal?r=o:i=o+1:t<e[o].afterLineNumber?r=o:i=o+1}return i}}]),e}(),kt.INSTANCE_COUNT=0,kt),w4=function(){function e(t,n,i,r){u(this,e),(t|=0)<0&&(t=0),(n|=0)<0&&(n=0),(i|=0)<0&&(i=0),(r|=0)<0&&(r=0),this.width=t,this.contentWidth=n,this.scrollWidth=Math.max(t,n),this.height=i,this.contentHeight=r,this.scrollHeight=Math.max(i,r)}return h(e,[{key:"equals",value:function(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}]),e}(),C4=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._onDidContentSizeChange=i._register(new Zu),i.onDidContentSizeChange=i._onDidContentSizeChange.event,i._dimensions=new w4(0,0,0,0),i._scrollable=i._register(new uE({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:n})),i.onDidScroll=i._scrollable.onScroll,i}return p(t,e),h(t,[{key:"getScrollable",value:function(){return this._scrollable}},{key:"setSmoothScrollDuration",value:function(e){this._scrollable.setSmoothScrollDuration(e)}},{key:"validateScrollPosition",value:function(e){return this._scrollable.validateScrollPosition(e)}},{key:"getScrollDimensions",value:function(){return this._dimensions}},{key:"setScrollDimensions",value:function(e){if(!this._dimensions.equals(e)){var t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);var n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new e4(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}}},{key:"getFutureScrollPosition",value:function(){return this._scrollable.getFutureScrollPosition()}},{key:"getCurrentScrollPosition",value:function(){return this._scrollable.getCurrentScrollPosition()}},{key:"setScrollPositionNow",value:function(e){this._scrollable.setScrollPositionNow(e)}},{key:"setScrollPositionSmooth",value:function(e){this._scrollable.setScrollPositionSmooth(e)}},{key:"hasPendingScrollAnimation",value:function(){return this._scrollable.hasPendingScrollAnimation()}}]),t}(Ru),S4=function(e){function t(e,n,i){var r;u(this,t),(r=l(this,t))._configuration=e;var o=r._configuration.options,a=o.get(146),s=o.get(84);return r._linesLayout=new k4(n,o.get(67),s.top,s.bottom),r._maxLineWidth=0,r._overlayWidgetsMinWidth=0,r._scrollable=r._register(new C4(0,i)),r._configureSmoothScrollDuration(),r._scrollable.setScrollDimensions(new w4(a.contentWidth,0,a.height,0)),r.onDidScroll=r._scrollable.onDidScroll,r.onDidContentSizeChange=r._scrollable.onDidContentSizeChange,r._updateHeight(),r}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}},{key:"getScrollable",value:function(){return this._scrollable.getScrollable()}},{key:"onHeightMaybeChanged",value:function(){this._updateHeight()}},{key:"_configureSmoothScrollDuration",value:function(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(115)?125:0)}},{key:"onConfigurationChanged",value:function(e){var t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){var n=t.get(84);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(146)){var i=t.get(146),r=i.contentWidth,o=i.height,a=this._scrollable.getScrollDimensions(),s=a.contentWidth;this._scrollable.setScrollDimensions(new w4(r,a.contentWidth,o,this._getContentHeight(r,o,s)))}else this._updateHeight();e.hasChanged(115)&&this._configureSmoothScrollDuration()}},{key:"onFlushed",value:function(e){this._linesLayout.onFlushed(e)}},{key:"onLinesDeleted",value:function(e,t){this._linesLayout.onLinesDeleted(e,t)}},{key:"onLinesInserted",value:function(e,t){this._linesLayout.onLinesInserted(e,t)}},{key:"_getHorizontalScrollbarHeight",value:function(e,t){var n=this._configuration.options.get(104);return 2===n.horizontal||e>=t?0:n.horizontalScrollbarSize}},{key:"_getContentHeight",value:function(e,t,n){var i=this._configuration.options,r=this._linesLayout.getLinesTotalHeight();return i.get(106)?r+=Math.max(0,t-i.get(67)-i.get(84).bottom):i.get(104).ignoreHorizontalScrollbarInContentHeight||(r+=this._getHorizontalScrollbarHeight(e,n)),r}},{key:"_updateHeight",value:function(){var e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new w4(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}},{key:"getCurrentViewport",value:function(){var e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new BQ(t.scrollTop,t.scrollLeft,e.width,e.height)}},{key:"getFutureViewport",value:function(){var e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new BQ(t.scrollTop,t.scrollLeft,e.width,e.height)}},{key:"_computeContentWidth",value:function(){var e=this._configuration.options,t=this._maxLineWidth,n=e.get(147),i=e.get(50),r=e.get(146);if(n.isViewportWrapping){var o=e.get(73);return t>r.contentWidth+i.typicalHalfwidthCharacterWidth&&o.enabled&&"right"===o.side?t+r.verticalScrollbarWidth:t}var a=e.get(105)*i.typicalHalfwidthCharacterWidth,s=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+a+r.verticalScrollbarWidth,s,this._overlayWidgetsMinWidth)}},{key:"setMaxLineWidth",value:function(e){this._maxLineWidth=e,this._updateContentWidth()}},{key:"setOverlayWidgetsMinWidth",value:function(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}},{key:"_updateContentWidth",value:function(){var e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new w4(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}},{key:"saveState",value:function(){var e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t);return{scrollTop:t,scrollTopWithoutViewZones:t-this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n),scrollLeft:e.scrollLeft}}},{key:"changeWhitespace",value:function(e){var t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}},{key:"getVerticalOffsetForLineNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}},{key:"getVerticalOffsetAfterLineNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}},{key:"isAfterLines",value:function(e){return this._linesLayout.isAfterLines(e)}},{key:"isInTopPadding",value:function(e){return this._linesLayout.isInTopPadding(e)}},{key:"isInBottomPadding",value:function(e){return this._linesLayout.isInBottomPadding(e)}},{key:"getLineNumberAtVerticalOffset",value:function(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}},{key:"getWhitespaceAtVerticalOffset",value:function(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}},{key:"getLinesViewportData",value:function(){var e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}},{key:"getLinesViewportDataAtScrollTop",value:function(e){var t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}},{key:"getWhitespaceViewportData",value:function(){var e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}},{key:"getWhitespaces",value:function(){return this._linesLayout.getWhitespaces()}},{key:"getContentWidth",value:function(){var e=this._scrollable.getScrollDimensions();return e.contentWidth}},{key:"getScrollWidth",value:function(){var e=this._scrollable.getScrollDimensions();return e.scrollWidth}},{key:"getContentHeight",value:function(){var e=this._scrollable.getScrollDimensions();return e.contentHeight}},{key:"getScrollHeight",value:function(){var e=this._scrollable.getScrollDimensions();return e.scrollHeight}},{key:"getCurrentScrollLeft",value:function(){var e=this._scrollable.getCurrentScrollPosition();return e.scrollLeft}},{key:"getCurrentScrollTop",value:function(){var e=this._scrollable.getCurrentScrollPosition();return e.scrollTop}},{key:"validateScrollPosition",value:function(e){return this._scrollable.validateScrollPosition(e)}},{key:"setScrollPosition",value:function(e,t){1===t?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}},{key:"hasPendingScrollAnimation",value:function(){return this._scrollable.hasPendingScrollAnimation()}},{key:"deltaScrollNow",value:function(e,t){var n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}]),t}(Ru),x4=function(){function e(t,n,i,r,o){u(this,e),this.editorId=t,this.model=n,this.configuration=i,this._linesCollection=r,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}return h(e,[{key:"_clearCachedModelDecorationsResolver",value:function(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}},{key:"dispose",value:function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}},{key:"reset",value:function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}},{key:"onModelDecorationsChanged",value:function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}},{key:"onLineMappingChanged",value:function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}},{key:"_getOrCreateViewModelDecoration",value:function(e){var t=e.id,n=this._decorationsCache[t];if(!n){var i,r=e.range,o=e.options;if(o.isWholeLine){var a=this._coordinatesConverter.convertModelPositionToViewPosition(new dd(r.startLineNumber,1),0,!1,!0),s=this._coordinatesConverter.convertModelPositionToViewPosition(new dd(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber)),1);i=new hd(a.lineNumber,a.column,s.lineNumber,s.column)}else i=this._coordinatesConverter.convertModelRangeToViewRange(r,1);n=new KQ(i,o),this._decorationsCache[t]=n}return n}},{key:"getMinimapDecorationsInRange",value:function(e){return this._getDecorationsInRange(e,!0,!1).decorations}},{key:"getDecorationsViewportData",value:function(e){var t=null!==this._cachedModelDecorationsResolver;return(t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange))||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}},{key:"getInlineDecorationsOnLine",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new hd(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(i,t,n).inlineDecorations[0]}},{key:"_getDecorationsInRange",value:function(e,t,n){for(var i=this._linesCollection.getDecorationsInRange(e,this.editorId,Fl(this.configuration.options),t,n),r=e.startLineNumber,o=e.endLineNumber,a=[],s=0,l=[],u=r;u<=o;u++)l[u-r]=[];for(var c=0,d=i.length;c<d;c++){var h=i[c],f=h.options;if(L4(this.model,h)){var g=this._getOrCreateViewModelDecoration(h),v=g.range;if(a[s++]=g,f.inlineClassName)for(var p=new UQ(v,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),m=Math.max(r,v.startLineNumber),y=Math.min(o,v.endLineNumber),_=m;_<=y;_++)l[_-r].push(p);if(f.beforeContentClassName&&r<=v.startLineNumber&&v.startLineNumber<=o){var b=new UQ(new hd(v.startLineNumber,v.startColumn,v.startLineNumber,v.startColumn),f.beforeContentClassName,1);l[v.startLineNumber-r].push(b)}if(f.afterContentClassName&&r<=v.endLineNumber&&v.endLineNumber<=o){var k=new UQ(new hd(v.endLineNumber,v.endColumn,v.endLineNumber,v.endColumn),f.afterContentClassName,2);l[v.endLineNumber-r].push(k)}}}return{decorations:a,inlineDecorations:l}}}]),e}();function L4(e,t){return(!t.options.hideInCommentTokens||!D4(e,t))&&(!t.options.hideInStringTokens||!N4(e,t))}function D4(e,t){return I4(e,t.range,(function(e){return 1===e}))}function N4(e,t){return I4(e,t.range,(function(e){return 2===e}))}function I4(e,t,n){for(var i=t.startLineNumber;i<=t.endLineNumber;i++)for(var r=e.tokenization.getLineTokens(i),o=i===t.startLineNumber,a=i===t.endLineNumber,s=o?r.findTokenIndexAtOffset(t.startColumn-1):0;s<r.getCount();){if(a)if(r.getStartOffset(s)>t.endColumn-1)break;if(!n(r.getStandardTokenType(s)))return!1;s++}return!0}function E4(e,t){return null===e?t?T4.INSTANCE:R4.INSTANCE:new M4(e,t)}var M4=function(){function e(t,n){u(this,e),this._projectionData=t,this._isVisible=n}return h(e,[{key:"isVisible",value:function(){return this._isVisible}},{key:"setVisible",value:function(e){return this._isVisible=e,this}},{key:"getProjectionData",value:function(){return this._projectionData}},{key:"getViewLineCount",value:function(){return this._isVisible?this._projectionData.getOutputLineCount():0}},{key:"getViewLineContent",value:function(e,t,n){var i=this;this._assertVisible();var r,o=n>0?this._projectionData.breakOffsets[n-1]:0,a=this._projectionData.breakOffsets[n];if(null!==this._projectionData.injectionOffsets){var s=this._projectionData.injectionOffsets.map((function(e,t){return new Hz(0,0,e+1,i._projectionData.injectionOptions[t],0)}));r=Hz.applyInjectedText(e.getLineContent(t),s).substring(o,a)}else r=e.getValueInRange({startLineNumber:t,startColumn:o+1,endLineNumber:t,endColumn:a+1});return n>0&&(r=P4(this._projectionData.wrappedTextIndentLength)+r),r}},{key:"getViewLineLength",value:function(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}},{key:"getViewLineMinColumn",value:function(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}},{key:"getViewLineMaxColumn",value:function(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}},{key:"getViewLineData",value:function(e,t,n){var i=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],i),i[0]}},{key:"getViewLinesData",value:function(e,t,n,i,r,o,a){this._assertVisible();var s,l=this._projectionData,u=l.injectionOffsets,c=l.injectionOptions,d=null;if(u){d=[];for(var h=0,f=0,g=0;g<l.getOutputLineCount();g++){var v=new Array;d[g]=v;for(var p=g>0?l.breakOffsets[g-1]:0,m=l.breakOffsets[g];f<u.length;){var y=c[f].content.length,_=u[f]+h,b=_+y;if(_>m)break;if(p<b){var k=c[f];if(k.inlineClassName){var w=g>0?l.wrappedTextIndentLength:0,C=w+Math.max(_-p,0),S=w+Math.min(b-p,m-p);C!==S&&v.push(new jQ(C,S,k.inlineClassName,k.inlineClassNameAffectsLetterSpacing))}}if(!(b<=m))break;h+=y,f++}}}s=u?e.tokenization.getLineTokens(t).withInserted(u.map((function(e,t){return{offset:e,text:c[t].content,tokenMetadata:YT.defaultTokenMetadata}}))):e.tokenization.getLineTokens(t);for(var x=n;x<n+i;x++){var L=r+x-n;o[L]?a[L]=this._getViewLineData(s,d?d[x]:null,x):a[L]=null}}},{key:"_getViewLineData",value:function(e,t,n){this._assertVisible();var i=this._projectionData,r=n>0?i.wrappedTextIndentLength:0,o=n>0?i.breakOffsets[n-1]:0,a=i.breakOffsets[n],s=e.sliceAndInflate(o,a,r),l=s.getLineContent();n>0&&(l=P4(i.wrappedTextIndentLength)+l);var u=this._projectionData.getMinOutputOffset(n)+1,c=l.length+1,d=n+1<this.getViewLineCount(),h=0===n?0:i.breakOffsetsVisibleColumn[n-1];return new VQ(l,d,u,c,h,s,t)}},{key:"getModelColumnOfViewPosition",value:function(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}},{key:"getViewPositionOfModelPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){return this._assertVisible(),e+this._projectionData.translateToOutputPosition(t-1).outputLineIndex}},{key:"normalizePosition",value:function(e,t,n){var i=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(i)}},{key:"getInjectedTextAt",value:function(e,t){return this._projectionData.getInjectedText(e,t-1)}},{key:"_assertVisible",value:function(){if(!this._isVisible)throw new Error("Not supported")}}]),e}(),T4=function(){function e(){u(this,e)}return h(e,[{key:"isVisible",value:function(){return!0}},{key:"setVisible",value:function(e){return e?this:R4.INSTANCE}},{key:"getProjectionData",value:function(){return null}},{key:"getViewLineCount",value:function(){return 1}},{key:"getViewLineContent",value:function(e,t,n){return e.getLineContent(t)}},{key:"getViewLineLength",value:function(e,t,n){return e.getLineLength(t)}},{key:"getViewLineMinColumn",value:function(e,t,n){return e.getLineMinColumn(t)}},{key:"getViewLineMaxColumn",value:function(e,t,n){return e.getLineMaxColumn(t)}},{key:"getViewLineData",value:function(e,t,n){var i=e.tokenization.getLineTokens(t),r=i.getLineContent();return new VQ(r,!1,1,r.length+1,0,i.inflate(),null)}},{key:"getViewLinesData",value:function(e,t,n,i,r,o,a){o[r]?a[r]=this.getViewLineData(e,t,0):a[r]=null}},{key:"getModelColumnOfViewPosition",value:function(e,t){return t}},{key:"getViewPositionOfModelPosition",value:function(e,t){return new dd(e,t)}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){return e}},{key:"normalizePosition",value:function(e,t,n){return t}},{key:"getInjectedTextAt",value:function(e,t){return null}}]),e}();T4.INSTANCE=new T4;var R4=function(){function e(){u(this,e)}return h(e,[{key:"isVisible",value:function(){return!1}},{key:"setVisible",value:function(e){return e?T4.INSTANCE:this}},{key:"getProjectionData",value:function(){return null}},{key:"getViewLineCount",value:function(){return 0}},{key:"getViewLineContent",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLineLength",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLineMinColumn",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLineMaxColumn",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLineData",value:function(e,t,n){throw new Error("Not supported")}},{key:"getViewLinesData",value:function(e,t,n,i,r,o,a){throw new Error("Not supported")}},{key:"getModelColumnOfViewPosition",value:function(e,t){throw new Error("Not supported")}},{key:"getViewPositionOfModelPosition",value:function(e,t){throw new Error("Not supported")}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){throw new Error("Not supported")}},{key:"normalizePosition",value:function(e,t,n){throw new Error("Not supported")}},{key:"getInjectedTextAt",value:function(e,t){throw new Error("Not supported")}}]),e}();R4.INSTANCE=new R4;var A4=[""];function P4(e){if(e>=A4.length)for(var t=1;t<=e;t++)A4[t]=O4(t);return A4[e]}function O4(e){return new Array(e+1).join(" ")}var F4=function(){function e(t,n,i,r,o,a,s,l,c,d){u(this,e),this._editorId=t,this.model=n,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=r,this.fontInfo=o,this.tabSize=a,this.wrappingStrategy=s,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=d,this._constructLines(!0,null)}return h(e,[{key:"dispose",value:function(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}},{key:"createCoordinatesConverter",value:function(){return new H4(this)}},{key:"_constructLines",value:function(e,t){var n=function(e){var n=l.takeWhile((function(t){return t.lineNumber===e+1}));s.addRequest(r[e],n,t?t[e]:null)},i=this;this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));for(var r=this.model.getLinesContent(),o=this.model.getInjectedTextDecorations(this._editorId),a=r.length,s=this.createLineBreaksComputer(),l=new Sa(Hz.fromDecorations(o)),u=0;u<a;u++)n(u);for(var c=s.finalize(),d=[],h=this.hiddenAreasDecorationIds.map((function(e){return i.model.getDecorationRange(e)})).sort(hd.compareRangesUsingStarts),f=1,g=0,v=-1,p=v+1<h.length?g+1:a+2,m=0;m<a;m++){var y=m+1;y===p&&(f=h[++v].startLineNumber,g=h[v].endLineNumber,p=v+1<h.length?g+1:a+2);var _=y>=f&&y<=g,b=E4(c[m],!_);d[m]=b.getViewLineCount(),this.modelLineProjections[m]=b}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new hS(d)}},{key:"getHiddenAreas",value:function(){var e=this;return this.hiddenAreasDecorationIds.map((function(t){return e.model.getDecorationRange(t)}))}},{key:"setHiddenAreas",value:function(e){var t=this,n=function(e){if(0===e.length)return[];var t=e.slice();t.sort(hd.compareRangesUsingStarts);for(var n=[],i=t[0].startLineNumber,r=t[0].endLineNumber,o=1,a=t.length;o<a;o++){var s=t[o];s.startLineNumber>r+1?(n.push(new hd(i,1,r,1)),i=s.startLineNumber,r=s.endLineNumber):s.endLineNumber>r&&(r=s.endLineNumber)}return n.push(new hd(i,1,r,1)),n}(e.map((function(e){return t.model.validateRange(e)}))),i=this.hiddenAreasDecorationIds.map((function(e){return t.model.getDecorationRange(e)})).sort(hd.compareRangesUsingStarts);if(n.length===i.length){for(var r=!1,o=0;o<n.length;o++)if(!n[o].equalsRange(i[o])){r=!0;break}if(!r)return!1}var a=n.map((function(e){return{range:e,options:cU.EMPTY}}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,a);for(var s=n,l=1,u=0,c=-1,d=c+1<s.length?u+1:this.modelLineProjections.length+2,h=!1,f=0;f<this.modelLineProjections.length;f++){var g=f+1;g===d&&(l=s[++c].startLineNumber,u=s[c].endLineNumber,d=c+1<s.length?u+1:this.modelLineProjections.length+2);var v=!1;if(g>=l&&g<=u?this.modelLineProjections[f].isVisible()&&(this.modelLineProjections[f]=this.modelLineProjections[f].setVisible(!1),v=!0):(h=!0,this.modelLineProjections[f].isVisible()||(this.modelLineProjections[f]=this.modelLineProjections[f].setVisible(!0),v=!0)),v){var p=this.modelLineProjections[f].getViewLineCount();this.projectedModelLineLineCounts.setValue(f,p)}}return h||this.setHiddenAreas([]),!0}},{key:"modelPositionIsVisible",value:function(e,t){return!(e<1||e>this.modelLineProjections.length)&&this.modelLineProjections[e-1].isVisible()}},{key:"getModelLineViewLineCount",value:function(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}},{key:"setTabSize",value:function(e){return this.tabSize!==e&&(this.tabSize=e,this._constructLines(!1,null),!0)}},{key:"setWrappingSettings",value:function(e,t,n,i,r){var o=this.fontInfo.equals(e),a=this.wrappingStrategy===t,s=this.wrappingColumn===n,l=this.wrappingIndent===i,u=this.wordBreak===r;if(o&&a&&s&&l&&u)return!1;var c=o&&a&&!s&&l&&u;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i,this.wordBreak=r;var d=null;if(c){d=[];for(var h=0,f=this.modelLineProjections.length;h<f;h++)d[h]=this.modelLineProjections[h].getProjectionData()}return this._constructLines(!1,d),!0}},{key:"createLineBreaksComputer",value:function(){var e="advanced"===this.wrappingStrategy?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory;return e.createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}},{key:"onModelFlushed",value:function(){this._constructLines(!0,null)}},{key:"onModelLinesDeleted",value:function(e,t,n){if(!e||e<=this._validModelVersionId)return null;var i=1===t?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,r=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new j2(i,r)}},{key:"onModelLinesInserted",value:function(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;for(var r=t>2&&!this.modelLineProjections[t-2].isVisible(),o=1===t?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,a=0,s=[],l=[],u=0,c=i.length;u<c;u++){var d=E4(i[u],!r);s.push(d);var h=d.getViewLineCount();a+=h,l[u]=h}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(s).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,l),new K2(o,o+a-1)}},{key:"onModelLineChanged",value:function(e,t,n){if(null!==e&&e<=this._validModelVersionId)return[!1,null,null,null];var i=t-1,r=this.modelLineProjections[i].getViewLineCount(),o=E4(n,this.modelLineProjections[i].isVisible());this.modelLineProjections[i]=o;var a=this.modelLineProjections[i].getViewLineCount(),s=!1,l=0,u=-1,c=0,d=-1,h=0,f=-1;return r>a?(f=(h=(u=(l=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1)+a-1)+1)+(r-a)-1,s=!0):r<a?(d=(c=(u=(l=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1)+r-1)+1)+(a-r)-1,s=!0):u=(l=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1)+a-1,this.projectedModelLineLineCounts.setValue(i,a),[s,l<=u?new U2(l,u-l+1):null,c<=d?new K2(c,d):null,h<=f?new j2(h,f):null]}},{key:"acceptVersionId",value:function(e){this._validModelVersionId=e,1!==this.modelLineProjections.length||this.modelLineProjections[0].isVisible()||this.setHiddenAreas([])}},{key:"getViewLineCount",value:function(){return this.projectedModelLineLineCounts.getTotalSum()}},{key:"_toValidViewLineNumber",value:function(e){if(e<1)return 1;var t=this.getViewLineCount();return e>t?t:0|e}},{key:"getActiveIndentGuide",value:function(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);var i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.guides.getActiveIndentGuide(i.lineNumber,r.lineNumber,o.lineNumber),s=this.convertModelPositionToViewPosition(a.startLineNumber,1),l=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:s.lineNumber,endLineNumber:l.lineNumber,indent:a.indent}}},{key:"getViewLineInfo",value:function(e){e=this._toValidViewLineNumber(e);var t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,i=t.remainder;return new W4(n+1,i)}},{key:"getMinColumnOfViewLine",value:function(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}},{key:"getMaxColumnOfViewLine",value:function(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}},{key:"getModelStartPositionOfViewLine",value:function(e){var t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new dd(e.modelLineNumber,i)}},{key:"getModelEndPositionOfViewLine",value:function(e){var t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new dd(e.modelLineNumber,i)}},{key:"getViewLineInfosGroupedByModelRanges",value:function(e,t){for(var n=this.getViewLineInfo(e),i=this.getViewLineInfo(t),r=new Array,o=this.getModelStartPositionOfViewLine(n),a=new Array,s=n.modelLineNumber;s<=i.modelLineNumber;s++){var l=this.modelLineProjections[s-1];if(l.isVisible())for(var u=s===n.modelLineNumber?n.modelLineWrappedLineIdx:0,c=s===i.modelLineNumber?i.modelLineWrappedLineIdx+1:l.getViewLineCount(),d=u;d<c;d++)a.push(new W4(s,d));if(!l.isVisible()&&o){var h=new dd(s-1,this.model.getLineMaxColumn(s-1)+1),f=hd.fromPositions(o,h);r.push(new B4(f,a)),a=[],o=null}else l.isVisible()&&!o&&(o=new dd(s,1))}if(o){var g=hd.fromPositions(o,this.getModelEndPositionOfViewLine(i));r.push(new B4(g,a))}return r}},{key:"getViewLinesBracketGuides",value:function(e,t,n,i){var r=this,o=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,a=[],s=!0,l=!1,u=void 0;try{for(var c,d=this.getViewLineInfosGroupedByModelRanges(e,t)[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value,f=h.modelRange.startLineNumber,g=this.model.guides.getLinesBracketGuides(f,h.modelRange.endLineNumber,o,i),v=!0,p=!1,m=void 0;try{for(var y,_=function(){var e=y.value,t=g[e.modelLineNumber-f].map((function(t){if(-1!==t.forWrappedLinesAfterColumn&&r.modelLineProjections[e.modelLineNumber-1].getViewPositionOfModelPosition(0,t.forWrappedLinesAfterColumn).lineNumber>=e.modelLineWrappedLineIdx)return;if(-1!==t.forWrappedLinesBeforeOrAtColumn&&r.modelLineProjections[e.modelLineNumber-1].getViewPositionOfModelPosition(0,t.forWrappedLinesBeforeOrAtColumn).lineNumber<e.modelLineWrappedLineIdx)return;if(!t.horizontalLine)return t;var n=-1;if(-1!==t.column){var i=r.modelLineProjections[e.modelLineNumber-1].getViewPositionOfModelPosition(0,t.column);if(i.lineNumber===e.modelLineWrappedLineIdx)n=i.column;else if(i.lineNumber<e.modelLineWrappedLineIdx)n=r.getMinColumnOfViewLine(e);else if(i.lineNumber>e.modelLineWrappedLineIdx)return}var o=r.convertModelPositionToViewPosition(e.modelLineNumber,t.horizontalLine.endColumn),a=r.modelLineProjections[e.modelLineNumber-1].getViewPositionOfModelPosition(0,t.horizontalLine.endColumn);return a.lineNumber===e.modelLineWrappedLineIdx?new uV(t.visibleColumn,n,t.className,new cV(t.horizontalLine.top,o.column),-1,-1):a.lineNumber<e.modelLineWrappedLineIdx||-1!==t.visibleColumn?void 0:new uV(t.visibleColumn,n,t.className,new cV(t.horizontalLine.top,r.getMaxColumnOfViewLine(e)),-1,-1)}));a.push(t.filter((function(e){return!!e})))},b=h.viewLines[Symbol.iterator]();!(v=(y=b.next()).done);v=!0)_()}catch(e){p=!0,m=e}finally{try{v||null==b.return||b.return()}finally{if(p)throw m}}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return a}},{key:"getViewLinesIndentGuides",value:function(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);for(var n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t)),r=[],o=[],a=[],s=n.lineNumber-1,l=i.lineNumber-1,u=null,c=s;c<=l;c++){var d=this.modelLineProjections[c];if(d.isVisible()){var h=d.getViewLineNumberOfModelPosition(0,c===s?n.column:1),f=d.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(c+1)),g=f-h+1,v=0;g>1&&1===d.getViewLineMinColumn(this.model,c+1,f)&&(v=0===h?1:2),o.push(g),a.push(v),null===u&&(u=new dd(c+1,0))}else null!==u&&(r=r.concat(this.model.guides.getLinesIndentGuides(u.lineNumber,c)),u=null)}null!==u&&(r=r.concat(this.model.guides.getLinesIndentGuides(u.lineNumber,i.lineNumber)),u=null);for(var p=t-e+1,m=new Array(p),y=0,_=0,b=r.length;_<b;_++){var k=r[_],w=Math.min(p-y,o[_]),C=a[_],S=void 0;S=2===C?0:1===C?1:w;for(var x=0;x<w;x++)x===S&&(k=0),m[y++]=k}return m}},{key:"getViewLineContent",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLineLength",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLineMinColumn",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLineMaxColumn",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLineData",value:function(e){var t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}},{key:"getViewLinesData",value:function(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);for(var i=this.projectedModelLineLineCounts.getIndexOf(e-1),r=e,o=i.index,a=i.remainder,s=[],l=o,u=this.model.getLineCount();l<u;l++){var c=this.modelLineProjections[l];if(c.isVisible()){var d=l===o?a:0,h=c.getViewLineCount()-d,f=!1;if(r+h>t&&(f=!0,h=t-r+1),c.getViewLinesData(this.model,l+1,d,h,r-e,n,s),r+=h,f)break}}return s}},{key:"validateViewPosition",value:function(e,t,n){e=this._toValidViewLineNumber(e);var i=this.projectedModelLineLineCounts.getIndexOf(e-1),r=i.index,o=i.remainder,a=this.modelLineProjections[r],s=a.getViewLineMinColumn(this.model,r+1,o),l=a.getViewLineMaxColumn(this.model,r+1,o);t<s&&(t=s),t>l&&(t=l);var u=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new dd(r+1,u)).equals(n)?new dd(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}},{key:"validateViewRange",value:function(e,t){var n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new hd(n.lineNumber,n.column,i.lineNumber,i.column)}},{key:"convertViewPositionToModelPosition",value:function(e,t){var n=this.getViewLineInfo(e),i=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new dd(n.modelLineNumber,i))}},{key:"convertViewRangeToModelRange",value:function(e){var t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new hd(t.lineNumber,t.column,n.lineNumber,n.column)}},{key:"convertModelPositionToViewPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.model.validatePosition(new dd(e,t)),a=o.lineNumber,s=o.column,l=a-1,u=!1;if(r)for(;l<this.modelLineProjections.length&&!this.modelLineProjections[l].isVisible();)l++,u=!0;else for(;l>0&&!this.modelLineProjections[l].isVisible();)l--,u=!0;if(0===l&&!this.modelLineProjections[l].isVisible())return new dd(i?0:1,1);var c=1+this.projectedModelLineLineCounts.getPrefixSum(l);return u?r?this.modelLineProjections[l].getViewPositionOfModelPosition(c,1,n):this.modelLineProjections[l].getViewPositionOfModelPosition(c,this.model.getLineMaxColumn(l+1),n):this.modelLineProjections[a-1].getViewPositionOfModelPosition(c,s,n)}},{key:"convertModelRangeToViewRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.isEmpty()){var n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return hd.fromPositions(n)}var i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),r=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new hd(i.lineNumber,i.column,r.lineNumber,r.column)}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){var n=e-1;if(this.modelLineProjections[n].isVisible()){var i=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(i,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(0===n&&!this.modelLineProjections[n].isVisible())return 1;var r=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(r,this.model.getLineMaxColumn(n+1))}},{key:"getDecorationsInRange",value:function(e,t,n,i,r){var o=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-o.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new hd(o.lineNumber,1,a.lineNumber,a.column),t,n,i,r);for(var s=[],l=o.lineNumber-1,u=a.lineNumber-1,c=null,d=l;d<=u;d++){if(this.modelLineProjections[d].isVisible())null===c&&(c=new dd(d+1,d===l?o.column:1));else if(null!==c){var h=this.model.getLineMaxColumn(d);s=s.concat(this.model.getDecorationsInRange(new hd(c.lineNumber,c.column,d,h),t,n,i)),c=null}}null!==c&&(s=s.concat(this.model.getDecorationsInRange(new hd(c.lineNumber,c.column,a.lineNumber,a.column),t,n,i)),c=null),s.sort((function(e,t){var n=hd.compareRangesUsingStarts(e.range,t.range);return 0===n?e.id<t.id?-1:e.id>t.id?1:0:n}));var f=[],g=0,v=null,p=!0,m=!1,y=void 0;try{for(var _,b=s[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){var k=_.value,w=k.id;v!==w&&(v=w,f[g++]=k)}}catch(e){m=!0,y=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw y}}return f}},{key:"getInjectedTextAt",value:function(e){var t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}},{key:"normalizePosition",value:function(e,t){var n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}},{key:"getLineIndentColumn",value:function(e){var t=this.getViewLineInfo(e);return 0===t.modelLineWrappedLineIdx?this.model.getLineIndentColumn(t.modelLineNumber):0}}]),e}();var W4=function e(t,n){u(this,e),this.modelLineNumber=t,this.modelLineWrappedLineIdx=n},B4=function e(t,n){u(this,e),this.modelRange=t,this.viewLines=n},H4=function(){function e(t){u(this,e),this._lines=t}return h(e,[{key:"convertViewPositionToModelPosition",value:function(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}},{key:"convertViewRangeToModelRange",value:function(e){return this._lines.convertViewRangeToModelRange(e)}},{key:"validateViewPosition",value:function(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}},{key:"validateViewRange",value:function(e,t){return this._lines.validateViewRange(e,t)}},{key:"convertModelPositionToViewPosition",value:function(e,t,n,i){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,n,i)}},{key:"convertModelRangeToViewRange",value:function(e,t){return this._lines.convertModelRangeToViewRange(e,t)}},{key:"modelPositionIsVisible",value:function(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}},{key:"getModelLineViewLineCount",value:function(e){return this._lines.getModelLineViewLineCount(e)}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}]),e}(),V4=function(){function e(t){u(this,e),this.model=t}return h(e,[{key:"dispose",value:function(){}},{key:"createCoordinatesConverter",value:function(){return new z4(this)}},{key:"getHiddenAreas",value:function(){return[]}},{key:"setHiddenAreas",value:function(e){return!1}},{key:"setTabSize",value:function(e){return!1}},{key:"setWrappingSettings",value:function(e,t,n,i){return!1}},{key:"createLineBreaksComputer",value:function(){var e=[];return{addRequest:function(t,n,i){e.push(null)},finalize:function(){return e}}}},{key:"onModelFlushed",value:function(){}},{key:"onModelLinesDeleted",value:function(e,t,n){return new j2(t,n)}},{key:"onModelLinesInserted",value:function(e,t,n,i){return new K2(t,n)}},{key:"onModelLineChanged",value:function(e,t,n){return[!1,new U2(t,1),null,null]}},{key:"acceptVersionId",value:function(e){}},{key:"getViewLineCount",value:function(){return this.model.getLineCount()}},{key:"getActiveIndentGuide",value:function(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}},{key:"getViewLinesBracketGuides",value:function(e,t,n){return new Array(t-e+1).fill([])}},{key:"getViewLinesIndentGuides",value:function(e,t){for(var n=t-e+1,i=new Array(n),r=0;r<n;r++)i[r]=0;return i}},{key:"getViewLineContent",value:function(e){return this.model.getLineContent(e)}},{key:"getViewLineLength",value:function(e){return this.model.getLineLength(e)}},{key:"getViewLineMinColumn",value:function(e){return this.model.getLineMinColumn(e)}},{key:"getViewLineMaxColumn",value:function(e){return this.model.getLineMaxColumn(e)}},{key:"getViewLineData",value:function(e){var t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new VQ(n,!1,1,n.length+1,0,t.inflate(),null)}},{key:"getViewLinesData",value:function(e,t,n){var i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);for(var r=[],o=e;o<=t;o++){var a=o-e;r[a]=n[a]?this.getViewLineData(o):null}return r}},{key:"getDecorationsInRange",value:function(e,t,n,i,r){return this.model.getDecorationsInRange(e,t,n,i,r)}},{key:"normalizePosition",value:function(e,t){return this.model.normalizePosition(e,t)}},{key:"getLineIndentColumn",value:function(e){return this.model.getLineIndentColumn(e)}},{key:"getInjectedTextAt",value:function(e){return null}}]),e}(),z4=function(){function e(t){u(this,e),this._lines=t}return h(e,[{key:"_validPosition",value:function(e){return this._lines.model.validatePosition(e)}},{key:"_validRange",value:function(e){return this._lines.model.validateRange(e)}},{key:"convertViewPositionToModelPosition",value:function(e){return this._validPosition(e)}},{key:"convertViewRangeToModelRange",value:function(e){return this._validRange(e)}},{key:"validateViewPosition",value:function(e,t){return this._validPosition(t)}},{key:"validateViewRange",value:function(e,t){return this._validRange(t)}},{key:"convertModelPositionToViewPosition",value:function(e){return this._validPosition(e)}},{key:"convertModelRangeToViewRange",value:function(e){return this._validRange(e)}},{key:"modelPositionIsVisible",value:function(e){var t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}},{key:"getModelLineViewLineCount",value:function(e){return 1}},{key:"getViewLineNumberOfModelPosition",value:function(e,t){return e}}]),e}(),U4=hw.Right,j4=function(){function e(t){u(this,e),this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((t+1)*U4/8))}return h(e,[{key:"reset",value:function(e){var t=Math.ceil((e+1)*U4/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}},{key:"requiredLanes",get:function(){return this._requiredLanes}},{key:"push",value:function(e,t,n){n&&(this.persist|=1<<e-1);for(var i=t.startLineNumber;i<=t.endLineNumber;i++){var r=U4*i+(e-1);this.lanes[r>>>3]|=1<<r%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(i))}}},{key:"getLanesAtLine",value:function(e){for(var t=[],n=U4*e,i=0;i<U4;i++)(this.persist&1<<i||this.lanes[n>>>3]&1<<n%8)&&t.push(i+1),n++;return t.length?t:[hw.Center]}},{key:"countAtLine",value:function(e){for(var t=U4*e,n=0,i=0;i<U4;i++)(this.persist&1<<i||this.lanes[t>>>3]&1<<t%8)&&n++,t++;return n}}]),e}(),K4=function(e){function t(e,n,i,r,o,a,s,c,d,h){var f;if(u(this,t),(f=l(this,t)).languageConfigurationService=s,f._themeService=c,f._attachedView=d,f._transactionalTarget=h,f.hiddenAreasModel=new Z4,f.previousHiddenAreas=[],f._editorId=e,f._configuration=n,f.model=i,f._eventDispatcher=new $2,f.onEvent=f._eventDispatcher.onEvent,f.cursorConfig=new uJ(f.model.getLanguageId(),f.model.getOptions(),f._configuration,f.languageConfigurationService),f._updateConfigurationViewLineCount=f._register(new Sg((function(){return f._updateConfigurationViewLineCountNow()}),0)),f._hasFocus=!1,f._viewportStart=q4.create(f.model),f.glyphLanes=new j4(0),f.model.isTooLargeForTokenization())f._lines=new V4(f.model);else{var g=f._configuration.options,v=g.get(50),p=g.get(140),m=g.get(147),y=g.get(139),_=g.get(130);f._lines=new F4(f._editorId,f.model,r,o,v,f.model.getOptions().tabSize,p,m.wrappingColumn,y,_)}return f.coordinatesConverter=f._lines.createCoordinatesConverter(),f._cursor=f._register(new f4(i,f,f.coordinatesConverter,f.cursorConfig)),f.viewLayout=f._register(new S4(f._configuration,f.getLineCount(),a)),f._register(f.viewLayout.onDidScroll((function(e){e.scrollTopChanged&&f._handleVisibleLinesChanged(),e.scrollTopChanged&&f._viewportStart.invalidate(),f._eventDispatcher.emitSingleViewEvent(new G2(e)),f._eventDispatcher.emitOutgoingEvent(new n4(e.oldScrollWidth,e.oldScrollLeft,e.oldScrollHeight,e.oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop))}))),f._register(f.viewLayout.onDidContentSizeChange((function(e){f._eventDispatcher.emitOutgoingEvent(e)}))),f._decorations=new x4(f._editorId,f.model,f._configuration,f._lines,f.coordinatesConverter),f._registerModelEvents(),f._register(f._configuration.onDidChangeFast((function(e){try{var t=f._eventDispatcher.beginEmitViewEvents();f._onConfigurationChanged(t,e)}finally{f._eventDispatcher.endEmitViewEvents()}}))),f._register(v1.getInstance().onDidChange((function(){f._eventDispatcher.emitSingleViewEvent(new Q2)}))),f._register(f._themeService.onDidColorThemeChange((function(e){f._invalidateDecorationsColorCache(),f._eventDispatcher.emitSingleViewEvent(new Z2(e))}))),f._updateConfigurationViewLineCountNow(),f}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}},{key:"createLineBreaksComputer",value:function(){return this._lines.createLineBreaksComputer()}},{key:"addViewEventHandler",value:function(e){this._eventDispatcher.addViewEventHandler(e)}},{key:"removeViewEventHandler",value:function(e){this._eventDispatcher.removeViewEventHandler(e)}},{key:"_updateConfigurationViewLineCountNow",value:function(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}},{key:"getModelVisibleRanges",value:function(){var e=this.viewLayout.getLinesViewportData(),t=new hd(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}},{key:"visibleLinesStabilized",value:function(){var e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}},{key:"_handleVisibleLinesChanged",value:function(){var e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}},{key:"setHasFocus",value:function(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new H2(e)),this._eventDispatcher.emitOutgoingEvent(new t4(!e,e))}},{key:"onCompositionStart",value:function(){this._eventDispatcher.emitSingleViewEvent(new A2)}},{key:"onCompositionEnd",value:function(){this._eventDispatcher.emitSingleViewEvent(new P2)}},{key:"_captureStableViewport",value:function(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){var e=new dd(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new X4(t,this._viewportStart.startLineDelta)}return new X4(null,0)}},{key:"_onConfigurationChanged",value:function(e,t){var n=this._captureStableViewport(),i=this._configuration.options,r=i.get(50),o=i.get(140),a=i.get(147),s=i.get(139),l=i.get(130);this._lines.setWrappingSettings(r,o,a.wrappingColumn,s,l)&&(e.emitViewEvent(new B2),e.emitViewEvent(new z2),e.emitViewEvent(new W2(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(92)&&(this._decorations.reset(),e.emitViewEvent(new W2(null))),t.hasChanged(99)&&(this._decorations.reset(),e.emitViewEvent(new W2(null))),e.emitViewEvent(new O2(t)),this.viewLayout.onConfigurationChanged(t),n.recoverViewportStart(this.coordinatesConverter,this.viewLayout),uJ.shouldRecreate(t)&&(this.cursorConfig=new uJ(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}},{key:"_registerModelEvents",value:function(){var e=this;this._register(this.model.onDidChangeContentOrInjectedText((function(t){try{var n=e._eventDispatcher.beginEmitViewEvents(),i=!1,r=!1,o=t instanceof Gz?t.rawContentChangedEvent.changes:t.changes,a=t instanceof Gz?t.rawContentChangedEvent.versionId:null,s=e._lines.createLineBreaksComputer(),l=!0,u=!1,c=void 0;try{for(var d,h=o[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;switch(f.changeType){case 4:for(var g=0;g<f.detail.length;g++){var v=f.detail[g],p=f.injectedTexts[g];p&&(p=p.filter((function(t){return!t.ownerId||t.ownerId===e._editorId}))),s.addRequest(v,p,null)}break;case 2:var m=null;f.injectedText&&(m=f.injectedText.filter((function(t){return!t.ownerId||t.ownerId===e._editorId}))),s.addRequest(f.detail,m,null)}}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}var y=s.finalize(),_=new Sa(y),b=!0,k=!1,w=void 0;try{for(var S,x=o[Symbol.iterator]();!(b=(S=x.next()).done);b=!0){var L=S.value;switch(L.changeType){case 1:e._lines.onModelFlushed(),n.emitViewEvent(new B2),e._decorations.reset(),e.viewLayout.onFlushed(e.getLineCount()),i=!0;break;case 3:var D=e._lines.onModelLinesDeleted(a,L.fromLineNumber,L.toLineNumber);null!==D&&(n.emitViewEvent(D),e.viewLayout.onLinesDeleted(D.fromLineNumber,D.toLineNumber)),i=!0;break;case 4:var N=_.takeCount(L.detail.length),I=e._lines.onModelLinesInserted(a,L.fromLineNumber,L.toLineNumber,N);null!==I&&(n.emitViewEvent(I),e.viewLayout.onLinesInserted(I.fromLineNumber,I.toLineNumber)),i=!0;break;case 2:var E=_.dequeue(),M=C(e._lines.onModelLineChanged(a,L.lineNumber,E),4),T=M[0],R=M[1],A=M[2],P=M[3];r=T,R&&n.emitViewEvent(R),A&&(n.emitViewEvent(A),e.viewLayout.onLinesInserted(A.fromLineNumber,A.toLineNumber)),P&&(n.emitViewEvent(P),e.viewLayout.onLinesDeleted(P.fromLineNumber,P.toLineNumber))}}}catch(e){k=!0,w=e}finally{try{b||null==x.return||x.return()}finally{if(k)throw w}}null!==a&&e._lines.acceptVersionId(a),e.viewLayout.onHeightMaybeChanged(),!i&&r&&(n.emitViewEvent(new z2),n.emitViewEvent(new W2(null)),e._cursor.onLineMappingChanged(n),e._decorations.onLineMappingChanged())}finally{e._eventDispatcher.endEmitViewEvents()}var O=e._viewportStart.isValid;if(e._viewportStart.invalidate(),e._configuration.setModelLineCount(e.model.getLineCount()),e._updateConfigurationViewLineCountNow(),!e._hasFocus&&e.model.getAttachedEditorCount()>=2&&O){var F=e.model._getTrackedRange(e._viewportStart.modelTrackedRange);if(F){var W=e.coordinatesConverter.convertModelPositionToViewPosition(F.getStartPosition()),B=e.viewLayout.getVerticalOffsetForLineNumber(W.lineNumber);e.viewLayout.setScrollPosition({scrollTop:B+e._viewportStart.startLineDelta},1)}}try{var H=e._eventDispatcher.beginEmitViewEvents();t instanceof Gz&&H.emitOutgoingEvent(new c4(t.contentChangedEvent)),e._cursor.onModelContentChanged(H,t)}finally{e._eventDispatcher.endEmitViewEvents()}e._handleVisibleLinesChanged()}))),this._register(this.model.onDidChangeTokens((function(t){for(var n=[],i=0,r=t.ranges.length;i<r;i++){var o=t.ranges[i],a=e.coordinatesConverter.convertModelPositionToViewPosition(new dd(o.fromLineNumber,1)).lineNumber,s=e.coordinatesConverter.convertModelPositionToViewPosition(new dd(o.toLineNumber,e.model.getLineMaxColumn(o.toLineNumber))).lineNumber;n[i]={fromLineNumber:a,toLineNumber:s}}e._eventDispatcher.emitSingleViewEvent(new Y2(n)),e._eventDispatcher.emitOutgoingEvent(new h4(t))}))),this._register(this.model.onDidChangeLanguageConfiguration((function(t){e._eventDispatcher.emitSingleViewEvent(new V2),e.cursorConfig=new uJ(e.model.getLanguageId(),e.model.getOptions(),e._configuration,e.languageConfigurationService),e._cursor.updateConfiguration(e.cursorConfig),e._eventDispatcher.emitOutgoingEvent(new u4(t))}))),this._register(this.model.onDidChangeLanguage((function(t){e.cursorConfig=new uJ(e.model.getLanguageId(),e.model.getOptions(),e._configuration,e.languageConfigurationService),e._cursor.updateConfiguration(e.cursorConfig),e._eventDispatcher.emitOutgoingEvent(new l4(t))}))),this._register(this.model.onDidChangeOptions((function(t){if(e._lines.setTabSize(e.model.getOptions().tabSize)){try{var n=e._eventDispatcher.beginEmitViewEvents();n.emitViewEvent(new B2),n.emitViewEvent(new z2),n.emitViewEvent(new W2(null)),e._cursor.onLineMappingChanged(n),e._decorations.onLineMappingChanged(),e.viewLayout.onFlushed(e.getLineCount())}finally{e._eventDispatcher.endEmitViewEvents()}e._updateConfigurationViewLineCount.schedule()}e.cursorConfig=new uJ(e.model.getLanguageId(),e.model.getOptions(),e._configuration,e.languageConfigurationService),e._cursor.updateConfiguration(e.cursorConfig),e._eventDispatcher.emitOutgoingEvent(new d4(t))}))),this._register(this.model.onDidChangeDecorations((function(t){e._decorations.onModelDecorationsChanged(),e._eventDispatcher.emitSingleViewEvent(new W2(t)),e._eventDispatcher.emitOutgoingEvent(new s4(t))})))}},{key:"setHiddenAreas",value:function(e,t){this.hiddenAreasModel.setHiddenAreas(t,e);var n=this.hiddenAreasModel.getMergedRanges();if(n!==this.previousHiddenAreas){this.previousHiddenAreas=n;var i=this._captureStableViewport(),r=!1;try{var o,a=this._eventDispatcher.beginEmitViewEvents();(r=this._lines.setHiddenAreas(n))&&(a.emitViewEvent(new B2),a.emitViewEvent(new z2),a.emitViewEvent(new W2(null)),this._cursor.onLineMappingChanged(a),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());var s=null===(o=i.viewportStartModelPosition)||void 0===o?void 0:o.lineNumber,l=s&&n.some((function(e){return e.startLineNumber<=s&&s<=e.endLineNumber}));l||i.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),r&&this._eventDispatcher.emitOutgoingEvent(new r4)}}},{key:"getVisibleRangesPlusViewportAboveBelow",value:function(){var e=this._configuration.options.get(146),t=this._configuration.options.get(67),n=Math.max(20,Math.round(e.height/t)),i=this.viewLayout.getLinesViewportData(),r=Math.max(1,i.completelyVisibleStartLineNumber-n),o=Math.min(this.getLineCount(),i.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new hd(r,this.getLineMinColumn(r),o,this.getLineMaxColumn(o)))}},{key:"getVisibleRanges",value:function(){var e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}},{key:"getHiddenAreas",value:function(){return this._lines.getHiddenAreas()}},{key:"_toModelVisibleRanges",value:function(e){var t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(0===n.length)return[t];for(var i=[],r=0,o=t.startLineNumber,a=t.startColumn,s=t.endLineNumber,l=t.endColumn,u=0,c=n.length;u<c;u++){var d=n[u].startLineNumber,h=n[u].endLineNumber;h<o||(d>s||(o<d&&(i[r++]=new hd(o,a,d-1,this.model.getLineMaxColumn(d-1))),o=h+1,a=1))}return(o<s||o===s&&a<l)&&(i[r++]=new hd(o,a,s,l)),i}},{key:"getCompletelyVisibleViewRange",value:function(){var e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new hd(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}},{key:"getCompletelyVisibleViewRangeAtScrollTop",value:function(e){var t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new hd(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}},{key:"saveState",value:function(){var e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),i=this.coordinatesConverter.convertViewPositionToModelPosition(new dd(n,this.getLineMinColumn(n))),r=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:i,firstPositionDeltaTop:r}}},{key:"reduceRestoreState",value:function(e){if(void 0===e.firstPosition)return this._reduceRestoreStateCompatibility(e);var t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:i}}},{key:"_reduceRestoreStateCompatibility",value:function(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}},{key:"getTabSize",value:function(){return this.model.getOptions().tabSize}},{key:"getLineCount",value:function(){return this._lines.getViewLineCount()}},{key:"setViewport",value:function(e,t,n){this._viewportStart.update(this,e)}},{key:"getActiveIndentGuide",value:function(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}},{key:"getLinesIndentGuides",value:function(e,t){return this._lines.getViewLinesIndentGuides(e,t)}},{key:"getBracketGuidesInRangeByLine",value:function(e,t,n,i){return this._lines.getViewLinesBracketGuides(e,t,n,i)}},{key:"getLineContent",value:function(e){return this._lines.getViewLineContent(e)}},{key:"getLineLength",value:function(e){return this._lines.getViewLineLength(e)}},{key:"getLineMinColumn",value:function(e){return this._lines.getViewLineMinColumn(e)}},{key:"getLineMaxColumn",value:function(e){return this._lines.getViewLineMaxColumn(e)}},{key:"getLineFirstNonWhitespaceColumn",value:function(e){var t=$h(this.getLineContent(e));return-1===t?0:t+1}},{key:"getLineLastNonWhitespaceColumn",value:function(e){var t=ef(this.getLineContent(e));return-1===t?0:t+2}},{key:"getMinimapDecorationsInRange",value:function(e){return this._decorations.getMinimapDecorationsInRange(e)}},{key:"getDecorationsInViewport",value:function(e){return this._decorations.getDecorationsViewportData(e).decorations}},{key:"getInjectedTextAt",value:function(e){return this._lines.getInjectedTextAt(e)}},{key:"getViewportViewLineRenderingData",value:function(e,t){var n=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,n)}},{key:"getViewLineRenderingData",value:function(e){var t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}},{key:"_getViewLineRenderingData",value:function(e,t){var n=this.model.mightContainRTL(),i=this.model.mightContainNonBasicASCII(),r=this.getTabSize(),o=this._lines.getViewLineData(e);return o.inlineDecorations&&(t=x(t).concat(x(o.inlineDecorations.map((function(t){return t.toInlineDecoration(e)}))))),new zQ(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,n,i,o.tokens,t,r,o.startVisibleColumn)}},{key:"getViewLineData",value:function(e){return this._lines.getViewLineData(e)}},{key:"getMinimapLinesRenderingData",value:function(e,t,n){var i=this._lines.getViewLinesData(e,t,n);return new HQ(this.getTabSize(),i)}},{key:"getAllOverviewRulerDecorations",value:function(e){var t=this.model.getOverviewRulerDecorations(this._editorId,Fl(this._configuration.options)),n=new G4,i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=l.options,c=u.overviewRuler;if(c){var d=c.position;if(0!==d){var h=c.getColor(e.value),f=this.coordinatesConverter.getViewLineNumberOfModelPosition(l.range.startLineNumber,l.range.startColumn),g=this.coordinatesConverter.getViewLineNumberOfModelPosition(l.range.endLineNumber,l.range.endColumn);n.accept(h,u.zIndex,f,g,d)}}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n.asArray}},{key:"_invalidateDecorationsColorCache",value:function(){var e=this.model.getOverviewRulerDecorations(),t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=a.options.overviewRuler;null==s||s.invalidateCachedColor();var l=a.options.minimap;null==l||l.invalidateCachedColor()}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"getValueInRange",value:function(e,t){var n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}},{key:"getValueLengthInRange",value:function(e,t){var n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(n,t)}},{key:"modifyPosition",value:function(e,t){var n=this.coordinatesConverter.convertViewPositionToModelPosition(e),i=this.model.modifyPosition(n,t);return this.coordinatesConverter.convertModelPositionToViewPosition(i)}},{key:"deduceModelPositionRelativeToViewPosition",value:function(e,t,n){var i=this.coordinatesConverter.convertViewPositionToModelPosition(e);2===this.model.getEOL().length&&(t<0?t-=n:t+=n);var r=this.model.getOffsetAt(i)+t;return this.model.getPositionAt(r)}},{key:"getPlainTextToCopy",value:function(e,t,n){var i=n?"\r\n":this.model.getEOL();e=e.slice(0),e.sort(hd.compareRangesUsingStarts);var r=!1,o=!1,a=!0,s=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){u.value.isEmpty()?r=!0:o=!0}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}if(!o){if(!t)return"";for(var d=e.map((function(e){return e.startLineNumber})),h="",f=0;f<d.length;f++)f>0&&d[f-1]===d[f]||(h+=this.model.getLineContent(d[f])+i);return h}if(r&&t){var g=[],v=0,p=!0,m=!1,y=void 0;try{for(var _,b=e[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){var k=_.value,w=k.startLineNumber;k.isEmpty()?w!==v&&g.push(this.model.getLineContent(w)):g.push(this.model.getValueInRange(k,n?2:0)),v=w}}catch(e){m=!0,y=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw y}}return 1===g.length?g[0]:g}var C=[],S=!0,x=!1,L=void 0;try{for(var D,N=e[Symbol.iterator]();!(S=(D=N.next()).done);S=!0){var I=D.value;I.isEmpty()||C.push(this.model.getValueInRange(I,n?2:0))}}catch(e){x=!0,L=e}finally{try{S||null==N.return||N.return()}finally{if(x)throw L}}return 1===C.length?C[0]:C}},{key:"getRichTextToCopy",value:function(e,t){var n=this.model.getLanguageId();if(n===kk)return null;if(1!==e.length)return null;var i=e[0];if(i.isEmpty()){if(!t)return null;var r=i.startLineNumber;i=new hd(r,this.model.getLineMinColumn(r),r,this.model.getLineMaxColumn(r))}var o,a=this._configuration.options.get(50),s=this._getColorMap();if(/[:;\\\/<>]/.test(a.fontFamily)||a.fontFamily===uu.fontFamily)o=uu.fontFamily;else{if(o=(o=a.fontFamily).replace(/"/g,"'"),!/[,']/.test(o))/[+ ]/.test(o)&&(o="'".concat(o,"'"));o="".concat(o,", ").concat(uu.fontFamily)}return{mode:n,html:'<div style="'+"color: ".concat(s[1],";")+"background-color: ".concat(s[2],";")+"font-family: ".concat(o,";")+"font-weight: ".concat(a.fontWeight,";")+"font-size: ".concat(a.fontSize,"px;")+"line-height: ".concat(a.lineHeight,"px;")+'white-space: pre;">'+this._getHTMLToCopy(i,s)+"</div>"}}},{key:"_getHTMLToCopy",value:function(e,t){for(var n=e.startLineNumber,i=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=this.getTabSize(),s="",l=n;l<=r;l++){var u=this.model.tokenization.getLineTokens(l),c=u.getLineContent(),d=l===n?i-1:0,h=l===r?o-1:c.length;s+=""===c?"<br>":iR(c,u.inflate(),t,d,h,a,ps)}return s}},{key:"_getColorMap",value:function(){var e=Rh.getColorMap(),t=["#000000"];if(e)for(var n=1,i=e.length;n<i;n++)t[n]=XC.Format.CSS.formatHex(e[n]);return t}},{key:"getPrimaryCursorState",value:function(){return this._cursor.getPrimaryCursorState()}},{key:"getLastAddedCursorIndex",value:function(){return this._cursor.getLastAddedCursorIndex()}},{key:"getCursorStates",value:function(){return this._cursor.getCursorStates()}},{key:"setCursorStates",value:function(e,t,n){var i=this;return this._withViewEventsCollector((function(r){return i._cursor.setStates(r,e,t,n)}))}},{key:"getCursorColumnSelectData",value:function(){return this._cursor.getCursorColumnSelectData()}},{key:"getCursorAutoClosedCharacters",value:function(){return this._cursor.getAutoClosedCharacters()}},{key:"setCursorColumnSelectData",value:function(e){this._cursor.setCursorColumnSelectData(e)}},{key:"getPrevEditOperationType",value:function(){return this._cursor.getPrevEditOperationType()}},{key:"setPrevEditOperationType",value:function(e){this._cursor.setPrevEditOperationType(e)}},{key:"getSelection",value:function(){return this._cursor.getSelection()}},{key:"getSelections",value:function(){return this._cursor.getSelections()}},{key:"getPosition",value:function(){return this._cursor.getPrimaryCursorState().modelState.position}},{key:"setSelections",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._withViewEventsCollector((function(r){return n._cursor.setSelections(r,e,t,i)}))}},{key:"saveCursorState",value:function(){return this._cursor.saveState()}},{key:"restoreCursorState",value:function(e){var t=this;this._withViewEventsCollector((function(n){return t._cursor.restoreState(n,e)}))}},{key:"_executeCursorEdit",value:function(e){this._cursor.context.cursorConfig.readOnly?this._eventDispatcher.emitOutgoingEvent(new a4):this._withViewEventsCollector(e)}},{key:"executeEdits",value:function(e,t,n){var i=this;this._executeCursorEdit((function(r){return i._cursor.executeEdits(r,e,t,n)}))}},{key:"startComposition",value:function(){var e=this;this._executeCursorEdit((function(t){return e._cursor.startComposition(t)}))}},{key:"endComposition",value:function(e){var t=this;this._executeCursorEdit((function(n){return t._cursor.endComposition(n,e)}))}},{key:"type",value:function(e,t){var n=this;this._executeCursorEdit((function(i){return n._cursor.type(i,e,t)}))}},{key:"compositionType",value:function(e,t,n,i,r){var o=this;this._executeCursorEdit((function(a){return o._cursor.compositionType(a,e,t,n,i,r)}))}},{key:"paste",value:function(e,t,n,i){var r=this;this._executeCursorEdit((function(o){return r._cursor.paste(o,e,t,n,i)}))}},{key:"cut",value:function(e){var t=this;this._executeCursorEdit((function(n){return t._cursor.cut(n,e)}))}},{key:"executeCommand",value:function(e,t){var n=this;this._executeCursorEdit((function(i){return n._cursor.executeCommand(i,e,t)}))}},{key:"executeCommands",value:function(e,t){var n=this;this._executeCursorEdit((function(i){return n._cursor.executeCommands(i,e,t)}))}},{key:"revealAllCursors",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._withViewEventsCollector((function(r){return n._cursor.revealAll(r,e,i,0,t,0)}))}},{key:"revealPrimaryCursor",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._withViewEventsCollector((function(r){return n._cursor.revealPrimary(r,e,i,0,t,0)}))}},{key:"revealTopMostCursor",value:function(e){var t=this._cursor.getTopMostViewPosition(),n=new hd(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector((function(t){return t.emitViewEvent(new q2(e,!1,n,null,0,!0,0))}))}},{key:"revealBottomMostCursor",value:function(e){var t=this._cursor.getBottomMostViewPosition(),n=new hd(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector((function(t){return t.emitViewEvent(new q2(e,!1,n,null,0,!0,0))}))}},{key:"revealRange",value:function(e,t,n,i,r){this._withViewEventsCollector((function(o){return o.emitViewEvent(new q2(e,!1,n,null,i,t,r))}))}},{key:"changeWhitespace",value:function(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new X2),this._eventDispatcher.emitOutgoingEvent(new i4))}},{key:"_withViewEventsCollector",value:function(e){var t=this;return this._transactionalTarget.batchChanges((function(){try{var n=t._eventDispatcher.beginEmitViewEvents();return e(n)}finally{t._eventDispatcher.endEmitViewEvents()}}))}},{key:"batchEvents",value:function(e){this._withViewEventsCollector((function(){e()}))}},{key:"normalizePosition",value:function(e,t){return this._lines.normalizePosition(e,t)}},{key:"getLineIndentColumn",value:function(e){return this._lines.getLineIndentColumn(e)}}]),t}(Ru),q4=function(){function e(t,n,i,r,o){u(this,e),this._model=t,this._viewLineNumber=n,this._isValid=i,this._modelTrackedRange=r,this._startLineDelta=o}return h(e,[{key:"viewLineNumber",get:function(){return this._viewLineNumber}},{key:"isValid",get:function(){return this._isValid}},{key:"modelTrackedRange",get:function(){return this._modelTrackedRange}},{key:"startLineDelta",get:function(){return this._startLineDelta}},{key:"dispose",value:function(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}},{key:"update",value:function(e,t){var n=e.coordinatesConverter.convertViewPositionToModelPosition(new dd(t,e.getLineMinColumn(t))),i=e.model._setTrackedRange(this._modelTrackedRange,new hd(n.lineNumber,n.column,n.lineNumber,n.column),1),r=e.viewLayout.getVerticalOffsetForLineNumber(t),o=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=i,this._startLineDelta=o-r}},{key:"invalidate",value:function(){this._isValid=!1}}],[{key:"create",value:function(t){var n=t._setTrackedRange(null,new hd(1,1,1,1),1);return new e(t,1,!1,n,0)}}]),e}(),G4=function(){function e(){u(this,e),this._asMap=Object.create(null),this.asArray=[]}return h(e,[{key:"accept",value:function(e,t,n,i,r){var o=this._asMap[e];if(o){var a=o.data,s=a[a.length-3],l=a[a.length-1];if(s===r&&l+1>=n)return void(i>l&&(a[a.length-1]=i));a.push(r,n,i)}else{var u=new qQ(e,t,[r,n,i]);this._asMap[e]=u,this.asArray.push(u)}}}]),e}(),Z4=function(){function e(){u(this,e),this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}return h(e,[{key:"setHiddenAreas",value:function(e,t){var n=this.hiddenAreas.get(e);n&&Y4(n,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}},{key:"getMergedRanges",value:function(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;var e=Array.from(this.hiddenAreas.values()).reduce((function(e,t){return function(e,t){var n=[],i=0,r=0;for(;i<e.length&&r<t.length;){var o=e[i],a=t[r];if(o.endLineNumber<a.startLineNumber-1)n.push(e[i++]);else if(a.endLineNumber<o.startLineNumber-1)n.push(t[r++]);else{var s=Math.min(o.startLineNumber,a.startLineNumber),l=Math.max(o.endLineNumber,a.endLineNumber);n.push(new hd(s,1,l,1)),i++,r++}}for(;i<e.length;)n.push(e[i++]);for(;r<t.length;)n.push(t[r++]);return n}(e,t)}),[]);return Y4(this.ranges,e)||(this.ranges=e),this.ranges}}]),e}();function Y4(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equalsRange(t[n]))return!1;return!0}var Q4,X4=function(){function e(t,n){u(this,e),this.viewportStartModelPosition=t,this.startLineDelta=n}return h(e,[{key:"recoverViewportStart",value:function(e,t){if(this.viewportStartModelPosition){var n=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),i=t.getVerticalOffsetForLineNumber(n.lineNumber);t.setScrollPosition({scrollTop:i+this.startLineDelta},1)}}}]),e}(),$4=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},J4=function(e,t){return function(n,i){t(n,i,e)}},e3=(wt=function(e){function t(e,n,i,r,o,a,c,d,h,f,g,v){var p,m;u(this,t),p=l(this,t),m=p,p.languageConfigurationService=g,p._deliveryQueue=new Yu,p._contributions=p._register(new _2),p._onDidDispose=p._register(new Zu),p.onDidDispose=p._onDidDispose.event,p._onDidChangeModelContent=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidChangeModelContent=p._onDidChangeModelContent.event,p._onDidChangeModelLanguage=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidChangeModelLanguage=p._onDidChangeModelLanguage.event,p._onDidChangeModelLanguageConfiguration=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidChangeModelLanguageConfiguration=p._onDidChangeModelLanguageConfiguration.event,p._onDidChangeModelOptions=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidChangeModelOptions=p._onDidChangeModelOptions.event,p._onDidChangeModelDecorations=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidChangeModelDecorations=p._onDidChangeModelDecorations.event,p._onDidChangeModelTokens=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidChangeModelTokens=p._onDidChangeModelTokens.event,p._onDidChangeConfiguration=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidChangeConfiguration=p._onDidChangeConfiguration.event,p._onWillChangeModel=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onWillChangeModel=p._onWillChangeModel.event,p._onDidChangeModel=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidChangeModel=p._onDidChangeModel.event,p._onDidChangeCursorPosition=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidChangeCursorPosition=p._onDidChangeCursorPosition.event,p._onDidChangeCursorSelection=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidChangeCursorSelection=p._onDidChangeCursorSelection.event,p._onDidAttemptReadOnlyEdit=p._register(new r3(p._contributions,p._deliveryQueue)),p.onDidAttemptReadOnlyEdit=p._onDidAttemptReadOnlyEdit.event,p._onDidLayoutChange=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidLayoutChange=p._onDidLayoutChange.event,p._editorTextFocus=p._register(new i3({deliveryQueue:p._deliveryQueue})),p.onDidFocusEditorText=p._editorTextFocus.onDidChangeToTrue,p.onDidBlurEditorText=p._editorTextFocus.onDidChangeToFalse,p._editorWidgetFocus=p._register(new i3({deliveryQueue:p._deliveryQueue})),p.onDidFocusEditorWidget=p._editorWidgetFocus.onDidChangeToTrue,p.onDidBlurEditorWidget=p._editorWidgetFocus.onDidChangeToFalse,p._onWillType=p._register(new r3(p._contributions,p._deliveryQueue)),p.onWillType=p._onWillType.event,p._onDidType=p._register(new r3(p._contributions,p._deliveryQueue)),p.onDidType=p._onDidType.event,p._onDidCompositionStart=p._register(new r3(p._contributions,p._deliveryQueue)),p.onDidCompositionStart=p._onDidCompositionStart.event,p._onDidCompositionEnd=p._register(new r3(p._contributions,p._deliveryQueue)),p.onDidCompositionEnd=p._onDidCompositionEnd.event,p._onDidPaste=p._register(new r3(p._contributions,p._deliveryQueue)),p.onDidPaste=p._onDidPaste.event,p._onMouseUp=p._register(new r3(p._contributions,p._deliveryQueue)),p.onMouseUp=p._onMouseUp.event,p._onMouseDown=p._register(new r3(p._contributions,p._deliveryQueue)),p.onMouseDown=p._onMouseDown.event,p._onMouseDrag=p._register(new r3(p._contributions,p._deliveryQueue)),p.onMouseDrag=p._onMouseDrag.event,p._onMouseDrop=p._register(new r3(p._contributions,p._deliveryQueue)),p.onMouseDrop=p._onMouseDrop.event,p._onMouseDropCanceled=p._register(new r3(p._contributions,p._deliveryQueue)),p.onMouseDropCanceled=p._onMouseDropCanceled.event,p._onDropIntoEditor=p._register(new r3(p._contributions,p._deliveryQueue)),p.onDropIntoEditor=p._onDropIntoEditor.event,p._onContextMenu=p._register(new r3(p._contributions,p._deliveryQueue)),p.onContextMenu=p._onContextMenu.event,p._onMouseMove=p._register(new r3(p._contributions,p._deliveryQueue)),p.onMouseMove=p._onMouseMove.event,p._onMouseLeave=p._register(new r3(p._contributions,p._deliveryQueue)),p.onMouseLeave=p._onMouseLeave.event,p._onMouseWheel=p._register(new r3(p._contributions,p._deliveryQueue)),p.onMouseWheel=p._onMouseWheel.event,p._onKeyUp=p._register(new r3(p._contributions,p._deliveryQueue)),p.onKeyUp=p._onKeyUp.event,p._onKeyDown=p._register(new r3(p._contributions,p._deliveryQueue)),p.onKeyDown=p._onKeyDown.event,p._onDidContentSizeChange=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidContentSizeChange=p._onDidContentSizeChange.event,p._onDidScrollChange=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidScrollChange=p._onDidScrollChange.event,p._onDidChangeViewZones=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidChangeViewZones=p._onDidChangeViewZones.event,p._onDidChangeHiddenAreas=p._register(new Zu({deliveryQueue:p._deliveryQueue})),p.onDidChangeHiddenAreas=p._onDidChangeHiddenAreas.event,p._updateCounter=0,p._onBeginUpdate=p._register(new Zu),p.onBeginUpdate=p._onBeginUpdate.event,p._onEndUpdate=p._register(new Zu),p.onEndUpdate=p._onEndUpdate.event,p._actions=new Map,p._bannerDomNode=null,p._dropIntoEditorDecorations=p.createDecorationsCollection(),o.willCreateCodeEditor();var y,b,k=_({},n);p._domElement=e,p._overflowWidgetsDomNode=k.overflowWidgetsDomNode,delete k.overflowWidgetsDomNode,p._id=++t3,p._decorationTypeKeysToIds={},p._decorationTypeSubtypes={},p._telemetryData=i.telemetryData,p._configuration=p._register(p._createConfiguration(i.isSimpleWidget||!1,null!==(y=i.contextMenuId)&&void 0!==y?y:i.isSimpleWidget?d_.SimpleEditorContext:d_.EditorContext,k,f)),p._register(p._configuration.onDidChange((function(e){p._onDidChangeConfiguration.fire(e);var t=p._configuration.options;if(e.hasChanged(146)){var n=t.get(146);p._onDidLayoutChange.fire(n)}}))),p._contextKeyService=p._register(c.createScoped(p._domElement)),p._notificationService=h,p._codeEditorService=o,p._commandService=a,p._themeService=d,p._register(new o3(p,p._contextKeyService)),p._register(new a3(p,p._contextKeyService,v)),p._instantiationService=p._register(r.createChild(new IY([Ky,p._contextKeyService]))),p._modelData=null,p._focusTracker=new s3(e,p._overflowWidgetsDomNode),p._register(p._focusTracker.onChange((function(){p._editorWidgetFocus.setValue(p._focusTracker.hasFocus())}))),p._contentWidgets={},p._overlayWidgets={},p._glyphMarginWidgets={},b=Array.isArray(i.contributions)?i.contributions:L_.getEditorContributions(),p._contributions.initialize(p,b,p._instantiationService);var w=!0,C=!1,S=void 0;try{for(var x,L=function(){var e,t=x.value;if(p._actions.has(t.id))return vu(new Error("Cannot have two actions with the same id ".concat(t.id))),"continue";var n=new b2(t.id,t.label,t.alias,t.metadata,null!==(e=t.precondition)&&void 0!==e?e:void 0,(function(e){return p._instantiationService.invokeFunction((function(n){return Promise.resolve(t.runEditorCommand(n,p,e))}))}),p._contextKeyService);p._actions.set(n.id,n)},D=L_.getEditorActions()[Symbol.iterator]();!(w=(x=D.next()).done);w=!0)L()}catch(e){C=!0,S=e}finally{try{w||null==D.return||D.return()}finally{if(C)throw S}}var N=function(){return!p._configuration.options.get(92)&&p._configuration.options.get(36).enabled};return p._register(new Sm(p._domElement,{onDragOver:function(e){if(N()){var t=p.getTargetAtClientPoint(e.clientX,e.clientY);(null==t?void 0:t.position)&&p.showDropIndicatorAt(t.position)}},onDrop:function(){var e=s((function(e){var t;return E(this,(function(n){return N()?(m.removeDropIndicator(),e.dataTransfer?((null==(t=m.getTargetAtClientPoint(e.clientX,e.clientY))?void 0:t.position)&&m._onDropIntoEditor.fire({position:t.position,event:e}),[2]):[2]):[2]}))}));return function(t){return e.apply(this,arguments)}}(),onDragLeave:function(){p.removeDropIndicator()},onDragEnd:function(){p.removeDropIndicator()}})),p._codeEditorService.addCodeEditor(p),p}return p(t,e),h(t,[{key:"isSimpleWidget",get:function(){return this._configuration.isSimpleWidget}},{key:"contextMenuId",get:function(){return this._configuration.contextMenuId}},{key:"writeScreenReaderContent",value:function(e){var t;null===(t=this._modelData)||void 0===t||t.view.writeScreenReaderContent(e)}},{key:"_createConfiguration",value:function(e,t,n,i){return new MX(e,t,n,this._domElement,i)}},{key:"getId",value:function(){return this.getEditorType()+":"+this._id}},{key:"getEditorType",value:function(){return wQ.ICodeEditor}},{key:"dispose",value:function(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),g(v(t.prototype),"dispose",this).call(this)}},{key:"invokeWithinContext",value:function(e){return this._instantiationService.invokeFunction(e)}},{key:"updateOptions",value:function(e){this._configuration.updateOptions(e||{})}},{key:"getOptions",value:function(){return this._configuration.options}},{key:"getOption",value:function(e){return this._configuration.options.get(e)}},{key:"getRawOptions",value:function(){return this._configuration.getRawOptions()}},{key:"getOverflowWidgetsDomNode",value:function(){return this._overflowWidgetsDomNode}},{key:"getConfiguredWordAtPosition",value:function(e){return this._modelData?xJ.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),e):null}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this._modelData)return"";var t=!(!e||!e.preserveBOM),n=0;return e&&e.lineEnding&&"\n"===e.lineEnding?n=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(n=2),this._modelData.model.getValue(n,t)}},{key:"setValue",value:function(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}},{key:"getModel",value:function(){return this._modelData?this._modelData.model:null}},{key:"setModel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var t;this._beginUpdate();var n=e;if(null===this._modelData&&null===n)return;if(this._modelData&&this._modelData.model===n)return;var i={oldModelUrl:(null===(t=this._modelData)||void 0===t?void 0:t.model.uri)||null,newModelUrl:(null==n?void 0:n.uri)||null};this._onWillChangeModel.fire(i);var r=this.hasTextFocus(),o=this._detachModel();this._attachModel(n),r&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(i),this._postDetachModelCleanup(o),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}},{key:"_removeDecorationTypes",value:function(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(var e in this._decorationTypeSubtypes){var t=this._decorationTypeSubtypes[e];for(var n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}},{key:"getVisibleRanges",value:function(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}},{key:"getVisibleRangesPlusViewportAboveBelow",value:function(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}},{key:"getWhitespaces",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}},{key:"getTopForLineNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?Q4._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}},{key:"getTopForPosition",value:function(e,t){return this._modelData?Q4._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}},{key:"getBottomForLineNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._modelData)return-1;var n=this._modelData.model.getLineMaxColumn(e);return Q4._getVerticalOffsetAfterPosition(this._modelData,e,n,t)}},{key:"setHiddenAreas",value:function(e,t){var n;null===(n=this._modelData)||void 0===n||n.viewModel.setHiddenAreas(e.map((function(e){return hd.lift(e)})),t)}},{key:"getVisibleColumnFromPosition",value:function(e){if(!this._modelData)return e.column;var t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return WB.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}},{key:"getPosition",value:function(){return this._modelData?this._modelData.viewModel.getPosition():null}},{key:"setPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this._modelData){if(!dd.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}},{key:"_sendRevealRange",value:function(e,t,n,i){if(this._modelData){if(!hd.isIRange(e))throw new Error("Invalid arguments");var r=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(r);this._modelData.viewModel.revealRange("api",n,o,t,i)}}},{key:"revealLine",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,0,t)}},{key:"revealLineInCenter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,1,t)}},{key:"revealLineInCenterIfOutsideViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,2,t)}},{key:"revealLineNearTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,5,t)}},{key:"_revealLine",value:function(e,t,n){if("number"!=typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new hd(e,1,e,1),t,!1,n)}},{key:"revealPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,0,!0,t)}},{key:"revealPositionInCenter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,1,!0,t)}},{key:"revealPositionInCenterIfOutsideViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,2,!0,t)}},{key:"revealPositionNearTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,5,!0,t)}},{key:"_revealPosition",value:function(e,t,n,i){if(!dd.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new hd(e.lineNumber,e.column,e.lineNumber,e.column),t,n,i)}},{key:"getSelection",value:function(){return this._modelData?this._modelData.viewModel.getSelection():null}},{key:"getSelections",value:function(){return this._modelData?this._modelData.viewModel.getSelections():null}},{key:"setSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",n=fd.isISelection(e),i=hd.isIRange(e);if(!n&&!i)throw new Error("Invalid arguments");if(n)this._setSelectionImpl(e,t);else if(i){var r={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(r,t)}}},{key:"_setSelectionImpl",value:function(e,t){if(this._modelData){var n=new fd(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[n])}}},{key:"revealLines",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,0,n)}},{key:"revealLinesInCenter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,1,n)}},{key:"revealLinesInCenterIfOutsideViewport",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,2,n)}},{key:"revealLinesNearTop",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,5,n)}},{key:"_revealLines",value:function(e,t,n,i){if("number"!=typeof e||"number"!=typeof t)throw new Error("Invalid arguments");this._sendRevealRange(new hd(e,1,t,1),n,!1,i)}},{key:"revealRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._revealRange(e,n?1:0,i,t)}},{key:"revealRangeInCenter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,1,!0,t)}},{key:"revealRangeInCenterIfOutsideViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,2,!0,t)}},{key:"revealRangeNearTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,5,!0,t)}},{key:"revealRangeNearTopIfOutsideViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,6,!0,t)}},{key:"revealRangeAtTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,3,!0,t)}},{key:"_revealRange",value:function(e,t,n,i){if(!hd.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(hd.lift(e),t,n,i)}},{key:"setSelections",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(var i=0,r=e.length;i<r;i++)if(!fd.isISelection(e[i]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}},{key:"getContentWidth",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}},{key:"getScrollWidth",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}},{key:"getScrollLeft",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}},{key:"getContentHeight",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}},{key:"getScrollHeight",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}},{key:"getScrollTop",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}},{key:"setScrollLeft",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!=typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}},{key:"setScrollTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!=typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}},{key:"setScrollPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}},{key:"hasPendingScrollAnimation",value:function(){return!!this._modelData&&this._modelData.viewModel.viewLayout.hasPendingScrollAnimation()}},{key:"saveViewState",value:function(){if(!this._modelData)return null;var e=this._contributions.saveViewState();return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}},{key:"restoreViewState",value:function(e){if(this._modelData&&this._modelData.hasRealView){var t=e;if(t&&t.cursorState&&t.viewState){var n=t.cursorState;Array.isArray(n)?n.length>0&&this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]),this._contributions.restoreViewState(t.contributionsState||{});var i=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(i)}}}},{key:"handleInitialized",value:function(){var e;null===(e=this._getViewModel())||void 0===e||e.visibleLinesStabilized()}},{key:"getContribution",value:function(e){return this._contributions.get(e)}},{key:"getActions",value:function(){return Array.from(this._actions.values())}},{key:"getSupportedActions",value:function(){var e=this.getActions();return e=e.filter((function(e){return e.isSupported()})),e}},{key:"getAction",value:function(e){return this._actions.get(e)||null}},{key:"trigger",value:function(e,t,n){n=n||{};try{switch(this._beginUpdate(),t){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":var i=n;return void this._type(e,i.text||"");case"replacePreviousChar":var r=n;return void this._compositionType(e,r.text||"",r.replaceCharCnt||0,0,0);case"compositionType":var o=n;return void this._compositionType(e,o.text||"",o.replacePrevCharCnt||0,o.replaceNextCharCnt||0,o.positionDelta||0);case"paste":var a=n;return void this._paste(e,a.text||"",a.pasteOnNewLine||!1,a.multicursorText||null,a.mode||null,a.clipboardEvent);case"cut":return void this._cut(e)}var s=this.getAction(t);if(s)return void Promise.resolve(s.run(n)).then(void 0,vu);if(!this._modelData)return;if(this._triggerEditorCommand(e,t,n))return;this._triggerCommand(t,n)}finally{this._endUpdate()}}},{key:"_triggerCommand",value:function(e,t){this._commandService.executeCommand(e,t)}},{key:"_startComposition",value:function(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}},{key:"_endComposition",value:function(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}},{key:"_type",value:function(e,t){this._modelData&&0!==t.length&&("keyboard"===e&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),"keyboard"===e&&this._onDidType.fire(t))}},{key:"_compositionType",value:function(e,t,n,i,r){this._modelData&&this._modelData.viewModel.compositionType(t,n,i,r,e)}},{key:"_paste",value:function(e,t,n,i,r,o){if(this._modelData){var a=this._modelData.viewModel,s=a.getSelection().getStartPosition();a.paste(t,n,i,e);var l=a.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({clipboardEvent:o,range:new hd(s.lineNumber,s.column,l.lineNumber,l.column),languageId:r})}}},{key:"_cut",value:function(e){this._modelData&&this._modelData.viewModel.cut(e)}},{key:"_triggerEditorCommand",value:function(e,t,n){var i=this,r=L_.getEditorCommand(t);return!!r&&((n=n||{}).source=e,this._instantiationService.invokeFunction((function(e){Promise.resolve(r.runEditorCommand(e,i,n)).then(void 0,vu)})),!0)}},{key:"_getViewModel",value:function(){return this._modelData?this._modelData.viewModel:null}},{key:"pushUndoStop",value:function(){return!!this._modelData&&(!this._configuration.options.get(92)&&(this._modelData.model.pushStackElement(),!0))}},{key:"popUndoStop",value:function(){return!!this._modelData&&(!this._configuration.options.get(92)&&(this._modelData.model.popStackElement(),!0))}},{key:"executeEdits",value:function(e,t,n){return!!this._modelData&&(!this._configuration.options.get(92)&&(i=n?Array.isArray(n)?function(){return n}:n:function(){return null},this._modelData.viewModel.executeEdits(e,t,i),!0));var i}},{key:"executeCommand",value:function(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}},{key:"executeCommands",value:function(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}},{key:"createDecorationsCollection",value:function(e){return new l3(this,e)}},{key:"changeDecorations",value:function(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}},{key:"getLineDecorations",value:function(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,Fl(this._configuration.options)):null}},{key:"getDecorationsInRange",value:function(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,Fl(this._configuration.options)):null}},{key:"deltaDecorations",value:function(e,t){return this._modelData?0===e.length&&0===t.length?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}},{key:"removeDecorations",value:function(e){this._modelData&&0!==e.length&&this._modelData.model.changeDecorations((function(t){t.deltaDecorations(e,[])}))}},{key:"removeDecorationsByType",value:function(e){var t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations((function(e){return e.deltaDecorations(t,[])})),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}},{key:"getLayoutInfo",value:function(){var e=this._configuration.options;return e.get(146)}},{key:"createOverviewRuler",value:function(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}},{key:"getContainerDomNode",value:function(){return this._domElement}},{key:"getDomNode",value:function(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}},{key:"delegateVerticalScrollbarPointerDown",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarPointerDown(e)}},{key:"delegateScrollFromMouseWheelEvent",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateScrollFromMouseWheelEvent(e)}},{key:"layout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._configuration.observeContainer(e),t||this.render()}},{key:"focus",value:function(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}},{key:"hasTextFocus",value:function(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}},{key:"hasWidgetFocus",value:function(){return this._focusTracker&&this._focusTracker.hasFocus()}},{key:"addContentWidget",value:function(e){var t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}},{key:"layoutContentWidget",value:function(e){var t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){var n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}},{key:"removeContentWidget",value:function(e){var t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){var n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}},{key:"addOverlayWidget",value:function(e){var t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}},{key:"layoutOverlayWidget",value:function(e){var t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){var n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}},{key:"removeOverlayWidget",value:function(e){var t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){var n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}},{key:"addGlyphMarginWidget",value:function(e){var t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}},{key:"layoutGlyphMarginWidget",value:function(e){var t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){var n=this._glyphMarginWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(n)}}},{key:"removeGlyphMarginWidget",value:function(e){var t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){var n=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(n)}}},{key:"changeViewZones",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}},{key:"getTargetAtClientPoint",value:function(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,t):null}},{key:"getScrolledVisiblePosition",value:function(e){if(!this._modelData||!this._modelData.hasRealView)return null;var t=this._modelData.model.validatePosition(e),n=this._configuration.options,i=n.get(146);return{top:Q4._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-this.getScrollLeft(),height:n.get(67)}}},{key:"getOffsetForColumn",value:function(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,t):-1}},{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._modelData&&this._modelData.hasRealView&&this._modelData.viewModel.batchEvents((function(){e._modelData.view.render(!0,t)}))}},{key:"setAriaOptions",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}},{key:"applyFontInfo",value:function(e){Om(e,this._configuration.options.get(50))}},{key:"setBanner",value:function(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}},{key:"_attachModel",value:function(e){var t=this;if(e){var n=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());var i=e.onBeforeAttached(),r=new K4(this._id,this._configuration,e,g2.create(ep(this._domElement)),k2.create(this._configuration.options),(function(e){return pp(ep(t._domElement),e)}),this.languageConfigurationService,this._themeService,i,{batchChanges:function(e){try{return t._beginUpdate(),e()}finally{t._endUpdate()}}});n.push(e.onWillDispose((function(){return t.setModel(null)}))),n.push(r.onEvent((function(n){switch(n.kind){case 0:t._onDidContentSizeChange.fire(n);break;case 1:t._editorTextFocus.setValue(n.hasFocus);break;case 2:t._onDidScrollChange.fire(n);break;case 3:t._onDidChangeViewZones.fire();break;case 4:t._onDidChangeHiddenAreas.fire();break;case 5:t._onDidAttemptReadOnlyEdit.fire();break;case 6:if(n.reachedMaxCursorCount){var i=Xa("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",t.getOption(80));t._notificationService.prompt(ix.Warning,i,[{label:"Find and Replace",run:function(){t._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:Xa("goToSetting","Increase Multi Cursor Limit"),run:function(){t._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}for(var r=[],o=0,a=n.selections.length;o<a;o++)r[o]=n.selections[o].getPosition();var s={position:r[0],secondaryPositions:r.slice(1),reason:n.reason,source:n.source};t._onDidChangeCursorPosition.fire(s);var l={selection:n.selections[0],secondarySelections:n.selections.slice(1),modelVersionId:n.modelVersionId,oldSelections:n.oldSelections,oldModelVersionId:n.oldModelVersionId,source:n.source,reason:n.reason};t._onDidChangeCursorSelection.fire(l);break;case 7:t._onDidChangeModelDecorations.fire(n.event);break;case 8:t._domElement.setAttribute("data-mode-id",e.getLanguageId()),t._onDidChangeModelLanguage.fire(n.event);break;case 9:t._onDidChangeModelLanguageConfiguration.fire(n.event);break;case 10:t._onDidChangeModelContent.fire(n.event);break;case 11:t._onDidChangeModelOptions.fire(n.event);break;case 12:t._onDidChangeModelTokens.fire(n.event)}})));var o=C(this._createView(r),2),a=o[0],s=o[1];if(s){this._domElement.appendChild(a.domNode.domNode);for(var l=Object.keys(this._contentWidgets),u=0,c=l.length;u<c;u++){var d=l[u];a.addContentWidget(this._contentWidgets[d])}for(var h=0,f=(l=Object.keys(this._overlayWidgets)).length;h<f;h++){var g=l[h];a.addOverlayWidget(this._overlayWidgets[g])}for(var v=0,p=(l=Object.keys(this._glyphMarginWidgets)).length;v<p;v++){var m=l[v];a.addGlyphMarginWidget(this._glyphMarginWidgets[m])}a.render(!1,!0),a.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new n3(e,r,a,s,n,i)}else this._modelData=null}},{key:"_createView",value:function(e){var t,n=this;t=this.isSimpleWidget?{paste:function(e,t,i,r){n._paste("keyboard",e,t,i,r)},type:function(e){n._type("keyboard",e)},compositionType:function(e,t,i,r){n._compositionType("keyboard",e,t,i,r)},startComposition:function(){n._startComposition()},endComposition:function(){n._endComposition("keyboard")},cut:function(){n._cut("keyboard")}}:{paste:function(e,t,i,r){var o={text:e,pasteOnNewLine:t,multicursorText:i,mode:r};n._commandService.executeCommand("paste",o)},type:function(e){var t={text:e};n._commandService.executeCommand("type",t)},compositionType:function(e,t,i,r){if(i||r){var o={text:e,replacePrevCharCnt:t,replaceNextCharCnt:i,positionDelta:r};n._commandService.executeCommand("compositionType",o)}else{var a={text:e,replaceCharCnt:t};n._commandService.executeCommand("replacePreviousChar",a)}},startComposition:function(){n._commandService.executeCommand("compositionStart",{})},endComposition:function(){n._commandService.executeCommand("compositionEnd",{})},cut:function(){n._commandService.executeCommand("cut",{})}};var i=new W0(e.coordinatesConverter);return i.onKeyDown=function(e){return n._onKeyDown.fire(e)},i.onKeyUp=function(e){return n._onKeyUp.fire(e)},i.onContextMenu=function(e){return n._onContextMenu.fire(e)},i.onMouseMove=function(e){return n._onMouseMove.fire(e)},i.onMouseLeave=function(e){return n._onMouseLeave.fire(e)},i.onMouseDown=function(e){return n._onMouseDown.fire(e)},i.onMouseUp=function(e){return n._onMouseUp.fire(e)},i.onMouseDrag=function(e){return n._onMouseDrag.fire(e)},i.onMouseDrop=function(e){return n._onMouseDrop.fire(e)},i.onMouseDropCanceled=function(e){return n._onMouseDropCanceled.fire(e)},i.onMouseWheel=function(e){return n._onMouseWheel.fire(e)},[new a2(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}},{key:"_postDetachModelCleanup",value:function(e){null==e||e.removeAllDecorationsWithOwnerId(this._id)}},{key:"_detachModel",value:function(){var e;if(null===(e=this._contributionsDisposable)||void 0===e||e.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;var t=this._modelData.model,n=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),n&&this._domElement.contains(n)&&n.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),t}},{key:"_removeDecorationType",value:function(e){this._codeEditorService.removeDecorationType(e)}},{key:"hasModel",value:function(){return null!==this._modelData}},{key:"showDropIndicatorAt",value:function(e){var t=[{range:new hd(e.lineNumber,e.column,e.lineNumber,e.column),options:Q4.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}},{key:"removeDropIndicator",value:function(){this._dropIntoEditorDecorations.clear()}},{key:"setContextValue",value:function(e,t){this._contextKeyService.createKey(e,t)}},{key:"_beginUpdate",value:function(){this._updateCounter++,1===this._updateCounter&&this._onBeginUpdate.fire()}},{key:"_endUpdate",value:function(){this._updateCounter--,0===this._updateCounter&&this._onEndUpdate.fire()}}],[{key:"_getVerticalOffsetAfterPosition",value:function(e,t,n,i){var r=e.model.validatePosition({lineNumber:t,column:n}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(o.lineNumber,i)}},{key:"_getVerticalOffsetForPosition",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.model.validatePosition({lineNumber:t,column:n}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber,i)}}]),t}(Ru),Q4=wt,wt.dropIntoEditorDecorationOptions=cU.register({description:"workbench-dnd-target",className:"dnd-target"}),wt);e3=Q4=$4([J4(3,Gm),J4(4,Ym),J4(5,ay),J4(6,Ky),J4(7,PS),J4(8,rx),J4(9,mR),J4(10,Ek),J4(11,wS)],e3);var t3=0,n3=function(){function e(t,n,i,r,o,a){u(this,e),this.model=t,this.viewModel=n,this.view=i,this.hasRealView=r,this.listenersToRemove=o,this.attachedView=a}return h(e,[{key:"dispose",value:function(){Iu(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}]),e}(),i3=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._emitterOptions=e,n._onDidChangeToTrue=n._register(new Zu(n._emitterOptions)),n.onDidChangeToTrue=n._onDidChangeToTrue.event,n._onDidChangeToFalse=n._register(new Zu(n._emitterOptions)),n.onDidChangeToFalse=n._onDidChangeToFalse.event,n._value=0,n}return p(t,e),h(t,[{key:"setValue",value:function(e){var t=e?2:1;this._value!==t&&(this._value=t,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}}]),t}(Ru),r3=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[{deliveryQueue:n}]))._contributions=e,i}return p(t,e),h(t,[{key:"fire",value:function(e){this._contributions.onBeforeInteractionEvent(),g(v(t.prototype),"fire",this).call(this,e)}}]),t}(Zu),o3=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._editor=e,n.createKey("editorId",e.getId()),i._editorSimpleInput=p0.editorSimpleInput.bindTo(n),i._editorFocus=p0.focus.bindTo(n),i._textInputFocus=p0.textInputFocus.bindTo(n),i._editorTextFocus=p0.editorTextFocus.bindTo(n),i._tabMovesFocus=p0.tabMovesFocus.bindTo(n),i._editorReadonly=p0.readOnly.bindTo(n),i._inDiffEditor=p0.inDiffEditor.bindTo(n),i._editorColumnSelection=p0.columnSelection.bindTo(n),i._hasMultipleSelections=p0.hasMultipleSelections.bindTo(n),i._hasNonEmptySelection=p0.hasNonEmptySelection.bindTo(n),i._canUndo=p0.canUndo.bindTo(n),i._canRedo=p0.canRedo.bindTo(n),i._register(i._editor.onDidChangeConfiguration((function(){return i._updateFromConfig()}))),i._register(i._editor.onDidChangeCursorSelection((function(){return i._updateFromSelection()}))),i._register(i._editor.onDidFocusEditorWidget((function(){return i._updateFromFocus()}))),i._register(i._editor.onDidBlurEditorWidget((function(){return i._updateFromFocus()}))),i._register(i._editor.onDidFocusEditorText((function(){return i._updateFromFocus()}))),i._register(i._editor.onDidBlurEditorText((function(){return i._updateFromFocus()}))),i._register(i._editor.onDidChangeModel((function(){return i._updateFromModel()}))),i._register(i._editor.onDidChangeConfiguration((function(){return i._updateFromModel()}))),i._register(NX.onDidChangeTabFocus((function(e){return i._tabMovesFocus.set(e)}))),i._updateFromConfig(),i._updateFromSelection(),i._updateFromFocus(),i._updateFromModel(),i._editorSimpleInput.set(i._editor.isSimpleWidget),i}return p(t,e),h(t,[{key:"_updateFromConfig",value:function(){var e=this._editor.getOptions();this._tabMovesFocus.set(NX.getTabFocusMode()),this._editorReadonly.set(e.get(92)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}},{key:"_updateFromSelection",value:function(){var e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some((function(e){return!e.isEmpty()})))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}},{key:"_updateFromFocus",value:function(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}},{key:"_updateFromModel",value:function(){var e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}]),t}(Ru),a3=function(e){function t(e,n,i){var r;u(this,t),(r=l(this,t))._editor=e,r._contextKeyService=n,r._languageFeaturesService=i,r._langId=p0.languageId.bindTo(n),r._hasCompletionItemProvider=p0.hasCompletionItemProvider.bindTo(n),r._hasCodeActionsProvider=p0.hasCodeActionsProvider.bindTo(n),r._hasCodeLensProvider=p0.hasCodeLensProvider.bindTo(n),r._hasDefinitionProvider=p0.hasDefinitionProvider.bindTo(n),r._hasDeclarationProvider=p0.hasDeclarationProvider.bindTo(n),r._hasImplementationProvider=p0.hasImplementationProvider.bindTo(n),r._hasTypeDefinitionProvider=p0.hasTypeDefinitionProvider.bindTo(n),r._hasHoverProvider=p0.hasHoverProvider.bindTo(n),r._hasDocumentHighlightProvider=p0.hasDocumentHighlightProvider.bindTo(n),r._hasDocumentSymbolProvider=p0.hasDocumentSymbolProvider.bindTo(n),r._hasReferenceProvider=p0.hasReferenceProvider.bindTo(n),r._hasRenameProvider=p0.hasRenameProvider.bindTo(n),r._hasSignatureHelpProvider=p0.hasSignatureHelpProvider.bindTo(n),r._hasInlayHintsProvider=p0.hasInlayHintsProvider.bindTo(n),r._hasDocumentFormattingProvider=p0.hasDocumentFormattingProvider.bindTo(n),r._hasDocumentSelectionFormattingProvider=p0.hasDocumentSelectionFormattingProvider.bindTo(n),r._hasMultipleDocumentFormattingProvider=p0.hasMultipleDocumentFormattingProvider.bindTo(n),r._hasMultipleDocumentSelectionFormattingProvider=p0.hasMultipleDocumentSelectionFormattingProvider.bindTo(n),r._isInEmbeddedEditor=p0.isInEmbeddedEditor.bindTo(n);var o=function(){return r._update()};return r._register(e.onDidChangeModel(o)),r._register(e.onDidChangeModelLanguage(o)),r._register(i.completionProvider.onDidChange(o)),r._register(i.codeActionProvider.onDidChange(o)),r._register(i.codeLensProvider.onDidChange(o)),r._register(i.definitionProvider.onDidChange(o)),r._register(i.declarationProvider.onDidChange(o)),r._register(i.implementationProvider.onDidChange(o)),r._register(i.typeDefinitionProvider.onDidChange(o)),r._register(i.hoverProvider.onDidChange(o)),r._register(i.documentHighlightProvider.onDidChange(o)),r._register(i.documentSymbolProvider.onDidChange(o)),r._register(i.referenceProvider.onDidChange(o)),r._register(i.renameProvider.onDidChange(o)),r._register(i.documentFormattingEditProvider.onDidChange(o)),r._register(i.documentRangeFormattingEditProvider.onDidChange(o)),r._register(i.signatureHelpProvider.onDidChange(o)),r._register(i.inlayHintsProvider.onDidChange(o)),o(),r}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}},{key:"reset",value:function(){var e=this;this._contextKeyService.bufferChangeEvents((function(){e._langId.reset(),e._hasCompletionItemProvider.reset(),e._hasCodeActionsProvider.reset(),e._hasCodeLensProvider.reset(),e._hasDefinitionProvider.reset(),e._hasDeclarationProvider.reset(),e._hasImplementationProvider.reset(),e._hasTypeDefinitionProvider.reset(),e._hasHoverProvider.reset(),e._hasDocumentHighlightProvider.reset(),e._hasDocumentSymbolProvider.reset(),e._hasReferenceProvider.reset(),e._hasRenameProvider.reset(),e._hasDocumentFormattingProvider.reset(),e._hasDocumentSelectionFormattingProvider.reset(),e._hasSignatureHelpProvider.reset(),e._isInEmbeddedEditor.reset()}))}},{key:"_update",value:function(){var e=this,t=this._editor.getModel();t?this._contextKeyService.bufferChangeEvents((function(){e._langId.set(t.getLanguageId()),e._hasCompletionItemProvider.set(e._languageFeaturesService.completionProvider.has(t)),e._hasCodeActionsProvider.set(e._languageFeaturesService.codeActionProvider.has(t)),e._hasCodeLensProvider.set(e._languageFeaturesService.codeLensProvider.has(t)),e._hasDefinitionProvider.set(e._languageFeaturesService.definitionProvider.has(t)),e._hasDeclarationProvider.set(e._languageFeaturesService.declarationProvider.has(t)),e._hasImplementationProvider.set(e._languageFeaturesService.implementationProvider.has(t)),e._hasTypeDefinitionProvider.set(e._languageFeaturesService.typeDefinitionProvider.has(t)),e._hasHoverProvider.set(e._languageFeaturesService.hoverProvider.has(t)),e._hasDocumentHighlightProvider.set(e._languageFeaturesService.documentHighlightProvider.has(t)),e._hasDocumentSymbolProvider.set(e._languageFeaturesService.documentSymbolProvider.has(t)),e._hasReferenceProvider.set(e._languageFeaturesService.referenceProvider.has(t)),e._hasRenameProvider.set(e._languageFeaturesService.renameProvider.has(t)),e._hasSignatureHelpProvider.set(e._languageFeaturesService.signatureHelpProvider.has(t)),e._hasInlayHintsProvider.set(e._languageFeaturesService.inlayHintsProvider.has(t)),e._hasDocumentFormattingProvider.set(e._languageFeaturesService.documentFormattingEditProvider.has(t)||e._languageFeaturesService.documentRangeFormattingEditProvider.has(t)),e._hasDocumentSelectionFormattingProvider.set(e._languageFeaturesService.documentRangeFormattingEditProvider.has(t)),e._hasMultipleDocumentFormattingProvider.set(e._languageFeaturesService.documentFormattingEditProvider.all(t).length+e._languageFeaturesService.documentRangeFormattingEditProvider.all(t).length>1),e._hasMultipleDocumentSelectionFormattingProvider.set(e._languageFeaturesService.documentRangeFormattingEditProvider.all(t).length>1),e._isInEmbeddedEditor.set(t.uri.scheme===Pv.walkThroughSnippet||t.uri.scheme===Pv.vscodeChatCodeBlock)})):this.reset()}}]),t}(Ru),s3=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._onChange=i._register(new Zu),i.onChange=i._onChange.event,i._hadFocus=void 0,i._hasDomElementFocus=!1,i._domFocusTracker=i._register(sm(e)),i._overflowWidgetsDomNodeHasFocus=!1,i._register(i._domFocusTracker.onDidFocus((function(){i._hasDomElementFocus=!0,i._update()}))),i._register(i._domFocusTracker.onDidBlur((function(){i._hasDomElementFocus=!1,i._update()}))),n&&(i._overflowWidgetsDomNode=i._register(sm(n)),i._register(i._overflowWidgetsDomNode.onDidFocus((function(){i._overflowWidgetsDomNodeHasFocus=!0,i._update()}))),i._register(i._overflowWidgetsDomNode.onDidBlur((function(){i._overflowWidgetsDomNodeHasFocus=!1,i._update()})))),i}return p(t,e),h(t,[{key:"_update",value:function(){var e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}},{key:"hasFocus",value:function(){var e;return null!==(e=this._hadFocus)&&void 0!==e&&e}}]),t}(Ru),l3=function(){function e(t,n){u(this,e),this._editor=t,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(n)&&n.length>0&&this.set(n)}return h(e,[{key:"length",get:function(){return this._decorationIds.length}},{key:"onDidChange",value:function(e,t,n){var i=this;return this._editor.onDidChangeModelDecorations((function(n){i._isChangingDecorations||e.call(t,n)}),n)}},{key:"getRange",value:function(e){return this._editor.hasModel()?e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e]):null}},{key:"getRanges",value:function(){if(!this._editor.hasModel())return[];var e=this._editor.getModel(),t=[],n=!0,i=!1,r=void 0;try{for(var o,a=this._decorationIds[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=e.getDecorationRange(s);l&&t.push(l)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}},{key:"has",value:function(e){return this._decorationIds.includes(e.id)}},{key:"clear",value:function(){0!==this._decorationIds.length&&this.set([])}},{key:"set",value:function(e){var t=this;try{this._isChangingDecorations=!0,this._editor.changeDecorations((function(n){t._decorationIds=n.deltaDecorations(t._decorationIds,e)}))}finally{this._isChangingDecorations=!1}return this._decorationIds}},{key:"append",value:function(e){var t=this,n=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations((function(i){n=i.deltaDecorations([],e),t._decorationIds=t._decorationIds.concat(n)}))}finally{this._isChangingDecorations=!1}return n}}]),e}(),u3=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),c3=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function d3(e){return u3+encodeURIComponent(e.toString())+c3}var h3=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),f3=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');VS((function(e,t){var n=e.getColor(aD);n&&t.addRule('.monaco-editor .squiggly-error { background: url("data:image/svg+xml,'.concat(d3(n),'") repeat-x bottom left; }'));var i=e.getColor(uD);i&&t.addRule('.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,'.concat(d3(i),'") repeat-x bottom left; }'));var r=e.getColor(dD);r&&t.addRule('.monaco-editor .squiggly-info { background: url("data:image/svg+xml,'.concat(d3(r),'") repeat-x bottom left; }'));var o=e.getColor(fD);o&&t.addRule('.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,'.concat(function(e){return h3+encodeURIComponent(e.toString())+f3}(o),'") no-repeat bottom left; }'));var a=e.getColor(lB);a&&t.addRule(".monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ".concat(a.rgba.a,"; }"))}));var g3=function(){function e(t,n,i,r,o){u(this,e),this._initialScrollTop=t,this._initialContentHeight=n,this._visiblePosition=i,this._visiblePositionScrollDelta=r,this._cursorPosition=o}return h(e,[{key:"restore",value:function(e){if((this._initialContentHeight!==e.getContentHeight()||this._initialScrollTop!==e.getScrollTop())&&this._visiblePosition){var t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}},{key:"restoreRelativeVerticalPositionOfCursor",value:function(e){if(this._initialContentHeight!==e.getContentHeight()||this._initialScrollTop!==e.getScrollTop()){var t=e.getPosition();if(this._cursorPosition&&t){var n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n,1)}}}}],[{key:"capture",value:function(t){if(0===t.getScrollTop()||t.hasPendingScrollAnimation())return new e(t.getScrollTop(),t.getContentHeight(),null,0,null);var n=null,i=0,r=t.getVisibleRanges();if(r.length>0){n=r[0].getStartPosition();var o=t.getTopForPosition(n.lineNumber,n.column);i=t.getScrollTop()-o}return new e(t.getScrollTop(),t.getContentHeight(),n,i,t.getPosition())}}]),e}();function v3(e,t){var n=new Tu,i=e.createDecorationsCollection();return n.add($P({debugName:function(){return"Apply decorations from ".concat(t.debugName)}},(function(e){var n=t.read(e);i.set(n)}))),n.add({dispose:function(){i.clear()}}),n}function p3(e,t){return e.appendChild(t),Mu((function(){t.remove()}))}var m3=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._automaticLayout=!1,i.elementSizeObserver=i._register(new wX(e,n)),i._width=BP(i,i.elementSizeObserver.getWidth()),i._height=BP(i,i.elementSizeObserver.getHeight()),i._register(i.elementSizeObserver.onDidChange((function(e){return TP((function(e){i._width.set(i.elementSizeObserver.getWidth(),e),i._height.set(i.elementSizeObserver.getHeight(),e)}))}))),i}return p(t,e),h(t,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"automaticLayout",get:function(){return this._automaticLayout}},{key:"observe",value:function(e){this.elementSizeObserver.observe(e)}},{key:"setAutomaticLayout",value:function(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}]),t}(Ru);function y3(e,t,n){var i=t.get(),r=i,o=i,a=BP("animatedValue",i),s=-1,l=void 0;function u(){var t=Date.now()-s;o=Math.floor(function(e,t,n,i){return e===i?t+n:n*(1-Math.pow(2,-10*e/i))+t}(t,r,i-r,300)),t<300?l=e.requestAnimationFrame(u):o=i,a.set(o,void 0)}return n.add(JP({createEmptyChangeSummary:function(){return{animate:!1}},handleChange:function(e,n){return e.didChange(t)&&(n.animate=n.animate||e.change),!0}},(function(n,a){void 0!==l&&(e.cancelAnimationFrame(l),l=void 0),r=o,i=t.read(n),s=Date.now()-(a.animate?0:300),u()}))),a}var _3=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._register(new k3(e,i)),r._register(w3(i,{height:n.actualHeight,top:n.actualTop})),r}return p(t,e),t}(Ru),b3=function(){function e(t,n){var i=this;u(this,e),this._afterLineNumber=t,this.heightInPx=n,this.domNode=document.createElement("div"),this._actualTop=BP(this,void 0),this._actualHeight=BP(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=function(e){i._actualTop.set(e,void 0)},this.onComputedHeight=function(e){i._actualHeight.set(e,void 0)}}return h(e,[{key:"afterLineNumber",get:function(){return this._afterLineNumber.get()}}]),e}(),k3=function(){function e(t,n){var i=this;u(this,e),this._editor=t,this._domElement=n,this._overlayWidgetId="managedOverlayWidget-".concat(e._counter++),this._overlayWidget={getId:function(){return i._overlayWidgetId},getDomNode:function(){return i._domElement},getPosition:function(){return null}},this._editor.addOverlayWidget(this._overlayWidget)}return h(e,[{key:"dispose",value:function(){this._editor.removeOverlayWidget(this._overlayWidget)}}]),e}();function w3(e,t){return XP((function(n){var i=!0,r=!1,o=void 0;try{for(var a,s=Object.entries(t)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=C(a.value,2),u=l[0],c=l[1];c&&"object"===(void 0===c?"undefined":L(c))&&"read"in c&&(c=c.read(n)),"number"==typeof c&&(c="".concat(c,"px")),u=u.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),e.style[u]=c}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}))}function C3(e,t,n,i){var r=new Tu,o=[];return r.add(eO((function(r,a){var s=t.read(r),l=new Map,u=new Map;n&&n(!0),e.changeViewZones((function(e){var t=!0,n=!1,r=void 0;try{for(var a,u=o[Symbol.iterator]();!(t=(a=u.next()).done);t=!0){var c=a.value;e.removeZone(c),null==i||i.delete(c)}}catch(e){n=!0,r=e}finally{try{t||null==u.return||u.return()}finally{if(n)throw r}}o.length=0;var d=!0,h=!1,f=void 0;try{for(var g,v=s[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value,m=e.addZone(p);p.setZoneId&&p.setZoneId(m),o.push(m),null==i||i.add(m),l.set(p,m)}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}})),n&&n(!1),a.add(JP({createEmptyChangeSummary:function(){return{zoneIds:[]}},handleChange:function(e,t){var n=u.get(e.changedObservable);return void 0!==n&&t.zoneIds.push(n),!0}},(function(t,i){var r=!0,o=!1,a=void 0;try{for(var c,d=s[Symbol.iterator]();!(r=(c=d.next()).done);r=!0){var h=c.value;h.onChange&&(u.set(h.onChange,l.get(h)),h.onChange.read(t))}}catch(e){o=!0,a=e}finally{try{r||null==d.return||d.return()}finally{if(o)throw a}}n&&n(!0),e.changeViewZones((function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=i.zoneIds[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;e.layoutZone(s)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}})),n&&n(!1)})))}))),r.add({dispose:function(){n&&n(!0),e.changeViewZones((function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=o[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;e.removeZone(s)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}})),null==i||i.clear(),n&&n(!1)}}),r}k3._counter=0;var S3=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this,!0)}}]),t}(rc);function x3(e,t){var n=Vw(t,(function(t){return t.original.startLineNumber<=e.lineNumber}));if(!n)return hd.fromPositions(e);if(n.original.endLineNumberExclusive<=e.lineNumber){var i=e.lineNumber-n.original.endLineNumberExclusive+n.modified.endLineNumberExclusive;return hd.fromPositions(new dd(i,e.column))}if(!n.innerChanges)return hd.fromPositions(new dd(n.modified.startLineNumber,1));var r=Vw(n.innerChanges,(function(t){return t.originalRange.getStartPosition().isBeforeOrEqual(e)}));if(!r){var o=e.lineNumber-n.original.startLineNumber+n.modified.startLineNumber;return hd.fromPositions(new dd(o,e.column))}if(r.originalRange.containsPosition(e))return r.modifiedRange;var a=function(e,t){return e.lineNumber===t.lineNumber?new Yw(0,t.column-e.column):new Yw(t.lineNumber-e.lineNumber,t.column-1)}(r.originalRange.getEndPosition(),e);return hd.fromPositions(a.addToPosition(r.modifiedRange.getEndPosition()))}var L3=function(){function e(){u(this,e)}return h(e,null,[{key:"create",value:function(e){return new D3(e,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}},{key:"createWithDisposable",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=new Tu;return i.add(t),i.add(e),new D3(e,i,n)}}]),e}(),D3=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t)).object=e,r._disposable=n,r._debugOwner=i,r._refCount=1,r._isDisposed=!1,r._owners=[],i&&r._addOwner(i),r}return p(t,e),h(t,[{key:"_addOwner",value:function(e){e&&this._owners.push(e)}},{key:"createNewRef",value:function(e){return this._refCount++,e&&this._addOwner(e),new N3(this,e)}},{key:"dispose",value:function(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}},{key:"_decreaseRefCount",value:function(e){if(this._refCount--,0===this._refCount&&this._disposable.dispose(),e){var t=this._owners.indexOf(e);-1!==t&&this._owners.splice(t,1)}}}]),t}(L3),N3=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._base=e,i._debugOwner=n,i._isDisposed=!1,i}return p(t,e),h(t,[{key:"object",get:function(){return this._base.object}},{key:"createNewRef",value:function(e){return this._base.createNewRef(e)}},{key:"dispose",value:function(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}]),t}(L3),I3=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},E3=function(e,t){return function(n,i){t(n,i,e)}},M3=IZ("diff-review-insert",bd.add,Xa("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),T3=IZ("diff-review-remove",bd.remove,Xa("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),R3=IZ("diff-review-close",bd.close,Xa("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer.")),A3=(Ct=function(e){function t(e,n,i,r,o,a,s,c,d){var h;return u(this,t),(h=l(this,t))._parentNode=e,h._visible=n,h._setVisible=i,h._canClose=r,h._width=o,h._height=a,h._diffs=s,h._models=c,h._instantiationService=d,h._state=GP(h,(function(e,t){var n=h._visible.read(e);if(h._parentNode.style.visibility=n?"visible":"hidden",!n)return null;var i=t.add(h._instantiationService.createInstance(P3,h._diffs,h._models,h._setVisible,h._canClose));return{model:i,view:t.add(h._instantiationService.createInstance(U3,h._parentNode,i,h._width,h._height,h._models))}})).recomputeInitiallyAndOnChange(h._store),h}return p(t,e),h(t,[{key:"next",value:function(){var e=this;TP((function(t){var n=e._visible.get();e._setVisible(!0,t),n&&e._state.get().model.nextGroup(t)}))}},{key:"prev",value:function(){var e=this;TP((function(t){e._setVisible(!0,t),e._state.get().model.previousGroup(t)}))}},{key:"close",value:function(){var e=this;TP((function(t){e._setVisible(!1,t)}))}}]),t}(Ru),Ct._ttPolicy=rb("diffReview",{createHTML:function(e){return e}}),Ct);A3=I3([E3(8,Gm)],A3);var P3=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t))._diffs=e,a._models=n,a._setVisible=i,a.canClose=r,a._accessibilitySignalService=o,a._groups=BP(a,[]),a._currentGroupIdx=BP(a,0),a._currentElementIdx=BP(a,0),a.groups=a._groups,a.currentGroup=a._currentGroupIdx.map((function(e,t){return a._groups.read(t)[e]})),a.currentGroupIndex=a._currentGroupIdx,a.currentElement=a._currentElementIdx.map((function(e,t){var n;return null===(n=a.currentGroup.read(t))||void 0===n?void 0:n.lines[e]})),a._register(XP((function(e){var t=a._diffs.read(e);if(t){var n=function(e,t,n){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=function(){var e=s.value,r=[];r.push(new B3);var o=new Gw(Math.max(1,e[0].original.startLineNumber-F3),Math.min(e[e.length-1].original.endLineNumberExclusive+F3,t+1)),a=new Gw(Math.max(1,e[0].modified.startLineNumber-F3),Math.min(e[e.length-1].modified.endLineNumberExclusive+F3,n+1));oa(e,(function(e,t){var n=new Gw(e?e.original.endLineNumberExclusive:o.startLineNumber,t?t.original.startLineNumber:o.endLineNumberExclusive),i=new Gw(e?e.modified.endLineNumberExclusive:a.startLineNumber,t?t.modified.startLineNumber:a.endLineNumberExclusive);n.forEach((function(e){r.push(new z3(e,i.startLineNumber+(e-n.startLineNumber)))})),t&&(t.original.forEach((function(e){r.push(new H3(t,e))})),t.modified.forEach((function(e){r.push(new V3(t,e))})))}));var l=e[0].modified.join(e[e.length-1].modified),u=e[0].original.join(e[e.length-1].original);i.push(new W3(new nC(l,u),r))},u=ra(e,(function(e,t){return t.modified.startLineNumber-e.modified.endLineNumberExclusive<2*F3}))[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)l()}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return i}(t,a._models.getOriginalModel().getLineCount(),a._models.getModifiedModel().getLineCount());TP((function(e){var t=a._models.getModifiedPosition();if(t){var i=n.findIndex((function(e){return(null==t?void 0:t.lineNumber)<e.range.modified.endLineNumberExclusive}));-1!==i&&a._currentGroupIdx.set(i,e)}a._groups.set(n,e)}))}else a._groups.set([],void 0)}))),a._register(XP((function(e){var t=a.currentElement.read(e);(null==t?void 0:t.type)===O3.Deleted?a._accessibilitySignalService.playSignal(VY.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(null==t?void 0:t.type)===O3.Added&&a._accessibilitySignalService.playSignal(VY.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})}))),a._register(XP((function(e){var t=a.currentElement.read(e);if(t&&t.type!==O3.Header){var n,i=null!==(n=t.modifiedLineNumber)&&void 0!==n?n:t.diff.modified.startLineNumber;a._models.modifiedSetSelection(hd.fromPositions(new dd(i,1)))}}))),a}return p(t,e),h(t,[{key:"_goToGroupDelta",value:function(e,t){var n=this,i=this.groups.get();!i||i.length<=1||FP(t,(function(t){n._currentGroupIdx.set(Bw.ofLength(i.length).clipCyclic(n._currentGroupIdx.get()+e),t),n._currentElementIdx.set(0,t)}))}},{key:"nextGroup",value:function(e){this._goToGroupDelta(1,e)}},{key:"previousGroup",value:function(e){this._goToGroupDelta(-1,e)}},{key:"_goToLineDelta",value:function(e){var t=this,n=this.currentGroup.get();!n||n.lines.length<=1||TP((function(i){t._currentElementIdx.set(Bw.ofLength(n.lines.length).clip(t._currentElementIdx.get()+e),i)}))}},{key:"goToNextLine",value:function(){this._goToLineDelta(1)}},{key:"goToPreviousLine",value:function(){this._goToLineDelta(-1)}},{key:"goToLine",value:function(e){var t=this,n=this.currentGroup.get();if(n){var i=n.lines.indexOf(e);-1!==i&&TP((function(e){t._currentElementIdx.set(i,e)}))}}},{key:"revealCurrentElementInEditor",value:function(){if(this.canClose.get()){this._setVisible(!1,void 0);var e=this.currentElement.get();e&&(e.type===O3.Deleted?this._models.originalReveal(hd.fromPositions(new dd(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==O3.Header?hd.fromPositions(new dd(e.modifiedLineNumber,1)):void 0))}}},{key:"close",value:function(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}}]),t}(Ru);P3=I3([E3(4,WY)],P3);var O3,F3=3;!function(e){e[e.Header=0]="Header",e[e.Unchanged=1]="Unchanged",e[e.Deleted=2]="Deleted",e[e.Added=3]="Added"}(O3||(O3={}));var W3=function e(t,n){u(this,e),this.range=t,this.lines=n},B3=function e(){u(this,e),this.type=O3.Header},H3=function e(t,n){u(this,e),this.diff=t,this.originalLineNumber=n,this.type=O3.Deleted,this.modifiedLineNumber=void 0},V3=function e(t,n){u(this,e),this.diff=t,this.modifiedLineNumber=n,this.type=O3.Added,this.originalLineNumber=void 0},z3=function e(t,n){u(this,e),this.originalLineNumber=t,this.modifiedLineNumber=n,this.type=O3.Unchanged},U3=function(e){function t(e,n,i,r,o,a){var c;u(this,t),(c=l(this,t))._element=e,c._model=n,c._width=i,c._height=r,c._models=o,c._languageService=a,c.domNode=c._element,c.domNode.className="monaco-component diff-review monaco-editor-background";var d=document.createElement("div");return d.className="diff-review-actions",c._actionBar=c._register(new dW(d)),c._register(XP((function(e){c._actionBar.clear(),c._model.canClose.read(e)&&c._actionBar.push(new $m("diffreview.close",Xa("label.close","Close"),"close-diff-review "+ny.asClassName(R3),!0,s((function(){return E(this,(function(e){return[2,n.close()]}))}))),{label:!1,icon:!0})}))),c._content=document.createElement("div"),c._content.className="diff-review-content",c._content.setAttribute("role","code"),c._scrollbar=c._register(new yE(c._content,{})),cm(c.domNode,c._scrollbar.getDomNode(),d),c._register(XP((function(e){c._height.read(e),c._width.read(e),c._scrollbar.scanDomNode()}))),c._register(Mu((function(){cm(c.domNode)}))),c._register(w3(c.domNode,{width:c._width,height:c._height})),c._register(w3(c._content,{width:c._width,height:c._height})),c._register(eO((function(e,t){c._model.currentGroup.read(e),c._render(t)}))),c._register(hp(c.domNode,"keydown",(function(e){(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),c._model.goToNextLine()),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),c._model.goToPreviousLine()),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),c._model.close()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),c._model.revealCurrentElementInEditor())}))),c}return p(t,e),h(t,[{key:"_render",value:function(e){var t=this,n=this._models.getOriginalOptions(),i=this._models.getModifiedOptions(),r=document.createElement("div");r.className="diff-review-table",r.setAttribute("role","list"),r.setAttribute("aria-label",Xa("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),Om(r,i.get(50)),cm(this._content,r);var o=this._models.getOriginalModel(),a=this._models.getModifiedModel();if(o&&a){var s=o.getOptions(),l=a.getOptions(),u=i.get(67),c=this._model.currentGroup.get(),d=!0,h=!1,f=void 0;try{for(var g,v,p=function(){var d=v.value;if(!c)return"break";var h=void 0;if(d.type===O3.Header){var f=document.createElement("div");f.className="diff-review-row",f.setAttribute("role","listitem");var p=c.range,m=g._model.currentGroupIndex.get(),y=g._model.groups.get().length,_=function(e){return 0===e?Xa("no_lines_changed","no lines changed"):1===e?Xa("one_line_changed","1 line changed"):Xa("more_lines_changed","{0} lines changed",e)},b=_(p.original.length),k=_(p.modified.length);f.setAttribute("aria-label",Xa({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",m+1,y,p.original.startLineNumber,b,p.modified.startLineNumber,k));var w=document.createElement("div");w.className="diff-review-cell diff-review-summary",w.appendChild(document.createTextNode("".concat(m+1,"/").concat(y,": @@ -").concat(p.original.startLineNumber,",").concat(p.original.length," +").concat(p.modified.startLineNumber,",").concat(p.modified.length," @@"))),f.appendChild(w),h=f}else h=g._createRow(d,u,g._width.get(),n,o,s,i,a,l);r.appendChild(h);var C=UP((function(e){return t._model.currentElement.read(e)===d}));e.add(XP((function(e){var t=C.read(e);h.tabIndex=t?0:-1,t&&h.focus()}))),e.add(cp(h,"focus",(function(){t._model.goToLine(d)})))},m=((null==c?void 0:c.lines)||[])[Symbol.iterator]();!(d=(v=m.next()).done);d=!0){if("break"===(g=this,p()))break}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}this._scrollbar.scanDomNode()}}},{key:"_createRow",value:function(e,t,n,i,r,o,a,s,l){var u=i.get(146),c=u.glyphMarginWidth+u.lineNumbersWidth,d=a.get(146),h=10+d.glyphMarginWidth+d.lineNumbersWidth,f="diff-review-row",g="",v=null;switch(e.type){case O3.Added:f="diff-review-row line-insert",g=" char-insert",v=M3;break;case O3.Deleted:f="diff-review-row line-delete",g=" char-delete",v=T3}var p=document.createElement("div");p.style.minWidth=n+"px",p.className=f,p.setAttribute("role","listitem"),p.ariaLevel="";var m=document.createElement("div");m.className="diff-review-cell",m.style.height="".concat(t,"px"),p.appendChild(m);var y=document.createElement("span");y.style.width=c+"px",y.style.minWidth=c+"px",y.className="diff-review-line-number"+g,void 0!==e.originalLineNumber?y.appendChild(document.createTextNode(String(e.originalLineNumber))):y.innerText=" ",m.appendChild(y);var _=document.createElement("span");_.style.width=h+"px",_.style.minWidth=h+"px",_.style.paddingRight="10px",_.className="diff-review-line-number"+g,void 0!==e.modifiedLineNumber?_.appendChild(document.createTextNode(String(e.modifiedLineNumber))):_.innerText=" ",m.appendChild(_);var b,k=document.createElement("span");if(k.className="diff-review-spacer",v){var w=document.createElement("span");w.className=ny.asClassName(v),w.innerText="  ",k.appendChild(w)}else k.innerText="  ";if(m.appendChild(k),void 0!==e.modifiedLineNumber){var C=this._getLineHtml(s,a,l.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);A3._ttPolicy&&(C=A3._ttPolicy.createHTML(C)),m.insertAdjacentHTML("beforeend",C),b=s.getLineContent(e.modifiedLineNumber)}else{var S=this._getLineHtml(r,i,o.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);A3._ttPolicy&&(S=A3._ttPolicy.createHTML(S)),m.insertAdjacentHTML("beforeend",S),b=r.getLineContent(e.originalLineNumber)}0===b.length&&(b=Xa("blankLine","blank"));var x="";switch(e.type){case O3.Unchanged:x=e.originalLineNumber===e.modifiedLineNumber?Xa({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",b,e.originalLineNumber):Xa("equalLine","{0} original line {1} modified line {2}",b,e.originalLineNumber,e.modifiedLineNumber);break;case O3.Added:x=Xa("insertLine","+ {0} modified line {1}",b,e.modifiedLineNumber);break;case O3.Deleted:x=Xa("deleteLine","- {0} original line {1}",b,e.originalLineNumber)}return p.setAttribute("aria-label",x),p}},{key:"_getLineHtml",value:function(e,t,n,i,r){var o=e.getLineContent(i),a=t.get(50),s=YT.createEmpty(o,r),l=zQ.isBasicASCII(o,e.mightContainNonBasicASCII()),u=zQ.containsRTL(o,l,e.mightContainRTL());return PQ(new IQ(a.isMonospace&&!t.get(33),a.canUseHalfwidthRightwardsArrow,o,!1,l,u,0,s,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(118),t.get(100),t.get(95),t.get(51)!==vl.OFF,null)).html}}]),t}(Ru);U3=I3([E3(5,Jb)],U3);var j3=function(){function e(t){u(this,e),this.editors=t}return h(e,[{key:"getOriginalModel",value:function(){return this.editors.original.getModel()}},{key:"getOriginalOptions",value:function(){return this.editors.original.getOptions()}},{key:"originalReveal",value:function(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}},{key:"getModifiedModel",value:function(){return this.editors.modified.getModel()}},{key:"getModifiedOptions",value:function(){return this.editors.modified.getOptions()}},{key:"modifiedReveal",value:function(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}},{key:"modifiedSetSelection",value:function(e){this.editors.modified.setSelection(e)}},{key:"modifiedFocus",value:function(){this.editors.modified.focus()}},{key:"getModifiedPosition",value:function(){var e;return null!==(e=this.editors.modified.getPosition())&&void 0!==e?e:void 0}}]),e}();TL("diffEditor.move.border","#8b8b8b9c",Xa("diffEditor.move.border","The border color for text that got moved in the diff editor.")),TL("diffEditor.moveActive.border","#FFA500",Xa("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor.")),TL("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},Xa("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));var K3,q3=IZ("diff-insert",bd.add,Xa("diffInsertIcon","Line decoration for inserts in the diff editor.")),G3=IZ("diff-remove",bd.remove,Xa("diffRemoveIcon","Line decoration for removals in the diff editor.")),Z3=cU.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+ny.asClassName(q3),marginClassName:"gutter-insert"}),Y3=cU.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+ny.asClassName(G3),marginClassName:"gutter-delete"}),Q3=cU.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),X3=cU.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),$3=cU.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),J3=cU.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),e5=cU.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),t5=cU.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),n5=cU.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),i5=cU.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"}),r5=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o5=function(e,t){return function(n,i){t(n,i,e)}},a5=Zm("diffProviderFactoryService"),s5=function(){function e(t){u(this,e),this.instantiationService=t}return h(e,[{key:"createDiffProvider",value:function(e){return this.instantiationService.createInstance(l5,e)}}]),e}();nk(a5,s5=r5([o5(0,Gm)],s5),1);var l5=(St=function(){function e(t,n,i){u(this,e),this.editorWorkerService=n,this.telemetryService=i,this.onDidChangeEventEmitter=new Zu,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(t)}return h(e,[{key:"dispose",value:function(){var e;null===(e=this.diffAlgorithmOnDidChangeSubscription)||void 0===e||e.dispose()}},{key:"computeDiff",value:function(e,t,n,i){var r=this;return s((function(){var o,a,s,l,u,c,d,h;return E(this,(function(f){switch(f.label){case 0:return"string"!=typeof r.diffAlgorithm?[2,r.diffAlgorithm.computeDiff(e,t,n,i)]:e.isDisposed()||t.isDisposed()?[2,{changes:[],identical:!0,quitEarly:!1,moves:[]}]:1===e.getLineCount()&&1===e.getLineMaxColumn(1)?1===t.getLineCount()&&1===t.getLineMaxColumn(1)?[2,{changes:[],identical:!0,quitEarly:!1,moves:[]}]:[2,{changes:[new oC(new Gw(1,2),new Gw(1,t.getLineCount()+1),[new aC(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]}]:(o=JSON.stringify([e.uri.toString(),t.uri.toString()]),a=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(n)]),(s=K3.diffCache.get(o))&&s.context===a?[2,s.result]:(l=Hu.create(),[4,r.editorWorkerService.computeDiff(e.uri,t.uri,n,r.diffAlgorithm)]));case 1:if(u=f.sent(),c=l.elapsed(),r.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:c,timedOut:null===(d=null==u?void 0:u.quitEarly)||void 0===d||d,detectedMoves:n.computeMoves?null!==(h=null==u?void 0:u.moves.length)&&void 0!==h?h:0:-1}),i.isCancellationRequested)return[2,{changes:[],identical:!1,quitEarly:!0,moves:[]}];if(!u)throw new Error("no diff result available");return K3.diffCache.size>10&&K3.diffCache.delete(K3.diffCache.keys().next().value),K3.diffCache.set(o,{result:u,context:a}),[2,u]}}))}))()}},{key:"setOptions",value:function(e){var t,n=this,i=!1;e.diffAlgorithm&&(this.diffAlgorithm!==e.diffAlgorithm&&(null===(t=this.diffAlgorithmOnDidChangeSubscription)||void 0===t||t.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,"string"!=typeof e.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange((function(){return n.onDidChangeEventEmitter.fire()}))),i=!0));i&&this.onDidChangeEventEmitter.fire()}}]),e}(),K3=St,St.diffCache=new Map,St);function u5(){return wc&&!!wc.VSCODE_DEV}function c5(e){if(u5()){var t=function(){d5||(d5=new Set);var e=globalThis;e.$hotReload_applyNewExports||(e.$hotReload_applyNewExports=function(e){var t=_({config:{mode:void 0}},e),n=[],i=!0,r=!1,o=void 0;try{for(var a,s=d5[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=(0,a.value)(t);l&&n.push(l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}if(n.length>0)return function(e){var t=!1,i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){(0,a.value)(e)&&(t=!0)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return t}});return d5}();return t.add(e),{dispose:function(){t.delete(e)}}}return{dispose:function(){}}}l5=K3=r5([o5(1,TW),o5(2,b_)],l5);var d5=void 0;function h5(e,t){return function(e,t){if(u5()){var n=aO("reload",(function(t){return c5((function(n){var i=n.oldExports;if(x(Object.values(i)).some((function(t){return e.includes(t)})))return function(e){return t(void 0),!0}}))}));n.read(t)}}([e],t),e}u5()&&c5((function(e){var t=e.oldExports;e.newSrc;if("patch-prototype"===e.config.mode)return function(e){for(var n in e){var i=e[n];if(console.log("[hot-reload] Patching prototype methods of '".concat(n,"'"),{exportedItem:i}),"function"==typeof i&&i.prototype){var r=t[n];if(r){var o=!0,a=!1,s=void 0;try{for(var l,u=Object.getOwnPropertyNames(i.prototype)[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c,d,h=l.value,f=Object.getOwnPropertyDescriptor(i.prototype,h),g=Object.getOwnPropertyDescriptor(r.prototype,h);(null==f||null===(c=f.value)||void 0===c?void 0:c.toString())!==(null==g||null===(d=g.value)||void 0===d?void 0:d.toString())&&console.log("[hot-reload] Patching prototype method '".concat(n,".").concat(h,"'")),Object.defineProperty(r.prototype,h,f)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}e[n]=r}}}return!0}}));var f5=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},g5=function(e,t){return function(n,i){t(n,i,e)}},v5=function(e){function t(e,n,i){var r,o;u(this,t),r=l(this,t),o=r,r.model=e,r._options=n,r._diffProviderFactoryService=i,r._isDiffUpToDate=BP(r,!1),r.isDiffUpToDate=r._isDiffUpToDate,r._diff=BP(r,void 0),r.diff=r._diff,r._unchangedRegions=BP(r,void 0),r.unchangedRegions=UP(r,(function(e){var t,n;return r._options.hideUnchangedRegions.read(e)?null!==(n=null===(t=r._unchangedRegions.read(e))||void 0===t?void 0:t.regions)&&void 0!==n?n:[]:(TP((function(e){var t,n=!0,i=!1,o=void 0;try{for(var a,s=((null===(t=r._unchangedRegions.get())||void 0===t?void 0:t.regions)||[])[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){a.value.collapseAll(e)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}})),[])})),r.movedTextToCompare=BP(r,void 0),r._activeMovedText=BP(r,void 0),r._hoveredMovedText=BP(r,void 0),r.activeMovedText=UP(r,(function(e){var t,n;return null!==(n=null!==(t=r.movedTextToCompare.read(e))&&void 0!==t?t:r._hoveredMovedText.read(e))&&void 0!==n?n:r._activeMovedText.read(e)})),r._cancellationTokenSource=new rc,r._diffProvider=UP(r,(function(e){var t=r._diffProviderFactoryService.createDiffProvider({diffAlgorithm:r._options.diffAlgorithm.read(e)});return{diffProvider:t,onChangeSignal:aO("onDidChange",t.onDidChange)}})),r._register(Mu((function(){return r._cancellationTokenSource.cancel()})));var a=lO("contentChangedSignal"),c=r._register(new Sg((function(){return a.trigger(void 0)}),200));r._register(XP((function(t){var n=r._unchangedRegions.read(t);if(n&&!n.regions.some((function(e){return e.isDragged.read(t)}))){var i=n.originalDecorationIds.map((function(t){return e.original.getDecorationRange(t)})).map((function(e){return e?Gw.fromRangeInclusive(e):void 0})),o=n.modifiedDecorationIds.map((function(t){return e.modified.getDecorationRange(t)})).map((function(e){return e?Gw.fromRangeInclusive(e):void 0})),a=n.regions.map((function(e,n){return i[n]&&o[n]?new y5(i[n].startLineNumber,o[n].startLineNumber,i[n].length,e.visibleLineCountTop.read(t),e.visibleLineCountBottom.read(t)):void 0})).filter(Aa),s=[],l=!1,u=!0,c=!1,d=void 0;try{for(var h,f=ra(a,(function(e,n){return e.getHiddenModifiedRange(t).endLineNumberExclusive===n.getHiddenModifiedRange(t).startLineNumber}))[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;if(g.length>1){l=!0;var v=g.reduce((function(e,t){return e+t.lineCount}),0),p=new y5(g[0].originalLineNumber,g[0].modifiedLineNumber,v,g[0].visibleLineCountTop.get(),g[g.length-1].visibleLineCountBottom.get());s.push(p)}else s.push(g[0])}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}if(l){var m=e.original.deltaDecorations(n.originalDecorationIds,s.map((function(e){return{range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}}))),y=e.modified.deltaDecorations(n.modifiedDecorationIds,s.map((function(e){return{range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}})));TP((function(e){r._unchangedRegions.set({regions:s,originalDecorationIds:m,modifiedDecorationIds:y},e)}))}}})));var d=function(t,n,i){var o=y5.fromDiffs(t.changes,e.original.getLineCount(),e.modified.getLineCount(),r._options.hideUnchangedRegionsMinimumLineCount.read(i),r._options.hideUnchangedRegionsContextLineCount.read(i)),a=void 0,s=r._unchangedRegions.get();if(s){var l=s.originalDecorationIds.map((function(t){return e.original.getDecorationRange(t)})).map((function(e){return e?Gw.fromRangeInclusive(e):void 0})),u=s.modifiedDecorationIds.map((function(t){return e.modified.getDecorationRange(t)})).map((function(e){return e?Gw.fromRangeInclusive(e):void 0})),c=function(e,t){var n;return e.filter((function(e){var i=t(e,n);return n=e,i}))}(s.regions.map((function(e,t){if(l[t]&&u[t]){var n=l[t].length;return new y5(l[t].startLineNumber,u[t].startLineNumber,n,Math.min(e.visibleLineCountTop.get(),n),Math.min(e.visibleLineCountBottom.get(),n-e.visibleLineCountTop.get()))}})).filter(Aa),(function(e,t){return!t||e.modifiedLineNumber>=t.modifiedLineNumber+t.lineCount&&e.originalLineNumber>=t.originalLineNumber+t.lineCount})),d=c.map((function(e){return new nC(e.getHiddenOriginalRange(i),e.getHiddenModifiedRange(i))}));d=nC.clip(d,Gw.ofLength(1,e.original.getLineCount()),Gw.ofLength(1,e.modified.getLineCount())),a=nC.inverse(d,e.original.getLineCount(),e.modified.getLineCount())}var h=[];if(a){var f=!0,g=!1,v=void 0;try{for(var p,m=function(){var e,t=p.value,i=a.filter((function(e){return e.original.intersectsStrict(t.originalUnchangedRange)&&e.modified.intersectsStrict(t.modifiedUnchangedRange)}));(e=h).push.apply(e,x(t.setVisibleRanges(i,n)))},y=o[Symbol.iterator]();!(f=(p=y.next()).done);f=!0)m()}catch(e){g=!0,v=e}finally{try{f||null==y.return||y.return()}finally{if(g)throw v}}}else{var _;(_=h).push.apply(_,x(o))}var b=e.original.deltaDecorations((null==s?void 0:s.originalDecorationIds)||[],h.map((function(e){return{range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}}))),k=e.modified.deltaDecorations((null==s?void 0:s.modifiedDecorationIds)||[],h.map((function(e){return{range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}})));r._unchangedRegions.set({regions:h,originalDecorationIds:b,modifiedDecorationIds:k},n)};return r._register(e.modified.onDidChangeContent((function(t){if(r._diff.get()){var n=nH.fromModelContentChanges(t.changes);b5(r._lastDiff,n,e.original,e.modified)}r._isDiffUpToDate.set(!1,void 0),c.schedule()}))),r._register(e.original.onDidChangeContent((function(t){if(r._diff.get()){var n=nH.fromModelContentChanges(t.changes);_5(r._lastDiff,n,e.original,e.modified)}r._isDiffUpToDate.set(!1,void 0),c.schedule()}))),r._register(eO(function(){var t=s((function(t,n){var i,r,s,l,u,h;return E(this,(function(f){switch(f.label){case 0:return o._options.hideUnchangedRegionsMinimumLineCount.read(t),o._options.hideUnchangedRegionsContextLineCount.read(t),c.cancel(),a.read(t),(i=o._diffProvider.read(t)).onChangeSignal.read(t),h5(UC,t),h5(WC,t),o._isDiffUpToDate.set(!1,void 0),r=[],n.add(e.original.onDidChangeContent((function(e){var t=nH.fromModelContentChanges(e.changes);r=PH(r,t)}))),s=[],n.add(e.modified.onDidChangeContent((function(e){var t=nH.fromModelContentChanges(e.changes);s=PH(s,t)}))),[4,i.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:o._options.ignoreTrimWhitespace.read(t),maxComputationTimeMs:o._options.maxComputationTimeMs.read(t),computeMoves:o._options.showMoves.read(t)},o._cancellationTokenSource.token)];case 1:return l=f.sent(),o._cancellationTokenSource.token.isCancellationRequested?[2]:(e.original.isDisposed()||e.modified.isDisposed()||(l=function(e,t,n){return{changes:e.changes.map((function(e){return new oC(e.original,e.modified,e.innerChanges?e.innerChanges.map((function(e){return function(e,t,n){var i=e.originalRange,r=e.modifiedRange;1===i.startColumn&&1===r.startColumn&&(1!==i.endColumn||1!==r.endColumn)&&i.endColumn===t.getLineMaxColumn(i.endLineNumber)&&r.endColumn===n.getLineMaxColumn(r.endLineNumber)&&i.endLineNumber<t.getLineCount()&&r.endLineNumber<n.getLineCount()&&(i=i.setEndPosition(i.endLineNumber+1,1),r=r.setEndPosition(r.endLineNumber+1,1));return new aC(i,r)}(e,t,n)})):void 0)})),moves:e.moves,identical:e.identical,quitEarly:e.quitEarly}}(l,e.original,e.modified),l=null!==(u=_5(l,r,e.original,e.modified))&&void 0!==u?u:l,l=null!==(h=b5(l,s,e.original,e.modified))&&void 0!==h?h:l,TP((function(e){d(l,e),o._lastDiff=l;var t=p5.fromDiffResult(l);o._diff.set(t,e),o._isDiffUpToDate.set(!0,e);var n=o.movedTextToCompare.get();o.movedTextToCompare.set(n?o._lastDiff.moves.find((function(e){return e.lineRangeMapping.modified.intersect(n.lineRangeMapping.modified)})):void 0,e)}))),[2])}}))}));return function(e,n){return t.apply(this,arguments)}}())),r}return p(t,e),h(t,[{key:"setActiveMovedText",value:function(e){this._activeMovedText.set(e,void 0)}},{key:"ensureModifiedLineIsVisible",value:function(e,t,n){var i,r;if(0!==(null===(i=this.diff.get())||void 0===i?void 0:i.mappings.length)){var o=(null===(r=this._unchangedRegions.get())||void 0===r?void 0:r.regions)||[],a=!0,s=!1,l=void 0;try{for(var u,c=o[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;if(d.getHiddenModifiedRange(void 0).contains(e))return void d.showModifiedLine(e,t,n)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}}}},{key:"ensureOriginalLineIsVisible",value:function(e,t,n){var i,r;if(0!==(null===(i=this.diff.get())||void 0===i?void 0:i.mappings.length)){var o=(null===(r=this._unchangedRegions.get())||void 0===r?void 0:r.regions)||[],a=!0,s=!1,l=void 0;try{for(var u,c=o[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;if(d.getHiddenOriginalRange(void 0).contains(e))return void d.showOriginalLine(e,t,n)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}}}},{key:"waitForDiff",value:function(){var e=this;return s((function(){return E(this,(function(t){switch(t.label){case 0:return[4,pO(e.isDiffUpToDate,(function(e){return e}))];case 1:return t.sent(),[2]}}))}))()}},{key:"serializeState",value:function(){var e=this._unchangedRegions.get();return{collapsedRegions:null==e?void 0:e.regions.map((function(e){return{range:e.getHiddenModifiedRange(void 0).serialize()}}))}}},{key:"restoreSerializedState",value:function(e){var t,n=null===(t=e.collapsedRegions)||void 0===t?void 0:t.map((function(e){return Gw.deserialize(e.range)})),i=this._unchangedRegions.get();i&&n&&TP((function(e){var t=!0,r=!1,o=void 0;try{for(var a,s=i.regions[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var l=a.value,u=!0,c=!1,d=void 0;try{for(var h,f=n[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;if(l.modifiedUnchangedRange.intersect(g)){l.setHiddenModifiedRange(g,e);break}}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}}catch(e){r=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw o}}}))}}]),t}(Ru);v5=f5([g5(2,a5)],v5);var p5=function(){function e(t,n,i,r){u(this,e),this.mappings=t,this.movedTexts=n,this.identical=i,this.quitEarly=r}return h(e,null,[{key:"fromDiffResult",value:function(t){return new e(t.changes.map((function(e){return new m5(e)})),t.moves||[],t.identical,t.quitEarly)}}]),e}(),m5=function e(t){u(this,e),this.lineRangeMapping=t},y5=function(){function e(t,n,i,r,o){var a=this;u(this,e),this.originalLineNumber=t,this.modifiedLineNumber=n,this.lineCount=i,this._visibleLineCountTop=BP(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=BP(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=UP(this,(function(e){return a.visibleLineCountTop.read(e)+a.visibleLineCountBottom.read(e)===a.lineCount&&!a.isDragged.read(e)})),this.isDragged=BP(this,void 0);var s=Math.max(Math.min(r,this.lineCount),0),l=Math.max(Math.min(o,this.lineCount-r),0);Jy(r===s),Jy(o===l),this._visibleLineCountTop.set(s,void 0),this._visibleLineCountBottom.set(l,void 0)}return h(e,[{key:"originalUnchangedRange",get:function(){return Gw.ofLength(this.originalLineNumber,this.lineCount)}},{key:"modifiedUnchangedRange",get:function(){return Gw.ofLength(this.modifiedLineNumber,this.lineCount)}},{key:"setVisibleRanges",value:function(t,n){var i=[],r=new Zw(t.map((function(e){return e.modified}))).subtractFrom(this.modifiedUnchangedRange),o=this.originalLineNumber,a=this.modifiedLineNumber,s=this.modifiedLineNumber+this.lineCount;if(0===r.ranges.length)this.showAll(n),i.push(this);else{var l=0,u=!0,c=!1,d=void 0;try{for(var h,f=r.ranges[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value,v=l===r.ranges.length-1;l++;var p=new e(o,a,(v?s:g.endLineNumberExclusive)-a,0,0);p.setHiddenModifiedRange(g,n),i.push(p),o=p.originalUnchangedRange.endLineNumberExclusive,a=p.modifiedUnchangedRange.endLineNumberExclusive}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}return i}},{key:"shouldHideControls",value:function(e){return this._shouldHideControls.read(e)}},{key:"getHiddenOriginalRange",value:function(e){return Gw.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}},{key:"getHiddenModifiedRange",value:function(e){return Gw.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}},{key:"setHiddenModifiedRange",value:function(e,t){var n=e.startLineNumber-this.modifiedLineNumber,i=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(n,i,t)}},{key:"getMaxVisibleLineCountTop",value:function(){return this.lineCount-this._visibleLineCountBottom.get()}},{key:"getMaxVisibleLineCountBottom",value:function(){return this.lineCount-this._visibleLineCountTop.get()}},{key:"showMoreAbove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0,n=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,n),t)}},{key:"showMoreBelow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0,n=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,n),t)}},{key:"showAll",value:function(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}},{key:"showModifiedLine",value:function(e,t,n){var i=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),r=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;0===t&&i<r||1===t?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+i,n):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+r,n)}},{key:"showOriginalLine",value:function(e,t,n){var i=e-this.originalLineNumber,r=this.originalLineNumber+this.lineCount-e;0===t&&i<r||1===t?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+r-i,this.getMaxVisibleLineCountTop()),n):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+i-r,this.getMaxVisibleLineCountBottom()),n)}},{key:"collapseAll",value:function(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}},{key:"setState",value:function(e,t,n){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,n),this._visibleLineCountBottom.set(t,n)}}],[{key:"fromDiffs",value:function(t,n,i,r,o){var a=oC.inverse(t,n,i),s=[],l=!0,u=!1,c=void 0;try{for(var d,h=a[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value,g=f.original.startLineNumber,v=f.modified.startLineNumber,p=f.original.length,m=1===g&&1===v,y=g+p===n+1&&v+p===i+1;(m||y)&&p>=o+r?(m&&!y&&(p-=o),y&&!m&&(g+=o,v+=o,p-=o),s.push(new e(g,v,p,0,0))):p>=2*o+r&&(g+=o,v+=o,p-=2*o,s.push(new e(g,v,p,0,0)))}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return s}}]),e}();function _5(e,t,n,i){}function b5(e,t,n,i){}var k5=function(e){function t(e,n,i,r,o,a,c,d,h){var f;u(this,t),(f=l(this,t))._getViewZoneId=e,f._marginDomNode=n,f._modifiedEditor=i,f._diff=r,f._editor=o,f._viewLineCounts=a,f._originalTextModel=c,f._contextMenuService=d,f._clipboardService=h,f._visibility=!1,f._marginDomNode.style.zIndex="10",f._diffActions=document.createElement("div"),f._diffActions.className=ny.asClassName(bd.lightBulb)+" lightbulb-glyph",f._diffActions.style.position="absolute";var g=f._modifiedEditor.getOption(67);f._diffActions.style.right="0px",f._diffActions.style.visibility="hidden",f._diffActions.style.height="".concat(g,"px"),f._diffActions.style.lineHeight="".concat(g,"px"),f._marginDomNode.appendChild(f._diffActions);var v=0,p=i.getOption(128)&&!ws,m=function(e,t){var n;f._contextMenuService.showContextMenu({domForShadowRoot:p&&null!==(n=i.getDomNode())&&void 0!==n?n:void 0,getAnchor:function(){return{x:e,y:t}},getActions:function(){var e=[],t=r.modified.isEmpty,n=f;if(e.push(new $m("diff.clipboard.copyDeletedContent",t?r.original.length>1?Xa("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):Xa("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):r.original.length>1?Xa("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):Xa("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,s((function(){var e;return E(this,(function(t){switch(t.label){case 0:return e=n._originalTextModel.getValueInRange(r.original.toExclusiveRange()),[4,n._clipboardService.writeText(e)];case 1:return t.sent(),[2]}}))})))),r.original.length>1){var o=f;e.push(new $m("diff.clipboard.copyDeletedLineContent",t?Xa("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",r.original.startLineNumber+v):Xa("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",r.original.startLineNumber+v),void 0,!0,s((function(){var e,t;return E(this,(function(n){switch(n.label){case 0:return""===(e=o._originalTextModel.getLineContent(r.original.startLineNumber+v))&&(t=o._originalTextModel.getEndOfLineSequence(),e=0===t?"\n":"\r\n"),[4,o._clipboardService.writeText(e)];case 1:return n.sent(),[2]}}))}))))}if(!i.getOption(92)){var a=f;e.push(new $m("diff.inline.revertChange",Xa("diff.inline.revertChange.label","Revert this change"),void 0,!0,s((function(){return E(this,(function(e){return a._editor.revert(a._diff),[2]}))}))))}return e},autoSelectFirstItem:!0})};return f._register(hp(f._diffActions,"mousedown",(function(e){if(e.leftButton){var t=xp(f._diffActions),n=t.top,i=t.height,r=Math.floor(g/3);e.preventDefault(),m(e.posx,n+i+r)}}))),f._register(i.onMouseMove((function(e){8!==e.target.type&&5!==e.target.type||e.target.detail.viewZoneId!==f._getViewZoneId()?f.visibility=!1:(v=f._updateLightBulbPosition(f._marginDomNode,e.event.browserEvent.y,g),f.visibility=!0)}))),f._register(i.onMouseDown((function(e){e.event.leftButton&&(8!==e.target.type&&5!==e.target.type||e.target.detail.viewZoneId===f._getViewZoneId()&&(e.event.preventDefault(),v=f._updateLightBulbPosition(f._marginDomNode,e.event.browserEvent.y,g),m(e.event.posx,e.event.posy+g)))}))),f}return p(t,e),h(t,[{key:"visibility",get:function(){return this._visibility},set:function(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}},{key:"_updateLightBulbPosition",value:function(e,t,n){var i=t-xp(e).top,r=Math.floor(i/n),o=r*n;if(this._diffActions.style.top="".concat(o,"px"),this._viewLineCounts)for(var a=0,s=0;s<this._viewLineCounts.length;s++)if(r<(a+=this._viewLineCounts[s]))return s;return r}}]),t}(Ru),w5=rb("diffEditorWidget",{createHTML:function(e){return e}});var C5=function e(t,n,i,r){u(this,e),this.lineTokens=t,this.lineBreakData=n,this.mightContainNonBasicASCII=i,this.mightContainRTL=r},S5=function(){function e(t,n,i,r,o,a,s,l,c,d,h){u(this,e),this.tabSize=t,this.fontInfo=n,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=r,this.scrollBeyondLastColumn=o,this.lineHeight=a,this.lineDecorationsWidth=s,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=d,this.fontLigatures=h}return h(e,null,[{key:"fromEditor",value:function(t){var n,i=t.getOptions(),r=i.get(50),o=i.get(146);return new e((null===(n=t.getModel())||void 0===n?void 0:n.getOptions().tabSize)||0,r,i.get(33),r.typicalHalfwidthCharacterWidth,i.get(105),i.get(67),o.decorationsWidth,i.get(118),i.get(100),i.get(95),i.get(51))}}]),e}();function x5(e,t,n,i,r,o,a,s){s.appendString('<div class="view-line'),i||s.appendString(" char-delete"),s.appendString('" style="top:'),s.appendString(String(e*a.lineHeight)),s.appendString('px;width:1000000px;">');var l=t.getLineContent(),u=zQ.isBasicASCII(l,r),c=zQ.containsRTL(l,u,o),d=RQ(new IQ(a.fontInfo.isMonospace&&!a.disableMonospaceOptimizations,a.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,u,c,0,t,n,a.tabSize,0,a.fontInfo.spaceWidth,a.fontInfo.middotWidth,a.fontInfo.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==vl.OFF,null),s);return s.appendString("</div>"),d.characterMapping.getHorizontalOffset(d.characterMapping.length)}var L5=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},D5=function(e,t){return function(n,i){t(n,i,e)}},N5=function(e){function t(e,n,i,r,o,a,s,c,d,h){var f;u(this,t);var g=function(){var e=document.createElement("div");return e.className="diagonal-fill",e};(f=l(this,t))._targetWindow=e,f._editors=n,f._diffModel=i,f._options=r,f._diffEditorWidget=o,f._canIgnoreViewZoneUpdateEvent=a,f._origViewZonesToIgnore=s,f._modViewZonesToIgnore=c,f._clipboardService=d,f._contextMenuService=h,f._originalTopPadding=BP(f,0),f._originalScrollOffset=BP(f,0),f._originalScrollOffsetAnimated=y3(f._targetWindow,f._originalScrollOffset,f._store),f._modifiedTopPadding=BP(f,0),f._modifiedScrollOffset=BP(f,0),f._modifiedScrollOffsetAnimated=y3(f._targetWindow,f._modifiedScrollOffset,f._store);var v=BP("invalidateAlignmentsState",0),p=f._register(new Sg((function(){v.set(v.get()+1,void 0)}),0));f._register(f._editors.original.onDidChangeViewZones((function(e){f._canIgnoreViewZoneUpdateEvent()||p.schedule()}))),f._register(f._editors.modified.onDidChangeViewZones((function(e){f._canIgnoreViewZoneUpdateEvent()||p.schedule()}))),f._register(f._editors.original.onDidChangeConfiguration((function(e){(e.hasChanged(147)||e.hasChanged(67))&&p.schedule()}))),f._register(f._editors.modified.onDidChangeConfiguration((function(e){(e.hasChanged(147)||e.hasChanged(67))&&p.schedule()})));var m=f._diffModel.map((function(e){return e?rO(f,e.model.original.onDidChangeTokens,(function(){return 2===e.model.original.tokenization.backgroundTokenizationState})):void 0})).map((function(e,t){return null==e?void 0:e.read(t)})),y=UP((function(e){var t=f._diffModel.read(e),n=null==t?void 0:t.diff.read(e);if(!t||!n)return null;v.read(e);var i=f._options.renderSideBySide.read(e);return I5(f._editors.original,f._editors.modified,n.mappings,f._origViewZonesToIgnore,f._modViewZonesToIgnore,i)})),_=UP((function(e){var t,n=null===(t=f._diffModel.read(e))||void 0===t?void 0:t.movedTextToCompare.read(e);if(!n)return null;v.read(e);var i=n.changes.map((function(e){return new m5(e)}));return I5(f._editors.original,f._editors.modified,i,f._origViewZonesToIgnore,f._modViewZonesToIgnore,!0)})),b=f._register(new Tu);f.viewZones=GP(f,(function(e,t){var n,i,r,a;b.clear();var s=y.read(e)||[],l=[],u=[],c=f._modifiedTopPadding.read(e);c>0&&u.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:c,showInHiddenAreas:!0,suppressMouseDown:!0});var d=f._originalTopPadding.read(e);d>0&&l.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:d,showInHiddenAreas:!0,suppressMouseDown:!0});var h,v=f._options.renderSideBySide.read(e),p=v||null===(n=f._editors.modified._getViewModel())||void 0===n?void 0:n.createLineBreaksComputer();if(p){var k=f._editors.original.getModel(),w=!0,C=!1,S=void 0;try{for(var x,D=s[Symbol.iterator]();!(w=(x=D.next()).done);w=!0){var N=x.value;if(N.diff)for(var I=N.originalRange.startLineNumber;I<N.originalRange.endLineNumberExclusive;I++){if(I>k.getLineCount())return{orig:l,mod:u};null==p||p.addRequest(k.getLineContent(I),null,null)}}}catch(e){C=!0,S=e}finally{try{w||null==D.return||D.return()}finally{if(C)throw S}}}var E,M,T,R=null!==(h=null==p?void 0:p.finalize())&&void 0!==h?h:[],A=0,P=f._editors.modified.getOption(67),O=null===(i=f._diffModel.read(e))||void 0===i?void 0:i.movedTextToCompare.read(e),F=null!==(E=null===(r=f._editors.original.getModel())||void 0===r?void 0:r.mightContainNonBasicASCII())&&void 0!==E&&E,W=null!==(M=null===(a=f._editors.original.getModel())||void 0===a?void 0:a.mightContainRTL())&&void 0!==M&&M,B=S5.fromEditor(f._editors.modified),H=!0,V=!1,z=void 0;try{for(var U,j=function(){var n=U.value;if(!n.diff||v||f._options.useTrueInlineDiffRendering.read(e)&&M5(n.diff)){var i=n.modifiedHeightInPx-n.originalHeightInPx;if(i>0){if(null==O?void 0:O.lineRangeMapping.original.delta(-1).deltaLength(2).contains(n.originalRange.endLineNumberExclusive-1))return"continue";l.push({afterLineNumber:n.originalRange.endLineNumberExclusive-1,domNode:g(),heightInPx:i,showInHiddenAreas:!0,suppressMouseDown:!0})}else{if(null==O?void 0:O.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(n.modifiedRange.endLineNumberExclusive-1))return"continue";var r=void 0;n.diff&&n.diff.modified.isEmpty&&f._options.shouldRenderOldRevertArrows.read(e)&&(r=function(){var e=document.createElement("div");return e.className="arrow-revert-change "+ny.asClassName(bd.arrowRight),t.add(cp(e,"mousedown",(function(e){return e.stopPropagation()}))),t.add(cp(e,"click",(function(e){e.stopPropagation(),o.revert(n.diff)}))),gm("div",{},e)}()),u.push({afterLineNumber:n.modifiedRange.endLineNumberExclusive-1,domNode:g(),heightInPx:-i,marginDomNode:r,showInHiddenAreas:!0,suppressMouseDown:!0})}}else{if(!n.originalRange.isEmpty){m.read(e);var a=document.createElement("div");a.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");var s=f._editors.original.getModel();if(n.originalRange.endLineNumberExclusive-1>s.getLineCount())return{v:{orig:l,mod:u}};var c=new C5(n.originalRange.mapToLineArray((function(e){return s.tokenization.getLineTokens(e)})),n.originalRange.mapToLineArray((function(e){return R[A++]})),F,W),d=[],h=!0,p=!1,y=void 0;try{for(var _,k=(n.diff.innerChanges||[])[Symbol.iterator]();!(h=(_=k.next()).done);h=!0){var w=_.value;d.push(new UQ(w.originalRange.delta(-(n.diff.original.startLineNumber-1)),t5.className,0))}}catch(e){p=!0,y=e}finally{try{h||null==k.return||k.return()}finally{if(p)throw y}}var C=function(e,t,n,i){Om(i,t.fontInfo);for(var r=n.length>0,o=new Tb(1e4),a=0,s=0,l=[],u=0;u<e.lineTokens.length;u++){var c=u+1,d=e.lineTokens[u],h=e.lineBreakData[u],f=CQ.filter(n,c,1,Number.MAX_SAFE_INTEGER);if(h){var g=0,v=!0,p=!1,m=void 0;try{for(var y,_=h.breakOffsets[Symbol.iterator]();!(v=(y=_.next()).done);v=!0){var b=y.value,k=d.sliceAndInflate(g,b,0);a=Math.max(a,x5(s,k,CQ.extractWrapped(f,g,b),r,e.mightContainNonBasicASCII,e.mightContainRTL,t,o)),s++,g=b}}catch(e){p=!0,m=e}finally{try{v||null==_.return||_.return()}finally{if(p)throw m}}l.push(h.breakOffsets.length)}else l.push(1),a=Math.max(a,x5(s,d,f,r,e.mightContainNonBasicASCII,e.mightContainRTL,t,o)),s++}a+=t.scrollBeyondLastColumn;var w=o.build(),C=w5?w5.createHTML(w):w;return i.innerHTML=C,{heightInLines:s,minWidthInPx:a*t.typicalHalfwidthCharacterWidth,viewLineCounts:l}}(c,B,d,a),S=document.createElement("div");if(S.className="inline-deleted-margin-view-zone",Om(S,B.fontInfo),f._options.renderIndicators.read(e))for(var x=0;x<C.heightInLines;x++){var L=document.createElement("div");L.className="delete-sign ".concat(ny.asClassName(G3)),L.setAttribute("style","position:absolute;top:".concat(x*P,"px;width:").concat(B.lineDecorationsWidth,"px;height:").concat(P,"px;right:0;")),S.appendChild(L)}var D=void 0;b.add(new k5((function(){return Fa(D)}),S,f._editors.modified,n.diff,f._diffEditorWidget,C.viewLineCounts,f._editors.original.getModel(),f._contextMenuService,f._clipboardService));for(var N=0;N<C.viewLineCounts.length;N++){var I=C.viewLineCounts[N];I>1&&l.push({afterLineNumber:n.originalRange.startLineNumber+N,domNode:g(),heightInPx:(I-1)*P,showInHiddenAreas:!0,suppressMouseDown:!0})}u.push({afterLineNumber:n.modifiedRange.startLineNumber-1,domNode:a,heightInPx:C.heightInLines*P,minWidthInPx:C.minWidthInPx,marginDomNode:S,setZoneId:function(e){D=e},showInHiddenAreas:!0,suppressMouseDown:!0})}var E=document.createElement("div");E.className="gutter-delete",l.push({afterLineNumber:n.originalRange.endLineNumberExclusive-1,domNode:g(),heightInPx:n.modifiedHeightInPx,marginDomNode:E,showInHiddenAreas:!0,suppressMouseDown:!0})}},K=s[Symbol.iterator]();!(H=(U=K.next()).done);H=!0){var q=j();if("object"===L(q))return q.v}}catch(e){V=!0,z=e}finally{try{H||null==K.return||K.return()}finally{if(V)throw z}}var G=!0,Z=!1,Y=void 0;try{for(var Q,X=(null!==(T=_.read(e))&&void 0!==T?T:[])[Symbol.iterator]();!(G=(Q=X.next()).done);G=!0){var $=Q.value;if((null==O?void 0:O.lineRangeMapping.original.intersect($.originalRange))&&(null==O?void 0:O.lineRangeMapping.modified.intersect($.modifiedRange))){var J=$.modifiedHeightInPx-$.originalHeightInPx;J>0?l.push({afterLineNumber:$.originalRange.endLineNumberExclusive-1,domNode:g(),heightInPx:J,showInHiddenAreas:!0,suppressMouseDown:!0}):u.push({afterLineNumber:$.modifiedRange.endLineNumberExclusive-1,domNode:g(),heightInPx:-J,showInHiddenAreas:!0,suppressMouseDown:!0})}}}catch(e){Z=!0,Y=e}finally{try{G||null==X.return||X.return()}finally{if(Z)throw Y}}return{orig:l,mod:u}}));var k=!1;return f._register(f._editors.original.onDidScrollChange((function(e){e.scrollLeftChanged&&!k&&(k=!0,f._editors.modified.setScrollLeft(e.scrollLeft),k=!1)}))),f._register(f._editors.modified.onDidScrollChange((function(e){e.scrollLeftChanged&&!k&&(k=!0,f._editors.original.setScrollLeft(e.scrollLeft),k=!1)}))),f._originalScrollTop=rO(f._editors.original.onDidScrollChange,(function(){return f._editors.original.getScrollTop()})),f._modifiedScrollTop=rO(f._editors.modified.onDidScrollChange,(function(){return f._editors.modified.getScrollTop()})),f._register(XP((function(e){var t=f._originalScrollTop.read(e)-(f._originalScrollOffsetAnimated.get()-f._modifiedScrollOffsetAnimated.read(e))-(f._originalTopPadding.get()-f._modifiedTopPadding.read(e));t!==f._editors.modified.getScrollTop()&&f._editors.modified.setScrollTop(t,1)}))),f._register(XP((function(e){var t=f._modifiedScrollTop.read(e)-(f._modifiedScrollOffsetAnimated.get()-f._originalScrollOffsetAnimated.read(e))-(f._modifiedTopPadding.get()-f._originalTopPadding.read(e));t!==f._editors.original.getScrollTop()&&f._editors.original.setScrollTop(t,1)}))),f._register(XP((function(e){var t,n=null===(t=f._diffModel.read(e))||void 0===t?void 0:t.movedTextToCompare.read(e),i=0;if(n){var r=f._editors.original.getTopForLineNumber(n.lineRangeMapping.original.startLineNumber,!0)-f._originalTopPadding.get();i=f._editors.modified.getTopForLineNumber(n.lineRangeMapping.modified.startLineNumber,!0)-f._modifiedTopPadding.get()-r}i>0?(f._modifiedTopPadding.set(0,void 0),f._originalTopPadding.set(i,void 0)):i<0?(f._modifiedTopPadding.set(-i,void 0),f._originalTopPadding.set(0,void 0)):setTimeout((function(){f._modifiedTopPadding.set(0,void 0),f._originalTopPadding.set(0,void 0)}),400),f._editors.modified.hasTextFocus()?f._originalScrollOffset.set(f._modifiedScrollOffset.get()-i,void 0,!0):f._modifiedScrollOffset.set(f._originalScrollOffset.get()+i,void 0,!0)}))),f}return p(t,e),t}(Ru);function I5(e,t,n,i,r,o){var a=new Sa(E5(e,i)),s=new Sa(E5(t,r)),l=e.getOption(67),u=t.getOption(67),c=[],d=0,h=0;function f(e,t){for(;;){var n=a.peek(),i=s.peek();if(n&&n.lineNumber>=e&&(n=void 0),i&&i.lineNumber>=t&&(i=void 0),!n&&!i)break;var r=n?n.lineNumber-d:Number.MAX_VALUE,o=i?i.lineNumber-h:Number.MAX_VALUE;r<o?(a.dequeue(),i={lineNumber:n.lineNumber-d+h,heightInPx:0}):r>o?(s.dequeue(),n={lineNumber:i.lineNumber-h+d,heightInPx:0}):(a.dequeue(),s.dequeue()),c.push({originalRange:Gw.ofLength(n.lineNumber,1),modifiedRange:Gw.ofLength(i.lineNumber,1),originalHeightInPx:l+n.heightInPx,modifiedHeightInPx:u+i.heightInPx,diff:void 0})}}var g=!0,v=!1,p=void 0;try{for(var m,y=function(){var t=m.value,n=function(e,n){var i,o;if(!(e<v||n<g)){if(r)r=!1;else if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&(e===v||n===g))return;var d=new Gw(v,e),h=new Gw(g,n);if(!d.isEmpty||!h.isEmpty){var f,p,m=null!==(f=null===(i=a.takeWhile((function(t){return t.lineNumber<e})))||void 0===i?void 0:i.reduce((function(e,t){return e+t.heightInPx}),0))&&void 0!==f?f:0,y=null!==(p=null===(o=s.takeWhile((function(e){return e.lineNumber<n})))||void 0===o?void 0:o.reduce((function(e,t){return e+t.heightInPx}),0))&&void 0!==p?p:0;c.push({originalRange:d,modifiedRange:h,originalHeightInPx:d.length*l+m,modifiedHeightInPx:h.length*u+y,diff:t.lineRangeMapping}),v=e,g=n}}},i=t.lineRangeMapping;f(i.original.startLineNumber,i.modified.startLineNumber);var r=!0,g=i.modified.startLineNumber,v=i.original.startLineNumber;if(o){var p=!0,y=!1,_=void 0;try{for(var b,k=(i.innerChanges||[])[Symbol.iterator]();!(p=(b=k.next()).done);p=!0){var w=b.value;w.originalRange.startColumn>1&&w.modifiedRange.startColumn>1&&n(w.originalRange.startLineNumber,w.modifiedRange.startLineNumber);var C=e.getModel(),S=w.originalRange.endLineNumber<=C.getLineCount()?C.getLineMaxColumn(w.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;w.originalRange.endColumn<S&&n(w.originalRange.endLineNumber,w.modifiedRange.endLineNumber)}}catch(e){y=!0,_=e}finally{try{p||null==k.return||k.return()}finally{if(y)throw _}}}n(i.original.endLineNumberExclusive,i.modified.endLineNumberExclusive,!0),d=i.original.endLineNumberExclusive,h=i.modified.endLineNumberExclusive},_=n[Symbol.iterator]();!(g=(m=_.next()).done);g=!0)y()}catch(e){v=!0,p=e}finally{try{g||null==_.return||_.return()}finally{if(v)throw p}}return f(Number.MAX_VALUE,Number.MAX_VALUE),c}function E5(e,t){var n=[],i=[],r=-1!==e.getOption(147).wrappingColumn,o=e._getViewModel().coordinatesConverter,a=e.getOption(67);if(r)for(var s=1;s<=e.getModel().getLineCount();s++){var l=o.getModelLineViewLineCount(s);l>1&&i.push({lineNumber:s,heightInPx:a*(l-1)})}var u=!0,c=!1,d=void 0;try{for(var h,f=e.getWhitespaces()[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;if(!t.has(g.id)){var v=0===g.afterLineNumber?0:o.convertViewPositionToModelPosition(new dd(g.afterLineNumber,1)).lineNumber;n.push({lineNumber:v,heightInPx:g.height})}}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}var p=function(e,t,n,i){if(0===e.length)return t;if(0===t.length)return e;for(var r=[],o=0,a=0;o<e.length&&a<t.length;){var s=e[o],l=t[a],u=n(s),c=n(l);u<c?(r.push(s),o++):u>c?(r.push(l),a++):(r.push(i(s,l)),o++,a++)}for(;o<e.length;)r.push(e[o]),o++;for(;a<t.length;)r.push(t[a]),a++;return r}(n,i,(function(e){return e.lineNumber}),(function(e,t){return{lineNumber:e.lineNumber,heightInPx:e.heightInPx+t.heightInPx}}));return p}function M5(e){return!!e.innerChanges&&e.innerChanges.every((function(e){return T5(e.modifiedRange)&&T5(e.originalRange)||e.originalRange.equalsRange(new hd(1,1,1,1))}))}function T5(e){return e.startLineNumber===e.endLineNumber}N5=L5([D5(8,fY),D5(9,GI)],N5);var R5=function(e){function t(e,n,i,r,o){var a;u(this,t),(a=l(this,t))._rootElement=e,a._diffModel=n,a._originalEditorLayoutInfo=i,a._modifiedEditorLayoutInfo=r,a._editors=o,a._originalScrollTop=rO(a,a._editors.original.onDidScrollChange,(function(){return a._editors.original.getScrollTop()})),a._modifiedScrollTop=rO(a,a._editors.modified.onDidScrollChange,(function(){return a._editors.modified.getScrollTop()})),a._viewZonesChanged=aO("onDidChangeViewZones",a._editors.modified.onDidChangeViewZones),a.width=BP(a,0),a._modifiedViewZonesChangedSignal=aO("modified.onDidChangeViewZones",a._editors.modified.onDidChangeViewZones),a._originalViewZonesChangedSignal=aO("original.onDidChangeViewZones",a._editors.original.onDidChangeViewZones),a._state=GP(a,(function(e,n){var i;a._element.replaceChildren();var r=a._diffModel.read(e),o=null==r||null===(i=r.diff.read(e))||void 0===i?void 0:i.movedTexts;if(o&&0!==o.length){a._viewZonesChanged.read(e);var s=a._originalEditorLayoutInfo.read(e),l=a._modifiedEditorLayoutInfo.read(e);if(s&&l){a._modifiedViewZonesChangedSignal.read(e),a._originalViewZonesChangedSignal.read(e);var u=o.map((function(t){var n=function(e,t){return(t.getTopForLineNumber(e.startLineNumber,!0)+t.getTopForLineNumber(e.endLineNumberExclusive,!0))/2},i=n(t.lineRangeMapping.original,a._editors.original),r=a._originalScrollTop.read(e),o=n(t.lineRangeMapping.modified,a._editors.modified),s=i-r,l=o-a._modifiedScrollTop.read(e),u=Math.min(i,o),c=Math.max(i,o);return{range:new Bw(u,c),from:s,to:l,fromWithoutScroll:i,toWithoutScroll:o,move:t}}));u.sort(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=(0,a.value)(e,n);if(!Ko.isNeitherLessOrGreaterThan(l))return l}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return Ko.neitherLessOrGreaterThan}}(ba((function(e){return e.fromWithoutScroll>e.toWithoutScroll}),wa),ba((function(e){return e.fromWithoutScroll>e.toWithoutScroll?e.fromWithoutScroll:-e.toWithoutScroll}),ka)));var c=A5.compute(u.map((function(e){return e.range}))),d=s.verticalScrollbarWidth,h=10*(c.getTrackCount()-1)+20,f=d+h+(l.contentLeft-t.movedCodeBlockPadding),g=0,v=!0,p=!1,m=void 0;try{for(var y,_=function(){var e=y.value,t=c.getTrack(g),i=d+10+10*t,o=f,s=l.glyphMarginWidth+l.lineNumbersWidth,u=document.createElementNS("http://www.w3.org/2000/svg","rect");u.classList.add("arrow-rectangle"),u.setAttribute("x","".concat(o-s)),u.setAttribute("y","".concat(e.to-9)),u.setAttribute("width","".concat(s)),u.setAttribute("height","".concat(18)),a._element.appendChild(u);var h=document.createElementNS("http://www.w3.org/2000/svg","g"),v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d","M ".concat(0," ").concat(e.from," L ").concat(i," ").concat(e.from," L ").concat(i," ").concat(e.to," L ").concat(o-15," ").concat(e.to)),v.setAttribute("fill","none"),h.appendChild(v);var p=document.createElementNS("http://www.w3.org/2000/svg","polygon");p.classList.add("arrow"),n.add(XP((function(t){v.classList.toggle("currentMove",e.move===r.activeMovedText.read(t)),p.classList.toggle("currentMove",e.move===r.activeMovedText.read(t))}))),p.setAttribute("points","".concat(o-15,",").concat(e.to-7.5," ").concat(o,",").concat(e.to," ").concat(o-15,",").concat(e.to+7.5)),h.appendChild(p),a._element.appendChild(h),g++},b=u[Symbol.iterator]();!(v=(y=b.next()).done);v=!0)_()}catch(e){p=!0,m=e}finally{try{v||null==b.return||b.return()}finally{if(p)throw m}}a.width.set(h,void 0)}else a.width.set(0,void 0)}else a.width.set(0,void 0)})),a._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),a._element.setAttribute("class","moved-blocks-lines"),a._rootElement.appendChild(a._element),a._register(Mu((function(){return a._element.remove()}))),a._register(XP((function(e){var n=a._originalEditorLayoutInfo.read(e),i=a._modifiedEditorLayoutInfo.read(e);n&&i&&(a._element.style.left="".concat(n.width-n.verticalScrollbarWidth,"px"),a._element.style.height="".concat(n.height,"px"),a._element.style.width="".concat(n.verticalScrollbarWidth+n.contentLeft-t.movedCodeBlockPadding+a.width.read(e),"px"))}))),a._register(cO(a._state));var s=UP((function(e){var t=a._diffModel.read(e),n=null==t?void 0:t.diff.read(e);return n?n.movedTexts.map((function(e){return{move:e,original:new b3(nO(e.lineRangeMapping.original.startLineNumber-1),18),modified:new b3(nO(e.lineRangeMapping.modified.startLineNumber-1),18)}})):[]}));a._register(C3(a._editors.original,s.map((function(e){return e.map((function(e){return e.original}))})))),a._register(C3(a._editors.modified,s.map((function(e){return e.map((function(e){return e.modified}))})))),a._register(eO((function(e,t){var n=s.read(e),i=!0,r=!1,o=void 0;try{for(var l,u=n[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;t.add(new P5(a._editors.original,c.original,c.move,"original",a._diffModel.get())),t.add(new P5(a._editors.modified,c.modified,c.move,"modified",a._diffModel.get()))}}catch(e){r=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(r)throw o}}})));var c=aO("original.onDidFocusEditorWidget",(function(e){return a._editors.original.onDidFocusEditorWidget((function(){return setTimeout((function(){return e(void 0)}),0)}))})),d=aO("modified.onDidFocusEditorWidget",(function(e){return a._editors.modified.onDidFocusEditorWidget((function(){return setTimeout((function(){return e(void 0)}),0)}))})),h="modified";return a._register(JP({createEmptyChangeSummary:function(){},handleChange:function(e,t){return e.didChange(c)&&(h="original"),e.didChange(d)&&(h="modified"),!0}},(function(e){c.read(e),d.read(e);var t=a._diffModel.read(e);if(t){var n=t.diff.read(e),i=void 0;if(n&&"original"===h){var r=a._editors.originalCursor.read(e);r&&(i=n.movedTexts.find((function(e){return e.lineRangeMapping.original.contains(r.lineNumber)})))}if(n&&"modified"===h){var o=a._editors.modifiedCursor.read(e);o&&(i=n.movedTexts.find((function(e){return e.lineRangeMapping.modified.contains(o.lineNumber)})))}i!==t.movedTextToCompare.get()&&t.movedTextToCompare.set(void 0,void 0),t.setActiveMovedText(i)}}))),a}return p(t,e),t}(Ru);R5.movedCodeBlockPadding=4;var A5=function(){function e(t,n){u(this,e),this._trackCount=t,this.trackPerLineIdx=n}return h(e,[{key:"getTrack",value:function(e){return this.trackPerLineIdx[e]}},{key:"getTrackCount",value:function(){return this._trackCount}}],[{key:"compute",value:function(t){var n=[],i=[],r=!0,o=!1,a=void 0;try{for(var s,l=function(){var e=s.value,t=n.findIndex((function(t){return!t.intersectsStrict(e)}));if(-1===t){n.length>=6?t=function(e,t){if(0===e.length)return-1;for(var n=0,i=1;i<e.length;i++)t(e[i],e[n])>0&&(n=i);return n}(n,ba((function(t){return t.intersectWithRangeLength(e)}),ka)):(t=n.length,n.push(new Hw))}n[t].addRange(e),i.push(t)},u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)l()}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return new e(n.length,i)}}]),e}(),P5=function(e){function t(e,n,i,r,o){var a;u(this,t);var s=Lm("div.diff-hidden-lines-widget");(a=l(this,t,[e,n,s.root]))._editor=e,a._move=i,a._kind=r,a._diffModel=o,a._nodes=Lm("div.diff-moved-code-block",{style:{marginRight:"4px"}},[Lm("div.text-content@textContent"),Lm("div.action-bar@actionBar")]),s.root.appendChild(a._nodes.root);var c,d=rO(a._editor.onDidLayoutChange,(function(){return a._editor.getLayoutInfo()}));a._register(w3(a._nodes.root,{paddingRight:d.map((function(e){return e.verticalScrollbarWidth}))})),c=i.changes.length>0?"original"===a._kind?Xa("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",a._move.lineRangeMapping.modified.startLineNumber,a._move.lineRangeMapping.modified.endLineNumberExclusive-1):Xa("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",a._move.lineRangeMapping.original.startLineNumber,a._move.lineRangeMapping.original.endLineNumberExclusive-1):"original"===a._kind?Xa("codeMovedTo","Code moved to line {0}-{1}",a._move.lineRangeMapping.modified.startLineNumber,a._move.lineRangeMapping.modified.endLineNumberExclusive-1):Xa("codeMovedFrom","Code moved from line {0}-{1}",a._move.lineRangeMapping.original.startLineNumber,a._move.lineRangeMapping.original.endLineNumberExclusive-1);var h=a._register(new dW(a._nodes.actionBar,{highlightToggledItems:!0})),f=new $m("",c,"",!1);h.push(f,{icon:!1,label:!0});var g=new $m("","Compare",ny.asClassName(bd.compareChanges),!0,(function(){a._editor.focus(),a._diffModel.movedTextToCompare.set(a._diffModel.movedTextToCompare.get()===i?void 0:a._move,void 0)}));return a._register(XP((function(e){var t=a._diffModel.movedTextToCompare.read(e)===i;g.checked=t}))),h.push(g,{icon:!1,label:!0}),a}return p(t,e),t}(_3),O5=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t))._editors=e,o._diffModel=n,o._options=i,o._decorations=UP(o,(function(e){var t=o._diffModel.read(e),n=null==t?void 0:t.diff.read(e);if(!n)return null;var i=o._diffModel.read(e).movedTextToCompare.read(e),r=o._options.renderIndicators.read(e),a=o._options.showEmptyDecorations.read(e),s=[],l=[];if(!i){var u=!0,c=!1,d=void 0;try{for(var h,f=n.mappings[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;if(g.lineRangeMapping.original.isEmpty||s.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:r?Y3:X3}),g.lineRangeMapping.modified.isEmpty||l.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:r?Z3:Q3}),g.lineRangeMapping.modified.isEmpty||g.lineRangeMapping.original.isEmpty)g.lineRangeMapping.original.isEmpty||s.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:n5}),g.lineRangeMapping.modified.isEmpty||l.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:J3});else{var v=o._options.useTrueInlineDiffRendering.read(e)&&M5(g.lineRangeMapping),p=!0,m=!1,y=void 0;try{for(var _,b=(g.lineRangeMapping.innerChanges||[])[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){var k=_.value;if(g.lineRangeMapping.original.contains(k.originalRange.startLineNumber)&&s.push({range:k.originalRange,options:k.originalRange.isEmpty()&&a?i5:t5}),g.lineRangeMapping.modified.contains(k.modifiedRange.startLineNumber)&&l.push({range:k.modifiedRange,options:k.modifiedRange.isEmpty()&&a&&!v?e5:$3}),v){var w=t.model.original.getValueInRange(k.originalRange);l.push({range:k.modifiedRange,options:{description:"deleted-text",before:{content:w,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}}catch(e){m=!0,y=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw y}}}}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}if(i){var C=!0,S=!1,x=void 0;try{for(var L,D=i.changes[Symbol.iterator]();!(C=(L=D.next()).done);C=!0){var N=L.value,I=N.original.toInclusiveRange();I&&s.push({range:I,options:r?Y3:X3});var E=N.modified.toInclusiveRange();E&&l.push({range:E,options:r?Z3:Q3});var M=!0,T=!1,R=void 0;try{for(var A,P=(N.innerChanges||[])[Symbol.iterator]();!(M=(A=P.next()).done);M=!0){var O=A.value;s.push({range:O.originalRange,options:t5}),l.push({range:O.modifiedRange,options:$3})}}catch(e){T=!0,R=e}finally{try{M||null==P.return||P.return()}finally{if(T)throw R}}}}catch(e){S=!0,x=e}finally{try{C||null==D.return||D.return()}finally{if(S)throw x}}}var F=o._diffModel.read(e).activeMovedText.read(e),W=!0,B=!1,H=void 0;try{for(var V,z=n.movedTexts[Symbol.iterator]();!(W=(V=z.next()).done);W=!0){var U=V.value;s.push({range:U.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(U===F?" currentMove":""),blockPadding:[R5.movedCodeBlockPadding,0,R5.movedCodeBlockPadding,R5.movedCodeBlockPadding]}}),l.push({range:U.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(U===F?" currentMove":""),blockPadding:[4,0,4,4]}})}}catch(e){B=!0,H=e}finally{try{W||null==z.return||z.return()}finally{if(B)throw H}}return{originalDecorations:s,modifiedDecorations:l}})),o._register(v3(o._editors.original,o._decorations.map((function(e){return(null==e?void 0:e.originalDecorations)||[]})))),o._register(v3(o._editors.modified,o._decorations.map((function(e){return(null==e?void 0:e.modifiedDecorations)||[]})))),o}return p(t,e),t}(Ru),F5=function(){function e(t,n){var i=this;u(this,e),this._options=t,this.dimensions=n,this.sashLeft=jP(this,(function(e){var t,n=null!==(t=i._sashRatio.read(e))&&void 0!==t?t:i._options.splitViewDefaultRatio.read(e);return i._computeSashLeft(n,e)}),(function(e,t){var n=i.dimensions.width.get();i._sashRatio.set(e/n,t)})),this._sashRatio=BP(this,void 0)}return h(e,[{key:"resetSash",value:function(){this._sashRatio.set(void 0,void 0)}},{key:"_computeSashLeft",value:function(e,t){var n=this.dimensions.width.read(t),i=Math.floor(this._options.splitViewDefaultRatio.read(t)*n),r=this._options.enableSplitViewResizing.read(t)?Math.floor(e*n):i,o=100;return n<=200?i:r<o?o:r>n-o?n-o:r}}]),e}(),W5=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t))._domNode=e,s._dimensions=n,s._enabled=i,s._boundarySashes=r,s.sashLeft=o,s._resetSash=a,s._sash=s._register(new Vj(s._domNode,{getVerticalSashTop:function(e){return 0},getVerticalSashLeft:function(e){return s.sashLeft.get()},getVerticalSashHeight:function(e){return s._dimensions.height.get()}},{orientation:0})),s._startSashPosition=void 0,s._register(s._sash.onDidStart((function(){s._startSashPosition=s.sashLeft.get()}))),s._register(s._sash.onDidChange((function(e){s.sashLeft.set(s._startSashPosition+(e.currentX-e.startX),void 0)}))),s._register(s._sash.onDidEnd((function(){return s._sash.layout()}))),s._register(s._sash.onDidReset((function(){return s._resetSash()}))),s._register(XP((function(e){var t=s._boundarySashes.read(e);t&&(s._sash.orthogonalEndSash=t.bottom)}))),s._register(XP((function(e){var t=s._enabled.read(e);s._sash.state=t?3:0,s.sashLeft.read(e),s._dimensions.height.read(e),s._sash.layout()}))),s}return p(t,e),t}(Ru),B5=function(e){function t(e,n,i){var r;u(this,t),(r=l(this,t))._editor=e,r._domNode=n,r.itemProvider=i,r.scrollTop=rO(r,r._editor.onDidScrollChange,(function(e){return r._editor.getScrollTop()})),r.isScrollTopZero=r.scrollTop.map((function(e){return 0===e})),r.modelAttached=rO(r,r._editor.onDidChangeModel,(function(e){return r._editor.hasModel()})),r.editorOnDidChangeViewZones=aO("onDidChangeViewZones",r._editor.onDidChangeViewZones),r.editorOnDidContentSizeChange=aO("onDidContentSizeChange",r._editor.onDidContentSizeChange),r.domNodeSizeChanged=lO("domNodeSizeChanged"),r.views=new Map,r._domNode.className="gutter monaco-editor";var o=r._domNode.appendChild(Lm("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),a=new ResizeObserver((function(){TP((function(e){r.domNodeSizeChanged.trigger(e)}))}));return a.observe(r._domNode),r._register(Mu((function(){return a.disconnect()}))),r._register(XP((function(e){o.className=r.isScrollTopZero.read(e)?"":"scroll-decoration"}))),r._register(XP((function(e){return r.render(e)}))),r}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),cm(this._domNode)}},{key:"render",value:function(e){var t=this;if(this.modelAttached.read(e)){this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);var n=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),r=new Set(this.views.keys()),o=Bw.ofStartAndLength(0,this._domNode.clientHeight);if(!o.isEmpty){var a=!0,s=!1,l=void 0;try{for(var u,c,d=function(){var i=c.value,a=new Gw(i.startLineNumber,i.endLineNumber+1),s=u.itemProvider.getIntersectingGutterItems(a,e);TP((function(e){var i=!0,l=!1,u=void 0;try{for(var c,d=s[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var h=c.value;if(h.range.intersect(a)){r.delete(h.id);var f=t.views.get(h.id);if(f)f.item.set(h,e);else{var g=document.createElement("div");t._domNode.appendChild(g);var v=BP("item",h),p=t.itemProvider.createView(v,g);f=new H5(v,p,g),t.views.set(h.id,f)}var m=h.range.startLineNumber<=t._editor.getModel().getLineCount()?t._editor.getTopForLineNumber(h.range.startLineNumber,!0)-n:t._editor.getBottomForLineNumber(h.range.startLineNumber-1,!1)-n,y=(1===h.range.endLineNumberExclusive?Math.max(m,t._editor.getTopForLineNumber(h.range.startLineNumber,!1)-n):Math.max(m,t._editor.getBottomForLineNumber(h.range.endLineNumberExclusive-1,!0)-n))-m;f.domNode.style.top="".concat(m,"px"),f.domNode.style.height="".concat(y,"px"),f.gutterItemView.layout(Bw.ofStartAndLength(m,y),o)}}}catch(e){l=!0,u=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw u}}}))},h=i[Symbol.iterator]();!(a=(c=h.next()).done);a=!0)u=this,d()}catch(e){s=!0,l=e}finally{try{a||null==h.return||h.return()}finally{if(s)throw l}}}var f=!0,g=!1,v=void 0;try{for(var p,m=r[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value,_=this.views.get(y);_.gutterItemView.dispose(),_.domNode.remove(),this.views.delete(y)}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}}}}]),t}(Ru),H5=function e(t,n,i){u(this,e),this.item=t,this.gutterItemView=n,this.domNode=i},V5=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._getContext=e,n}return p(t,e),h(t,[{key:"runAction",value:function(e,n){var i=this._getContext();return g(v(t.prototype),"runAction",this).call(this,e,i)}}]),t}(Jm),z5=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._textModel=e,n}return p(t,e),h(t,[{key:"getValueOfRange",value:function(e){return this._textModel.getValueInRange(e)}},{key:"length",get:function(){var e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new Yw(e-1,t)}}]),t}(eC),U5=function(e){function t(e,n){var i,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{orientation:0};return u(this,t),(i=l(this,t)).submenuActionViewItems=[],i.hasSecondaryActions=!1,i._onDidChangeDropdownVisibility=i._register(new Ju),i.onDidChangeDropdownVisibility=i._onDidChangeDropdownVisibility.event,i.disposables=i._register(new Tu),o.hoverDelegate=null!==(r=o.hoverDelegate)&&void 0!==r?r:i._register(LO()),i.options=o,i.toggleMenuAction=i._register(new j5((function(){var e;return null===(e=i.toggleMenuActionViewItem)||void 0===e?void 0:e.show()}),o.toggleMenuTitle)),i.element=document.createElement("div"),i.element.className="monaco-toolbar",e.appendChild(i.element),i.actionBar=i._register(new dW(i.element,{orientation:o.orientation,ariaLabel:o.ariaLabel,actionRunner:o.actionRunner,allowContextMenu:o.allowContextMenu,highlightToggledItems:o.highlightToggledItems,hoverDelegate:o.hoverDelegate,actionViewItemProvider:function(e,t){var r;if(e.id===j5.ID)return i.toggleMenuActionViewItem=new RF(e,e.menuActions,n,{actionViewItemProvider:i.options.actionViewItemProvider,actionRunner:i.actionRunner,keybindingProvider:i.options.getKeyBinding,classNames:ny.asClassNameArray(null!==(r=o.moreIcon)&&void 0!==r?r:bd.toolBarMore),anchorAlignmentProvider:i.options.anchorAlignmentProvider,menuAsChild:!!i.options.renderDropdownAsChildElement,skipTelemetry:i.options.skipTelemetry,isMenu:!0,hoverDelegate:i.options.hoverDelegate}),i.toggleMenuActionViewItem.setActionContext(i.actionBar.context),i.disposables.add(i._onDidChangeDropdownVisibility.add(i.toggleMenuActionViewItem.onDidChangeVisibility)),i.toggleMenuActionViewItem;if(o.actionViewItemProvider){var a=o.actionViewItemProvider(e,t);if(a)return a}if(e instanceof iy){var s=new RF(e,e.actions,n,{actionViewItemProvider:i.options.actionViewItemProvider,actionRunner:i.actionRunner,keybindingProvider:i.options.getKeyBinding,classNames:e.class,anchorAlignmentProvider:i.options.anchorAlignmentProvider,menuAsChild:!!i.options.renderDropdownAsChildElement,skipTelemetry:i.options.skipTelemetry,hoverDelegate:i.options.hoverDelegate});return s.setActionContext(i.actionBar.context),i.submenuActionViewItems.push(s),i.disposables.add(i._onDidChangeDropdownVisibility.add(s.onDidChangeVisibility)),s}}})),i}return p(t,e),h(t,[{key:"actionRunner",get:function(){return this.actionBar.actionRunner},set:function(e){this.actionBar.actionRunner=e}},{key:"getElement",value:function(){return this.element}},{key:"getItemAction",value:function(e){return this.actionBar.getAction(e)}},{key:"setActions",value:function(e,t){var n=this;this.clear();var i=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),i.push(this.toggleMenuAction)),i.forEach((function(e){var t,i;n.actionBar.push(e,{icon:null===(t=n.options.icon)||void 0===t||t,label:null!==(i=n.options.label)&&void 0!==i&&i,keybinding:n.getKeybindingLabel(e)})}))}},{key:"getKeybindingLabel",value:function(e){var t,n,i,r=null===(t=(n=this.options).getKeyBinding)||void 0===t?void 0:t.call(n,e);return null!==(i=null==r?void 0:r.getLabel())&&void 0!==i?i:void 0}},{key:"clear",value:function(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}},{key:"dispose",value:function(){this.clear(),this.disposables.dispose(),g(v(t.prototype),"dispose",this).call(this)}}]),t}(Ru),j5=function(e){function t(e,n){var i;return u(this,t),n=n||Xa("moreActions","More Actions..."),(i=l(this,t,[t.ID,n,void 0,!0]))._menuActions=[],i.toggleDropdownMenu=e,i}return p(t,e),h(t,[{key:"run",value:function(){var e=this;return s((function(){return E(this,(function(t){return e.toggleDropdownMenu(),[2]}))}))()}},{key:"menuActions",get:function(){return this._menuActions},set:function(e){this._menuActions=e}}]),t}($m);j5.ID="toolbar.toggle.more";var K5=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},q5=function(e,t){return function(n,i){t(n,i,e)}},G5=function(e){function t(e,n,i,r,o,a,s,c){var d;u(this,t),d=l(this,t,[e,o,b(_({getKeyBinding:function(e){var t;return null!==(t=a.lookupKeybinding(e.id))&&void 0!==t?t:void 0}},n),{allowContextMenu:!0,skipTelemetry:"string"==typeof(null==n?void 0:n.telemetrySource)})]),d._options=n,d._menuService=i,d._contextKeyService=r,d._contextMenuService=o,d._keybindingService=a,d._commandService=s,d._sessionDisposables=d._store.add(new Tu);var h=null==n?void 0:n.telemetrySource;return h&&d._store.add(d.actionBar.onDidRun((function(e){return c.publicLog2("workbenchActionExecuted",{id:e.action.id,from:h})}))),d}return p(t,e),h(t,[{key:"setActions",value:function(e){var n,i,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;this._sessionDisposables.clear();var s=e.slice(),l=o.slice(),u=[],c=0,d=[],h=!1;if(-1!==(null===(n=this._options)||void 0===n?void 0:n.hiddenItemStrategy))for(var f=0;f<s.length;f++){var p,m=s[f];if(m instanceof p_||m instanceof v_)if(m.hideActions)if(u.push(m.hideActions.toggle),m.hideActions.toggle.checked&&c++,m.hideActions.isHidden)h=!0,s[f]=void 0,0!==(null===(p=this._options)||void 0===p?void 0:p.hiddenItemStrategy)&&(d[f]=m)}if(void 0!==(null===(i=this._options)||void 0===i?void 0:i.overflowBehavior))for(var y=function(e,t){var n=new Set,i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;e.has(l)&&n.add(l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(new Set(this._options.overflowBehavior.exempted),Ts.map(s,(function(e){return null==e?void 0:e.id}))),b=this._options.overflowBehavior.maxItems-y.size,k=0,w=0;w<s.length;w++){var C=s[w];C&&(k++,y.has(C.id)||k>=b&&(s[w]=void 0,d[w]=C))}sa(s),sa(d),g(v(t.prototype),"setActions",this).call(this,s,ey.join(d,l)),(u.length>0||s.length>0)&&this._sessionDisposables.add(cp(this.getElement(),"contextmenu",(function(e){var t,n,i,o,s=new lg(ep(r.getElement()),e),l=r.getItemAction(s.target);if(l){s.preventDefault(),s.stopPropagation();var d=[];if(l instanceof p_&&l.menuKeybinding)d.push(l.menuKeybinding);else if(!(l instanceof v_||l instanceof j5)){var f=!!r._keybindingService.lookupKeybinding(l.id);d.push(sY(r._commandService,r._keybindingService,l.id,void 0,f))}if(u.length>0){var g,v=!1;if(1===c&&0===(null===(g=r._options)||void 0===g?void 0:g.hiddenItemStrategy)){v=!0;for(var p=0;p<u.length;p++)if(u[p].checked){u[p]=oy({id:l.id,label:l.label,checked:!0,enabled:!1,run:function(){}});break}}if(!v&&(l instanceof p_||l instanceof v_)){if(!l.hideActions)return;d.push(l.hideActions.hide)}else d.push(oy({id:"label",label:Xa("hide","Hide"),enabled:!1,run:function(){}}))}var m=ey.join(d,u);(null===(t=r._options)||void 0===t?void 0:t.resetMenu)&&!a&&(a=[r._options.resetMenu]),h&&a&&(m.push(new ey),m.push(oy({id:"resetThisMenu",label:Xa("resetThisMenu","Reset Menu"),run:function(){return r._menuService.resetHiddenStates(a)}}))),0!==m.length&&r._contextMenuService.showContextMenu({getAnchor:function(){return s},getActions:function(){return m},menuId:null===(n=r._options)||void 0===n?void 0:n.contextMenu,menuActionOptions:_({renderShortTitle:!0},null===(i=r._options)||void 0===i?void 0:i.menuOptions),skipTelemetry:"string"==typeof(null===(o=r._options)||void 0===o?void 0:o.telemetrySource),contextKeyService:r._contextKeyService})}})))}}]),t}(U5),Z5=function(e){function t(e,n,r,o,a,s,c,d,h){var f;u(this,t),(f=l(this,t,[e,_({resetMenu:n},r),o,a,s,c,d,h]))._onDidChangeMenuItems=f._store.add(new Zu),f.onDidChangeMenuItems=f._onDidChangeMenuItems.event;var p=f._store.add(o.createMenu(n,a,{emitEventsForSubmenuChanges:!0})),m=function(){var n,o,a,s=[],l=[];tW(p,null==r?void 0:r.menuOptions,{primary:s,secondary:l},null==r||null===(n=r.toolbarOptions)||void 0===n?void 0:n.primaryGroup,null==r||null===(o=r.toolbarOptions)||void 0===o?void 0:o.shouldInlineSubmenu,null==r||null===(a=r.toolbarOptions)||void 0===a?void 0:a.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",0===s.length&&0===l.length),g((i(f),v(t.prototype)),"setActions",f).call(f,s,l)};return f._store.add(p.onDidChange((function(){m(),f._onDidChangeMenuItems.fire(f)}))),m(),f}return p(t,e),h(t,[{key:"setActions",value:function(){throw new Lu("This toolbar is populated from a menu.")}}]),t}(G5=K5([q5(2,h_),q5(3,Ky),q5(4,GI),q5(5,ZI),q5(6,ay),q5(7,b_)],G5));Z5=K5([q5(3,h_),q5(4,Ky),q5(5,GI),q5(6,ZI),q5(7,ay),q5(8,b_)],Z5);var Y5=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Q5=function(e,t){return function(n,i){t(n,i,e)}},X5=[],$5=function(e){function t(e,n,i,r,o,a,s,c,d){var h;return u(this,t),(h=l(this,t))._diffModel=n,h._editors=i,h._options=r,h._sashLayout=o,h._boundarySashes=a,h._instantiationService=s,h._contextKeyService=c,h._menuService=d,h._menu=h._register(h._menuService.createMenu(d_.DiffEditorHunkToolbar,h._contextKeyService)),h._actions=rO(h,h._menu.onDidChange,(function(){return h._menu.getActions()})),h._hasActions=h._actions.map((function(e){return e.length>0})),h._showSash=UP(h,(function(e){return h._options.renderSideBySide.read(e)&&h._hasActions.read(e)})),h.width=UP(h,(function(e){return h._hasActions.read(e)?35:0})),h.elements=Lm("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:"35px"}},[]),h._currentDiff=UP(h,(function(e){var t,n=h._diffModel.read(e);if(n){var i=null===(t=n.diff.read(e))||void 0===t?void 0:t.mappings,r=h._editors.modifiedCursor.read(e);if(r)return null==i?void 0:i.find((function(e){return e.lineRangeMapping.modified.contains(r.lineNumber)}))}})),h._selectedDiffs=UP(h,(function(e){var t=h._diffModel.read(e),n=null==t?void 0:t.diff.read(e);if(!n)return X5;var i=h._editors.modifiedSelections.read(e);if(i.every((function(e){return e.isEmpty()})))return X5;var r=new Zw(i.map((function(e){return Gw.fromRangeInclusive(e)}))),o=n.mappings.filter((function(e){return e.lineRangeMapping.innerChanges&&r.intersects(e.lineRangeMapping.modified)})),a=o.map((function(e){return{mapping:e,rangeMappings:e.lineRangeMapping.innerChanges.filter((function(e){return i.some((function(t){return hd.areIntersecting(e.modifiedRange,t)}))}))}}));return 0===a.length||a.every((function(e){return 0===e.rangeMappings.length}))?X5:a})),h._register(function(e,t){return e.prepend(t),Mu((function(){t.remove()}))}(e,h.elements.root)),h._register(cp(h.elements.root,"click",(function(){h._editors.modified.focus()}))),h._register(w3(h.elements.root,{display:h._hasActions.map((function(e){return e?"block":"none"}))})),ZP(h,(function(t){return h._showSash.read(t)?new W5(e,h._sashLayout.dimensions,h._options.enableSplitViewResizing,h._boundarySashes,jP(h,(function(e){return h._sashLayout.sashLeft.read(e)-35}),(function(e,t){return h._sashLayout.sashLeft.set(e+35,t)})),(function(){return h._sashLayout.resetSash()})):void 0})).recomputeInitiallyAndOnChange(h._store),h._register(new B5(h._editors.modified,h.elements.root,{getIntersectingGutterItems:function(e,t){var n=h._diffModel.read(t);if(!n)return[];var i=n.diff.read(t);if(!i)return[];var r=h._selectedDiffs.read(t);if(r.length>0){var o=oC.fromRangeMappings(r.flatMap((function(e){return e.rangeMappings})));return[new J5(o,!0,d_.DiffEditorSelectionToolbar,void 0,n.model.original.uri,n.model.modified.uri)]}var a=h._currentDiff.read(t);return i.mappings.map((function(e){return new J5(e.lineRangeMapping.withInnerChangesFromLineRanges(),e.lineRangeMapping===(null==a?void 0:a.lineRangeMapping),d_.DiffEditorHunkToolbar,void 0,n.model.original.uri,n.model.modified.uri)}))},createView:function(e,t){return h._instantiationService.createInstance(e6,e,t,h)}})),h._register(cp(h.elements.gutter,rm.MOUSE_WHEEL,(function(e){h._editors.modified.getOption(104).handleMouseWheel&&h._editors.modified.delegateScrollFromMouseWheelEvent(e)}),{passive:!1})),h}return p(t,e),h(t,[{key:"computeStagedValue",value:function(e){var t,n=null!==(t=e.innerChanges)&&void 0!==t?t:[],i=new z5(this._editors.modifiedModel.get()),r=new z5(this._editors.original.getModel()),o=new Xw(n.map((function(e){return e.toTextEdit(i)})));return o.apply(r)}},{key:"layout",value:function(e){this.elements.gutter.style.left=e+"px"}}]),t}(Ru);$5=Y5([Q5(6,Gm),Q5(7,Ky),Q5(8,h_)],$5);var J5=function(){function e(t,n,i,r,o,a){u(this,e),this.mapping=t,this.showAlways=n,this.menuId=i,this.rangeOverride=r,this.originalUri=o,this.modifiedUri=a}return h(e,[{key:"id",get:function(){return this.mapping.modified.toString()}},{key:"range",get:function(){var e;return null!==(e=this.rangeOverride)&&void 0!==e?e:this.mapping.modified}}]),e}(),e6=function(e){function t(e,n,i,r){var o;u(this,t),(o=l(this,t))._item=e,o._elements=Lm("div.gutterItem",{style:{height:"20px",width:"34px"}},[Lm("div.background@background",{},[]),Lm("div.buttons@buttons",{},[])]),o._showAlways=o._item.map(o,(function(e){return e.showAlways})),o._menuId=o._item.map(o,(function(e){return e.menuId})),o._isSmall=BP(o,!1),o._lastItemRange=void 0,o._lastViewRange=void 0;var a=o._register(r.createInstance(KI,"element",!0,{position:{hoverPosition:1}}));return o._register(p3(n,o._elements.root)),o._register(XP((function(e){var t=o._showAlways.read(e);o._elements.root.classList.toggle("noTransition",!0),o._elements.root.classList.toggle("showAlways",t),setTimeout((function(){o._elements.root.classList.toggle("noTransition",!1)}),0)}))),o._register(eO((function(e,t){o._elements.buttons.replaceChildren();var n=t.add(r.createInstance(Z5,o._elements.buttons,o._menuId.read(e),{orientation:1,hoverDelegate:a,toolbarOptions:{primaryGroup:function(e){return e.startsWith("primary")}},overflowBehavior:{maxItems:o._isSmall.read(e)?1:3},hiddenItemStrategy:0,actionRunner:new V5((function(){var e=o._item.get(),t=e.mapping;return{mapping:t,originalWithModifiedChanges:i.computeStagedValue(t),originalUri:e.originalUri,modifiedUri:e.modifiedUri}})),menuOptions:{shouldForwardArgs:!0}}));t.add(n.onDidChangeMenuItems((function(){o._lastItemRange&&o.layout(o._lastItemRange,o._lastViewRange)})))}))),o}return p(t,e),h(t,[{key:"layout",value:function(e,t){this._lastItemRange=e,this._lastViewRange=t;var n=this._elements.buttons.clientHeight;this._isSmall.set(1===this._item.get().mapping.original.startLineNumber&&e.length<30,void 0),n=this._elements.buttons.clientHeight;var i=e.length/2-n/2,r=n,o=e.start+i,a=Bw.tryCreate(r,t.endExclusive-r-n),s=Bw.tryCreate(e.start+r,e.endExclusive-n-r);s&&a&&s.start<s.endExclusive&&(o=a.clip(o),o=s.clip(o)),this._elements.buttons.style.top="".concat(o-e.start,"px")}}]),t}(Ru);function t6(e){return n6.get(e)}e6=Y5([Q5(3,Gm)],e6);var n6=function(e){function t(e){var n,i,r,o;return u(this,t),(n=l(this,t)).editor=e,n._updateCounter=0,n._currentTransaction=void 0,n._model=BP(n,n.editor.getModel()),n.model=n._model,n.isReadonly=rO(n,n.editor.onDidChangeConfiguration,(function(){return n.editor.getOption(92)})),n._versionId=yO({owner:n,lazy:!0},null!==(r=null===(i=n.editor.getModel())||void 0===i?void 0:i.getVersionId())&&void 0!==r?r:null),n.versionId=n._versionId,n._selections=yO({owner:n,equalsFn:_P(yP(fd.selectionsEqual)),lazy:!0},null!==(o=n.editor.getSelections())&&void 0!==o?o:null),n.selections=n._selections,n.isFocused=rO(n,(function(e){var t=n.editor.onDidFocusEditorWidget(e),i=n.editor.onDidBlurEditorWidget(e);return{dispose:function(){t.dispose(),i.dispose()}}}),(function(){return n.editor.hasWidgetFocus()})),n.value=jP(n,(function(e){var t,i;return n.versionId.read(e),null!==(i=null===(t=n.model.read(e))||void 0===t?void 0:t.getValue())&&void 0!==i?i:""}),(function(e,t){var i=n.model.get();null!==i&&e!==i.getValue()&&i.setValue(e)})),n.valueIsEmpty=UP(n,(function(e){var t;return n.versionId.read(e),0===(null===(t=n.editor.getModel())||void 0===t?void 0:t.getValueLength())})),n.cursorSelection=KP({owner:n,equalsFn:_P(fd.selectionsEqual)},(function(e){var t,i;return null!==(i=null===(t=n.selections.read(e))||void 0===t?void 0:t[0])&&void 0!==i?i:null})),n.onDidType=lO(n),n.scrollTop=rO(n.editor.onDidScrollChange,(function(){return n.editor.getScrollTop()})),n.scrollLeft=rO(n.editor.onDidScrollChange,(function(){return n.editor.getScrollLeft()})),n.layoutInfo=rO(n.editor.onDidLayoutChange,(function(){return n.editor.getLayoutInfo()})),n.layoutInfoContentLeft=n.layoutInfo.map((function(e){return e.contentLeft})),n.layoutInfoDecorationsLeft=n.layoutInfo.map((function(e){return e.decorationsLeft})),n.contentWidth=rO(n.editor.onDidContentSizeChange,(function(){return n.editor.getContentWidth()})),n._overlayWidgetCounter=0,n._register(n.editor.onBeginUpdate((function(){return n._beginUpdate()}))),n._register(n.editor.onEndUpdate((function(){return n._endUpdate()}))),n._register(n.editor.onDidChangeModel((function(){n._beginUpdate();try{n._model.set(n.editor.getModel(),n._currentTransaction),n._forceUpdate()}finally{n._endUpdate()}}))),n._register(n.editor.onDidType((function(e){n._beginUpdate();try{n._forceUpdate(),n.onDidType.trigger(n._currentTransaction,e)}finally{n._endUpdate()}}))),n._register(n.editor.onDidChangeModelContent((function(e){n._beginUpdate();try{var t,i;n._versionId.set(null!==(i=null===(t=n.editor.getModel())||void 0===t?void 0:t.getVersionId())&&void 0!==i?i:null,n._currentTransaction,e),n._forceUpdate()}finally{n._endUpdate()}}))),n._register(n.editor.onDidChangeCursorSelection((function(e){n._beginUpdate();try{n._selections.set(n.editor.getSelections(),n._currentTransaction,e),n._forceUpdate()}finally{n._endUpdate()}}))),n}return p(t,e),h(t,[{key:"_beginUpdate",value:function(){this._updateCounter++,1===this._updateCounter&&(this._currentTransaction=new WP((function(){})))}},{key:"_endUpdate",value:function(){if(this._updateCounter--,0===this._updateCounter){var e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}},{key:"forceUpdate",value:function(e){this._beginUpdate();try{if(this._forceUpdate(),!e)return;return e(this._currentTransaction)}finally{this._endUpdate()}}},{key:"_forceUpdate",value:function(){this._beginUpdate();try{var e,t;this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(null!==(t=null===(e=this.editor.getModel())||void 0===e?void 0:e.getVersionId())&&void 0!==t?t:null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}},{key:"getOption",value:function(e){var t=this;return rO(this,(function(n){return t.editor.onDidChangeConfiguration((function(t){t.hasChanged(e)&&n(void 0)}))}),(function(){return t.editor.getOption(e)}))}},{key:"setDecorations",value:function(e){var t=new Tu,n=this.editor.createDecorationsCollection();return t.add($P({owner:this,debugName:function(){return"Apply decorations from ".concat(e.debugName)}},(function(t){var i=e.read(t);n.set(i)}))),t.add({dispose:function(){n.clear()}}),t}},{key:"createOverlayWidget",value:function(e){var t=this,n="observableOverlayWidget"+this._overlayWidgetCounter++,i={getDomNode:function(){return e.domNode},getPosition:function(){return e.position.get()},getId:function(){return n},allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:function(){return e.minContentWidthInPx.get()}};this.editor.addOverlayWidget(i);var r=XP((function(n){e.position.read(n),e.minContentWidthInPx.read(n),t.editor.layoutOverlayWidget(i)}));return Mu((function(){r.dispose(),t.editor.removeOverlayWidget(i)}))}}],[{key:"get",value:function(e){var n=t._map.get(e);if(!n){n=new t(e),t._map.set(e,n);var i=e.onDidDispose((function(){var n=t._map.get(e);n&&(t._map.delete(e),n.dispose(),i.dispose())}))}return n}}]),t}(Ru);function i6(e,t){return function(e,t){var n,i=new Tu,r=JP({owner:e.owner,debugName:e.debugName,debugReferenceFn:null!==(n=e.debugReferenceFn)&&void 0!==n?n:t,createEmptyChangeSummary:e.createEmptyChangeSummary,handleChange:e.handleChange},(function(e,n){i.clear(),t(e,n,i)}));return Mu((function(){r.dispose(),i.dispose()}))}({createEmptyChangeSummary:function(){return{deltas:[],didChange:!1}},handleChange:function(t,n){if(t.didChange(e)){var i=t.change;void 0!==i&&n.deltas.push(i),n.didChange=!0}return!0}},(function(n,i){var r=e.read(n);i.didChange&&t(r,i.deltas)}))}n6._map=new Map;var r6,o6=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},a6=function(e,t){return function(n,i){t(n,i,e)}},s6=(xt=function(e){function t(e,n,i,r){var o;u(this,t),(o=l(this,t))._editors=e,o._diffModel=n,o._options=i,o._instantiationService=r,o._modifiedOutlineSource=ZP(o,(function(e){var t=o._editors.modifiedModel.read(e),n=r6._breadcrumbsSourceFactory.read(e);return t&&n?n(t,o._instantiationService):void 0})),o._isUpdatingHiddenAreas=!1,o._register(o._editors.original.onDidChangeCursorPosition((function(e){if(1!==e.reason){var t=o._diffModel.get();TP((function(e){var n=!0,i=!1,r=void 0;try{for(var a,s=(o._editors.original.getSelections()||[])[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;null==t||t.ensureOriginalLineIsVisible(l.getStartPosition().lineNumber,0,e),null==t||t.ensureOriginalLineIsVisible(l.getEndPosition().lineNumber,0,e)}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}))}}))),o._register(o._editors.modified.onDidChangeCursorPosition((function(e){if(1!==e.reason){var t=o._diffModel.get();TP((function(e){var n=!0,i=!1,r=void 0;try{for(var a,s=(o._editors.modified.getSelections()||[])[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;null==t||t.ensureModifiedLineIsVisible(l.getStartPosition().lineNumber,0,e),null==t||t.ensureModifiedLineIsVisible(l.getEndPosition().lineNumber,0,e)}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}))}})));var a=o._diffModel.map((function(e,t){var n,i,r=null!==(i=null==e?void 0:e.unchangedRegions.read(t))&&void 0!==i?i:[];return 1===r.length&&1===r[0].modifiedLineNumber&&r[0].lineCount===(null===(n=o._editors.modifiedModel.read(t))||void 0===n?void 0:n.getLineCount())?[]:r}));o.viewZones=GP(o,(function(e,t){var n=function(n){var a=c[n];if(a.shouldHideControls(e))return"continue";if(u&&(0===n||n===c.length-1))return"continue";if(u){var d=UP(o,(function(e){return a.getHiddenOriginalRange(e).startLineNumber-1})),h=new b3(d,12);r.push(h),t.add(new u6(o._editors.original,h,a,!l));var f=UP(o,(function(e){return a.getHiddenModifiedRange(e).startLineNumber-1})),g=new b3(f,12);s.push(g),t.add(new u6(o._editors.modified,g,a))}else{var v=UP(o,(function(e){return a.getHiddenOriginalRange(e).startLineNumber-1})),p=new b3(v,24);r.push(p),t.add(new c6(o._editors.original,p,a,a.originalUnchangedRange,!l,i,(function(e){return o._diffModel.get().ensureModifiedLineIsVisible(e,2,void 0)}),o._options));var m=UP(o,(function(e){return a.getHiddenModifiedRange(e).startLineNumber-1})),y=new b3(m,24);s.push(y),t.add(new c6(o._editors.modified,y,a,a.modifiedUnchangedRange,!1,i,(function(e){return o._diffModel.get().ensureModifiedLineIsVisible(e,2,void 0)}),o._options))}},i=o._modifiedOutlineSource.read(e);if(!i)return{origViewZones:[],modViewZones:[]};for(var r=[],s=[],l=o._options.renderSideBySide.read(e),u=o._options.compactMode.read(e),c=a.read(e),d=0;d<c.length;d++)n(d);return{origViewZones:r,modViewZones:s}}));var s={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},c={description:"Fold Unchanged",glyphMarginHoverMessage:new oT(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(Xa("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+ny.asClassName(bd.fold),zIndex:10001};return o._register(v3(o._editors.original,UP(o,(function(e){var t=a.read(e),n=t.map((function(e){return{range:e.originalUnchangedRange.toInclusiveRange(),options:s}})),i=!0,r=!1,o=void 0;try{for(var l,u=t[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var d=l.value;d.shouldHideControls(e)&&n.push({range:hd.fromPositions(new dd(d.originalLineNumber,1)),options:c})}}catch(e){r=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(r)throw o}}return n})))),o._register(v3(o._editors.modified,UP(o,(function(e){var t=a.read(e),n=t.map((function(e){return{range:e.modifiedUnchangedRange.toInclusiveRange(),options:s}})),i=!0,r=!1,o=void 0;try{for(var l,u=t[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var d=l.value;d.shouldHideControls(e)&&n.push({range:Gw.ofLength(d.modifiedLineNumber,1).toInclusiveRange(),options:c})}}catch(e){r=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(r)throw o}}return n})))),o._register(XP((function(e){var t=a.read(e);o._isUpdatingHiddenAreas=!0;try{o._editors.original.setHiddenAreas(t.map((function(t){return t.getHiddenOriginalRange(e).toInclusiveRange()})).filter(Aa)),o._editors.modified.setHiddenAreas(t.map((function(t){return t.getHiddenModifiedRange(e).toInclusiveRange()})).filter(Aa))}finally{o._isUpdatingHiddenAreas=!1}}))),o._register(o._editors.modified.onMouseUp((function(e){var t;if(!e.event.rightButton&&e.target.position&&(null===(t=e.target.element)||void 0===t?void 0:t.className.includes("fold-unchanged"))){var n=e.target.position.lineNumber,i=o._diffModel.get();if(!i)return;var r=i.unchangedRegions.get().find((function(e){return e.modifiedUnchangedRange.includes(n)}));if(!r)return;r.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}}))),o._register(o._editors.original.onMouseUp((function(e){var t;if(!e.event.rightButton&&e.target.position&&(null===(t=e.target.element)||void 0===t?void 0:t.className.includes("fold-unchanged"))){var n=e.target.position.lineNumber,i=o._diffModel.get();if(!i)return;var r=i.unchangedRegions.get().find((function(e){return e.originalUnchangedRange.includes(n)}));if(!r)return;r.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}}))),o}return p(t,e),h(t,[{key:"isUpdatingHiddenAreas",get:function(){return this._isUpdatingHiddenAreas}}],[{key:"setBreadcrumbsSourceFactory",value:function(e){this._breadcrumbsSourceFactory.set(e,void 0)}}]),t}(Ru),r6=xt,xt._breadcrumbsSourceFactory=BP(r6,(function(){return{dispose:function(){},getBreadcrumbItems:function(e,t){return[]}}})),xt);s6=r6=o6([a6(3,Gm)],s6);var l6,u6=function(e){function t(e,n,i){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];u(this,t);var a=Lm("div.diff-hidden-lines-widget");return(r=l(this,t,[e,n,a.root]))._unchangedRegion=i,r._hide=o,r._nodes=Lm("div.diff-hidden-lines-compact",[Lm("div.line-left",[]),Lm("div.text@text",[]),Lm("div.line-right",[])]),a.root.appendChild(r._nodes.root),r._hide&&r._nodes.root.replaceChildren(),r._register(XP((function(e){if(!r._hide){var t=Xa("hiddenLines","{0} hidden lines",r._unchangedRegion.getHiddenModifiedRange(e).length);r._nodes.text.innerText=t}}))),r}return p(t,e),t}(_3),c6=function(e){function t(e,n,i,r,o,a,s,c){var d;u(this,t);var h=Lm("div.diff-hidden-lines-widget");(d=l(this,t,[e,n,h.root]))._editor=e,d._unchangedRegion=i,d._unchangedRegionRange=r,d._hide=o,d._modifiedOutlineSource=a,d._revealModifiedHiddenLine=s,d._options=c,d._nodes=Lm("div.diff-hidden-lines",[Lm("div.top@top",{title:Xa("diff.hiddenLines.top","Click or drag to show more above")}),Lm("div.center@content",{style:{display:"flex"}},[Lm("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[gm.apply(void 0,["a",{title:Xa("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:function(){d._unchangedRegion.showAll(void 0)}}].concat(x(AE("$(unfold)"))))]),Lm("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),Lm("div.bottom@bottom",{title:Xa("diff.bottom","Click or drag to show more below"),role:"button"})]),h.root.appendChild(d._nodes.root),d._hide?cm(d._nodes.first):d._register(w3(d._nodes.first,{width:t6(d._editor).layoutInfoContentLeft})),d._register(XP((function(e){var t=d._unchangedRegion.visibleLineCountTop.read(e)+d._unchangedRegion.visibleLineCountBottom.read(e)===d._unchangedRegion.lineCount;d._nodes.bottom.classList.toggle("canMoveTop",!t),d._nodes.bottom.classList.toggle("canMoveBottom",d._unchangedRegion.visibleLineCountBottom.read(e)>0),d._nodes.top.classList.toggle("canMoveTop",d._unchangedRegion.visibleLineCountTop.read(e)>0),d._nodes.top.classList.toggle("canMoveBottom",!t);var n=d._unchangedRegion.isDragged.read(e),i=d._editor.getDomNode();i&&(i.classList.toggle("draggingUnchangedRegion",!!n),"top"===n?(i.classList.toggle("canMoveTop",d._unchangedRegion.visibleLineCountTop.read(e)>0),i.classList.toggle("canMoveBottom",!t)):"bottom"===n?(i.classList.toggle("canMoveTop",!t),i.classList.toggle("canMoveBottom",d._unchangedRegion.visibleLineCountBottom.read(e)>0)):(i.classList.toggle("canMoveTop",!1),i.classList.toggle("canMoveBottom",!1)))})));var f=d._editor;return d._register(cp(d._nodes.top,"mousedown",(function(e){if(0===e.button){d._nodes.top.classList.toggle("dragging",!0),d._nodes.root.classList.toggle("dragging",!0),e.preventDefault();var t=e.clientY,n=!1,i=d._unchangedRegion.visibleLineCountTop.get();d._unchangedRegion.isDragged.set("top",void 0);var r=ep(d._nodes.top),o=cp(r,"mousemove",(function(e){var r=e.clientY-t;n=n||Math.abs(r)>2;var o=Math.round(r/f.getOption(67)),a=Math.max(0,Math.min(i+o,d._unchangedRegion.getMaxVisibleLineCountTop()));d._unchangedRegion.visibleLineCountTop.set(a,void 0)})),a=cp(r,"mouseup",(function(e){n||d._unchangedRegion.showMoreAbove(d._options.hideUnchangedRegionsRevealLineCount.get(),void 0),d._nodes.top.classList.toggle("dragging",!1),d._nodes.root.classList.toggle("dragging",!1),d._unchangedRegion.isDragged.set(void 0,void 0),o.dispose(),a.dispose()}))}}))),d._register(cp(d._nodes.bottom,"mousedown",(function(e){if(0===e.button){d._nodes.bottom.classList.toggle("dragging",!0),d._nodes.root.classList.toggle("dragging",!0),e.preventDefault();var t=e.clientY,n=!1,i=d._unchangedRegion.visibleLineCountBottom.get();d._unchangedRegion.isDragged.set("bottom",void 0);var r=ep(d._nodes.bottom),o=cp(r,"mousemove",(function(e){var r=e.clientY-t;n=n||Math.abs(r)>2;var o=Math.round(r/f.getOption(67)),a=Math.max(0,Math.min(i-o,d._unchangedRegion.getMaxVisibleLineCountBottom())),s=d._unchangedRegionRange.endLineNumberExclusive>f.getModel().getLineCount()?f.getContentHeight():f.getTopForLineNumber(d._unchangedRegionRange.endLineNumberExclusive);d._unchangedRegion.visibleLineCountBottom.set(a,void 0);var l=d._unchangedRegionRange.endLineNumberExclusive>f.getModel().getLineCount()?f.getContentHeight():f.getTopForLineNumber(d._unchangedRegionRange.endLineNumberExclusive);f.setScrollTop(f.getScrollTop()+(l-s))})),a=cp(r,"mouseup",(function(e){if(d._unchangedRegion.isDragged.set(void 0,void 0),!n){var t=f.getTopForLineNumber(d._unchangedRegionRange.endLineNumberExclusive);d._unchangedRegion.showMoreBelow(d._options.hideUnchangedRegionsRevealLineCount.get(),void 0);var i=f.getTopForLineNumber(d._unchangedRegionRange.endLineNumberExclusive);f.setScrollTop(f.getScrollTop()+(i-t))}d._nodes.bottom.classList.toggle("dragging",!1),d._nodes.root.classList.toggle("dragging",!1),o.dispose(),a.dispose()}))}}))),d._register(XP((function(e){var t=[];if(!d._hide){var n=Xa("hiddenLines","{0} hidden lines",i.getHiddenModifiedRange(e).length),r=gm("span",{title:Xa("diff.hiddenLines.expandAll","Double click to unfold")},n);r.addEventListener("dblclick",(function(e){0===e.button&&(e.preventDefault(),d._unchangedRegion.showAll(void 0))})),t.push(r);var o=d._unchangedRegion.getHiddenModifiedRange(e),a=d._modifiedOutlineSource.getBreadcrumbItems(o,e);if(a.length>0){var s=function(e){var n=a[e],i=Lm("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[PE(Md.toIcon(n.kind))," ",n.name].concat(x(e===a.length-1?[]:[PE(bd.chevronRight)]))).root;t.push(i),i.onclick=function(){d._revealModifiedHiddenLine(n.startLineNumber)}};t.push(gm("span",void 0,"  |  "));for(var l=0;l<a.length;l++)s(l)}}cm.apply(void 0,[d._nodes.others].concat(x(t)))}))),d}return p(t,e),t}(_3),d6=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},h6=function(e,t){return function(n,i){t(n,i,e)}},f6=(Lt=function(e){function t(e,n,i,r,o,a,s){var c;u(this,t),(c=l(this,t))._editors=e,c._rootElement=n,c._diffModel=i,c._rootWidth=r,c._rootHeight=o,c._modifiedEditorLayoutInfo=a,c._themeService=s,c.width=l6.ENTIRE_DIFF_OVERVIEW_WIDTH;var d=rO(c._themeService.onDidColorThemeChange,(function(){return c._themeService.getColorTheme()})),h=UP((function(e){var t=d.read(e);return{insertColor:t.getColor(FD)||(t.getColor(PD)||RD).transparent(2),removeColor:t.getColor(WD)||(t.getColor(OD)||AD).transparent(2)}})),f=Pm(document.createElement("div"));f.setClassName("diffViewport"),f.setPosition("absolute");var g=Lm("div.diffOverview",{style:{position:"absolute",top:"0px",width:l6.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;return c._register(p3(g,f.domNode)),c._register(hp(g,rm.POINTER_DOWN,(function(e){c._editors.modified.delegateVerticalScrollbarPointerDown(e)}))),c._register(cp(g,rm.MOUSE_WHEEL,(function(e){c._editors.modified.delegateScrollFromMouseWheelEvent(e)}),{passive:!1})),c._register(p3(c._rootElement,g)),c._register(eO((function(e,t){var n=c._diffModel.read(e),i=c._editors.original.createOverviewRuler("original diffOverviewRuler");i&&(t.add(i),t.add(p3(g,i.getDomNode())));var r=c._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(r&&(t.add(r),t.add(p3(g,r.getDomNode()))),i&&r){var o=aO("viewZoneChanged",c._editors.original.onDidChangeViewZones),a=aO("viewZoneChanged",c._editors.modified.onDidChangeViewZones),s=aO("hiddenRangesChanged",c._editors.original.onDidChangeHiddenAreas),l=aO("hiddenRangesChanged",c._editors.modified.onDidChangeHiddenAreas);t.add(XP((function(e){var t,u=function(e,t,n){var i=n._getViewModel();return i?e.filter((function(e){return e.length>0})).map((function(e){var n=i.coordinatesConverter.convertModelPositionToViewPosition(new dd(e.startLineNumber,1)),r=i.coordinatesConverter.convertModelPositionToViewPosition(new dd(e.endLineNumberExclusive,1)),o=r.lineNumber-n.lineNumber;return new O1(n.lineNumber,r.lineNumber,o,t.toString())})):[]};o.read(e),a.read(e),s.read(e),l.read(e);var d=h.read(e),f=null==n||null===(t=n.diff.read(e))||void 0===t?void 0:t.mappings,g=u((f||[]).map((function(e){return e.lineRangeMapping.original})),d.removeColor,c._editors.original),v=u((f||[]).map((function(e){return e.lineRangeMapping.modified})),d.insertColor,c._editors.modified);null==i||i.setZones(g),null==r||r.setZones(v)}))),t.add(XP((function(e){var t=c._rootHeight.read(e),n=c._rootWidth.read(e),o=c._modifiedEditorLayoutInfo.read(e);if(o){var a=l6.ENTIRE_DIFF_OVERVIEW_WIDTH-2*l6.ONE_OVERVIEW_WIDTH;i.setLayout({top:0,height:t,right:a+l6.ONE_OVERVIEW_WIDTH,width:l6.ONE_OVERVIEW_WIDTH}),r.setLayout({top:0,height:t,right:0,width:l6.ONE_OVERVIEW_WIDTH});var s=c._editors.modifiedScrollTop.read(e),l=c._editors.modifiedScrollHeight.read(e),u=c._editors.modified.getOption(104),d=new oE(u.verticalHasArrows?u.arrowSize:0,u.verticalScrollbarSize,0,o.height,l,s);f.setTop(d.getSliderPosition()),f.setHeight(d.getSliderSize())}else f.setTop(0),f.setHeight(0);g.style.height=t+"px",g.style.left=n-l6.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",f.setWidth(l6.ENTIRE_DIFF_OVERVIEW_WIDTH)})))}}))),c}return p(t,e),t}(Ru),l6=Lt,Lt.ONE_OVERVIEW_WIDTH=15,Lt.ENTIRE_DIFF_OVERVIEW_WIDTH=2*Lt.ONE_OVERVIEW_WIDTH,Lt);f6=l6=d6([h6(6,PS)],f6);var g6=[],v6=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t))._editors=e,o._diffModel=n,o._options=i,o._widget=r,o._selectedDiffs=UP(o,(function(e){var t=o._diffModel.read(e),n=null==t?void 0:t.diff.read(e);if(!n)return g6;var i=o._editors.modifiedSelections.read(e);if(i.every((function(e){return e.isEmpty()})))return g6;var r=new Zw(i.map((function(e){return Gw.fromRangeInclusive(e)}))),a=n.mappings.filter((function(e){return e.lineRangeMapping.innerChanges&&r.intersects(e.lineRangeMapping.modified)})),s=a.map((function(e){return{mapping:e,rangeMappings:e.lineRangeMapping.innerChanges.filter((function(e){return i.some((function(t){return hd.areIntersecting(e.modifiedRange,t)}))}))}}));return 0===s.length||s.every((function(e){return 0===e.rangeMappings.length}))?g6:s})),o._register(eO((function(e,t){if(o._options.shouldRenderOldRevertArrows.read(e)){var n=o._diffModel.read(e),i=null==n?void 0:n.diff.read(e);if(n&&i&&!n.movedTextToCompare.read(e)){var r=[],a=o._selectedDiffs.read(e),s=new Set(a.map((function(e){return e.mapping})));if(a.length>0){var l=o._editors.modifiedSelections.read(e),u=t.add(new p6(l[l.length-1].positionLineNumber,o._widget,a.flatMap((function(e){return e.rangeMappings})),!0));o._editors.modified.addGlyphMarginWidget(u),r.push(u)}var c=!0,d=!1,h=void 0;try{for(var f,g=i.mappings[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;if(!s.has(v)&&(!v.lineRangeMapping.modified.isEmpty&&v.lineRangeMapping.innerChanges)){var p=t.add(new p6(v.lineRangeMapping.modified.startLineNumber,o._widget,v.lineRangeMapping,!1));o._editors.modified.addGlyphMarginWidget(p),r.push(p)}}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}t.add(Mu((function(){var e=!0,t=!1,n=void 0;try{for(var i,a=r[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var s=i.value;o._editors.modified.removeGlyphMarginWidget(s)}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}})))}}}))),o}return p(t,e),t}(Ru),p6=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t))._lineNumber=e,o._widget=n,o._diffs=i,o._revertSelection=r,o._id="revertButton".concat(t.counter++),o._domNode=Lm("div.revertButton",{title:o._revertSelection?Xa("revertSelectedChanges","Revert Selected Changes"):Xa("revertChange","Revert Change")},[PE(bd.arrowRight)]).root,o._register(cp(o._domNode,rm.MOUSE_DOWN,(function(e){2!==e.button&&(e.stopPropagation(),e.preventDefault())}))),o._register(cp(o._domNode,rm.MOUSE_UP,(function(e){e.stopPropagation(),e.preventDefault()}))),o._register(cp(o._domNode,rm.CLICK,(function(e){o._diffs instanceof nC?o._widget.revert(o._diffs):o._widget.revertRangeMappings(o._diffs),e.stopPropagation(),e.preventDefault()}))),o}return p(t,e),h(t,[{key:"getId",value:function(){return this._id}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return{lane:hw.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}}]),t}(Ru);function m6(e,t,n){return function(e,t,n){var i,r;return new oO(new kP(e.owner,e.debugName,null!==(i=e.debugReferenceFn)&&void 0!==i?i:n),t,n,(function(){return oO.globalTransaction}),null!==(r=e.equalsFn)&&void 0!==r?r:mP)}({debugName:function(){return'Configuration Key "'.concat(e,'"')}},(function(t){return n.onDidChangeConfiguration((function(n){n.affectsConfiguration(e)&&t(n)}))}),(function(){var i;return null!==(i=n.getValue(e))&&void 0!==i?i:t}))}function y6(e,t,n){var i=e.bindTo(t);return $P({debugName:function(){return'Set Context Key "'.concat(e.key,'"')}},(function(e){i.set(n(e))}))}p6.counter=0;var _6=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},b6=function(e,t){return function(n,i){t(n,i,e)}},k6=function(e){function t(e,n,i,r,o,a,s){var c;return u(this,t),(c=l(this,t)).originalEditorElement=e,c.modifiedEditorElement=n,c._options=i,c._argCodeEditorWidgetOptions=r,c._createInnerEditor=o,c._instantiationService=a,c._keybindingService=s,c.original=c._register(c._createLeftHandSideEditor(c._options.editorOptions.get(),c._argCodeEditorWidgetOptions.originalEditor||{})),c.modified=c._register(c._createRightHandSideEditor(c._options.editorOptions.get(),c._argCodeEditorWidgetOptions.modifiedEditor||{})),c._onDidContentSizeChange=c._register(new Zu),c.modifiedScrollTop=rO(c,c.modified.onDidScrollChange,(function(){return c.modified.getScrollTop()})),c.modifiedScrollHeight=rO(c,c.modified.onDidScrollChange,(function(){return c.modified.getScrollHeight()})),c.modifiedObs=t6(c.modified),c.originalObs=t6(c.original),c.modifiedModel=c.modifiedObs.model,c.modifiedSelections=rO(c,c.modified.onDidChangeCursorSelection,(function(){var e;return null!==(e=c.modified.getSelections())&&void 0!==e?e:[]})),c.modifiedCursor=KP({owner:c,equalsFn:dd.equals},(function(e){var t,n;return null!==(n=null===(t=c.modifiedSelections.read(e)[0])||void 0===t?void 0:t.getPosition())&&void 0!==n?n:new dd(1,1)})),c.originalCursor=rO(c,c.original.onDidChangeCursorPosition,(function(){var e;return null!==(e=c.original.getPosition())&&void 0!==e?e:new dd(1,1)})),c._argCodeEditorWidgetOptions=null,c._register(JP({createEmptyChangeSummary:function(){return{}},handleChange:function(e,t){return e.didChange(i.editorOptions)&&Object.assign(t,e.change.changedOptions),!0}},(function(e,t){i.editorOptions.read(e),c._options.renderSideBySide.read(e),c.modified.updateOptions(c._adjustOptionsForRightHandSide(e,t)),c.original.updateOptions(c._adjustOptionsForLeftHandSide(e,t))}))),c}return p(t,e),h(t,[{key:"onDidContentSizeChange",get:function(){return this._onDidContentSizeChange.event}},{key:"_createLeftHandSideEditor",value:function(e,t){var n=this._adjustOptionsForLeftHandSide(void 0,e),i=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,n,t);return i.setContextValue("isInDiffLeftEditor",!0),i}},{key:"_createRightHandSideEditor",value:function(e,t){var n=this._adjustOptionsForRightHandSide(void 0,e),i=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,n,t);return i.setContextValue("isInDiffRightEditor",!0),i}},{key:"_constructInnerEditor",value:function(e,t,n,i){var r=this,o=this._createInnerEditor(e,t,n,i);return this._register(o.onDidContentSizeChange((function(e){var t=r.original.getContentWidth()+r.modified.getContentWidth()+f6.ENTIRE_DIFF_OVERVIEW_WIDTH,n=Math.max(r.modified.getContentHeight(),r.original.getContentHeight());r._onDidContentSizeChange.fire({contentHeight:n,contentWidth:t,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})}))),o}},{key:"_adjustOptionsForLeftHandSide",value:function(e,t){var n=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(n.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},n.wordWrapOverride1=this._options.diffWordWrap.get()):(n.wordWrapOverride1="off",n.wordWrapOverride2="off",n.stickyScroll={enabled:!1},n.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),n.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(n.ariaLabel=t.originalAriaLabel),n.ariaLabel=this._updateAriaLabel(n.ariaLabel),n.readOnly=!this._options.originalEditable.get(),n.dropIntoEditor={enabled:!n.readOnly},n.extraEditorClassName="original-in-monaco-diff-editor",n}},{key:"_adjustOptionsForRightHandSide",value:function(e,t){var n=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(n.ariaLabel=t.modifiedAriaLabel),n.ariaLabel=this._updateAriaLabel(n.ariaLabel),n.wordWrapOverride1=this._options.diffWordWrap.get(),n.revealHorizontalRightPadding=hu.revealHorizontalRightPadding.defaultValue+f6.ENTIRE_DIFF_OVERVIEW_WIDTH,n.scrollbar.verticalHasArrows=!1,n.extraEditorClassName="modified-in-monaco-diff-editor",n}},{key:"_adjustOptionsForSubEditor",value:function(e){var t=b(_({},e),{dimension:{height:0,width:0}});return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=_({},t.scrollbar||{}),t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap=_({},t.minimap||{}),t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}},{key:"_updateAriaLabel",value:function(e){var t;e||(e="");var n=Xa("diff-aria-navigation-tip"," use {0} to open the accessibility help.",null===(t=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))||void 0===t?void 0:t.getAriaLabel());return this._options.accessibilityVerbose.get()?e+n:e?e.replaceAll(n,""):""}}]),t}(Ru);k6=_6([b6(5,Gm),b6(6,ZI)],k6);var w6=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments))._id=++t.idCounter,e._onDidDispose=e._register(new Zu),e.onDidDispose=e._onDidDispose.event,e}return p(t,e),h(t,[{key:"getId",value:function(){return this.getEditorType()+":v2:"+this._id}},{key:"getVisibleColumnFromPosition",value:function(e){return this._targetEditor.getVisibleColumnFromPosition(e)}},{key:"getPosition",value:function(){return this._targetEditor.getPosition()}},{key:"setPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setPosition(e,t)}},{key:"revealLine",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLine(e,t)}},{key:"revealLineInCenter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineInCenter(e,t)}},{key:"revealLineInCenterIfOutsideViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}},{key:"revealLineNearTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineNearTop(e,t)}},{key:"revealPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPosition(e,t)}},{key:"revealPositionInCenter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionInCenter(e,t)}},{key:"revealPositionInCenterIfOutsideViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}},{key:"revealPositionNearTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionNearTop(e,t)}},{key:"getSelection",value:function(){return this._targetEditor.getSelection()}},{key:"getSelections",value:function(){return this._targetEditor.getSelections()}},{key:"setSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setSelection(e,t)}},{key:"setSelections",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setSelections(e,t)}},{key:"revealLines",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLines(e,t,n)}},{key:"revealLinesInCenter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesInCenter(e,t,n)}},{key:"revealLinesInCenterIfOutsideViewport",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}},{key:"revealLinesNearTop",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesNearTop(e,t,n)}},{key:"revealRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._targetEditor.revealRange(e,t,n,i)}},{key:"revealRangeInCenter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeInCenter(e,t)}},{key:"revealRangeInCenterIfOutsideViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}},{key:"revealRangeNearTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeNearTop(e,t)}},{key:"revealRangeNearTopIfOutsideViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}},{key:"revealRangeAtTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeAtTop(e,t)}},{key:"getSupportedActions",value:function(){return this._targetEditor.getSupportedActions()}},{key:"focus",value:function(){this._targetEditor.focus()}},{key:"trigger",value:function(e,t,n){this._targetEditor.trigger(e,t,n)}},{key:"createDecorationsCollection",value:function(e){return this._targetEditor.createDecorationsCollection(e)}},{key:"changeDecorations",value:function(e){return this._targetEditor.changeDecorations(e)}}]),t}(Ru);w6.idCounter=0;var C6=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},S6=function(e,t){return function(n,i){t(n,i,e)}},x6=function(){function e(t,n){var i=this;u(this,e),this._accessibilityService=n,this._diffEditorWidth=BP(this,0),this._screenReaderMode=rO(this,this._accessibilityService.onDidChangeScreenReaderOptimized,(function(){return i._accessibilityService.isScreenReaderOptimized()})),this.couldShowInlineViewBecauseOfSize=UP(this,(function(e){return i._options.read(e).renderSideBySide&&i._diffEditorWidth.read(e)<=i._options.read(e).renderSideBySideInlineBreakpoint})),this.renderOverviewRuler=UP(this,(function(e){return i._options.read(e).renderOverviewRuler})),this.renderSideBySide=UP(this,(function(e){return(!i.compactMode.read(e)||!i.shouldRenderInlineViewInSmartMode.read(e))&&(i._options.read(e).renderSideBySide&&!(i._options.read(e).useInlineViewWhenSpaceIsLimited&&i.couldShowInlineViewBecauseOfSize.read(e)&&!i._screenReaderMode.read(e)))})),this.readOnly=UP(this,(function(e){return i._options.read(e).readOnly})),this.shouldRenderOldRevertArrows=UP(this,(function(e){return!!i._options.read(e).renderMarginRevertIcon&&(!!i.renderSideBySide.read(e)&&(!i.readOnly.read(e)&&!i.shouldRenderGutterMenu.read(e)))})),this.shouldRenderGutterMenu=UP(this,(function(e){return i._options.read(e).renderGutterMenu})),this.renderIndicators=UP(this,(function(e){return i._options.read(e).renderIndicators})),this.enableSplitViewResizing=UP(this,(function(e){return i._options.read(e).enableSplitViewResizing})),this.splitViewDefaultRatio=UP(this,(function(e){return i._options.read(e).splitViewDefaultRatio})),this.ignoreTrimWhitespace=UP(this,(function(e){return i._options.read(e).ignoreTrimWhitespace})),this.maxComputationTimeMs=UP(this,(function(e){return i._options.read(e).maxComputationTime})),this.showMoves=UP(this,(function(e){return i._options.read(e).experimental.showMoves&&i.renderSideBySide.read(e)})),this.isInEmbeddedEditor=UP(this,(function(e){return i._options.read(e).isInEmbeddedEditor})),this.diffWordWrap=UP(this,(function(e){return i._options.read(e).diffWordWrap})),this.originalEditable=UP(this,(function(e){return i._options.read(e).originalEditable})),this.diffCodeLens=UP(this,(function(e){return i._options.read(e).diffCodeLens})),this.accessibilityVerbose=UP(this,(function(e){return i._options.read(e).accessibilityVerbose})),this.diffAlgorithm=UP(this,(function(e){return i._options.read(e).diffAlgorithm})),this.showEmptyDecorations=UP(this,(function(e){return i._options.read(e).experimental.showEmptyDecorations})),this.onlyShowAccessibleDiffViewer=UP(this,(function(e){return i._options.read(e).onlyShowAccessibleDiffViewer})),this.compactMode=UP(this,(function(e){return i._options.read(e).compactMode})),this.trueInlineDiffRenderingEnabled=UP(this,(function(e){return i._options.read(e).experimental.useTrueInlineView})),this.useTrueInlineDiffRendering=UP(this,(function(e){return!i.renderSideBySide.read(e)&&i.trueInlineDiffRenderingEnabled.read(e)})),this.hideUnchangedRegions=UP(this,(function(e){return i._options.read(e).hideUnchangedRegions.enabled})),this.hideUnchangedRegionsRevealLineCount=UP(this,(function(e){return i._options.read(e).hideUnchangedRegions.revealLineCount})),this.hideUnchangedRegionsContextLineCount=UP(this,(function(e){return i._options.read(e).hideUnchangedRegions.contextLineCount})),this.hideUnchangedRegionsMinimumLineCount=UP(this,(function(e){return i._options.read(e).hideUnchangedRegions.minimumLineCount})),this._model=BP(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,(function(e){return function(e,t){return hO(e,(function(e,n){return null!=n?n:t(e)}))}(i,(function(t){var n=null==e?void 0:e.diff.read(t);return n?function(e,t){return e.mappings.every((function(e){return function(e){return 0===e.original.length}(e.lineRangeMapping)||function(e){return 0===e.modified.length}(e.lineRangeMapping)||t&&M5(e.lineRangeMapping)}))}(n,i.trueInlineDiffRenderingEnabled.read(t)):void 0}))})).flatten().map(this,(function(e){return!!e})),this.inlineViewHideOriginalLineNumbers=this.compactMode;var r=_({},t,L6(t,ZR));this._options=BP(this,r)}return h(e,[{key:"editorOptions",get:function(){return this._options}},{key:"updateOptions",value:function(e){var t=L6(e,this._options.get()),n=_({},this._options.get(),e,t);this._options.set(n,void 0,{changedOptions:e})}},{key:"setWidth",value:function(e){this._diffEditorWidth.set(e,void 0)}},{key:"setModel",value:function(e){this._model.set(e,void 0)}}]),e}();function L6(e,t){var n,i,r,o,a,s,l,u,c;return{enableSplitViewResizing:Ro(e.enableSplitViewResizing,t.enableSplitViewResizing),splitViewDefaultRatio:il(e.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:Ro(e.renderSideBySide,t.renderSideBySide),renderMarginRevertIcon:Ro(e.renderMarginRevertIcon,t.renderMarginRevertIcon),maxComputationTime:tl(e.maxComputationTime,t.maxComputationTime,0,1073741824),maxFileSize:tl(e.maxFileSize,t.maxFileSize,0,1073741824),ignoreTrimWhitespace:Ro(e.ignoreTrimWhitespace,t.ignoreTrimWhitespace),renderIndicators:Ro(e.renderIndicators,t.renderIndicators),originalEditable:Ro(e.originalEditable,t.originalEditable),diffCodeLens:Ro(e.diffCodeLens,t.diffCodeLens),renderOverviewRuler:Ro(e.renderOverviewRuler,t.renderOverviewRuler),diffWordWrap:al(e.diffWordWrap,t.diffWordWrap,["off","on","inherit"]),diffAlgorithm:al(e.diffAlgorithm,t.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:Ro(e.accessibilityVerbose,t.accessibilityVerbose),experimental:{showMoves:Ro(null===(n=e.experimental)||void 0===n?void 0:n.showMoves,t.experimental.showMoves),showEmptyDecorations:Ro(null===(i=e.experimental)||void 0===i?void 0:i.showEmptyDecorations,t.experimental.showEmptyDecorations),useTrueInlineView:Ro(null===(r=e.experimental)||void 0===r?void 0:r.useTrueInlineView,t.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:Ro(null!==(c=null===(o=e.hideUnchangedRegions)||void 0===o?void 0:o.enabled)&&void 0!==c?c:null===(a=e.experimental)||void 0===a?void 0:a.collapseUnchangedRegions,t.hideUnchangedRegions.enabled),contextLineCount:tl(null===(s=e.hideUnchangedRegions)||void 0===s?void 0:s.contextLineCount,t.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:tl(null===(l=e.hideUnchangedRegions)||void 0===l?void 0:l.minimumLineCount,t.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:tl(null===(u=e.hideUnchangedRegions)||void 0===u?void 0:u.revealLineCount,t.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:Ro(e.isInEmbeddedEditor,t.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:Ro(e.onlyShowAccessibleDiffViewer,t.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:tl(e.renderSideBySideInlineBreakpoint,t.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:Ro(e.useInlineViewWhenSpaceIsLimited,t.useInlineViewWhenSpaceIsLimited),renderGutterMenu:Ro(e.renderGutterMenu,t.renderGutterMenu),compactMode:Ro(e.compactMode,t.compactMode)}}x6=C6([S6(1,mR)],x6);var D6=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},N6=function(e,t){return function(n,i){t(n,i,e)}},I6=function(e){function t(e,n,i,r,o,a,s,c){var d,h;u(this,t),(d=l(this,t))._domElement=e,d._parentContextKeyService=r,d._parentInstantiationService=o,d._accessibilitySignalService=s,d._editorProgressService=c,d.elements=Lm("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[Lm("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),Lm("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),Lm("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),d._diffModelSrc=d._register(VP(d,void 0)),d._diffModel=UP(d,(function(e){var t;return null===(t=d._diffModelSrc.read(e))||void 0===t?void 0:t.object})),d.onDidChangeModel=Au.fromObservableLight(d._diffModel),d._contextKeyService=d._register(d._parentContextKeyService.createScoped(d._domElement)),d._instantiationService=d._register(d._parentInstantiationService.createChild(new IY([Ky,d._contextKeyService]))),d._boundarySashes=BP(d,void 0),d._accessibleDiffViewerShouldBeVisible=BP(d,!1),d._accessibleDiffViewerVisible=UP(d,(function(e){return!!d._options.onlyShowAccessibleDiffViewer.read(e)||d._accessibleDiffViewerShouldBeVisible.read(e)})),d._movedBlocksLinesPart=BP(d,void 0),d._layoutInfo=UP(d,(function(e){var t,n=d._rootSizeObserver.width.read(e),i=d._rootSizeObserver.height.read(e);d._rootSizeObserver.automaticLayout?d.elements.root.style.height="100%":d.elements.root.style.height=i+"px";var r,o,a,s,l,u,c,h=d._sash.read(e),f=d._gutter.read(e),g=null!==(r=null==f?void 0:f.width.read(e))&&void 0!==r?r:0,v=null!==(o=null===(t=d._overviewRulerPart.read(e))||void 0===t?void 0:t.width)&&void 0!==o?o:0;if(!!h){var p,m,y=h.sashLeft.read(e);a=0,s=y-g-(null!==(m=null===(p=d._movedBlocksLinesPart.read(e))||void 0===p?void 0:p.width.read(e))&&void 0!==m?m:0),c=y-g,u=n-(l=y)-v}else{c=0,a=g,u=n-(l=g+(s=d._options.inlineViewHideOriginalLineNumbers.read(e)?0:Math.max(5,d._editors.originalObs.layoutInfoDecorationsLeft.read(e))))-v}return d.elements.original.style.left=a+"px",d.elements.original.style.width=s+"px",d._editors.original.layout({width:s,height:i},!0),null==f||f.layout(c),d.elements.modified.style.left=l+"px",d.elements.modified.style.width=u+"px",d._editors.modified.layout({width:u,height:i},!0),{modifiedEditor:d._editors.modified.getLayoutInfo(),originalEditor:d._editors.original.getLayoutInfo()}})),d._diffValue=d._diffModel.map((function(e,t){return null==e?void 0:e.diff.read(t)})),d.onDidUpdateDiff=Au.fromObservableLight(d._diffValue),a.willCreateDiffEditor(),d._contextKeyService.createKey("isInDiffEditor",!0),d._domElement.appendChild(d.elements.root),d._register(Mu((function(){return d.elements.root.remove()}))),d._rootSizeObserver=d._register(new m3(d.elements.root,n.dimension)),d._rootSizeObserver.setAutomaticLayout(null!==(h=n.automaticLayout)&&void 0!==h&&h),d._options=d._instantiationService.createInstance(x6,n),d._register(XP((function(e){d._options.setWidth(d._rootSizeObserver.width.read(e))}))),d._contextKeyService.createKey(p0.isEmbeddedDiffEditor.key,!1),d._register(y6(p0.isEmbeddedDiffEditor,d._contextKeyService,(function(e){return d._options.isInEmbeddedEditor.read(e)}))),d._register(y6(p0.comparingMovedCode,d._contextKeyService,(function(e){var t;return!!(null===(t=d._diffModel.read(e))||void 0===t?void 0:t.movedTextToCompare.read(e))}))),d._register(y6(p0.diffEditorRenderSideBySideInlineBreakpointReached,d._contextKeyService,(function(e){return d._options.couldShowInlineViewBecauseOfSize.read(e)}))),d._register(y6(p0.diffEditorInlineMode,d._contextKeyService,(function(e){return!d._options.renderSideBySide.read(e)}))),d._register(y6(p0.hasChanges,d._contextKeyService,(function(e){var t,n,i;return(null!==(i=null===(n=d._diffModel.read(e))||void 0===n||null===(t=n.diff.read(e))||void 0===t?void 0:t.mappings.length)&&void 0!==i?i:0)>0}))),d._editors=d._register(d._instantiationService.createInstance(k6,d.elements.original,d.elements.modified,d._options,i,(function(e,t,n,i){return d._createInnerEditor(e,t,n,i)}))),d._register(y6(p0.diffEditorOriginalWritable,d._contextKeyService,(function(e){return d._options.originalEditable.read(e)}))),d._register(y6(p0.diffEditorModifiedWritable,d._contextKeyService,(function(e){return!d._options.readOnly.read(e)}))),d._register(y6(p0.diffEditorOriginalUri,d._contextKeyService,(function(e){var t,n;return null!==(n=null===(t=d._diffModel.read(e))||void 0===t?void 0:t.model.original.uri.toString())&&void 0!==n?n:""}))),d._register(y6(p0.diffEditorModifiedUri,d._contextKeyService,(function(e){var t,n;return null!==(n=null===(t=d._diffModel.read(e))||void 0===t?void 0:t.model.modified.uri.toString())&&void 0!==n?n:""}))),d._overviewRulerPart=ZP(d,(function(e){return d._options.renderOverviewRuler.read(e)?d._instantiationService.createInstance(h5(f6,e),d._editors,d.elements.root,d._diffModel,d._rootSizeObserver.width,d._rootSizeObserver.height,d._layoutInfo.map((function(e){return e.modifiedEditor}))):void 0})).recomputeInitiallyAndOnChange(d._store);var f={height:d._rootSizeObserver.height,width:d._rootSizeObserver.width.map((function(e,t){var n,i;return e-(null!==(i=null===(n=d._overviewRulerPart.read(t))||void 0===n?void 0:n.width)&&void 0!==i?i:0)}))};d._sashLayout=new F5(d._options,f),d._sash=ZP(d,(function(e){var t=d._options.renderSideBySide.read(e);return d.elements.root.classList.toggle("side-by-side",t),t?new W5(d.elements.root,f,d._options.enableSplitViewResizing,d._boundarySashes,d._sashLayout.sashLeft,(function(){return d._sashLayout.resetSash()})):void 0})).recomputeInitiallyAndOnChange(d._store);var g=ZP(d,(function(e){return d._instantiationService.createInstance(h5(s6,e),d._editors,d._diffModel,d._options)})).recomputeInitiallyAndOnChange(d._store);ZP(d,(function(e){return d._instantiationService.createInstance(h5(O5,e),d._editors,d._diffModel,d._options,d)})).recomputeInitiallyAndOnChange(d._store);var v,p=new Set,m=new Set,y=!1,_=ZP(d,(function(e){return d._instantiationService.createInstance(h5(N5,e),ep(d._domElement),d._editors,d._diffModel,d._options,d,(function(){return y||g.get().isUpdatingHiddenAreas}),p,m)})).recomputeInitiallyAndOnChange(d._store),b=UP(d,(function(e){var t=_.read(e).viewZones.read(e).orig,n=g.read(e).viewZones.read(e).origViewZones;return t.concat(n)})),k=UP(d,(function(e){var t=_.read(e).viewZones.read(e).mod,n=g.read(e).viewZones.read(e).modViewZones;return t.concat(n)}));d._register(C3(d._editors.original,b,(function(e){y=e}),p)),d._register(C3(d._editors.modified,k,(function(e){(y=e)?v=g3.capture(d._editors.modified):(null==v||v.restore(d._editors.modified),v=void 0)}),m)),d._accessibleDiffViewer=ZP(d,(function(e){return d._instantiationService.createInstance(h5(A3,e),d.elements.accessibleDiffViewer,d._accessibleDiffViewerVisible,(function(e,t){return d._accessibleDiffViewerShouldBeVisible.set(e,t)}),d._options.onlyShowAccessibleDiffViewer.map((function(e){return!e})),d._rootSizeObserver.width,d._rootSizeObserver.height,d._diffModel.map((function(e,t){var n;return null==e||null===(n=e.diff.read(t))||void 0===n?void 0:n.mappings.map((function(e){return e.lineRangeMapping}))})),new j3(d._editors))})).recomputeInitiallyAndOnChange(d._store);var w=d._accessibleDiffViewerVisible.map((function(e){return e?"hidden":"visible"}));d._register(w3(d.elements.modified,{visibility:w})),d._register(w3(d.elements.original,{visibility:w})),d._createDiffEditorContributions(),a.addDiffEditor(d),d._gutter=ZP(d,(function(e){return d._options.shouldRenderGutterMenu.read(e)?d._instantiationService.createInstance(h5($5,e),d.elements.root,d._diffModel,d._editors,d._options,d._sashLayout,d._boundarySashes):void 0})),d._register(cO(d._layoutInfo)),ZP(d,(function(e){return new(h5(R5,e))(d.elements.root,d._diffModel,d._layoutInfo.map((function(e){return e.originalEditor})),d._layoutInfo.map((function(e){return e.modifiedEditor})),d._editors)})).recomputeInitiallyAndOnChange(d._store,(function(e){d._movedBlocksLinesPart.set(e,void 0)})),d._register(Au.runAndSubscribe(d._editors.modified.onDidChangeCursorPosition,(function(e){return d._handleCursorPositionChange(e,!0)}))),d._register(Au.runAndSubscribe(d._editors.original.onDidChangeCursorPosition,(function(e){return d._handleCursorPositionChange(e,!1)})));var C=d._diffModel.map(d,(function(e,t){if(e)return void 0===e.diff.read(t)&&!e.isDiffUpToDate.read(t)}));return d._register(eO((function(e,t){if(!0===C.read(e)){var n=d._editorProgressService.show(!0,1e3);t.add(Mu((function(){return n.done()})))}}))),d._register(eO((function(e,t){t.add(new(h5(v6,e))(d._editors,d._diffModel,d._options,d))}))),d._register(eO((function(e,t){var n=d._diffModel.read(e);if(n)for(var i=0,r=[n.model.original,n.model.modified];i<r.length;i++){var o=r[i];t.add(o.onWillDispose((function(e){vu(new Lu("TextModel got disposed before DiffEditorWidget model got reset")),d.setModel(null)})))}}))),d._register(XP((function(e){d._options.setModel(d._diffModel.read(e))}))),d}return p(t,e),h(t,[{key:"onDidContentSizeChange",get:function(){return this._editors.onDidContentSizeChange}},{key:"_createInnerEditor",value:function(e,t,n,i){return e.createInstance(e3,t,n,i)}},{key:"_createDiffEditorContributions",value:function(){var e=L_.getDiffEditorContributions(),t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;try{this._register(this._instantiationService.createInstance(a.ctor,this))}catch(e){vu(e)}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"_targetEditor",get:function(){return this._editors.modified}},{key:"getEditorType",value:function(){return wQ.IDiffEditor}},{key:"layout",value:function(e){this._rootSizeObserver.observe(e)}},{key:"hasTextFocus",value:function(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}},{key:"saveViewState",value:function(){var e;return{original:this._editors.original.saveViewState(),modified:this._editors.modified.saveViewState(),modelState:null===(e=this._diffModel.get())||void 0===e?void 0:e.serializeState()}}},{key:"restoreViewState",value:function(e){if(e&&e.original&&e.modified){var t,n=e;if(this._editors.original.restoreViewState(n.original),this._editors.modified.restoreViewState(n.modified),n.modelState)null===(t=this._diffModel.get())||void 0===t||t.restoreSerializedState(n.modelState)}}},{key:"handleInitialized",value:function(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}},{key:"createViewModel",value:function(e){return this._instantiationService.createInstance(v5,e,this._options)}},{key:"getModel",value:function(){var e,t;return null!==(t=null===(e=this._diffModel.get())||void 0===e?void 0:e.model)&&void 0!==t?t:null}},{key:"setModel",value:function(e){var t=e?"model"in e?L3.create(e).createNewRef(this):L3.create(this.createViewModel(e),this):null;this.setDiffModel(t)}},{key:"setDiffModel",value:function(e,t){var n=this,i=this._diffModel.get();!e&&i&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==(null==e?void 0:e.object)&&FP(t,(function(t){var i,r=null==e?void 0:e.object;rO.batchEventsGlobally(t,(function(){n._editors.original.setModel(r?r.model.original:null),n._editors.modified.setModel(r?r.model.modified:null)}));var o=null===(i=n._diffModelSrc.get())||void 0===i?void 0:i.createNewRef(n);n._diffModelSrc.set(null==e?void 0:e.createNewRef(n),t),setTimeout((function(){null==o||o.dispose()}),0)}))}},{key:"updateOptions",value:function(e){this._options.updateOptions(e)}},{key:"getContainerDomNode",value:function(){return this._domElement}},{key:"getOriginalEditor",value:function(){return this._editors.original}},{key:"getModifiedEditor",value:function(){return this._editors.modified}},{key:"getLineChanges",value:function(){var e,t=null===(e=this._diffModel.get())||void 0===e?void 0:e.diff.get();return t?function(e){return e.mappings.map((function(e){var t,n,i,r,o=e.lineRangeMapping,a=o.innerChanges;return o.original.isEmpty?(t=o.original.startLineNumber-1,n=0,a=void 0):(t=o.original.startLineNumber,n=o.original.endLineNumberExclusive-1),o.modified.isEmpty?(i=o.modified.startLineNumber-1,r=0,a=void 0):(i=o.modified.startLineNumber,r=o.modified.endLineNumberExclusive-1),{originalStartLineNumber:t,originalEndLineNumber:n,modifiedStartLineNumber:i,modifiedEndLineNumber:r,charChanges:null==a?void 0:a.map((function(e){return{originalStartLineNumber:e.originalRange.startLineNumber,originalStartColumn:e.originalRange.startColumn,originalEndLineNumber:e.originalRange.endLineNumber,originalEndColumn:e.originalRange.endColumn,modifiedStartLineNumber:e.modifiedRange.startLineNumber,modifiedStartColumn:e.modifiedRange.startColumn,modifiedEndLineNumber:e.modifiedRange.endLineNumber,modifiedEndColumn:e.modifiedRange.endColumn}}))}}))}(t):null}},{key:"revert",value:function(e){var t=this._diffModel.get();t&&t.isDiffUpToDate.get()&&this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}},{key:"revertRangeMappings",value:function(e){var t=this._diffModel.get();if(t&&t.isDiffUpToDate.get()){var n=e.map((function(e){return{range:e.modifiedRange,text:t.model.original.getValueInRange(e.originalRange)}}));this._editors.modified.executeEdits("diffEditor",n)}}},{key:"_goTo",value:function(e){this._editors.modified.setPosition(new dd(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}},{key:"goToDiff",value:function(e){var t,n,i=null===(n=this._diffModel.get())||void 0===n||null===(t=n.diff.get())||void 0===t?void 0:t.mappings;if(i&&0!==i.length){var r,o,a,s=this._editors.modified.getPosition().lineNumber;if("next"===e)r=null!==(o=i.find((function(e){return e.lineRangeMapping.modified.startLineNumber>s})))&&void 0!==o?o:i[0];else r=null!==(a=Vw(i,(function(e){return e.lineRangeMapping.modified.startLineNumber<s})))&&void 0!==a?a:i[i.length-1];this._goTo(r),r.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(VY.diffLineDeleted,{source:"diffEditor.goToDiff"}):r.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(VY.diffLineInserted,{source:"diffEditor.goToDiff"}):r&&this._accessibilitySignalService.playSignal(VY.diffLineModified,{source:"diffEditor.goToDiff"})}}},{key:"revealFirstDiff",value:function(){var e=this,t=this._diffModel.get();t&&this.waitForDiff().then((function(){var n,i=null===(n=t.diff.get())||void 0===n?void 0:n.mappings;i&&0!==i.length&&e._goTo(i[0])}))}},{key:"accessibleDiffViewerNext",value:function(){this._accessibleDiffViewer.get().next()}},{key:"accessibleDiffViewerPrev",value:function(){this._accessibleDiffViewer.get().prev()}},{key:"waitForDiff",value:function(){var e=this;return s((function(){var t;return E(this,(function(n){switch(n.label){case 0:return(t=e._diffModel.get())?[4,t.waitForDiff()]:[2];case 1:return n.sent(),[2]}}))}))()}},{key:"mapToOtherSide",value:function(){var e,t=this._editors.modified.hasWidgetFocus(),n=t?this._editors.modified:this._editors.original,i=t?this._editors.original:this._editors.modified,r=n.getSelection();if(r){var o,a,s=null===(a=this._diffModel.get())||void 0===a||null===(o=a.diff.get())||void 0===o?void 0:o.mappings.map((function(e){return t?e.lineRangeMapping.flip():e.lineRangeMapping}));if(s){var l=x3(r.getStartPosition(),s),u=x3(r.getEndPosition(),s);e=hd.plusRange(l,u)}}return{destination:i,destinationSelection:e}}},{key:"switchSide",value:function(){var e=this.mapToOtherSide(),t=e.destination,n=e.destinationSelection;t.focus(),n&&t.setSelection(n)}},{key:"exitCompareMove",value:function(){var e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}},{key:"collapseAllUnchangedRegions",value:function(){var e,t=null===(e=this._diffModel.get())||void 0===e?void 0:e.unchangedRegions.get();t&&TP((function(e){var n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.collapseAll(e)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}))}},{key:"showAllUnchangedRegions",value:function(){var e,t=null===(e=this._diffModel.get())||void 0===e?void 0:e.unchangedRegions.get();t&&TP((function(e){var n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.showAll(e)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}))}},{key:"_handleCursorPositionChange",value:function(e,t){if(3===(null==e?void 0:e.reason)){var n,i,r=null===(i=this._diffModel.get())||void 0===i||null===(n=i.diff.get())||void 0===n?void 0:n.mappings.find((function(n){return t?n.lineRangeMapping.modified.contains(e.position.lineNumber):n.lineRangeMapping.original.contains(e.position.lineNumber)}));(null==r?void 0:r.lineRangeMapping.modified.isEmpty)?this._accessibilitySignalService.playSignal(VY.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):(null==r?void 0:r.lineRangeMapping.original.isEmpty)?this._accessibilitySignalService.playSignal(VY.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):r&&this._accessibilitySignalService.playSignal(VY.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}}]),t}(w6);I6=D6([N6(3,Ky),N6(4,Gm),N6(5,Ym),N6(6,WY),N6(7,WA)],I6);var E6=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},M6=function(e,t){return function(n,i){t(n,i,e)}},T6=0,R6=!1;function A6(e){if(!e){if(R6)return;R6=!0}!function(e){(hR=document.createElement("div")).className="monaco-aria-container";var t=function(){var e=document.createElement("div");return e.className="monaco-alert",e.setAttribute("role","alert"),e.setAttribute("aria-atomic","true"),hR.appendChild(e),e};fR=t(),gR=t();var n=function(){var e=document.createElement("div");return e.className="monaco-status",e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),hR.appendChild(e),e};vR=n(),pR=n(),e.appendChild(hR)}(e||Fh.document.body)}var P6=function(e){function t(e,n,i,r,o,a,s,c,d,h,f,g,v){var p;u(this,t);var m=_({},n);return m.ariaLabel=m.ariaLabel||nP.editorViewAccessibleLabel,(p=l(this,t,[e,m,{},i,r,o,a,d,h,f,g,v]))._standaloneKeybindingService=c instanceof tQ?c:null,A6(m.ariaContainerElement),function(e){wO=e}((function(e,t){return i.createInstance(KI,e,t,{})})),function(e){DO=e}(s),p}return p(t,e),h(t,[{key:"addCommand",value:function(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;var i="DYNAMIC_"+ ++T6,r=Sy.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(i,e,t,r),i}},{key:"createContextKey",value:function(e,t){return this._contextKeyService.createKey(e,t)}},{key:"addAction",value:function(e){var t,n=this,i=this;if("string"!=typeof e.id||"string"!=typeof e.label||"function"!=typeof e.run)throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Ru.None;var r=e.id,o=e.label,a=Sy.and(Sy.equals("editorId",this.getId()),Sy.deserialize(e.precondition)),s=e.keybindings,l=Sy.and(a,Sy.deserialize(e.keybindingContext)),u=e.contextMenuGroupId||null,c=e.contextMenuOrder||0,d=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a;return Promise.resolve((a=e).run.apply(a,[i].concat(x(r))))},h=new Tu,f=this.getId()+":"+r;if(h.add(sy.registerCommand(f,d)),u){var g={command:{id:f,title:o},when:a,group:u,order:c};h.add(g_.appendMenuItem(d_.EditorContext,g))}if(Array.isArray(s)){var v=!0,p=!1,m=void 0;try{for(var y,_=s[Symbol.iterator]();!(v=(y=_.next()).done);v=!0){var b=y.value;h.add(this._standaloneKeybindingService.addDynamicKeybinding(f,b,d,l))}}catch(e){p=!0,m=e}finally{try{v||null==_.return||_.return()}finally{if(p)throw m}}}var k=new b2(f,o,o,void 0,a,(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Promise.resolve((t=e).run.apply(t,[i].concat(x(r))))}),this._contextKeyService);return this._actions.set(r,k),h.add(Mu((function(){n._actions.delete(r)}))),h}},{key:"_triggerCommand",value:function(e,n){if(this._codeEditorService instanceof ZS)try{this._codeEditorService.setActiveCodeEditor(this),g(v(t.prototype),"_triggerCommand",this).call(this,e,n)}finally{this._codeEditorService.setActiveCodeEditor(null)}else g(v(t.prototype),"_triggerCommand",this).call(this,e,n)}}]),t}(e3),O6=function(e){function t(e,n,i,r,o,a,s,c,d,h,f,g,v,p,m,y){var b;u(this,t);var k=_({},n);uQ(f,k,!1);var w=d.registerEditorContainer(e);"string"==typeof k.theme&&d.setTheme(k.theme),void 0!==k.autoDetectHighContrast&&d.setAutoDetectHighContrast(Boolean(k.autoDetectHighContrast));var C,S=k.model;if(delete k.model,(b=l(this,t,[e,k,i,r,o,a,s,c,d,h,g,m,y]))._configurationService=f,b._standaloneThemeService=d,b._register(w),void 0===S){var x=p.getLanguageIdByMimeType(k.language)||k.language||kk;C=W6(v,p,k.value||"",x,void 0),b._ownsModel=!0}else C=S,b._ownsModel=!1;if(b._attachModel(C),C){var L={oldModelUrl:null,newModelUrl:C.uri};b._onDidChangeModel.fire(L)}return b}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}},{key:"updateOptions",value:function(e){uQ(this._configurationService,e,!1),"string"==typeof e.theme&&this._standaloneThemeService.setTheme(e.theme),void 0!==e.autoDetectHighContrast&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),g(v(t.prototype),"updateOptions",this).call(this,e)}},{key:"_postDetachModelCleanup",value:function(e){g(v(t.prototype),"_postDetachModelCleanup",this).call(this,e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}}]),t}(P6=E6([M6(2,Gm),M6(3,Ym),M6(4,ay),M6(5,Ky),M6(6,jI),M6(7,ZI),M6(8,PS),M6(9,rx),M6(10,mR),M6(11,Ek),M6(12,wS)],P6));O6=E6([M6(2,Gm),M6(3,Ym),M6(4,ay),M6(5,Ky),M6(6,jI),M6(7,ZI),M6(8,GZ),M6(9,rx),M6(10,qb),M6(11,mR),M6(12,Qm),M6(13,Jb),M6(14,Ek),M6(15,wS)],O6);var F6=function(e){function t(e,n,i,r,o,a,s,c,d,h,f,g){var v;u(this,t);var p=_({},n);uQ(c,p,!0);var m=a.registerEditorContainer(e);return"string"==typeof p.theme&&a.setTheme(p.theme),void 0!==p.autoDetectHighContrast&&a.setAutoDetectHighContrast(Boolean(p.autoDetectHighContrast)),(v=l(this,t,[e,p,{},r,i,o,g,h]))._configurationService=c,v._standaloneThemeService=a,v._register(m),v}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}},{key:"updateOptions",value:function(e){uQ(this._configurationService,e,!0),"string"==typeof e.theme&&this._standaloneThemeService.setTheme(e.theme),void 0!==e.autoDetectHighContrast&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),g(v(t.prototype),"updateOptions",this).call(this,e)}},{key:"_createInnerEditor",value:function(e,t,n){return e.createInstance(P6,t,n)}},{key:"getOriginalEditor",value:function(){return g(v(t.prototype),"getOriginalEditor",this).call(this)}},{key:"getModifiedEditor",value:function(){return g(v(t.prototype),"getModifiedEditor",this).call(this)}},{key:"addCommand",value:function(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}},{key:"createContextKey",value:function(e,t){return this.getModifiedEditor().createContextKey(e,t)}},{key:"addAction",value:function(e){return this.getModifiedEditor().addAction(e)}}]),t}(I6);function W6(e,t,n,i,r){if(n=n||"",!i){var o=n.indexOf("\n"),a=n;return-1!==o&&(a=n.substring(0,o)),B6(e,n,t.createByFilepathOrFirstLine(r||null,a),r)}return B6(e,n,t.createById(i),r)}function B6(e,t,n,i){return e.createModel(t,n,i)}F6=E6([M6(2,Gm),M6(3,Ky),M6(4,Ym),M6(5,GZ),M6(6,rx),M6(7,qb),M6(8,GI),M6(9,WA),M6(10,fY),M6(11,WY)],F6);var H6=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},V6=function(e,t){return function(n,i){t(n,i,e)}},z6=function(){function e(t,n){u(this,e),this.viewModel=t,this.deltaScrollVertical=n}return h(e,[{key:"getId",value:function(){return this.viewModel}}]),e}(),U6=function(e){function t(e,n,i,r,o){var a;u(this,t),(a=l(this,t))._container=e,a._overflowWidgetsDomNode=n,a._workbenchUIElementFactory=i,a._instantiationService=r,a._viewModel=BP(a,void 0),a._collapsed=UP(a,(function(e){var t;return null===(t=a._viewModel.read(e))||void 0===t?void 0:t.collapsed.read(e)})),a._editorContentHeight=BP(a,500),a.contentHeight=UP(a,(function(e){return(a._collapsed.read(e)?0:a._editorContentHeight.read(e))+a._outerEditorHeight})),a._modifiedContentWidth=BP(a,0),a._modifiedWidth=BP(a,0),a._originalContentWidth=BP(a,0),a._originalWidth=BP(a,0),a.maxScroll=UP(a,(function(e){var t=a._modifiedContentWidth.read(e)-a._modifiedWidth.read(e),n=a._originalContentWidth.read(e)-a._originalWidth.read(e);return t>n?{maxScroll:t,width:a._modifiedWidth.read(e)}:{maxScroll:n,width:a._originalWidth.read(e)}})),a._elements=Lm("div.multiDiffEntry",[Lm("div.header@header",[Lm("div.header-content",[Lm("div.collapse-button@collapseButton"),Lm("div.file-path",[Lm("div.title.modified.show-file-icons@primaryPath",[]),Lm("div.status.deleted@status",["R"]),Lm("div.title.original.show-file-icons@secondaryPath",[])]),Lm("div.actions@actions")])]),Lm("div.editorParent",[Lm("div.editorContainer@editor")])]),a.editor=a._register(a._instantiationService.createInstance(I6,a._elements.editor,{overflowWidgetsDomNode:a._overflowWidgetsDomNode},{})),a.isModifedFocused=t6(a.editor.getModifiedEditor()).isFocused,a.isOriginalFocused=t6(a.editor.getOriginalEditor()).isFocused,a.isFocused=UP(a,(function(e){return a.isModifedFocused.read(e)||a.isOriginalFocused.read(e)})),a._resourceLabel=a._workbenchUIElementFactory.createResourceLabel?a._register(a._workbenchUIElementFactory.createResourceLabel(a._elements.primaryPath)):void 0,a._resourceLabel2=a._workbenchUIElementFactory.createResourceLabel?a._register(a._workbenchUIElementFactory.createResourceLabel(a._elements.secondaryPath)):void 0,a._dataStore=a._register(new Tu),a._headerHeight=40,a._lastScrollTop=-1,a._isSettingScrollTop=!1;var s=new oj(a._elements.collapseButton,{});a._register(XP((function(e){s.element.className="",s.icon=a._collapsed.read(e)?bd.chevronRight:bd.chevronDown}))),a._register(s.onDidClick((function(){var e;null===(e=a._viewModel.get())||void 0===e||e.collapsed.set(!a._collapsed.get(),void 0)}))),a._register(XP((function(e){a._elements.editor.style.display=a._collapsed.read(e)?"none":"block"}))),a._register(a.editor.getModifiedEditor().onDidLayoutChange((function(e){var t=a.editor.getModifiedEditor().getLayoutInfo().contentWidth;a._modifiedWidth.set(t,void 0)}))),a._register(a.editor.getOriginalEditor().onDidLayoutChange((function(e){var t=a.editor.getOriginalEditor().getLayoutInfo().contentWidth;a._originalWidth.set(t,void 0)}))),a._register(a.editor.onDidContentSizeChange((function(e){AP((function(t){a._editorContentHeight.set(e.contentHeight,t),a._modifiedContentWidth.set(a.editor.getModifiedEditor().getContentWidth(),t),a._originalContentWidth.set(a.editor.getOriginalEditor().getContentWidth(),t)}))}))),a._register(a.editor.getOriginalEditor().onDidScrollChange((function(e){if(!a._isSettingScrollTop&&e.scrollTopChanged&&a._data){var t=e.scrollTop-a._lastScrollTop;a._data.deltaScrollVertical(t)}}))),a._register(XP((function(e){var t,n=null===(t=a._viewModel.read(e))||void 0===t?void 0:t.isActive.read(e);a._elements.root.classList.toggle("active",n)}))),a._container.appendChild(a._elements.root),a._outerEditorHeight=a._headerHeight,a._contextKeyService=a._register(o.createScoped(a._elements.actions));var c=a._register(a._instantiationService.createChild(new IY([Ky,a._contextKeyService])));return a._register(c.createInstance(Z5,a._elements.actions,d_.MultiDiffEditorFileToolbar,{actionRunner:a._register(new V5((function(){var e;return null===(e=a._viewModel.get())||void 0===e?void 0:e.modifiedUri}))),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:function(e){return e.startsWith("navigation")}},actionViewItemProvider:function(e,t){return lW(c,e,t)}})),a}return p(t,e),h(t,[{key:"setScrollLeft",value:function(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}},{key:"setData",value:function(e){var t=this;function n(e){return b(_({},e),{scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1})}if(this._data=e,e){var i=e.viewModel.documentDiffItem;if(AP((function(r){var o,a,s;null===(o=t._resourceLabel)||void 0===o||o.setUri(null!==(s=e.viewModel.modifiedUri)&&void 0!==s?s:e.viewModel.originalUri,{strikethrough:void 0===e.viewModel.modifiedUri});var l,u=!1,c=!1,d=!1,h="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(h="R",u=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(h="A",d=!0):(h="D",c=!0),t._elements.status.classList.toggle("renamed",u),t._elements.status.classList.toggle("deleted",c),t._elements.status.classList.toggle("added",d),t._elements.status.innerText=h,null===(a=t._resourceLabel2)||void 0===a||a.setUri(u?e.viewModel.originalUri:void 0,{strikethrough:!0}),t._dataStore.clear(),t._viewModel.set(e.viewModel,r),t.editor.setDiffModel(e.viewModel.diffEditorViewModelRef,r),t.editor.updateOptions(n(null!==(l=i.options)&&void 0!==l?l:{}))})),i.onOptionsDidChange&&this._dataStore.add(i.onOptionsDidChange((function(){var e;t.editor.updateOptions(n(null!==(e=i.options)&&void 0!==e?e:{}))}))),e.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,(function(e){e||t.setData(void 0)})),e.viewModel.documentDiffItem.contextKeys){var r=!0,o=!1,a=void 0;try{for(var s,l=Object.entries(e.viewModel.documentDiffItem.contextKeys)[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=C(s.value,2),c=u[0],d=u[1];this._contextKeyService.createKey(c,d)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}}else AP((function(e){t._viewModel.set(void 0,e),t.editor.setDiffModel(null,e),t._dataStore.clear()}))}},{key:"render",value:function(e,t,n,i){var r=this;this._elements.root.style.visibility="visible",this._elements.root.style.top="".concat(e.start,"px"),this._elements.root.style.height="".concat(e.length,"px"),this._elements.root.style.width="".concat(t,"px"),this._elements.root.style.position="absolute";var o=e.length-this._headerHeight,a=Math.max(0,Math.min(i.start-e.start,o));this._elements.header.style.transform="translateY(".concat(a,"px)"),AP((function(n){r.editor.layout({width:t-16-2,height:e.length-r._outerEditorHeight})}));try{this._isSettingScrollTop=!0,this._lastScrollTop=n,this.editor.getOriginalEditor().setScrollTop(n)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",a>0||n>0),this._elements.header.classList.toggle("collapsed",a===o)}},{key:"hide",value:function(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}}]),t}(Ru);U6=H6([V6(3,Gm),V6(4,Ky)],U6);var j6=function(){function e(t){u(this,e),this._create=t,this._unused=new Set,this._used=new Set,this._itemData=new Map}return h(e,[{key:"getUnusedObj",value:function(e){var t,n=this;if(0===this._unused.size)t=this._create(e),this._itemData.set(t,e);else{var i,r=x(this._unused.values());t=null!==(i=r.find((function(t){return n._itemData.get(t).getId()===e.getId()})))&&void 0!==i?i:r[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:function(){n._used.delete(t),n._unused.size>5?t.dispose():n._unused.add(t)}}}},{key:"dispose",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this._used[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.dispose()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}var o=!0,a=!1,s=void 0;try{for(var l,u=this._unused[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){l.value.dispose()}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}this._used.clear(),this._unused.clear()}}]),e}(),K6=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},q6=function(e,t){return function(n,i){t(n,i,e)}},G6=function(e){function t(e,n,i,r,o,a){var s;u(this,t),(s=l(this,t))._element=e,s._dimension=n,s._viewModel=i,s._workbenchUIElementFactory=r,s._parentContextKeyService=o,s._parentInstantiationService=a,s._scrollableElements=Lm("div.scrollContent",[Lm("div@content",{style:{overflow:"hidden"}}),Lm("div.monaco-editor@overflowWidgetsDomNode",{})]),s._scrollable=s._register(new uE({forceIntegerValues:!1,scheduleAtNextAnimationFrame:function(e){return pp(ep(s._element),e)},smoothScrollDuration:100})),s._scrollableElement=s._register(new mE(s._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},s._scrollable)),s._elements=Lm("div.monaco-component.multiDiffEditor",{},[Lm("div",{},[s._scrollableElement.getDomNode()]),Lm("div.placeholder@placeholder",{},[Lm("div",[Xa("noChangedFiles","No Changed Files")])])]),s._sizeObserver=s._register(new m3(s._element,void 0)),s._objectPool=s._register(new j6((function(e){var t=s._instantiationService.createInstance(U6,s._scrollableElements.content,s._scrollableElements.overflowWidgetsDomNode,s._workbenchUIElementFactory);return t.setData(e),t}))),s.scrollTop=rO(s,s._scrollableElement.onScroll,(function(){return s._scrollableElement.getScrollPosition().scrollTop})),s.scrollLeft=rO(s,s._scrollableElement.onScroll,(function(){return s._scrollableElement.getScrollPosition().scrollLeft})),s._viewItemsInfo=GP(s,(function(e,t){var n=s._viewModel.read(e);if(!n)return{items:[],getItem:function(e){throw new Lu}};var i=n.items.read(e),r=new Map,o=i.map((function(e){var n,i=t.add(new Z6(e,s._objectPool,s.scrollLeft,(function(e){s._scrollableElement.setScrollPosition({scrollTop:s._scrollableElement.getScrollPosition().scrollTop+e})}))),o=null===(n=s._lastDocStates)||void 0===n?void 0:n[i.getKey()];return o&&TP((function(e){i.setViewState(o,e)})),r.set(e,i),i}));return{items:o,getItem:function(e){return r.get(e)}}})),s._viewItems=s._viewItemsInfo.map(s,(function(e){return e.items})),s._spaceBetweenPx=0,s._totalHeight=s._viewItems.map(s,(function(e,t){return e.reduce((function(e,n){return e+n.contentHeight.read(t)+s._spaceBetweenPx}),0)})),s._contextKeyService=s._register(s._parentContextKeyService.createScoped(s._element)),s._instantiationService=s._register(s._parentInstantiationService.createChild(new IY([Ky,s._contextKeyService]))),s._lastDocStates={},s._contextKeyService.createKey(p0.inMultiDiffEditor.key,!0),s._register(eO((function(e,t){var n=s._viewModel.read(e);if(n&&n.contextKeys){var i=!0,r=!1,o=void 0;try{for(var a,l=function(){var e=C(a.value,2),n=e[0],i=e[1],r=s._contextKeyService.createKey(n,void 0);r.set(i),t.add(Mu((function(){return r.reset()})))},u=Object.entries(n.contextKeys)[Symbol.iterator]();!(i=(a=u.next()).done);i=!0)l()}catch(e){r=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(r)throw o}}}})));var c=s._parentContextKeyService.createKey(p0.multiDiffEditorAllCollapsed.key,!1);return s._register(XP((function(e){var t=s._viewModel.read(e);if(t){var n=t.items.read(e).every((function(t){return t.collapsed.read(e)}));c.set(n)}}))),s._register(XP((function(e){var t=s._dimension.read(e);s._sizeObserver.observe(t)}))),s._register(XP((function(e){var t=s._viewItems.read(e);s._elements.placeholder.classList.toggle("visible",0===t.length)}))),s._scrollableElements.content.style.position="relative",s._register(XP((function(e){var t=s._sizeObserver.height.read(e);s._scrollableElements.root.style.height="".concat(t,"px");var n=s._totalHeight.read(e);s._scrollableElements.content.style.height="".concat(n,"px");var i=s._sizeObserver.width.read(e),r=i,o=qw(s._viewItems.read(e),ba((function(t){return t.maxScroll.read(e).maxScroll}),ka));o&&(r=i+o.maxScroll.read(e).maxScroll);s._scrollableElement.setScrollDimensions({width:i,height:t,scrollHeight:n,scrollWidth:r})}))),e.replaceChildren(s._elements.root),s._register(Mu((function(){e.replaceChildren()}))),s._register(s._register(XP((function(e){AP((function(t){s.render(e)}))})))),s}return p(t,e),h(t,[{key:"render",value:function(e){var t=this.scrollTop.read(e),n=0,i=0,r=0,o=this._sizeObserver.height.read(e),a=Bw.ofStartAndLength(t,o),s=this._sizeObserver.width.read(e),l=!0,u=!1,c=void 0;try{for(var d,h=this._viewItems.read(e)[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value,g=f.contentHeight.read(e),v=Math.min(g,o),p=Bw.ofStartAndLength(i,v),m=Bw.ofStartAndLength(r,g);if(m.isBefore(a))n-=g-v,f.hide();else if(m.isAfter(a))f.hide();else{var y=Math.max(0,Math.min(a.start-m.start,g-v));n-=y;var _=Bw.ofStartAndLength(t+n,o);f.render(p,y,s,_)}i+=v+this._spaceBetweenPx,r+=g+this._spaceBetweenPx}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}this._scrollableElements.content.style.transform="translateY(".concat(-(t+n),"px)")}}]),t}(Ru);G6=K6([q6(4,Ky),q6(5,Gm)],G6);var Z6=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t)).viewModel=e,o._objectPool=n,o._scrollLeft=i,o._deltaScrollVertical=r,o._templateRef=o._register(VP(o,void 0)),o.contentHeight=UP(o,(function(e){var t,n,i;return null!==(i=null===(n=o._templateRef.read(e))||void 0===n||null===(t=n.object.contentHeight)||void 0===t?void 0:t.read(e))&&void 0!==i?i:o.viewModel.lastTemplateData.read(e).contentHeight})),o.maxScroll=UP(o,(function(e){var t,n;return null!==(n=null===(t=o._templateRef.read(e))||void 0===t?void 0:t.object.maxScroll.read(e))&&void 0!==n?n:{maxScroll:0,scrollWidth:0}})),o.template=UP(o,(function(e){var t;return null===(t=o._templateRef.read(e))||void 0===t?void 0:t.object})),o._isHidden=BP(o,!1),o._isFocused=UP(o,(function(e){var t,n;return null!==(n=null===(t=o.template.read(e))||void 0===t?void 0:t.isFocused.read(e))&&void 0!==n&&n})),o.viewModel.setIsFocused(o._isFocused,void 0),o._register(XP((function(e){var t,n=o._scrollLeft.read(e);null===(t=o._templateRef.read(e))||void 0===t||t.object.setScrollLeft(n)}))),o._register(XP((function(e){var t=o._templateRef.read(e);t&&(o._isHidden.read(e)&&(t.object.isFocused.read(e)||o._clear()))}))),o}return p(t,e),h(t,[{key:"dispose",value:function(){this._clear(),g(v(t.prototype),"dispose",this).call(this)}},{key:"toString",value:function(){var e;return"VirtualViewItem(".concat(null===(e=this.viewModel.documentDiffItem.modified)||void 0===e?void 0:e.uri.toString(),")")}},{key:"getKey",value:function(){return this.viewModel.getKey()}},{key:"setViewState",value:function(e,t){var n;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);var i=this.viewModel.lastTemplateData.get(),r=null===(n=e.selections)||void 0===n?void 0:n.map(fd.liftSelection);this.viewModel.lastTemplateData.set(b(_({},i),{selections:r}),t);var o=this._templateRef.get();o&&r&&o.object.editor.setSelections(r)}},{key:"_updateTemplateData",value:function(e){var t,n=this._templateRef.get();n&&this.viewModel.lastTemplateData.set({contentHeight:n.object.contentHeight.get(),selections:null!==(t=n.object.editor.getSelections())&&void 0!==t?t:void 0},e)}},{key:"_clear",value:function(){var e=this,t=this._templateRef.get();t&&TP((function(n){e._updateTemplateData(n),t.object.hide(),e._templateRef.set(void 0,n)}))}},{key:"hide",value:function(){this._isHidden.set(!0,void 0)}},{key:"render",value:function(e,t,n,i){this._isHidden.set(!1,void 0);var r=this._templateRef.get();if(!r){r=this._objectPool.getUnusedObj(new z6(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(r,void 0);var o=this.viewModel.lastTemplateData.get().selections;o&&r.object.editor.setSelections(o)}r.object.render(e,n,t,i)}}]),t}(Ru);TL("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},Xa("multiDiffEditor.headerBackground","The background color of the diff editor's header")),TL("multiDiffEditor.background",tD,Xa("multiDiffEditor.background","The background color of the multi file diff editor")),TL("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},Xa("multiDiffEditor.border","The border color of the multi file diff editor"));var Y6=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Q6=function(e,t){return function(n,i){t(n,i,e)}},X6=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._element=e,r._workbenchUIElementFactory=n,r._instantiationService=i,r._dimension=BP(r,void 0),r._viewModel=BP(r,void 0),r._widgetImpl=GP(r,(function(e,t){return h5(U6,e),t.add(r._instantiationService.createInstance(h5(G6,e),r._element,r._dimension,r._viewModel,r._workbenchUIElementFactory))})),r._register(cO(r._widgetImpl)),r}return p(t,e),t}(Ru);function $6(e,t,n){return _Q.initialize(n||{}).createInstance(O6,e,t)}function J6(e){return _Q.get(Ym).onCodeEditorAdd((function(t){e(t)}))}function e7(e){return _Q.get(Ym).onDiffEditorAdd((function(t){e(t)}))}function t7(){return _Q.get(Ym).listCodeEditors()}function n7(){return _Q.get(Ym).listDiffEditors()}function i7(e,t,n){return _Q.initialize(n||{}).createInstance(F6,e,t)}function r7(e,t){var n=_Q.initialize(t||{});return new X6(e,{},n)}function o7(e){if("string"!=typeof e.id||"function"!=typeof e.run)throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return sy.registerCommand(e.id,e.run)}function a7(e){if("string"!=typeof e.id||"string"!=typeof e.label||"function"!=typeof e.run)throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");var t=Sy.deserialize(e.precondition),n=new Tu;if(n.add(sy.registerCommand(e.id,(function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];var a;return E_.runEditorCommand(n,r,t,(function(t,n,i){return Promise.resolve((a=e).run.apply(a,[n].concat(x(i))))}))}))),e.contextMenuGroupId){var i={command:{id:e.id,title:e.label},when:t,group:e.contextMenuGroupId,order:e.contextMenuOrder||0};n.add(g_.appendMenuItem(d_.EditorContext,i))}if(Array.isArray(e.keybindings)){var r=_Q.get(ZI);if(r instanceof tQ){var o=Sy.and(t,Sy.deserialize(e.keybindingContext));n.add(r.addDynamicKeybindings(e.keybindings.map((function(t){return{keybinding:t,command:e.id,when:o}}))))}else console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService")}return n}function s7(e){return l7([e])}function l7(e){var t=_Q.get(ZI);return t instanceof tQ?t.addDynamicKeybindings(e.map((function(e){return{keybinding:e.keybinding,command:e.command,commandArgs:e.commandArgs,when:Sy.deserialize(e.when)}}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Ru.None)}function u7(e,t,n){var i=_Q.get(Jb),r=i.getLanguageIdByMimeType(t)||t;return W6(_Q.get(Qm),i,e,r,n)}function c7(e,t){var n=_Q.get(Jb),i=n.getLanguageIdByMimeType(t)||t||kk;e.setLanguage(n.createById(i))}function d7(e,t,n){e&&_Q.get(RW).changeOne(t,e.uri,n)}function h7(e){_Q.get(RW).changeAll(e,[])}function f7(e){return _Q.get(RW).read(e)}function g7(e){return _Q.get(RW).onMarkerChanged(e)}function v7(e){return _Q.get(Qm).getModel(e)}function p7(){return _Q.get(Qm).getModels()}function m7(e){return _Q.get(Qm).onModelAdded(e)}function y7(e){return _Q.get(Qm).onModelRemoved(e)}function _7(e){return _Q.get(Qm).onModelLanguageChanged((function(t){e({model:t.model,oldLanguage:t.oldLanguageId})}))}function b7(e){return function(e,t){return new kQ(e,t)}(_Q.get(Qm),e)}function k7(e,t){var n=_Q.get(Jb),i=_Q.get(GZ);return pX.colorizeElement(i,n,e,t).then((function(){i.registerEditorContainer(e)}))}function w7(e,t,n){var i=_Q.get(Jb);return _Q.get(GZ).registerEditorContainer(Fh.document.body),pX.colorize(i,e,t,n)}function C7(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return _Q.get(GZ).registerEditorContainer(Fh.document.body),pX.colorizeModelLine(e,t,n)}function S7(e,t){Rh.getOrCreate(t);for(var n=function(e){var t=Rh.get(e);return t||{getInitialState:function(){return XT},tokenize:function(t,n,i){return $T(e,i)}}}(t),i=Xh(e),r=[],o=n.getInitialState(),a=0,s=i.length;a<s;a++){var l=i[a],u=n.tokenize(l,!0,o);r[a]=u.tokens,o=u.endState}return r}function x7(e,t){_Q.get(GZ).defineTheme(e,t)}function L7(e){_Q.get(GZ).setTheme(e)}function D7(){qm.clearAllFontInfos()}function N7(e,t){return sy.registerCommand({id:e,handler:t})}function I7(e){return _Q.get(xE).registerOpener({open:function(t){return s((function(){return E(this,(function(n){return"string"==typeof t&&(t=ed.parse(t)),[2,e.open(t)]}))}))()}})}function E7(e){return _Q.get(Ym).registerCodeEditorOpenHandler(function(){var t=s((function(t,n,i){var r,o,a;return E(this,(function(i){switch(i.label){case 0:return n?((o=null===(r=t.options)||void 0===r?void 0:r.selection)&&"number"==typeof o.endLineNumber&&"number"==typeof o.endColumn?a=o:o&&(a={lineNumber:o.startLineNumber,column:o.startColumn}),[4,e.openCodeEditor(n,t.resource,a)]):[2,null];case 1:return i.sent()?[2,n]:[2,null]}}))}));return function(e,n,i){return t.apply(this,arguments)}}())}function M7(e,t){return"boolean"==typeof e?e:t}function T7(e,t){return"string"==typeof e?e:t}function R7(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(e=e.map((function(e){return e.toLowerCase()})));var n=function(e){var t={},n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)t[o.value]=!0}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}(e);return t?function(e){return void 0!==n[e.toLowerCase()]&&n.hasOwnProperty(e.toLowerCase())}:function(e){return void 0!==n[e]&&n.hasOwnProperty(e)}}function A7(e,t,n){t=t.replace(/@@/g,"");var i,r=0;do{i=!1,t=t.replace(/@(\w+)/g,(function(n,r){i=!0;var o="";if("string"==typeof e[r])o=e[r];else{if(!(e[r]&&e[r]instanceof RegExp))throw void 0===e[r]?eX(e,"language definition does not contain attribute '"+r+"', used at: "+t):eX(e,"attribute reference '"+r+"' must be a string, used at: "+t);o=e[r].source}return QQ(o)?"":"(?:"+o+")"})),r++}while(i&&r<5);t=t.replace(/\x01/g,"@");var o=(e.ignoreCase?"i":"")+(e.unicode?"u":"");if(n&&t.match(/\$[sS](\d\d?)/g)){var a=null,s=null;return function(n){return s&&a===n||(a=n,s=new RegExp(function(e,t,n){var i=null;return t.replace(/\$[sS](\d\d?)/g,(function(t,r){return null===i&&(i=n.split(".")).unshift(n),!QQ(r)&&r<i.length?XQ(e,i[r]):""}))}(e,t,n),o)),s}}return new RegExp(t,o)}function P7(e,t,n,i){var r=-1,o=n,a=n.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);a&&(a[3]&&(r=parseInt(a[3]),a[2]&&(r+=100)),o=a[4]);var s,l="~",u=o;if(o&&0!==o.length?/^\w*$/.test(u)?l="==":(a=o.match(/^(@|!@|~|!~|==|!=)(.*)$/))&&(l=a[1],u=a[2]):(l="!=",u=""),"~"!==l&&"!~"!==l||!/^(\w|\|)*$/.test(u))if("@"===l||"!@"===l){var c=e[u];if(!c)throw eX(e,"the @ match target '"+u+"' is not defined, in rule: "+t);if(!function(e,t){if(!t)return!1;if(!Array.isArray(t))return!1;var n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)if(!e(o.value))return!1}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return!0}((function(e){return"string"==typeof e}),c))throw eX(e,"the @ match target '"+u+"' must be an array of strings, in rule: "+t);var d=R7(c,e.ignoreCase);s=function(e){return"@"===l?d(e):!d(e)}}else if("~"===l||"!~"===l)if(u.indexOf("$")<0){var h=A7(e,"^"+u+"$",!1);s=function(e){return"~"===l?h.test(e):!h.test(e)}}else s=function(t,n,i,r){return A7(e,"^"+tX(e,u,n,i,r)+"$",!1).test(t)};else if(u.indexOf("$")<0){var f=XQ(e,u);s=function(e){return"=="===l?e===f:e!==f}}else{var g=XQ(e,u);s=function(t,n,i,r,o){var a=tX(e,g,n,i,r);return"=="===l?t===a:t!==a}}else{var v=R7(u.split("|"),e.ignoreCase);s=function(e){return"~"===l?v(e):!v(e)}}return-1===r?{name:n,value:i,test:function(e,t,n,i){return s(e,e,t,n,i)}}:{name:n,value:i,test:function(e,t,n,i){var o=function(e,t,n,i){if(i<0)return e;if(i<t.length)return t[i];if(i>=100){i-=100;var r=n.split(".");if(r.unshift(n),i<r.length)return r[i]}return null}(e,t,n,r);return s(o||"",e,t,n,i)}}}function O7(e,t,n){if(n){if("string"==typeof n)return n;if(n.token||""===n.token){if("string"!=typeof n.token)throw eX(e,"a 'token' attribute must be of type string, in rule: "+t);var i={token:n.token};if(n.token.indexOf("$")>=0&&(i.tokenSubst=!0),"string"==typeof n.bracket)if("@open"===n.bracket)i.bracket=1;else{if("@close"!==n.bracket)throw eX(e,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+t);i.bracket=-1}if(n.next){if("string"!=typeof n.next)throw eX(e,"the next state must be a string value in rule: "+t);var r=n.next;if(!/^(@pop|@push|@popall)$/.test(r)&&("@"===r[0]&&(r=r.substr(1)),r.indexOf("$")<0&&!function(e,t){for(var n=t;n&&n.length>0;){if(e.stateNames[n])return!0;var i=n.lastIndexOf(".");n=i<0?null:n.substr(0,i)}return!1}(e,tX(e,r,"",[],""))))throw eX(e,"the next state '"+n.next+"' is not defined in rule: "+t);i.next=r}return"number"==typeof n.goBack&&(i.goBack=n.goBack),"string"==typeof n.switchTo&&(i.switchTo=n.switchTo),"string"==typeof n.log&&(i.log=n.log),"string"==typeof n.nextEmbedded&&(i.nextEmbedded=n.nextEmbedded,e.usesEmbedded=!0),i}if(Array.isArray(n)){for(var o=[],a=0,s=n.length;a<s;a++)o[a]=O7(e,t,n[a]);return{group:o}}if(n.cases){var l=[];for(var u in n.cases)if(n.cases.hasOwnProperty(u)){var c=O7(e,t,n.cases[u]);"@default"===u||"@"===u||""===u?l.push({test:void 0,value:c,name:u}):"@eos"===u?l.push({test:function(e,t,n,i){return i},value:c,name:u}):l.push(P7(e,t,u,c))}var d=e.defaultToken;return{test:function(e,t,n,i){var r=!0,o=!1,a=void 0;try{for(var s,u=l[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;if(!c.test||c.test(e,t,n,i))return c.value}}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return d}}}throw eX(e,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+t)}return{token:""}}X6=Y6([Q6(2,Gm)],X6);var F7=function(){function e(t){u(this,e),this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=t}return h(e,[{key:"setRegex",value:function(e,t){var n;if("string"==typeof t)n=t;else{if(!(t instanceof RegExp))throw eX(e,"rules must start with a match string or regular expression: "+this.name);n=t.source}this.matchOnlyAtLineStart=n.length>0&&"^"===n[0],this.name=this.name+": "+n,this.regex=A7(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")",!0)}},{key:"setAction",value:function(e,t){this.action=O7(e,this.name,t)}},{key:"resolveRegex",value:function(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}]),e}();function W7(e,t){if(!t||"object"!==(void 0===t?"undefined":L(t)))throw new Error("Monarch: expecting a language definition object");var n={languageId:e,includeLF:M7(t.includeLF,!1),noThrow:!1,maxStack:100,start:"string"==typeof t.start?t.start:null,ignoreCase:M7(t.ignoreCase,!1),unicode:M7(t.unicode,!1),tokenPostfix:T7(t.tokenPostfix,"."+e),defaultToken:T7(t.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},i=t;function r(e,o,a){var s=!0,l=!1,u=void 0;try{for(var c,d=a[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value,f=h.include;if(f){if("string"!=typeof f)throw eX(n,"an 'include' attribute must be a string at: "+e);if("@"===f[0]&&(f=f.substr(1)),!t.tokenizer[f])throw eX(n,"include target '"+f+"' is not defined at: "+e);r(e+"."+f,o,t.tokenizer[f])}else{var g=new F7(e);if(Array.isArray(h)&&h.length>=1&&h.length<=3)if(g.setRegex(i,h[0]),h.length>=3)if("string"==typeof h[1])g.setAction(i,{token:h[1],next:h[2]});else{if("object"!==L(h[1]))throw eX(n,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+e);var v=h[1];v.next=h[2],g.setAction(i,v)}else g.setAction(i,h[1]);else{if(!h.regex)throw eX(n,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+e);h.name&&"string"==typeof h.name&&(g.name=h.name),h.matchOnlyAtStart&&(g.matchOnlyAtLineStart=M7(h.matchOnlyAtLineStart,!1)),g.setRegex(i,h.regex),g.setAction(i,h.action)}o.push(g)}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}if(i.languageId=e,i.includeLF=n.includeLF,i.ignoreCase=n.ignoreCase,i.unicode=n.unicode,i.noThrow=n.noThrow,i.usesEmbedded=n.usesEmbedded,i.stateNames=t.tokenizer,i.defaultToken=n.defaultToken,!t.tokenizer||"object"!==L(t.tokenizer))throw eX(n,"a language definition must define the 'tokenizer' attribute as an object");for(var o in n.tokenizer=[],t.tokenizer)if(t.tokenizer.hasOwnProperty(o)){n.start||(n.start=o);var a=t.tokenizer[o];n.tokenizer[o]=new Array,r("tokenizer."+o,n.tokenizer[o],a)}if(n.usesEmbedded=i.usesEmbedded,t.brackets){if(!Array.isArray(t.brackets))throw eX(n,"the 'brackets' attribute must be defined as an array")}else t.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];var s=[],l=!0,u=!1,c=void 0;try{for(var d,h=t.brackets[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;if(f&&Array.isArray(f)&&3===f.length&&(f={token:f[2],open:f[0],close:f[1]}),f.open===f.close)throw eX(n,"open and close brackets in a 'brackets' attribute must be different: "+f.open+"\n hint: use the 'bracket' attribute if matching on equal brackets is required.");if("string"!=typeof f.open||"string"!=typeof f.token||"string"!=typeof f.close)throw eX(n,"every element in the 'brackets' array must be a '{open,close,token}' object or array");s.push({token:f.token+n.tokenPostfix,open:XQ(n,f.open),close:XQ(n,f.close)})}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return n.brackets=s,n.noThrow=!0,n}function B7(e){bk.registerLanguage(e)}function H7(){var e=[];return e=e.concat(bk.getLanguages())}function V7(e){return _Q.get(Jb).languageIdCodec.encodeLanguageId(e)}function z7(e,t){return _Q.withServices((function(){var n=_Q.get(Jb).onDidRequestRichLanguageFeatures((function(i){i===e&&(n.dispose(),t())}));return n}))}function U7(e,t){return _Q.withServices((function(){var n=_Q.get(Jb).onDidRequestBasicLanguageFeatures((function(i){i===e&&(n.dispose(),t())}));return n}))}function j7(e,t){if(!_Q.get(Jb).isRegisteredLanguageId(e))throw new Error("Cannot set configuration for unknown language ".concat(e));return _Q.get(Ek).register(e,t,100)}var K7=function(){function e(t,n){u(this,e),this._languageId=t,this._actual=n}return h(e,[{key:"dispose",value:function(){}},{key:"getInitialState",value:function(){return this._actual.getInitialState()}},{key:"tokenize",value:function(e,t,n){if("function"==typeof this._actual.tokenize)return q7.adaptTokenize(this._languageId,this._actual,e,n);throw new Error("Not supported!")}},{key:"tokenizeEncoded",value:function(e,t,n){var i=this._actual.tokenizeEncoded(e,n);return new xd(i.tokens,i.endState)}}]),e}(),q7=function(){function e(t,n,i,r){u(this,e),this._languageId=t,this._actual=n,this._languageService=i,this._standaloneThemeService=r}return h(e,[{key:"dispose",value:function(){}},{key:"getInitialState",value:function(){return this._actual.getInitialState()}},{key:"tokenize",value:function(t,n,i){return e.adaptTokenize(this._languageId,this._actual,t,i)}},{key:"_toBinaryTokens",value:function(e,t){for(var n=e.encodeLanguageId(this._languageId),i=this._standaloneThemeService.getColorTheme().tokenTheme,r=[],o=0,a=0,s=0,l=t.length;s<l;s++){var u=t[s],c=1024|i.match(n,u.scopes);if(!(o>0&&r[o-1]===c)){var d=u.startIndex;0===s?d=0:d<a&&(d=a),r[o++]=d,r[o++]=c,a=d}}for(var h=new Uint32Array(o),f=0;f<o;f++)h[f]=r[f];return h}},{key:"tokenizeEncoded",value:function(e,t,n){var i,r=this._actual.tokenize(e,n),o=this._toBinaryTokens(this._languageService.languageIdCodec,r.tokens);return i=r.endState.equals(n)?n:r.endState,new xd(o,i)}}],[{key:"_toClassicTokens",value:function(e,t){for(var n=[],i=0,r=0,o=e.length;r<o;r++){var a=e[r],s=a.startIndex;0===r?s=0:s<i&&(s=i),n[r]=new Cd(s,a.scopes,t),i=s}return n}},{key:"adaptTokenize",value:function(t,n,i,r){var o,a=n.tokenize(i,r),s=e._toClassicTokens(a.tokens,t);return o=a.endState.equals(r)?r:a.endState,new Sd(s,o)}}]),e}();function G7(e){return e&&"function"==typeof e.then}function Z7(e){var t=_Q.get(GZ);if(e){for(var n=[null],i=1,r=e.length;i<r;i++)n[i]=XC.fromHex(e[i]);t.setColorMapOverride(n)}else t.setColorMapOverride(null)}function Y7(e,t){return function(e){return"tokenizeEncoded"in e}(t)?new K7(e,t):new q7(e,t,_Q.get(Jb),_Q.get(GZ))}function Q7(e,t){var n=new Th(s((function(){var n;return E(this,(function(i){switch(i.label){case 0:return[4,Promise.resolve(t.create())];case 1:return(n=i.sent())?function(e){return"function"==typeof e.getInitialState}(n)?[2,Y7(e,n)]:[2,new fX(_Q.get(Jb),_Q.get(GZ),e,W7(e,n),_Q.get(qb))]:[2,null]}}))})));return Rh.registerFactory(e,n)}function X7(e,t){if(!_Q.get(Jb).isRegisteredLanguageId(e))throw new Error("Cannot set tokens provider for unknown language ".concat(e));return G7(t)?Q7(e,{create:function(){return t}}):Rh.register(e,Y7(e,t))}function $7(e,t){return G7(t)?Q7(e,{create:function(){return t}}):Rh.register(e,function(t){return new fX(_Q.get(Jb),_Q.get(GZ),e,W7(e,t),_Q.get(qb))}(t))}function J7(e,t){return _Q.get(wS).referenceProvider.register(e,t)}function e9(e,t){return _Q.get(wS).renameProvider.register(e,t)}function t9(e,t){return _Q.get(wS).newSymbolNamesProvider.register(e,t)}function n9(e,t){return _Q.get(wS).signatureHelpProvider.register(e,t)}function i9(e,t){return _Q.get(wS).hoverProvider.register(e,{provideHover:function(){var e=s((function(e,n,i,r){var o;return E(this,(function(a){return o=e.getWordAtPosition(n),[2,Promise.resolve(t.provideHover(e,n,i,r)).then((function(e){if(e)return!e.range&&o&&(e.range=new hd(n.lineNumber,o.startColumn,n.lineNumber,o.endColumn)),e.range||(e.range=new hd(n.lineNumber,n.column,n.lineNumber,n.column)),e}))]}))}));return function(t,n,i,r){return e.apply(this,arguments)}}()})}function r9(e,t){return _Q.get(wS).documentSymbolProvider.register(e,t)}function o9(e,t){return _Q.get(wS).documentHighlightProvider.register(e,t)}function a9(e,t){return _Q.get(wS).linkedEditingRangeProvider.register(e,t)}function s9(e,t){return _Q.get(wS).definitionProvider.register(e,t)}function l9(e,t){return _Q.get(wS).implementationProvider.register(e,t)}function u9(e,t){return _Q.get(wS).typeDefinitionProvider.register(e,t)}function c9(e,t){return _Q.get(wS).codeLensProvider.register(e,t)}function d9(e,t,n){return _Q.get(wS).codeActionProvider.register(e,{providedCodeActionKinds:null==n?void 0:n.providedCodeActionKinds,documentation:null==n?void 0:n.documentation,provideCodeActions:function(e,n,i,r){var o=_Q.get(RW).read({resource:e.uri}).filter((function(e){return hd.areIntersectingOrTouching(e,n)}));return t.provideCodeActions(e,n,{markers:o,only:i.only,trigger:i.trigger},r)},resolveCodeAction:t.resolveCodeAction})}function h9(e,t){return _Q.get(wS).documentFormattingEditProvider.register(e,t)}function f9(e,t){return _Q.get(wS).documentRangeFormattingEditProvider.register(e,t)}function g9(e,t){return _Q.get(wS).onTypeFormattingEditProvider.register(e,t)}function v9(e,t){return _Q.get(wS).linkProvider.register(e,t)}function p9(e,t){return _Q.get(wS).completionProvider.register(e,t)}function m9(e,t){return _Q.get(wS).colorProvider.register(e,t)}function y9(e,t){return _Q.get(wS).foldingRangeProvider.register(e,t)}function _9(e,t){return _Q.get(wS).declarationProvider.register(e,t)}function b9(e,t){return _Q.get(wS).selectionRangeProvider.register(e,t)}function k9(e,t){return _Q.get(wS).documentSemanticTokensProvider.register(e,t)}function w9(e,t){return _Q.get(wS).documentRangeSemanticTokensProvider.register(e,t)}function C9(e,t){return _Q.get(wS).inlineCompletionsProvider.register(e,t)}function S9(e,t){return _Q.get(wS).inlineEditProvider.register(e,t)}function x9(e,t){return _Q.get(wS).inlayHintsProvider.register(e,t)}var L9=Zm("IEditorCancelService"),D9=new jy("cancellableOperation",!1,Xa("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));nk(L9,function(){function e(){u(this,e),this._tokens=new WeakMap}return h(e,[{key:"add",value:function(e,t){var n,i=this._tokens.get(e);return i||(i=e.invokeWithinContext((function(e){return{key:D9.bindTo(e.get(Ky)),tokens:new Hs}})),this._tokens.set(e,i)),i.key.set(!0),n=i.tokens.push(t),function(){n&&(n(),i.key.set(!i.tokens.isEmpty()),n=void 0)}}},{key:"cancel",value:function(e){var t=this._tokens.get(e);if(t){var n=t.tokens.pop();n&&(n.cancel(),t.key.set(!t.tokens.isEmpty()))}}}]),e}(),1);var N9=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[n])).editor=e,i._unregister=e.invokeWithinContext((function(t){return t.get(L9).add(e,i)})),i}return p(t,e),h(t,[{key:"dispose",value:function(){this._unregister(),g(v(t.prototype),"dispose",this).call(this)}}]),t}(rc);P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:D9}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t){e.get(L9).cancel(t)}}]),t}(E_)));var I9=function(){function e(t,n){if(u(this,e),this.flags=n,1&this.flags){var i=t.getModel();this.modelVersionId=i?jh("{0}#{1}",i.uri.toString(),i.getVersionId()):null}else this.modelVersionId=null;4&this.flags?this.position=t.getPosition():this.position=null,2&this.flags?this.selection=t.getSelection():this.selection=null,8&this.flags?(this.scrollLeft=t.getScrollLeft(),this.scrollTop=t.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}return h(e,[{key:"_equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.modelVersionId===n.modelVersionId&&(this.scrollLeft===n.scrollLeft&&this.scrollTop===n.scrollTop&&(!(!this.position&&n.position||this.position&&!n.position||this.position&&n.position&&!this.position.equals(n.position))&&!(!this.selection&&n.selection||this.selection&&!n.selection||this.selection&&n.selection&&!this.selection.equalsRange(n.selection))))}},{key:"validate",value:function(t){return this._equals(new e(t,this.flags))}}]),e}(),E9=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t,[e,r]))._listener=new Tu,4&n&&o._listener.add(e.onDidChangeCursorPosition((function(e){i&&hd.containsPosition(i,e.position)||o.cancel()}))),2&n&&o._listener.add(e.onDidChangeCursorSelection((function(e){i&&hd.containsRange(i,e.selection)||o.cancel()}))),8&n&&o._listener.add(e.onDidScrollChange((function(e){return o.cancel()}))),1&n&&(o._listener.add(e.onDidChangeModel((function(e){return o.cancel()}))),o._listener.add(e.onDidChangeModelContent((function(e){return o.cancel()})))),o}return p(t,e),h(t,[{key:"dispose",value:function(){this._listener.dispose(),g(v(t.prototype),"dispose",this).call(this)}}]),t}(N9),M9=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[n]))._listener=e.onDidChangeContent((function(){return i.cancel()})),i}return p(t,e),h(t,[{key:"dispose",value:function(){this._listener.dispose(),g(v(t.prototype),"dispose",this).call(this)}}]),t}(rc);function T9(e){return!(!e||"function"!=typeof e.getEditorType)&&e.getEditorType()===wQ.ICodeEditor}function R9(e){return!(!e||"function"!=typeof e.getEditorType)&&e.getEditorType()===wQ.IDiffEditor}function A9(e){return T9(e)?e:R9(e)?e.getModifiedEditor():function(e){return!!e&&"object"===(void 0===e?"undefined":L(e))&&"function"==typeof e.onDidChangeActiveEditor}(e)&&T9(e.activeCodeEditor)?e.activeCodeEditor:null}var P9=function(){function e(){u(this,e)}return h(e,null,[{key:"_handleEolEdits",value:function(e,t){var n=void 0,i=[],r=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;"number"==typeof u.eol&&(n=u.eol),u.range&&"string"==typeof u.text&&i.push(u)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return"number"==typeof n&&e.hasModel()&&e.getModel().pushEOL(n),i}},{key:"_isFullModelReplaceEdit",value:function(e,t){if(!e.hasModel())return!1;var n=e.getModel(),i=n.validateRange(t.range);return n.getFullModelRange().equalsRange(i)}},{key:"execute",value:function(t,n,i){i&&t.pushUndoStop();var r=g3.capture(t),o=e._handleEolEdits(t,n);1===o.length&&e._isFullModelReplaceEdit(t,o[0])?t.executeEdits("formatEditsCommand",o.map((function(e){return lA.replace(hd.lift(e.range),e.text)}))):t.executeEdits("formatEditsCommand",o.map((function(e){return lA.replaceMove(hd.lift(e.range),e.text)}))),i&&t.pushUndoStop(),r.restoreRelativeVerticalPositionOfCursor(t)}}]),e}(),O9=function(){function e(t){u(this,e),this.value=t,this._lower=t.toLowerCase()}return h(e,null,[{key:"toKey",value:function(e){return"string"==typeof e?e.toLowerCase():e._lower}}]),e}(),F9=function(){function e(t){if(u(this,e),this._set=new Set,t){var n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this.add(s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}return h(e,[{key:"add",value:function(e){this._set.add(O9.toKey(e))}},{key:"has",value:function(e){return this._set.has(O9.toKey(e))}}]),e}();function W9(e,t,n){var i=[],r=new F9,o=e.ordered(n),a=!0,s=!1,l=void 0;try{for(var u,c=o[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;i.push(d),d.extensionId&&r.add(d.extensionId)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}var h=t.ordered(n),f=!0,g=!1,v=void 0;try{for(var p,m=function(){var e=p.value;if(e.extensionId){if(r.has(e.extensionId))return"continue";r.add(e.extensionId)}i.push({displayName:e.displayName,extensionId:e.extensionId,provideDocumentFormattingEdits:function(t,n,i){return e.provideDocumentRangeFormattingEdits(t,t.getFullModelRange(),n,i)}})},y=h[Symbol.iterator]();!(f=(p=y.next()).done);f=!0)m()}catch(e){g=!0,v=e}finally{try{f||null==y.return||y.return()}finally{if(g)throw v}}return i}var B9=function(){function e(){u(this,e)}return h(e,null,[{key:"setFormatterSelector",value:function(t){return{dispose:e._selectors.unshift(t)}}},{key:"select",value:function(t,n,i,r){return s((function(){var o;return E(this,(function(a){switch(a.label){case 0:return 0===t.length?[2,void 0]:(o=Ts.first(e._selectors))?[4,o(t,n,i,r)]:[3,2];case 1:return[2,a.sent()];case 2:return[2,void 0]}}))}))()}}]),e}();function H9(e,t,n,i,r,o,a){return V9.apply(this,arguments)}function V9(){return V9=s((function(e,t,n,i,r,o,a){var s,l,u,c,d,h;return E(this,(function(f){switch(f.label){case 0:return s=e.get(Gm),l=e.get(wS),u=l.documentRangeFormattingEditProvider,c=T9(t)?t.getModel():t,d=u.ordered(c),[4,B9.select(d,c,i,2)];case 1:return(h=f.sent())?(r.report(h),[4,s.invokeFunction(z9,h,t,n,o,a)]):[3,3];case 2:f.sent(),f.label=3;case 3:return[2]}}))})),V9.apply(this,arguments)}function z9(e,t,n,i,r,o){return U9.apply(this,arguments)}function U9(){return U9=s((function(e,t,n,i,r,o){var a,l,u,c,d,h,f,g,v,p,m,y,_,b,k,w,S,L,D,N,I,M,T,R,A,P,O,F,W,B,H,V,z,U,j,K,q,G,Z,Y,Q,X,$;return E(this,(function(J){switch(J.label){case 0:a=e.get(TW),l=e.get(k_),u=e.get(WY),T9(n)?(c=n.getModel(),d=new E9(n,5,void 0,r)):(c=n,d=new M9(n,r)),h=[],f=0,g=!0,v=!1,p=void 0;try{for(m=ma(i).sort(hd.compareRangesUsingStarts)[Symbol.iterator]();!(g=(y=m.next()).done);g=!0)_=y.value,f>0&&hd.areIntersectingOrTouching(h[f-1],_)?h[f-1]=hd.fromPositions(h[f-1].getStartPosition(),_.getEndPosition()):f=h.push(_)}catch(e){v=!0,p=e}finally{try{g||null==m.return||m.return()}finally{if(v)throw p}}b=function(){var e=s((function(e){var n,i,r;return E(this,(function(o){switch(o.label){case 0:return l.trace("[format][provideDocumentRangeFormattingEdits] (request)",null===(n=t.extensionId)||void 0===n?void 0:n.value,e),[4,t.provideDocumentRangeFormattingEdits(c,e,c.getFormattingOptions(),d.token)];case 1:return r=o.sent()||[],l.trace("[format][provideDocumentRangeFormattingEdits] (response)",null===(i=t.extensionId)||void 0===i?void 0:i.value,r),[2,r]}}))}));return function(t){return e.apply(this,arguments)}}(),k=function(e,t){if(!e.length||!t.length)return!1;var n=e.reduce((function(e,t){return hd.plusRange(e,t.range)}),e[0].range);if(!t.some((function(e){return hd.intersectRanges(n,e.range)})))return!1;var i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=!0,c=!1,d=void 0;try{for(var h,f=t[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;if(hd.intersectRanges(l.range,g.range))return!0}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return!1},w=[],S=[],J.label=1;case 1:return J.trys.push([1,,26,27]),"function"!=typeof t.provideDocumentRangesFormattingEdits?[3,3]:(l.trace("[format][provideDocumentRangeFormattingEdits] (request)",null===(L=t.extensionId)||void 0===L?void 0:L.value,h),[4,t.provideDocumentRangesFormattingEdits(c,h,c.getFormattingOptions(),d.token)]);case 2:return N=J.sent()||[],l.trace("[format][provideDocumentRangeFormattingEdits] (response)",null===(D=t.extensionId)||void 0===D?void 0:D.value,N),S.push(N),[3,17];case 3:I=!0,M=!1,T=void 0,J.label=4;case 4:J.trys.push([4,9,10,11]),R=h[Symbol.iterator](),J.label=5;case 5:return(I=(A=R.next()).done)?[3,8]:(P=A.value,d.token.isCancellationRequested?[2,!0]:(O=S.push,[4,b(P)]));case 6:O.apply(S,[J.sent()]),J.label=7;case 7:return I=!0,[3,5];case 8:return[3,11];case 9:return Y=J.sent(),M=!0,T=Y,[3,11];case 10:try{I||null==R.return||R.return()}finally{if(M)throw T}return[7];case 11:F=0,J.label=12;case 12:if(!(F<h.length))return[3,17];W=F+1,J.label=13;case 13:return W<h.length?d.token.isCancellationRequested?[2,!0]:k(S[F],S[W])?(B=hd.plusRange(h[F],h[W]),[4,b(B)]):[3,15]:[3,16];case 14:H=J.sent(),h.splice(W,1),h.splice(F,1),h.push(B),S.splice(W,1),S.splice(F,1),S.push(H),F=0,W=0,J.label=15;case 15:return++W,[3,13];case 16:return++F,[3,12];case 17:V=!0,z=!1,U=void 0,J.label=18;case 18:J.trys.push([18,23,24,25]),j=S[Symbol.iterator](),J.label=19;case 19:return(V=(K=j.next()).done)?[3,22]:(q=K.value,d.token.isCancellationRequested?[2,!0]:[4,a.computeMoreMinimalEdits(c.uri,q)]);case 20:(G=J.sent())&&(Z=w).push.apply(Z,x(G)),J.label=21;case 21:return V=!0,[3,19];case 22:return[3,25];case 23:return Y=J.sent(),z=!0,U=Y,[3,25];case 24:try{V||null==j.return||j.return()}finally{if(z)throw U}return[7];case 25:return[3,27];case 26:return d.dispose(),[7];case 27:return 0===w.length?[2,!1]:(T9(n)?(P9.execute(n,w,!0),n.revealPositionInCenterIfOutsideViewport(n.getPosition(),1)):(Q=C(w,1),X=Q[0].range,$=new fd(X.startLineNumber,X.startColumn,X.endLineNumber,X.endColumn),c.pushEditOperations([$],w.map((function(e){return{text:e.text,range:hd.lift(e.range),forceMoveMarkers:!0}})),(function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value.range;if(hd.areIntersectingOrTouching(a,$))return[new fd(a.startLineNumber,a.startColumn,a.endLineNumber,a.endColumn)]}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return null}))),u.playSignal(VY.format,{userGesture:o}),[2,!0])}}))})),U9.apply(this,arguments)}function j9(e,t,n,i,r,o){return K9.apply(this,arguments)}function K9(){return K9=s((function(e,t,n,i,r,o){var a,s,l,u,c;return E(this,(function(d){switch(d.label){case 0:return a=e.get(Gm),s=e.get(wS),l=T9(t)?t.getModel():t,u=W9(s.documentFormattingEditProvider,s.documentRangeFormattingEditProvider,l),[4,B9.select(u,l,n,1)];case 1:return(c=d.sent())?(i.report(c),[4,a.invokeFunction(q9,c,t,n,r,o)]):[3,3];case 2:d.sent(),d.label=3;case 3:return[2]}}))})),K9.apply(this,arguments)}function q9(e,t,n,i,r,o){return G9.apply(this,arguments)}function G9(){return G9=s((function(e,t,n,i,r,o){var a,s,l,u,c,d,h,f,g;return E(this,(function(v){switch(v.label){case 0:a=e.get(TW),s=e.get(WY),T9(n)?(l=n.getModel(),u=new E9(n,5,void 0,r)):(l=n,u=new M9(n,r)),v.label=1;case 1:return v.trys.push([1,,4,5]),[4,t.provideDocumentFormattingEdits(l,l.getFormattingOptions(),u.token)];case 2:return d=v.sent(),[4,a.computeMoreMinimalEdits(l.uri,d)];case 3:return c=v.sent(),u.token.isCancellationRequested?[2,!0]:[3,5];case 4:return u.dispose(),[7];case 5:return c&&0!==c.length?(T9(n)?(P9.execute(n,c,2!==i),2!==i&&n.revealPositionInCenterIfOutsideViewport(n.getPosition(),1)):(h=C(c,1),f=h[0].range,g=new fd(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn),l.pushEditOperations([g],c.map((function(e){return{text:e.text,range:hd.lift(e.range),forceMoveMarkers:!0}})),(function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value.range;if(hd.areIntersectingOrTouching(a,g))return[new fd(a.startLineNumber,a.startColumn,a.endLineNumber,a.endColumn)]}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return null}))),s.playSignal(VY.format,{userGesture:o}),[2,!0]):[2,!1]}}))})),G9.apply(this,arguments)}function Z9(e,t,n,i,r,o){return Y9.apply(this,arguments)}function Y9(){return Y9=s((function(e,t,n,i,r,o){var a,s,l,u,c,d,h,f,g;return E(this,(function(v){switch(v.label){case 0:a=t.documentRangeFormattingEditProvider.ordered(n),s=!0,l=!1,u=void 0,v.label=1;case 1:v.trys.push([1,7,8,9]),c=a[Symbol.iterator](),v.label=2;case 2:return(s=(d=c.next()).done)?[3,6]:(h=d.value,[4,Promise.resolve(h.provideDocumentRangeFormattingEdits(n,i,r,o)).catch(pu)]);case 3:return ua(f=v.sent())?[4,e.computeMoreMinimalEdits(n.uri,f)]:[3,5];case 4:return[2,v.sent()];case 5:return s=!0,[3,2];case 6:return[3,9];case 7:return g=v.sent(),l=!0,u=g,[3,9];case 8:try{s||null==c.return||c.return()}finally{if(l)throw u}return[7];case 9:return[2,void 0]}}))})),Y9.apply(this,arguments)}function Q9(e,t,n,i,r){return X9.apply(this,arguments)}function X9(){return X9=s((function(e,t,n,i,r){var o,a,s,l,u,c,d,h,f;return E(this,(function(g){switch(g.label){case 0:o=W9(t.documentFormattingEditProvider,t.documentRangeFormattingEditProvider,n),a=!0,s=!1,l=void 0,g.label=1;case 1:g.trys.push([1,7,8,9]),u=o[Symbol.iterator](),g.label=2;case 2:return(a=(c=u.next()).done)?[3,6]:(d=c.value,[4,Promise.resolve(d.provideDocumentFormattingEdits(n,i,r)).catch(pu)]);case 3:return ua(h=g.sent())?[4,e.computeMoreMinimalEdits(n.uri,h)]:[3,5];case 4:return[2,g.sent()];case 5:return a=!0,[3,2];case 6:return[3,9];case 7:return f=g.sent(),s=!0,l=f,[3,9];case 8:try{a||null==u.return||u.return()}finally{if(s)throw l}return[7];case 9:return[2,void 0]}}))})),X9.apply(this,arguments)}function $9(e,t,n,i,r,o,a){var s=t.onTypeFormattingEditProvider.ordered(n);return 0===s.length||s[0].autoFormatTriggerCharacters.indexOf(r)<0?Promise.resolve(void 0):Promise.resolve(s[0].provideOnTypeFormattingEdits(n,i,r,o,a)).catch(pu).then((function(t){return e.computeMoreMinimalEdits(n.uri,t)}))}B9._selectors=new Hs,sy.registerCommand("_executeFormatRangeProvider",function(){var e=s((function(e){var t,n,i,r,o,a,s,l,u,c,d,h=arguments;return E(this,(function(f){switch(f.label){case 0:for(t=h.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=h[i];return r=C(n,3),o=r[0],a=r[1],s=r[2],Oa(ed.isUri(o)),Oa(hd.isIRange(a)),l=e.get(Xm),u=e.get(TW),c=e.get(wS),[4,l.createModelReference(o)];case 1:d=f.sent();try{return[2,Z9(u,c,d.object.textEditorModel,hd.lift(a),s,Uu.None)]}finally{d.dispose()}return[2]}}))}));return function(t){return e.apply(this,arguments)}}()),sy.registerCommand("_executeFormatDocumentProvider",function(){var e=s((function(e){var t,n,i,r,o,a,s,l,u,c,d=arguments;return E(this,(function(h){switch(h.label){case 0:for(t=d.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=d[i];return r=C(n,2),o=r[0],a=r[1],Oa(ed.isUri(o)),s=e.get(Xm),l=e.get(TW),u=e.get(wS),[4,s.createModelReference(o)];case 1:c=h.sent();try{return[2,Q9(l,u,c.object.textEditorModel,a,Uu.None)]}finally{c.dispose()}return[2]}}))}));return function(t){return e.apply(this,arguments)}}()),sy.registerCommand("_executeFormatOnTypeProvider",function(){var e=s((function(e){var t,n,i,r,o,a,s,l,u,c,d,h,f=arguments;return E(this,(function(g){switch(g.label){case 0:for(t=f.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=f[i];return r=C(n,4),o=r[0],a=r[1],s=r[2],l=r[3],Oa(ed.isUri(o)),Oa(dd.isIPosition(a)),Oa("string"==typeof s),u=e.get(Xm),c=e.get(TW),d=e.get(wS),[4,u.createModelReference(o)];case 1:h=g.sent();try{return[2,$9(c,d,h.object.textEditorModel,dd.lift(a),s,l,Uu.None)]}finally{h.dispose()}return[2]}}))}));return function(t){return e.apply(this,arguments)}}()),hu.wrappingIndent.defaultValue=0,hu.glyphMargin.defaultValue=!1,hu.autoIndent.defaultValue=3,hu.overviewRulerLanes.defaultValue=2,B9.setFormatterSelector((function(e,t,n){return Promise.resolve(e[0])}));var J9=Oh();J9.editor={create:$6,getEditors:t7,getDiffEditors:n7,onDidCreateEditor:J6,onDidCreateDiffEditor:e7,createDiffEditor:i7,addCommand:o7,addEditorAction:a7,addKeybindingRule:s7,addKeybindingRules:l7,createModel:u7,setModelLanguage:c7,setModelMarkers:d7,getModelMarkers:f7,removeAllMarkers:h7,onDidChangeMarkers:g7,getModels:p7,getModel:v7,onDidCreateModel:m7,onWillDisposeModel:y7,onDidChangeModelLanguage:_7,createWebWorker:b7,colorizeElement:k7,colorize:w7,colorizeModelLine:C7,tokenize:S7,defineTheme:x7,setTheme:L7,remeasureFonts:D7,registerCommand:N7,registerLinkOpener:I7,registerEditorOpener:E7,AccessibilitySupport:Hd,ContentWidgetPositionPreference:qd,CursorChangeReason:Gd,DefaultEndOfLine:Zd,EditorAutoIndentStrategy:Qd,EditorOption:Xd,EndOfLinePreference:$d,EndOfLineSequence:Jd,MinimapPosition:ch,MinimapSectionHeaderStyle:dh,MouseTargetType:hh,OverlayWidgetPositionPreference:vh,OverviewRulerLane:ph,GlyphMarginLane:eh,RenderLineNumbersType:_h,RenderMinimap:bh,ScrollbarVisibility:wh,ScrollType:kh,TextEditorCursorBlinkingStyle:Nh,TextEditorCursorStyle:Ih,TrackedRangeStickiness:Eh,WrappingIndent:Mh,InjectedTextCursorStops:ih,PositionAffinity:yh,ShowLightbulbIconMode:Sh,ConfigurationChangedEvent:Gs,BareFontInfo:zm,FontInfo:Um,TextModelResolvedOptions:ww,FindMatch:Cw,ApplyUpdateResult:Qs,EditorZoom:Hm,createMultiFileDiffEditor:r7,EditorType:wQ,EditorOptions:hu},J9.languages={register:B7,getLanguages:H7,onLanguage:z7,onLanguageEncountered:U7,getEncodedLanguageId:V7,setLanguageConfiguration:j7,setColorMap:Z7,registerTokensProviderFactory:Q7,setTokensProvider:X7,setMonarchTokensProvider:$7,registerReferenceProvider:J7,registerRenameProvider:e9,registerNewSymbolNameProvider:t9,registerCompletionItemProvider:p9,registerSignatureHelpProvider:n9,registerHoverProvider:i9,registerDocumentSymbolProvider:r9,registerDocumentHighlightProvider:o9,registerLinkedEditingRangeProvider:a9,registerDefinitionProvider:s9,registerImplementationProvider:l9,registerTypeDefinitionProvider:u9,registerCodeLensProvider:c9,registerCodeActionProvider:d9,registerDocumentFormattingEditProvider:h9,registerDocumentRangeFormattingEditProvider:f9,registerOnTypeFormattingEditProvider:g9,registerLinkProvider:v9,registerColorProvider:m9,registerFoldingRangeProvider:y9,registerDeclarationProvider:_9,registerSelectionRangeProvider:b9,registerDocumentSemanticTokensProvider:k9,registerDocumentRangeSemanticTokensProvider:w9,registerInlineCompletionsProvider:C9,registerInlineEditProvider:S9,registerInlayHintsProvider:x9,DocumentHighlightKind:Yd,CompletionItemKind:Ud,CompletionItemTag:jd,CompletionItemInsertTextRule:zd,SymbolKind:Lh,SymbolTag:Dh,IndentAction:nh,CompletionTriggerKind:Kd,SignatureHelpTriggerKind:xh,InlayHintKind:rh,InlineCompletionTriggerKind:oh,InlineEditTriggerKind:ah,CodeActionTriggerType:Vd,NewSymbolNameTag:fh,NewSymbolNameTriggerKind:gh,PartialAcceptTriggerKind:mh,HoverVerbosityAction:th,FoldingRangeKind:Wd,SelectedSuggestionInfo:Ed};var e8=J9.CancellationTokenSource,t8=J9.Emitter,n8=J9.KeyCode,i8=J9.KeyMod,r8=J9.Position,o8=J9.Range,a8=J9.Selection,s8=J9.SelectionDirection,l8=J9.MarkerSeverity,u8=J9.MarkerTag,c8=J9.Uri,d8=J9.Token,h8=J9.editor,f8=J9.languages,g8=globalThis.MonacoEnvironment;((null==g8?void 0:g8.globalAPI)||"function"==typeof define&&define.amd)&&(globalThis.monaco=J9),void 0!==globalThis.require&&"function"==typeof globalThis.require.config&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});var v8=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:e8,Emitter:t8,KeyCode:n8,KeyMod:i8,MarkerSeverity:l8,MarkerTag:u8,Position:r8,Range:o8,Selection:a8,SelectionDirection:s8,Token:d8,Uri:c8,editor:h8,languages:f8},Symbol.toStringTag,{value:"Module"}));e("q",v8);var p8=Object.defineProperty,m8=Object.getOwnPropertyDescriptor,y8=Object.getOwnPropertyNames,_8=Object.prototype.hasOwnProperty,b8={};!function(e,t){(function(e,t,n,i){if(t&&"object"===(void 0===t?"undefined":L(t))||"function"==typeof t){var r=!0,o=!1,a=void 0;try{for(var s,l=function(){var r=s.value;_8.call(e,r)||r===n||p8(e,r,{get:function(){return t[r]},enumerable:!(i=m8(t,r))||i.enumerable})},u=y8(t)[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)l()}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}}})(e,t,"default")}(b8,v8);var k8={},w8={},C8=function(){function e(t){var n=this;u(this,e),this._languageId=t,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((function(e,t){n._lazyLoadPromiseResolve=e,n._lazyLoadPromiseReject=t}))}return h(e,[{key:"load",value:function(){var e=this;return this._loadingTriggered||(this._loadingTriggered=!0,k8[this._languageId].loader().then((function(t){return e._lazyLoadPromiseResolve(t)}),(function(t){return e._lazyLoadPromiseReject(t)}))),this._lazyLoadPromise}}],[{key:"getOrCreate",value:function(t){return w8[t]||(w8[t]=new e(t)),w8[t]}}]),e}();function S8(e){var t=e.id;k8[t]=e,b8.languages.register(e);var n=C8.getOrCreate(t);b8.languages.registerTokensProviderFactory(t,{create:s((function(){return E(this,(function(e){switch(e.label){case 0:return[4,n.load()];case 1:return[2,e.sent().language]}}))}))}),b8.languages.onLanguageEncountered(t,s((function(){var e;return E(this,(function(i){switch(i.label){case 0:return[4,n.load()];case 1:return e=i.sent(),b8.languages.setLanguageConfiguration(t,e.conf),[2]}}))})))}S8({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:function(){return q((function(){return t.import("./abap-legacy-BKr5iJGA.js")}),void 0)}}),S8({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:function(){return q((function(){return t.import("./apex-legacy-C8-hrV1q.js")}),void 0)}}),S8({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:function(){return q((function(){return t.import("./azcli-legacy-DB2Qkg6h.js")}),void 0)}}),S8({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:function(){return q((function(){return t.import("./bat-legacy-BTCz16gC.js")}),void 0)}}),S8({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:function(){return q((function(){return t.import("./bicep-legacy-DjThZ-t_.js")}),void 0)}}),S8({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:function(){return q((function(){return t.import("./cameligo-legacy-Dvpap87D.js")}),void 0)}}),S8({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:function(){return q((function(){return t.import("./clojure-legacy-BJ84QZ4J.js")}),void 0)}}),S8({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:function(){return q((function(){return t.import("./coffee-legacy-1of8Lefc.js")}),void 0)}}),S8({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:function(){return q((function(){return t.import("./cpp-legacy-BrvfuARM.js")}),void 0)}}),S8({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:function(){return q((function(){return t.import("./cpp-legacy-BrvfuARM.js")}),void 0)}}),S8({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:function(){return q((function(){return t.import("./csharp-legacy-Y9Ibq-NE.js")}),void 0)}}),S8({id:"csp",extensions:[".csp"],aliases:["CSP","csp"],loader:function(){return q((function(){return t.import("./csp-legacy-6o-6_up0.js")}),void 0)}}),S8({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:function(){return q((function(){return t.import("./css-legacy-DQrWni5K.js")}),void 0)}}),S8({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:function(){return q((function(){return t.import("./cypher-legacy-BsWvvJFg.js")}),void 0)}}),S8({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:function(){return q((function(){return t.import("./dart-legacy-DfYbpdLL.js")}),void 0)}}),S8({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:function(){return q((function(){return t.import("./dockerfile-legacy-BwVf8kEf.js")}),void 0)}}),S8({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:function(){return q((function(){return t.import("./ecl-legacy-BDMmwPeW.js")}),void 0)}}),S8({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:function(){return q((function(){return t.import("./elixir-legacy-D_WrqbDr.js")}),void 0)}}),S8({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:function(){return q((function(){return t.import("./flow9-legacy-lbRqRu2O.js")}),void 0)}}),S8({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:function(){return q((function(){return t.import("./fsharp-legacy-De0uKxG6.js")}),void 0)}}),S8({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:function(){return q((function(){return t.import("./freemarker2-legacy-oXokhgnt.js")}),void 0).then((function(e){return e.TagAutoInterpolationDollar}))}}),S8({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:function(){return q((function(){return t.import("./freemarker2-legacy-oXokhgnt.js")}),void 0).then((function(e){return e.TagAngleInterpolationDollar}))}}),S8({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:function(){return q((function(){return t.import("./freemarker2-legacy-oXokhgnt.js")}),void 0).then((function(e){return e.TagBracketInterpolationDollar}))}}),S8({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:function(){return q((function(){return t.import("./freemarker2-legacy-oXokhgnt.js")}),void 0).then((function(e){return e.TagAngleInterpolationBracket}))}}),S8({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:function(){return q((function(){return t.import("./freemarker2-legacy-oXokhgnt.js")}),void 0).then((function(e){return e.TagBracketInterpolationBracket}))}}),S8({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:function(){return q((function(){return t.import("./freemarker2-legacy-oXokhgnt.js")}),void 0).then((function(e){return e.TagAutoInterpolationDollar}))}}),S8({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:function(){return q((function(){return t.import("./freemarker2-legacy-oXokhgnt.js")}),void 0).then((function(e){return e.TagAutoInterpolationBracket}))}}),S8({id:"go",extensions:[".go"],aliases:["Go"],loader:function(){return q((function(){return t.import("./go-legacy-B4bHjSGn.js")}),void 0)}}),S8({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:function(){return q((function(){return t.import("./graphql-legacy-CaEl6jpq.js")}),void 0)}}),S8({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:function(){return q((function(){return t.import("./handlebars-legacy-_ITG74rw.js")}),void 0)}}),S8({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:function(){return q((function(){return t.import("./hcl-legacy-xEVa3NMv.js")}),void 0)}}),S8({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:function(){return q((function(){return t.import("./html-legacy-BqJtqRhL.js")}),void 0)}}),S8({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:function(){return q((function(){return t.import("./ini-legacy-B_br2ltW.js")}),void 0)}}),S8({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:function(){return q((function(){return t.import("./java-legacy-D0Cl8_C7.js")}),void 0)}}),S8({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:function(){return q((function(){return t.import("./javascript-legacy-Be87DdkG.js")}),void 0)}}),S8({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:function(){return q((function(){return t.import("./julia-legacy-BZ-J7nFY.js")}),void 0)}}),S8({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:function(){return q((function(){return t.import("./kotlin-legacy-B-hrWsh6.js")}),void 0)}}),S8({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:function(){return q((function(){return t.import("./less-legacy-DcO6X-3K.js")}),void 0)}}),S8({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:function(){return q((function(){return t.import("./lexon-legacy-CA5Rg6pc.js")}),void 0)}}),S8({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:function(){return q((function(){return t.import("./lua-legacy-BX6q9IVH.js")}),void 0)}}),S8({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:function(){return q((function(){return t.import("./liquid-legacy-DX5a85HV.js")}),void 0)}}),S8({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:function(){return q((function(){return t.import("./m3-legacy-Bgd45bYW.js")}),void 0)}}),S8({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:function(){return q((function(){return t.import("./markdown-legacy-Q25qMa3h.js")}),void 0)}}),S8({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:function(){return q((function(){return t.import("./mdx-legacy-BC_2kS63.js")}),void 0)}}),S8({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:function(){return q((function(){return t.import("./mips-legacy-BJ1g54yE.js")}),void 0)}}),S8({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:function(){return q((function(){return t.import("./msdax-legacy-DTKfzs62.js")}),void 0)}}),S8({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:function(){return q((function(){return t.import("./mysql-legacy-CDrBM9gW.js")}),void 0)}}),S8({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:function(){return q((function(){return t.import("./objective-c-legacy-ne1--iSw.js")}),void 0)}}),S8({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:function(){return q((function(){return t.import("./pascal-legacy-CI3W3jIR.js")}),void 0)}}),S8({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:function(){return q((function(){return t.import("./pascaligo-legacy-CNbz-DF8.js")}),void 0)}}),S8({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:function(){return q((function(){return t.import("./perl-legacy-CEtc_S1t.js")}),void 0)}}),S8({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:function(){return q((function(){return t.import("./pgsql-legacy-Dixj1C1k.js")}),void 0)}}),S8({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:function(){return q((function(){return t.import("./php-legacy-CHyR3O42.js")}),void 0)}}),S8({id:"pla",extensions:[".pla"],loader:function(){return q((function(){return t.import("./pla-legacy-D1It4YZp.js")}),void 0)}}),S8({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:function(){return q((function(){return t.import("./postiats-legacy-By_dXhSp.js")}),void 0)}}),S8({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:function(){return q((function(){return t.import("./powerquery-legacy-CXZFNP0J.js")}),void 0)}}),S8({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:function(){return q((function(){return t.import("./powershell-legacy-CtvIcXgQ.js")}),void 0)}}),S8({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:function(){return q((function(){return t.import("./protobuf-legacy-Cj7ROV6r.js")}),void 0)}}),S8({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:function(){return q((function(){return t.import("./pug-legacy-ByJWJkgH.js")}),void 0)}}),S8({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:function(){return q((function(){return t.import("./python-legacy-CbyzF14U.js")}),void 0)}}),S8({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:function(){return q((function(){return t.import("./qsharp-legacy-CTX8bR-y.js")}),void 0)}}),S8({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:function(){return q((function(){return t.import("./r-legacy-BjK0ijP9.js")}),void 0)}}),S8({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:function(){return q((function(){return t.import("./razor-legacy-j_oStKsn.js")}),void 0)}}),S8({id:"redis",extensions:[".redis"],aliases:["redis"],loader:function(){return q((function(){return t.import("./redis-legacy-Dq5Z8RzQ.js")}),void 0)}}),S8({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:function(){return q((function(){return t.import("./redshift-legacy-DWeOcejQ.js")}),void 0)}}),S8({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:function(){return q((function(){return t.import("./restructuredtext-legacy-tKxbJ6CY.js")}),void 0)}}),S8({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:function(){return q((function(){return t.import("./ruby-legacy-CcC1WzrD.js")}),void 0)}}),S8({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:function(){return q((function(){return t.import("./rust-legacy-DJNaNKeO.js")}),void 0)}}),S8({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:function(){return q((function(){return t.import("./sb-legacy-BmnsjvKV.js")}),void 0)}}),S8({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:function(){return q((function(){return t.import("./scala-legacy-D4Tg0ndB.js")}),void 0)}}),S8({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:function(){return q((function(){return t.import("./scheme-legacy-UMKoc44L.js")}),void 0)}}),S8({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:function(){return q((function(){return t.import("./scss-legacy-B3VIcUo_.js")}),void 0)}}),S8({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:function(){return q((function(){return t.import("./shell-legacy-BEtcp_Ti.js")}),void 0)}}),S8({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:function(){return q((function(){return t.import("./solidity-legacy-tFMy6x0z.js")}),void 0)}}),S8({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:function(){return q((function(){return t.import("./sophia-legacy-DA4Lxx13.js")}),void 0)}}),S8({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:function(){return q((function(){return t.import("./sparql-legacy-YJDDXvXD.js")}),void 0)}}),S8({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:function(){return q((function(){return t.import("./sql-legacy-3qKEJqFo.js")}),void 0)}}),S8({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:function(){return q((function(){return t.import("./st-legacy-CN1tzb7f.js")}),void 0)}}),S8({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:function(){return q((function(){return t.import("./swift-legacy-DNovQX4M.js")}),void 0)}}),S8({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:function(){return q((function(){return t.import("./systemverilog-legacy-C-x6RTFT.js")}),void 0)}}),S8({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:function(){return q((function(){return t.import("./systemverilog-legacy-C-x6RTFT.js")}),void 0)}}),S8({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:function(){return q((function(){return t.import("./tcl-legacy-C-qkeZpw.js")}),void 0)}}),S8({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:function(){return q((function(){return t.import("./twig-legacy-CNX1VZDD.js")}),void 0)}}),S8({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:function(){return q((function(){return t.import("./typescript-legacy-NlcdOC4W.js")}),void 0)}}),S8({id:"typespec",extensions:[".tsp"],aliases:["TypeSpec"],loader:function(){return q((function(){return t.import("./typespec-legacy-BE5yAb61.js")}),void 0)}}),S8({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:function(){return q((function(){return t.import("./vb-legacy-D-970kX_.js")}),void 0)}}),S8({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:function(){return q((function(){return t.import("./wgsl-legacy-DthJ9YTq.js")}),void 0)}}),S8({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:function(){return q((function(){return t.import("./xml-legacy-DaEF50-P.js")}),void 0)}}),S8({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:function(){return q((function(){return t.import("./yaml-legacy-Cathtx-S.js")}),void 0)}});var x8=Object.defineProperty,L8=Object.getOwnPropertyDescriptor,D8=Object.getOwnPropertyNames,N8=Object.prototype.hasOwnProperty,I8={};!function(e,t){(function(e,t,n,i){if(t&&"object"===(void 0===t?"undefined":L(t))||"function"==typeof t){var r=!0,o=!1,a=void 0;try{for(var s,l=function(){var r=s.value;N8.call(e,r)||r===n||x8(e,r,{get:function(){return t[r]},enumerable:!(i=L8(t,r))||i.enumerable})},u=D8(t)[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)l()}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}}})(e,t,"default")}(I8,v8);var E8=function(){function e(t,n,i){u(this,e),this._onDidChange=new I8.Emitter,this._languageId=t,this.setOptions(n),this.setModeConfiguration(i)}return h(e,[{key:"onDidChange",get:function(){return this._onDidChange.event}},{key:"languageId",get:function(){return this._languageId}},{key:"modeConfiguration",get:function(){return this._modeConfiguration}},{key:"diagnosticsOptions",get:function(){return this.options}},{key:"options",get:function(){return this._options}},{key:"setOptions",value:function(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}},{key:"setDiagnosticsOptions",value:function(e){this.setOptions(e)}},{key:"setModeConfiguration",value:function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}}]),e}(),M8={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},T8={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},R8=new E8("css",M8,T8),A8=new E8("scss",M8,T8),P8=new E8("less",M8,T8);function O8(){return q((function(){return t.import("./cssMode-legacy-BG669M5f.js")}),void 0)}I8.languages.css={cssDefaults:R8,lessDefaults:P8,scssDefaults:A8},I8.languages.onLanguage("less",(function(){O8().then((function(e){return e.setupMode(P8)}))})),I8.languages.onLanguage("scss",(function(){O8().then((function(e){return e.setupMode(A8)}))})),I8.languages.onLanguage("css",(function(){O8().then((function(e){return e.setupMode(R8)}))}));var F8=Object.defineProperty,W8=Object.getOwnPropertyDescriptor,B8=Object.getOwnPropertyNames,H8=Object.prototype.hasOwnProperty,V8={};!function(e,t){(function(e,t,n,i){if(t&&"object"===(void 0===t?"undefined":L(t))||"function"==typeof t){var r=!0,o=!1,a=void 0;try{for(var s,l=function(){var r=s.value;H8.call(e,r)||r===n||F8(e,r,{get:function(){return t[r]},enumerable:!(i=W8(t,r))||i.enumerable})},u=B8(t)[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)l()}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}}})(e,t,"default")}(V8,v8);var z8=function(){function e(t,n,i){u(this,e),this._onDidChange=new V8.Emitter,this._languageId=t,this.setOptions(n),this.setModeConfiguration(i)}return h(e,[{key:"onDidChange",get:function(){return this._onDidChange.event}},{key:"languageId",get:function(){return this._languageId}},{key:"options",get:function(){return this._options}},{key:"modeConfiguration",get:function(){return this._modeConfiguration}},{key:"setOptions",value:function(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}},{key:"setModeConfiguration",value:function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}}]),e}(),U8={format:{tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},suggest:{},data:{useDefaultDataProvider:!0}};function j8(e){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:e===K8,documentFormattingEdits:e===K8,documentRangeFormattingEdits:e===K8}}var K8="html",q8="handlebars",G8="razor",Z8=tee(K8,U8,j8(K8)),Y8=Z8.defaults,Q8=tee(q8,U8,j8(q8)),X8=Q8.defaults,$8=tee(G8,U8,j8(G8)),J8=$8.defaults;function eee(){return q((function(){return t.import("./htmlMode-legacy-BZWQftr5.js")}),void 0)}function tee(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U8,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j8(e),r=new z8(e,n,i),o=V8.languages.onLanguage(e,s((function(){return E(this,(function(e){switch(e.label){case 0:return[4,eee()];case 1:return t=e.sent().setupMode(r),[2]}}))})));return{defaults:r,dispose:function(){o.dispose(),null==t||t.dispose(),t=void 0}}}V8.languages.html={htmlDefaults:Y8,razorDefaults:J8,handlebarDefaults:X8,htmlLanguageService:Z8,handlebarLanguageService:Q8,razorLanguageService:$8,registerHTMLLanguageService:tee};var nee=Object.defineProperty,iee=Object.getOwnPropertyDescriptor,ree=Object.getOwnPropertyNames,oee=Object.prototype.hasOwnProperty,aee={};!function(e,t){(function(e,t,n,i){if(t&&"object"===(void 0===t?"undefined":L(t))||"function"==typeof t){var r=!0,o=!1,a=void 0;try{for(var s,l=function(){var r=s.value;oee.call(e,r)||r===n||nee(e,r,{get:function(){return t[r]},enumerable:!(i=iee(t,r))||i.enumerable})},u=ree(t)[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)l()}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}}})(e,t,"default")}(aee,v8);var see=function(){function e(t,n,i){u(this,e),this._onDidChange=new aee.Emitter,this._languageId=t,this.setDiagnosticsOptions(n),this.setModeConfiguration(i)}return h(e,[{key:"onDidChange",get:function(){return this._onDidChange.event}},{key:"languageId",get:function(){return this._languageId}},{key:"modeConfiguration",get:function(){return this._modeConfiguration}},{key:"diagnosticsOptions",get:function(){return this._diagnosticsOptions}},{key:"setDiagnosticsOptions",value:function(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}},{key:"setModeConfiguration",value:function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}}]),e}(),lee=new see("json",{validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},{documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0});function uee(){return q((function(){return t.import("./jsonMode-legacy-YHE7Q0BC.js")}),void 0)}aee.languages.json={jsonDefaults:lee,getWorker:function(){return uee().then((function(e){return e.getWorker()}))}},aee.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]}),aee.languages.onLanguage("json",(function(){uee().then((function(e){return e.setupMode(lee)}))}));var cee=Object.defineProperty,dee=Object.getOwnPropertyDescriptor,hee=Object.getOwnPropertyNames,fee=Object.prototype.hasOwnProperty,gee={};!function(e,t){(function(e,t,n,i){if(t&&"object"===(void 0===t?"undefined":L(t))||"function"==typeof t){var r=!0,o=!1,a=void 0;try{for(var s,l=function(){var r=s.value;fee.call(e,r)||r===n||cee(e,r,{get:function(){return t[r]},enumerable:!(i=dee(t,r))||i.enumerable})},u=hee(t)[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)l()}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}}})(e,t,"default")}(gee,v8);var vee=function(e){return e[e.None=0]="None",e[e.CommonJS=1]="CommonJS",e[e.AMD=2]="AMD",e[e.UMD=3]="UMD",e[e.System=4]="System",e[e.ES2015=5]="ES2015",e[e.ESNext=99]="ESNext",e}(vee||{}),pee=function(e){return e[e.None=0]="None",e[e.Preserve=1]="Preserve",e[e.React=2]="React",e[e.ReactNative=3]="ReactNative",e[e.ReactJSX=4]="ReactJSX",e[e.ReactJSXDev=5]="ReactJSXDev",e}(pee||{}),mee=function(e){return e[e.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",e[e.LineFeed=1]="LineFeed",e}(mee||{}),yee=function(e){return e[e.ES3=0]="ES3",e[e.ES5=1]="ES5",e[e.ES2015=2]="ES2015",e[e.ES2016=3]="ES2016",e[e.ES2017=4]="ES2017",e[e.ES2018=5]="ES2018",e[e.ES2019=6]="ES2019",e[e.ES2020=7]="ES2020",e[e.ESNext=99]="ESNext",e[e.JSON=100]="JSON",e[e.Latest=99]="Latest",e}(yee||{}),_ee=function(e){return e[e.Classic=1]="Classic",e[e.NodeJs=2]="NodeJs",e}(_ee||{}),bee=function(){function e(t,n,i,r,o){u(this,e),this._onDidChange=new gee.Emitter,this._onDidExtraLibsChange=new gee.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(t),this.setDiagnosticsOptions(n),this.setWorkerOptions(i),this.setInlayHintsOptions(r),this.setModeConfiguration(o),this._onDidExtraLibsChangeTimeout=-1}return h(e,[{key:"onDidChange",get:function(){return this._onDidChange.event}},{key:"onDidExtraLibsChange",get:function(){return this._onDidExtraLibsChange.event}},{key:"modeConfiguration",get:function(){return this._modeConfiguration}},{key:"workerOptions",get:function(){return this._workerOptions}},{key:"inlayHintsOptions",get:function(){return this._inlayHintsOptions}},{key:"getExtraLibs",value:function(){return this._extraLibs}},{key:"addExtraLib",value:function(e,t){var n,i=this;if(n=void 0===t?"ts:extralib-".concat(Math.random().toString(36).substring(2,15)):t,this._extraLibs[n]&&this._extraLibs[n].content===e)return{dispose:function(){}};var r=1;return this._removedExtraLibs[n]&&(r=this._removedExtraLibs[n]+1),this._extraLibs[n]&&(r=this._extraLibs[n].version+1),this._extraLibs[n]={content:e,version:r},this._fireOnDidExtraLibsChangeSoon(),{dispose:function(){var e=i._extraLibs[n];e&&e.version===r&&(delete i._extraLibs[n],i._removedExtraLibs[n]=r,i._fireOnDidExtraLibsChangeSoon())}}}},{key:"setExtraLibs",value:function(e){for(var t in this._extraLibs)this._removedExtraLibs[t]=this._extraLibs[t].version;if(this._extraLibs=Object.create(null),e&&e.length>0){var n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=s.filePath||"ts:extralib-".concat(Math.random().toString(36).substring(2,15)),u=s.content,c=1;this._removedExtraLibs[l]&&(c=this._removedExtraLibs[l]+1),this._extraLibs[l]={content:u,version:c}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}this._fireOnDidExtraLibsChangeSoon()}},{key:"_fireOnDidExtraLibsChangeSoon",value:function(){var e=this;-1===this._onDidExtraLibsChangeTimeout&&(this._onDidExtraLibsChangeTimeout=window.setTimeout((function(){e._onDidExtraLibsChangeTimeout=-1,e._onDidExtraLibsChange.fire(void 0)}),0))}},{key:"getCompilerOptions",value:function(){return this._compilerOptions}},{key:"setCompilerOptions",value:function(e){this._compilerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}},{key:"getDiagnosticsOptions",value:function(){return this._diagnosticsOptions}},{key:"setDiagnosticsOptions",value:function(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}},{key:"setWorkerOptions",value:function(e){this._workerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}},{key:"setInlayHintsOptions",value:function(e){this._inlayHintsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}},{key:"setMaximumWorkerIdleTime",value:function(e){}},{key:"setEagerModelSync",value:function(e){this._eagerModelSync=e}},{key:"getEagerModelSync",value:function(){return this._eagerModelSync}},{key:"setModeConfiguration",value:function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(void 0)}}]),e}(),kee={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},wee=e("r",new bee({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},kee)),Cee=new bee({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},kee);function See(){return q((function(){return t.import("./tsMode-legacy-3MO0beDL.js")}),void 0)}gee.languages.typescript={ModuleKind:vee,JsxEmit:pee,NewLineKind:mee,ScriptTarget:yee,ModuleResolutionKind:_ee,typescriptVersion:"5.4.5",typescriptDefaults:wee,javascriptDefaults:Cee,getTypeScriptWorker:function(){return See().then((function(e){return e.getTypeScriptWorker()}))},getJavaScriptWorker:function(){return See().then((function(e){return e.getJavaScriptWorker()}))}},gee.languages.onLanguage("typescript",(function(){return See().then((function(e){return e.setupTypeScript(wee)}))})),gee.languages.onLanguage("javascript",(function(){return See().then((function(e){return e.setupJavaScript(Cee)}))}));var xee=function(e){function t(){return u(this,t),l(this,t,[{id:"diffEditor.toggleCollapseUnchangedRegions",title:Ja("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),icon:bd.map,toggled:Sy.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:Sy.has("isInDiffEditor"),menu:{when:Sy.has("isInDiffEditor"),id:d_.EditorTitle,order:22,group:"navigation"}}])}return p(t,e),h(t,[{key:"run",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=e.get(qb),o=!r.getValue("diffEditor.hideUnchangedRegions.enabled");r.updateValue("diffEditor.hideUnchangedRegions.enabled",o)}}]),t}(m_),Lee=function(e){function t(){return u(this,t),l(this,t,[{id:"diffEditor.toggleShowMovedCodeBlocks",title:Ja("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),precondition:Sy.has("isInDiffEditor")}])}return p(t,e),h(t,[{key:"run",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=e.get(qb),o=!r.getValue("diffEditor.experimental.showMoves");r.updateValue("diffEditor.experimental.showMoves",o)}}]),t}(m_),Dee=function(e){function t(){return u(this,t),l(this,t,[{id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:Ja("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),precondition:Sy.has("isInDiffEditor")}])}return p(t,e),h(t,[{key:"run",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=e.get(qb),o=!r.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");r.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",o)}}]),t}(m_),Nee=Ja("diffEditor","Diff Editor"),Iee=function(e){function t(){return u(this,t),l(this,t,[{id:"diffEditor.switchSide",title:Ja("switchSide","Switch Side"),icon:bd.arrowSwap,precondition:Sy.has("isInDiffEditor"),f1:!0,category:Nee}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t,n){var i=Fee(e);if(i instanceof I6){if(n&&n.dryRun)return{destinationSelection:i.mapToOtherSide().destinationSelection};i.switchSide()}}}]),t}(R_),Eee=function(e){function t(){return u(this,t),l(this,t,[{id:"diffEditor.exitCompareMove",title:Ja("exitCompareMove","Exit Compare Move"),icon:bd.close,precondition:p0.comparingMovedCode,f1:!1,category:Nee,keybinding:{weight:1e4,primary:9}}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var o=Fee(e);o instanceof I6&&o.exitCompareMove()}}]),t}(R_),Mee=function(e){function t(){return u(this,t),l(this,t,[{id:"diffEditor.collapseAllUnchangedRegions",title:Ja("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),icon:bd.fold,precondition:Sy.has("isInDiffEditor"),f1:!0,category:Nee}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var o=Fee(e);o instanceof I6&&o.collapseAllUnchangedRegions()}}]),t}(R_),Tee=function(e){function t(){return u(this,t),l(this,t,[{id:"diffEditor.showAllUnchangedRegions",title:Ja("showAllUnchangedRegions","Show All Unchanged Regions"),icon:bd.unfold,precondition:Sy.has("isInDiffEditor"),f1:!0,category:Nee}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var o=Fee(e);o instanceof I6&&o.showAllUnchangedRegions()}}]),t}(R_),Ree=function(e){function t(){return u(this,t),l(this,t,[{id:"diffEditor.revert",title:Ja("revert","Revert"),f1:!1,category:Nee}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n,i=function(e,t,n){var i=e.get(Ym),r=i.listDiffEditors();return r.find((function(e){var i,r,o=e.getModifiedEditor(),a=e.getOriginalEditor();return o&&(null===(i=o.getModel())||void 0===i?void 0:i.uri.toString())===n.toString()&&a&&(null===(r=a.getModel())||void 0===r?void 0:r.uri.toString())===t.toString()}))||null}(e,t.originalUri,t.modifiedUri);i instanceof I6&&i.revertRangeMappings(null!==(n=t.mapping.innerChanges)&&void 0!==n?n:[])}}]),t}(m_),Aee=Ja("accessibleDiffViewer","Accessible Diff Viewer"),Pee=function(e){function t(){return u(this,t),l(this,t,[{id:t.id,title:Ja("editor.action.accessibleDiffViewer.next","Go to Next Difference"),category:Aee,precondition:Sy.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0}])}return p(t,e),h(t,[{key:"run",value:function(e){var t=Fee(e);null==t||t.accessibleDiffViewerNext()}}]),t}(m_);Pee.id="editor.action.accessibleDiffViewer.next";var Oee=function(e){function t(){return u(this,t),l(this,t,[{id:t.id,title:Ja("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),category:Aee,precondition:Sy.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0}])}return p(t,e),h(t,[{key:"run",value:function(e){var t=Fee(e);null==t||t.accessibleDiffViewerPrev()}}]),t}(m_);function Fee(e){var t=e.get(Ym).listDiffEditors(),n=Op();if(n){var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(Wee(l.getContainerDomNode(),n))return l}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}return null}function Wee(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentElement}return!1}Oee.id="editor.action.accessibleDiffViewer.prev",y_(xee),y_(Lee),y_(Dee),g_.appendMenuItem(d_.EditorTitle,{command:{id:(new Dee).desc.id,title:Xa("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:Sy.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:Sy.has("isInDiffEditor")},order:11,group:"1_diff",when:Sy.and(p0.diffEditorRenderSideBySideInlineBreakpointReached,Sy.has("isInDiffEditor"))}),g_.appendMenuItem(d_.EditorTitle,{command:{id:(new Lee).desc.id,title:Xa("showMoves","Show Moved Code Blocks"),icon:bd.move,toggled:Iy.create("config.diffEditor.experimental.showMoves",!0),precondition:Sy.has("isInDiffEditor")},order:10,group:"1_diff",when:Sy.has("isInDiffEditor")}),y_(Ree);for(var Bee=0,Hee=[{icon:bd.arrowRight,key:p0.diffEditorInlineMode.toNegated()},{icon:bd.discard,key:p0.diffEditorInlineMode}];Bee<Hee.length;Bee++){var Vee=Hee[Bee];g_.appendMenuItem(d_.DiffEditorHunkToolbar,{command:{id:(new Ree).desc.id,title:Xa("revertHunk","Revert Block"),icon:Vee.icon},when:Sy.and(p0.diffEditorModifiedWritable,Vee.key),order:5,group:"primary"}),g_.appendMenuItem(d_.DiffEditorSelectionToolbar,{command:{id:(new Ree).desc.id,title:Xa("revertSelection","Revert Selection"),icon:Vee.icon},when:Sy.and(p0.diffEditorModifiedWritable,Vee.key),order:5,group:"primary"})}y_(Iee),y_(Eee),y_(Mee),y_(Tee),g_.appendMenuItem(d_.EditorTitle,{command:{id:Pee.id,title:Xa("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:Sy.has("isInDiffEditor")},order:10,group:"2_diff",when:Sy.and(p0.accessibleDiffViewerVisible.negate(),Sy.has("isInDiffEditor"))}),sy.registerCommandAlias("editor.action.diffReview.next",Pee.id),y_(Pee),sy.registerCommandAlias("editor.action.diffReview.prev",Oee.id),y_(Oee);var zee,Uee=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},jee=function(e,t){return function(n,i){t(n,i,e)}},Kee=new jy("selectionAnchorSet",!1),qee=(Dt=function(){function e(t,n){var i=this;u(this,e),this.editor=t,this.selectionAnchorSetContextKey=Kee.bindTo(n),this.modelChangeListener=t.onDidChangeModel((function(){return i.selectionAnchorSetContextKey.reset()}))}return h(e,[{key:"setSelectionAnchor",value:function(){var e=this;if(this.editor.hasModel()){var t=this.editor.getPosition();this.editor.changeDecorations((function(n){e.decorationId&&n.removeDecoration(e.decorationId),e.decorationId=n.addDecoration(fd.fromPositions(t,t),{description:"selection-anchor",stickiness:1,hoverMessage:(new oT).appendText(Xa("selectionAnchor","Selection Anchor")),className:"selection-anchor"})})),this.selectionAnchorSetContextKey.set(!!this.decorationId),_R(Xa("anchorSet","Anchor set at {0}:{1}",t.lineNumber,t.column))}}},{key:"goToSelectionAnchor",value:function(){if(this.editor.hasModel()&&this.decorationId){var e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}},{key:"selectFromAnchorToCursor",value:function(){if(this.editor.hasModel()&&this.decorationId){var e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){var t=this.editor.getPosition();this.editor.setSelection(fd.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}},{key:"cancelSelectionAnchor",value:function(){var e=this;if(this.decorationId){var t=this.decorationId;this.editor.changeDecorations((function(n){n.removeDecoration(t),e.decorationId=void 0})),this.selectionAnchorSetContextKey.set(!1)}}},{key:"dispose",value:function(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}}],[{key:"get",value:function(e){return e.getContribution(zee.ID)}}]),e}(),zee=Dt,Dt.ID="editor.contrib.selectionAnchorController",Dt);qee=zee=Uee([jee(1,Ky)],qee);var Gee=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.setSelectionAnchor",label:Xa("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2080),weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e;return E(this,(function(n){return null===(e=qee.get(t))||void 0===e||e.setSelectionAnchor(),[2]}))}))()}}]),t}(M_),Zee=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.goToSelectionAnchor",label:Xa("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:Kee}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e;return E(this,(function(n){return null===(e=qee.get(t))||void 0===e||e.goToSelectionAnchor(),[2]}))}))()}}]),t}(M_),Yee=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.selectFromAnchorToCursor",label:Xa("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:Kee,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2089),weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e;return E(this,(function(n){return null===(e=qee.get(t))||void 0===e||e.selectFromAnchorToCursor(),[2]}))}))()}}]),t}(M_),Qee=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.cancelSelectionAnchor",label:Xa("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:Kee,kbOpts:{kbExpr:p0.editorTextFocus,primary:9,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e;return E(this,(function(n){return null===(e=qee.get(t))||void 0===e||e.cancelSelectionAnchor(),[2]}))}))()}}]),t}(M_);B_(qee.ID,qee,4),O_(Gee),O_(Zee),O_(Yee),O_(Qee);var Xee=TL("editorOverviewRuler.bracketMatchForeground","#A0A0A0",Xa("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets.")),$ee=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.jumpToBracket",label:Xa("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:p0.editorTextFocus,primary:3165,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n;null===(n=nte.get(t))||void 0===n||n.jumpToBracket()}}]),t}(M_),Jee=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.selectToBracket",label:Xa("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:Ja("smartSelect.selectToBracketDescription","Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i,r=!0;n&&!1===n.selectBrackets&&(r=!1),null===(i=nte.get(t))||void 0===i||i.selectToBracket(r)}}]),t}(M_),ete=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.removeBrackets",label:Xa("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:p0.editorTextFocus,primary:2561,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n;null===(n=nte.get(t))||void 0===n||n.removeBrackets(this.id)}}]),t}(M_),tte=function e(t,n,i){u(this,e),this.position=t,this.brackets=n,this.options=i},nte=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._editor=e,n._lastBracketsData=[],n._lastVersionId=0,n._decorations=n._editor.createDecorationsCollection(),n._updateBracketsSoon=n._register(new Sg((function(){return n._updateBrackets()}),50)),n._matchBrackets=n._editor.getOption(72),n._updateBracketsSoon.schedule(),n._register(e.onDidChangeCursorPosition((function(e){"never"!==n._matchBrackets&&n._updateBracketsSoon.schedule()}))),n._register(e.onDidChangeModelContent((function(e){n._updateBracketsSoon.schedule()}))),n._register(e.onDidChangeModel((function(e){n._lastBracketsData=[],n._updateBracketsSoon.schedule()}))),n._register(e.onDidChangeModelLanguageConfiguration((function(e){n._lastBracketsData=[],n._updateBracketsSoon.schedule()}))),n._register(e.onDidChangeConfiguration((function(e){e.hasChanged(72)&&(n._matchBrackets=n._editor.getOption(72),n._decorations.clear(),n._lastBracketsData=[],n._lastVersionId=0,n._updateBracketsSoon.schedule())}))),n._register(e.onDidBlurEditorWidget((function(){n._updateBracketsSoon.schedule()}))),n._register(e.onDidFocusEditorWidget((function(){n._updateBracketsSoon.schedule()}))),n}return p(t,e),h(t,[{key:"jumpToBracket",value:function(){if(this._editor.hasModel()){var e=this._editor.getModel(),t=this._editor.getSelections().map((function(t){var n=t.getStartPosition(),i=e.bracketPairs.matchBracket(n),r=null;if(i)i[0].containsPosition(n)&&!i[1].containsPosition(n)?r=i[1].getStartPosition():i[1].containsPosition(n)&&(r=i[0].getStartPosition());else{var o=e.bracketPairs.findEnclosingBrackets(n);if(o)r=o[1].getStartPosition();else{var a=e.bracketPairs.findNextBracket(n);a&&a.range&&(r=a.range.getStartPosition())}}return r?new fd(r.lineNumber,r.column,r.lineNumber,r.column):new fd(n.lineNumber,n.column,n.lineNumber,n.column)}));this._editor.setSelections(t),this._editor.revealRange(t[0])}}},{key:"selectToBracket",value:function(e){if(this._editor.hasModel()){var t=this._editor.getModel(),n=[];this._editor.getSelections().forEach((function(i){var r=i.getStartPosition(),o=t.bracketPairs.matchBracket(r);if(!o&&!(o=t.bracketPairs.findEnclosingBrackets(r))){var a=t.bracketPairs.findNextBracket(r);a&&a.range&&(o=t.bracketPairs.matchBracket(a.range.getStartPosition()))}var s=null,l=null;if(o){o.sort(hd.compareRangesUsingStarts);var u=C(o,2),c=u[0],d=u[1];if(s=e?c.getStartPosition():c.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(r)){var h=s;s=l,l=h}}s&&l&&n.push(new fd(s.lineNumber,s.column,l.lineNumber,l.column))})),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}}},{key:"removeBrackets",value:function(e){var t=this;if(this._editor.hasModel()){var n=this._editor.getModel();this._editor.getSelections().forEach((function(i){var r=i.getPosition(),o=n.bracketPairs.matchBracket(r);o||(o=n.bracketPairs.findEnclosingBrackets(r)),o&&(t._editor.pushUndoStop(),t._editor.executeEdits(e,[{range:o[0],text:""},{range:o[1],text:""}]),t._editor.pushUndoStop())}))}}},{key:"_updateBrackets",value:function(){if("never"!==this._matchBrackets){this._recomputeBrackets();var e=[],t=0,n=!0,i=!1,r=void 0;try{for(var o,a=this._lastBracketsData[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=s.brackets;l&&(e[t++]={range:l[0],options:s.options},e[t++]={range:l[1],options:s.options})}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this._decorations.set(e)}}},{key:"_recomputeBrackets",value:function(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return this._lastBracketsData=[],void(this._lastVersionId=0);var e=this._editor.getSelections();if(e.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);var n=this._editor.getModel(),i=n.getVersionId(),r=[];this._lastVersionId===i&&(r=this._lastBracketsData);for(var o=[],a=0,s=0,l=e.length;s<l;s++){var u=e[s];u.isEmpty()&&(o[a++]=u.getStartPosition())}o.length>1&&o.sort(dd.compare);for(var c=[],d=0,h=0,f=r.length,g=0,v=o.length;g<v;g++){for(var p=o[g];h<f&&r[h].position.isBefore(p);)h++;if(h<f&&r[h].position.equals(p))c[d++]=r[h];else{var m=n.bracketPairs.matchBracket(p,20),y=t._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;m||"always"!==this._matchBrackets||(m=n.bracketPairs.findEnclosingBrackets(p,20),y=t._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),c[d++]=new tte(p,m,y)}}this._lastBracketsData=c,this._lastVersionId=i}}],[{key:"get",value:function(e){return e.getContribution(t.ID)}}]),t}(Ru);nte.ID="editor.contrib.bracketMatchingController",nte._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=cU.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:OS(Xee),position:dw.Center}}),nte._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=cU.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),B_(nte.ID,nte,1),O_(Jee),O_($ee),O_(ete),g_.appendMenuItem(d_.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:Xa({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});var ite=function(){function e(t,n){u(this,e),this._selection=t,this._isMovingLeft=n}return h(e,[{key:"getEditOperations",value:function(e,t){if(this._selection.startLineNumber===this._selection.endLineNumber&&!this._selection.isEmpty()){var n=this._selection.startLineNumber,i=this._selection.startColumn,r=this._selection.endColumn;if((!this._isMovingLeft||1!==i)&&(this._isMovingLeft||r!==e.getLineMaxColumn(n)))if(this._isMovingLeft){var o=new hd(n,i-1,n,i),a=e.getValueInRange(o);t.addEditOperation(o,null),t.addEditOperation(new hd(n,r,n,r),a)}else{var s=new hd(n,r,n,r+1),l=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new hd(n,i,n,i),l)}}}},{key:"computeCursorState",value:function(e,t){return this._isMovingLeft?new fd(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new fd(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}]),e}(),rte=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[n])).left=e,i}return p(t,e),h(t,[{key:"run",value:function(e,t){if(t.hasModel()){var n=[],i=t.getSelections(),r=!0,o=!1,a=void 0;try{for(var s,l=i[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;n.push(new ite(u,this.left))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}}]),t}(M_),ote=function(e){function t(){return u(this,t),l(this,t,[!0,{id:"editor.action.moveCarretLeftAction",label:Xa("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:p0.writable}])}return p(t,e),t}(rte),ate=function(e){function t(){return u(this,t),l(this,t,[!1,{id:"editor.action.moveCarretRightAction",label:Xa("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:p0.writable}])}return p(t,e),t}(rte);O_(ote),O_(ate);var ste=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.transposeLetters",label:Xa("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:p0.writable,kbOpts:{kbExpr:p0.textInputFocus,primary:0,mac:{primary:306},weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){if(t.hasModel()){var n=t.getModel(),i=[],r=t.getSelections(),o=!0,a=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;if(c.isEmpty()){var d=c.startLineNumber,h=c.startColumn,f=n.getLineMaxColumn(d);if(1!==d||1!==h&&(2!==h||2!==f)){var g=h===f?c.getPosition():CJ.rightPosition(n,c.getPosition().lineNumber,c.getPosition().column),v=CJ.leftPosition(n,g),p=CJ.leftPosition(n,v),m=n.getValueInRange(hd.fromPositions(p,v)),y=n.getValueInRange(hd.fromPositions(v,g)),_=hd.fromPositions(p,g);i.push(new mJ(_,y+m))}}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}}}]),t}(M_);O_(ste);var lte=function(){if("object"===("undefined"==typeof crypto?"undefined":L(crypto))&&"function"==typeof crypto.randomUUID)return crypto.randomUUID.bind(crypto);var e;e="object"===("undefined"==typeof crypto?"undefined":L(crypto))&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){for(var t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random());return e};for(var t=new Uint8Array(16),n=[],i=0;i<256;i++)n.push(i.toString(16).padStart(2,"0"));return function(){e(t),t[6]=15&t[6]|64,t[8]=63&t[8]|128;var i=0,r="";return r+=n[t[i++]],r+=n[t[i++]],r+=n[t[i++]],r+=n[t[i++]],r+="-",r+=n[t[i++]],r+=n[t[i++]],r+="-",r+=n[t[i++]],r+=n[t[i++]],r+="-",r+=n[t[i++]],r+=n[t[i++]],r+="-",r+=n[t[i++]],r+=n[t[i++]],r+=n[t[i++]],r+=n[t[i++]],r+=n[t[i++]],r+=n[t[i++]]}}();function ute(e){return{asString:s((function(){return E(this,(function(t){return[2,e]}))})),asFile:function(){},value:"string"==typeof e?e:void 0}}var cte=function(){function e(){u(this,e),this._entries=new Map}return h(e,[{key:"size",get:function(){var e=0,t=!0,n=!1,i=void 0;try{for(var r,o=this._entries[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value;e++}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}},{key:"has",value:function(e){return this._entries.has(this.toKey(e))}},{key:"matches",value:function(e){var t=x(this._entries.keys());return Ts.some(this,(function(e){var t=C(e,2);t[0];return t[1].asFile()}))&&t.push("files"),fte(dte(e),t)}},{key:"get",value:function(e){var t;return null===(t=this._entries.get(this.toKey(e)))||void 0===t?void 0:t[0]}},{key:"append",value:function(e,t){var n=this._entries.get(e);n?n.push(t):this._entries.set(this.toKey(e),[t])}},{key:"replace",value:function(e,t){this._entries.set(this.toKey(e),[t])}},{key:"delete",value:function(e){this._entries.delete(this.toKey(e))}},{key:Symbol.iterator,value:function(){var e,t,n,i,r,o,a,s,l,u,c,d,h,f,g;return E(this,(function(v){switch(v.label){case 0:e=!0,t=!1,n=void 0,v.label=1;case 1:v.trys.push([1,12,13,14]),i=this._entries[Symbol.iterator](),v.label=2;case 2:if(e=(r=i.next()).done)return[3,11];o=C(r.value,2),a=o[0],s=o[1],l=!0,u=!1,c=void 0,v.label=3;case 3:v.trys.push([3,8,9,10]),d=s[Symbol.iterator](),v.label=4;case 4:return(l=(h=d.next()).done)?[3,7]:(f=h.value,[4,[a,f]]);case 5:v.sent(),v.label=6;case 6:return l=!0,[3,4];case 7:return[3,10];case 8:return g=v.sent(),u=!0,c=g,[3,10];case 9:try{l||null==d.return||d.return()}finally{if(u)throw c}return[7];case 10:return e=!0,[3,2];case 11:return[3,14];case 12:return g=v.sent(),t=!0,n=g,[3,14];case 13:try{e||null==i.return||i.return()}finally{if(t)throw n}return[7];case 14:return[2]}}))}},{key:"toKey",value:function(e){return dte(e)}}]),e}();function dte(e){return e.toLowerCase()}function hte(e,t){return fte(dte(e),t.map(dte))}function fte(e,t){if("*/*"===e)return t.length>0;if(t.includes(e))return!0;var n=e.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!n)return!1;var i=C(n,3),r=(i[0],i[1]);return"*"===i[2]&&t.some((function(e){return e.startsWith(r+"/")}))}var gte=Object.freeze({create:function(e){return ca(e.map((function(e){return e.toString()}))).join("\r\n")},split:function(e){return e.split("\r\n")},parse:function(e){return gte.split(e).filter((function(e){return!e.startsWith("#")}))}}),vte=function(){function e(t){u(this,e),this.value=t}return h(e,[{key:"equals",value:function(e){return this.value===e.value}},{key:"contains",value:function(t){return this.equals(t)||""===this.value||t.value.startsWith(this.value+e.sep)}},{key:"intersects",value:function(e){return this.contains(e)||e.contains(this)}},{key:"append",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return new e((this.value?[this.value].concat(x(n)):n).join(e.sep))}}]),e}();vte.sep=".",vte.None=new vte("@@none@@"),vte.Empty=new vte("");var pte="CodeEditors",mte="CodeFiles";i_.add("workbench.contributions.dragAndDrop",new function e(){u(this,e)});var yte=function(){function e(){u(this,e)}return h(e,[{key:"hasData",value:function(e){return e&&e===this.proto}},{key:"getData",value:function(e){if(this.hasData(e))return this.data}}],[{key:"getInstance",value:function(){return e.INSTANCE}}]),e}();function _te(e){var t=new cte,n=!0,i=!1,r=void 0;try{for(var o,a=function(){var e=o.value,n=e.type;if("string"===e.kind){var i=new Promise((function(t){return e.getAsString(t)}));t.append(n,ute(i))}else if("file"===e.kind){var r=e.getAsFile();r&&t.append(n,bte(r))}},s=e.items[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)a()}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return t}function bte(e){var t=e.path?ed.parse(e.path):void 0;return function(e,t,n){var i={id:lte(),name:e,uri:t,data:n};return{asString:s((function(){return E(this,(function(e){return[2,""]}))})),asFile:function(){return i},value:void 0}}(e.name,t,s((function(){var t;return E(this,(function(n){switch(n.label){case 0:return t=Uint8Array.bind,[4,e.arrayBuffer()];case 1:return[2,new(t.apply(Uint8Array,[void 0,n.sent()]))]}}))})))}yte.INSTANCE=new yte;var kte=Object.freeze([pte,mte,kO.RESOURCES,kO.INTERNAL_URI_LIST]);function wte(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=_te(e),i=n.get(kO.INTERNAL_URI_LIST);if(i)n.replace(rk.uriList,i);else if(t||!n.has(rk.uriList)){var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=e.items[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value.getAsFile();if(c){var d=c.path;try{d?r.push(ed.file(d).toString()):r.push(ed.parse(c.name,!0).toString())}catch(e){}}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}r.length&&n.replace(rk.uriList,ute(gte.create(r)))}var h=!0,f=!1,g=void 0;try{for(var v,p=kte[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var m=v.value;n.delete(m)}}catch(e){f=!0,g=e}finally{try{h||null==p.return||p.return()}finally{if(f)throw g}}return n}var Cte=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ste=function(e,t){return function(n,i){t(n,i,e)}},xte=function(){function e(){u(this,e)}return h(e,[{key:"provideDocumentPasteEdits",value:function(e,t,n,i,r){var o=this;return s((function(){var e;return E(this,(function(t){switch(t.label){case 0:return[4,o.getEdit(n,r)];case 1:return(e=t.sent())?[2,{edits:[{insertText:e.insertText,title:e.title,kind:e.kind,handledMimeType:e.handledMimeType,yieldTo:e.yieldTo}],dispose:function(){}}]:[2,void 0]}}))}))()}},{key:"provideDocumentDropEdits",value:function(e,t,n,i){var r=this;return s((function(){var e;return E(this,(function(t){switch(t.label){case 0:return[4,r.getEdit(n,i)];case 1:return(e=t.sent())?[2,{edits:[{insertText:e.insertText,title:e.title,kind:e.kind,handledMimeType:e.handledMimeType,yieldTo:e.yieldTo}],dispose:function(){}}]:[2]}}))}))()}}]),e}(),Lte=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments)).kind=t.kind,e.dropMimeTypes=[rk.text],e.pasteMimeTypes=[rk.text],e}return p(t,e),h(t,[{key:"getEdit",value:function(e,t){var n=this;return s((function(){var t,i;return E(this,(function(r){switch(r.label){case 0:return(t=e.get(rk.text))?e.has(rk.uriList)?[2]:[4,t.asString()]:[2];case 1:return i=r.sent(),[2,{handledMimeType:rk.text,title:Xa("text.label","Insert Plain Text"),insertText:i,kind:n.kind}]}}))}))()}}]),t}(xte);Lte.id="text",Lte.kind=new vte("text.plain");var Dte=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments)).kind=new vte("uri.absolute"),e.dropMimeTypes=[rk.uriList],e.pasteMimeTypes=[rk.uriList],e}return p(t,e),h(t,[{key:"getEdit",value:function(e,t){var n=this;return s((function(){var i,r,o,a;return E(this,(function(s){switch(s.label){case 0:return[4,Ete(e)];case 1:return!(i=s.sent()).length||t.isCancellationRequested?[2]:(r=0,o=i.map((function(e){var t=e.uri,n=e.originalText;return t.scheme===Pv.file?t.fsPath:(r++,n)})).join(" "),a=r>0?i.length>1?Xa("defaultDropProvider.uriList.uris","Insert Uris"):Xa("defaultDropProvider.uriList.uri","Insert Uri"):i.length>1?Xa("defaultDropProvider.uriList.paths","Insert Paths"):Xa("defaultDropProvider.uriList.path","Insert Path"),[2,{handledMimeType:rk.uriList,insertText:o,title:a,kind:n.kind}])}}))}))()}}]),t}(xte),Nte=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._workspaceContextService=e,n.kind=new vte("uri.relative"),n.dropMimeTypes=[rk.uriList],n.pasteMimeTypes=[rk.uriList],n}return p(t,e),h(t,[{key:"getEdit",value:function(e,t){var n=this;return s((function(){var i,r;return E(this,(function(o){switch(o.label){case 0:return[4,Ete(e)];case 1:return!(i=o.sent()).length||t.isCancellationRequested?[2]:(r=aa(i.map((function(e){var t=e.uri,i=n._workspaceContextService.getWorkspaceFolder(t);return i?eT(i.uri,t):void 0}))),r.length?[2,{handledMimeType:rk.uriList,insertText:r.join(" "),title:i.length>1?Xa("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):Xa("defaultDropProvider.uriList.relativePath","Insert Relative Path"),kind:n.kind}]:[2])}}))}))()}}]),t}(xte);Nte=Cte([Ste(0,KA)],Nte);var Ite=function(){function e(){u(this,e),this.kind=new vte("html"),this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:rk.text}]}return h(e,[{key:"provideDocumentPasteEdits",value:function(e,t,n,i,r){var o=this;return s((function(){var e,t,a;return E(this,(function(s){switch(s.label){case 0:return i.triggerKind===Ld.PasteAs||(null===(e=i.only)||void 0===e?void 0:e.contains(o.kind))?[4,null==(t=n.get("text/html"))?void 0:t.asString()]:[2];case 1:return!(a=s.sent())||r.isCancellationRequested?[2]:[2,{dispose:function(){},edits:[{insertText:a,yieldTo:o._yieldTo,title:Xa("pasteHtmlLabel","Insert HTML"),kind:o.kind}]}]}}))}))()}}]),e}();function Ete(e){return Mte.apply(this,arguments)}function Mte(){return Mte=s((function(e){var t,n,i,r,o,a,s,l,u;return E(this,(function(c){switch(c.label){case 0:return(t=e.get(rk.uriList))?[4,t.asString()]:[2,[]];case 1:n=c.sent(),i=[],r=!0,o=!1,a=void 0;try{for(s=gte.parse(n)[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){u=l.value;try{i.push({uri:ed.parse(u),originalText:u})}catch(e){}}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return[2,i]}}))})),Mte.apply(this,arguments)}var Tte=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._register(e.documentDropEditProvider.register("*",new Lte)),i._register(e.documentDropEditProvider.register("*",new Dte)),i._register(e.documentDropEditProvider.register("*",new Nte(n))),i}return p(t,e),t}(Ru);Tte=Cte([Ste(0,wS),Ste(1,KA)],Tte);var Rte=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._register(e.documentPasteEditProvider.register("*",new Lte)),i._register(e.documentPasteEditProvider.register("*",new Dte)),i._register(e.documentPasteEditProvider.register("*",new Nte(n))),i._register(e.documentPasteEditProvider.register("*",new Ite)),i}return p(t,e),t}(Ru);Rte=Cte([Ste(0,wS),Ste(1,KA)],Rte);var Ate,Pte=function(){function e(){u(this,e),this.value="",this.pos=0}return h(e,[{key:"text",value:function(e){this.value=e,this.pos=0}},{key:"tokenText",value:function(e){return this.value.substr(e.pos,e.len)}},{key:"next",value:function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,i=0,r=this.value.charCodeAt(n);if("number"==typeof(t=e._table[r]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(r)){t=8;do{i+=1,r=this.value.charCodeAt(n+i)}while(e.isDigitCharacter(r));return this.pos+=i,{type:t,pos:n,len:i}}if(e.isVariableCharacter(r)){t=9;do{r=this.value.charCodeAt(n+ ++i)}while(e.isVariableCharacter(r)||e.isDigitCharacter(r));return this.pos+=i,{type:t,pos:n,len:i}}t=10;do{i+=1,r=this.value.charCodeAt(n+i)}while(!isNaN(r)&&void 0===e._table[r]&&!e.isDigitCharacter(r)&&!e.isVariableCharacter(r));return this.pos+=i,{type:t,pos:n,len:i}}}],[{key:"isDigitCharacter",value:function(e){return e>=48&&e<=57}},{key:"isVariableCharacter",value:function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90}}]),e}();Pte._table=(f(Ate={},36,0),f(Ate,58,1),f(Ate,44,2),f(Ate,123,3),f(Ate,125,4),f(Ate,92,5),f(Ate,47,6),f(Ate,124,7),f(Ate,43,11),f(Ate,45,12),f(Ate,63,13),Ate);var Ote=function(){function e(){u(this,e),this._children=[]}return h(e,[{key:"appendChild",value:function(e){return e instanceof Fte&&this._children[this._children.length-1]instanceof Fte?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}},{key:"replace",value:function(e,t){var n,i=e.parent,r=i.children.indexOf(e),o=i.children.slice(0);(n=o).splice.apply(n,[r,1].concat(x(t))),i._children=o,function e(t,n){var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l.parent=n,e(l.children,l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}(t,i)}},{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(e instanceof Kte)return e;e=e.parent}}},{key:"toString",value:function(){return this.children.reduce((function(e,t){return e+t.toString()}),"")}},{key:"len",value:function(){return 0}}]),e}(),Fte=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).value=e,n}return p(t,e),h(t,[{key:"toString",value:function(){return this.value}},{key:"len",value:function(){return this.value.length}},{key:"clone",value:function(){return new t(this.value)}}]),t}(Ote),Wte=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),t}(Ote),Bte=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).index=e,n}return p(t,e),h(t,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&this._children[0]instanceof Hte?this._children[0]:void 0}},{key:"clone",value:function(){var e=new t(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e}}],[{key:"compareByIndex",value:function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}}]),t}(Wte),Hte=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments)).options=[],e}return p(t,e),h(t,[{key:"appendChild",value:function(e){return e instanceof Fte&&(e.parent=this,this.options.push(e)),this}},{key:"toString",value:function(){return this.options[0].value}},{key:"len",value:function(){return this.options[0].len()}},{key:"clone",value:function(){var e=new t;return this.options.forEach(e.appendChild,e),e}}]),t}(Ote),Vte=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments)).regexp=new RegExp(""),e}return p(t,e),h(t,[{key:"resolve",value:function(e){var t=this,n=!1,i=e.replace(this.regexp,(function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))}));return!n&&this._children.some((function(e){return e instanceof zte&&Boolean(e.elseValue)}))&&(i=this._replace([])),i}},{key:"_replace",value:function(e){var t="",n=!0,i=!1,r=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s instanceof zte){var l=e[s.index]||"";t+=l=s.resolve(l)}else t+=s.toString()}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}},{key:"toString",value:function(){return""}},{key:"clone",value:function(){var e=new t;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((function(e){return e.clone()})),e}}]),t}(Ote),zte=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t)).index=e,o.shorthandName=n,o.ifValue=i,o.elseValue=r,o}return p(t,e),h(t,[{key:"resolve",value:function(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"==typeof this.ifValue?this.ifValue:Boolean(e)||"string"!=typeof this.elseValue?e||"":this.elseValue}},{key:"_toPascalCase",value:function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e}},{key:"_toCamelCase",value:function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e}},{key:"clone",value:function(){var e=new t(this.index,this.shorthandName,this.ifValue,this.elseValue);return e}}]),t}(Ote),Ute=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).name=e,n}return p(t,e),h(t,[{key:"resolve",value:function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new Fte(t)],!0)}},{key:"clone",value:function(){var e=new t(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e}}]),t}(Wte);function jte(e,t){for(var n=x(e);n.length>0;){var i,r=n.shift();if(!t(r))break;(i=n).unshift.apply(i,x(r.children))}}var Kte=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk((function(n){return n instanceof Bte&&(t.push(n),e=!e||e.index<n.index?n:e),!0})),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){var e=this.placeholderInfo.all;return e}},{key:"offset",value:function(e){var t=0,n=!1;return this.walk((function(i){return i===e?(n=!0,!1):(t+=i.len(),!0)})),n?t:-1}},{key:"fullLen",value:function(e){var t=0;return jte([e],(function(e){return t+=e.len(),!0})),t}},{key:"enclosingPlaceholders",value:function(e){for(var t=[],n=e.parent;n;)n instanceof Bte&&t.push(n),n=n.parent;return t}},{key:"resolveVariables",value:function(e){var t=this;return this.walk((function(n){return n instanceof Ute&&n.resolve(e)&&(t._placeholders=void 0),!0})),this}},{key:"appendChild",value:function(e){return this._placeholders=void 0,g(v(t.prototype),"appendChild",this).call(this,e)}},{key:"replace",value:function(e,n){return this._placeholders=void 0,g(v(t.prototype),"replace",this).call(this,e,n)}},{key:"clone",value:function(){var e=new t;return this._children=this.children.map((function(e){return e.clone()})),e}},{key:"walk",value:function(e){jte(this.children,e)}}]),t}(Ote),qte=function(){function e(){u(this,e),this._scanner=new Pte,this._token={type:14,pos:0,len:0}}return h(e,[{key:"parse",value:function(e,t,n){var i=new Kte;return this.parseFragment(e,i),this.ensureFinalTabstop(i,null!=n&&n,null!=t&&t),i}},{key:"parseFragment",value:function(e,t){var n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););var i=new Map,r=[];t.walk((function(e){return e instanceof Bte&&(e.isFinalTabstop?i.set(0,void 0):!i.has(e.index)&&e.children.length>0?i.set(e.index,e.children):r.push(e)),!0}));var o=function(e,n){var r=i.get(e.index);if(r){var a=new Bte(e.index);a.transform=e.transform;var s=!0,l=!1,u=void 0;try{for(var c,d=r[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value.clone();a.appendChild(h),h instanceof Bte&&i.has(h.index)&&!n.has(h.index)&&(n.add(h.index),o(h,n),n.delete(h.index))}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}t.replace(e,[a])}},a=new Set,s=!0,l=!1,u=void 0;try{for(var c,d=r[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;o(h,a)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return t.children.slice(n)}},{key:"ensureFinalTabstop",value:function(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find((function(e){return 0===e.index}))||e.appendChild(new Bte(0)))}},{key:"_accept",value:function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1}},{key:"_backTo",value:function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}},{key:"_until",value:function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}},{key:"_parse",value:function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}},{key:"_parseEscaped",value:function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Fte(t)),!0)}},{key:"_parseTabstopOrVariableName",value:function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Bte(Number(t)):new Ute(t)),!0):this._backTo(n)}},{key:"_parseComplexPlaceholder",value:function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var i=new Bte(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(i),!0;if(!this._parse(i))return e.appendChild(new Fte("${"+t+":")),i.children.forEach(e.appendChild,e),!0}else{if(!(i.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(i)?(e.appendChild(i),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(i),!0):this._backTo(n);for(var r=new Hte;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(i.appendChild(r),this._accept(4)))return e.appendChild(i),!0}return this._backTo(n),!1}}}},{key:"_parseChoiceElement",value:function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var i=void 0;if(!(i=(i=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(i)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new Fte(n.join(""))),!0)}},{key:"_parseComplexVariable",value:function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var i=new Ute(t);if(!this._accept(1))return this._accept(6)?this._parseTransform(i)?(e.appendChild(i),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(i),!0):this._backTo(n);for(;;){if(this._accept(4))return e.appendChild(i),!0;if(!this._parse(i))return e.appendChild(new Fte("${"+t+":")),i.children.forEach(e.appendChild,e),!0}}},{key:"_parseTransform",value:function(e){for(var t=new Vte,n="",i="";!this._accept(6);){var r=void 0;if(r=this._accept(5,!0))n+=r=this._accept(6,!0)||r;else{if(14===this._token.type)return!1;n+=this._accept(void 0,!0)}}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0))o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new Fte(o));else if(!this._parseFormatString(t)&&!this._parseAnything(t))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;i+=this._accept(void 0,!0)}try{t.regexp=new RegExp(n,i)}catch(e){return!1}return e.transform=t,!0}},{key:"_parseFormatString",value:function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var i=this._accept(8,!0);if(!i)return this._backTo(t),!1;if(!n)return e.appendChild(new zte(Number(i))),!0;if(this._accept(4))return e.appendChild(new zte(Number(i))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var r=this._accept(9,!0);return r&&this._accept(4)?(e.appendChild(new zte(Number(i),r)),!0):(this._backTo(t),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new zte(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new zte(Number(i),void 0,void 0,a)),!0}else if(this._accept(13)){var s=this._until(1);if(s){var l=this._until(4);if(l)return e.appendChild(new zte(Number(i),void 0,s,l)),!0}}else{var u=this._until(4);if(u)return e.appendChild(new zte(Number(i),void 0,void 0,u)),!0}return this._backTo(t),!1}},{key:"_parseAnything",value:function(e){return 14!==this._token.type&&(e.appendChild(new Fte(this._scanner.tokenText(this._token))),this._accept(void 0),!0)}}],[{key:"escape",value:function(e){return e.replace(/\$|}|\\/g,"\\$&")}},{key:"guessNeedsClipboard",value:function(e){return/\${?CLIPBOARD/.test(e)}}]),e}();function Gte(e,t,n){var i,r,o,a;return("string"==typeof n.insertText?""===n.insertText:""===n.insertText.snippet)?{edits:null!==(o=null===(r=n.additionalEdit)||void 0===r?void 0:r.edits)&&void 0!==o?o:[]}:{edits:x(t.map((function(t){return new qR(e,{range:t,text:"string"==typeof n.insertText?qte.escape(n.insertText)+"$0":n.insertText.snippet,insertAsSnippet:!0})}))).concat(x(null!==(a=null===(i=n.additionalEdit)||void 0===i?void 0:i.edits)&&void 0!==a?a:[]))}}function Zte(e){function t(e,t){return"mimeType"in e?e.mimeType===t.handledMimeType:!!t.kind&&e.kind.contains(t.kind)}var n=new Map,i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l,u=a.value,c=!0,d=!1,h=void 0;try{for(var f,g=(null!==(l=u.yieldTo)&&void 0!==l?l:[])[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value,p=!0,m=!1,y=void 0;try{for(var _,b=e[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){var k=_.value;if(k!==u&&t(v,k)){var w=n.get(u);w||(w=[],n.set(u,w)),w.push(k)}}}catch(e){m=!0,y=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw y}}}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}if(!n.size)return Array.from(e);var C=new Set,S=[];return function e(t){if(!t.length)return[];var i=t[0];if(S.includes(i))return console.warn("Yield to cycle detected",i),t;if(C.has(i))return e(t.slice(1));var r=[],o=n.get(i);return o&&(S.push(i),r=e(o),S.pop()),C.add(i),x(r).concat([i],x(e(t.slice(1))))}(Array.from(e))}var Yte=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Qte=function(e,t){return function(n,i){t(n,i,e)}},Xte=cU.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:" ",inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}}),$te=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t)).typeId=e,a.editor=n,a.range=i,a.delegate=o,a.allowEditorOverflow=!1,a.suppressMouseDown=!0,a.create(r),a.editor.addContentWidget(a),a.editor.layoutContentWidget(a),a}return p(t,e),h(t,[{key:"create",value:function(e){var t,n=this;this.domNode=gm(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;var i=gm("span.icon");this.domNode.append(i),(t=i.classList).add.apply(t,x(ny.asClassNameArray(bd.loading)).concat(["codicon-modifier-spin"]));var r=function(){var e=n.editor.getOption(67);n.domNode.style.height="".concat(e,"px"),n.domNode.style.width="".concat(Math.ceil(.8*e),"px")};r(),this._register(this.editor.onDidChangeConfiguration((function(e){(e.hasChanged(52)||e.hasChanged(67))&&r()}))),this._register(cp(this.domNode,rm.CLICK,(function(e){n.delegate.cancel()})))}},{key:"getId",value:function(){return t.baseId+"."+this.typeId}},{key:"getDomNode",value:function(){return this.domNode}},{key:"getPosition",value:function(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this.editor.removeContentWidget(this)}}]),t}(Ru);$te.baseId="editor.widget.inlineProgressWidget";var Jte=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t)).id=e,r._editor=n,r._instantiationService=i,r._showDelay=500,r._showPromise=r._register(new Pu),r._currentWidget=r._register(new Pu),r._operationIdPool=0,r._currentDecorations=n.createDecorationsCollection(),r}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._currentDecorations.clear()}},{key:"showWhile",value:function(e,t,n,i,r){var o=this;return s((function(){var a;return E(this,(function(s){switch(s.label){case 0:a=o._operationIdPool++,o._currentOperation=a,o.clear(),o._showPromise.value=yg((function(){var n=hd.fromPositions(e);o._currentDecorations.set([{range:n,options:Xte}]).length>0&&(o._currentWidget.value=o._instantiationService.createInstance($te,o.id,o._editor,n,t,i))}),null!=r?r:o._showDelay),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,n];case 2:return[2,s.sent()];case 3:return o._currentOperation===a&&(o.clear(),o._currentOperation=void 0),[7];case 4:return[2]}}))}))()}},{key:"clear",value:function(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}}]),t}(Ru);Jte=Yte([Qte(2,Gm)],Jte);var ene,tne=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},nne=function(e,t){return function(n,i){t(n,i,e)}},ine=(Nt=function(){function e(t,n,i){u(this,e),this._openerService=i,this._messageWidget=new Pu,this._messageListeners=new Tu,this._mouseOverMessage=!1,this._editor=t,this._visible=ene.MESSAGE_VISIBLE.bindTo(n)}return h(e,[{key:"dispose",value:function(){var e;null===(e=this._message)||void 0===e||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}},{key:"showMessage",value:function(e,t){var n,i=this;_R(sT(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=sT(e)?wT(e,{actionHandler:{callback:function(t){i.closeMessage(),uR(i._openerService,t,sT(e)?e.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new rne(this._editor,t,"string"==typeof e?e:this._message.element),this._messageListeners.add(Au.debounce(this._editor.onDidBlurEditorText,(function(e,t){return t}),0)((function(){i._mouseOverMessage||i._messageWidget.value&&Mp(Op(),i._messageWidget.value.getDomNode())||i.closeMessage()}))),this._messageListeners.add(this._editor.onDidChangeCursorPosition((function(){return i.closeMessage()}))),this._messageListeners.add(this._editor.onDidDispose((function(){return i.closeMessage()}))),this._messageListeners.add(this._editor.onDidChangeModel((function(){return i.closeMessage()}))),this._messageListeners.add(cp(this._messageWidget.value.getDomNode(),rm.MOUSE_ENTER,(function(){return i._mouseOverMessage=!0}),!0)),this._messageListeners.add(cp(this._messageWidget.value.getDomNode(),rm.MOUSE_LEAVE,(function(){return i._mouseOverMessage=!1}),!0)),this._messageListeners.add(this._editor.onMouseMove((function(e){e.target.position&&(n?n.containsPosition(e.target.position)||i.closeMessage():n=new hd(t.lineNumber-3,1,e.target.position.lineNumber+3,1))})))}},{key:"closeMessage",value:function(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(rne.fadeOut(this._messageWidget.value))}}],[{key:"get",value:function(e){return e.getContribution(ene.ID)}}]),e}(),ene=Nt,Nt.ID="editor.contrib.messageController",Nt.MESSAGE_VISIBLE=new jy("messageVisible",!1,Xa("messageVisible","Whether the editor is currently showing an inline message")),Nt);ine=ene=tne([nne(1,Ky),nne(2,xE)],ine),P_(new(E_.bindToContribution(ine.get))({id:"leaveEditorMessage",precondition:ine.MESSAGE_VISIBLE,handler:function(e){return e.closeMessage()},kbOpts:{weight:130,primary:9}}));var rne=function(){function e(t,n,i){var r=n.lineNumber,o=n.column;u(this,e),this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=t,this._editor.revealLinesInCenterIfOutsideViewport(r,r,0),this._position={lineNumber:r,column:o},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";var a=document.createElement("div");a.classList.add("anchor","top"),this._domNode.appendChild(a);var s=document.createElement("div");"string"==typeof i?(s.classList.add("message"),s.textContent=i):(i.classList.add("message"),s.appendChild(i)),this._domNode.appendChild(s);var l=document.createElement("div");l.classList.add("anchor","below"),this._domNode.appendChild(l),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}return h(e,[{key:"dispose",value:function(){this._editor.removeContentWidget(this)}},{key:"getId",value:function(){return"messageoverlay"}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return{position:this._position,preference:[1,2],positionAffinity:1}}},{key:"afterRender",value:function(e){this._domNode.classList.toggle("below",2===e)}}],[{key:"fadeOut",value:function(e){var t=function(){e.dispose(),clearTimeout(n),e.getDomNode().removeEventListener("animationend",t)},n=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}}]),e}();function one(e,t){return t&&(e.stack||e.stacktrace)?Xa("stackTrace.format","{0}: {1}",sne(e),ane(e.stack)||ane(e.stacktrace)):sne(e)}function ane(e){return Array.isArray(e)?e.join("\n"):e}function sne(e){return"ERR_UNC_HOST_NOT_ALLOWED"===e.code?"".concat(e.message,". Please update the 'security.allowedUNCHosts' setting if you want to allow this host."):"string"==typeof e.code&&"number"==typeof e.errno&&"string"==typeof e.syscall?Xa("nodeExceptionMessage","A system error occurred ({0})",e.message):e.message||Xa("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function lne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return Xa("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(e)){var n=aa(e),i=lne(n[0],t);return n.length>1?Xa("error.moreErrors","{0} ({1} errors in total)",i,n.length):i}if(Da(e))return e;if(e.detail){var r=e.detail;if(r.error)return one(r.error,t);if(r.exception)return one(r.exception,t)}return e.stack?one(e,t):e.message?e.message:Xa("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}B_(ine.ID,ine,4);var une,cne=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},dne=function(e,t){return function(n,i){t(n,i,e)}},hne=(It=function(e){function t(e,n,i,r,o,a,s,c,d,h){var f;return u(this,t),(f=l(this,t)).typeId=e,f.editor=n,f.showCommand=r,f.range=o,f.edits=a,f.onSelectNewEdit=s,f._contextMenuService=c,f._keybindingService=h,f.allowEditorOverflow=!0,f.suppressMouseDown=!0,f.create(),f.visibleContext=i.bindTo(d),f.visibleContext.set(!0),f._register(Mu((function(){return f.visibleContext.reset()}))),f.editor.addContentWidget(f),f.editor.layoutContentWidget(f),f._register(Mu((function(){return f.editor.removeContentWidget(f)}))),f._register(f.editor.onDidChangeCursorPosition((function(e){o.containsPosition(e.position)||f.dispose()}))),f._register(Au.runAndSubscribe(h.onDidUpdateKeybindings,(function(){f._updateButtonTitle()}))),f}return p(t,e),h(t,[{key:"_updateButtonTitle",value:function(){var e,t=null===(e=this._keybindingService.lookupKeybinding(this.showCommand.id))||void 0===e?void 0:e.getLabel();this.button.element.title=this.showCommand.label+(t?" (".concat(t,")"):"")}},{key:"create",value:function(){var e=this;this.domNode=gm(".post-edit-widget"),this.button=this._register(new oj(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(cp(this.domNode,rm.CLICK,(function(){return e.showSelector()})))}},{key:"getId",value:function(){return une.baseId+"."+this.typeId}},{key:"getDomNode",value:function(){return this.domNode}},{key:"getPosition",value:function(){return{position:this.range.getEndPosition(),preference:[2]}}},{key:"showSelector",value:function(){var e=this;this._contextMenuService.showContextMenu({getAnchor:function(){var t=xp(e.button.element);return{x:t.left+t.width,y:t.top+t.height}},getActions:function(){return e.edits.allEdits.map((function(t,n){return oy({id:"",label:t.title,checked:n===e.edits.activeEditIndex,run:function(){if(n!==e.edits.activeEditIndex)return e.onSelectNewEdit(n)}})}))}})}}]),t}(Ru),une=It,It.baseId="editor.widget.postEditWidget",It);hne=une=cne([dne(7,GI),dne(8,Ky),dne(9,ZI)],hne);var fne=function(e){function t(e,n,i,r,o,a,s){var c;return u(this,t),(c=l(this,t))._id=e,c._editor=n,c._visibleContext=i,c._showCommand=r,c._instantiationService=o,c._bulkEditService=a,c._notificationService=s,c._currentWidget=c._register(new Pu),c._register(Au.any(n.onDidChangeModel,n.onDidChangeModelContent)((function(){return c.clear()}))),c}return p(t,e),h(t,[{key:"applyEditAndShowIfNeeded",value:function(e,t,n,i,r){var o=this;return s((function(){var a,l,u,c,d,h,f,g,v,p,m,y;return E(this,(function(_){switch(_.label){case 0:if(!(a=o._editor.getModel())||!e.length)return[2];if(!(l=t.allEdits.at(t.activeEditIndex)))return[2];u=function(){var a=s((function(a){var s;return E(this,(function(l){switch(l.label){case 0:return(s=o._editor.getModel())?[4,s.undo()]:[2];case 1:return l.sent(),o.applyEditAndShowIfNeeded(e,{activeEditIndex:a,allEdits:t.allEdits},n,i,r),[2]}}))}));return function(e){return a.apply(this,arguments)}}(),c=function(i,r){_u(i)||(o._notificationService.error(r),n&&o.show(e[0],t,u))},_.label=1;case 1:return _.trys.push([1,3,,4]),[4,i(l,r)];case 2:return d=_.sent(),[3,4];case 3:return h=_.sent(),[2,c(h,Xa("resolveError","Error resolving edit '{0}':\n{1}",l.title,lne(h)))];case 4:if(r.isCancellationRequested)return[2];f=Gte(a.uri,e,d),g=e[0],v=a.deltaDecorations([],[{range:g,options:{description:"paste-line-suffix",stickiness:0}}]),o._editor.focus(),_.label=5;case 5:return _.trys.push([5,7,8,9]),[4,o._bulkEditService.apply(f,{editor:o._editor,token:r})];case 6:return p=_.sent(),m=a.getDecorationRange(v[0]),[3,9];case 7:return y=_.sent(),[2,c(y,Xa("applyError","Error applying edit '{0}':\n{1}",l.title,lne(y)))];case 8:return a.deltaDecorations(v,[]),[7];case 9:return r.isCancellationRequested||n&&p.isApplied&&t.allEdits.length>1&&o.show(null!=m?m:g,t,u),[2]}}))}))()}},{key:"show",value:function(e,t,n){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(hne,this._id,this._editor,this._visibleContext,this._showCommand,e,t,n))}},{key:"clear",value:function(){this._currentWidget.clear()}},{key:"tryShowSelector",value:function(){var e;null===(e=this._currentWidget.value)||void 0===e||e.showSelector()}}]),t}(Ru);fne=cne([dne(4,Gm),dne(5,jR),dne(6,rx)],fne);var gne,vne=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},pne=function(e,t){return function(n,i){t(n,i,e)}},mne="editor.changePasteType",yne=new jy("pasteWidgetVisible",!1,Xa("pasteWidgetVisible","Whether the paste widget is showing")),_ne="application/vnd.code.copyMetadata",bne=(Et=function(e){function t(e,n,i,r,o,a,s){var c;u(this,t),(c=l(this,t))._bulkEditService=i,c._clipboardService=r,c._languageFeaturesService=o,c._quickInputService=a,c._progressService=s,c._editor=e;var d=e.getContainerDomNode();return c._register(cp(d,"copy",(function(e){return c.handleCopy(e)}))),c._register(cp(d,"cut",(function(e){return c.handleCopy(e)}))),c._register(cp(d,"paste",(function(e){return c.handlePaste(e)}),!0)),c._pasteProgressManager=c._register(new Jte("pasteIntoEditor",e,n)),c._postPasteWidgetManager=c._register(n.createInstance(fne,"pasteIntoEditor",e,yne,{id:mne,label:Xa("postPasteWidgetTitle","Show paste options...")})),c}return p(t,e),h(t,[{key:"changePasteType",value:function(){this._postPasteWidgetManager.tryShowSelector()}},{key:"pasteAs",value:function(e){this._editor.focus();try{this._pasteAsActionContext={preferred:e},Bp().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}},{key:"clearWidgets",value:function(){this._postPasteWidgetManager.clear()}},{key:"isPasteAsEnabled",value:function(){return this._editor.getOption(85).enabled}},{key:"finishedPaste",value:function(){var e=this;return s((function(){return E(this,(function(t){switch(t.label){case 0:return[4,e._currentPasteOperation];case 1:return t.sent(),[2]}}))}))()}},{key:"handleCopy",value:function(e){var t,n,i,r;if(this._editor.hasTextFocus()&&(null===(t=(n=this._clipboardService).clearInternalState)||void 0===t||t.call(n),e.clipboardData&&this.isPasteAsEnabled())){var o=this._editor.getModel(),a=this._editor.getSelections();if(o&&(null==a?void 0:a.length)){var l=this._editor.getOption(37),u=a,c=1===a.length&&a[0].isEmpty();if(c){if(!l)return;u=[new hd(u[0].startLineNumber,1,u[0].startLineNumber,1+o.getLineLength(u[0].startLineNumber))]}var d=null===(i=this._editor._getViewModel())||void 0===i?void 0:i.getPlainTextToCopy(a,l,ps),h={multicursorText:Array.isArray(d)?d:null,pasteOnNewLine:c,mode:null},f=this._languageFeaturesService.documentPasteEditProvider.ordered(o).filter((function(e){return!!e.prepareDocumentPaste}));if(f.length){var g=_te(e.clipboardData),v=f.flatMap((function(e){var t;return null!==(t=e.copyMimeTypes)&&void 0!==t?t:[]})),p=lte();this.setCopyMetadata(e.clipboardData,{id:p,providerCopyMimeTypes:v,defaultPastePayload:h});var m=hg(function(){var e=s((function(e){var t,n,i,r,a,l,c,d,h,v,p,m,y,_,b;return E(this,(function(k){switch(k.label){case 0:return[4,Promise.all(f.map(function(){var t=s((function(t){var n;return E(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t.prepareDocumentPaste(o,u,g,e)];case 1:return[2,i.sent()];case 2:return n=i.sent(),console.error(n),[2,void 0];case 3:return[2]}}))}));return function(e){return t.apply(this,arguments)}}()))];case 1:(t=aa.apply(void 0,[k.sent()])).reverse(),n=!0,i=!1,r=void 0;try{for(a=t[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){c=l.value,d=!0,h=!1,v=void 0;try{for(p=c[Symbol.iterator]();!(d=(m=p.next()).done);d=!0)y=C(m.value,2),_=y[0],b=y[1],g.replace(_,b)}catch(e){h=!0,v=e}finally{try{d||null==p.return||p.return()}finally{if(h)throw v}}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return[2,g]}}))}));return function(t){return e.apply(this,arguments)}}());null===(r=gne._currentCopyOperation)||void 0===r||r.dataTransferPromise.cancel(),gne._currentCopyOperation={handle:p,dataTransferPromise:m}}else this.setCopyMetadata(e.clipboardData,{defaultPastePayload:h})}}}},{key:"handlePaste",value:function(e){var t=this;return s((function(){var n,i,r,o,a,s,l,u,c,d;return E(this,(function(h){return e.clipboardData&&t._editor.hasTextFocus()?(null===(n=ine.get(t._editor))||void 0===n||n.closeMessage(),null===(i=t._currentPasteOperation)||void 0===i||i.cancel(),t._currentPasteOperation=void 0,r=t._editor.getModel(),(null==(o=t._editor.getSelections())?void 0:o.length)&&r?t._editor.getOption(92)||!t.isPasteAsEnabled()&&!t._pasteAsActionContext?[2]:(a=t.fetchCopyMetadata(e),(s=wte(e.clipboardData)).delete(_ne),u=x(e.clipboardData.types).concat(x(null!==(l=null==a?void 0:a.providerCopyMimeTypes)&&void 0!==l?l:[]),[rk.uriList]),c=t._languageFeaturesService.documentPasteEditProvider.ordered(r).filter((function(e){var n,i,r=null===(n=t._pasteAsActionContext)||void 0===n?void 0:n.preferred;return!(r&&e.providedPasteEditKinds&&!t.providerMatchesPreference(e,r))&&(null===(i=e.pasteMimeTypes)||void 0===i?void 0:i.some((function(e){return hte(e,u)})))})),c.length?(e.preventDefault(),e.stopImmediatePropagation(),t._pasteAsActionContext?t.showPasteAsPick(t._pasteAsActionContext.preferred,c,o,s,a):t.doPasteInline(c,o,s,a,e),[2]):((null===(d=t._pasteAsActionContext)||void 0===d?void 0:d.preferred)&&t.showPasteAsNoEditMessage(o,t._pasteAsActionContext.preferred),[2])):[2]):[2]}))}))()}},{key:"showPasteAsNoEditMessage",value:function(e,t){var n;null===(n=ine.get(this._editor))||void 0===n||n.showMessage(Xa("pasteAsError","No paste edits for '{0}' found",t instanceof vte?t.value:t.providerId),e[0].getStartPosition())}},{key:"doPasteInline",value:function(e,t,n,i,r){var o=this._editor;if(o.hasModel()){var a=new E9(o,3,void 0),l=this,u=hg(function(){var o=s((function(o){var c,d,h,f,g,v,p,m,y;return E(this,(function(_){switch(_.label){case 0:if(!(c=l._editor).hasModel())return[2];d=c.getModel(),h=new Tu,f=h.add(new rc(o)),h.add(a.token.onCancellationRequested((function(){return f.cancel()}))),g=f.token,_.label=1;case 1:return _.trys.push([1,,5,6]),[4,l.mergeInDataFromCopy(n,i,g)];case 2:return _.sent(),g.isCancellationRequested?[2]:!(v=e.filter((function(e){return l.isSupportedPasteProvider(e,n)}))).length||1===v.length&&v[0]instanceof Lte?[2,l.applyDefaultPasteHandler(n,i,g,r)]:(p={triggerKind:Ld.Automatic},[4,l.getPasteEdits(v,n,d,t,p,g)]);case 3:return m=_.sent(),h.add(m),g.isCancellationRequested?[2]:1===m.edits.length&&m.edits[0].provider instanceof Lte?[2,l.applyDefaultPasteHandler(n,i,g,r)]:m.edits.length?(y="afterPaste"===c.getOption(85).showPasteSelector,[2,l._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:m.edits},y,(function(e,n){return new Promise((function(i,r){s((function(){var o,a,s,u,c,d,h;return E(this,(function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),s=null===(o=(a=e.provider).resolveDocumentPasteEdit)||void 0===o?void 0:o.call(a,e,n),u=new Ng,(d=s)?[4,l._pasteProgressManager.showWhile(t[0].getEndPosition(),Xa("resolveProcess","Resolving paste edit. Click to cancel"),Promise.race([u.p,s]),{cancel:function(){return u.cancel(),r(new bu)}},0)]:[3,2];case 1:d=f.sent(),f.label=2;case 2:return(c=d)&&(e.additionalEdit=c.additionalEdit),[2,i(e)];case 3:return h=f.sent(),[2,r(h)];case 4:return[2]}}))}))()}))}),g)]):[4,l.applyDefaultPasteHandler(n,i,g,r)];case 4:return _.sent(),[3,6];case 5:return h.dispose(),l._currentPasteOperation===u&&(l._currentPasteOperation=void 0),[7];case 6:return[2]}}))}));return function(e){return o.apply(this,arguments)}}()),c=this;this._pasteProgressManager.showWhile(t[0].getEndPosition(),Xa("pasteIntoEditorProgress","Running paste handlers. Click to cancel and do basic paste"),u,{cancel:s((function(){return E(this,(function(e){switch(e.label){case 0:return e.trys.push([0,,2,3]),u.cancel(),a.token.isCancellationRequested?[2]:[4,c.applyDefaultPasteHandler(n,i,a.token,r)];case 1:return e.sent(),[3,3];case 2:return a.dispose(),[7];case 3:return[2]}}))}))}).then((function(){a.dispose()})),this._currentPasteOperation=u}}},{key:"showPasteAsPick",value:function(e,t,n,i,r){var o=this,a=hg(function(){var l=s((function(s){var l,u,c,d,h,f,g,v,p,m,y;return E(this,(function(_){switch(_.label){case 0:if(!(l=o._editor).hasModel())return[2];u=l.getModel(),c=new Tu,d=c.add(new E9(l,3,void 0,s)),_.label=1;case 1:return _.trys.push([1,,8,9]),[4,o.mergeInDataFromCopy(i,r,d.token)];case 2:return _.sent(),d.token.isCancellationRequested?[2]:(h=t.filter((function(t){return o.isSupportedPasteProvider(t,i,e)})),e&&(h=h.filter((function(t){return o.providerMatchesPreference(t,e)}))),f={triggerKind:Ld.PasteAs,only:e&&e instanceof vte?e:void 0},v=c.add,[4,o.getPasteEdits(h,i,u,n,f,d.token)]);case 3:return g=v.apply(c,[_.sent()]),d.token.isCancellationRequested?[2]:(e&&(g={edits:g.edits.filter((function(t){return e instanceof vte?e.contains(t.kind):e.providerId===t.provider.id})),dispose:g.dispose}),g.edits.length?e?(p=g.edits.at(0),[3,6]):[3,4]:(f.only&&o.showPasteAsNoEditMessage(n,f.only),[2]));case 4:return[4,o._quickInputService.pick(g.edits.map((function(e){var t;return{label:e.title,description:null===(t=e.kind)||void 0===t?void 0:t.value,edit:e}})),{placeHolder:Xa("pasteAsPickerPlaceholder","Select Paste Action")})];case 5:m=_.sent(),p=null==m?void 0:m.edit,_.label=6;case 6:return p?(y=Gte(u.uri,n,p),[4,o._bulkEditService.apply(y,{editor:o._editor})]):[2];case 7:return _.sent(),[3,9];case 8:return c.dispose(),o._currentPasteOperation===a&&(o._currentPasteOperation=void 0),[7];case 9:return[2]}}))}));return function(e){return l.apply(this,arguments)}}());this._progressService.withProgress({location:10,title:Xa("pasteAsProgress","Running paste handlers")},(function(){return a}))}},{key:"setCopyMetadata",value:function(e,t){e.setData(_ne,JSON.stringify(t))}},{key:"fetchCopyMetadata",value:function(e){if(e.clipboardData){var t=e.clipboardData.getData(_ne);if(t)try{return JSON.parse(t)}catch(e){return}var n,i=C(q$.getTextData(e.clipboardData),2),r=(i[0],i[1]);if(r)return{defaultPastePayload:{mode:r.mode,multicursorText:null!==(n=r.multicursorText)&&void 0!==n?n:null,pasteOnNewLine:!!r.isFromEmptySelection}}}}},{key:"mergeInDataFromCopy",value:function(e,t,n){var i=this;return s((function(){var r,o,a,s,l,u,c,d,h,f,g;return E(this,(function(v){switch(v.label){case 0:return(null==t?void 0:t.id)&&(null===(r=gne._currentCopyOperation)||void 0===r?void 0:r.handle)===t.id?[4,gne._currentCopyOperation.dataTransferPromise]:[3,2];case 1:if(o=v.sent(),n.isCancellationRequested)return[2];a=!0,s=!1,l=void 0;try{for(u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)d=C(c.value,2),h=d[0],f=d[1],e.replace(h,f)}catch(e){s=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw l}}v.label=2;case 2:return e.has(rk.uriList)?[3,4]:[4,i._clipboardService.readResources()];case 3:if(g=v.sent(),n.isCancellationRequested)return[2];g.length&&e.append(rk.uriList,ute(gte.create(g))),v.label=4;case 4:return[2]}}))}))()}},{key:"getPasteEdits",value:function(e,t,n,i,r,o){return s((function(){var a,l,u;return E(this,(function(c){switch(c.label){case 0:return a=new Tu,[4,fg(Promise.all(e.map(function(){var e=s((function(e){var s,l,u,c;return E(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,null===(s=e.provideDocumentPasteEdits)||void 0===s?void 0:s.call(e,n,i,t,r,o)];case 1:return(u=d.sent())&&a.add(u),[2,null==u||null===(l=u.edits)||void 0===l?void 0:l.map((function(t){return b(_({},t),{provider:e})}))];case 2:return _u(c=d.sent())||console.error(c),[2,void 0];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}())),o)];case 1:return l=c.sent(),u=aa(null!=l?l:[]).flat().filter((function(e){return!r.only||r.only.contains(e.kind)})),[2,{edits:Zte(u),dispose:function(){return a.dispose()}}]}}))}))()}},{key:"applyDefaultPasteHandler",value:function(e,t,n,i){var r=this;return s((function(){var o,a,s,l,u,c,d;return E(this,(function(h){switch(h.label){case 0:return[4,null==(a=null!==(o=e.get(rk.text))&&void 0!==o?o:e.get("text"))?void 0:a.asString()];case 1:return l=null!==(s=h.sent())&&void 0!==s?s:"",n.isCancellationRequested?[2]:(d={clipboardEvent:i,text:l,pasteOnNewLine:null!==(u=null==t?void 0:t.defaultPastePayload.pasteOnNewLine)&&void 0!==u&&u,multicursorText:null!==(c=null==t?void 0:t.defaultPastePayload.multicursorText)&&void 0!==c?c:null,mode:null},r._editor.trigger("keyboard","paste",d),[2])}}))}))()}},{key:"isSupportedPasteProvider",value:function(e,t,n){var i;return!!(null===(i=e.pasteMimeTypes)||void 0===i?void 0:i.some((function(e){return t.matches(e)})))&&(!n||this.providerMatchesPreference(e,n))}},{key:"providerMatchesPreference",value:function(e,t){return t instanceof vte?!e.providedPasteEditKinds||e.providedPasteEditKinds.some((function(e){return t.contains(e)})):e.id===t.providerId}}],[{key:"get",value:function(e){return e.getContribution(gne.ID)}}]),t}(Ru),gne=Et,Et.ID="editor.contrib.copyPasteActionController",Et);bne=gne=vne([pne(1,Gm),pne(2,jR),pne(3,fY),pne(4,wS),pne(5,TU),pne(6,OA)],bne);var kne="9_cutcopypaste",wne=_s||document.queryCommandSupported("cut"),Cne=_s||document.queryCommandSupported("copy"),Sne=void 0!==navigator.clipboard&&!Vf||document.queryCommandSupported("paste");function xne(e){return e.register(),e}var Lne=wne?xne(new N_({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:_s?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:d_.MenubarEditMenu,group:"2_ccp",title:Xa({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:d_.EditorContext,group:kne,title:Xa("actions.clipboard.cutLabel","Cut"),when:p0.writable,order:1},{menuId:d_.CommandPalette,group:"",title:Xa("actions.clipboard.cutLabel","Cut"),order:1},{menuId:d_.SimpleEditorContext,group:kne,title:Xa("actions.clipboard.cutLabel","Cut"),when:p0.writable,order:1}]})):void 0,Dne=Cne?xne(new N_({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:_s?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:d_.MenubarEditMenu,group:"2_ccp",title:Xa({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:d_.EditorContext,group:kne,title:Xa("actions.clipboard.copyLabel","Copy"),order:2},{menuId:d_.CommandPalette,group:"",title:Xa("actions.clipboard.copyLabel","Copy"),order:1},{menuId:d_.SimpleEditorContext,group:kne,title:Xa("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;g_.appendMenuItem(d_.MenubarEditMenu,{submenu:d_.MenubarCopy,title:Ja("copy as","Copy As"),group:"2_ccp",order:3}),g_.appendMenuItem(d_.EditorContext,{submenu:d_.EditorContextCopy,title:Ja("copy as","Copy As"),group:kne,order:3}),g_.appendMenuItem(d_.EditorContext,{submenu:d_.EditorContextShare,title:Ja("share","Share"),group:"11_share",order:-1,when:Sy.and(Sy.notEquals("resourceScheme","output"),p0.editorTextFocus)}),g_.appendMenuItem(d_.ExplorerContext,{submenu:d_.ExplorerContextShare,title:Ja("share","Share"),group:"11_share",order:-1});var Nne=Sne?xne(new N_({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:_s?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:d_.MenubarEditMenu,group:"2_ccp",title:Xa({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:d_.EditorContext,group:kne,title:Xa("actions.clipboard.pasteLabel","Paste"),when:p0.writable,order:4},{menuId:d_.CommandPalette,group:"",title:Xa("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:d_.SimpleEditorContext,group:kne,title:Xa("actions.clipboard.pasteLabel","Paste"),when:p0.writable,order:4}]})):void 0,Ine=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:Xa("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:p0.textInputFocus,primary:0,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){t.hasModel()&&(!t.getOption(37)&&t.getSelection().isEmpty()||(z$.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),z$.forceCopyWithSyntaxHighlighting=!1))}}]),t}(M_);function Ene(e,t){e&&(e.addImplementation(1e4,"code-editor",(function(e,n){var i=e.get(Ym).getFocusedCodeEditor();if(i&&i.hasTextFocus()){var r=i.getOption(37),o=i.getSelection();return o&&o.isEmpty()&&!r||i.getContainerDomNode().ownerDocument.execCommand(t),!0}return!1})),e.addImplementation(0,"generic-dom",(function(e,n){return Bp().execCommand(t),!0})))}Ene(Lne,"cut"),Ene(Dne,"copy"),Nne&&(Nne.addImplementation(1e4,"code-editor",(function(e,t){var n,i,r=e.get(Ym),o=e.get(fY),a=r.getFocusedCodeEditor();return!(!a||!a.hasTextFocus())&&(a.getContainerDomNode().ownerDocument.execCommand("paste")?null!==(i=null===(n=bne.get(a))||void 0===n?void 0:n.finishedPaste())&&void 0!==i?i:Promise.resolve():!bs||s((function(){var e,t,n,i,r;return E(this,(function(s){switch(s.label){case 0:return[4,o.readText()];case 1:return""!==(e=s.sent())&&(t=U$.INSTANCE.get(e),n=!1,i=null,r=null,t&&(n=a.getOption(37)&&!!t.isFromEmptySelection,i=void 0!==t.multicursorText?t.multicursorText:null,r=t.mode),a.trigger("keyboard","paste",{text:e,pasteOnNewLine:n,multicursorText:i,mode:r})),[2]}}))}))())})),Nne.addImplementation(0,"generic-dom",(function(e,t){return Bp().execCommand("paste"),!0}))),Cne&&O_(Ine);var Mne,Tne=new function e(){u(this,e),this.QuickFix=new vte("quickfix"),this.Refactor=new vte("refactor"),this.RefactorExtract=this.Refactor.append("extract"),this.RefactorInline=this.Refactor.append("inline"),this.RefactorMove=this.Refactor.append("move"),this.RefactorRewrite=this.Refactor.append("rewrite"),this.Notebook=new vte("notebook"),this.Source=new vte("source"),this.SourceOrganizeImports=this.Source.append("organizeImports"),this.SourceFixAll=this.Source.append("fixAll"),this.SurroundWith=this.Refactor.append("surround")};function Rne(e,t,n){return!!t.contains(e)&&(!n||!t.contains(n))}!function(e){e.Refactor="refactor",e.RefactorPreview="refactor preview",e.Lightbulb="lightbulb",e.Default="other (default)",e.SourceAction="source action",e.QuickFix="quick fix action",e.FixAll="fix all",e.OrganizeImports="organize imports",e.AutoFix="auto fix",e.QuickFixHover="quick fix hover window",e.OnSave="save participants",e.ProblemsView="problems view"}(Mne||(Mne={}));var Ane,Pne=function(){function e(t,n,i){u(this,e),this.kind=t,this.apply=n,this.preferred=i}return h(e,null,[{key:"fromUser",value:function(t,n){return t&&"object"===(void 0===t?"undefined":L(t))?new e(e.getKindFromUser(t,n.kind),e.getApplyFromUser(t,n.apply),e.getPreferredUser(t)):new e(n.kind,n.apply,!1)}},{key:"getApplyFromUser",value:function(e,t){switch("string"==typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}},{key:"getKindFromUser",value:function(e,t){return"string"==typeof e.kind?new vte(e.kind):t}},{key:"getPreferredUser",value:function(e){return"boolean"==typeof e.preferred&&e.preferred}}]),e}(),One=function(){function e(t,n,i){u(this,e),this.action=t,this.provider=n,this.highlightRange=i}return h(e,[{key:"resolve",value:function(e){var t=this;return s((function(){var n,i;return E(this,(function(r){switch(r.label){case 0:if(!(null===(n=t.provider)||void 0===n?void 0:n.resolveCodeAction)||t.action.edit)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.provider.resolveCodeAction(t.action,e)];case 2:return i=r.sent(),[3,4];case 3:return pu(r.sent()),[3,4];case 4:i&&(t.action.edit=i.edit),r.label=5;case 5:return[2,t]}}))}))()}}]),e}(),Fne="editor.action.codeAction",Wne="editor.action.quickFix",Bne="editor.action.autoFix",Hne="editor.action.refactor",Vne="editor.action.sourceAction",zne="editor.action.organizeImports",Une="editor.action.fixAll",jne=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t)).documentation=n,r._register(i),r.allActions=x(e).sort(t.codeActionsComparator),r.validActions=r.allActions.filter((function(e){return!e.action.disabled})),r}return p(t,e),h(t,[{key:"hasAutoFix",get:function(){return this.validActions.some((function(e){var t=e.action;return!!t.kind&&Tne.QuickFix.contains(new vte(t.kind))&&!!t.isPreferred}))}},{key:"hasAIFix",get:function(){return this.validActions.some((function(e){return!!e.action.isAI}))}},{key:"allAIFixes",get:function(){return this.validActions.every((function(e){return!!e.action.isAI}))}}],[{key:"codeActionsPreferredComparator",value:function(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}},{key:"codeActionsComparator",value:function(e,n){var i=e.action,r=n.action;return i.isAI&&!r.isAI?1:!i.isAI&&r.isAI?-1:ua(i.diagnostics)?ua(r.diagnostics)?t.codeActionsPreferredComparator(i,r):-1:ua(r.diagnostics)?1:t.codeActionsPreferredComparator(i,r)}}]),t}(Ru),Kne={actions:[],documentation:void 0};function qne(e,t,n,i,r,o){return Gne.apply(this,arguments)}function Gne(){return Gne=s((function(e,t,n,i,r,o){var a,l,u,c,d,h,f,g,v,p,m,y,k;return E(this,(function(w){switch(w.label){case 0:l=i.filter||{},u=b(_({},l),{excludes:x(l.excludes||[]).concat([Tne.Notebook])}),c={only:null===(a=l.include)||void 0===a?void 0:a.value,trigger:i.type},d=new M9(t,o),h=2===i.type,f=function(e,t,n){return e.all(t).filter((function(e){return!e.providedCodeActionKinds||e.providedCodeActionKinds.some((function(e){return function(e,t){return!(e.include&&!e.include.intersects(t)||e.excludes&&e.excludes.some((function(n){return Rne(t,n,e.include)}))||!e.includeSourceActions&&Tne.Source.contains(t))}(n,new vte(e))}))}))}(e,t,h?u:l),g=new Tu,v=f.map(function(){var e=s((function(e){var i,o,a,s;return E(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),r.report(e),[4,e.provideCodeActions(t,n,c,d.token)];case 1:return(i=u.sent())&&g.add(i),d.token.isCancellationRequested?[2,Kne]:(o=((null==i?void 0:i.actions)||[]).filter((function(e){return e&&function(e,t){var n=t.kind?new vte(t.kind):void 0;return!(!(!e.include||n&&e.include.contains(n))||e.excludes&&n&&e.excludes.some((function(t){return Rne(n,t,e.include)}))||!e.includeSourceActions&&n&&Tne.Source.contains(n)||e.onlyIncludePreferredActions&&!t.isPreferred)}(l,e)})),a=function(e,t,n){if(!e.documentation)return;var i=e.documentation.map((function(e){return{kind:new vte(e.kind),command:e.command}}));if(n){var r,o=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;c.kind.contains(n)&&(r?r.kind.contains(c.kind)&&(r=c):r=c)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}if(r)return null==r?void 0:r.command}var d=!0,h=!1,f=void 0;try{for(var g,v=t[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;if(p.kind){var m=!0,y=!1,_=void 0;try{for(var b,k=i[Symbol.iterator]();!(m=(b=k.next()).done);m=!0){var w=b.value;if(w.kind.contains(new vte(p.kind)))return w.command}}catch(e){y=!0,_=e}finally{try{m||null==k.return||k.return()}finally{if(y)throw _}}}}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}return}(e,o,l.include),[2,{actions:o.map((function(t){return new One(t,e)})),documentation:a}]);case 2:if(_u(s=u.sent()))throw s;return pu(s),[2,Kne];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()),p=e.onDidChange((function(){ea(e.all(t),f)||d.cancel()})),w.label=1;case 1:return w.trys.push([1,,3,4]),[4,Promise.all(v)];case 2:return m=w.sent(),y=m.map((function(e){return e.actions})).flat(),k=x(aa(m.map((function(e){return e.documentation})))).concat(x(function(e,t,n,i){var r,o,a,s,l,u,c,d,h,f;return E(this,(function(g){switch(g.label){case 0:if(!t||!i.length)return[3,8];r=!0,o=!1,a=void 0,g.label=1;case 1:g.trys.push([1,6,7,8]),s=e.all(t)[Symbol.iterator](),g.label=2;case 2:return(r=(l=s.next()).done)?[3,5]:(u=l.value)._getAdditionalMenuItems?[5,M(null===(h=u._getAdditionalMenuItems)||void 0===h?void 0:h.call(u,{trigger:n.type,only:null===(d=n.filter)||void 0===d||null===(c=d.include)||void 0===c?void 0:c.value},i.map((function(e){return e.action}))))]:[3,4];case 3:g.sent(),g.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return f=g.sent(),o=!0,a=f,[3,8];case 7:try{r||null==s.return||s.return()}finally{if(o)throw a}return[7];case 8:return[2]}}))}(e,t,i,y))),[2,new jne(y,k,g)];case 3:return p.dispose(),d.dispose(),[7];case 4:return[2]}}))})),Gne.apply(this,arguments)}function Zne(e,t,n,i){return Yne.apply(this,arguments)}function Yne(){return Yne=s((function(e,t,n,i){var r,o,a,s,l,u,c,d,h,f=arguments;return E(this,(function(g){switch(g.label){case 0:return r=f.length>4&&void 0!==f[4]?f[4]:Uu.None,a=e.get(jR),s=e.get(ay),l=e.get(b_),u=e.get(rx),l.publicLog2("codeAction.applyCodeAction",{codeActionTitle:t.action.title,codeActionKind:t.action.kind,codeActionIsPreferred:!!t.action.isPreferred,reason:n}),[4,t.resolve(r)];case 1:return g.sent(),r.isCancellationRequested?[2]:(null===(o=t.action.edit)||void 0===o?void 0:o.edits.length)?[4,a.apply(t.action.edit,{editor:null==i?void 0:i.editor,label:t.action.title,quotableLabel:t.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:n!==Ane.OnSave,showPreview:null==i?void 0:i.preview})]:[3,3];case 2:if(!g.sent().isApplied)return[2];g.label=3;case 3:if(!t.action.command)return[3,7];g.label=4;case 4:return g.trys.push([4,6,,7]),[4,(c=s).executeCommand.apply(c,[t.action.command.id].concat(x(t.action.command.arguments||[])))];case 5:return g.sent(),[3,7];case 6:return d=g.sent(),h=function(e){return"string"==typeof e?e:e instanceof Error&&"string"==typeof e.message?e.message:void 0}(d),u.error("string"==typeof h?h:Xa("applyCodeActionFailed","An unknown error occurred while applying the code action")),[3,7];case 7:return[2]}}))})),Yne.apply(this,arguments)}!function(e){e.OnSave="onSave",e.FromProblemsView="fromProblemsView",e.FromCodeActions="fromCodeActions",e.FromAILightbulb="fromAILightbulb"}(Ane||(Ane={})),sy.registerCommand("_executeCodeActionProvider",function(){var e=s((function(e,t,n,i,r){var o,a,s,l,u,c,d,h;return E(this,(function(f){switch(f.label){case 0:if(!(t instanceof ed))throw wu();if(o=e.get(wS).codeActionProvider,!(a=e.get(Qm).getModel(t)))throw wu();if(!(s=fd.isISelection(n)?fd.liftSelection(n):hd.isIRange(n)?a.validateRange(n):void 0))throw wu();return l="string"==typeof i?new vte(i):void 0,[4,qne(o,a,s,{type:1,triggerAction:Mne.Default,filter:{includeSourceActions:!0,include:l}},FA.None,Uu.None)];case 1:for(u=f.sent(),c=[],d=Math.min(u.validActions.length,"number"==typeof r?r:0),h=0;h<d;h++)c.push(u.validActions[h].resolve(Uu.None));f.label=2;case 2:return f.trys.push([2,,4,5]),[4,Promise.all(c)];case 3:return f.sent(),[2,u.validActions.map((function(e){return e.action}))];case 4:return setTimeout((function(){return u.dispose()}),100),[7];case 5:return[2]}}))}));return function(t,n,i,r,o){return e.apply(this,arguments)}}());var Qne,Xne=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},$ne=function(e,t){return function(n,i){t(n,i,e)}},Jne=(Mt=function(){function e(t){u(this,e),this.keybindingService=t}return h(e,[{key:"getResolver",value:function(){var e=this,t=new Vh((function(){return e.keybindingService.getKeybindings().filter((function(e){return Qne.codeActionCommands.indexOf(e.command)>=0})).filter((function(e){return e.resolvedKeybinding})).map((function(e){var t=e.commandArgs;return e.command===zne?t={kind:Tne.SourceOrganizeImports.value}:e.command===Une&&(t={kind:Tne.SourceFixAll.value}),_({resolvedKeybinding:e.resolvedKeybinding},Pne.fromUser(t,{kind:vte.None,apply:"never"}))}))}));return function(n){if(n.kind){var i=e.bestKeybindingForCodeAction(n,t.value);return null==i?void 0:i.resolvedKeybinding}}}},{key:"bestKeybindingForCodeAction",value:function(e,t){if(e.kind){var n=new vte(e.kind);return t.filter((function(e){return e.kind.contains(n)})).filter((function(t){return!t.preferred||e.isPreferred})).reduceRight((function(e,t){return e?e.kind.contains(t.kind)?t:e:t}),void 0)}}}]),e}(),Qne=Mt,Mt.codeActionCommands=[Hne,Fne,Vne,zne,Une],Mt);Jne=Qne=Xne([$ne(0,ZI)],Jne),TL("symbolIcon.arrayForeground",zL,Xa("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.booleanForeground",zL,Xa("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},Xa("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.colorForeground",zL,Xa("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.constantForeground",zL,Xa("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},Xa("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},Xa("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},Xa("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},Xa("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},Xa("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.fileForeground",zL,Xa("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.folderForeground",zL,Xa("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},Xa("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},Xa("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.keyForeground",zL,Xa("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.keywordForeground",zL,Xa("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},Xa("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.moduleForeground",zL,Xa("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.namespaceForeground",zL,Xa("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.nullForeground",zL,Xa("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.numberForeground",zL,Xa("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.objectForeground",zL,Xa("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.operatorForeground",zL,Xa("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.packageForeground",zL,Xa("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.propertyForeground",zL,Xa("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.referenceForeground",zL,Xa("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.snippetForeground",zL,Xa("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.stringForeground",zL,Xa("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.structForeground",zL,Xa("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.textForeground",zL,Xa("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.typeParameterForeground",zL,Xa("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.unitForeground",zL,Xa("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TL("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},Xa("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));var eie=Object.freeze({kind:vte.Empty,title:Xa("codeAction.widget.id.more","More Actions...")}),tie=Object.freeze([{kind:Tne.QuickFix,title:Xa("codeAction.widget.id.quickfix","Quick Fix")},{kind:Tne.RefactorExtract,title:Xa("codeAction.widget.id.extract","Extract"),icon:bd.wrench},{kind:Tne.RefactorInline,title:Xa("codeAction.widget.id.inline","Inline"),icon:bd.wrench},{kind:Tne.RefactorRewrite,title:Xa("codeAction.widget.id.convert","Rewrite"),icon:bd.wrench},{kind:Tne.RefactorMove,title:Xa("codeAction.widget.id.move","Move"),icon:bd.wrench},{kind:Tne.SurroundWith,title:Xa("codeAction.widget.id.surround","Surround With"),icon:bd.surroundWith},{kind:Tne.Source,title:Xa("codeAction.widget.id.source","Source Action"),icon:bd.symbolFile},eie]);var nie,iie,rie=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},oie=function(e,t){return function(n,i){t(n,i,e)}},aie=IZ("gutter-lightbulb",bd.lightBulb,Xa("gutterLightbulbWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor.")),sie=IZ("gutter-lightbulb-auto-fix",bd.lightbulbAutofix,Xa("gutterLightbulbAutoFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and a quick fix is available.")),lie=IZ("gutter-lightbulb-sparkle",bd.lightbulbSparkle,Xa("gutterLightbulbAIFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix is available.")),uie=IZ("gutter-lightbulb-aifix-auto-fix",bd.lightbulbSparkleAutofix,Xa("gutterLightbulbAIFixAutoFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.")),cie=IZ("gutter-lightbulb-sparkle-filled",bd.sparkleFilled,Xa("gutterLightbulbSparkleFilledWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available."));!function(e){e.Hidden={type:0};e.Showing=function e(t,n,i,r){u(this,e),this.actions=t,this.trigger=n,this.editorPosition=i,this.widgetPosition=r,this.type=1}}(iie||(iie={}));var die=(Tt=function(e){function t(e,n){var i,r;return u(this,t),i=l(this,t),r=i,i._editor=e,i._keybindingService=n,i._onClick=i._register(new Zu),i.onClick=i._onClick.event,i._state=iie.Hidden,i._gutterState=iie.Hidden,i._iconClasses=[],i.lightbulbClasses=["codicon-"+aie.id,"codicon-"+uie.id,"codicon-"+sie.id,"codicon-"+lie.id,"codicon-"+cie.id],i.gutterDecoration=nie.GUTTER_DECORATION,i._domNode=gm("div.lightBulbWidget"),i._domNode.role="listbox",i._register(JI.ignoreTarget(i._domNode)),i._editor.addContentWidget(i),i._register(i._editor.onDidChangeModelContent((function(e){var t=i._editor.getModel();(1!==i.state.type||!t||i.state.editorPosition.lineNumber>=t.getLineCount())&&i.hide(),(1!==i.gutterState.type||!t||i.gutterState.editorPosition.lineNumber>=t.getLineCount())&&i.gutterHide()}))),i._register(fp(i._domNode,(function(e){if(1===i.state.type){i._editor.focus(),e.preventDefault();var t=xp(i._domNode),n=t.top,r=t.height,o=i._editor.getOption(67),a=Math.floor(o/3);null!==i.state.widgetPosition.position&&i.state.widgetPosition.position.lineNumber<i.state.editorPosition.lineNumber&&(a+=o),i._onClick.fire({x:e.posx,y:n+r+a,actions:i.state.actions,trigger:i.state.trigger})}}))),i._register(cp(i._domNode,"mouseenter",(function(e){1&~e.buttons||i.hide()}))),i._register(Au.runAndSubscribe(i._keybindingService.onDidUpdateKeybindings,(function(){var e,t,n,r;i._preferredKbLabel=null!==(n=null===(e=i._keybindingService.lookupKeybinding(Bne))||void 0===e?void 0:e.getLabel())&&void 0!==n?n:void 0,i._quickFixKbLabel=null!==(r=null===(t=i._keybindingService.lookupKeybinding(Wne))||void 0===t?void 0:t.getLabel())&&void 0!==r?r:void 0,i._updateLightBulbTitleAndIcon()}))),i._register(i._editor.onMouseDown(function(){var e=s((function(e){var t,n,i,o,a;return E(this,(function(s){return e.target.element&&r.lightbulbClasses.some((function(t){return e.target.element&&e.target.element.classList.contains(t)}))?(1!==r.gutterState.type||(r._editor.focus(),t=xp(e.target.element),n=t.top,i=t.height,o=r._editor.getOption(67),a=Math.floor(o/3),null!==r.gutterState.widgetPosition.position&&r.gutterState.widgetPosition.position.lineNumber<r.gutterState.editorPosition.lineNumber&&(a+=o),r._onClick.fire({x:e.event.posx,y:n+i+a,actions:r.gutterState.actions,trigger:r.gutterState.trigger})),[2]):[2]}))}));return function(t){return e.apply(this,arguments)}}())),i}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._editor.removeContentWidget(this),this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID)}},{key:"getId",value:function(){return"LightBulbWidget"}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return 1===this._state.type?this._state.widgetPosition:null}},{key:"update",value:function(e,t,n){var i=this;if(e.validActions.length<=0)return this.gutterHide(),this.hide();if(!this._editor.hasTextFocus())return this.gutterHide(),this.hide();if(!this._editor.getOptions().get(65).enabled)return this.gutterHide(),this.hide();var r=this._editor.getModel();if(!r)return this.gutterHide(),this.hide();var o=r.validatePosition(n),a=o.lineNumber,s=o.column,l=r.getOptions().tabSize,u=this._editor.getOptions().get(50),c=lV(r.getLineContent(a),l),d=u.spaceWidth*c>22,h=function(e){return e>2&&i._editor.getTopForLineNumber(e)===i._editor.getTopForLineNumber(e-1)},f=this._editor.getLineDecorations(a),g=!1;if(f){var v=!0,p=!1,m=void 0;try{for(var y,_,b=function(){var e=_.value.options.glyphMarginClassName;if(e&&!y.lightbulbClasses.some((function(t){return e.includes(t)})))return g=!0,"break"},k=f[Symbol.iterator]();!(v=(_=k.next()).done);v=!0){if("break"===(y=this,b()))break}}catch(e){p=!0,m=e}finally{try{v||null==k.return||k.return()}finally{if(p)throw m}}}var w=a,C=1;if(!d){var S=function(e){var t=r.getLineContent(e);return/^\s*$|^\s+/.test(t)||t.length<=C};if(a>1&&!h(a-1)){var x=a===r.getLineCount(),L=a>1&&S(a-1),D=!x&&S(a+1),N=S(a),I=!D&&!L;if(!(D||L||g))return this.gutterState=new iie.Showing(e,t,n,{position:{lineNumber:w,column:C},preference:nie._posPref}),this.renderGutterLightbub(),this.hide();L||x||L&&!N?w-=1:(D||I&&N)&&(w+=1)}else if(1!==a||a!==r.getLineCount()&&(S(a+1)||S(a))){if(a<r.getLineCount()&&!h(a+1))w+=1;else if(s*u.spaceWidth<22)return this.hide()}else{if(this.gutterState=new iie.Showing(e,t,n,{position:{lineNumber:w,column:C},preference:nie._posPref}),!g)return this.renderGutterLightbub(),this.hide();this.gutterHide()}C=/^\S\s*$/.test(r.getLineContent(w))?2:1}this.state=new iie.Showing(e,t,n,{position:{lineNumber:w,column:C},preference:nie._posPref}),this._gutterDecorationID&&(this._removeGutterDecoration(this._gutterDecorationID),this.gutterHide());var E=e.validActions,M=e.validActions[0].action.kind;E.length,this._editor.layoutContentWidget(this)}},{key:"hide",value:function(){this.state!==iie.Hidden&&(this.state=iie.Hidden,this._editor.layoutContentWidget(this))}},{key:"gutterHide",value:function(){this.gutterState!==iie.Hidden&&(this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID),this.gutterState=iie.Hidden)}},{key:"state",get:function(){return this._state},set:function(e){this._state=e,this._updateLightBulbTitleAndIcon()}},{key:"gutterState",get:function(){return this._gutterState},set:function(e){this._gutterState=e,this._updateGutterLightBulbTitleAndIcon()}},{key:"_updateLightBulbTitleAndIcon",value:function(){var e,t;if((e=this._domNode.classList).remove.apply(e,x(this._iconClasses)),this._iconClasses=[],1===this.state.type){var n,i=!1;this.state.actions.allAIFixes?(n=bd.sparkleFilled,1===this.state.actions.validActions.length&&(i=!0)):n=this.state.actions.hasAutoFix?this.state.actions.hasAIFix?bd.lightbulbSparkleAutofix:bd.lightbulbAutofix:this.state.actions.hasAIFix?bd.lightbulbSparkle:bd.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,i),this._iconClasses=ny.asClassNameArray(n),(t=this._domNode.classList).add.apply(t,x(this._iconClasses))}}},{key:"_updateGutterLightBulbTitleAndIcon",value:function(){if(1===this.gutterState.type){var e,t=!1;this.gutterState.actions.allAIFixes?(e=cie,1===this.gutterState.actions.validActions.length&&(t=!0)):e=this.gutterState.actions.hasAutoFix?this.gutterState.actions.hasAIFix?uie:sie:this.gutterState.actions.hasAIFix?lie:aie,this._updateLightbulbTitle(this.gutterState.actions.hasAutoFix,t);var n=cU.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:ny.asClassName(e),glyphMargin:{position:hw.Left},stickiness:1});this.gutterDecoration=n}}},{key:"renderGutterLightbub",value:function(){var e=this._editor.getSelection();e&&(void 0===this._gutterDecorationID?this._addGutterDecoration(e.startLineNumber):this._updateGutterDecoration(this._gutterDecorationID,e.startLineNumber))}},{key:"_addGutterDecoration",value:function(e){var t=this;this._editor.changeDecorations((function(n){t._gutterDecorationID=n.addDecoration(new hd(e,0,e,0),t.gutterDecoration)}))}},{key:"_removeGutterDecoration",value:function(e){var t=this;this._editor.changeDecorations((function(n){n.removeDecoration(e),t._gutterDecorationID=void 0}))}},{key:"_updateGutterDecoration",value:function(e,t){var n=this;this._editor.changeDecorations((function(i){i.changeDecoration(e,new hd(t,0,t,0)),i.changeDecorationOptions(e,n.gutterDecoration)}))}},{key:"_updateLightbulbTitle",value:function(e,t){1===this.state.type&&(t?this.title=Xa("codeActionAutoRun","Run: {0}",this.state.actions.validActions[0].action.title):e&&this._preferredKbLabel?this.title=Xa("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):!e&&this._quickFixKbLabel?this.title=Xa("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):e||(this.title=Xa("codeAction","Show Code Actions")))}},{key:"title",set:function(e){this._domNode.title=e}}]),t}(Ru),nie=Tt,Tt.GUTTER_DECORATION=cU.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:ny.asClassName(bd.lightBulb),glyphMargin:{position:hw.Left},stickiness:1}),Tt.ID="editor.contrib.lightbulbWidget",Tt._posPref=[0],Tt);die=nie=rie([oie(1,ZI)],die);var hie=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},fie=function(e,t){return function(n,i){t(n,i,e)}},gie="acceptSelectedCodeAction",vie="previewSelectedCodeAction",pie=function(){function e(){u(this,e)}return h(e,[{key:"templateId",get:function(){return"header"}},{key:"renderTemplate",value:function(e){e.classList.add("group-header");var t=document.createElement("span");return e.append(t),{container:e,text:t}}},{key:"renderElement",value:function(e,t,n){var i,r;n.text.textContent=null!==(r=null===(i=e.group)||void 0===i?void 0:i.title)&&void 0!==r?r:""}},{key:"disposeTemplate",value:function(e){}}]),e}(),mie=function(){function e(t,n){u(this,e),this._supportsPreview=t,this._keybindingService=n}return h(e,[{key:"templateId",get:function(){return"action"}},{key:"renderTemplate",value:function(e){e.classList.add(this.templateId);var t=document.createElement("div");t.className="icon",e.append(t);var n=document.createElement("span");return n.className="title",e.append(n),{container:e,icon:t,text:n,keybinding:new xG(e,Ns)}}},{key:"renderElement",value:function(e,t,n){var i,r,o;if((null===(i=e.group)||void 0===i?void 0:i.icon)?(n.icon.className=ny.asClassName(e.group.icon),e.group.icon.color&&(n.icon.style.color=NL(e.group.icon.color.id))):(n.icon.className=ny.asClassName(bd.lightBulb),n.icon.style.color="var(--vscode-editorLightBulb-foreground)"),e.item&&e.label){n.text.textContent=wie(e.label),n.keybinding.set(e.keybinding),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e?vm.apply(void 0,x(n)):pm.apply(void 0,x(n))}(!!e.keybinding,n.keybinding.element);var a=null===(r=this._keybindingService.lookupKeybinding(gie))||void 0===r?void 0:r.getLabel(),s=null===(o=this._keybindingService.lookupKeybinding(vie))||void 0===o?void 0:o.getLabel();n.container.classList.toggle("option-disabled",e.disabled),e.disabled?n.container.title=e.label:a&&s?this._supportsPreview&&e.canPreview?n.container.title=Xa({key:"label-preview",comment:['placeholders are keybindings, e.g "F2 to Apply, Shift+F2 to Preview"']},"{0} to Apply, {1} to Preview",a,s):n.container.title=Xa({key:"label",comment:['placeholder is a keybinding, e.g "F2 to Apply"']},"{0} to Apply",a):n.container.title=""}}},{key:"disposeTemplate",value:function(e){e.keybinding.dispose()}}]),e}();mie=hie([fie(1,ZI)],mie);var yie=function(e){function t(){return u(this,t),l(this,t,["acceptSelectedAction"])}return p(t,e),t}(N(UIEvent)),_ie=function(e){function t(){return u(this,t),l(this,t,["previewSelectedAction"])}return p(t,e),t}(N(UIEvent));function bie(e){if("action"===e.kind)return e.label}var kie=function(e){function t(e,n,i,r,o,a){var s;u(this,t),(s=l(this,t))._delegate=r,s._contextViewService=o,s._keybindingService=a,s._actionLineHeight=24,s._headerLineHeight=26,s.cts=s._register(new rc),s.domNode=document.createElement("div"),s.domNode.classList.add("actionList");var c={getHeight:function(e){return"header"===e.kind?s._headerLineHeight:s._actionLineHeight},getTemplateId:function(e){return e.kind}};return s._list=s._register(new _F(e,s.domNode,c,[new mie(n,s._keybindingService),new pie],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:bie},accessibilityProvider:{getAriaLabel:function(e){if("action"===e.kind){var t=e.label?wie(null==e?void 0:e.label):"";return e.disabled&&(t=Xa({key:"customQuickFixWidget.labels",comment:["Action widget labels for accessibility."]},"{0}, Disabled Reason: {1}",t,e.disabled)),t}return null},getWidgetAriaLabel:function(){return Xa({key:"customQuickFixWidget",comment:["An action widget option"]},"Action Widget")},getRole:function(e){return"action"===e.kind?"option":"separator"},getWidgetRole:function(){return"listbox"}}})),s._list.style(YF),s._register(s._list.onMouseClick((function(e){return s.onListClick(e)}))),s._register(s._list.onMouseOver((function(e){return s.onListHover(e)}))),s._register(s._list.onDidChangeFocus((function(){return s.onFocus()}))),s._register(s._list.onDidChangeSelection((function(e){return s.onListSelection(e)}))),s._allMenuItems=i,s._list.splice(0,s._list.length,s._allMenuItems),s._list.length&&s.focusNext(),s}return p(t,e),h(t,[{key:"focusCondition",value:function(e){return!e.disabled&&"action"===e.kind}},{key:"hide",value:function(e){this._delegate.onHide(e),this.cts.cancel(),this._contextViewService.hideContextView()}},{key:"layout",value:function(e){var t=this,n=this._allMenuItems.filter((function(e){return"header"===e.kind})).length,i=this._allMenuItems.length*this._actionLineHeight+n*this._headerLineHeight-n*this._actionLineHeight;this._list.layout(i);var r=e;if(this._allMenuItems.length>=50)r=380;else{var o,a=this._allMenuItems.map((function(e,n){var i=t.domNode.ownerDocument.getElementById(t._list.getElementID(n));if(i){i.style.width="auto";var r=i.getBoundingClientRect().width;return i.style.width="",r}return 0}));r=(o=Math).max.apply(o,x(a).concat([e]))}var s=Math.min(i,.7*this.domNode.ownerDocument.body.clientHeight);return this._list.layout(s,r),this.domNode.style.height="".concat(s,"px"),this._list.domFocus(),r}},{key:"focusPrevious",value:function(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}},{key:"focusNext",value:function(){this._list.focusNext(1,!0,void 0,this.focusCondition)}},{key:"acceptSelected",value:function(e){var t=this._list.getFocus();if(0!==t.length){var n=t[0],i=this._list.element(n);if(this.focusCondition(i)){var r=e?new _ie:new yie;this._list.setSelection([n],r)}}}},{key:"onListSelection",value:function(e){if(e.elements.length){var t=e.elements[0];t.item&&this.focusCondition(t)?this._delegate.onSelect(t.item,e.browserEvent instanceof _ie):this._list.setSelection([])}}},{key:"onFocus",value:function(){var e,t,n=this._list.getFocus();if(0!==n.length){var i=n[0],r=this._list.element(i);null===(e=(t=this._delegate).onFocus)||void 0===e||e.call(t,r.item)}}},{key:"onListHover",value:function(e){var t=this;return s((function(){var n,i;return E(this,(function(r){switch(r.label){case 0:return(n=e.element)&&n.item&&t.focusCondition(n)?!t._delegate.onHover||n.disabled||"action"!==n.kind?[3,2]:[4,t._delegate.onHover(n.item,t.cts.token)]:[3,3];case 1:i=r.sent(),n.canPreview=i?i.canPreview:void 0,r.label=2;case 2:e.index&&t._list.splice(e.index,1,[n]),r.label=3;case 3:return t._list.setFocus("number"==typeof e.index?[e.index]:[]),[2]}}))}))()}},{key:"onListClick",value:function(e){e.element&&this.focusCondition(e.element)&&this._list.setFocus([])}}]),t}(Ru);function wie(e){return e.replace(/\r\n|\r|\n/g," ")}kie=hie([fie(4,qI),fie(5,ZI)],kie);var Cie=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Sie=function(e,t){return function(n,i){t(n,i,e)}};TL("actionBar.toggledBackground",mN,Xa("actionBar.toggledBackground","Background color for toggled action items in action bar."));var xie={Visible:new jy("codeActionMenuVisible",!1,Xa("codeActionMenuVisible","Whether the action widget list is visible"))},Lie=Zm("actionWidgetService"),Die=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._contextViewService=e,r._contextKeyService=n,r._instantiationService=i,r._list=r._register(new Pu),r}return p(t,e),h(t,[{key:"isVisible",get:function(){return xie.Visible.getValue(this._contextKeyService)||!1}},{key:"show",value:function(e,t,n,i,r,o,a){var s=this,l=xie.Visible.bindTo(this._contextKeyService),u=this._instantiationService.createInstance(kie,e,t,n,i);this._contextViewService.showContextView({getAnchor:function(){return r},render:function(e){return l.set(!0),s._renderWidget(e,u,null!=a?a:[])},onHide:function(e){l.reset(),s._onWidgetClosed(e)}},o,!1)}},{key:"acceptSelected",value:function(e){var t;null===(t=this._list.value)||void 0===t||t.acceptSelected(e)}},{key:"focusPrevious",value:function(){var e,t;null===(t=this._list)||void 0===t||null===(e=t.value)||void 0===e||e.focusPrevious()}},{key:"focusNext",value:function(){var e,t;null===(t=this._list)||void 0===t||null===(e=t.value)||void 0===e||e.focusNext()}},{key:"hide",value:function(e){var t;null===(t=this._list.value)||void 0===t||t.hide(e),this._list.clear()}},{key:"_renderWidget",value:function(e,t,n){var i,r=this,o=document.createElement("div");if(o.classList.add("action-widget"),e.appendChild(o),this._list.value=t,!this._list.value)throw new Error("List has no value");o.appendChild(this._list.value.domNode);var a=new Tu,s=document.createElement("div"),l=e.appendChild(s);l.classList.add("context-view-block"),a.add(cp(l,rm.MOUSE_DOWN,(function(e){return e.stopPropagation()})));var u=document.createElement("div"),c=e.appendChild(u);c.classList.add("context-view-pointerBlock"),a.add(cp(c,rm.POINTER_MOVE,(function(){return c.remove()}))),a.add(cp(c,rm.MOUSE_DOWN,(function(){return c.remove()})));var d=0;if(n.length){var h=this._createActionBar(".action-widget-action-bar",n);h&&(o.appendChild(h.getContainer().parentElement),a.add(h),d=h.getContainer().offsetWidth)}var f=null===(i=this._list.value)||void 0===i?void 0:i.layout(d);o.style.width="".concat(f,"px");var g=a.add(sm(e));return a.add(g.onDidBlur((function(){return r.hide(!0)}))),a}},{key:"_createActionBar",value:function(e,t){if(t.length){var n=gm(e),i=new dW(n);return i.push(t,{icon:!1,label:!0}),i}}},{key:"_onWidgetClosed",value:function(e){var t;null===(t=this._list.value)||void 0===t||t.hide(e)}}]),t}(Ru);Die=Cie([Sie(0,qI),Sie(1,Ky),Sie(2,Gm)],Die),nk(Lie,Die,1);var Nie=1100;y_(function(e){function t(){return u(this,t),l(this,t,[{id:"hideCodeActionWidget",title:Ja("hideCodeActionWidget.title","Hide action widget"),precondition:xie.Visible,keybinding:{weight:Nie,primary:9,secondary:[1033]}}])}return p(t,e),h(t,[{key:"run",value:function(e){e.get(Lie).hide(!0)}}]),t}(m_)),y_(function(e){function t(){return u(this,t),l(this,t,[{id:"selectPrevCodeAction",title:Ja("selectPrevCodeAction.title","Select previous action"),precondition:xie.Visible,keybinding:{weight:Nie,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}])}return p(t,e),h(t,[{key:"run",value:function(e){var t=e.get(Lie);t instanceof Die&&t.focusPrevious()}}]),t}(m_)),y_(function(e){function t(){return u(this,t),l(this,t,[{id:"selectNextCodeAction",title:Ja("selectNextCodeAction.title","Select next action"),precondition:xie.Visible,keybinding:{weight:Nie,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}])}return p(t,e),h(t,[{key:"run",value:function(e){var t=e.get(Lie);t instanceof Die&&t.focusNext()}}]),t}(m_)),y_(function(e){function t(){return u(this,t),l(this,t,[{id:gie,title:Ja("acceptSelected.title","Accept selected action"),precondition:xie.Visible,keybinding:{weight:Nie,primary:3,secondary:[2137]}}])}return p(t,e),h(t,[{key:"run",value:function(e){var t=e.get(Lie);t instanceof Die&&t.acceptSelected()}}]),t}(m_)),y_(function(e){function t(){return u(this,t),l(this,t,[{id:vie,title:Ja("previewSelected.title","Preview selected action"),precondition:xie.Visible,keybinding:{weight:Nie,primary:2051}}])}return p(t,e),h(t,[{key:"run",value:function(e){var t=e.get(Lie);t instanceof Die&&t.acceptSelected(!0)}}]),t}(m_));var Iie,Eie=new jy("supportedCodeAction",""),Mie="_typescript.applyFixAllCodeAction",Tie=function(e){function t(e,n,i){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250;return u(this,t),(r=l(this,t))._editor=e,r._markerService=n,r._signalChange=i,r._delay=o,r._autoTriggerTimer=r._register(new wg),r._register(r._markerService.onMarkerChanged((function(e){return r._onMarkerChanges(e)}))),r._register(r._editor.onDidChangeCursorPosition((function(){return r._tryAutoTrigger()}))),r}return p(t,e),h(t,[{key:"trigger",value:function(e){var t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}},{key:"_onMarkerChanges",value:function(e){var t=this._editor.getModel();t&&e.some((function(e){return GM(e,t.uri)}))&&this._tryAutoTrigger()}},{key:"_tryAutoTrigger",value:function(){var e=this;this._autoTriggerTimer.cancelAndSet((function(){e.trigger({type:2,triggerAction:Mne.Default})}),this._delay)}},{key:"_getRangeOfSelectionUnlessWhitespaceEnclosed",value:function(e){if(this._editor.hasModel()){var t=this._editor.getSelection();if(1===e.type)return t;var n=this._editor.getOption(65).enabled;if(n!==bl.Off){if(n===bl.On)return t;if(n===bl.OnCode){if(!t.isEmpty())return t;var i=this._editor.getModel(),r=t.getPosition(),o=r.lineNumber,a=r.column,s=i.getLineContent(o);if(0===s.length)return;if(1===a){if(/\s/.test(s[0]))return}else if(a===i.getLineMaxColumn(o)){if(/\s/.test(s[s.length-1]))return}else if(/\s/.test(s[a-2])&&/\s/.test(s[a-1]))return}return t}}}}]),t}(Ru);!function(e){e.Empty={type:0};var t=function(){function e(t,n,i){u(this,e),this.trigger=t,this.position=n,this._cancellablePromise=i,this.type=1,this.actions=i.catch((function(e){if(_u(e))return Aie;throw e}))}return h(e,[{key:"cancel",value:function(){this._cancellablePromise.cancel()}}]),e}();e.Triggered=t}(Iie||(Iie={}));var Rie,Aie=Object.freeze({allActions:[],validActions:[],dispose:function(){},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1}),Pie=function(e){function t(e,n,i,r,o,a,s){var c;return u(this,t),(c=l(this,t))._editor=e,c._registry=n,c._markerService=i,c._progressService=o,c._configurationService=a,c._telemetryService=s,c._codeActionOracle=c._register(new Pu),c._state=Iie.Empty,c._onDidChangeState=c._register(new Zu),c.onDidChangeState=c._onDidChangeState.event,c._disposed=!1,c._supportedCodeActions=Eie.bindTo(r),c._register(c._editor.onDidChangeModel((function(){return c._update()}))),c._register(c._editor.onDidChangeModelLanguage((function(){return c._update()}))),c._register(c._registry.onDidChange((function(){return c._update()}))),c._register(c._editor.onDidChangeConfiguration((function(e){e.hasChanged(65)&&c._update()}))),c._update(),c}return p(t,e),h(t,[{key:"dispose",value:function(){this._disposed||(this._disposed=!0,g(v(t.prototype),"dispose",this).call(this),this.setState(Iie.Empty,!0))}},{key:"_settingEnabledNearbyQuickfixes",value:function(){var e,t=null===(e=this._editor)||void 0===e?void 0:e.getModel();return!!this._configurationService&&this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickFixes",{resource:null==t?void 0:t.uri})}},{key:"_update",value:function(){var e=this;if(!this._disposed){this._codeActionOracle.value=void 0,this.setState(Iie.Empty);var t=this._editor.getModel();if(t&&this._registry.has(t)&&!this._editor.getOption(92)){var n=this._registry.all(t).flatMap((function(e){var t;return null!==(t=e.providedCodeActionKinds)&&void 0!==t?t:[]}));this._supportedCodeActions.set(n.join(" ")),this._codeActionOracle.value=new Tie(this._editor,this._markerService,(function(n){if(n){var i,r=n.selection.getStartPosition(),o=e,a=hg(function(){var e=s((function(e){var i,r,a,s,l,u,c,d,h,f,g,v,p,m,y,_,b,k,w,C,S,L,D,N,I,M,T,R,A,P,O,F,W,B,H,V,z,U,j,K,q,G,Z,Y,Q,X,$,J,ee;return E(this,(function(E){switch(E.label){case 0:return!o._settingEnabledNearbyQuickfixes()||1!==n.trigger.type||n.trigger.triggerAction!==Mne.QuickFix&&!(null===(r=n.trigger.filter)||void 0===r||null===(i=r.include)||void 0===i?void 0:i.contains(Tne.QuickFix))?[3,11]:[4,qne(o._registry,t,n.selection,n.trigger,FA.None,e)];case 1:if(s=E.sent(),l=x(s.allActions),e.isCancellationRequested)return[2,Aie];if(u=null===(a=s.validActions)||void 0===a?void 0:a.some((function(e){return!!e.action.kind&&Tne.QuickFix.contains(new vte(e.action.kind))})),c=o._markerService.read({resource:t.uri}),!u)return[3,2];d=!0,h=!1,f=void 0;try{for(g=s.validActions[Symbol.iterator]();!(d=(v=g.next()).done);d=!0)p=v.value,(null===(y=p.action.command)||void 0===y||null===(m=y.arguments)||void 0===m?void 0:m.some((function(e){return"string"==typeof e&&e.includes(Mie)})))&&(p.action.diagnostics=x(c.filter((function(e){return e.relatedInformation}))))}catch(e){h=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(h)throw f}}return[2,{validActions:s.validActions,allActions:l,documentation:s.documentation,hasAutoFix:s.hasAutoFix,hasAIFix:s.hasAIFix,allAIFixes:s.allAIFixes,dispose:function(){s.dispose()}}];case 2:if(u)return[3,11];if(!(c.length>0))return[3,11];_=n.selection.getPosition(),b=_,k=Number.MAX_VALUE,w=x(s.validActions),C=!0,S=!1,L=void 0,E.label=3;case 3:E.trys.push([3,8,9,10]),D=c[Symbol.iterator](),E.label=4;case 4:return(C=(N=D.next()).done)?[3,7]:(I=N.value,M=I.endColumn,T=I.endLineNumber,R=I.startLineNumber,T!==_.lineNumber&&R!==_.lineNumber?[3,6]:(b=new dd(T,M),F={type:n.trigger.type,triggerAction:n.trigger.triggerAction,filter:{include:(null===(A=n.trigger.filter)||void 0===A?void 0:A.include)?null===(P=n.trigger.filter)||void 0===P?void 0:P.include:Tne.QuickFix},autoApply:n.trigger.autoApply,context:{notAvailableMessage:(null===(O=n.trigger.context)||void 0===O?void 0:O.notAvailableMessage)||"",position:b}},W=new fd(b.lineNumber,b.column,b.lineNumber,b.column),[4,qne(o._registry,t,W,F,FA.None,e)]));case 5:if(0!==(B=E.sent()).validActions.length){H=!0,V=!1,z=void 0;try{for(U=B.validActions[Symbol.iterator]();!(H=(j=U.next()).done);H=!0)K=j.value,(null===(G=K.action.command)||void 0===G||null===(q=G.arguments)||void 0===q?void 0:q.some((function(e){return"string"==typeof e&&e.includes(Mie)})))&&(K.action.diagnostics=x(c.filter((function(e){return e.relatedInformation}))))}catch(e){V=!0,z=e}finally{try{H||null==U.return||U.return()}finally{if(V)throw z}}0===s.allActions.length&&(Z=l).push.apply(Z,x(B.allActions)),Math.abs(_.column-M)<k?(Y=w).unshift.apply(Y,x(B.validActions)):(Q=w).push.apply(Q,x(B.validActions))}k=Math.abs(_.column-M),E.label=6;case 6:return C=!0,[3,4];case 7:return[3,10];case 8:return X=E.sent(),S=!0,L=X,[3,10];case 9:try{C||null==D.return||D.return()}finally{if(S)throw L}return[7];case 10:return $=w.filter((function(e,t,n){return n.findIndex((function(t){return t.action.title===e.action.title}))===t})),$.sort((function(e,t){return e.action.isPreferred&&!t.action.isPreferred?-1:!e.action.isPreferred&&t.action.isPreferred||e.action.isAI&&!t.action.isAI?1:!e.action.isAI&&t.action.isAI?-1:0})),[2,{validActions:$,allActions:l,documentation:s.documentation,hasAutoFix:s.hasAutoFix,hasAIFix:s.hasAIFix,allAIFixes:s.allAIFixes,dispose:function(){s.dispose()}}];case 11:return 1!==n.trigger.type?[3,13]:(J=new Hu,[4,qne(o._registry,t,n.selection,n.trigger,FA.None,e)]);case 12:return ee=E.sent(),o._telemetryService&&o._telemetryService.publicLog2("codeAction.invokedDurations",{codeActions:ee.validActions.length,duration:J.elapsed()}),[2,ee];case 13:return[2,qne(o._registry,t,n.selection,n.trigger,FA.None,e)]}}))}));return function(t){return e.apply(this,arguments)}}());if(1===n.trigger.type)null===(i=e._progressService)||void 0===i||i.showWhile(a,250);var l=new Iie.Triggered(n.trigger,r,a),u=!1;1===e._state.type&&(u=1===e._state.trigger.type&&1===l.type&&2===l.trigger.type&&e._state.position!==l.position),u?setTimeout((function(){e.setState(l)}),500):e.setState(l)}else e.setState(Iie.Empty)}),void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:Mne.Default})}else this._supportedCodeActions.reset()}}},{key:"trigger",value:function(e){var t;null===(t=this._codeActionOracle.value)||void 0===t||t.trigger(e)}},{key:"setState",value:function(e,t){e!==this._state&&(1===this._state.type&&this._state.cancel(),this._state=e,t||this._disposed||this._onDidChangeState.fire(e))}}]),t}(Ru),Oie=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Fie=function(e,t){return function(n,i){t(n,i,e)}},Wie=(Rt=function(e){function t(e,n,i,r,o,a,s,c,d,h,f){var g;return u(this,t),(g=l(this,t))._commandService=s,g._configurationService=c,g._actionWidgetService=d,g._instantiationService=h,g._telemetryService=f,g._activeCodeActions=g._register(new Pu),g._showDisabled=!1,g._disposed=!1,g._editor=e,g._model=g._register(new Pie(g._editor,o.codeActionProvider,n,i,a,c,g._telemetryService)),g._register(g._model.onDidChangeState((function(e){return g.update(e)}))),g._lightBulbWidget=new Vh((function(){var e=g._editor.getContribution(die.ID);return e&&g._register(e.onClick((function(e){return g.showCodeActionsFromLightbulb(e.actions,e)}))),e})),g._resolver=r.createInstance(Jne),g._register(g._editor.onDidLayoutChange((function(){return g._actionWidgetService.hide()}))),g}return p(t,e),h(t,[{key:"dispose",value:function(){this._disposed=!0,g(v(t.prototype),"dispose",this).call(this)}},{key:"showCodeActionsFromLightbulb",value:function(e,t){var n=this;return s((function(){var i,r;return E(this,(function(o){switch(o.label){case 0:return e.allAIFixes&&1===e.validActions.length?(i=e.validActions[0],(r=i.action.command)&&"inlineChat.start"===r.id&&r.arguments&&r.arguments.length>=1&&(r.arguments[0]=b(_({},r.arguments[0]),{autoSend:!1})),[4,n._applyCodeAction(i,!1,!1,Ane.FromAILightbulb)]):[3,2];case 1:case 3:return o.sent(),[2];case 2:return[4,n.showCodeActionList(e,t,{includeDisabledActions:!1,fromLightbulb:!0})]}}))}))()}},{key:"showCodeActions",value:function(e,t,n){return this.showCodeActionList(t,n,{includeDisabledActions:!1,fromLightbulb:!1})}},{key:"manualTriggerAtCurrentPosition",value:function(e,t,n,i){var r;if(this._editor.hasModel()){null===(r=ine.get(this._editor))||void 0===r||r.closeMessage();var o=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:n,autoApply:i,context:{notAvailableMessage:e,position:o}})}}},{key:"_trigger",value:function(e){return this._model.trigger(e)}},{key:"_applyCodeAction",value:function(e,t,n,i){var r=this;return s((function(){return E(this,(function(o){switch(o.label){case 0:return o.trys.push([0,,2,3]),[4,r._instantiationService.invokeFunction(Zne,e,i,{preview:n,editor:r._editor})];case 1:return o.sent(),[3,3];case 2:return t&&r._trigger({type:2,triggerAction:Mne.QuickFix,filter:{}}),[7];case 3:return[2]}}))}))()}},{key:"hideLightBulbWidget",value:function(){var e,t;null===(e=this._lightBulbWidget.rawValue)||void 0===e||e.hide(),null===(t=this._lightBulbWidget.rawValue)||void 0===t||t.gutterHide()}},{key:"update",value:function(e){var t=this;return s((function(){var n,i,r,o,a,s,l,u,c,d;return E(this,(function(h){switch(h.label){case 0:if(1!==e.type)return t.hideLightBulbWidget(),[2];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.actions];case 2:return i=h.sent(),[3,4];case 3:return vu(h.sent()),[2];case 4:if(t._disposed)return[2];if((null==(r=t._editor.getSelection())?void 0:r.startLineNumber)!==e.position.lineNumber)return[2];if(null===(n=t._lightBulbWidget.value)||void 0===n||n.update(i,e.trigger,e.position),1!==e.trigger.type)return[3,11];if(!(null===(o=e.trigger.filter)||void 0===o?void 0:o.include))return[3,10];if(!(s=t.tryGetValidActionToApply(e.trigger,i)))return[3,9];h.label=5;case 5:return h.trys.push([5,,7,8]),t.hideLightBulbWidget(),[4,t._applyCodeAction(s,!1,!1,Ane.FromCodeActions)];case 6:return h.sent(),[3,8];case 7:return i.dispose(),[7];case 8:return[2];case 9:if(e.trigger.context&&(l=t.getInvalidActionThatWouldHaveBeenApplied(e.trigger,i))&&l.action.disabled)return null===(u=ine.get(t._editor))||void 0===u||u.showMessage(l.action.disabled,e.trigger.context.position),i.dispose(),[2];h.label=10;case 10:return c=!!(null===(a=e.trigger.filter)||void 0===a?void 0:a.include),!e.trigger.context||i.allActions.length&&(c||i.validActions.length)?(t._activeCodeActions.value=i,t.showCodeActionList(i,t.toCoords(e.position),{includeDisabledActions:c,fromLightbulb:!1}),[3,12]):(null===(d=ine.get(t._editor))||void 0===d||d.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),t._activeCodeActions.value=i,i.dispose(),[2]);case 11:t._actionWidgetService.isVisible?i.dispose():t._activeCodeActions.value=i,h.label=12;case 12:return[2]}}))}))()}},{key:"getInvalidActionThatWouldHaveBeenApplied",value:function(e,t){if(t.allActions.length)return"first"===e.autoApply&&0===t.validActions.length||"ifSingle"===e.autoApply&&1===t.allActions.length?t.allActions.find((function(e){return e.action.disabled})):void 0}},{key:"tryGetValidActionToApply",value:function(e,t){if(t.validActions.length)return"first"===e.autoApply&&t.validActions.length>0||"ifSingle"===e.autoApply&&1===t.validActions.length?t.validActions[0]:void 0}},{key:"showCodeActionList",value:function(e,t,n){var i=this;return s((function(){var r,o,a,l,u;return E(this,(function(c){return r=i._editor.createDecorationsCollection(),(o=i._editor.getDomNode())&&(a=n.includeDisabledActions&&(i._showDisabled||0===e.validActions.length)?e.allActions:e.validActions).length?(l=dd.isIPosition(t)?i.toCoords(t):t,u={onSelect:function(){var e=s((function(e,t){return E(this,(function(o){return i._applyCodeAction(e,!0,!!t,n.fromLightbulb?Ane.FromAILightbulb:Ane.FromCodeActions),i._actionWidgetService.hide(!1),r.clear(),[2]}))}));return function(t,n){return e.apply(this,arguments)}}(),onHide:function(e){var t;null===(t=i._editor)||void 0===t||t.focus(),r.clear()},onHover:function(){var e=s((function(e,t){var n,i,r,o,a;return E(this,(function(s){return t.isCancellationRequested?[2]:(i=!1,(r=e.action.kind)&&(o=new vte(r),a=[Tne.RefactorExtract,Tne.RefactorInline,Tne.RefactorRewrite,Tne.RefactorMove,Tne.Source],i=a.some((function(e){return e.contains(o)}))),[2,{canPreview:i||!!(null===(n=e.action.edit)||void 0===n?void 0:n.edits.length)}])}))}));return function(t,n){return e.apply(this,arguments)}}(),onFocus:function(e){if(e&&e.action){var t=e.action.ranges,n=e.action.diagnostics;if(r.clear(),t&&t.length>0){var o=n&&(null==n?void 0:n.length)>1?n.map((function(e){return{range:e,options:Rie.DECORATION}})):t.map((function(e){return{range:e,options:Rie.DECORATION}}));r.set(o)}else if(n&&n.length>0){var a=n.map((function(e){return{range:e,options:Rie.DECORATION}}));r.set(a);var s,l,u=n[0];if(u.startLineNumber&&u.startColumn)bR(Xa("editingNewSelection","Context: {0} at line {1} and column {2}.",null===(l=i._editor.getModel())||void 0===l||null===(s=l.getWordAtPosition({lineNumber:u.startLineNumber,column:u.startColumn}))||void 0===s?void 0:s.word,u.startLineNumber,u.startColumn))}}else r.clear()}},i._actionWidgetService.show("codeActionWidget",!0,function(e,t,n){if(!t)return e.map((function(e){var t;return{kind:"action",item:e,group:eie,disabled:!!e.action.disabled,label:e.action.disabled||e.action.title,canPreview:!!(null===(t=e.action.edit)||void 0===t?void 0:t.edits.length)}}));var i=tie.map((function(e){return{group:e,actions:[]}})),r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=u.action.kind?new vte(u.action.kind):vte.None,d=!0,h=!1,f=void 0;try{for(var g,v=i[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;if(p.group.kind.contains(c)){p.actions.push(u);break}}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}var m=[],y=!0,_=!1,b=void 0;try{for(var k,w=i[Symbol.iterator]();!(y=(k=w.next()).done);y=!0){var C=k.value;if(C.actions.length){m.push({kind:"header",group:C.group});var S=!0,x=!1,L=void 0;try{for(var D,N=C.actions[Symbol.iterator]();!(S=(D=N.next()).done);S=!0){var I=D.value,E=C.group;m.push({kind:"action",item:I,group:I.action.isAI?{title:E.title,kind:E.kind,icon:bd.sparkle}:E,label:I.action.title,disabled:!!I.action.disabled,keybinding:n(I.action)})}}catch(e){x=!0,L=e}finally{try{S||null==N.return||N.return()}finally{if(x)throw L}}}}}catch(e){_=!0,b=e}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}return m}(a,i._shouldShowHeaders(),i._resolver.getResolver()),u,l,o,i._getActionBarActions(e,t,n)),[2]):[2]}))}))()}},{key:"toCoords",value:function(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();var t=this._editor.getScrolledVisiblePosition(e),n=xp(this._editor.getDomNode());return{x:n.left+t.left,y:n.top+t.top+t.height}}},{key:"_shouldShowHeaders",value:function(){var e,t=null===(e=this._editor)||void 0===e?void 0:e.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:null==t?void 0:t.uri})}},{key:"_getActionBarActions",value:function(e,t,n){var i=this;if(n.fromLightbulb)return[];var r=e.documentation.map((function(e){var t;return{id:e.id,label:e.title,tooltip:null!==(t=e.tooltip)&&void 0!==t?t:"",class:void 0,enabled:!0,run:function(){var t,n;return(t=i._commandService).executeCommand.apply(t,[e.id].concat(x(null!==(n=e.arguments)&&void 0!==n?n:[])))}}}));return n.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&r.push(this._showDisabled?{id:"hideMoreActions",label:Xa("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:function(){return i._showDisabled=!1,i.showCodeActionList(e,t,n)}}:{id:"showMoreActions",label:Xa("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:function(){return i._showDisabled=!0,i.showCodeActionList(e,t,n)}}),r}}],[{key:"get",value:function(e){return e.getContribution(Rie.ID)}}]),t}(Ru),Rie=Rt,Rt.ID="editor.contrib.codeActionController",Rt.DECORATION=cU.register({description:"quickfix-highlight",className:"quickfix-edit-highlight"}),Rt);function Bie(e){return Sy.regex(Eie.keys()[0],new RegExp("(\\s|^)"+qh(e.value)+"\\b"))}Wie=Rie=Oie([Fie(1,RW),Fie(2,Ky),Fie(3,Gm),Fie(4,wS),Fie(5,WA),Fie(6,ay),Fie(7,qb),Fie(8,Lie),Fie(9,Gm),Fie(10,b_)],Wie),VS((function(e,t){!function(e,n){n&&t.addRule(".monaco-editor ".concat(e," { background-color: ").concat(n,"; }"))}(".quickfix-edit-highlight",e.getColor(bD));var n=e.getColor(wD);n&&t.addRule(".monaco-editor .quickfix-edit-highlight { border: 1px ".concat(RS(e.type)?"dotted":"solid"," ").concat(n,"; box-sizing: border-box; }"))}));var Hie={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:Xa("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:Xa("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[Xa("args.schema.apply.first","Always apply the first returned code action."),Xa("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),Xa("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:Xa("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function Vie(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Mne.Default;if(e.hasModel()){var o=Wie.get(e);null==o||o.manualTriggerAtCurrentPosition(t,r,n,i)}}var zie=function(e){function t(){return u(this,t),l(this,t,[{id:Wne,label:Xa("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:Sy.and(p0.writable,p0.hasCodeActionsProvider),kbOpts:{kbExpr:p0.textInputFocus,primary:2137,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return Vie(t,Xa("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,Mne.QuickFix)}}]),t}(M_),Uie=function(e){function t(){return u(this,t),l(this,t,[{id:Fne,precondition:Sy.and(p0.writable,p0.hasCodeActionsProvider),metadata:{description:"Trigger a code action",args:[{name:"args",schema:Hie}]}}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t,n){var i=Pne.fromUser(n,{kind:vte.Empty,apply:"ifSingle"});return Vie(t,"string"==typeof(null==n?void 0:n.kind)?i.preferred?Xa("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):Xa("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):i.preferred?Xa("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):Xa("editor.action.codeAction.noneMessage","No code actions available"),{include:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}]),t}(E_),jie=function(e){function t(){return u(this,t),l(this,t,[{id:Hne,label:Xa("refactor.label","Refactor..."),alias:"Refactor...",precondition:Sy.and(p0.writable,p0.hasCodeActionsProvider),kbOpts:{kbExpr:p0.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:Sy.and(p0.writable,Bie(Tne.Refactor))},metadata:{description:"Refactor...",args:[{name:"args",schema:Hie}]}}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i=Pne.fromUser(n,{kind:Tne.Refactor,apply:"never"});return Vie(t,"string"==typeof(null==n?void 0:n.kind)?i.preferred?Xa("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",n.kind):Xa("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",n.kind):i.preferred?Xa("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):Xa("editor.action.refactor.noneMessage","No refactorings available"),{include:Tne.Refactor.contains(i.kind)?i.kind:vte.None,onlyIncludePreferredActions:i.preferred},i.apply,Mne.Refactor)}}]),t}(M_),Kie=function(e){function t(){return u(this,t),l(this,t,[{id:Vne,label:Xa("source.label","Source Action..."),alias:"Source Action...",precondition:Sy.and(p0.writable,p0.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:Sy.and(p0.writable,Bie(Tne.Source))},metadata:{description:"Source Action...",args:[{name:"args",schema:Hie}]}}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i=Pne.fromUser(n,{kind:Tne.Source,apply:"never"});return Vie(t,"string"==typeof(null==n?void 0:n.kind)?i.preferred?Xa("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):Xa("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):i.preferred?Xa("editor.action.source.noneMessage.preferred","No preferred source actions available"):Xa("editor.action.source.noneMessage","No source actions available"),{include:Tne.Source.contains(i.kind)?i.kind:vte.None,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply,Mne.SourceAction)}}]),t}(M_),qie=function(e){function t(){return u(this,t),l(this,t,[{id:zne,label:Xa("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:Sy.and(p0.writable,Bie(Tne.SourceOrganizeImports)),kbOpts:{kbExpr:p0.textInputFocus,primary:1581,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return Vie(t,Xa("editor.action.organize.noneMessage","No organize imports action available"),{include:Tne.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",Mne.OrganizeImports)}}]),t}(M_),Gie=function(e){function t(){return u(this,t),l(this,t,[{id:Une,label:Xa("fixAll.label","Fix All"),alias:"Fix All",precondition:Sy.and(p0.writable,Bie(Tne.SourceFixAll))}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return Vie(t,Xa("fixAll.noneMessage","No fix all action available"),{include:Tne.SourceFixAll,includeSourceActions:!0},"ifSingle",Mne.FixAll)}}]),t}(M_),Zie=function(e){function t(){return u(this,t),l(this,t,[{id:Bne,label:Xa("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:Sy.and(p0.writable,Bie(Tne.QuickFix)),kbOpts:{kbExpr:p0.textInputFocus,primary:1625,mac:{primary:2649},weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return Vie(t,Xa("editor.action.autoFix.noneMessage","No auto fixes available"),{include:Tne.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",Mne.AutoFix)}}]),t}(M_);B_(Wie.ID,Wie,3),B_(die.ID,die,4),O_(zie),O_(jie),O_(Kie),O_(qie),O_(Zie),O_(Gie),P_(new Uie),i_.as(lk).registerConfiguration(b(_({},YR),{properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:Xa("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}})),i_.as(lk).registerConfiguration(b(_({},YR),{properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:"boolean",scope:5,description:Xa("includeNearbyQuickFixes","Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic."),default:!0}}})),i_.as(lk).registerConfiguration(b(_({},YR),{properties:{"editor.codeActions.triggerOnFocusChange":{type:"boolean",scope:5,markdownDescription:Xa("triggerOnFocusChange","Enable triggering {0} when {1} is set to {2}. Code Actions must be set to {3} to be triggered for window and focus changes.","`#editor.codeActionsOnSave#`","`#files.autoSave#`","`afterDelay`","`always`"),default:!1}}}));var Yie=function(){function e(){u(this,e),this.lenses=[],this._disposables=new Tu}return h(e,[{key:"dispose",value:function(){this._disposables.dispose()}},{key:"isDisposed",get:function(){return this._disposables.isDisposed}},{key:"add",value:function(e,t){this._disposables.add(e);var n=!0,i=!1,r=void 0;try{for(var o,a=e.lenses[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this.lenses.push({symbol:s,provider:t})}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}]),e}();function Qie(e,t,n){return Xie.apply(this,arguments)}function Xie(){return Xie=s((function(e,t,n){var i,r,o,a;return E(this,(function(l){switch(l.label){case 0:return i=e.ordered(t),r=new Map,o=new Yie,a=i.map(function(){var e=s((function(e,i){var a;return E(this,(function(s){switch(s.label){case 0:r.set(e,i),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Promise.resolve(e.provideCodeLenses(t,n))];case 2:return(a=s.sent())&&o.add(a,e),[3,4];case 3:return pu(s.sent()),[3,4];case 4:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}()),[4,Promise.all(a)];case 1:return l.sent(),o.lenses=o.lenses.sort((function(e,t){return e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:r.get(e.provider)<r.get(t.provider)?-1:r.get(e.provider)>r.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0})),[2,o]}}))})),Xie.apply(this,arguments)}sy.registerCommand("_executeCodeLensProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=C(n,2),o=r[0],a=r[1];Oa(ed.isUri(o)),Oa("number"==typeof a||!a);var s=e.get(wS).codeLensProvider,l=e.get(Qm).getModel(o);if(!l)throw wu();var u=[],c=new Tu;return Qie(s,l,Uu.None).then((function(e){c.add(e);var t=[],n=!0,i=!1,r=void 0;try{for(var o,s=function(){var e=o.value;null==a||Boolean(e.symbol.command)?u.push(e.symbol):a-- >0&&e.provider.resolveCodeLens&&t.push(Promise.resolve(e.provider.resolveCodeLens(l,e.symbol,Uu.None)).then((function(t){return u.push(t||e.symbol)})))},d=e.lenses[Symbol.iterator]();!(n=(o=d.next()).done);n=!0)s()}catch(e){i=!0,r=e}finally{try{n||null==d.return||d.return()}finally{if(i)throw r}}return Promise.all(t)})).then((function(){return u})).finally((function(){setTimeout((function(){return c.dispose()}),100)}))}));var $ie=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Jie=function(e,t){return function(n,i){t(n,i,e)}},ere=Zm("ICodeLensCache"),tre=function e(t,n){u(this,e),this.lineCount=t,this.data=n},nre=function(){function e(t){var n=this;u(this,e),this._fakeProvider=new(function(){function e(){u(this,e)}return h(e,[{key:"provideCodeLenses",value:function(){throw new Error("not supported")}}]),e}()),this._cache=new pw(20,.75);gp(Fh,(function(){return t.remove("codelens/cache",1)}));var i="codelens/cache2",r=t.get(i,1,"{}");this._deserialize(r);var o=Au.filter(t.onWillSaveState,(function(e){return e.reason===OF.SHUTDOWN}));Au.once(o)((function(e){t.store(i,n._serialize(),1,1)}))}return h(e,[{key:"put",value:function(e,t){var n=t.lenses.map((function(e){var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}})),i=new Yie;i.add({lenses:n,dispose:function(){}},this._fakeProvider);var r=new tre(e.getLineCount(),i);this._cache.set(e.uri.toString(),r)}},{key:"get",value:function(e){var t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}},{key:"delete",value:function(e){this._cache.delete(e.uri.toString())}},{key:"_serialize",value:function(){var e=Object.create(null),t=!0,n=!1,i=void 0;try{for(var r,o=this._cache[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=C(r.value,2),s=a[0],l=a[1],u=new Set,c=!0,d=!1,h=void 0;try{for(var f,g=l.data.lenses[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;u.add(v.symbol.range.startLineNumber)}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}e[s]={lineCount:l.lineCount,lines:x(u.values())}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return JSON.stringify(e)}},{key:"_deserialize",value:function(e){try{var t=JSON.parse(e);for(var n in t){var i=t[n],r=[],o=!0,a=!1,s=void 0;try{for(var l,u=i.lines[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r.push({range:new hd(c,1,c,11)})}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var d=new Yie;d.add({lenses:r,dispose:function(){}},this._fakeProvider),this._cache.set(n,new tre(i.lineCount,d))}}catch(e){}}}]),e}();nk(ere,nre=$ie([Jie(0,BF)],nre),1);var ire=function(){function e(t,n,i){u(this,e),this.afterColumn=1073741824,this.afterLineNumber=t,this.heightInPx=n,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}return h(e,[{key:"onComputedHeight",value:function(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}},{key:"isVisible",value:function(){return 0!==this._lastHeight&&this.domNode.hasAttribute("monaco-visible-view-zone")}}]),e}(),rre=function(){function e(t,n){u(this,e),this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=t,this._id="codelens.widget-".concat(e._idPool++),this.updatePosition(n),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}return h(e,[{key:"withCommands",value:function(t,n){this._commands.clear();for(var i=[],r=!1,o=0;o<t.length;o++){var a=t[o];if(a&&(r=!0,a.command)){var s=AE(a.command.title.trim());if(a.command.id){var l="c".concat(e._idPool++);i.push(gm.apply(void 0,["a",{id:l,title:a.command.tooltip,role:"button"}].concat(x(s)))),this._commands.set(l,a.command)}else i.push(gm.apply(void 0,["span",{title:a.command.tooltip}].concat(x(s))));o+1<t.length&&i.push(gm("span",void 0," | "))}}r?(cm.apply(void 0,[this._domNode].concat(x(i))),this._isEmpty&&n&&this._domNode.classList.add("fadein"),this._isEmpty=!1):cm(this._domNode,gm("span",void 0,"no commands"))}},{key:"getCommand",value:function(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}},{key:"getId",value:function(){return this._id}},{key:"getDomNode",value:function(){return this._domNode}},{key:"updatePosition",value:function(e){var t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}},{key:"getPosition",value:function(){return this._widgetPosition||null}}]),e}();rre._idPool=0;var ore=function(){function e(){u(this,e),this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}return h(e,[{key:"addDecoration",value:function(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}},{key:"removeDecoration",value:function(e){this._removeDecorations.push(e)}},{key:"commit",value:function(e){for(var t=e.deltaDecorations(this._removeDecorations,this._addDecorations),n=0,i=t.length;n<i;n++)this._addDecorationsCallbacks[n](t[n])}}]),e}(),are=cU.register({collapseOnReplaceEdit:!0,description:"codelens"}),sre=function(){function e(t,n,i,r,o,a){var s,l=this;u(this,e),this._isDisposed=!1,this._editor=n,this._data=t,this._decorationIds=[];var c=[];this._data.forEach((function(e,t){e.symbol.command&&c.push(e.symbol),i.addDecoration({range:e.symbol.range,options:are},(function(e){return l._decorationIds[t]=e})),s=s?hd.plusRange(s,e.symbol.range):hd.lift(e.symbol.range)})),this._viewZone=new ire(s.startLineNumber-1,o,a),this._viewZoneId=r.addZone(this._viewZone),c.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(c,!1))}return h(e,[{key:"_createContentWidgetIfNecessary",value:function(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new rre(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}},{key:"dispose",value:function(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],null==t||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}},{key:"isDisposed",value:function(){return this._isDisposed}},{key:"isValid",value:function(){var e=this;return this._decorationIds.some((function(t,n){var i=e._editor.getModel().getDecorationRange(t),r=e._data[n].symbol;return!(!i||hd.isEmpty(r.range)!==i.isEmpty())}))}},{key:"updateCodeLensSymbols",value:function(e,t){var n=this;this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((function(e,i){t.addDecoration({range:e.symbol.range,options:are},(function(e){return n._decorationIds[i]=e}))}))}},{key:"updateHeight",value:function(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}},{key:"computeIfNecessary",value:function(e){if(!this._viewZone.isVisible())return null;for(var t=0;t<this._decorationIds.length;t++){var n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}},{key:"updateCommands",value:function(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(var t=0;t<this._data.length;t++){var n=e[t];if(n){var i=this._data[t].symbol;i.command=n.command||i.command}}}},{key:"getCommand",value:function(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}},{key:"getLineNumber",value:function(){var e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}},{key:"update",value:function(e){if(this.isValid()){var t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}]),e}(),lre=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ure=function(e,t){return function(n,i){t(n,i,e)}},cre=(At=function(){function e(t,n,i,r,o,a){var s=this;u(this,e),this._editor=t,this._languageFeaturesService=n,this._commandService=r,this._notificationService=o,this._codeLensCache=a,this._disposables=new Tu,this._localToDispose=new Tu,this._lenses=[],this._oldCodeLensModels=new Tu,this._provideCodeLensDebounce=i.for(n.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=i.for(n.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new Sg((function(){return s._resolveCodeLensesInViewport()}),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel((function(){return s._onModelChange()}))),this._disposables.add(this._editor.onDidChangeModelLanguage((function(){return s._onModelChange()}))),this._disposables.add(this._editor.onDidChangeConfiguration((function(e){(e.hasChanged(50)||e.hasChanged(19)||e.hasChanged(18))&&s._updateLensStyle(),e.hasChanged(17)&&s._onModelChange()}))),this._disposables.add(n.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}return h(e,[{key:"dispose",value:function(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose()}},{key:"_getLayoutInfo",value:function(){var e=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52)),t=this._editor.getOption(19);return(!t||t<5)&&(t=.9*this._editor.getOption(52)|0),{fontSize:t,codeLensHeight:t*e|0}}},{key:"_updateLensStyle",value:function(){var e=this,t=this._getLayoutInfo(),n=t.codeLensHeight,i=t.fontSize,r=this._editor.getOption(18),o=this._editor.getOption(50),a=this._editor.getContainerDomNode().style;a.setProperty("--vscode-editorCodeLens-lineHeight","".concat(n,"px")),a.setProperty("--vscode-editorCodeLens-fontSize","".concat(i,"px")),a.setProperty("--vscode-editorCodeLens-fontFeatureSettings",o.fontFeatureSettings),r&&(a.setProperty("--vscode-editorCodeLens-fontFamily",r),a.setProperty("--vscode-editorCodeLens-fontFamilyDefault",uu.fontFamily)),this._editor.changeViewZones((function(t){var i=!0,r=!1,o=void 0;try{for(var a,s=e._lenses[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){a.value.updateHeight(n,t)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}))}},{key:"_localDispose",value:function(){var e,t,n;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(n=this._currentCodeLensModel)||void 0===n||n.dispose()}},{key:"_onModelChange",value:function(){var e=this;this._localDispose();var t=this._editor.getModel();if(t&&this._editor.getOption(17)&&!t.isTooLargeForTokenization()){var n=this._codeLensCache.get(t);if(n&&this._renderCodeLensSymbols(n),this._languageFeaturesService.codeLensProvider.has(t)){var i=!0,r=!1,o=void 0;try{for(var a,s=this._languageFeaturesService.codeLensProvider.all(t)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if("function"==typeof l.onDidChange){var u=l.onDidChange((function(){return c.schedule()}));this._localToDispose.add(u)}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}var c=new Sg((function(){var n,i=Date.now();null===(n=e._getCodeLensModelPromise)||void 0===n||n.cancel(),e._getCodeLensModelPromise=hg((function(n){return Qie(e._languageFeaturesService.codeLensProvider,t,n)})),e._getCodeLensModelPromise.then((function(n){e._currentCodeLensModel&&e._oldCodeLensModels.add(e._currentCodeLensModel),e._currentCodeLensModel=n,e._codeLensCache.put(t,n);var r=e._provideCodeLensDebounce.update(t,Date.now()-i);c.delay=r,e._renderCodeLensSymbols(n),e._resolveCodeLensesInViewportSoon()}),vu)}),this._provideCodeLensDebounce.get(t));this._localToDispose.add(c),this._localToDispose.add(Mu((function(){return e._resolveCodeLensesScheduler.cancel()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((function(){var t;e._editor.changeDecorations((function(t){e._editor.changeViewZones((function(n){var i=[],r=-1;e._lenses.forEach((function(e){e.isValid()&&r!==e.getLineNumber()?(e.update(n),r=e.getLineNumber()):i.push(e)}));var o=new ore;i.forEach((function(t){t.dispose(o,n),e._lenses.splice(e._lenses.indexOf(t),1)})),o.commit(t)}))})),c.schedule(),e._resolveCodeLensesScheduler.cancel(),null===(t=e._resolveCodeLensesPromise)||void 0===t||t.cancel(),e._resolveCodeLensesPromise=void 0}))),this._localToDispose.add(this._editor.onDidFocusEditorText((function(){c.schedule()}))),this._localToDispose.add(this._editor.onDidBlurEditorText((function(){c.cancel()}))),this._localToDispose.add(this._editor.onDidScrollChange((function(t){t.scrollTopChanged&&e._lenses.length>0&&e._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((function(){e._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(Mu((function(){if(e._editor.getModel()){var t=g3.capture(e._editor);e._editor.changeDecorations((function(t){e._editor.changeViewZones((function(n){e._disposeAllLenses(t,n)}))})),t.restore(e._editor)}else e._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((function(t){if(9===t.target.type){var n=t.target.element;if("SPAN"===(null==n?void 0:n.tagName)&&(n=n.parentElement),"A"===(null==n?void 0:n.tagName)){var i=!0,r=!1,o=void 0;try{for(var a,s=e._lenses[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value.getCommand(n);if(l){var u;(u=e._commandService).executeCommand.apply(u,[l.id].concat(x(l.arguments||[]))).catch((function(t){return e._notificationService.error(t)}));break}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}}}))),c.schedule()}else n&&yg((function(){var i=e._codeLensCache.get(t);n===i&&(e._codeLensCache.delete(t),e._onModelChange())}),3e4,this._localToDispose)}}},{key:"_disposeAllLenses",value:function(e,t){var n=new ore,i=!0,r=!1,o=void 0;try{for(var a,s=this._lenses[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){a.value.dispose(n,t)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}e&&n.commit(e),this._lenses.length=0}},{key:"_renderCodeLensSymbols",value:function(e){var t=this;if(this._editor.hasModel()){var n,i=this._editor.getModel().getLineCount(),r=[],o=!0,a=!1,s=void 0;try{for(var l,u=e.lenses[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=c.symbol.range.startLineNumber;d<1||d>i||(n&&n[n.length-1].symbol.range.startLineNumber===d?n.push(c):(n=[c],r.push(n)))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}if(r.length||this._lenses.length){var h=g3.capture(this._editor),f=this._getLayoutInfo();this._editor.changeDecorations((function(e){t._editor.changeViewZones((function(n){for(var i=new ore,o=0,a=0;a<r.length&&o<t._lenses.length;){var s=r[a][0].symbol.range.startLineNumber,l=t._lenses[o].getLineNumber();l<s?(t._lenses[o].dispose(i,n),t._lenses.splice(o,1)):l===s?(t._lenses[o].updateCodeLensSymbols(r[a],i),a++,o++):(t._lenses.splice(o,0,new sre(r[a],t._editor,i,n,f.codeLensHeight,(function(){return t._resolveCodeLensesInViewportSoon()}))),o++,a++)}for(;o<t._lenses.length;)t._lenses[o].dispose(i,n),t._lenses.splice(o,1);for(;a<r.length;)t._lenses.push(new sre(r[a],t._editor,i,n,f.codeLensHeight,(function(){return t._resolveCodeLensesInViewportSoon()}))),a++;i.commit(e)}))})),h.restore(this._editor)}}}},{key:"_resolveCodeLensesInViewportSoon",value:function(){var e=this._editor.getModel();e&&this._resolveCodeLensesScheduler.schedule()}},{key:"_resolveCodeLensesInViewport",value:function(){var e,t=this;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;var n=this._editor.getModel();if(n){var i=[],r=[];if(this._lenses.forEach((function(e){var t=e.computeIfNecessary(n);t&&(i.push(t),r.push(e))})),0!==i.length){var o=Date.now(),a=hg((function(e){var t=i.map((function(t,i){var o=new Array(t.length),a=t.map((function(t,i){return t.symbol.command||"function"!=typeof t.provider.resolveCodeLens?(o[i]=t.symbol,Promise.resolve(void 0)):Promise.resolve(t.provider.resolveCodeLens(n,t.symbol,e)).then((function(e){o[i]=e}),pu)}));return Promise.all(a).then((function(){e.isCancellationRequested||r[i].isDisposed()||r[i].updateCommands(o)}))}));return Promise.all(t)}));this._resolveCodeLensesPromise=a,this._resolveCodeLensesPromise.then((function(){var e=t._resolveCodeLensesDebounce.update(n,Date.now()-o);t._resolveCodeLensesScheduler.delay=e,t._currentCodeLensModel&&t._codeLensCache.put(n,t._currentCodeLensModel),t._oldCodeLensModels.clear(),a===t._resolveCodeLensesPromise&&(t._resolveCodeLensesPromise=void 0)}),(function(e){vu(e),a===t._resolveCodeLensesPromise&&(t._resolveCodeLensesPromise=void 0)}))}}}},{key:"getModel",value:function(){var e=this;return s((function(){var t;return E(this,(function(n){switch(n.label){case 0:return[4,e._getCodeLensModelPromise];case 1:return n.sent(),[4,e._resolveCodeLensesPromise];case 2:return n.sent(),[2,(null===(t=e._currentCodeLensModel)||void 0===t?void 0:t.isDisposed)?void 0:e._currentCodeLensModel]}}))}))()}}]),e}(),At.ID="css.editor.codeLens",At);B_((cre=lre([ure(1,wS),ure(2,Ix),ure(3,ay),ure(4,rx),ure(5,ere)],cre)).ID,cre,1),O_(function(e){function t(){return u(this,t),l(this,t,[{id:"codelens.showLensesInCurrentLine",precondition:p0.hasCodeLensProvider,label:Xa("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var n,i,r,o,a,s,l,u,c,d,h,f,g,v,p,m,y,_,b;return E(this,(function(k){switch(k.label){case 0:return t.hasModel()?(n=e.get(TU),i=e.get(ay),r=e.get(rx),o=t.getSelection().positionLineNumber,(a=t.getContribution(cre.ID))?[4,a.getModel()]:[2]):[2];case 1:if(!(s=k.sent()))return[2];l=[],u=!0,c=!1,d=void 0;try{for(h=s.lenses[Symbol.iterator]();!(u=(f=h.next()).done);u=!0)(g=f.value).symbol.command&&g.symbol.range.startLineNumber===o&&l.push({label:g.symbol.command.title,command:g.symbol.command})}catch(e){c=!0,d=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}return 0===l.length?[2]:[4,n.pick(l,{canPickMany:!1,placeHolder:Xa("placeHolder","Select a command")})];case 2:return(v=k.sent())?(p=v.command,s.isDisposed?[4,a.getModel()]:[3,4]):[2];case 3:if(m=k.sent(),y=null==m?void 0:m.lenses.find((function(e){var t;return e.symbol.range.startLineNumber===o&&(null===(t=e.symbol.command)||void 0===t?void 0:t.title)===p.title})),!y||!y.symbol.command)return[2];p=y.symbol.command,k.label=4;case 4:return k.trys.push([4,6,,7]),[4,(_=i).executeCommand.apply(_,[p.id].concat(x(p.arguments||[])))];case 5:return k.sent(),[3,7];case 6:return b=k.sent(),r.error(b),[3,7];case 7:return[2]}}))}))()}}]),t}(M_));var dre=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},hre=function(e,t){return function(n,i){t(n,i,e)}},fre=function(){function e(t){u(this,e),this._editorWorkerService=t}return h(e,[{key:"provideDocumentColors",value:function(e,t){var n=this;return s((function(){return E(this,(function(t){return[2,n._editorWorkerService.computeDefaultDocumentColors(e.uri)]}))}))()}},{key:"provideColorPresentations",value:function(e,t,n){var i=t.range,r=t.color,o=r.alpha,a=new XC(new ZC(Math.round(255*r.red),Math.round(255*r.green),Math.round(255*r.blue),o)),s=o?XC.Format.CSS.formatRGB(a):XC.Format.CSS.formatRGBA(a),l=o?XC.Format.CSS.formatHSL(a):XC.Format.CSS.formatHSLA(a),u=o?XC.Format.CSS.formatHex(a):XC.Format.CSS.formatHexA(a),c=[];return c.push({label:s,textEdit:{range:i,text:s}}),c.push({label:l,textEdit:{range:i,text:l}}),c.push({label:u,textEdit:{range:i,text:u}}),c}}]),e}();fre=dre([hre(0,TW)],fre);var gre=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._register(e.colorProvider.register("*",new fre(n))),i}return p(t,e),t}(Ru);function vre(e,t,n){return pre.apply(this,arguments)}function pre(){return pre=s((function(e,t,n){var i,r=arguments;return E(this,(function(o){return i=!(r.length>3&&void 0!==r[3])||r[3],[2,kre(new yre,e,t,n,i)]}))})),pre.apply(this,arguments)}function mre(e,t,n,i){return Promise.resolve(n.provideColorPresentations(e,t,i))}jY(gre=dre([hre(0,wS),hre(1,TW)],gre));var yre=function(){function e(){u(this,e)}return h(e,[{key:"compute",value:function(e,t,n,i){return s((function(){var r,o,a,s,l,u,c;return E(this,(function(d){switch(d.label){case 0:return[4,e.provideDocumentColors(t,n)];case 1:if(r=d.sent(),Array.isArray(r)){o=!0,a=!1,s=void 0;try{for(l=r[Symbol.iterator]();!(o=(u=l.next()).done);o=!0)c=u.value,i.push({colorInfo:c,provider:e})}catch(e){a=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}}return[2,Array.isArray(r)]}}))}))()}}]),e}(),_re=function(){function e(){u(this,e)}return h(e,[{key:"compute",value:function(e,t,n,i){return s((function(){var r,o,a,s,l,u,c;return E(this,(function(d){switch(d.label){case 0:return[4,e.provideDocumentColors(t,n)];case 1:if(r=d.sent(),Array.isArray(r)){o=!0,a=!1,s=void 0;try{for(l=r[Symbol.iterator]();!(o=(u=l.next()).done);o=!0)c=u.value,i.push({range:c.range,color:[c.color.red,c.color.green,c.color.blue,c.color.alpha]})}catch(e){a=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}}return[2,Array.isArray(r)]}}))}))()}}]),e}(),bre=function(){function e(t){u(this,e),this.colorInfo=t}return h(e,[{key:"compute",value:function(e,t,n,i){var r=this;return s((function(){var n,o;return E(this,(function(a){switch(a.label){case 0:return[4,e.provideColorPresentations(t,r.colorInfo,Uu.None)];case 1:return n=a.sent(),Array.isArray(n)&&(o=i).push.apply(o,x(n)),[2,Array.isArray(n)]}}))}))()}}]),e}();function kre(e,t,n,i,r){return wre.apply(this,arguments)}function wre(){return wre=s((function(e,t,n,i,r){var o,a,s,l,u,c;return E(this,(function(d){switch(d.label){case 0:o=!1,s=[],l=t.ordered(n),u=l.length-1,d.label=1;case 1:return u>=0?(c=l[u])instanceof fre?(a=c,[3,5]):[3,2]:[3,6];case 2:return d.trys.push([2,4,,5]),[4,e.compute(c,n,i,s)];case 3:return d.sent()&&(o=!0),[3,5];case 4:return pu(d.sent()),[3,5];case 5:return u--,[3,1];case 6:return o?[2,s]:a&&r?[4,e.compute(a,n,i,s)]:[3,8];case 7:return d.sent(),[2,s];case 8:return[2,[]]}}))})),wre.apply(this,arguments)}function Cre(e,t){var n=e.get(wS).colorProvider,i=e.get(Qm).getModel(t);if(!i)throw wu();return{model:i,colorProviderRegistry:n,isDefaultColorDecoratorsEnabled:e.get(qb).getValue("editor.defaultColorDecorators",{resource:t})}}sy.registerCommand("_executeDocumentColorProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=C(n,1)[0];if(!(r instanceof ed))throw wu();var o=Cre(e,r),a=o.model,s=o.colorProviderRegistry,l=o.isDefaultColorDecoratorsEnabled;return kre(new _re,s,a,Uu.None,l)})),sy.registerCommand("_executeColorPresentationProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=C(n,2),o=r[0],a=r[1],s=a.uri,l=a.range;if(!(s instanceof ed&&Array.isArray(o)&&4===o.length&&hd.isIRange(l)))throw wu();var u=Cre(e,s),c=u.model,d=u.colorProviderRegistry,h=u.isDefaultColorDecoratorsEnabled,f=C(o,4),g=f[0],v=f[1],p=f[2],m=f[3];return kre(new bre({range:l,color:{red:g,green:v,blue:p,alpha:m}}),d,c,Uu.None,h)}));var Sre,xre=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Lre=function(e,t){return function(n,i){t(n,i,e)}},Dre=Object.create({}),Nre=(Pt=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t))._editor=e,o._configurationService=n,o._languageFeaturesService=i,o._localToDispose=o._register(new Tu),o._decorationsIds=[],o._colorDatas=new Map,o._colorDecoratorIds=o._editor.createDecorationsCollection(),o._ruleFactory=new ZX(o._editor),o._decoratorLimitReporter=new Ire,o._colorDecorationClassRefs=o._register(new Tu),o._debounceInformation=r.for(i.colorProvider,"Document Colors",{min:Sre.RECOMPUTE_TIME}),o._register(e.onDidChangeModel((function(){o._isColorDecoratorsEnabled=o.isEnabled(),o.updateColors()}))),o._register(e.onDidChangeModelLanguage((function(){return o.updateColors()}))),o._register(i.colorProvider.onDidChange((function(){return o.updateColors()}))),o._register(e.onDidChangeConfiguration((function(e){var t=o._isColorDecoratorsEnabled;o._isColorDecoratorsEnabled=o.isEnabled(),o._isDefaultColorDecoratorsEnabled=o._editor.getOption(148);var n=t!==o._isColorDecoratorsEnabled||e.hasChanged(21),i=e.hasChanged(148);(n||i)&&(o._isColorDecoratorsEnabled?o.updateColors():o.removeAllDecorations())}))),o._timeoutTimer=null,o._computePromise=null,o._isColorDecoratorsEnabled=o.isEnabled(),o._isDefaultColorDecoratorsEnabled=o._editor.getOption(148),o.updateColors(),o}return p(t,e),h(t,[{key:"isEnabled",value:function(){var e=this._editor.getModel();if(!e)return!1;var t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&"object"===(void 0===n?"undefined":L(n))){var i=n.colorDecorators;if(i&&void 0!==i.enable&&!i.enable)return i.enable}return this._editor.getOption(20)}},{key:"dispose",value:function(){this.stop(),this.removeAllDecorations(),g(v(t.prototype),"dispose",this).call(this)}},{key:"updateColors",value:function(){var e=this;if(this.stop(),this._isColorDecoratorsEnabled){var t=this._editor.getModel();t&&this._languageFeaturesService.colorProvider.has(t)&&(this._localToDispose.add(this._editor.onDidChangeModelContent((function(){e._timeoutTimer||(e._timeoutTimer=new wg,e._timeoutTimer.cancelAndSet((function(){e._timeoutTimer=null,e.beginCompute()}),e._debounceInformation.get(t)))}))),this.beginCompute())}}},{key:"beginCompute",value:function(){var e=this;return s((function(){var t;return E(this,(function(n){switch(n.label){case 0:e._computePromise=hg(function(){var t=s((function(t){var n,i,r;return E(this,(function(o){switch(o.label){case 0:return(n=e._editor.getModel())?(i=new Hu(!1),[4,vre(e._languageFeaturesService.colorProvider,n,t,e._isDefaultColorDecoratorsEnabled)]):[2,[]];case 1:return r=o.sent(),e._debounceInformation.update(n,i.elapsed()),[2,r]}}))}));return function(e){return t.apply(this,arguments)}}()),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e._computePromise];case 2:return t=n.sent(),e.updateDecorations(t),e.updateColorDecorators(t),e._computePromise=null,[3,4];case 3:return vu(n.sent()),[3,4];case 4:return[2]}}))}))()}},{key:"stop",value:function(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}},{key:"updateDecorations",value:function(e){var t=this,n=e.map((function(e){return{range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:cU.EMPTY}}));this._editor.changeDecorations((function(i){t._decorationsIds=i.deltaDecorations(t._decorationsIds,n),t._colorDatas=new Map,t._decorationsIds.forEach((function(n,i){return t._colorDatas.set(n,e[i])}))}))}},{key:"updateColorDecorators",value:function(e){this._colorDecorationClassRefs.clear();for(var t=[],n=this._editor.getOption(21),i=0;i<e.length&&t.length<n;i++){var r=e[i].colorInfo.color,o=r.red,a=r.green,s=r.blue,l=r.alpha,u=new ZC(Math.round(255*o),Math.round(255*a),Math.round(255*s),l),c="rgba(".concat(u.r,", ").concat(u.g,", ").concat(u.b,", ").concat(u.a,")"),d=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:c}));t.push({range:{startLineNumber:e[i].colorInfo.range.startLineNumber,startColumn:e[i].colorInfo.range.startColumn,endLineNumber:e[i].colorInfo.range.endLineNumber,endColumn:e[i].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:" ",inlineClassName:"".concat(d.className," colorpicker-color-decoration"),inlineClassNameAffectsLetterSpacing:!0,attachedData:Dre}}})}var h=n<e.length&&n;this._decoratorLimitReporter.update(e.length,h),this._colorDecoratorIds.set(t)}},{key:"removeAllDecorations",value:function(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}},{key:"getColorData",value:function(e){var t=this,n=this._editor.getModel();if(!n)return null;var i=n.getDecorationsInRange(hd.fromPositions(e,e)).filter((function(e){return t._colorDatas.has(e.id)}));return 0===i.length?null:this._colorDatas.get(i[0].id)}},{key:"isColorDecoration",value:function(e){return this._colorDecoratorIds.has(e)}}],[{key:"get",value:function(e){return e.getContribution(this.ID)}}]),t}(Ru),Sre=Pt,Pt.ID="editor.contrib.colorDetector",Pt.RECOMPUTE_TIME=1e3,Pt);Nre=Sre=xre([Lre(1,qb),Lre(2,wS),Lre(3,Ix)],Nre);var Ire=function(){function e(){u(this,e),this._onDidChange=new Zu,this._computed=0,this._limited=!1}return h(e,[{key:"update",value:function(e,t){e===this._computed&&t===this._limited||(this._computed=e,this._limited=t,this._onDidChange.fire())}}]),e}();B_(Nre.ID,Nre,1);var Ere=function(){function e(t,n,i){u(this,e),this.presentationIndex=i,this._onColorFlushed=new Zu,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new Zu,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new Zu,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=t,this._color=t,this._colorPresentations=n}return h(e,[{key:"color",get:function(){return this._color},set:function(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}},{key:"presentation",get:function(){return this.colorPresentations[this.presentationIndex]}},{key:"colorPresentations",get:function(){return this._colorPresentations},set:function(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}},{key:"selectNextColorPresentation",value:function(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}},{key:"guessColorPresentation",value:function(e,t){for(var n=-1,i=0;i<this.colorPresentations.length;i++)if(t.toLowerCase()===this.colorPresentations[i].label){n=i;break}if(-1===n)for(var r=t.split("(")[0].toLowerCase(),o=0;o<this.colorPresentations.length;o++)if(this.colorPresentations[o].label.toLowerCase().startsWith(r)){n=o;break}-1!==n&&n!==this.presentationIndex&&(this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation))}},{key:"flushColor",value:function(){this._onColorFlushed.fire(this._color)}}]),e}(),Mre=gm,Tre=function(e){function t(e,n,i){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];u(this,t),(r=l(this,t)).model=n,r.showingStandaloneColorPicker=o,r._closeButton=null,r._domNode=Mre(".colorpicker-header"),lm(e,r._domNode),r._pickedColorNode=lm(r._domNode,Mre(".picked-color")),lm(r._pickedColorNode,Mre("span.codicon.codicon-color-mode")),r._pickedColorPresentation=lm(r._pickedColorNode,document.createElement("span")),r._pickedColorPresentation.classList.add("picked-color-presentation");var a=Xa("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");return r._pickedColorNode.setAttribute("title",a),r._originalColorNode=lm(r._domNode,Mre(".original-color")),r._originalColorNode.style.backgroundColor=XC.Format.CSS.format(r.model.originalColor)||"",r.backgroundColor=i.getColorTheme().getColor(SD)||XC.white,r._register(i.onDidColorThemeChange((function(e){r.backgroundColor=e.getColor(SD)||XC.white}))),r._register(cp(r._pickedColorNode,rm.CLICK,(function(){return r.model.selectNextColorPresentation()}))),r._register(cp(r._originalColorNode,rm.CLICK,(function(){r.model.color=r.model.originalColor,r.model.flushColor()}))),r._register(n.onDidChangeColor(r.onDidChangeColor,r)),r._register(n.onDidChangePresentation(r.onDidChangePresentation,r)),r._pickedColorNode.style.backgroundColor=XC.Format.CSS.format(n.color)||"",r._pickedColorNode.classList.toggle("light",n.color.rgba.a<.5?r.backgroundColor.isLighter():n.color.isLighter()),r.onDidChangeColor(r.model.color),r.showingStandaloneColorPicker&&(r._domNode.classList.add("standalone-colorpicker"),r._closeButton=r._register(new Rre(r._domNode))),r}return p(t,e),h(t,[{key:"closeButton",get:function(){return this._closeButton}},{key:"pickedColorNode",get:function(){return this._pickedColorNode}},{key:"originalColorNode",get:function(){return this._originalColorNode}},{key:"onDidChangeColor",value:function(e){this._pickedColorNode.style.backgroundColor=XC.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}},{key:"onDidChangePresentation",value:function(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}]),t}(Ru),Rre=function(e){function t(e){var n;u(this,t),(n=l(this,t))._onClicked=n._register(new Zu),n.onClicked=n._onClicked.event,n._button=document.createElement("div"),n._button.classList.add("close-button"),lm(e,n._button);var i=document.createElement("div");return i.classList.add("close-button-inner-div"),lm(n._button,i),lm(i,Mre(".button"+ny.asCSSSelector(IZ("color-picker-close",bd.close,Xa("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),n._register(cp(n._button,rm.CLICK,(function(){n._onClicked.fire()}))),n}return p(t,e),t}(Ru),Are=function(e){function t(e,n,i){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return u(this,t),(r=l(this,t)).model=n,r.pixelRatio=i,r._insertButton=null,r._domNode=Mre(".colorpicker-body"),lm(e,r._domNode),r._saturationBox=new Pre(r._domNode,r.model,r.pixelRatio),r._register(r._saturationBox),r._register(r._saturationBox.onDidChange(r.onDidSaturationValueChange,r)),r._register(r._saturationBox.onColorFlushed(r.flushColor,r)),r._opacityStrip=new Fre(r._domNode,r.model,o),r._register(r._opacityStrip),r._register(r._opacityStrip.onDidChange(r.onDidOpacityChange,r)),r._register(r._opacityStrip.onColorFlushed(r.flushColor,r)),r._hueStrip=new Wre(r._domNode,r.model,o),r._register(r._hueStrip),r._register(r._hueStrip.onDidChange(r.onDidHueChange,r)),r._register(r._hueStrip.onColorFlushed(r.flushColor,r)),o&&(r._insertButton=r._register(new Bre(r._domNode)),r._domNode.classList.add("standalone-colorpicker")),r}return p(t,e),h(t,[{key:"flushColor",value:function(){this.model.flushColor()}},{key:"onDidSaturationValueChange",value:function(e){var t=e.s,n=e.v,i=this.model.color.hsva;this.model.color=new XC(new QC(i.h,t,n,i.a))}},{key:"onDidOpacityChange",value:function(e){var t=this.model.color.hsva;this.model.color=new XC(new QC(t.h,t.s,t.v,e))}},{key:"onDidHueChange",value:function(e){var t=this.model.color.hsva,n=360*(1-e);this.model.color=new XC(new QC(360===n?0:n,t.s,t.v,t.a))}},{key:"domNode",get:function(){return this._domNode}},{key:"saturationBox",get:function(){return this._saturationBox}},{key:"enterButton",get:function(){return this._insertButton}},{key:"layout",value:function(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}]),t}(Ru),Pre=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t)).model=n,r.pixelRatio=i,r._onDidChange=new Zu,r.onDidChange=r._onDidChange.event,r._onColorFlushed=new Zu,r.onColorFlushed=r._onColorFlushed.event,r._domNode=Mre(".saturation-wrap"),lm(e,r._domNode),r._canvas=document.createElement("canvas"),r._canvas.className="saturation-box",lm(r._domNode,r._canvas),r.selection=Mre(".saturation-selection"),lm(r._domNode,r.selection),r.layout(),r._register(cp(r._domNode,rm.POINTER_DOWN,(function(e){return r.onPointerDown(e)}))),r._register(r.model.onDidChangeColor(r.onDidChangeColor,r)),r.monitor=null,r}return p(t,e),h(t,[{key:"domNode",get:function(){return this._domNode}},{key:"onPointerDown",value:function(e){var t=this;if(e.target&&e.target instanceof Element){this.monitor=this._register(new YI);var n=xp(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,(function(e){return t.onDidChangePosition(e.pageX-n.left,e.pageY-n.top)}),(function(){return null}));var i=cp(e.target.ownerDocument,rm.POINTER_UP,(function(){t._onColorFlushed.fire(),i.dispose(),t.monitor&&(t.monitor.stopMonitoring(!0),t.monitor=null)}),!0)}}},{key:"onDidChangePosition",value:function(e,t){var n=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,i),this._onDidChange.fire({s:n,v:i})}},{key:"layout",value:function(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();var e=this.model.color.hsva;this.paintSelection(e.s,e.v)}},{key:"paint",value:function(){var e=this.model.color.hsva,t=new XC(new QC(e.h,1,1,1)),n=this._canvas.getContext("2d"),i=n.createLinearGradient(0,0,this._canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");var r=n.createLinearGradient(0,0,0,this._canvas.height);r.addColorStop(0,"rgba(0, 0, 0, 0)"),r.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this._canvas.width,this._canvas.height),n.fillStyle=XC.Format.CSS.format(t),n.fill(),n.fillStyle=i,n.fill(),n.fillStyle=r,n.fill()}},{key:"paintSelection",value:function(e,t){this.selection.style.left="".concat(e*this.width,"px"),this.selection.style.top="".concat(this.height-t*this.height,"px")}},{key:"onDidChangeColor",value:function(e){if(!this.monitor||!this.monitor.isMonitoring()){this.paint();var t=e.hsva;this.paintSelection(t.s,t.v)}}}]),t}(Ru),Ore=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return u(this,t),(i=l(this,t)).model=n,i._onDidChange=new Zu,i.onDidChange=i._onDidChange.event,i._onColorFlushed=new Zu,i.onColorFlushed=i._onColorFlushed.event,r?(i.domNode=lm(e,Mre(".standalone-strip")),i.overlay=lm(i.domNode,Mre(".standalone-overlay"))):(i.domNode=lm(e,Mre(".strip")),i.overlay=lm(i.domNode,Mre(".overlay"))),i.slider=lm(i.domNode,Mre(".slider")),i.slider.style.top="0px",i._register(cp(i.domNode,rm.POINTER_DOWN,(function(e){return i.onPointerDown(e)}))),i._register(n.onDidChangeColor(i.onDidChangeColor,i)),i.layout(),i}return p(t,e),h(t,[{key:"layout",value:function(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;var e=this.getValue(this.model.color);this.updateSliderPosition(e)}},{key:"onDidChangeColor",value:function(e){var t=this.getValue(e);this.updateSliderPosition(t)}},{key:"onPointerDown",value:function(e){var t=this;if(e.target&&e.target instanceof Element){var n=this._register(new YI),i=xp(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),n.startMonitoring(e.target,e.pointerId,e.buttons,(function(e){return t.onDidChangeTop(e.pageY-i.top)}),(function(){return null}));var r=cp(e.target.ownerDocument,rm.POINTER_UP,(function(){t._onColorFlushed.fire(),r.dispose(),n.stopMonitoring(!0),t.domNode.classList.remove("grabbing")}),!0)}}},{key:"onDidChangeTop",value:function(e){var t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}},{key:"updateSliderPosition",value:function(e){this.slider.style.top="".concat((1-e)*this.height,"px")}}]),t}(Ru),Fre=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return u(this,t),(i=l(this,t,[e,n,r])).domNode.classList.add("opacity-strip"),i.onDidChangeColor(i.model.color),i}return p(t,e),h(t,[{key:"onDidChangeColor",value:function(e){g(v(t.prototype),"onDidChangeColor",this).call(this,e);var n=e.rgba,i=n.r,r=n.g,o=n.b,a=new XC(new ZC(i,r,o,1)),s=new XC(new ZC(i,r,o,0));this.overlay.style.background="linear-gradient(to bottom, ".concat(a," 0%, ").concat(s," 100%)")}},{key:"getValue",value:function(e){return e.hsva.a}}]),t}(Ore),Wre=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return u(this,t),(i=l(this,t,[e,n,r])).domNode.classList.add("hue-strip"),i}return p(t,e),h(t,[{key:"getValue",value:function(e){return 1-e.hsva.h/360}}]),t}(Ore),Bre=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._onClicked=n._register(new Zu),n.onClicked=n._onClicked.event,n._button=lm(e,document.createElement("button")),n._button.classList.add("insert-button"),n._button.textContent="Insert",n._register(cp(n._button,rm.CLICK,(function(){n._onClicked.fire()}))),n}return p(t,e),h(t,[{key:"button",get:function(){return this._button}}]),t}(Ru),Hre=function(e){function t(e,n,i,r){var o,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return u(this,t),(o=l(this,t)).model=n,o.pixelRatio=i,o._register(Tm.getInstance(ep(e)).onDidChange((function(){return o.layout()}))),o._domNode=Mre(".colorpicker-widget"),e.appendChild(o._domNode),o.header=o._register(new Tre(o._domNode,o.model,r,a)),o.body=o._register(new Are(o._domNode,o.model,o.pixelRatio,a)),o}return p(t,e),h(t,[{key:"layout",value:function(){this.body.layout()}},{key:"domNode",get:function(){return this._domNode}}]),t}(eE),Vre=function(){function e(t,n,i,r){u(this,e),this.priority=t,this.range=n,this.initialMousePosX=i,this.initialMousePosY=r,this.type=1}return h(e,[{key:"equals",value:function(e){return 1===e.type&&this.range.equalsRange(e.range)}},{key:"canAdoptVisibleHover",value:function(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}}]),e}(),zre=function(){function e(t,n,i,r,o,a){u(this,e),this.priority=t,this.owner=n,this.range=i,this.initialMousePosX=r,this.initialMousePosY=o,this.supportsMarkerHover=a,this.type=2}return h(e,[{key:"equals",value:function(e){return 2===e.type&&this.owner===e.owner}},{key:"canAdoptVisibleHover",value:function(e,t){return 2===e.type&&this.owner===e.owner}}]),e}(),Ure=function(){function e(t){u(this,e),this.renderedHoverParts=t}return h(e,[{key:"dispose",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.renderedHoverParts[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.dispose()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}}]),e}(),jre=new(function(){function e(){u(this,e),this._participants=[]}return h(e,[{key:"register",value:function(e){this._participants.push(e)}},{key:"getAll",value:function(){return this._participants}}]),e}()),Kre=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},qre=function(e,t){return function(n,i){t(n,i,e)}},Gre=function(){function e(t,n,i,r){u(this,e),this.owner=t,this.range=n,this.model=i,this.provider=r,this.forceShowAtRange=!0}return h(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}]),e}(),Zre=function(){function e(t,n){u(this,e),this._editor=t,this._themeService=n,this.hoverOrdinal=2}return h(e,[{key:"computeSync",value:function(e,t){return[]}},{key:"computeAsync",value:function(e,t,n){return Eg.fromPromise(this._computeAsync(e,t,n))}},{key:"_computeAsync",value:function(e,t,n){var i=this;return s((function(){var e,n,r,o,a,s,l,u,c;return E(this,(function(d){switch(d.label){case 0:if(!i._editor.hasModel())return[2,[]];if(!(e=Nre.get(i._editor)))return[2,[]];n=!0,r=!1,o=void 0,d.label=1;case 1:d.trys.push([1,6,7,8]),a=t[Symbol.iterator](),d.label=2;case 2:return(n=(s=a.next()).done)?[3,5]:(l=s.value,e.isColorDecoration(l)&&(u=e.getColorData(l.range.getStartPosition()))?[4,Xre(i,i._editor.getModel(),u.colorInfo,u.provider)]:[3,4]);case 3:return[2,[d.sent()]];case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return c=d.sent(),r=!0,o=c,[3,8];case 7:try{n||null==a.return||a.return()}finally{if(r)throw o}return[7];case 8:return[2,[]]}}))}))()}},{key:"renderHoverParts",value:function(e,t){var n=Jre(this,this._editor,this._themeService,t,e);if(!n)return new Ure([]);this._colorPicker=n.colorPicker;var i={hoverPart:n.hoverPart,hoverElement:this._colorPicker.domNode,dispose:function(){n.disposables.dispose()}};return new Ure([i])}},{key:"handleResize",value:function(){var e;null===(e=this._colorPicker)||void 0===e||e.layout()}},{key:"isColorPickerVisible",value:function(){return!!this._colorPicker}}]),e}();Zre=Kre([qre(1,PS)],Zre);var Yre=function e(t,n,i,r){u(this,e),this.owner=t,this.range=n,this.model=i,this.provider=r},Qre=function(){function e(t,n){u(this,e),this._editor=t,this._themeService=n,this._color=null}return h(e,[{key:"createColorHover",value:function(e,t,n){var i=this;return s((function(){var r,o,a,s,l,u,c,d,h,f,g,v,p,m;return E(this,(function(y){switch(y.label){case 0:return i._editor.hasModel()&&Nre.get(i._editor)?[4,vre(n,i._editor.getModel(),Uu.None)]:[2,null];case 1:r=y.sent(),o=null,a=null,s=!0,l=!1,u=void 0;try{for(c=r[Symbol.iterator]();!(s=(d=c.next()).done);s=!0)h=d.value,f=h.colorInfo,hd.containsRange(f.range,e.range)&&(o=f,a=h.provider)}catch(e){l=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(l)throw u}}return g=null!=o?o:e,v=null!=a?a:t,p=!!o,m={},[4,Xre(i,i._editor.getModel(),g,v)];case 2:return[2,(m.colorHover=y.sent(),m.foundInEditor=p,m)]}}))}))()}},{key:"updateEditorModel",value:function(e){var t=this;return s((function(){var n,i;return E(this,(function(r){switch(r.label){case 0:return t._editor.hasModel()?(n=e.model,i=new hd(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn),t._color?[4,toe(t._editor.getModel(),n,t._color,i,e)]:[3,2]):[2];case 1:r.sent(),i=eoe(t._editor,i,n),r.label=2;case 2:return[2]}}))}))()}},{key:"renderHoverParts",value:function(e,t){return Jre(this,this._editor,this._themeService,t,e)}},{key:"color",get:function(){return this._color},set:function(e){this._color=e}}]),e}();function Xre(e,t,n,i){return $re.apply(this,arguments)}function $re(){return $re=s((function(e,t,n,i){var r,o,a,s,l,u,c,d,h,f;return E(this,(function(g){switch(g.label){case 0:return r=t.getValueInRange(n.range),o=n.color,a=o.red,s=o.green,l=o.blue,u=o.alpha,c=new ZC(Math.round(255*a),Math.round(255*s),Math.round(255*l),u),d=new XC(c),[4,mre(t,n,i,Uu.None)];case 1:return h=g.sent(),(f=new Ere(d,[],0)).colorPresentations=h||[],f.guessColorPresentation(d,r),e instanceof Zre?[2,new Gre(e,hd.lift(n.range),f,i)]:[2,new Yre(e,hd.lift(n.range),f,i)]}}))})),$re.apply(this,arguments)}function Jre(e,t,n,i,r){if(0!==i.length&&t.hasModel()){if(r.setMinimumDimensions){var o=t.getOption(67)+8;r.setMinimumDimensions(new Cp(302,o))}var a=new Tu,l=i[0],u=t.getModel(),c=l.model,d=a.add(new Hre(r.fragment,c,t.getOption(144),n,e instanceof Qre)),h=!1,f=new hd(l.range.startLineNumber,l.range.startColumn,l.range.endLineNumber,l.range.endColumn);if(e instanceof Qre){var g=l.model.color;e.color=g,toe(u,c,g,f,l),a.add(c.onColorFlushed((function(t){e.color=t})))}else a.add(c.onColorFlushed(function(){var e=s((function(e){return E(this,(function(n){switch(n.label){case 0:return[4,toe(u,c,e,f,l)];case 1:return n.sent(),h=!0,f=eoe(t,f,c),[2]}}))}));return function(t){return e.apply(this,arguments)}}()));return a.add(c.onDidChangeColor((function(e){toe(u,c,e,f,l)}))),a.add(t.onDidChangeModelContent((function(e){h?h=!1:(r.hide(),t.focus())}))),{hoverPart:l,colorPicker:d,disposables:a}}}function eoe(e,t,n){var i,r,o=[],a=null!==(i=n.presentation.textEdit)&&void 0!==i?i:{range:t,text:n.presentation.label,forceMoveMarkers:!1};(o.push(a),n.presentation.additionalTextEdits)&&(r=o).push.apply(r,x(n.presentation.additionalTextEdits));var s,l=hd.lift(a.range),u=e.getModel()._setTrackedRange(null,l,3);return e.executeEdits("colorpicker",o),e.pushUndoStop(),null!==(s=e.getModel()._getTrackedRange(u))&&void 0!==s?s:l}function toe(e,t,n,i,r){return noe.apply(this,arguments)}function noe(){return noe=s((function(e,t,n,i,r){var o;return E(this,(function(a){switch(a.label){case 0:return[4,mre(e,{range:i,color:{red:n.rgba.r/255,green:n.rgba.g/255,blue:n.rgba.b/255,alpha:n.rgba.a}},r.provider,Uu.None)];case 1:return o=a.sent(),t.colorPresentations=o||[],[2]}}))})),noe.apply(this,arguments)}Qre=Kre([qre(1,PS)],Qre);var ioe,roe="editor.action.showHover",ooe="editor.action.increaseHoverVerbosityLevel",aoe=Xa({key:"increaseHoverVerbosityLevel",comment:["Label for action that will increase the hover verbosity level."]},"Increase Hover Verbosity Level"),soe="editor.action.decreaseHoverVerbosityLevel",loe=Xa({key:"decreaseHoverVerbosityLevel",comment:["Label for action that will decrease the hover verbosity level."]},"Decrease Hover Verbosity Level"),uoe="editor.action.inlineSuggest.commit",coe="editor.action.inlineSuggest.showPrevious",doe="editor.action.inlineSuggest.showNext",hoe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},foe=function(e,t){return function(n,i){t(n,i,e)}},goe=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t)).editor=e,r.model=n,r.instantiationService=i,r.alwaysShowToolbar=rO(r,r.editor.onDidChangeConfiguration,(function(){return"always"===r.editor.getOption(62).showToolbar})),r.sessionPosition=void 0,r.position=UP(r,(function(e){var t,n,i=null===(t=r.model.read(e))||void 0===t?void 0:t.primaryGhostText.read(e);if(!r.alwaysShowToolbar.read(e)||!i||0===i.parts.length)return r.sessionPosition=void 0,null;var o,a=i.parts[0].column;r.sessionPosition&&r.sessionPosition.lineNumber!==i.lineNumber&&(r.sessionPosition=void 0);var s=new dd(i.lineNumber,Math.min(a,null!==(o=null===(n=r.sessionPosition)||void 0===n?void 0:n.column)&&void 0!==o?o:Number.MAX_SAFE_INTEGER));return r.sessionPosition=s,s})),r._register(eO((function(t,n){var i=r.model.read(t);if(i&&r.alwaysShowToolbar.read(t)){var o=GP((function(t,n){var o=n.add(r.instantiationService.createInstance(moe,r.editor,!0,r.position,i.selectedInlineCompletionIndex,i.inlineCompletionsCount,i.activeCommands));return e.addContentWidget(o),n.add(Mu((function(){return e.removeContentWidget(o)}))),n.add(XP((function(e){r.position.read(e)&&i.lastTriggerKind.read(e)!==_d.Explicit&&i.triggerExplicitly()}))),o})),a=hO(r,(function(e,t){return!!r.position.read(e)||!!t}));n.add(XP((function(e){a.read(e)&&o.read(e)})))}}))),r}return p(t,e),t}(Ru);goe=hoe([foe(2,Gm)],goe);var voe=IZ("inline-suggestion-hints-next",bd.chevronRight,Xa("parameterHintsNextIcon","Icon for show next parameter hint.")),poe=IZ("inline-suggestion-hints-previous",bd.chevronLeft,Xa("parameterHintsPreviousIcon","Icon for show previous parameter hint.")),moe=(Ot=function(e){function t(e,n,i,r,o,a,s,c,d,h,f){var g;return u(this,t),(g=l(this,t)).editor=e,g.withBorder=n,g._position=i,g._currentSuggestionIdx=r,g._suggestionCount=o,g._extraCommands=a,g._commandService=s,g.keybindingService=d,g._contextKeyService=h,g._menuService=f,g.id="InlineSuggestionHintsContentWidget".concat(ioe.id++),g.allowEditorOverflow=!0,g.suppressMouseDown=!1,g.nodes=Lm("div.inlineSuggestionsHints",{className:g.withBorder?".withBorder":""},[Lm("div@toolBar")]),g.previousAction=g.createCommandAction(coe,Xa("previous","Previous"),ny.asClassName(poe)),g.availableSuggestionCountAction=new $m("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),g.nextAction=g.createCommandAction(doe,Xa("next","Next"),ny.asClassName(voe)),g.inlineCompletionsActionsMenus=g._register(g._menuService.createMenu(d_.InlineCompletionsActions,g._contextKeyService)),g.clearAvailableSuggestionCountLabelDebounced=g._register(new Sg((function(){g.availableSuggestionCountAction.label=""}),100)),g.disableButtonsDebounced=g._register(new Sg((function(){g.previousAction.enabled=g.nextAction.enabled=!1}),100)),g.toolBar=g._register(c.createInstance(boe,g.nodes.toolBar,d_.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:function(e){return e.startsWith("primary")}},actionViewItemProvider:function(e,t){if(e instanceof p_)return c.createInstance(_oe,e,void 0);if(e===g.availableSuggestionCountAction){var n=new yoe(void 0,e,{label:!0,icon:!1});return n.setClass("availableSuggestionCount"),n}},telemetrySource:"InlineSuggestionToolbar"})),g.toolBar.setPrependedPrimaryActions([g.previousAction,g.availableSuggestionCountAction,g.nextAction]),g._register(g.toolBar.onDidChangeDropdownVisibility((function(e){ioe._dropDownVisible=e}))),g._register(XP((function(e){g._position.read(e),g.editor.layoutContentWidget(g)}))),g._register(XP((function(e){var t=g._suggestionCount.read(e),n=g._currentSuggestionIdx.read(e);void 0!==t?(g.clearAvailableSuggestionCountLabelDebounced.cancel(),g.availableSuggestionCountAction.label="".concat(n+1,"/").concat(t)):g.clearAvailableSuggestionCountLabelDebounced.schedule(),void 0!==t&&t>1?(g.disableButtonsDebounced.cancel(),g.previousAction.enabled=g.nextAction.enabled=!0):g.disableButtonsDebounced.schedule()}))),g._register(XP((function(e){var t=g._extraCommands.read(e).map((function(e){return{class:void 0,id:e.id,enabled:!0,tooltip:e.tooltip||"",label:e.title,run:function(t){return g._commandService.executeCommand(e.id)}}})),n=!0,i=!1,r=void 0;try{for(var o,a=g.inlineCompletionsActionsMenus.getActions()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2),l=(s[0],s[1]),u=!0,c=!1,d=void 0;try{for(var h,f=l[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var v=h.value;v instanceof p_&&t.push(v)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}t.length>0&&t.unshift(new ey),g.toolBar.setAdditionalSecondaryActions(t)}))),g}return p(t,e),h(t,[{key:"createCommandAction",value:function(e,t,n){var i=this,r=new $m(e,t,n,!0,(function(){return i._commandService.executeCommand(e)})),o=this.keybindingService.lookupKeybinding(e,this._contextKeyService),a=t;return o&&(a=Xa({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,o.getLabel())),r.tooltip=a,r}},{key:"getId",value:function(){return this.id}},{key:"getDomNode",value:function(){return this.nodes.root}},{key:"getPosition",value:function(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}}],[{key:"dropDownVisible",get:function(){return this._dropDownVisible}}]),t}(Ru),ioe=Ot,Ot._dropDownVisible=!1,Ot.id=0,Ot);moe=ioe=hoe([foe(6,ay),foe(7,Gm),foe(8,ZI),foe(9,Ky),foe(10,h_)],moe);var yoe=function(e){function t(){var e;return u(this,t),(e=l(this,t,arguments))._className=void 0,e}return p(t,e),h(t,[{key:"setClass",value:function(e){this._className=e}},{key:"render",value:function(e){g(v(t.prototype),"render",this).call(this,e),this._className&&e.classList.add(this._className)}},{key:"updateTooltip",value:function(){}}]),t}(IF),_oe=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"updateLabel",value:function(){var e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return g(v(t.prototype),"updateLabel",this).call(this);if(this.label){var n=Lm("div.keybinding").root;this._register(new xG(n,Ns,_({disableTitle:!0},SG))).set(e),this.label.textContent=this._action.label,this.label.appendChild(n),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}},{key:"updateTooltip",value:function(){}}]),t}(iW),boe=function(e){function t(e,n,i,r,o,a,s,c,d){var h;return u(this,t),(h=l(this,t,[e,_({resetMenu:n},i),r,o,a,s,c,d])).menuId=n,h.options2=i,h.menuService=r,h.contextKeyService=o,h.menu=h._store.add(h.menuService.createMenu(h.menuId,h.contextKeyService,{emitEventsForSubmenuChanges:!0})),h.additionalActions=[],h.prependedPrimaryActions=[],h._store.add(h.menu.onDidChange((function(){return h.updateToolbar()}))),h.updateToolbar(),h}return p(t,e),h(t,[{key:"updateToolbar",value:function(){var e,t,n,i,r,o,a,s,l,u=[],c=[];tW(this.menu,null===(n=this.options2)||void 0===n?void 0:n.menuOptions,{primary:u,secondary:c},null===(r=this.options2)||void 0===r||null===(i=r.toolbarOptions)||void 0===i?void 0:i.primaryGroup,null===(a=this.options2)||void 0===a||null===(o=a.toolbarOptions)||void 0===o?void 0:o.shouldInlineSubmenu,null===(l=this.options2)||void 0===l||null===(s=l.toolbarOptions)||void 0===s?void 0:s.useSeparatorsInPrimaryActions),(e=c).push.apply(e,x(this.additionalActions)),(t=u).unshift.apply(t,x(this.prependedPrimaryActions)),this.setActions(u,c)}},{key:"setPrependedPrimaryActions",value:function(e){ea(this.prependedPrimaryActions,e,(function(e,t){return e===t}))||(this.prependedPrimaryActions=e,this.updateToolbar())}},{key:"setAdditionalSecondaryActions",value:function(e){ea(this.additionalActions,e,(function(e,t){return e===t}))||(this.additionalActions=e,this.updateToolbar())}}]),t}(G5);function koe(e,t,n){var i=xp(e);return!(t<i.left||t>i.left+i.width||n<i.top||n>i.top+i.height)}boe=hoe([foe(3,h_),foe(4,Ky),foe(5,GI),foe(6,ZI),foe(7,ay),foe(8,b_)],boe);var woe,Coe=function e(t,n,i){u(this,e),this.value=t,this.isComplete=n,this.hasLoadingMessage=i},Soe=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._editor=e,i._computer=n,i._onResult=i._register(new Zu),i.onResult=i._onResult.event,i._firstWaitScheduler=i._register(new Sg((function(){return i._triggerAsyncComputation()}),0)),i._secondWaitScheduler=i._register(new Sg((function(){return i._triggerSyncComputation()}),0)),i._loadingMessageScheduler=i._register(new Sg((function(){return i._triggerLoadingMessage()}),0)),i._state=0,i._asyncIterable=null,i._asyncIterableDone=!1,i._result=[],i}return p(t,e),h(t,[{key:"dispose",value:function(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),g(v(t.prototype),"dispose",this).call(this)}},{key:"_hoverTime",get:function(){return this._editor.getOption(60).delay}},{key:"_firstWaitTime",get:function(){return this._hoverTime/2}},{key:"_secondWaitTime",get:function(){return this._hoverTime-this._firstWaitTime}},{key:"_loadingMessageTime",get:function(){return 3*this._hoverTime}},{key:"_setState",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._state=e,t&&this._fireResult()}},{key:"_triggerAsyncComputation",value:function(){var e=this;if(this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync){this._asyncIterableDone=!1,this._asyncIterable=function(e){var t=new rc,n=e(t.token);return new Mg(t,function(){var e=s((function(e){var i,o,a,s,l,u,c,d,h,f;return E(this,(function(g){switch(g.label){case 0:i=t.token.onCancellationRequested((function(){i.dispose(),t.dispose(),e.reject(new bu)})),g.label=1;case 1:g.trys.push([1,14,,15]),o=!1,a=!1,g.label=2;case 2:g.trys.push([2,7,8,13]),l=r(n),g.label=3;case 3:return[4,l.next()];case 4:if(!(o=!(u=g.sent()).done))return[3,6];if(c=u.value,d=c,t.token.isCancellationRequested)return[2];e.emitOne(d),g.label=5;case 5:return o=!1,[3,3];case 6:return[3,13];case 7:return h=g.sent(),a=!0,s=h,[3,13];case 8:return g.trys.push([8,,11,12]),o&&null!=l.return?[4,l.return()]:[3,10];case 9:g.sent(),g.label=10;case 10:return[3,12];case 11:if(a)throw s;return[7];case 12:return[7];case 13:return i.dispose(),t.dispose(),[3,15];case 14:return f=g.sent(),i.dispose(),t.dispose(),e.reject(f),[3,15];case 15:return[2]}}))}));return function(t){return e.apply(this,arguments)}}())}((function(t){return e._computer.computeAsync(t)}));var t=this;s((function(){var e,n,i,o,a,s,l,u;return E(this,(function(c){switch(c.label){case 0:c.trys.push([0,13,,14]),e=!1,n=!1,c.label=1;case 1:c.trys.push([1,6,7,12]),o=r(t._asyncIterable),c.label=2;case 2:return[4,o.next()];case 3:if(!(e=!(a=c.sent()).done))return[3,5];s=a.value,(l=s)&&(t._result.push(l),t._fireResult()),c.label=4;case 4:return e=!1,[3,2];case 5:return[3,12];case 6:return u=c.sent(),n=!0,i=u,[3,12];case 7:return c.trys.push([7,,10,11]),e&&null!=o.return?[4,o.return()]:[3,9];case 8:c.sent(),c.label=9;case 9:return[3,11];case 10:if(n)throw i;return[7];case 11:return[7];case 12:return t._asyncIterableDone=!0,3!==t._state&&4!==t._state||t._setState(0),[3,14];case 13:return vu(c.sent()),[3,14];case 14:return[2]}}))}))()}else this._asyncIterableDone=!0}},{key:"_triggerSyncComputation",value:function(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}},{key:"_triggerLoadingMessage",value:function(){3===this._state&&this._setState(4)}},{key:"_fireResult",value:function(){if(1!==this._state&&2!==this._state){var e=0===this._state,t=4===this._state;this._onResult.fire(new Coe(this._result.slice(0),e,t))}}},{key:"start",value:function(e){if(0===e)0===this._state&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}}},{key:"cancel",value:function(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}]),t}(Ru),xoe=function(){function e(){var t,n=this;u(this,e),this._onDidWillResize=new Zu,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new Zu,this.onDidResize=this._onDidResize.event,this._sashListener=new Tu,this._size=new Cp(0,0),this._minSize=new Cp(0,0),this._maxSize=new Cp(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Vj(this.domNode,{getVerticalSashLeft:function(){return n._size.width}},{orientation:0}),this._westSash=new Vj(this.domNode,{getVerticalSashLeft:function(){return 0}},{orientation:0}),this._northSash=new Vj(this.domNode,{getHorizontalSashTop:function(){return 0}},{orientation:1,orthogonalEdge:Ej.North}),this._southSash=new Vj(this.domNode,{getHorizontalSashTop:function(){return n._size.height}},{orientation:1,orthogonalEdge:Ej.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;var i=0,r=0;this._sashListener.add(Au.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)((function(){void 0===t&&(n._onDidWillResize.fire(),t=n._size,i=0,r=0)}))),this._sashListener.add(Au.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)((function(){void 0!==t&&(t=void 0,i=0,r=0,n._onDidResize.fire({dimension:n._size,done:!0}))}))),this._sashListener.add(this._eastSash.onDidChange((function(e){t&&(r=e.currentX-e.startX,n.layout(t.height+i,t.width+r),n._onDidResize.fire({dimension:n._size,done:!1,east:!0}))}))),this._sashListener.add(this._westSash.onDidChange((function(e){t&&(r=-(e.currentX-e.startX),n.layout(t.height+i,t.width+r),n._onDidResize.fire({dimension:n._size,done:!1,west:!0}))}))),this._sashListener.add(this._northSash.onDidChange((function(e){t&&(i=-(e.currentY-e.startY),n.layout(t.height+i,t.width+r),n._onDidResize.fire({dimension:n._size,done:!1,north:!0}))}))),this._sashListener.add(this._southSash.onDidChange((function(e){t&&(i=e.currentY-e.startY,n.layout(t.height+i,t.width+r),n._onDidResize.fire({dimension:n._size,done:!1,south:!0}))}))),this._sashListener.add(Au.any(this._eastSash.onDidReset,this._westSash.onDidReset)((function(e){n._preferredSize&&(n.layout(n._size.height,n._preferredSize.width),n._onDidResize.fire({dimension:n._size,done:!0}))}))),this._sashListener.add(Au.any(this._northSash.onDidReset,this._southSash.onDidReset)((function(e){n._preferredSize&&(n.layout(n._preferredSize.height,n._size.width),n._onDidResize.fire({dimension:n._size,done:!0}))})))}return h(e,[{key:"dispose",value:function(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}},{key:"enableSashes",value:function(e,t,n,i){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=i?3:0}},{key:"layout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size.height,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size.width,n=this._minSize,i=n.height,r=n.width,o=this._maxSize,a=o.height,s=o.width;e=Math.max(i,Math.min(a,e)),t=Math.max(r,Math.min(s,t));var l=new Cp(t,e);Cp.equals(l,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=l,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}},{key:"clearSashHoverState",value:function(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}},{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=e}},{key:"minSize",get:function(){return this._minSize},set:function(e){this._minSize=e}},{key:"preferredSize",get:function(){return this._preferredSize},set:function(e){this._preferredSize=e}}]),e}(),Loe=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Cp(10,10);return u(this,t),(n=l(this,t))._editor=e,n.allowEditorOverflow=!0,n.suppressMouseDown=!1,n._resizableNode=n._register(new xoe),n._contentPosition=null,n._isResizing=!1,n._resizableNode.domNode.style.position="absolute",n._resizableNode.minSize=Cp.lift(i),n._resizableNode.layout(i.height,i.width),n._resizableNode.enableSashes(!0,!0,!0,!0),n._register(n._resizableNode.onDidResize((function(e){n._resize(new Cp(e.dimension.width,e.dimension.height)),e.done&&(n._isResizing=!1)}))),n._register(n._resizableNode.onDidWillResize((function(){n._isResizing=!0}))),n}return p(t,e),h(t,[{key:"isResizing",get:function(){return this._isResizing}},{key:"getDomNode",value:function(){return this._resizableNode.domNode}},{key:"getPosition",value:function(){return this._contentPosition}},{key:"position",get:function(){var e;return(null===(e=this._contentPosition)||void 0===e?void 0:e.position)?dd.lift(this._contentPosition.position):void 0}},{key:"_availableVerticalSpaceAbove",value:function(e){var t=this._editor.getDomNode(),n=this._editor.getScrolledVisiblePosition(e);if(t&&n)return xp(t).top+n.top-30}},{key:"_availableVerticalSpaceBelow",value:function(e){var t=this._editor.getDomNode(),n=this._editor.getScrolledVisiblePosition(e);if(t&&n){var i=xp(t),r=kp(t.ownerDocument.body),o=i.top+n.top+n.height;return r.height-o-24}}},{key:"_findPositionPreference",value:function(e,t){var n,i,r,o=Math.min(null!==(n=this._availableVerticalSpaceBelow(t))&&void 0!==n?n:1/0,e),a=Math.min(null!==(i=this._availableVerticalSpaceAbove(t))&&void 0!==i?i:1/0,e),s=Math.min(Math.max(a,o),e),l=Math.min(e,s);return 1===(r=this._editor.getOption(60).above?l<=a?1:2:l<=o?2:1)?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),r}},{key:"_resize",value:function(e){this._resizableNode.layout(e.height,e.width)}}]),t}(Ru),Doe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Noe=function(e,t){return function(n,i){t(n,i,e)}},Ioe=(Ft=function(e){function t(e,n,i,r,o){var a;u(this,t);var s=e.getOption(67)+8,c=new Cp(150,s);(a=l(this,t,[e,c]))._configurationService=i,a._accessibilityService=r,a._keybindingService=o,a._hover=a._register(new bE),a._onDidResize=a._register(new Zu),a.onDidResize=a._onDidResize.event,a._minimumSize=c,a._hoverVisibleKey=p0.hoverVisible.bindTo(n),a._hoverFocusedKey=p0.hoverFocused.bindTo(n),lm(a._resizableNode.domNode,a._hover.containerDomNode),a._resizableNode.domNode.style.zIndex="50",a._register(a._editor.onDidLayoutChange((function(){a.isVisible&&a._updateMaxDimensions()}))),a._register(a._editor.onDidChangeConfiguration((function(e){e.hasChanged(50)&&a._updateFont()})));var d=a._register(sm(a._resizableNode.domNode));return a._register(d.onDidFocus((function(){a._hoverFocusedKey.set(!0)}))),a._register(d.onDidBlur((function(){a._hoverFocusedKey.set(!1)}))),a._setRenderedHover(void 0),a._editor.addContentWidget(a),a}return p(t,e),h(t,[{key:"isVisibleFromKeyboard",get:function(){var e;return 1===(null===(e=this._renderedHover)||void 0===e?void 0:e.source)}},{key:"isVisible",get:function(){var e;return null!==(e=this._hoverVisibleKey.get())&&void 0!==e&&e}},{key:"isFocused",get:function(){var e;return null!==(e=this._hoverFocusedKey.get())&&void 0!==e&&e}},{key:"dispose",value:function(){var e;g(v(t.prototype),"dispose",this).call(this),null===(e=this._renderedHover)||void 0===e||e.dispose(),this._editor.removeContentWidget(this)}},{key:"getId",value:function(){return woe.ID}},{key:"_setContentsDomNodeDimensions",value:function(e,t){var n=this._hover.contentsDomNode;return woe._applyDimensions(n,e,t)}},{key:"_setContainerDomNodeDimensions",value:function(e,t){var n=this._hover.containerDomNode;return woe._applyDimensions(n,e,t)}},{key:"_setHoverWidgetDimensions",value:function(e,t){this._setContentsDomNodeDimensions(e,t),this._setContainerDomNodeDimensions(e,t),this._layoutContentWidget()}},{key:"_setHoverWidgetMaxDimensions",value:function(e,t){woe._applyMaxDimensions(this._hover.contentsDomNode,e,t),woe._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth","number"==typeof e?"".concat(e,"px"):e),this._layoutContentWidget()}},{key:"_setAdjustedHoverWidgetDimensions",value:function(e){this._setHoverWidgetMaxDimensions("none","none");var t=e.width,n=e.height;this._setHoverWidgetDimensions(t,n)}},{key:"_updateResizableNodeMaxDimensions",value:function(){var e,t,n=null!==(e=this._findMaximumRenderingWidth())&&void 0!==e?e:1/0,i=null!==(t=this._findMaximumRenderingHeight())&&void 0!==t?t:1/0;this._resizableNode.maxSize=new Cp(n,i),this._setHoverWidgetMaxDimensions(n,i)}},{key:"_resize",value:function(e){woe._lastDimensions=new Cp(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),this._onDidResize.fire()}},{key:"_findAvailableSpaceVertically",value:function(){var e,t=null===(e=this._renderedHover)||void 0===e?void 0:e.showAtPosition;if(t)return 1===this._positionPreference?this._availableVerticalSpaceAbove(t):this._availableVerticalSpaceBelow(t)}},{key:"_findMaximumRenderingHeight",value:function(){var e=this._findAvailableSpaceVertically();if(e){var t=6;return Array.from(this._hover.contentsDomNode.children).forEach((function(e){t+=e.clientHeight})),Math.min(e,t)}}},{key:"_isHoverTextOverflowing",value:function(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");var e=Array.from(this._hover.contentsDomNode.children).some((function(e){return e.scrollWidth>e.clientWidth}));return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),e}},{key:"_findMaximumRenderingWidth",value:function(){if(this._editor&&this._editor.hasModel()){var e=this._isHoverTextOverflowing(),t=void 0===this._contentWidth?0:this._contentWidth-2;if(e||this._hover.containerDomNode.clientWidth<t){return kp(this._hover.containerDomNode.ownerDocument.body).width-14}return this._hover.containerDomNode.clientWidth+2}}},{key:"isMouseGettingCloser",value:function(e,t){if(!this._renderedHover)return!1;if(void 0===this._renderedHover.initialMousePosX||void 0===this._renderedHover.initialMousePosY)return this._renderedHover.initialMousePosX=e,this._renderedHover.initialMousePosY=t,!1;var n=xp(this.getDomNode());void 0===this._renderedHover.closestMouseDistance&&(this._renderedHover.closestMouseDistance=Eoe(this._renderedHover.initialMousePosX,this._renderedHover.initialMousePosY,n.left,n.top,n.width,n.height));var i=Eoe(e,t,n.left,n.top,n.width,n.height);return!(i>this._renderedHover.closestMouseDistance+4)&&(this._renderedHover.closestMouseDistance=Math.min(this._renderedHover.closestMouseDistance,i),!0)}},{key:"_setRenderedHover",value:function(e){var t;null===(t=this._renderedHover)||void 0===t||t.dispose(),this._renderedHover=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle("hidden",!e)}},{key:"_updateFont",value:function(){var e=this,t=this._editor.getOption(50),n=t.fontSize,i=t.lineHeight,r=this._hover.contentsDomNode;r.style.fontSize="".concat(n,"px"),r.style.lineHeight="".concat(i/n),Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((function(t){return e._editor.applyFontInfo(t)}))}},{key:"_updateContent",value:function(e){var t=this._hover.contentsDomNode;t.style.paddingBottom="",t.textContent="",t.appendChild(e)}},{key:"_layoutContentWidget",value:function(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}},{key:"_updateMaxDimensions",value:function(){var e=Math.max(this._editor.getLayoutInfo().height/4,250,woe._lastDimensions.height),t=Math.max(.66*this._editor.getLayoutInfo().width,500,woe._lastDimensions.width);this._setHoverWidgetMaxDimensions(t,e)}},{key:"_render",value:function(e){this._setRenderedHover(e),this._updateFont(),this._updateContent(e.domNode),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}},{key:"getPosition",value:function(){return this._renderedHover?{position:this._renderedHover.showAtPosition,secondaryPosition:this._renderedHover.showAtSecondaryPosition,positionAffinity:this._renderedHover.shouldAppearBeforeContent?3:void 0,preference:[null!==(e=this._positionPreference)&&void 0!==e?e:1]}:null;var e}},{key:"show",value:function(e){var t;if(this._editor&&this._editor.hasModel()){this._render(e);var n,i=Ep(this._hover.containerDomNode),r=e.showAtPosition;this._positionPreference=null!==(n=this._findPositionPreference(i,r))&&void 0!==n?n:1,this.onContentsChanged(),e.shouldFocus&&this._hover.containerDomNode.focus(),this._onDidResize.fire();var o,a=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&wE(!0===this._configurationService.getValue("accessibility.verbosity.hover")&&this._accessibilityService.isScreenReaderOptimized(),null!==(o=null===(t=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))||void 0===t?void 0:t.getAriaLabel())&&void 0!==o?o:"");a&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+a)}}},{key:"hide",value:function(){if(this._renderedHover){var e=this._renderedHover.shouldFocus||this._hoverFocusedKey.get();this._setRenderedHover(void 0),this._resizableNode.maxSize=new Cp(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}}},{key:"_removeConstraintsRenderNormally",value:function(){var e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions("auto","auto")}},{key:"setMinimumDimensions",value:function(e){this._minimumSize=new Cp(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}},{key:"_updateMinimumWidth",value:function(){var e=void 0===this._contentWidth?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new Cp(e,this._minimumSize.height)}},{key:"onContentsChanged",value:function(){var e;this._removeConstraintsRenderNormally();var t=this._hover.containerDomNode,n=Ep(t),i=Dp(t);if(this._resizableNode.layout(n,i),this._setHoverWidgetDimensions(i,n),n=Ep(t),i=Dp(t),this._contentWidth=i,this._updateMinimumWidth(),this._resizableNode.layout(n,i),null===(e=this._renderedHover)||void 0===e?void 0:e.showAtPosition){var r=Ep(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(r,this._renderedHover.showAtPosition)}this._layoutContentWidget()}},{key:"focus",value:function(){this._hover.containerDomNode.focus()}},{key:"scrollUp",value:function(){var e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}},{key:"scrollDown",value:function(){var e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}},{key:"scrollLeft",value:function(){var e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-30})}},{key:"scrollRight",value:function(){var e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+30})}},{key:"pageUp",value:function(){var e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}},{key:"pageDown",value:function(){var e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}},{key:"goToTop",value:function(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}},{key:"goToBottom",value:function(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}}],[{key:"_applyDimensions",value:function(e,t,n){var i="number"==typeof t?"".concat(t,"px"):t,r="number"==typeof n?"".concat(n,"px"):n;e.style.width=i,e.style.height=r}},{key:"_applyMaxDimensions",value:function(e,t,n){var i="number"==typeof t?"".concat(t,"px"):t,r="number"==typeof n?"".concat(n,"px"):n;e.style.maxWidth=i,e.style.maxHeight=r}}]),t}(Loe),woe=Ft,Ft.ID="editor.contrib.resizableContentHoverWidget",Ft._lastDimensions=new Cp(0,0),Ft);function Eoe(e,t,n,i,r,o){var a=n+r/2,s=i+o/2,l=Math.max(Math.abs(e-a)-r/2,0),u=Math.max(Math.abs(t-s)-o/2,0);return Math.sqrt(l*l+u*u)}Ioe=woe=Doe([Noe(1,Ky),Noe(2,qb),Noe(3,mR),Noe(4,ZI)],Ioe);var Moe=function(){function e(t,n){u(this,e),this._editor=t,this._participants=n,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}return h(e,[{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor=e}},{key:"shouldFocus",get:function(){return this._shouldFocus},set:function(e){this._shouldFocus=e}},{key:"source",get:function(){return this._source},set:function(e){this._source=e}},{key:"insistOnKeepingHoverVisible",get:function(){return this._insistOnKeepingHoverVisible},set:function(e){this._insistOnKeepingHoverVisible=e}},{key:"computeAsync",value:function(t){var n=this._anchor;if(!this._editor.hasModel()||!n)return Eg.EMPTY;var i=e._getLineDecorations(this._editor,n);return Eg.merge(this._participants.map((function(e){return e.computeAsync?e.computeAsync(n,i,t):Eg.EMPTY})))}},{key:"computeSync",value:function(){if(!this._editor.hasModel()||!this._anchor)return[];var t=e._getLineDecorations(this._editor,this._anchor),n=[],i=!0,r=!1,o=void 0;try{for(var a,s=this._participants[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;n=n.concat(l.computeSync(this._anchor,t))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return aa(n)}}],[{key:"_getLineDecorations",value:function(e,t){if(1!==t.type&&!t.supportsMarkerHover)return[];var n=e.getModel(),i=t.range.startLineNumber;if(i>n.getLineCount())return[];var r=n.getLineMaxColumn(i);return e.getLineDecorations(i).filter((function(e){if(e.options.isWholeLine)return!0;var n=e.range.startLineNumber===i?e.range.startColumn:1,o=e.range.endLineNumber===i?e.range.endColumn:r;if(e.options.showIfCollapsed){if(n>t.range.startColumn+1||t.range.endColumn-1>o)return!1}else if(n>t.range.startColumn||t.range.endColumn>o)return!1;return!0}))}}]),e}(),Toe=function(){function e(t,n,i){u(this,e),this.anchor=t,this.hoverParts=n,this.isComplete=i}return h(e,[{key:"filter",value:function(e){var t=this.hoverParts.filter((function(t){return t.isValidForHoverAnchor(e)}));return t.length===this.hoverParts.length?this:new Roe(this,this.anchor,t,this.isComplete)}}]),e}(),Roe=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t,[n,i,r])).original=e,o}return p(t,e),h(t,[{key:"filter",value:function(e){return this.original.filter(e)}}]),t}(Toe),Aoe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Poe=function(e,t){return function(n,i){t(n,i,e)}},Ooe=gm,Foe=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._keybindingService=e,n.actions=[],n._hasContent=!1,n.hoverElement=Ooe("div.hover-row.status-bar"),n.hoverElement.tabIndex=0,n.actionsElement=lm(n.hoverElement,Ooe("div.actions")),n}return p(t,e),h(t,[{key:"hasContent",get:function(){return this._hasContent}},{key:"addAction",value:function(e){var t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;this._hasContent=!0;var i=this._register(kE.render(this.actionsElement,e,n));return this.actions.push(i),i}},{key:"append",value:function(e){var t=lm(this.actionsElement,e);return this._hasContent=!0,t}}]),t}(Ru);Foe=Aoe([Poe(0,ZI)],Foe);var Woe=function e(t,n,i){u(this,e),this.provider=t,this.hover=n,this.ordinal=i};function Boe(){return Boe=s((function(e,t,n,i,r){var o;return E(this,(function(a){switch(a.label){case 0:return[4,Promise.resolve(e.provideHover(n,i,r)).catch(pu)];case 1:return(o=a.sent())&&function(e){var t=void 0!==e.range,n=void 0!==e.contents&&e.contents&&e.contents.length>0;return t&&n}(o)?[2,new Woe(e,o,t)]:[2,void 0]}}))})),Boe.apply(this,arguments)}function Hoe(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=e.ordered(t,r).map((function(e,r){return function(e,t,n,i,r){return Boe.apply(this,arguments)}(e,r,t,n,i)}));return Eg.fromPromises(o).coalesce()}function Voe(e,t,n,i){return Hoe(e,t,n,i,arguments.length>4&&void 0!==arguments[4]&&arguments[4]).map((function(e){return e.hover})).toPromise()}A_("_executeHoverProvider",(function(e,t,n){return Voe(e.get(wS).hoverProvider,t,n,Uu.None)})),A_("_executeHoverProvider_recursive",(function(e,t,n){return Voe(e.get(wS).hoverProvider,t,n,Uu.None,!0)}));var zoe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Uoe=function(e,t){return function(n,i){t(n,i,e)}},joe=gm,Koe=IZ("hover-increase-verbosity",bd.add,Xa("increaseHoverVerbosity","Icon for increaseing hover verbosity.")),qoe=IZ("hover-decrease-verbosity",bd.remove,Xa("decreaseHoverVerbosity","Icon for decreasing hover verbosity.")),Goe=function(){function e(t,n,i,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;u(this,e),this.owner=t,this.range=n,this.contents=i,this.isBeforeContent=r,this.ordinal=o,this.source=a}return h(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}]),e}(),Zoe=function(){function e(t,n,i){u(this,e),this.hover=t,this.hoverProvider=n,this.hoverPosition=i}return h(e,[{key:"supportsVerbosityAction",value:function(e){switch(e){case md.Increase:var t;return null!==(t=this.hover.canIncreaseVerbosity)&&void 0!==t&&t;case md.Decrease:var n;return null!==(n=this.hover.canDecreaseVerbosity)&&void 0!==n&&n}}}]),e}(),Yoe=function(){function e(t,n,i,r,o,a,s,l){u(this,e),this._editor=t,this._languageService=n,this._openerService=i,this._configurationService=r,this._languageFeaturesService=o,this._keybindingService=a,this._hoverService=s,this._commandService=l,this.hoverOrdinal=3}return h(e,[{key:"createLoadingMessage",value:function(e){return new Goe(this,e.range,[(new oT).appendText(Xa("modesContentHover.loading","Loading..."))],!1,2e3)}},{key:"computeSync",value:function(e,t){if(!this._editor.hasModel()||1!==e.type)return[];var n=this._editor.getModel(),i=e.range.startLineNumber,r=n.getLineMaxColumn(i),o=[],a=1e3,s=n.getLineLength(i),l=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),u=this._editor.getOption(118),c=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:l}),d=!1;u>=0&&s>u&&e.range.startColumn>=u&&(d=!0,o.push(new Goe(this,e.range,[{value:Xa("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,a++))),!d&&"number"==typeof c&&s>=c&&o.push(new Goe(this,e.range,[{value:Xa("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,a++));var h=!1,f=!0,g=!1,v=void 0;try{for(var p,m=t[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value,_=y.range.startLineNumber===i?y.range.startColumn:1,b=y.range.endLineNumber===i?y.range.endColumn:r,k=y.options.hoverMessage;if(k&&!aT(k)){y.options.beforeContentClassName&&(h=!0);var w=new hd(e.range.startLineNumber,_,e.range.startLineNumber,b);o.push(new Goe(this,w,ma(k),h,a++))}}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}return o}},{key:"computeAsync",value:function(e,t,n){if(!this._editor.hasModel()||1!==e.type)return Eg.EMPTY;var i=this._editor.getModel(),r=this._languageFeaturesService.hoverProvider;return r.has(i)?this._getMarkdownHovers(r,i,e,n):Eg.EMPTY}},{key:"_getMarkdownHovers",value:function(e,t,n,i){var r=this,o=n.range.getStartPosition();return Hoe(e,t,o,i).filter((function(e){return!aT(e.hover.contents)})).map((function(e){var t=e.hover.range?hd.lift(e.hover.range):n.range,i=new Zoe(e.hover,e.provider,o);return new Goe(r,t,e.hover.contents,!1,e.ordinal,i)}))}},{key:"renderHoverParts",value:function(e,t){return this._renderedHoverParts=new Xoe(t,e.fragment,this,this._editor,this._languageService,this._openerService,this._commandService,this._keybindingService,this._hoverService,this._configurationService,e.onContentsChanged),this._renderedHoverParts}},{key:"updateMarkdownHoverVerbosityLevel",value:function(e,t,n){var i;return Promise.resolve(null===(i=this._renderedHoverParts)||void 0===i?void 0:i.updateMarkdownHoverPartVerbosityLevel(e,t,n))}}]),e}();Yoe=zoe([Uoe(1,Jb),Uoe(2,xE),Uoe(3,qb),Uoe(4,wS),Uoe(5,ZI),Uoe(6,jI),Uoe(7,ay)],Yoe);var Qoe=function(){function e(t,n,i){u(this,e),this.hoverPart=t,this.hoverElement=n,this.disposables=i}return h(e,[{key:"dispose",value:function(){this.disposables.dispose()}}]),e}(),Xoe=function(){function e(t,n,i,r,o,a,s,l,c,d,h){var f=this;u(this,e),this._hoverParticipant=i,this._editor=r,this._languageService=o,this._openerService=a,this._commandService=s,this._keybindingService=l,this._hoverService=c,this._configurationService=d,this._onFinishedRendering=h,this._ongoingHoverOperations=new Map,this._disposables=new Tu,this.renderedHoverParts=this._renderHoverParts(t,n,this._onFinishedRendering),this._disposables.add(Mu((function(){f.renderedHoverParts.forEach((function(e){e.dispose()})),f._ongoingHoverOperations.forEach((function(e){e.tokenSource.dispose(!0)}))})))}return h(e,[{key:"_renderHoverParts",value:function(e,t,n){var i=this;return e.sort(ba((function(e){return e.ordinal}),ka)),e.map((function(e){var r=i._renderHoverPart(e,n);return t.appendChild(r.hoverElement),r}))}},{key:"_renderHoverPart",value:function(e,t){var n=this._renderMarkdownHover(e,t),i=n.hoverElement,r=e.source,o=new Tu;if(o.add(n),!r)return new Qoe(e,i,o);var a=r.supportsVerbosityAction(md.Increase),s=r.supportsVerbosityAction(md.Decrease);if(!a&&!s)return new Qoe(e,i,o);var l=joe("div.verbosity-actions");return i.prepend(l),o.add(this._renderHoverExpansionAction(l,md.Increase,a)),o.add(this._renderHoverExpansionAction(l,md.Decrease,s)),new Qoe(e,i,o)}},{key:"_renderMarkdownHover",value:function(e,t){return $oe(this._editor,e,this._languageService,this._openerService,t)}},{key:"_renderHoverExpansionAction",value:function(e,t,n){var i=this,r=new Tu,o=t===md.Increase,a=lm(e,joe(ny.asCSSSelector(o?Koe:qoe)));a.tabIndex=0;var s=new KI("mouse",!1,{target:e,position:{hoverPosition:0}},this._configurationService,this._hoverService);if(r.add(this._hoverService.setupManagedHover(s,a,function(e,t){switch(t){case md.Increase:var n=e.lookupKeybinding(ooe);return n?Xa("increaseVerbosityWithKb","Increase Hover Verbosity ({0})",n.getLabel()):Xa("increaseVerbosity","Increase Hover Verbosity");case md.Decrease:var i=e.lookupKeybinding(soe);return i?Xa("decreaseVerbosityWithKb","Decrease Hover Verbosity ({0})",i.getLabel()):Xa("decreaseVerbosity","Decrease Hover Verbosity")}}(this._keybindingService,t))),!n)return a.classList.add("disabled"),r;a.classList.add("enabled");var l=function(){return i._commandService.executeCommand(t===md.Increase?ooe:soe)};return r.add(new CE(a,l)),r.add(new SE(a,l,[3,10])),r}},{key:"updateMarkdownHoverPartVerbosityLevel",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this;return s((function(){var r,o,a,s,l,u,c,d;return E(this,(function(h){switch(h.label){case 0:return(r=i._editor.getModel())?(o=i._getRenderedHoverPartAtIndex(t),a=null==o?void 0:o.hoverPart.source,o&&(null==a?void 0:a.supportsVerbosityAction(e))?[4,i._fetchHover(a,r,e)]:[2,void 0]):[2,void 0];case 1:return(s=h.sent())?(l=new Zoe(s,a.hoverProvider,a.hoverPosition),u=o.hoverPart,c=new Goe(i._hoverParticipant,u.range,s.contents,u.isBeforeContent,u.ordinal,l),d=i._renderHoverPart(c,i._onFinishedRendering),i._replaceRenderedHoverPartAtIndex(t,d,c),n&&i._focusOnHoverPartWithIndex(t),[2,{hoverPart:c,hoverElement:d.hoverElement}]):[2,void 0]}}))}))()}},{key:"_fetchHover",value:function(e,t,n){var i=this;return s((function(){var r,o,a,s,l,u;return E(this,(function(c){switch(c.label){case 0:r=n===md.Increase?1:-1,o=e.hoverProvider,(a=i._ongoingHoverOperations.get(o))&&(a.tokenSource.cancel(),r+=a.verbosityDelta),s=new rc,i._ongoingHoverOperations.set(o,{verbosityDelta:r,tokenSource:s}),l={verbosityRequest:{verbosityDelta:r,previousHover:e.hover}},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Promise.resolve(o.provideHover(t,e.hoverPosition,s.token,l))];case 2:return u=c.sent(),[3,4];case 3:return pu(c.sent()),[3,4];case 4:return s.dispose(),i._ongoingHoverOperations.delete(o),[2,u]}}))}))()}},{key:"_replaceRenderedHoverPartAtIndex",value:function(e,t,n){var i;if(!(e>=this.renderedHoverParts.length||e<0)){var r=this.renderedHoverParts[e],o=r.hoverElement,a=t.hoverElement,s=Array.from(a.children);(i=o).replaceChildren.apply(i,x(s));var l=new Qoe(n,o,t.disposables);o.focus(),r.dispose(),this.renderedHoverParts[e]=l}}},{key:"_focusOnHoverPartWithIndex",value:function(e){this.renderedHoverParts[e].hoverElement.focus()}},{key:"_getRenderedHoverPartAtIndex",value:function(e){return this.renderedHoverParts[e]}},{key:"dispose",value:function(){this._disposables.dispose()}}]),e}();function $oe(e,t,n,i,r){var o=new Tu,a=joe("div.hover-row"),s=joe("div.hover-row-contents");a.appendChild(s);var l=t.contents,u=!0,c=!1,d=void 0;try{for(var h,f=function(){var t=h.value;if(aT(t))return"continue";var a=joe("div.markdown-hover"),l=lm(a,joe("div.hover-contents")),u=o.add(new lR({editor:e},n,i));o.add(u.onDidRenderAsync((function(){l.className="hover-contents code-hover-contents",r()})));var c=o.add(u.render(t));l.appendChild(c.element),s.appendChild(a)},g=l[Symbol.iterator]();!(u=(h=g.next()).done);u=!0)f()}catch(e){c=!0,d=e}finally{try{u||null==g.return||g.return()}finally{if(c)throw d}}return{hoverPart:t,hoverElement:a,dispose:function(){o.dispose()}}}function Joe(e,t){return!!e[t]}var eae=function e(t,n){u(this,e),this.target=t.target,this.isLeftClick=t.event.leftButton,this.isMiddleClick=t.event.middleButton,this.isRightClick=t.event.rightButton,this.hasTriggerModifier=Joe(t.event,n.triggerModifier),this.hasSideBySideModifier=Joe(t.event,n.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=t.event.detail<=1},tae=function e(t,n){u(this,e),this.keyCodeIsTriggerKey=t.keyCode===n.triggerKey,this.keyCodeIsSideBySideKey=t.keyCode===n.triggerSideBySideKey,this.hasTriggerModifier=Joe(t,n.triggerModifier)},nae=function(){function e(t,n,i,r){u(this,e),this.triggerKey=t,this.triggerModifier=n,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=r}return h(e,[{key:"equals",value:function(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}]),e}();function iae(e){return"altKey"===e?ms?new nae(57,"metaKey",6,"altKey"):new nae(5,"ctrlKey",6,"altKey"):ms?new nae(6,"altKey",57,"metaKey"):new nae(6,"altKey",5,"ctrlKey")}var rae=function(e){function t(e,n){var i,r;return u(this,t),(i=l(this,t))._onMouseMoveOrRelevantKeyDown=i._register(new Zu),i.onMouseMoveOrRelevantKeyDown=i._onMouseMoveOrRelevantKeyDown.event,i._onExecute=i._register(new Zu),i.onExecute=i._onExecute.event,i._onCancel=i._register(new Zu),i.onCancel=i._onCancel.event,i._editor=e,i._extractLineNumberFromMouseEvent=null!==(r=null==n?void 0:n.extractLineNumberFromMouseEvent)&&void 0!==r?r:function(e){return e.target.position?e.target.position.lineNumber:0},i._opts=iae(i._editor.getOption(78)),i._lastMouseMoveEvent=null,i._hasTriggerKeyOnMouseDown=!1,i._lineNumberOnMouseDown=0,i._register(i._editor.onDidChangeConfiguration((function(e){if(e.hasChanged(78)){var t=iae(i._editor.getOption(78));if(i._opts.equals(t))return;i._opts=t,i._lastMouseMoveEvent=null,i._hasTriggerKeyOnMouseDown=!1,i._lineNumberOnMouseDown=0,i._onCancel.fire()}}))),i._register(i._editor.onMouseMove((function(e){return i._onEditorMouseMove(new eae(e,i._opts))}))),i._register(i._editor.onMouseDown((function(e){return i._onEditorMouseDown(new eae(e,i._opts))}))),i._register(i._editor.onMouseUp((function(e){return i._onEditorMouseUp(new eae(e,i._opts))}))),i._register(i._editor.onKeyDown((function(e){return i._onEditorKeyDown(new tae(e,i._opts))}))),i._register(i._editor.onKeyUp((function(e){return i._onEditorKeyUp(new tae(e,i._opts))}))),i._register(i._editor.onMouseDrag((function(){return i._resetHandler()}))),i._register(i._editor.onDidChangeCursorSelection((function(e){return i._onDidChangeCursorSelection(e)}))),i._register(i._editor.onDidChangeModel((function(e){return i._resetHandler()}))),i._register(i._editor.onDidChangeModelContent((function(){return i._resetHandler()}))),i._register(i._editor.onDidScrollChange((function(e){(e.scrollTopChanged||e.scrollLeftChanged)&&i._resetHandler()}))),i}return p(t,e),h(t,[{key:"_onDidChangeCursorSelection",value:function(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}},{key:"_onEditorMouseMove",value:function(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}},{key:"_onEditorMouseDown",value:function(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}},{key:"_onEditorMouseUp",value:function(e){var t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}},{key:"_onEditorKeyDown",value:function(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}},{key:"_onEditorKeyUp",value:function(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}},{key:"_resetHandler",value:function(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}]),t}(Ru),oae=function e(t,n){u(this,e),this.range=t,this.direction=n},aae=function(){function e(t,n,i){u(this,e),this.hint=t,this.anchor=n,this.provider=i,this._isResolved=!1}return h(e,[{key:"with",value:function(t){var n=new e(this.hint,t.anchor,this.provider);return n._isResolved=this._isResolved,n._currentResolve=this._currentResolve,n}},{key:"resolve",value:function(e){var t=this;return s((function(){return E(this,(function(n){switch(n.label){case 0:return"function"!=typeof t.provider.resolveInlayHint?[2]:t._currentResolve?[4,t._currentResolve]:[3,2];case 1:return n.sent(),e.isCancellationRequested?[2]:[2,t.resolve(e)];case 2:return t._isResolved||(t._currentResolve=t._doResolve(e).finally((function(){return t._currentResolve=void 0}))),[4,t._currentResolve];case 3:return n.sent(),[2]}}))}))()}},{key:"_doResolve",value:function(e){var t=this;return s((function(){var n,i,r,o;return E(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Promise.resolve(t.provider.resolveInlayHint(t.hint,e))];case 1:return n=a.sent(),t.hint.tooltip=null!==(i=null==n?void 0:n.tooltip)&&void 0!==i?i:t.hint.tooltip,t.hint.label=null!==(r=null==n?void 0:n.label)&&void 0!==r?r:t.hint.label,t.hint.textEdits=null!==(o=null==n?void 0:n.textEdits)&&void 0!==o?o:t.hint.textEdits,t._isResolved=!0,[3,3];case 2:return pu(a.sent()),t._isResolved=!1,[3,3];case 3:return[2]}}))}))()}}]),e}(),sae=function(){function e(t,n,i){u(this,e),this._disposables=new Tu,this.ranges=t,this.provider=new Set;var r=[],o=!0,a=!1,s=void 0;try{for(var l,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var d=C(l.value,2),h=d[0],f=d[1];this._disposables.add(h),this.provider.add(f);var g=!0,v=!1,p=void 0;try{for(var m,y=h.hints[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var _=m.value,b=i.validatePosition(_.position),k="before",w=e._getRangeAtPosition(i,b),S=void 0;w.getStartPosition().isBefore(b)?(S=hd.fromPositions(w.getStartPosition(),b),k="after"):(S=hd.fromPositions(b,w.getEndPosition()),k="before"),r.push(new aae(_,new oae(S,k),f))}}catch(e){v=!0,p=e}finally{try{g||null==y.return||y.return()}finally{if(v)throw p}}}}catch(e){a=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}this.items=r.sort((function(e,t){return dd.compare(e.hint.position,t.hint.position)}))}return h(e,[{key:"dispose",value:function(){this._disposables.dispose()}}],[{key:"create",value:function(t,n,i,r){return s((function(){var o,a;return E(this,(function(l){switch(l.label){case 0:return o=[],a=t.ordered(n).reverse().map((function(t){return i.map(function(){var i=s((function(i){var a;return E(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,t.provideInlayHints(n,i,r)];case 1:return((null==(a=s.sent())?void 0:a.hints.length)||t.onDidChangeInlayHints)&&o.push([null!=a?a:e._emptyInlayHintList,t]),[3,3];case 2:return pu(s.sent()),[3,3];case 3:return[2]}}))}));return function(e){return i.apply(this,arguments)}}())})),[4,Promise.all(a.flat())];case 1:if(l.sent(),r.isCancellationRequested||n.isDisposed())throw new bu;return[2,new e(i,o,n)]}}))}))()}},{key:"_getRangeAtPosition",value:function(e,t){var n=t.lineNumber,i=e.getWordAtPosition(t);if(i)return new hd(n,i.startColumn,n,i.endColumn);e.tokenization.tokenizeIfCheap(n);var r=e.tokenization.getLineTokens(n),o=t.column-1,a=r.findTokenIndexAtOffset(o),s=r.getStartOffset(a),l=r.getEndOffset(a);return l-s==1&&(s===o&&a>1?(s=r.getStartOffset(a-1),l=r.getEndOffset(a-1)):l===o&&a<r.getCount()-1&&(s=r.getStartOffset(a+1),l=r.getEndOffset(a+1))),new hd(n,s+1,n,l+1)}}]),e}();sae._emptyInlayHintList=Object.freeze({dispose:function(){},hints:[]});var lae=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},uae=function(e,t){return function(n,i){t(n,i,e)}},cae=function(e){function t(e,n,r,o,a,s,c,d,h,f,p,m,y){var k;return u(this,t),(k=l(this,t,[e,b(_({},o.getRawOptions()),{overflowWidgetsDomNode:o.getOverflowWidgetsDomNode()}),r,a,s,c,d,h,f,p,m,y]))._parentEditor=o,k._overwriteOptions=n,g((i(k),v(t.prototype)),"updateOptions",k).call(k,k._overwriteOptions),k._register(o.onDidChangeConfiguration((function(e){return k._onParentConfigurationChanged(e)}))),k}return p(t,e),h(t,[{key:"getParentEditor",value:function(){return this._parentEditor}},{key:"_onParentConfigurationChanged",value:function(e){g(v(t.prototype),"updateOptions",this).call(this,this._parentEditor.getRawOptions()),g(v(t.prototype),"updateOptions",this).call(this,this._overwriteOptions)}},{key:"updateOptions",value:function(e){ja(this._overwriteOptions,e,!0),g(v(t.prototype),"updateOptions",this).call(this,this._overwriteOptions)}}]),t}(e3);cae=lae([uae(4,Gm),uae(5,Ym),uae(6,ay),uae(7,Ky),uae(8,PS),uae(9,rx),uae(10,mR),uae(11,Ek),uae(12,wS)],cae);var dae=new XC(new ZC(0,122,204)),hae={showArrow:!0,showFrame:!0,className:"",frameColor:dae,arrowColor:dae,keepEditorSelection:!1},fae=function(){function e(t,n,i,r,o,a,s,l){u(this,e),this.id="",this.domNode=t,this.afterLineNumber=n,this.afterColumn=i,this.heightInLines=r,this.showInHiddenAreas=s,this.ordinal=l,this._onDomNodeTop=o,this._onComputedHeight=a}return h(e,[{key:"onDomNodeTop",value:function(e){this._onDomNodeTop(e)}},{key:"onComputedHeight",value:function(e){this._onComputedHeight(e)}}]),e}(),gae=function(){function e(t,n){u(this,e),this._id=t,this._domNode=n}return h(e,[{key:"getId",value:function(){return this._id}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return null}}]),e}(),vae=function(){function e(t){u(this,e),this._editor=t,this._ruleName=e._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}return h(e,[{key:"dispose",value:function(){this.hide(),Xp(this._ruleName)}},{key:"color",set:function(e){this._color!==e&&(this._color=e,this._updateStyle())}},{key:"height",set:function(e){this._height!==e&&(this._height=e,this._updateStyle())}},{key:"_updateStyle",value:function(){Xp(this._ruleName),Qp(".monaco-editor ".concat(this._ruleName),"border-style: solid; border-color: transparent; border-bottom-color: ".concat(this._color,"; border-width: ").concat(this._height,"px; bottom: -").concat(this._height,"px !important; margin-left: -").concat(this._height,"px; "))}},{key:"show",value:function(e){1===e.column&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:hd.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}},{key:"hide",value:function(){this._decorations.clear()}}]),e}();vae._IdGenerator=new cT(".arrow-decoration-");var pae,mae=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,e),this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new Tu,this.container=null,this._isShowing=!1,this.editor=t,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=Ha(i),ja(this.options,hae,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange((function(e){var t=n._getWidth(e);n.domNode.style.width=t+"px",n.domNode.style.left=n._getLeft(e)+"px",n._onWidth(t)})))}return h(e,[{key:"dispose",value:function(){var e=this;this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones((function(t){e._viewZone&&t.removeZone(e._viewZone.id),e._viewZone=null})),this._positionMarkerId.clear(),this._disposables.dispose()}},{key:"create",value:function(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new vae(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}},{key:"style",value:function(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}},{key:"_applyStyles",value:function(){if(this.container&&this.options.frameColor){var e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){var t=this.options.arrowColor.toString();this._arrow.color=t}}},{key:"_getWidth",value:function(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}},{key:"_getLeft",value:function(e){return e.minimap.minimapWidth>0&&0===e.minimap.minimapLeft?e.minimap.minimapWidth:0}},{key:"_onViewZoneTop",value:function(e){this.domNode.style.top=e+"px"}},{key:"_onViewZoneHeight",value:function(e){var t;if(this.domNode.style.height="".concat(e,"px"),this.container){var n=e-this._decoratingElementsHeight();this.container.style.height="".concat(n,"px");var i=this.editor.getLayoutInfo();this._doLayout(n,this._getWidth(i))}null===(t=this._resizeSash)||void 0===t||t.layout()}},{key:"position",get:function(){var e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}},{key:"show",value:function(e,t){var n=hd.isIRange(e)?hd.lift(e):hd.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId.set([{range:n,options:cU.EMPTY}])}},{key:"hide",value:function(){var e,t=this;this._viewZone&&(this.editor.changeViewZones((function(e){t._viewZone&&e.removeZone(t._viewZone.id)})),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),null===(e=this._arrow)||void 0===e||e.hide(),this._positionMarkerId.clear()}},{key:"_decoratingElementsHeight",value:function(){var e=this.editor.getOption(67),t=0;this.options.showArrow&&(t+=2*Math.round(e/3));this.options.showFrame&&(t+=2*Math.round(e/9));return t}},{key:"_showImpl",value:function(e,t){var n=this,i=e.getStartPosition(),r=this.editor.getLayoutInfo(),o=this._getWidth(r);this.domNode.style.width="".concat(o,"px"),this.domNode.style.left=this._getLeft(r)+"px";var a=document.createElement("div");a.style.overflow="hidden";var s=this.editor.getOption(67);if(!this.options.allowUnlimitedHeight){var l=Math.max(12,this.editor.getLayoutInfo().height/s*.8);t=Math.min(t,l)}var u=0,c=0;if(this._arrow&&this.options.showArrow&&(u=Math.round(s/3),this._arrow.height=u,this._arrow.show(i)),this.options.showFrame&&(c=Math.round(s/9)),this.editor.changeViewZones((function(e){n._viewZone&&e.removeZone(n._viewZone.id),n._overlayWidget&&(n.editor.removeOverlayWidget(n._overlayWidget),n._overlayWidget=null),n.domNode.style.top="-1000px",n._viewZone=new fae(a,i.lineNumber,i.column,t,(function(e){return n._onViewZoneTop(e)}),(function(e){return n._onViewZoneHeight(e)}),n.options.showInHiddenAreas,n.options.ordinal),n._viewZone.id=e.addZone(n._viewZone),n._overlayWidget=new gae("vs.editor.contrib.zoneWidget"+n._viewZone.id,n.domNode),n.editor.addOverlayWidget(n._overlayWidget)})),this.container&&this.options.showFrame){var d=this.options.frameWidth?this.options.frameWidth:c;this.container.style.borderTopWidth=d+"px",this.container.style.borderBottomWidth=d+"px"}var h=t*s-this._decoratingElementsHeight();this.container&&(this.container.style.top=u+"px",this.container.style.height=h+"px",this.container.style.overflow="hidden"),this._doLayout(h,o),this.options.keepEditorSelection||this.editor.setSelection(e);var f=this.editor.getModel();if(f){var g=f.validateRange(new hd(e.startLineNumber,1,e.endLineNumber+1,1));this.revealRange(g,g.startLineNumber===f.getLineCount())}}},{key:"revealRange",value:function(e,t){t?this.editor.revealLineNearTop(e.endLineNumber,0):this.editor.revealRange(e,0)}},{key:"setCssClass",value:function(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}},{key:"_onWidth",value:function(e){}},{key:"_doLayout",value:function(e,t){}},{key:"_relayout",value:function(e){var t=this;this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones((function(n){t._viewZone&&(t._viewZone.heightInLines=e,n.layoutZone(t._viewZone.id))}))}},{key:"_initSash",value:function(){var e,t=this;this._resizeSash||(this._resizeSash=this._disposables.add(new Vj(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0),this._disposables.add(this._resizeSash.onDidStart((function(n){t._viewZone&&(e={startY:n.startY,heightInLines:t._viewZone.heightInLines})}))),this._disposables.add(this._resizeSash.onDidEnd((function(){e=void 0}))),this._disposables.add(this._resizeSash.onDidChange((function(n){if(e){var i=(n.currentY-e.startY)/t.editor.getOption(67),r=i<0?Math.ceil(i):Math.floor(i),o=e.heightInLines+r;o>5&&o<35&&t._relayout(o)}}))))}},{key:"getHorizontalSashLeft",value:function(){return 0}},{key:"getHorizontalSashTop",value:function(){return(null===this.domNode.style.height?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}},{key:"getHorizontalSashWidth",value:function(){var e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}]),e}(),yae=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},_ae=function(e,t){return function(n,i){t(n,i,e)}},bae=Zm("IPeekViewService");nk(bae,function(){function e(){u(this,e),this._widgets=new Map}return h(e,[{key:"addExclusiveWidget",value:function(e,t){var n=this,i=this._widgets.get(e);i&&(i.listener.dispose(),i.widget.dispose());this._widgets.set(e,{widget:t,listener:t.onDidClose((function(){var i=n._widgets.get(e);i&&i.widget===t&&(i.listener.dispose(),n._widgets.delete(e))}))})}}]),e}(),1),function(e){e.inPeekEditor=new jy("inReferenceSearchEditor",!0,Xa("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),e.notInPeekEditor=e.inPeekEditor.toNegated()}(pae||(pae={}));var kae=(Wt=function(){function e(t,n){u(this,e),t instanceof cae&&pae.inPeekEditor.bindTo(n)}return h(e,[{key:"dispose",value:function(){}}]),e}(),Wt.ID="editor.contrib.referenceController",Wt);B_((kae=yae([_ae(1,Ky)],kae)).ID,kae,0);var wae={headerBackgroundColor:XC.white,primaryHeadingColor:XC.fromHex("#333333"),secondaryHeadingColor:XC.fromHex("#6c6c6cb3")},Cae=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[e,n])).instantiationService=i,r._onDidClose=new Zu,r.onDidClose=r._onDidClose.event,ja(r.options,wae,!1),r}return p(t,e),h(t,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,g(v(t.prototype),"dispose",this).call(this),this._onDidClose.fire(this))}},{key:"style",value:function(e){var n=this.options;e.headerBackgroundColor&&(n.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(n.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(n.secondaryHeadingColor=e.secondaryHeadingColor),g(v(t.prototype),"style",this).call(this,e)}},{key:"_applyStyles",value:function(){g(v(t.prototype),"_applyStyles",this).call(this);var e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}},{key:"_fillContainer",value:function(e){this.setCssClass("peekview-widget"),this._headElement=gm(".head"),this._bodyElement=gm(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}},{key:"_fillHead",value:function(e,t){var n=this;this._titleElement=gm(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),hp(this._titleElement,"click",(function(e){return n._onTitleClick(e)}))),lm(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=gm("span.filename"),this._secondaryHeading=gm("span.dirname"),this._metaHeading=gm("span.meta"),lm(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);var i=gm(".peekview-actions");lm(this._headElement,i);var r=this._getActionBarOptions();this._actionbarWidget=new dW(i,r),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new $m("peekview.close",Xa("label.close","Close"),ny.asClassName(bd.close),!0,(function(){return n.dispose(),Promise.resolve()})),{label:!1,icon:!0})}},{key:"_fillTitleIcon",value:function(e){}},{key:"_getActionBarOptions",value:function(){return{actionViewItemProvider:lW.bind(void 0,this.instantiationService),orientation:0}}},{key:"_onTitleClick",value:function(e){}},{key:"setTitle",value:function(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:lp(this._secondaryHeading))}},{key:"setMetaTitle",value:function(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,vm(this._metaHeading)):pm(this._metaHeading))}},{key:"_doLayout",value:function(e,t){if(!this._isShowing&&e<0)this.dispose();else{var n=Math.ceil(1.2*this.editor.getOption(67)),i=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(i,t)}}},{key:"_doLayoutHead",value:function(e,t){this._headElement&&(this._headElement.style.height="".concat(e,"px"),this._headElement.style.lineHeight=this._headElement.style.height)}},{key:"_doLayoutBody",value:function(e,t){this._bodyElement&&(this._bodyElement.style.height="".concat(e,"px"))}}]),t}(mae);Cae=yae([_ae(2,Gm)],Cae);var Sae=TL("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:XC.black,hcLight:XC.white},Xa("peekViewTitleBackground","Background color of the peek view title area.")),xae=TL("peekViewTitleLabel.foreground",{dark:XC.white,light:XC.black,hcDark:XC.white,hcLight:nD},Xa("peekViewTitleForeground","Color of the peek view title.")),Lae=TL("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},Xa("peekViewTitleInfoForeground","Color of the peek view title info.")),Dae=TL("peekView.border",{dark:dD,light:dD,hcDark:KL,hcLight:KL},Xa("peekViewBorder","Color of the peek view borders and arrow.")),Nae=TL("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:XC.black,hcLight:XC.white},Xa("peekViewResultsBackground","Background color of the peek view result list."));TL("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:XC.white,hcLight:nD},Xa("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),TL("peekViewResult.fileForeground",{dark:XC.white,light:"#1E1E1E",hcDark:XC.white,hcLight:nD},Xa("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),TL("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},Xa("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),TL("peekViewResult.selectionForeground",{dark:XC.white,light:"#6C6C6C",hcDark:XC.white,hcLight:nD},Xa("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));var Iae=TL("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:XC.black,hcLight:XC.white},Xa("peekViewEditorBackground","Background color of the peek view editor."));TL("peekViewEditorGutter.background",Iae,Xa("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),TL("peekViewEditorStickyScroll.background",Iae,Xa("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor.")),TL("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},Xa("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),TL("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},Xa("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),TL("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:qL,hcLight:qL},Xa("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var Eae,Mae=function(){function e(t,n,i,r){u(this,e),this.isProviderFirst=t,this.parent=n,this.link=i,this._rangeCallback=r,this.id=dT.nextId()}return h(e,[{key:"uri",get:function(){return this.link.uri}},{key:"range",get:function(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range},set:function(e){this._range=e,this._rangeCallback(this)}},{key:"ariaMessage",get:function(){var e,t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?Xa({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"{0} in {1} on line {2} at column {3}",t.value,YM(this.uri),this.range.startLineNumber,this.range.startColumn):Xa("aria.oneReference","in {0} on line {1} at column {2}",YM(this.uri),this.range.startLineNumber,this.range.startColumn)}}]),e}(),Tae=function(){function e(t){u(this,e),this._modelReference=t}return h(e,[{key:"dispose",value:function(){this._modelReference.dispose()}},{key:"preview",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=this._modelReference.object.textEditorModel;if(n){var i=e.startLineNumber,r=e.startColumn,o=e.endLineNumber,a=e.endColumn,s=n.getWordUntilPosition({lineNumber:i,column:r-t}),l=new hd(i,s.startColumn,i,r),u=new hd(o,a,o,1073741824),c=n.getValueInRange(l).replace(/^\s+/,""),d=n.getValueInRange(e);return{value:c+d+n.getValueInRange(u).replace(/\s+$/,""),highlight:{start:c.length,end:c.length+d.length}}}}}]),e}(),Rae=function(){function e(t,n){u(this,e),this.parent=t,this.uri=n,this.children=[],this._previews=new cw}return h(e,[{key:"dispose",value:function(){Iu(this._previews.values()),this._previews.clear()}},{key:"getPreview",value:function(e){return this._previews.get(e.uri)}},{key:"ariaMessage",get:function(){var e=this.children.length;return 1===e?Xa("aria.fileReferences.1","1 symbol in {0}, full path {1}",YM(this.uri),this.uri.fsPath):Xa("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,YM(this.uri),this.uri.fsPath)}},{key:"resolve",value:function(e){var t=this;return s((function(){var n,i,r,o,a,s,l,u;return E(this,(function(c){switch(c.label){case 0:if(0!==t._previews.size)return[2,t];n=!0,i=!1,r=void 0,c.label=1;case 1:c.trys.push([1,8,9,10]),o=t.children[Symbol.iterator](),c.label=2;case 2:if(n=(a=o.next()).done)return[3,7];if(s=a.value,t._previews.has(s.uri))return[3,6];c.label=3;case 3:return c.trys.push([3,5,,6]),[4,e.createModelReference(s.uri)];case 4:return l=c.sent(),t._previews.set(s.uri,new Tae(l)),[3,6];case 5:return vu(c.sent()),[3,6];case 6:return n=!0,[3,2];case 7:return[3,10];case 8:return u=c.sent(),i=!0,r=u,[3,10];case 9:try{n||null==o.return||o.return()}finally{if(i)throw r}return[7];case 10:return[2,t]}}))}))()}}]),e}(),Aae=function(){function e(t,n){var i=this;u(this,e),this.groups=[],this.references=[],this._onDidChangeReferenceRange=new Zu,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=t,this._title=n;var r,o=C(t,1)[0];t.sort(e._compareReferences);var a=!0,s=!1,l=void 0;try{for(var c,d=t[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var h=c.value;if(r&&qM.isEqual(r.uri,h.uri,!0)||(r=new Rae(this,h.uri),this.groups.push(r)),0===r.children.length||0!==e._compareReferences(h,r.children[r.children.length-1])){var f=new Mae(o===h,r,h,(function(e){return i._onDidChangeReferenceRange.fire(e)}));this.references.push(f),r.children.push(f)}}}catch(e){s=!0,l=e}finally{try{a||null==d.return||d.return()}finally{if(s)throw l}}}return h(e,[{key:"dispose",value:function(){Iu(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}},{key:"clone",value:function(){return new e(this._links,this._title)}},{key:"title",get:function(){return this._title}},{key:"isEmpty",get:function(){return 0===this.groups.length}},{key:"ariaMessage",get:function(){return this.isEmpty?Xa("aria.result.0","No results found"):1===this.references.length?Xa("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?Xa("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):Xa("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}},{key:"nextOrPreviousReference",value:function(e,t){var n=e.parent,i=n.children.indexOf(e),r=n.children.length,o=n.parent.groups.length;return 1===o||t&&i+1<r||!t&&i>0?(i=t?(i+1)%r:(i+r-1)%r,n.children[i]):(i=n.parent.groups.indexOf(n),t?(i=(i+1)%o,n.parent.groups[i].children[0]):(i=(i+o-1)%o,n.parent.groups[i].children[n.parent.groups[i].children.length-1]))}},{key:"nearestReference",value:function(e,t){var n=this.references.map((function(n,i){return{idx:i,prefixLen:df(n.uri.toString(),e.toString()),offsetDist:100*Math.abs(n.range.startLineNumber-t.lineNumber)+Math.abs(n.range.startColumn-t.column)}})).sort((function(e,t){return e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0}))[0];if(n)return this.references[n.idx]}},{key:"referenceAt",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=this.references[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s.uri.toString()===e.toString()&&hd.containsPosition(s.range,t))return s}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},{key:"firstReference",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.references[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;if(o.isProviderFirst)return o}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return this.references[0]}}],[{key:"_compareReferences",value:function(e,t){return qM.compare(e.uri,t.uri)||hd.compareRangesUsingStarts(e.range,t.range)}}]),e}(),Pae=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Oae=function(e,t){return function(n,i){t(n,i,e)}},Fae=function(){function e(t){u(this,e),this._resolverService=t}return h(e,[{key:"hasChildren",value:function(e){return e instanceof Aae||e instanceof Rae}},{key:"getChildren",value:function(e){if(e instanceof Aae)return e.groups;if(e instanceof Rae)return e.resolve(this._resolverService).then((function(e){return e.children}));throw new Error("bad tree")}}]),e}();Fae=Pae([Oae(0,Xm)],Fae);var Wae=function(){function e(){u(this,e)}return h(e,[{key:"getHeight",value:function(){return 23}},{key:"getTemplateId",value:function(e){return e instanceof Rae?zae.id:jae.id}}]),e}(),Bae=function(){function e(t){u(this,e),this._keybindingService=t}return h(e,[{key:"getKeyboardNavigationLabel",value:function(e){if(e instanceof Mae){var t,n=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(n)return n.value}return YM(e.uri)}}]),e}();Bae=Pae([Oae(0,ZI)],Bae);var Hae=function(){function e(){u(this,e)}return h(e,[{key:"getId",value:function(e){return e instanceof Mae?e.id:e.uri}}]),e}(),Vae=function(e){function t(e,n){var i;u(this,t),(i=l(this,t))._labelService=n;var r=document.createElement("div");return r.classList.add("reference-file"),i.file=i._register(new bG(r,{supportHighlights:!0})),i.badge=new aj(lm(r,gm(".count")),{},ZF),e.appendChild(r),i}return p(t,e),h(t,[{key:"set",value:function(e,t){var n=XM(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(n,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});var i=e.children.length;this.badge.setCount(i),i>1?this.badge.setTitleFormat(Xa("referencesCount","{0} references",i)):this.badge.setTitleFormat(Xa("referenceCount","{0} reference",i))}}]),t}(Ru);Vae=Pae([Oae(1,PA)],Vae);var zae=(Bt=function(){function e(t){u(this,e),this._instantiationService=t,this.templateId=Eae.id}return h(e,[{key:"renderTemplate",value:function(e){return this._instantiationService.createInstance(Vae,e)}},{key:"renderElement",value:function(e,t,n){n.set(e.element,yM(e.filterData))}},{key:"disposeTemplate",value:function(e){e.dispose()}}]),e}(),Eae=Bt,Bt.id="FileReferencesRenderer",Bt);zae=Eae=Pae([Oae(0,Gm)],zae);var Uae=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).label=n._register(new yG(e)),n}return p(t,e),h(t,[{key:"set",value:function(e,t){var n,i=null===(n=e.parent.getPreview(e))||void 0===n?void 0:n.preview(e.range);if(i&&i.value){var r=i.value,o=i.highlight;t&&!wM.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(r,yM(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(r,[o]))}else this.label.set("".concat(YM(e.uri),":").concat(e.range.startLineNumber+1,":").concat(e.range.startColumn+1))}}]),t}(Ru),jae=function(){function e(){u(this,e),this.templateId=e.id}return h(e,[{key:"renderTemplate",value:function(e){return new Uae(e)}},{key:"renderElement",value:function(e,t,n){n.set(e.element,e.filterData)}},{key:"disposeTemplate",value:function(e){e.dispose()}}]),e}();jae.id="OneReferenceRenderer";var Kae=function(){function e(){u(this,e)}return h(e,[{key:"getWidgetAriaLabel",value:function(){return Xa("treeAriaLabel","References")}},{key:"getAriaLabel",value:function(e){return e.ariaMessage}}]),e}(),qae=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Gae=function(e,t){return function(n,i){t(n,i,e)}},Zae=function(){function e(t,n){var i=this;u(this,e),this._editor=t,this._model=n,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new Tu,this._callOnModelChange=new Tu,this._callOnDispose.add(this._editor.onDidChangeModel((function(){return i._onModelChanged()}))),this._onModelChanged()}return h(e,[{key:"dispose",value:function(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}},{key:"_onModelChanged",value:function(){this._callOnModelChange.clear();var e=this._editor.getModel();if(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._model.references[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(a.uri.toString()===e.uri.toString())return void this._addDecorations(a.parent)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}},{key:"_addDecorations",value:function(t){var n=this;if(this._editor.hasModel()){this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((function(){return n._onDecorationChanged()})));for(var i=[],r=[],o=0,a=t.children.length;o<a;o++){var s=t.children[o];this._decorationIgnoreSet.has(s.id)||s.uri.toString()===this._editor.getModel().uri.toString()&&(i.push({range:s.range,options:e.DecorationOptions}),r.push(o))}this._editor.changeDecorations((function(e){for(var o=e.deltaDecorations([],i),a=0;a<o.length;a++)n._decorations.set(o[a],t.children[r[a]])}))}}},{key:"_onDecorationChanged",value:function(){var e=[],t=this._editor.getModel();if(t){var n=!0,i=!1,r=void 0;try{for(var o,a=this._decorations[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2),l=s[0],u=s[1],c=t.getDecorationRange(l);if(c){var d=!1;if(!hd.equalsRange(c,u.range)){if(hd.spansMultipleLines(c))d=!0;else u.range.endColumn-u.range.startColumn!==c.endColumn-c.startColumn&&(d=!0);d?(this._decorationIgnoreSet.add(u.id),e.push(l)):u.range=c}}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}for(var h=0,f=e.length;h<f;h++)this._decorations.delete(e[h]);this._editor.removeDecorations(e)}}},{key:"removeDecorations",value:function(){this._editor.removeDecorations(x(this._decorations.keys())),this._decorations.clear()}}]),e}();Zae.DecorationOptions=cU.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});var Yae=function(){function e(){u(this,e),this.ratio=.7,this.heightInLines=18}return h(e,null,[{key:"fromJSON",value:function(e){var t,n;try{var i=JSON.parse(e);t=i.ratio,n=i.heightInLines}catch(e){}return{ratio:t||.7,heightInLines:n||18}}}]),e}(),Qae=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),t}(dG),Xae=function(e){function t(e,n,i,r,o,a,s,c,d){var h;return u(this,t),(h=l(this,t,[e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},a]))._defaultTreeKeyboardSupport=n,h.layoutData=i,h._textModelResolverService=o,h._instantiationService=a,h._peekViewService=s,h._uriLabel=c,h._keybindingService=d,h._disposeOnNewModel=new Tu,h._callOnDispose=new Tu,h._onDidSelectReference=new Zu,h.onDidSelectReference=h._onDidSelectReference.event,h._dim=new Cp(0,0),h._isClosing=!1,h._applyTheme(r.getColorTheme()),h._callOnDispose.add(r.onDidColorThemeChange(h._applyTheme.bind(h))),h._peekViewService.addExclusiveWidget(e,h),h.create(),h}return p(t,e),h(t,[{key:"isClosing",get:function(){return this._isClosing}},{key:"dispose",value:function(){this._isClosing=!0,this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),Iu(this._preview),Iu(this._previewNotAvailableMessage),Iu(this._tree),Iu(this._previewModelReference),this._splitView.dispose(),g(v(t.prototype),"dispose",this).call(this)}},{key:"_applyTheme",value:function(e){var t=e.getColor(Dae)||XC.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(Sae)||XC.transparent,primaryHeadingColor:e.getColor(xae),secondaryHeadingColor:e.getColor(Lae)})}},{key:"show",value:function(e){g(v(t.prototype),"show",this).call(this,e,this.layoutData.heightInLines||18)}},{key:"focusOnReferenceTree",value:function(){this._tree.domFocus()}},{key:"focusOnPreviewEditor",value:function(){this._preview.focus()}},{key:"isPreviewEditorFocused",value:function(){return this._preview.hasTextFocus()}},{key:"_onTitleClick",value:function(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}},{key:"_fillBody",value:function(e){var t=this;this.setCssClass("reference-zone-widget"),this._messageContainer=lm(e,gm("div.messages")),pm(this._messageContainer),this._splitView=new qj(e,{orientation:1}),this._previewContainer=lm(e,gm("div.preview.inline"));this._preview=this._instantiationService.createInstance(cae,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},{},this.editor),pm(this._previewContainer),this._previewNotAvailableMessage=this._instantiationService.createInstance(eU,Xa("missingPreviewMessage","no preview available"),kk,eU.DEFAULT_CREATION_OPTIONS,null),this._treeContainer=lm(e,gm("div.ref-tree.inline"));var n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new Kae,keyboardNavigationLabelProvider:this._instantiationService.createInstance(Bae),identityProvider:new Hae,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:Nae}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(hp(this._treeContainer,"keydown",(function(e){e.equals(9)&&(t._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(Qae,"ReferencesWidget",this._treeContainer,new Wae,[this._instantiationService.createInstance(zae),this._instantiationService.createInstance(jae)],this._instantiationService.createInstance(Fae),n),this._splitView.addView({onDidChange:Au.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:function(e){t._preview.layout({height:t._dim.height,width:e})}},Bj.Distribute),this._splitView.addView({onDidChange:Au.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:function(e){t._treeContainer.style.height="".concat(t._dim.height,"px"),t._treeContainer.style.width="".concat(e,"px"),t._tree.layout(t._dim.height,e)}},Bj.Distribute),this._disposables.add(this._splitView.onDidSashChange((function(){t._dim.width&&(t.layoutData.ratio=t._splitView.getViewSize(0)/t._dim.width)}),void 0));var i=function(e,n){e instanceof Mae&&("show"===n&&t._revealReference(e,!1),t._onDidSelectReference.fire({element:e,kind:n,source:"tree"}))};this._disposables.add(this._tree.onDidOpen((function(e){e.sideBySide?i(e.element,"side"):e.editorOptions.pinned?i(e.element,"goto"):i(e.element,"show")}))),pm(this._treeContainer)}},{key:"_onWidth",value:function(e){this._dim&&this._doLayoutBody(this._dim.height,e)}},{key:"_doLayoutBody",value:function(e,n){g(v(t.prototype),"_doLayoutBody",this).call(this,e,n),this._dim=new Cp(n,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(n),this._splitView.resizeView(0,n*this.layoutData.ratio)}},{key:"setSelection",value:function(e){var t=this;return this._revealReference(e,!0).then((function(){t._model&&(t._tree.setSelection([e]),t._tree.setFocus([e]))}))}},{key:"setModel",value:function(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}},{key:"_onNewModel",value:function(){var e=this;return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=Xa("noResults","No results"),vm(this._messageContainer),Promise.resolve(void 0)):(pm(this._messageContainer),this._decorationsManager=new Zae(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((function(t){return e._tree.rerender(t)}))),this._disposeOnNewModel.add(this._preview.onMouseDown((function(t){var n=t.event,i=t.target;if(2===n.detail){var r=e._getFocusedReference();r&&e._onDidSelectReference.fire({element:{uri:r.uri,range:i.range},kind:n.ctrlKey||n.metaKey||n.altKey?"side":"open",source:"editor"})}}))),this.container.classList.add("results-loaded"),vm(this._treeContainer),vm(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}},{key:"_getFocusedReference",value:function(){var e=C(this._tree.getFocus(),1),t=e[0];return t instanceof Mae?t:t instanceof Rae&&t.children.length>0?t.children[0]:void 0}},{key:"revealReference",value:function(e){var t=this;return s((function(){return E(this,(function(n){switch(n.label){case 0:return[4,t._revealReference(e,!1)];case 1:return n.sent(),t._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"}),[2]}}))}))()}},{key:"_revealReference",value:function(e,t){var n=this;return s((function(){var i,r,o,a,s;return E(this,(function(l){switch(l.label){case 0:return n._revealedReference===e?[2]:(n._revealedReference=e,e.uri.scheme!==Pv.inMemory?n.setTitle(ZM(e.uri),n._uriLabel.getUriLabel(XM(e.uri))):n.setTitle(Xa("peekView.alternateTitle","References")),i=n._textModelResolverService.createModelReference(e.uri),n._tree.getInput()!==e.parent?[3,1]:(n._tree.reveal(e),[3,3]));case 1:return t&&n._tree.reveal(e.parent),[4,n._tree.expand(e.parent)];case 2:l.sent(),n._tree.reveal(e),l.label=3;case 3:return[4,i];case 4:return r=l.sent(),n._model?(Iu(n._previewModelReference),(o=r.object)?(a=n._preview.getModel()===o.textEditorModel?0:1,s=hd.lift(e.range).collapseToStart(),n._previewModelReference=r,n._preview.setModel(o.textEditorModel),n._preview.setSelection(s),n._preview.revealRangeInCenter(s,a)):(n._preview.setModel(n._previewNotAvailableMessage),r.dispose()),[2]):(r.dispose(),[2])}}))}))()}}]),t}(Cae);Xae=qae([Gae(3,PS),Gae(4,Xm),Gae(5,Gm),Gae(6,bae),Gae(7,PA),Gae(8,ZI)],Xae);var $ae,Jae=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ese=function(e,t){return function(n,i){t(n,i,e)}},tse=new jy("referenceSearchVisible",!1,Xa("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'")),nse=(Ht=function(){function e(t,n,i,r,o,a,s,l){u(this,e),this._defaultTreeKeyboardSupport=t,this._editor=n,this._editorService=r,this._notificationService=o,this._instantiationService=a,this._storageService=s,this._configurationService=l,this._disposables=new Tu,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=tse.bindTo(i)}return h(e,[{key:"dispose",value:function(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}},{key:"toggleWidget",value:function(e,t,n){var i,r=this;if(this._widget&&(i=this._widget.position),this.closeWidget(),!i||!e.containsPosition(i)){this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage((function(){r.closeWidget()}))),this._disposables.add(this._editor.onDidChangeModel((function(){r._ignoreModelChangeEvent||r.closeWidget()})));var o="peekViewLayout",a=Yae.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(Xae,this._editor,this._defaultTreeKeyboardSupport,a),this._widget.setTitle(Xa("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose((function(){t.cancel(),r._widget?(r._storageService.store(o,JSON.stringify(r._widget.layoutData),0,1),r._widget.isClosing||r.closeWidget(),r._widget=void 0):r.closeWidget()}))),this._disposables.add(this._widget.onDidSelectReference((function(e){var t=e.element,i=e.kind;if(t)switch(i){case"open":"editor"===e.source&&r._configurationService.getValue("editor.stablePeek")||r.openReference(t,!1,!1);break;case"side":r.openReference(t,!0,!1);break;case"goto":n?r._gotoReference(t,!0):r.openReference(t,!1,!0)}})));var s=++this._requestIdPool;t.then((function(t){var n;if(s===r._requestIdPool&&r._widget)return null===(n=r._model)||void 0===n||n.dispose(),r._model=t,r._widget.setModel(r._model).then((function(){if(r._widget&&r._model&&r._editor.hasModel()){r._model.isEmpty?r._widget.setMetaTitle(""):r._widget.setMetaTitle(Xa("metaTitle.N","{0} ({1})",r._model.title,r._model.references.length));var t=r._editor.getModel().uri,n=new dd(e.startLineNumber,e.startColumn),i=r._model.nearestReference(t,n);if(i)return r._widget.setSelection(i).then((function(){r._widget&&"editor"===r._editor.getOption(87)&&r._widget.focusOnPreviewEditor()}))}}));t.dispose()}),(function(e){r._notificationService.error(e)}))}}},{key:"changeFocusBetweenPreviewAndReferences",value:function(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}},{key:"goToNextOrPreviousReference",value:function(e){var t=this;return s((function(){var n,i,r,o,a;return E(this,(function(s){switch(s.label){case 0:return t._editor.hasModel()&&t._model&&t._widget&&((n=t._widget.position)&&(i=t._model.nearestReference(t._editor.getModel().uri,n)))?(r=t._model.nextOrPreviousReference(i,e),o=t._editor.hasTextFocus(),a=t._widget.isPreviewEditorFocused(),[4,t._widget.setSelection(r)]):[2];case 1:return s.sent(),[4,t._gotoReference(r,!1)];case 2:return s.sent(),o?t._editor.focus():t._widget&&a&&t._widget.focusOnPreviewEditor(),[2]}}))}))()}},{key:"revealReference",value:function(e){var t=this;return s((function(){return E(this,(function(n){switch(n.label){case 0:return t._editor.hasModel()&&t._model&&t._widget?[4,t._widget.revealReference(e)]:[2];case 1:return n.sent(),[2]}}))}))()}},{key:"closeWidget",value:function(){var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,n&&this._editor.focus(),this._requestIdPool+=1}},{key:"_gotoReference",value:function(e,t){var n,i=this;null===(n=this._widget)||void 0===n||n.hide(),this._ignoreModelChangeEvent=!0;var r=hd.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:r,selectionSource:"code.jump",pinned:t}},this._editor).then((function(e){if(i._ignoreModelChangeEvent=!1,e&&i._widget)if(i._editor===e)i._widget.show(r),i._widget.focusOnReferenceTree();else{var t,n=$ae.get(e),o=i._model.clone();i.closeWidget(),e.focus(),null==n||n.toggleWidget(r,hg((function(e){return Promise.resolve(o)})),null!==(t=i._peekMode)&&void 0!==t&&t)}else i.closeWidget()}),(function(e){i._ignoreModelChangeEvent=!1,vu(e)}))}},{key:"openReference",value:function(e,t,n){t||this.closeWidget();var i=e.uri,r=e.range;this._editorService.openCodeEditor({resource:i,options:{selection:r,selectionSource:"code.jump",pinned:n}},this._editor,t)}}],[{key:"get",value:function(e){return e.getContribution($ae.ID)}}]),e}(),$ae=Ht,Ht.ID="editor.contrib.referencesController",Ht);function ise(e,t){var n=function(e){var t=e.get(Ym).getFocusedCodeEditor();return t instanceof cae?t.getParentEditor():t}(e);if(n){var i=nse.get(n);i&&t(i)}}nse=$ae=Jae([ese(2,Ky),ese(3,Ym),ese(4,rx),ese(5,Gm),ese(6,BF),ese(7,qb)],nse),o_.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:pc(2089,60),when:Sy.or(tse,pae.inPeekEditor),handler:function(e){ise(e,(function(e){e.changeFocusBetweenPreviewAndReferences()}))}}),o_.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:Sy.or(tse,pae.inPeekEditor),handler:function(e){ise(e,(function(e){e.goToNextOrPreviousReference(!0)}))}}),o_.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:Sy.or(tse,pae.inPeekEditor),handler:function(e){ise(e,(function(e){e.goToNextOrPreviousReference(!1)}))}}),sy.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),sy.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),sy.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),sy.registerCommand("closeReferenceSearch",(function(e){return ise(e,(function(e){return e.closeWidget()}))})),o_.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:Sy.and(pae.inPeekEditor,Sy.not("config.editor.stablePeek"))}),o_.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:Sy.and(tse,Sy.not("config.editor.stablePeek"),Sy.or(p0.editorTextFocus,dq.negate()))}),o_.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:Sy.and(tse,bq,Lq.negate(),Nq.negate()),handler:function(e){var t,n=null===(t=e.get(gq).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof Mae&&ise(e,(function(e){return e.revealReference(n[0])}))}}),o_.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:Sy.and(tse,bq,Lq.negate(),Nq.negate()),handler:function(e){var t,n=null===(t=e.get(gq).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof Mae&&ise(e,(function(e){return e.openReference(n[0],!0,!0)}))}}),sy.registerCommand("openReference",(function(e){var t,n=null===(t=e.get(gq).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof Mae&&ise(e,(function(e){return e.openReference(n[0],!1,!0)}))}));var rse=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ose=function(e,t){return function(n,i){t(n,i,e)}},ase=new jy("hasSymbols",!1,Xa("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),sse=Zm("ISymbolNavigationService"),lse=function(){function e(t,n,i,r){u(this,e),this._editorService=n,this._notificationService=i,this._keybindingService=r,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=ase.bindTo(t)}return h(e,[{key:"reset",value:function(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}},{key:"put",value:function(e){var t=this,n=e.parent.parent;if(n.references.length<=1)this.reset();else{this._currentModel=n,this._currentIdx=n.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();var i=new use(this._editorService),r=i.onDidChange((function(e){if(!t._ignoreEditorChange){var i=t._editorService.getActiveCodeEditor();if(i){var r=i.getModel(),o=i.getPosition();if(r&&o){var a=!1,s=!1,l=!0,u=!1,c=void 0;try{for(var d,h=n.references[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;if(GM(f.uri,r.uri))a=!0,s=s||hd.containsPosition(f.range,o);else if(a)break}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}a&&s||t.reset()}}}}));this._currentState=Eu(i,r)}}},{key:"revealNext",value:function(e){var t=this;if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;var n=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:n.uri,options:{selection:hd.collapseToStart(n.range),selectionRevealType:3}},e).finally((function(){t._ignoreEditorChange=!1}))}},{key:"_showMessage",value:function(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();var t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?Xa("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):Xa("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}}]),e}();lse=rse([ose(0,Ky),ose(1,Ym),ose(2,rx),ose(3,ZI)],lse),nk(sse,lse,1),P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"editor.gotoNextSymbolFromResult",precondition:ase,kbOpts:{weight:100,primary:70}}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t){return e.get(sse).revealNext(t)}}]),t}(E_))),o_.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:ase,primary:9,handler:function(e){e.get(sse).reset()}});var use=function(){function e(t){u(this,e),this._listener=new Map,this._disposables=new Tu,this._onDidChange=new Zu,this.onDidChange=this._onDidChange.event,this._disposables.add(t.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(t.onCodeEditorAdd(this._onDidAddEditor,this)),t.listCodeEditors().forEach(this._onDidAddEditor,this)}return h(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._onDidChange.dispose(),Iu(this._listener.values())}},{key:"_onDidAddEditor",value:function(e){var t=this;this._listener.set(e,Eu(e.onDidChangeCursorPosition((function(n){return t._onDidChange.fire({editor:e})})),e.onDidChangeModelContent((function(n){return t._onDidChange.fire({editor:e})}))))}},{key:"_onDidRemoveEditor",value:function(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}}]),e}();function cse(e,t){return t.uri.scheme===e.uri.scheme||!Bv(t.uri,Pv.walkThroughSnippet,Pv.vscodeChatCodeBlock,Pv.vscodeChatCodeCompareBlock)}function dse(e,t,n,i,r){return hse.apply(this,arguments)}function hse(){return hse=s((function(e,t,n,i,r){var o,a;return E(this,(function(s){switch(s.label){case 0:return o=n.ordered(e,i),a=o.map((function(n){return Promise.resolve(r(n,e,t)).then(void 0,(function(e){pu(e)}))})),[4,Promise.all(a)];case 1:return[2,aa(s.sent().flat()).filter((function(t){return cse(e,t)}))]}}))})),hse.apply(this,arguments)}function fse(e,t,n,i,r){return dse(t,n,e,i,(function(e,t,n){return e.provideDefinition(t,n,r)}))}function gse(e,t,n,i,r){return dse(t,n,e,i,(function(e,t,n){return e.provideDeclaration(t,n,r)}))}function vse(e,t,n,i,r){return dse(t,n,e,i,(function(e,t,n){return e.provideImplementation(t,n,r)}))}function pse(e,t,n,i,r){return dse(t,n,e,i,(function(e,t,n){return e.provideTypeDefinition(t,n,r)}))}function mse(e,t,n,i,r,o){return dse(t,n,e,r,function(){var e=s((function(e,t,n){var r,a,s,l;return E(this,(function(u){switch(u.label){case 0:return[4,e.provideReferences(t,n,{includeDeclaration:!0},o)];case 1:return s=null===(r=u.sent())||void 0===r?void 0:r.filter((function(e){return cse(t,e)})),i&&s&&2===s.length?[4,e.provideReferences(t,n,{includeDeclaration:!1},o)]:[2,s];case 2:return l=null===(a=u.sent())||void 0===a?void 0:a.filter((function(e){return cse(t,e)})),l&&1===l.length?[2,l]:[2,s]}}))}));return function(t,n,i){return e.apply(this,arguments)}}())}function yse(e){return _se.apply(this,arguments)}function _se(){return _se=s((function(e){var t,n,i;return E(this,(function(r){switch(r.label){case 0:return[4,e()];case 1:return t=r.sent(),n=new Aae(t,""),i=n.references.map((function(e){return e.link})),n.dispose(),[2,i]}}))})),_se.apply(this,arguments)}use=rse([ose(0,Ym)],use),A_("_executeDefinitionProvider",(function(e,t,n){var i=fse(e.get(wS).definitionProvider,t,n,!1,Uu.None);return yse((function(){return i}))})),A_("_executeDefinitionProvider_recursive",(function(e,t,n){var i=fse(e.get(wS).definitionProvider,t,n,!0,Uu.None);return yse((function(){return i}))})),A_("_executeTypeDefinitionProvider",(function(e,t,n){var i=pse(e.get(wS).typeDefinitionProvider,t,n,!1,Uu.None);return yse((function(){return i}))})),A_("_executeTypeDefinitionProvider_recursive",(function(e,t,n){var i=pse(e.get(wS).typeDefinitionProvider,t,n,!0,Uu.None);return yse((function(){return i}))})),A_("_executeDeclarationProvider",(function(e,t,n){var i=gse(e.get(wS).declarationProvider,t,n,!1,Uu.None);return yse((function(){return i}))})),A_("_executeDeclarationProvider_recursive",(function(e,t,n){var i=gse(e.get(wS).declarationProvider,t,n,!0,Uu.None);return yse((function(){return i}))})),A_("_executeReferenceProvider",(function(e,t,n){var i=mse(e.get(wS).referenceProvider,t,n,!1,!1,Uu.None);return yse((function(){return i}))})),A_("_executeReferenceProvider_recursive",(function(e,t,n){var i=mse(e.get(wS).referenceProvider,t,n,!1,!0,Uu.None);return yse((function(){return i}))})),A_("_executeImplementationProvider",(function(e,t,n){var i=vse(e.get(wS).implementationProvider,t,n,!1,Uu.None);return yse((function(){return i}))})),A_("_executeImplementationProvider_recursive",(function(e,t,n){var i=vse(e.get(wS).implementationProvider,t,n,!0,Uu.None);return yse((function(){return i}))})),g_.appendMenuItem(d_.EditorContext,{submenu:d_.EditorContextPeek,title:Xa("peek.submenu","Peek"),group:"navigation",order:100});var bse=function(){function e(t,n){u(this,e),this.model=t,this.position=n}return h(e,null,[{key:"is",value:function(t){return!(!t||"object"!==(void 0===t?"undefined":L(t)))&&(t instanceof e||!(!dd.isIPosition(t.position)||!t.model))}}]),e}(),kse=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[t._patchConfig(n)])).configuration=e,t._allSymbolNavigationCommands.set(n.id,i),i}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,n,i,r){if(!n.hasModel())return Promise.resolve(void 0);var o=e.get(rx),a=e.get(Ym),l=e.get(WA),u=e.get(sse),c=e.get(wS),d=e.get(Gm),h=n.getModel(),f=n.getPosition(),g=bse.is(i)?i:new bse(h,f),v=new E9(n,5),p=this,m=fg(this._getLocationModel(c,g.model,g.position,v.token),v.token).then(function(){var e=s((function(e){var o,s,l,c,g;return E(this,(function(m){if(!e||v.token.isCancellationRequested)return[2];if(_R(e.ariaMessage),e.referenceAt(h.uri,f)&&(s=p._getAlternativeCommand(n),!t._activeAlternativeCommands.has(s)&&t._allSymbolNavigationCommands.has(s)&&(o=t._allSymbolNavigationCommands.get(s))),0===(l=e.references.length))p.configuration.muteMessage||(g=h.getWordAtPosition(f),null===(c=ine.get(n))||void 0===c||c.showMessage(p._getNoResultFoundMessage(g),f));else{if(1!==l||!o)return[2,p._onResult(a,u,n,e,r)];t._activeAlternativeCommands.add(p.desc.id),d.invokeFunction((function(e){return o.runEditorCommand(e,n,i,r).finally((function(){t._activeAlternativeCommands.delete(p.desc.id)}))}))}return[2]}))}));return function(t){return e.apply(this,arguments)}}(),(function(e){o.error(e)})).finally((function(){v.dispose()}));return l.showWhile(m,250),m}},{key:"_onResult",value:function(e,t,n,i,r){var o=this;return s((function(){var a,s,l,u;return E(this,(function(c){switch(c.label){case 0:return a=o._getGoToPreference(n),n instanceof cae||!(o.configuration.openInPeek||"peek"===a&&i.references.length>1)?[3,1]:(o._openInPeek(n,i,r),[3,3]);case 1:return s=i.firstReference(),l=i.references.length>1&&"gotoAndPeek"===a,[4,o._openReference(n,e,s,o.configuration.openToSide,!l)];case 2:u=c.sent(),l&&u?o._openInPeek(u,i,r):i.dispose(),"goto"===a&&t.put(s),c.label=3;case 3:return[2]}}))}))()}},{key:"_openReference",value:function(e,t,n,i,r){return s((function(){var o,a,s,l;return E(this,(function(u){switch(u.label){case 0:return o=void 0,function(e){return e&&ed.isUri(e.uri)&&hd.isIRange(e.range)&&(hd.isIRange(e.originSelectionRange)||hd.isIRange(e.targetSelectionRange))}(n)&&(o=n.targetSelectionRange),o||(o=n.range),o?[4,t.openCodeEditor({resource:n.uri,options:{selection:hd.collapseToStart(o),selectionRevealType:3,selectionSource:"code.jump"}},e,i)]:[2,void 0];case 1:return(a=u.sent())?(r&&(s=a.getModel(),l=a.createDecorationsCollection([{range:o,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]),setTimeout((function(){a.getModel()===s&&l.clear()}),350)),[2,a]):[2,void 0]}}))}))()}},{key:"_openInPeek",value:function(e,t,n){var i=nse.get(e);i&&e.hasModel()?i.toggleWidget(null!=n?n:e.getSelection(),hg((function(e){return Promise.resolve(t)})),this.configuration.openInPeek):t.dispose()}}],[{key:"all",value:function(){return t._allSymbolNavigationCommands.values()}},{key:"_patchConfig",value:function(e){var t=b(_({},e),{f1:!0});if(t.menu){var n=!0,i=!1,r=void 0;try{for(var o,a=Ts.wrap(t.menu)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.id!==d_.EditorContext&&s.id!==d_.EditorContextPeek||(s.when=Sy.and(e.precondition,s.when))}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}return t}}]),t}(R_);kse._allSymbolNavigationCommands=new Map,kse._activeAlternativeCommands=new Set;var wse=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_getLocationModel",value:function(e,t,n,i){return s((function(){var r;return E(this,(function(o){switch(o.label){case 0:return r=Aae.bind,[4,fse(e.definitionProvider,t,n,!1,i)];case 1:return[2,new(r.apply(Aae,[void 0,o.sent(),Xa("def.title","Definitions")]))]}}))}))()}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?Xa("noResultWord","No definition found for '{0}'",e.word):Xa("generic.noResults","No definition found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(58).alternativeDefinitionCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(58).multipleDefinitions}}]),t}(kse);y_((Vt=function(e){function t(){var e;return u(this,t),e=l(this,t,[{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:t.id,title:b(_({},Ja("actions.goToDecl.label","Go to Definition")),{mnemonicTitle:Xa({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")}),precondition:p0.hasDefinitionProvider,keybinding:[{when:p0.editorTextFocus,primary:70,weight:100},{when:Sy.and(p0.editorTextFocus,uq),primary:2118,weight:100}],menu:[{id:d_.EditorContext,group:"navigation",order:1.1},{id:d_.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}]),sy.registerCommandAlias("editor.action.goToDeclaration",t.id),e}return p(t,e),t}(wse),Vt.id="editor.action.revealDefinition",Vt)),y_((zt=function(e){function t(){var e;return u(this,t),e=l(this,t,[{openToSide:!0,openInPeek:!1,muteMessage:!1},{id:t.id,title:Ja("actions.goToDeclToSide.label","Open Definition to the Side"),precondition:Sy.and(p0.hasDefinitionProvider,p0.isInEmbeddedEditor.toNegated()),keybinding:[{when:p0.editorTextFocus,primary:pc(2089,70),weight:100},{when:Sy.and(p0.editorTextFocus,uq),primary:pc(2089,2118),weight:100}]}]),sy.registerCommandAlias("editor.action.openDeclarationToTheSide",t.id),e}return p(t,e),t}(wse),zt.id="editor.action.revealDefinitionAside",zt)),y_((Ut=function(e){function t(){var e;return u(this,t),e=l(this,t,[{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:t.id,title:Ja("actions.previewDecl.label","Peek Definition"),precondition:Sy.and(p0.hasDefinitionProvider,pae.notInPeekEditor,p0.isInEmbeddedEditor.toNegated()),keybinding:{when:p0.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:d_.EditorContextPeek,group:"peek",order:2}}]),sy.registerCommandAlias("editor.action.previewDeclaration",t.id),e}return p(t,e),t}(wse),Ut.id="editor.action.peekDefinition",Ut));var Cse=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_getLocationModel",value:function(e,t,n,i){return s((function(){var r;return E(this,(function(o){switch(o.label){case 0:return r=Aae.bind,[4,gse(e.declarationProvider,t,n,!1,i)];case 1:return[2,new(r.apply(Aae,[void 0,o.sent(),Xa("decl.title","Declarations")]))]}}))}))()}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?Xa("decl.noResultWord","No declaration found for '{0}'",e.word):Xa("decl.generic.noResults","No declaration found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(58).alternativeDeclarationCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(58).multipleDeclarations}}]),t}(kse);y_((jt=function(e){function t(){return u(this,t),l(this,t,[{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:t.id,title:b(_({},Ja("actions.goToDeclaration.label","Go to Declaration")),{mnemonicTitle:Xa({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")}),precondition:Sy.and(p0.hasDeclarationProvider,p0.isInEmbeddedEditor.toNegated()),menu:[{id:d_.EditorContext,group:"navigation",order:1.3},{id:d_.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]}])}return p(t,e),h(t,[{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?Xa("decl.noResultWord","No declaration found for '{0}'",e.word):Xa("decl.generic.noResults","No declaration found")}}]),t}(Cse),jt.id="editor.action.revealDeclaration",jt)),y_(function(e){function t(){return u(this,t),l(this,t,[{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:Ja("actions.peekDecl.label","Peek Declaration"),precondition:Sy.and(p0.hasDeclarationProvider,pae.notInPeekEditor,p0.isInEmbeddedEditor.toNegated()),menu:{id:d_.EditorContextPeek,group:"peek",order:3}}])}return p(t,e),t}(Cse));var Sse=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_getLocationModel",value:function(e,t,n,i){return s((function(){var r;return E(this,(function(o){switch(o.label){case 0:return r=Aae.bind,[4,pse(e.typeDefinitionProvider,t,n,!1,i)];case 1:return[2,new(r.apply(Aae,[void 0,o.sent(),Xa("typedef.title","Type Definitions")]))]}}))}))()}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?Xa("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):Xa("goToTypeDefinition.generic.noResults","No type definition found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(58).alternativeTypeDefinitionCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(58).multipleTypeDefinitions}}]),t}(kse);y_((Kt=function(e){function t(){return u(this,t),l(this,t,[{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:t.ID,title:b(_({},Ja("actions.goToTypeDefinition.label","Go to Type Definition")),{mnemonicTitle:Xa({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")}),precondition:p0.hasTypeDefinitionProvider,keybinding:{when:p0.editorTextFocus,primary:0,weight:100},menu:[{id:d_.EditorContext,group:"navigation",order:1.4},{id:d_.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]}])}return p(t,e),t}(Sse),Kt.ID="editor.action.goToTypeDefinition",Kt)),y_((qt=function(e){function t(){return u(this,t),l(this,t,[{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:t.ID,title:Ja("actions.peekTypeDefinition.label","Peek Type Definition"),precondition:Sy.and(p0.hasTypeDefinitionProvider,pae.notInPeekEditor,p0.isInEmbeddedEditor.toNegated()),menu:{id:d_.EditorContextPeek,group:"peek",order:4}}])}return p(t,e),t}(Sse),qt.ID="editor.action.peekTypeDefinition",qt));var xse=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_getLocationModel",value:function(e,t,n,i){return s((function(){var r;return E(this,(function(o){switch(o.label){case 0:return r=Aae.bind,[4,vse(e.implementationProvider,t,n,!1,i)];case 1:return[2,new(r.apply(Aae,[void 0,o.sent(),Xa("impl.title","Implementations")]))]}}))}))()}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?Xa("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):Xa("goToImplementation.generic.noResults","No implementation found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(58).alternativeImplementationCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(58).multipleImplementations}}]),t}(kse);y_((Gt=function(e){function t(){return u(this,t),l(this,t,[{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:t.ID,title:b(_({},Ja("actions.goToImplementation.label","Go to Implementations")),{mnemonicTitle:Xa({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")}),precondition:p0.hasImplementationProvider,keybinding:{when:p0.editorTextFocus,primary:2118,weight:100},menu:[{id:d_.EditorContext,group:"navigation",order:1.45},{id:d_.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]}])}return p(t,e),t}(xse),Gt.ID="editor.action.goToImplementation",Gt)),y_((Zt=function(e){function t(){return u(this,t),l(this,t,[{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:t.ID,title:Ja("actions.peekImplementation.label","Peek Implementations"),precondition:Sy.and(p0.hasImplementationProvider,pae.notInPeekEditor,p0.isInEmbeddedEditor.toNegated()),keybinding:{when:p0.editorTextFocus,primary:3142,weight:100},menu:{id:d_.EditorContextPeek,group:"peek",order:5}}])}return p(t,e),t}(xse),Zt.ID="editor.action.peekImplementation",Zt));var Lse=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_getNoResultFoundMessage",value:function(e){return e?Xa("references.no","No references found for '{0}'",e.word):Xa("references.noGeneric","No references found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(58).alternativeReferenceCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(58).multipleReferences}}]),t}(kse);y_(function(e){function t(){return u(this,t),l(this,t,[{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:b(_({},Ja("goToReferences.label","Go to References")),{mnemonicTitle:Xa({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")}),precondition:Sy.and(p0.hasReferenceProvider,pae.notInPeekEditor,p0.isInEmbeddedEditor.toNegated()),keybinding:{when:p0.editorTextFocus,primary:1094,weight:100},menu:[{id:d_.EditorContext,group:"navigation",order:1.45},{id:d_.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]}])}return p(t,e),h(t,[{key:"_getLocationModel",value:function(e,t,n,i){return s((function(){var r;return E(this,(function(o){switch(o.label){case 0:return r=Aae.bind,[4,mse(e.referenceProvider,t,n,!0,!1,i)];case 1:return[2,new(r.apply(Aae,[void 0,o.sent(),Xa("ref.title","References")]))]}}))}))()}}]),t}(Lse)),y_(function(e){function t(){return u(this,t),l(this,t,[{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:Ja("references.action.label","Peek References"),precondition:Sy.and(p0.hasReferenceProvider,pae.notInPeekEditor,p0.isInEmbeddedEditor.toNegated()),menu:{id:d_.EditorContextPeek,group:"peek",order:6}}])}return p(t,e),h(t,[{key:"_getLocationModel",value:function(e,t,n,i){return s((function(){var r;return E(this,(function(o){switch(o.label){case 0:return r=Aae.bind,[4,mse(e.referenceProvider,t,n,!1,!1,i)];case 1:return[2,new(r.apply(Aae,[void 0,o.sent(),Xa("ref.title","References")]))]}}))}))()}}]),t}(Lse));var Dse=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[e,{id:"editor.action.goToLocation",title:Ja("label.generic","Go to Any Symbol"),precondition:Sy.and(pae.notInPeekEditor,p0.isInEmbeddedEditor.toNegated())}]))._references=n,r._gotoMultipleBehaviour=i,r}return p(t,e),h(t,[{key:"_getLocationModel",value:function(e,t,n,i){var r=this;return s((function(){return E(this,(function(e){return[2,new Aae(r._references,Xa("generic.title","Locations"))]}))}))()}},{key:"_getNoResultFoundMessage",value:function(e){return e&&Xa("generic.noResult","No results for '{0}'",e.word)||""}},{key:"_getGoToPreference",value:function(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(58).multipleReferences}},{key:"_getAlternativeCommand",value:function(){return""}}]),t}(kse);function Nse(e,t,n,i){return Ise.apply(this,arguments)}function Ise(){return Ise=s((function(e,t,n,i){var r,o,a,l,u,c,d,h,f,g,v,p,m,y,_,b,k;return E(this,(function(w){switch(w.label){case 0:return r=e.get(Xm),o=e.get(GI),a=e.get(ay),l=e.get(Gm),u=e.get(rx),[4,i.item.resolve(Uu.None)];case 1:if(w.sent(),!i.part.location)return[2];c=i.part.location,d=[],h=new Set(g_.getMenuItems(d_.EditorContext).map((function(e){return c_(e)?e.command.id:lte()}))),f=!0,g=!1,v=void 0;try{for(p=function(){var e=y.value;h.has(e.desc.id)&&d.push(new $m(e.desc.id,p_.label(e.desc,{renderShortTitle:!0}),void 0,!0,s((function(){var n,o,a;return E(this,(function(s){switch(s.label){case 0:return[4,r.createModelReference(c.uri)];case 1:n=s.sent(),s.label=2;case 2:return s.trys.push([2,,4,5]),o=new bse(n.object.textEditorModel,hd.getStartPosition(c.range)),a=i.item.anchor.range,[4,l.invokeFunction(e.runEditorCommand.bind(e),t,o,a)];case 3:return s.sent(),[3,5];case 4:return n.dispose(),[7];case 5:return[2]}}))}))))},m=kse.all()[Symbol.iterator]();!(f=(y=m.next()).done);f=!0)p()}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}return i.part.command&&(_=i.part.command,d.push(new ey),d.push(new $m(_.id,_.title,void 0,!0,s((function(){var e,t,n;return E(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(e=a).executeCommand.apply(e,[_.id].concat(x(null!==(t=_.arguments)&&void 0!==t?t:[])))];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),u.notify({severity:ix.Error,source:i.item.provider.displayName,message:n}),[3,3];case 3:return[2]}}))}))))),b=t.getOption(128),o.showContextMenu({domForShadowRoot:b&&null!==(k=t.getDomNode())&&void 0!==k?k:void 0,getAnchor:function(){var e=xp(n);return{x:e.left,y:e.top+e.height+8}},getActions:function(){return d},onHide:function(){t.focus()},autoSelectFirstItem:!0}),[2]}}))})),Ise.apply(this,arguments)}function Ese(e,t,n,i){return Mse.apply(this,arguments)}function Mse(){return Mse=s((function(e,t,n,i){var r;return E(this,(function(o){switch(o.label){case 0:return[4,e.get(Xm).createModelReference(i.uri)];case 1:return r=o.sent(),[4,n.invokeWithinContext(function(){var e=s((function(e){var o,a,s,l;return E(this,(function(u){return o=t.hasSideBySideModifier,a=e.get(Ky),s=pae.inPeekEditor.getValue(a),l=!o&&n.getOption(89)&&!s,[2,new wse({openToSide:o,openInPeek:l,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(e,new bse(r.object.textEditorModel,hd.getStartPosition(i.range)),hd.lift(i.range))]}))}));return function(t){return e.apply(this,arguments)}}())];case 2:return o.sent(),r.dispose(),[2]}}))})),Mse.apply(this,arguments)}sy.registerCommand({id:"editor.action.goToLocations",metadata:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:ed},{name:"position",description:"The position at which to start",constraint:dd.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:function(){var e=s((function(e,t,n,i,r,o,a){var s,c;return E(this,(function(d){switch(d.label){case 0:return Oa(ed.isUri(t)),Oa(dd.isIPosition(n)),Oa(Array.isArray(i)),Oa(void 0===r||"string"==typeof r),Oa(void 0===a||"boolean"==typeof a),[4,(s=e.get(Ym)).openCodeEditor({resource:t},s.getFocusedCodeEditor())];case 1:return T9(c=d.sent())?(c.setPosition(n),c.revealPositionInCenterIfOutsideViewport(n,0),[2,c.invokeWithinContext((function(e){var t=new(function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_getNoResultFoundMessage",value:function(e){return o||g(v(t.prototype),"_getNoResultFoundMessage",this).call(this,e)}}]),t}(Dse))({muteMessage:!Boolean(o),openInPeek:Boolean(a),openToSide:!1},i,r);e.get(Gm).invokeFunction(t.run.bind(t),c)}))]):[2]}}))}));return function(t,n,i,r,o,a,s){return e.apply(this,arguments)}}()}),sy.registerCommand({id:"editor.action.peekLocations",metadata:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:ed},{name:"position",description:"The position at which to start",constraint:dd.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:function(){var e=s((function(e,t,n,i,r){return E(this,(function(o){return e.get(ay).executeCommand("editor.action.goToLocations",t,n,i,r,void 0,!0),[2]}))}));return function(t,n,i,r,o){return e.apply(this,arguments)}}()}),sy.registerCommand({id:"editor.action.findReferences",handler:function(e,t,n){Oa(ed.isUri(t)),Oa(dd.isIPosition(n));var i=e.get(wS),r=e.get(Ym);return r.openCodeEditor({resource:t},r.getFocusedCodeEditor()).then((function(e){if(T9(e)&&e.hasModel()){var t=nse.get(e);if(t){var r=hg((function(t){return mse(i.referenceProvider,e.getModel(),dd.lift(n),!1,!1,t).then((function(e){return new Aae(e,Xa("ref.title","References"))}))})),o=new hd(n.lineNumber,n.column,n.lineNumber,n.column);return Promise.resolve(t.toggleWidget(o,r,!1))}}}))}}),sy.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");var Tse,Rse=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ase=function(e,t){return function(n,i){t(n,i,e)}},Pse=function(){function e(){u(this,e),this._entries=new pw(50)}return h(e,[{key:"get",value:function(t){var n=e._key(t);return this._entries.get(n)}},{key:"set",value:function(t,n){var i=e._key(t);this._entries.set(i,n)}}],[{key:"_key",value:function(e){return"".concat(e.uri.toString(),"/").concat(e.getVersionId())}}]),e}(),Ose=Zm("IInlayHintsCache");nk(Ose,Pse,1);var Fse=function(){function e(t,n){u(this,e),this.item=t,this.index=n}return h(e,[{key:"part",get:function(){var e=this.item.hint.label;return"string"==typeof e?{label:e}:e[this.index]}}]),e}(),Wse=function e(t,n){u(this,e),this.part=t,this.hasTriggerModifier=n},Bse=(Yt=function(){function e(t,n,i,r,o,a,s){var l=this;u(this,e),this._editor=t,this._languageFeaturesService=n,this._inlayHintsCache=r,this._commandService=o,this._notificationService=a,this._instaService=s,this._disposables=new Tu,this._sessionDisposables=new Tu,this._decorationsMetadata=new Map,this._ruleFactory=new ZX(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(n.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(n.inlayHintsProvider.onDidChange((function(){return l._update()}))),this._disposables.add(t.onDidChangeModel((function(){return l._update()}))),this._disposables.add(t.onDidChangeModelLanguage((function(){return l._update()}))),this._disposables.add(t.onDidChangeConfiguration((function(e){e.hasChanged(142)&&l._update()}))),this._update()}return h(e,[{key:"dispose",value:function(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}},{key:"_update",value:function(){var e=this;this._sessionDisposables.clear(),this._removeAllDecorations();var t=this._editor.getOption(142);if("off"!==t.enabled){var n=this._editor.getModel();if(n&&this._languageFeaturesService.inlayHintsProvider.has(n)){var i,r;if("on"===t.enabled)this._activeRenderMode=0;else"onUnlessPressed"===t.enabled?(i=0,r=1):(i=1,r=0),this._activeRenderMode=i,this._sessionDisposables.add(Cm.getInstance().event((function(t){if(e._editor.hasModel()){var n=t.altKey&&t.ctrlKey&&!t.shiftKey&&!t.metaKey?r:i;if(n!==e._activeRenderMode){e._activeRenderMode=n;var o=e._editor.getModel(),a=e._copyInlayHintsWithCurrentAnchor(o);e._updateHintsDecorators([o.getFullModelRange()],a),c.schedule(0)}}})));var o,a=this._inlayHintsCache.get(n);a&&this._updateHintsDecorators([n.getFullModelRange()],a),this._sessionDisposables.add(Mu((function(){n.isDisposed()||e._cacheHintsForFastRestore(n)})));var l=new Set,u=this,c=new Sg(s((function(){var e,t,i,r,a,s,d,h,f,g;return E(this,(function(v){switch(v.label){case 0:e=Date.now(),null==o||o.dispose(!0),o=new rc,t=n.onWillDispose((function(){return null==o?void 0:o.cancel()})),v.label=1;case 1:return v.trys.push([1,3,4,5]),i=o.token,[4,sae.create(u._languageFeaturesService.inlayHintsProvider,n,u._getHintsRanges(),i)];case 2:if(r=v.sent(),c.delay=u._debounceInfo.update(n,Date.now()-e),i.isCancellationRequested)return r.dispose(),[2];a=!0,s=!1,d=void 0;try{for(h=r.provider[Symbol.iterator]();!(a=(f=h.next()).done);a=!0)"function"!=typeof(g=f.value).onDidChangeInlayHints||l.has(g)||(l.add(g),u._sessionDisposables.add(g.onDidChangeInlayHints((function(){c.isScheduled()||c.schedule()}))))}catch(e){s=!0,d=e}finally{try{a||null==h.return||h.return()}finally{if(s)throw d}}return u._sessionDisposables.add(r),u._updateHintsDecorators(r.ranges,r.items),u._cacheHintsForFastRestore(n),[3,5];case 3:return vu(v.sent()),[3,5];case 4:return o.dispose(),t.dispose(),[7];case 5:return[2]}}))})),this._debounceInfo.get(n));this._sessionDisposables.add(c),this._sessionDisposables.add(Mu((function(){return null==o?void 0:o.dispose(!0)}))),c.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange((function(e){!e.scrollTopChanged&&c.isScheduled()||c.schedule()}))),this._sessionDisposables.add(this._editor.onDidChangeModelContent((function(e){null==o||o.cancel();var t=Math.max(c.delay,1250);c.schedule(t)}))),this._sessionDisposables.add(this._installDblClickGesture((function(){return c.schedule(0)}))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}}}},{key:"_installLinkGesture",value:function(){var e=this,t=new Tu,n=t.add(new rae(this._editor)),i=new Tu;t.add(i),t.add(n.onMouseMoveOrRelevantKeyDown((function(t){var n=C(t,1)[0],r=e._getInlayHintLabelPart(n),o=e._editor.getModel();if(r&&o){var a=new rc;i.add(Mu((function(){return a.dispose(!0)}))),r.item.resolve(a.token),e._activeInlayHintPart=r.part.command||r.part.location?new Wse(r,n.hasTriggerModifier):void 0;var s=o.validatePosition(r.item.hint.position).lineNumber,l=new hd(s,1,s,o.getLineMaxColumn(s)),u=e._getInlineHintsForRange(l);e._updateHintsDecorators([l],u),i.add(Mu((function(){e._activeInlayHintPart=void 0,e._updateHintsDecorators([l],u)})))}else i.clear()}))),t.add(n.onCancel((function(){return i.clear()})));var r=this;return t.add(n.onExecute(function(){var e=s((function(e){var t,n;return E(this,(function(i){switch(i.label){case 0:return(t=r._getInlayHintLabelPart(e))?(n=t.part).location?(r._instaService.invokeFunction(Ese,e,r._editor,n.location),[3,3]):[3,1]:[3,3];case 1:return Od.is(n.command)?[4,r._invokeCommand(n.command,t.item)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}())),t}},{key:"_getInlineHintsForRange",value:function(e){var t=new Set,n=!0,i=!1,r=void 0;try{for(var o,a=this._decorationsMetadata.values()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.containsRange(s.item.anchor.range)&&t.add(s.item)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return Array.from(t)}},{key:"_installDblClickGesture",value:function(e){var t=this;return this._editor.onMouseUp(function(){var n=s((function(n){var i,r;return E(this,(function(o){switch(o.label){case 0:return 2!==n.event.detail?[2]:(i=t._getInlayHintLabelPart(n))?(n.event.preventDefault(),[4,i.item.resolve(Uu.None)]):[2];case 1:return o.sent(),ua(i.item.hint.textEdits)&&(r=i.item.hint.textEdits.map((function(e){return lA.replace(hd.lift(e.range),e.text)})),t._editor.executeEdits("inlayHint.default",r),e()),[2]}}))}));return function(e){return n.apply(this,arguments)}}())}},{key:"_installContextMenu",value:function(){var e=this;return this._editor.onContextMenu(function(){var t=s((function(t){var n;return E(this,(function(i){switch(i.label){case 0:return Jp(t.event.target)?(n=e._getInlayHintLabelPart(t))?[4,e._instaService.invokeFunction(Nse,e._editor,t.event.target,n)]:[3,2]:[2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}));return function(e){return t.apply(this,arguments)}}())}},{key:"_getInlayHintLabelPart",value:function(e){var t;if(6===e.target.type){var n=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return n instanceof uU&&(null==n?void 0:n.attachedData)instanceof Fse?n.attachedData:void 0}}},{key:"_invokeCommand",value:function(e,t){var n=this;return s((function(){var i,r,o;return E(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(i=n._commandService).executeCommand.apply(i,[e.id].concat(x(null!==(r=e.arguments)&&void 0!==r?r:[])))];case 1:return a.sent(),[3,3];case 2:return o=a.sent(),n._notificationService.notify({severity:ix.Error,source:t.provider.displayName,message:o}),[3,3];case 3:return[2]}}))}))()}},{key:"_cacheHintsForFastRestore",value:function(e){var t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}},{key:"_copyInlayHintsWithCurrentAnchor",value:function(e){var t=new Map,n=!0,i=!1,r=void 0;try{for(var o,a=this._decorationsMetadata[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2),l=s[0],u=s[1];if(!t.has(u.item)){var c=e.getDecorationRange(l);if(c){var d=new oae(c,u.item.anchor.direction),h=u.item.with({anchor:d});t.set(u.item,h)}}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return Array.from(t.values())}},{key:"_getHintsRanges",value:function(){var e=30,t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[],r=!0,o=!1,a=void 0;try{for(var s,l=n.sort(hd.compareRangesUsingStarts)[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=t.validateRange(new hd(u.startLineNumber-30,u.startColumn,u.endLineNumber+30,u.endColumn));0!==i.length&&hd.areIntersectingOrTouching(i[i.length-1],c)?i[i.length-1]=hd.plusRange(i[i.length-1],c):i.push(c)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return i}},{key:"_updateHintsDecorators",value:function(e,t){var n=this,i=[],r=function(e,t,r,o,a){var s={content:r,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:t.className,cursorStops:o,attachedData:a};i.push({item:e,classNameRef:t,decoration:{range:e.anchor.range,options:f({description:"InlayHint",showIfCollapsed:e.anchor.range.isEmpty(),collapseOnReplaceEdit:!e.anchor.range.isEmpty(),stickiness:0},e.anchor.direction,0===n._activeRenderMode?s:void 0)}})},o=function(e,t){var i=n._ruleFactory.createClassNameRef({width:"".concat(s/3|0,"px"),display:"inline-block"});r(e,i," ",t?fw.Right:fw.None)},a=this._getLayoutInfo(),s=a.fontSize,l=a.fontFamily,u=a.padding,c=a.isUniform,d="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(d,l);var h={line:0,totalLen:0},g=!0,v=!1,p=void 0;try{for(var m,y=t[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var _=m.value;if(h.line!==_.anchor.range.startLineNumber&&(h={line:_.anchor.range.startLineNumber,totalLen:0}),!(h.totalLen>Tse._MAX_LABEL_LEN)){_.hint.paddingLeft&&o(_,!1);for(var b="string"==typeof _.hint.label?[{label:_.hint.label}]:_.hint.label,k=0;k<b.length;k++){var w,S=b[k],x=0===k,L=k===b.length-1,D={fontSize:"".concat(s,"px"),fontFamily:"var(".concat(d,"), ").concat(uu.fontFamily),verticalAlign:c?"baseline":"middle",unicodeBidi:"isolate"};ua(_.hint.textEdits)&&(D.cursor="default"),this._fillInColors(D,_.hint),(S.command||S.location)&&(null===(w=this._activeInlayHintPart)||void 0===w?void 0:w.part.item)===_&&this._activeInlayHintPart.part.index===k&&(D.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(D.color=OS(gD),D.cursor="pointer")),u&&(x&&L?(D.padding="1px ".concat(0|Math.max(1,s/4),"px"),D.borderRadius="".concat(s/4|0,"px")):x?(D.padding="1px 0 1px ".concat(0|Math.max(1,s/4),"px"),D.borderRadius="".concat(s/4|0,"px 0 0 ").concat(s/4|0,"px")):L?(D.padding="1px ".concat(0|Math.max(1,s/4),"px 1px 0"),D.borderRadius="0 ".concat(s/4|0,"px ").concat(s/4|0,"px 0")):D.padding="1px 0 1px 0");var N=S.label;h.totalLen+=N.length;var I=!1,E=h.totalLen-Tse._MAX_LABEL_LEN;if(E>0&&(N=N.slice(0,-E)+"…",I=!0),r(_,this._ruleFactory.createClassNameRef(D),Hse(N),L&&!_.hint.paddingRight?fw.Right:fw.None,new Fse(_,k)),I)break}if(_.hint.paddingRight&&o(_,!0),i.length>Tse._MAX_DECORATORS)break}}}catch(e){v=!0,p=e}finally{try{g||null==y.return||y.return()}finally{if(v)throw p}}var M=[],T=!0,R=!1,A=void 0;try{for(var P,O,F=function(){var t,n=C(O.value,2),i=n[0],r=n[1],o=null===(t=P._editor.getModel())||void 0===t?void 0:t.getDecorationRange(i);o&&e.some((function(e){return e.containsRange(o)}))&&(M.push(i),r.classNameRef.dispose(),P._decorationsMetadata.delete(i))},W=this._decorationsMetadata[Symbol.iterator]();!(T=(O=W.next()).done);T=!0)P=this,F()}catch(e){R=!0,A=e}finally{try{T||null==W.return||W.return()}finally{if(R)throw A}}var B=g3.capture(this._editor);this._editor.changeDecorations((function(e){for(var t=e.deltaDecorations(M,i.map((function(e){return e.decoration}))),r=0;r<t.length;r++){var o=i[r];n._decorationsMetadata.set(t[r],o)}})),B.restore(this._editor)}},{key:"_fillInColors",value:function(e,t){t.kind===Fd.Parameter?(e.backgroundColor=OS(MD),e.color=OS(ED)):t.kind===Fd.Type?(e.backgroundColor=OS(ID),e.color=OS(ND)):(e.backgroundColor=OS(DD),e.color=OS(LD))}},{key:"_getLayoutInfo",value:function(){var e=this._editor.getOption(142),t=e.padding,n=this._editor.getOption(52),i=this._editor.getOption(49),r=e.fontSize;(!r||r<5||r>n)&&(r=n);var o=e.fontFamily||i;return{fontSize:r,fontFamily:o,padding:t,isUniform:!t&&o===i&&r===n}}},{key:"_removeAllDecorations",value:function(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));var e=!0,t=!1,n=void 0;try{for(var i,r=this._decorationsMetadata.values()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.classNameRef.dispose()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this._decorationsMetadata.clear()}}],[{key:"get",value:function(e){var t;return null!==(t=e.getContribution(Tse.ID))&&void 0!==t?t:void 0}}]),e}(),Tse=Yt,Yt.ID="editor.contrib.InlayHints",Yt._MAX_DECORATORS=1500,Yt._MAX_LABEL_LEN=43,Yt);function Hse(e){return e.replace(/[ \t]/g," ")}Bse=Tse=Rse([Ase(1,wS),Ase(2,Ix),Ase(3,Ose),Ase(4,ay),Ase(5,rx),Ase(6,Gm)],Bse),sy.registerCommand("_executeInlayHintProvider",function(){var e=s((function(e){var t,n,i,r,o,a,s,l,u,c,d=arguments;return E(this,(function(h){switch(h.label){case 0:for(t=d.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=d[i];return r=C(n,2),o=r[0],a=r[1],Oa(ed.isUri(o)),Oa(hd.isIRange(a)),s=e.get(wS).inlayHintsProvider,[4,e.get(Xm).createModelReference(o)];case 1:l=h.sent(),h.label=2;case 2:return h.trys.push([2,,4,5]),[4,sae.create(s,l.object.textEditorModel,[hd.lift(a)],Uu.None)];case 3:return u=h.sent(),c=u.items.map((function(e){return e.hint})),setTimeout((function(){return u.dispose()}),0),[2,c];case 4:return l.dispose(),[7];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}());var Vse=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},zse=function(e,t){return function(n,i){t(n,i,e)}},Use=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t,[10,n,e.item.anchor.range,i,r,!0])).part=e,o}return p(t,e),t}(zre),jse=function(e){function t(e,n,i,r,o,a,s,c,d){var h;return u(this,t),(h=l(this,t,[e,n,i,a,c,r,o,d]))._resolverService=s,h.hoverOrdinal=6,h}return p(t,e),h(t,[{key:"suggestHoverAnchor",value:function(e){var t;if(!Bse.get(this._editor))return null;if(6!==e.target.type)return null;var n=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return n instanceof uU&&n.attachedData instanceof Fse?new Use(n.attachedData,this,e.event.posx,e.event.posy):null}},{key:"computeSync",value:function(){return[]}},{key:"computeAsync",value:function(e,t,n){if(!(e instanceof Use))return Eg.EMPTY;var i=this;return new Eg(function(){var t=s((function(t){var o,a,s,l,u,c,d,h,f,g,v,p,m,y,_;return E(this,(function(b){switch(b.label){case 0:return[4,(o=e.part).item.resolve(n)];case 1:return b.sent(),n.isCancellationRequested?[2]:("string"==typeof o.item.hint.tooltip?a=(new oT).appendText(o.item.hint.tooltip):o.item.hint.tooltip&&(a=o.item.hint.tooltip),a&&t.emitOne(new Goe(i,e.range,[a],!1,0)),ua(o.item.hint.textEdits)&&t.emitOne(new Goe(i,e.range,[(new oT).appendText(Xa("hint.dbl","Double-click to insert"))],!1,10001)),"string"==typeof o.part.tooltip?s=(new oT).appendText(o.part.tooltip):o.part.tooltip&&(s=o.part.tooltip),s&&t.emitOne(new Goe(i,e.range,[s],!1,1)),(o.part.location||o.part.command)&&(u="altKey"===i._editor.getOption(78),c=u?ms?Xa("links.navigate.kb.meta.mac","cmd + click"):Xa("links.navigate.kb.meta","ctrl + click"):ms?Xa("links.navigate.kb.alt.mac","option + click"):Xa("links.navigate.kb.alt","alt + click"),o.part.location&&o.part.command?l=(new oT).appendText(Xa("hint.defAndCommand","Go to Definition ({0}), right click for more",c)):o.part.location?l=(new oT).appendText(Xa("hint.def","Go to Definition ({0})",c)):o.part.command&&(l=new oT("[".concat(Xa("hint.cmd","Execute Command"),"](").concat(function(e){return ed.from({scheme:Pv.command,path:e.id,query:e.arguments&&encodeURIComponent(JSON.stringify(e.arguments))}).toString()}(o.part.command),' "').concat(o.part.command.title,'") (').concat(c,")"),{isTrusted:!0})),l&&t.emitOne(new Goe(i,e.range,[l],!1,1e4))),[4,i._resolveInlayHintLabelPartHover(o,n)]);case 2:d=b.sent(),h=!1,f=!1,b.label=3;case 3:b.trys.push([3,8,9,14]),v=r(d),b.label=4;case 4:return[4,v.next()];case 5:if(!(h=!(p=b.sent()).done))return[3,7];m=p.value,y=m,t.emitOne(y),b.label=6;case 6:return h=!1,[3,4];case 7:return[3,14];case 8:return _=b.sent(),f=!0,g=_,[3,14];case 9:return b.trys.push([9,,12,13]),h&&null!=v.return?[4,v.return()]:[3,11];case 10:b.sent(),b.label=11;case 11:return[3,13];case 12:if(f)throw g;return[7];case 13:return[7];case 14:return[2]}}))}));return function(e){return t.apply(this,arguments)}}())}},{key:"_resolveInlayHintLabelPartHover",value:function(e,t){var n=this;return s((function(){var i,r,o,a,s;return E(this,(function(l){switch(l.label){case 0:return e.part.location?(i=e.part.location,r=i.uri,o=i.range,[4,n._resolverService.createModelReference(r)]):[2,Eg.EMPTY];case 1:a=l.sent();try{return s=a.object.textEditorModel,n._languageFeaturesService.hoverProvider.has(s)?[2,Hoe(n._languageFeaturesService.hoverProvider,s,new dd(o.startLineNumber,o.startColumn),t).filter((function(e){return!aT(e.hover.contents)})).map((function(t){return new Goe(n,e.item.anchor.range,t.hover.contents,!1,2+t.ordinal)}))]:[2,Eg.EMPTY]}finally{a.dispose()}return[2]}}))}))()}}]),t}(Yoe);jse=Vse([zse(1,Jb),zse(2,xE),zse(3,ZI),zse(4,jI),zse(5,qb),zse(6,Xm),zse(7,wS),zse(8,ay)],jse);var Kse=function(e){function t(e,n,i,r,o,a){var s;u(this,t),s=l(this,t);var c=n.anchor,d=n.hoverParts;s._renderedHoverParts=s._register(new Gse(e,i,d,a,o));var h=t.computeHoverPositions(e,c.range,d),f=h.showAtPosition,g=h.showAtSecondaryPosition;return s.shouldAppearBeforeContent=d.some((function(e){return e.isBeforeContent})),s.showAtPosition=f,s.showAtSecondaryPosition=g,s.initialMousePosX=c.initialMousePosX,s.initialMousePosY=c.initialMousePosY,s.shouldFocus=r.shouldFocus,s.source=r.source,s}return p(t,e),h(t,[{key:"domNode",get:function(){return this._renderedHoverParts.domNode}},{key:"domNodeHasChildren",get:function(){return this._renderedHoverParts.domNodeHasChildren}},{key:"focusedHoverPartIndex",get:function(){return this._renderedHoverParts.focusedHoverPartIndex}},{key:"updateHoverVerbosityLevel",value:function(e,t,n){var i=this;return s((function(){return E(this,(function(r){return i._renderedHoverParts.updateHoverVerbosityLevel(e,t,n),[2]}))}))()}},{key:"isColorPickerVisible",value:function(){return this._renderedHoverParts.isColorPickerVisible()}}],[{key:"computeHoverPositions",value:function(e,t,n){var i=1;if(e.hasModel()){var r=e._getViewModel(),o=r.coordinatesConverter,a=o.convertModelRangeToViewRange(t),s=r.getLineMinColumn(a.startLineNumber),l=new dd(a.startLineNumber,s);i=o.convertViewPositionToModelPosition(l).column}var u,c,d,h=t.startLineNumber,f=t.startColumn,g=!0,v=!1,p=void 0;try{for(var m,y=n[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var _=m.value,b=_.range,k=b.startLineNumber===h,w=b.endLineNumber===h;if(k&&w){var C=b.startColumn,S=Math.min(f,C);f=Math.max(S,i)}_.forceShowAtRange&&(u=b)}}catch(e){v=!0,p=e}finally{try{g||null==y.return||y.return()}finally{if(v)throw p}}if(u){var x=u.getStartPosition();c=x,d=x}else c=t.getStartPosition(),d=new dd(h,f);return{showAtPosition:c,showAtSecondaryPosition:d}}}]),t}(Ru),qse=function(){function e(t,n){u(this,e),this._statusBar=n,t.appendChild(this._statusBar.hoverElement)}return h(e,[{key:"hoverElement",get:function(){return this._statusBar.hoverElement}},{key:"actions",get:function(){return this._statusBar.actions}},{key:"dispose",value:function(){this._statusBar.dispose()}}]),e}(),Gse=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t))._renderedParts=[],a._focusedHoverPartIndex=-1,a._context=o,a._fragment=document.createDocumentFragment(),a._register(a._renderParts(n,i,o,r)),a._register(a._registerListenersOnRenderedParts()),a._register(a._createEditorDecorations(e,i)),a._updateMarkdownAndColorParticipantInfo(n),a}return p(t,e),h(t,[{key:"_createEditorDecorations",value:function(e,n){if(0===n.length)return Ru.None;var i=n[0].range,r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value.range;i=hd.plusRange(i,u)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}var c=e.createDecorationsCollection();return c.set([{range:i,options:t._DECORATION_OPTIONS}]),Mu((function(){c.clear()}))}},{key:"_renderParts",value:function(e,t,n,i){var r=new Foe(i),o=_({fragment:this._fragment,statusBar:r},n),a=new Tu,s=!0,l=!1,u=void 0;try{for(var c,d=e[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value,f=this._renderHoverPartsForParticipant(t,h,o);a.add(f);var g=!0,v=!1,p=void 0;try{for(var m,y=f.renderedHoverParts[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var b=m.value;this._renderedParts.push({type:"hoverPart",participant:h,hoverPart:b.hoverPart,hoverElement:b.hoverElement})}}catch(e){v=!0,p=e}finally{try{g||null==y.return||y.return()}finally{if(v)throw p}}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}var k=this._renderStatusBar(this._fragment,r);return k&&(a.add(k),this._renderedParts.push({type:"statusBar",hoverElement:k.hoverElement,actions:k.actions})),Mu((function(){a.dispose()}))}},{key:"_renderHoverPartsForParticipant",value:function(e,t,n){var i=e.filter((function(e){return e.owner===t}));return i.length>0?t.renderHoverParts(n,i):new Ure([])}},{key:"_renderStatusBar",value:function(e,t){if(t.hasContent)return new qse(e,t)}},{key:"_registerListenersOnRenderedParts",value:function(){var e=this,t=new Tu;return this._renderedParts.forEach((function(n,i){var r=n.hoverElement;r.tabIndex=0,t.add(cp(r,rm.FOCUS_IN,(function(t){t.stopPropagation(),e._focusedHoverPartIndex=i}))),t.add(cp(r,rm.FOCUS_OUT,(function(t){t.stopPropagation(),e._focusedHoverPartIndex=-1})))})),t}},{key:"_updateMarkdownAndColorParticipantInfo",value:function(e){var t=e.find((function(e){return e instanceof Yoe&&!(e instanceof jse)}));t&&(this._markdownHoverParticipant=t),this._colorHoverParticipant=e.find((function(e){return e instanceof Zre}))}},{key:"updateHoverVerbosityLevel",value:function(e,t,n){var i=this;return s((function(){var r,o;return E(this,(function(a){switch(a.label){case 0:return i._markdownHoverParticipant?void 0===(r=i._normalizedIndexToMarkdownHoverIndexRange(i._markdownHoverParticipant,t))?[2]:[4,i._markdownHoverParticipant.updateMarkdownHoverVerbosityLevel(e,r,n)]:[2];case 1:return(o=a.sent())?(i._renderedParts[t]={type:"hoverPart",participant:i._markdownHoverParticipant,hoverPart:o.hoverPart,hoverElement:o.hoverElement},i._context.onContentsChanged(),[2]):[2]}}))}))()}},{key:"isColorPickerVisible",value:function(){var e,t;return null!==(t=null===(e=this._colorHoverParticipant)||void 0===e?void 0:e.isColorPickerVisible())&&void 0!==t&&t}},{key:"_normalizedIndexToMarkdownHoverIndexRange",value:function(e,t){var n=this._renderedParts[t];if(n&&"hoverPart"===n.type&&n.participant===e){var i=this._renderedParts.findIndex((function(t){return"hoverPart"===t.type&&t.participant===e}));if(-1===i)throw new Lu;return t-i}}},{key:"domNode",get:function(){return this._fragment}},{key:"domNodeHasChildren",get:function(){return this._fragment.hasChildNodes()}},{key:"focusedHoverPartIndex",get:function(){return this._focusedHoverPartIndex}}]),t}(Ru);Gse._DECORATION_OPTIONS=cU.register({description:"content-hover-highlight",className:"hoverHighlight"});var Zse=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Yse=function(e,t){return function(n,i){t(n,i,e)}},Qse=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._editor=e,r._instantiationService=n,r._keybindingService=i,r._currentResult=null,r._onContentsChanged=r._register(new Zu),r.onContentsChanged=r._onContentsChanged.event,r._contentHoverWidget=r._register(r._instantiationService.createInstance(Ioe,r._editor)),r._participants=r._initializeHoverParticipants(),r._computer=new Moe(r._editor,r._participants),r._hoverOperation=r._register(new Soe(r._editor,r._computer)),r._registerListeners(),r}return p(t,e),h(t,[{key:"_initializeHoverParticipants",value:function(){var e=this,t=[],n=!0,i=!1,r=void 0;try{for(var o,a=jre.getAll()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=this._instantiationService.createInstance(s,this._editor);t.push(l)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t.sort((function(e,t){return e.hoverOrdinal-t.hoverOrdinal})),this._register(this._contentHoverWidget.onDidResize((function(){e._participants.forEach((function(e){var t;return null===(t=e.handleResize)||void 0===t?void 0:t.call(e)}))}))),t}},{key:"_registerListeners",value:function(){var e=this;this._register(this._hoverOperation.onResult((function(t){if(e._computer.anchor){var n=t.hasLoadingMessage?e._addLoadingMessage(t.value):t.value;e._withResult(new Toe(e._computer.anchor,n,t.isComplete))}})));var t=this._contentHoverWidget.getDomNode();this._register(hp(t,"keydown",(function(t){t.equals(9)&&e.hide()}))),this._register(hp(t,"mouseleave",(function(t){e._onMouseLeave(t)}))),this._register(Rh.onDidChange((function(){e._contentHoverWidget.position&&e._currentResult&&e._setCurrentResult(e._currentResult)})))}},{key:"_startShowingOrUpdateHover",value:function(e,t,n,i,r){if(!(this._contentHoverWidget.position&&this._currentResult))return!!e&&(this._startHoverOperationIfNecessary(e,t,n,i,!1),!0);var o=this._editor.getOption(60).sticky,a=r&&this._contentHoverWidget.isMouseGettingCloser(r.event.posx,r.event.posy);return o&&a?(e&&this._startHoverOperationIfNecessary(e,t,n,i,!0),!0):e?!!this._currentResult.anchor.equals(e)||(e.canAdoptVisibleHover(this._currentResult.anchor,this._contentHoverWidget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,n,i,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,n,i,!1),!0)):(this._setCurrentResult(null),!1)}},{key:"_startHoverOperationIfNecessary",value:function(e,t,n,i,r){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=i,this._computer.source=n,this._computer.insistOnKeepingHoverVisible=r,this._hoverOperation.start(t))}},{key:"_setCurrentResult",value:function(e){var t=e;this._currentResult===t||(t&&0===t.hoverParts.length&&(t=null),this._currentResult=t,this._currentResult?this._showHover(this._currentResult):this._hideHover())}},{key:"_addLoadingMessage",value:function(e){if(!this._computer.anchor)return e;var t=!0,n=!1,i=void 0;try{for(var r,o=this._participants[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(a.createLoadingMessage){var s=a.createLoadingMessage(this._computer.anchor);if(s)return e.slice(0).concat([s])}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}},{key:"_withResult",value:function(e){if(this._contentHoverWidget.position&&this._currentResult&&this._currentResult.isComplete||this._setCurrentResult(e),e.isComplete){var t=0===e.hoverParts.length,n=this._computer.insistOnKeepingHoverVisible;t&&n||this._setCurrentResult(e)}}},{key:"_showHover",value:function(e){var t=this._getHoverContext();this._renderedContentHover=new Kse(this._editor,e,this._participants,this._computer,t,this._keybindingService),this._renderedContentHover.domNodeHasChildren?this._contentHoverWidget.show(this._renderedContentHover):this._renderedContentHover.dispose()}},{key:"_hideHover",value:function(){this._contentHoverWidget.hide()}},{key:"_getHoverContext",value:function(){var e=this;return{hide:function(){e.hide()},onContentsChanged:function(){e._onContentsChanged.fire(),e._contentHoverWidget.onContentsChanged()},setMinimumDimensions:function(t){e._contentHoverWidget.setMinimumDimensions(t)}}}},{key:"showsOrWillShow",value:function(e){if(this._contentHoverWidget.isResizing)return!0;var t=this._findHoverAnchorCandidates(e);if(!(t.length>0))return this._startShowingOrUpdateHover(null,0,0,!1,e);var n=t[0];return this._startShowingOrUpdateHover(n,0,0,!1,e)}},{key:"_findHoverAnchorCandidates",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=this._participants[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s.suggestHoverAnchor){var l=s.suggestHoverAnchor(e);l&&t.push(l)}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}var u=e.target;switch(u.type){case 6:t.push(new Vre(0,u.range,e.event.posx,e.event.posy));break;case 7:var c=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;if(!(!u.detail.isAfterLines&&"number"==typeof u.detail.horizontalDistanceToText&&u.detail.horizontalDistanceToText<c))break;t.push(new Vre(0,u.range,e.event.posx,e.event.posy))}return t.sort((function(e,t){return t.priority-e.priority})),t}},{key:"_onMouseLeave",value:function(e){var t=this._editor.getDomNode();(!t||!koe(t,e.x,e.y))&&this.hide()}},{key:"startShowingAtRange",value:function(e,t,n,i){this._startShowingOrUpdateHover(new Vre(0,e,void 0,void 0),t,n,i,null)}},{key:"updateHoverVerbosityLevel",value:function(e,t,n){var i=this;return s((function(){var r;return E(this,(function(o){return null===(r=i._renderedContentHover)||void 0===r||r.updateHoverVerbosityLevel(e,t,n),[2]}))}))()}},{key:"focusedHoverPartIndex",value:function(){var e,t;return null!==(t=null===(e=this._renderedContentHover)||void 0===e?void 0:e.focusedHoverPartIndex)&&void 0!==t?t:-1}},{key:"containsNode",value:function(e){return!!e&&this._contentHoverWidget.getDomNode().contains(e)}},{key:"focus",value:function(){this._contentHoverWidget.focus()}},{key:"scrollUp",value:function(){this._contentHoverWidget.scrollUp()}},{key:"scrollDown",value:function(){this._contentHoverWidget.scrollDown()}},{key:"scrollLeft",value:function(){this._contentHoverWidget.scrollLeft()}},{key:"scrollRight",value:function(){this._contentHoverWidget.scrollRight()}},{key:"pageUp",value:function(){this._contentHoverWidget.pageUp()}},{key:"pageDown",value:function(){this._contentHoverWidget.pageDown()}},{key:"goToTop",value:function(){this._contentHoverWidget.goToTop()}},{key:"goToBottom",value:function(){this._contentHoverWidget.goToBottom()}},{key:"hide",value:function(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}},{key:"getDomNode",value:function(){return this._contentHoverWidget.getDomNode()}},{key:"isColorPickerVisible",get:function(){var e,t;return null!==(t=null===(e=this._renderedContentHover)||void 0===e?void 0:e.isColorPickerVisible())&&void 0!==t&&t}},{key:"isVisibleFromKeyboard",get:function(){return this._contentHoverWidget.isVisibleFromKeyboard}},{key:"isVisible",get:function(){return this._contentHoverWidget.isVisible}},{key:"isFocused",get:function(){return this._contentHoverWidget.isFocused}},{key:"isResizing",get:function(){return this._contentHoverWidget.isResizing}},{key:"widget",get:function(){return this._contentHoverWidget}}]),t}(Ru);Qse=Zse([Yse(1,Gm),Yse(2,ZI)],Qse);var Xse,$se=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Jse=function(e,t){return function(n,i){t(n,i,e)}},ele=(Qt=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._editor=e,r._instantiationService=n,r._keybindingService=i,r._onHoverContentsChanged=r._register(new Zu),r.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,r._listenersStore=new Tu,r._hoverState={mouseDown:!1,activatedByDecoratorClick:!1},r._reactToEditorMouseMoveRunner=r._register(new Sg((function(){return r._reactToEditorMouseMove(r._mouseMoveEvent)}),0)),r._hookListeners(),r._register(r._editor.onDidChangeConfiguration((function(e){e.hasChanged(60)&&(r._unhookListeners(),r._hookListeners())}))),r}return p(t,e),h(t,[{key:"_hookListeners",value:function(){var e=this,t=this._editor.getOption(60);this._hoverSettings={enabled:t.enabled,sticky:t.sticky,hidingDelay:t.hidingDelay},t.enabled?(this._listenersStore.add(this._editor.onMouseDown((function(t){return e._onEditorMouseDown(t)}))),this._listenersStore.add(this._editor.onMouseUp((function(){return e._onEditorMouseUp()}))),this._listenersStore.add(this._editor.onMouseMove((function(t){return e._onEditorMouseMove(t)}))),this._listenersStore.add(this._editor.onKeyDown((function(t){return e._onKeyDown(t)})))):(this._listenersStore.add(this._editor.onMouseMove((function(t){return e._onEditorMouseMove(t)}))),this._listenersStore.add(this._editor.onKeyDown((function(t){return e._onKeyDown(t)})))),this._listenersStore.add(this._editor.onMouseLeave((function(t){return e._onEditorMouseLeave(t)}))),this._listenersStore.add(this._editor.onDidChangeModel((function(){e._cancelScheduler(),e._hideWidgets()}))),this._listenersStore.add(this._editor.onDidChangeModelContent((function(){return e._cancelScheduler()}))),this._listenersStore.add(this._editor.onDidScrollChange((function(t){return e._onEditorScrollChanged(t)})))}},{key:"_unhookListeners",value:function(){this._listenersStore.clear()}},{key:"_cancelScheduler",value:function(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}},{key:"_onEditorScrollChanged",value:function(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}},{key:"_onEditorMouseDown",value:function(e){this._hoverState.mouseDown=!0,this._shouldNotHideCurrentHoverWidget(e)||this._hideWidgets()}},{key:"_shouldNotHideCurrentHoverWidget",value:function(e){return this._isMouseOnContentHoverWidget(e)||this._isContentWidgetResizing()}},{key:"_isMouseOnContentHoverWidget",value:function(e){var t,n=null===(t=this._contentWidget)||void 0===t?void 0:t.getDomNode();return!!n&&koe(n,e.event.posx,e.event.posy)}},{key:"_onEditorMouseUp",value:function(){this._hoverState.mouseDown=!1}},{key:"_onEditorMouseLeave",value:function(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._shouldNotHideCurrentHoverWidget(e)||this._hideWidgets())}},{key:"_shouldNotRecomputeCurrentHoverWidget",value:function(e){var t=this,n=this._hoverSettings.sticky;return function(e,n){var i=t._isMouseOnContentHoverWidget(e);return n&&i}(e,n)||function(e){var n,i,r=t._isMouseOnContentHoverWidget(e),o=null!==(i=null===(n=t._contentWidget)||void 0===n?void 0:n.isColorPickerVisible)&&void 0!==i&&i;return r&&o}(e)||function(e,n){var i,r,o,a,s;return null!==(s=n&&(null===(r=t._contentWidget)||void 0===r?void 0:r.containsNode(null===(i=e.event.browserEvent.view)||void 0===i?void 0:i.document.activeElement))&&!(null===(a=e.event.browserEvent.view)||void 0===a||null===(o=a.getSelection())||void 0===o?void 0:o.isCollapsed))&&void 0!==s&&s}(e,n)}},{key:"_onEditorMouseMove",value:function(e){var t,n,i,r;if(!this.shouldKeepOpenOnEditorMouseMoveOrLeave&&(this._mouseMoveEvent=e,!(null===(t=this._contentWidget)||void 0===t?void 0:t.isFocused)&&!(null===(n=this._contentWidget)||void 0===n?void 0:n.isResizing))){var o=this._hoverSettings.sticky;if(!o||!(null===(i=this._contentWidget)||void 0===i?void 0:i.isVisibleFromKeyboard))if(this._shouldNotRecomputeCurrentHoverWidget(e))this._reactToEditorMouseMoveRunner.cancel();else{var a=this._hoverSettings.hidingDelay;(null===(r=this._contentWidget)||void 0===r?void 0:r.isVisible)&&o&&a>0?this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(a):this._reactToEditorMouseMove(e)}}}},{key:"_reactToEditorMouseMove",value:function(e){var t;if(e){var n=null===(t=e.target.element)||void 0===t?void 0:t.classList.contains("colorpicker-color-decoration"),i=this._editor.getOption(149),r=this._hoverSettings.enabled,o=this._hoverState.activatedByDecoratorClick;if(n&&("click"===i&&!o||"hover"===i&&!r||"clickAndHover"===i&&!r&&!o)||!(n||r||o))this._hideWidgets();else this._tryShowHoverWidget(e)||this._hideWidgets()}}},{key:"_tryShowHoverWidget",value:function(e){return this._getOrCreateContentWidget().showsOrWillShow(e)}},{key:"_onKeyDown",value:function(e){var t;if(this._editor.hasModel()){var n=this._keybindingService.softDispatch(e,this._editor.getDomNode()),i=1===n.kind||2===n.kind&&(n.commandId===roe||n.commandId===ooe||n.commandId===soe)&&(null===(t=this._contentWidget)||void 0===t?void 0:t.isVisible);5===e.keyCode||6===e.keyCode||57===e.keyCode||4===e.keyCode||i||this._hideWidgets()}}},{key:"_hideWidgets",value:function(){var e,t;this._hoverState.mouseDown&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible)||moe.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,null===(t=this._contentWidget)||void 0===t||t.hide())}},{key:"_getOrCreateContentWidget",value:function(){var e=this;return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(Qse,this._editor),this._listenersStore.add(this._contentWidget.onContentsChanged((function(){return e._onHoverContentsChanged.fire()})))),this._contentWidget}},{key:"showContentHover",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this._hoverState.activatedByDecoratorClick=r,this._getOrCreateContentWidget().startShowingAtRange(e,t,n,i)}},{key:"_isContentWidgetResizing",value:function(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.widget.isResizing)||!1}},{key:"focusedHoverPartIndex",value:function(){return this._getOrCreateContentWidget().focusedHoverPartIndex()}},{key:"updateHoverVerbosityLevel",value:function(e,t,n){this._getOrCreateContentWidget().updateHoverVerbosityLevel(e,t,n)}},{key:"focus",value:function(){var e;null===(e=this._contentWidget)||void 0===e||e.focus()}},{key:"scrollUp",value:function(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollUp()}},{key:"scrollDown",value:function(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollDown()}},{key:"scrollLeft",value:function(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollLeft()}},{key:"scrollRight",value:function(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollRight()}},{key:"pageUp",value:function(){var e;null===(e=this._contentWidget)||void 0===e||e.pageUp()}},{key:"pageDown",value:function(){var e;null===(e=this._contentWidget)||void 0===e||e.pageDown()}},{key:"goToTop",value:function(){var e;null===(e=this._contentWidget)||void 0===e||e.goToTop()}},{key:"goToBottom",value:function(){var e;null===(e=this._contentWidget)||void 0===e||e.goToBottom()}},{key:"isColorPickerVisible",get:function(){var e;return null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible}},{key:"isHoverVisible",get:function(){var e;return null===(e=this._contentWidget)||void 0===e?void 0:e.isVisible}},{key:"dispose",value:function(){var e;g(v(t.prototype),"dispose",this).call(this),this._unhookListeners(),this._listenersStore.dispose(),null===(e=this._contentWidget)||void 0===e||e.dispose()}}],[{key:"get",value:function(e){return e.getContribution(Xse.ID)}}]),t}(Ru),Xse=Qt,Qt.ID="editor.contrib.contentHover",Qt);ele=Xse=$se([Jse(1,Gm),Jse(2,ZI)],ele);var tle=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._editor=e,n._register(e.onMouseDown((function(e){return n.onMouseDown(e)}))),n}return p(t,e),h(t,[{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}},{key:"onMouseDown",value:function(e){var t=this._editor.getOption(149);if("click"===t||"clickAndHover"===t){var n=e.target;if(6===n.type&&n.detail.injectedText&&n.detail.injectedText.options.attachedData===Dre&&n.range){var i=this._editor.getContribution(ele.ID);if(i&&!i.isColorPickerVisible){var r=new hd(n.range.startLineNumber,n.range.startColumn+1,n.range.endLineNumber,n.range.endColumn+1);i.showContentHover(r,1,0,!1,!0)}}}}}]),t}(Ru);tle.ID="editor.contrib.colorContribution",B_(tle.ID,tle,2),jre.register(Zre);var nle,ile,rle=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ole=function(e,t){return function(n,i){t(n,i,e)}},ale=(Xt=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._editor=e,r._instantiationService=i,r._standaloneColorPickerWidget=null,r._standaloneColorPickerVisible=p0.standaloneColorPickerVisible.bindTo(n),r._standaloneColorPickerFocused=p0.standaloneColorPickerFocused.bindTo(n),r}return p(t,e),h(t,[{key:"showOrFocus",value:function(){if(this._editor.hasModel())if(this._standaloneColorPickerVisible.get()){if(!this._standaloneColorPickerFocused.get()){var e;null===(e=this._standaloneColorPickerWidget)||void 0===e||e.focus()}}else this._standaloneColorPickerWidget=this._instantiationService.createInstance(sle,this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused)}},{key:"hide",value:function(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),null===(e=this._standaloneColorPickerWidget)||void 0===e||e.hide(),this._editor.focus()}},{key:"insertColor",value:function(){var e;null===(e=this._standaloneColorPickerWidget)||void 0===e||e.updateEditor(),this.hide()}}],[{key:"get",value:function(e){return e.getContribution(nle.ID)}}]),t}(Ru),nle=Xt,Xt.ID="editor.contrib.standaloneColorPickerController",Xt);B_((ale=nle=rle([ole(1,Ky),ole(2,Gm)],ale)).ID,ale,1);var sle=($t=function(e){function t(e,n,i,r,o,a,s){var c,d;u(this,t),(c=l(this,t))._editor=e,c._standaloneColorPickerVisible=n,c._standaloneColorPickerFocused=i,c._keybindingService=o,c._languageFeaturesService=a,c._editorWorkerService=s,c.allowEditorOverflow=!0,c._position=void 0,c._body=document.createElement("div"),c._colorHover=null,c._selectionSetInEditor=!1,c._onResult=c._register(new Zu),c.onResult=c._onResult.event,c._standaloneColorPickerVisible.set(!0),c._standaloneColorPickerParticipant=r.createInstance(Qre,c._editor),c._position=null===(d=c._editor._getViewModel())||void 0===d?void 0:d.getPrimaryCursorState().modelState.position;var h=c._editor.getSelection(),f=h?{startLineNumber:h.startLineNumber,startColumn:h.startColumn,endLineNumber:h.endLineNumber,endColumn:h.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},g=c._register(sm(c._body));return c._register(g.onDidBlur((function(e){c.hide()}))),c._register(g.onDidFocus((function(e){c.focus()}))),c._register(c._editor.onDidChangeCursorPosition((function(){c._selectionSetInEditor?c._selectionSetInEditor=!1:c.hide()}))),c._register(c._editor.onMouseMove((function(e){var t,n=null===(t=e.target.element)||void 0===t?void 0:t.classList;n&&n.contains("colorpicker-color-decoration")&&c.hide()}))),c._register(c.onResult((function(e){c._render(e.value,e.foundInEditor)}))),c._start(f),c._body.style.zIndex="50",c._editor.addContentWidget(c),c}return p(t,e),h(t,[{key:"updateEditor",value:function(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}},{key:"getId",value:function(){return ile.ID}},{key:"getDomNode",value:function(){return this._body}},{key:"getPosition",value:function(){if(!this._position)return null;var e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}},{key:"hide",value:function(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}},{key:"focus",value:function(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}},{key:"_start",value:function(e){var t=this;return s((function(){var n;return E(this,(function(i){switch(i.label){case 0:return[4,t._computeAsync(e)];case 1:return(n=i.sent())?(t._onResult.fire(new lle(n.result,n.foundInEditor)),[2]):[2]}}))}))()}},{key:"_computeAsync",value:function(e){var t=this;return s((function(){var n,i;return E(this,(function(r){switch(r.label){case 0:return t._editor.hasModel()?(n={range:e,color:{red:0,green:0,blue:0,alpha:1}},[4,t._standaloneColorPickerParticipant.createColorHover(n,new fre(t._editorWorkerService),t._languageFeaturesService.colorProvider)]):[2,null];case 1:return(i=r.sent())?[2,{result:i.colorHover,foundInEditor:i.foundInEditor}]:[2,null]}}))}))()}},{key:"_render",value:function(e,t){var n=this,i=document.createDocumentFragment(),r={fragment:i,statusBar:this._register(new Foe(this._keybindingService)),onContentsChanged:function(){},hide:function(){return n.hide()}};this._colorHover=e;var o=this._standaloneColorPickerParticipant.renderHoverParts(r,[e]);if(o){this._register(o.disposables);var a=o.colorPicker;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px",this._body.tabIndex=0,this._body.appendChild(i),a.layout();var s=a.body,l=s.saturationBox.domNode.clientWidth,u=s.domNode.clientWidth-l-22-8,c=a.body.enterButton;null==c||c.onClicked((function(){n.updateEditor(),n.hide()}));var d=a.header;d.pickedColorNode.style.width=l+8+"px",d.originalColorNode.style.width=u+"px";var h=a.header.closeButton;null==h||h.onClicked((function(){n.hide()})),t&&(c&&(c.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}}}]),t}(Ru),ile=$t,$t.ID="editor.contrib.standaloneColorPickerWidget",$t);sle=ile=rle([ole(3,Gm),ole(4,ZI),ole(5,wS),ole(6,TW)],sle);var lle=function e(t,n){u(this,e),this.value=t,this.foundInEditor=n},ule=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.showOrFocusStandaloneColorPicker",title:b(_({},Ja("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker")),{mnemonicTitle:Xa({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker")}),precondition:void 0,menu:[{id:d_.CommandPalette}],metadata:{description:Ja("showOrFocusStandaloneColorPickerDescription","Show or focus a standalone color picker which uses the default color provider. It displays hex/rgb/hsl colors.")}}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t){var n;null===(n=ale.get(t))||void 0===n||n.showOrFocus()}}]),t}(R_),cle=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.hideColorPicker",label:Xa({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:p0.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100},metadata:{description:Ja("hideColorPickerDescription","Hide the standalone color picker.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n;null===(n=ale.get(t))||void 0===n||n.hide()}}]),t}(M_),dle=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.insertColorWithStandaloneColorPicker",label:Xa({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:p0.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100},metadata:{description:Ja("insertColorWithStandaloneColorPickerDescription","Insert hex/rgb/hsl colors with the focused standalone color picker.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n;null===(n=ale.get(t))||void 0===n||n.insertColor()}}]),t}(M_);O_(cle),O_(dle),y_(ule);var hle=function(){function e(t,n,i){u(this,e),this.languageConfigurationService=i,this._selection=t,this._insertSpace=n,this._usedEndToken=null}return h(e,[{key:"_createOperationsForBlockComment",value:function(t,n,i,r,o,a){var s,l=t.startLineNumber,u=t.startColumn,c=t.endLineNumber,d=t.endColumn,h=o.getLineContent(l),f=o.getLineContent(c),g=h.lastIndexOf(n,u-1+n.length),v=f.indexOf(i,d-1-i.length);if(-1!==g&&-1!==v)if(l===c){h.substring(g+n.length,v).indexOf(i)>=0&&(g=-1,v=-1)}else{var p=h.substring(g+n.length),m=f.substring(0,v);(p.indexOf(i)>=0||m.indexOf(i)>=0)&&(g=-1,v=-1)}-1!==g&&-1!==v?(r&&g+n.length<h.length&&32===h.charCodeAt(g+n.length)&&(n+=" "),r&&v>0&&32===f.charCodeAt(v-1)&&(i=" "+i,v-=1),s=e._createRemoveBlockCommentOperations(new hd(l,g+n.length+1,c,v+1),n,i)):(s=e._createAddBlockCommentOperations(t,n,i,this._insertSpace),this._usedEndToken=1===s.length?i:null);var y=!0,_=!1,b=void 0;try{for(var k,w=s[Symbol.iterator]();!(y=(k=w.next()).done);y=!0){var C=k.value;a.addTrackedEditOperation(C.range,C.text)}}catch(e){_=!0,b=e}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}}},{key:"getEditOperations",value:function(e,t){var n=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenization.tokenizeIfCheap(n);var r=e.getLanguageIdAtPosition(n,i),o=this.languageConfigurationService.getLanguageConfiguration(r).comments;o&&o.blockCommentStartToken&&o.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,o.blockCommentStartToken,o.blockCommentEndToken,this._insertSpace,e,t)}},{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations();if(2===n.length){var i=n[0],r=n[1];return new fd(i.range.endLineNumber,i.range.endColumn,r.range.startLineNumber,r.range.startColumn)}var o=n[0].range,a=this._usedEndToken?-this._usedEndToken.length-1:0;return new fd(o.endLineNumber,o.endColumn+a,o.endLineNumber,o.endColumn+a)}}],[{key:"_haystackHasNeedleAtOffset",value:function(e,t,n){if(n<0)return!1;var i=t.length;if(n+i>e.length)return!1;for(var r=0;r<i;r++){var o=e.charCodeAt(n+r),a=t.charCodeAt(r);if(o!==a&&!(o>=65&&o<=90&&o+32===a||a>=65&&a<=90&&a+32===o))return!1}return!0}},{key:"_createRemoveBlockCommentOperations",value:function(e,t,n){var i=[];return hd.isEmpty(e)?i.push(lA.delete(new hd(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(i.push(lA.delete(new hd(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(lA.delete(new hd(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),i}},{key:"_createAddBlockCommentOperations",value:function(e,t,n,i){var r=[];return hd.isEmpty(e)?r.push(lA.replace(new hd(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(r.push(lA.insert(new dd(e.startLineNumber,e.startColumn),t+(i?" ":""))),r.push(lA.insert(new dd(e.endLineNumber,e.endColumn),(i?" ":"")+n))),r}}]),e}(),fle=function(){function e(t,n,i,r,o,a,s){u(this,e),this.languageConfigurationService=t,this._selection=n,this._indentSize=i,this._type=r,this._insertSpace=o,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=a,this._ignoreFirstLine=s||!1}return h(e,[{key:"_executeLineComments",value:function(t,n,i,r){var o;i.shouldRemoveComments?o=e._createRemoveLineCommentsOperations(i.lines,r.startLineNumber):(e._normalizeInsertionPoint(t,i.lines,r.startLineNumber,this._indentSize),o=this._createAddLineCommentsOperations(i.lines,r.startLineNumber));for(var a=new dd(r.positionLineNumber,r.positionColumn),s=0,l=o.length;s<l;s++){if(n.addEditOperation(o[s].range,o[s].text),hd.isEmpty(o[s].range)&&hd.getStartPosition(o[s].range).equals(a))t.getLineContent(a.lineNumber).length+1===a.column&&(this._deltaColumn=(o[s].text||"").length)}this._selectionId=n.trackSelection(r)}},{key:"_attemptRemoveBlockComment",value:function(e,t,n,i){var r=t.startLineNumber,o=t.endLineNumber,a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),s=e.getLineContent(r).lastIndexOf(n,a-1),l=e.getLineContent(o).indexOf(i,t.endColumn-1-n.length);return-1!==s&&-1===l&&(l=e.getLineContent(r).indexOf(i,s+n.length),o=r),-1===s&&-1!==l&&(s=e.getLineContent(o).lastIndexOf(n,l),r=o),!t.isEmpty()||-1!==s&&-1!==l||-1!==(s=e.getLineContent(r).indexOf(n))&&(l=e.getLineContent(r).indexOf(i,s+n.length)),-1!==s&&32===e.getLineContent(r).charCodeAt(s+n.length)&&(n+=" "),-1!==l&&32===e.getLineContent(o).charCodeAt(l-1)&&(i=" "+i,l-=1),-1!==s&&-1!==l?hle._createRemoveBlockCommentOperations(new hd(r,s+n.length+1,o,l+1),n,i):null}},{key:"_executeBlockComment",value:function(e,t,n){e.tokenization.tokenizeIfCheap(n.startLineNumber);var i=e.getLanguageIdAtPosition(n.startLineNumber,1),r=this.languageConfigurationService.getLanguageConfiguration(i).comments;if(r&&r.blockCommentStartToken&&r.blockCommentEndToken){var o=r.blockCommentStartToken,a=r.blockCommentEndToken,s=this._attemptRemoveBlockComment(e,n,o,a);if(!s){if(n.isEmpty()){var l=e.getLineContent(n.startLineNumber),u=$h(l);-1===u&&(u=l.length),s=hle._createAddBlockCommentOperations(new hd(n.startLineNumber,u+1,n.startLineNumber,l.length+1),o,a,this._insertSpace)}else s=hle._createAddBlockCommentOperations(new hd(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),o,a,this._insertSpace);1===s.length&&(this._deltaColumn=o.length+1)}this._selectionId=t.trackSelection(n);var c=!0,d=!1,h=void 0;try{for(var f,g=s[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;t.addEditOperation(v.range,v.text)}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}}}},{key:"getEditOperations",value:function(t,n){var i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine)return n.addEditOperation(new hd(i.startLineNumber,t.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===t.getLineCount()?"":"\n"),void(this._selectionId=n.trackSelection(i));i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,t.getLineMaxColumn(i.endLineNumber-1)));var r=e._gatherPreflightData(this._type,this._insertSpace,t,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return r.supported?this._executeLineComments(t,n,r,i):this._executeBlockComment(t,n,i)}},{key:"computeCursorState",value:function(e,t){var n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new fd(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}},{key:"_createAddLineCommentsOperations",value:function(e,t){for(var n=[],i=this._insertSpace?" ":"",r=0,o=e.length;r<o;r++){var a=e[r];a.ignore||n.push(lA.insert(new dd(t+r,a.commentStrOffset+1),a.commentStr+i))}return n}}],[{key:"_gatherPreflightCommentStrings",value:function(e,t,n,i){e.tokenization.tokenizeIfCheap(t);var r=e.getLanguageIdAtPosition(t,1),o=i.getLanguageConfiguration(r).comments,a=o?o.lineCommentToken:null;if(!a)return null;for(var s=[],l=0,u=n-t+1;l<u;l++)s[l]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return s}},{key:"_analyzeLines",value:function(e,t,n,i,r,o,a,s){var l,u=!0;l=0===e||1!==e;for(var c=0,d=i.length;c<d;c++){var h=i[c],f=r+c;if(f===r&&a)h.ignore=!0;else{var g=n.getLineContent(f),v=$h(g);if(-1!==v){if(u=!1,h.ignore=!1,h.commentStrOffset=v,l&&!hle._haystackHasNeedleAtOffset(g,h.commentStr,v)&&(0===e?l=!1:1===e||(h.ignore=!0)),l&&t){var p=v+h.commentStrLength;p<g.length&&32===g.charCodeAt(p)&&(h.commentStrLength+=1)}}else h.ignore=o,h.commentStrOffset=g.length}}if(0===e&&u){l=!1;for(var m=0,y=i.length;m<y;m++)i[m].ignore=!1}return{supported:!0,shouldRemoveComments:l,lines:i}}},{key:"_gatherPreflightData",value:function(t,n,i,r,o,a,s,l){var u=e._gatherPreflightCommentStrings(i,r,o,l);return null===u?{supported:!1}:e._analyzeLines(t,n,i,u,r,a,s,l)}},{key:"_createRemoveLineCommentsOperations",value:function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];o.ignore||n.push(lA.delete(new hd(t+i,o.commentStrOffset+1,t+i,o.commentStrOffset+o.commentStrLength+1)))}return n}},{key:"nextVisibleColumn",value:function(e,t,n,i){return n?e+(t-e%t):e+i}},{key:"_normalizeInsertionPoint",value:function(t,n,i,r){for(var o,a,s=1073741824,l=0,u=n.length;l<u;l++)if(!n[l].ignore){for(var c=t.getLineContent(i+l),d=0,h=0,f=n[l].commentStrOffset;d<s&&h<f;h++)d=e.nextVisibleColumn(d,r,9===c.charCodeAt(h),1);d<s&&(s=d)}s=Math.floor(s/r)*r;for(var g=0,v=n.length;g<v;g++)if(!n[g].ignore){var p=t.getLineContent(i+g),m=0;for(o=0,a=n[g].commentStrOffset;m<s&&o<a;o++)m=e.nextVisibleColumn(m,r,9===p.charCodeAt(o),1);n[g].commentStrOffset=m>s?o-1:o}}}]),e}(),gle=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[n]))._type=e,i}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=e.get(Ek);if(t.hasModel()){var i=[],r=t.getModel().getOptions(),o=t.getOption(23),a=t.getSelections().map((function(e,t){return{selection:e,index:t,ignoreFirstLine:!1}}));a.sort((function(e,t){return hd.compareRangesUsingStarts(e.selection,t.selection)}));for(var s=a[0],l=1;l<a.length;l++){var u=a[l];s.selection.endLineNumber===u.selection.startLineNumber&&(s.index<u.index?u.ignoreFirstLine=!0:(s.ignoreFirstLine=!0,s=u))}var c=!0,d=!1,h=void 0;try{for(var f,g=a[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;i.push(new fle(n,v.selection,r.indentSize,this._type,o.insertSpace,o.ignoreEmptyLines,v.ignoreFirstLine))}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}}]),t}(M_),vle=function(e){function t(){return u(this,t),l(this,t,[0,{id:"editor.action.commentLine",label:Xa("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:d_.MenubarEditMenu,group:"5_insert",title:Xa({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}}])}return p(t,e),t}(gle),ple=function(e){function t(){return u(this,t),l(this,t,[1,{id:"editor.action.addCommentLine",label:Xa("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2081),weight:100}}])}return p(t,e),t}(gle),mle=function(e){function t(){return u(this,t),l(this,t,[2,{id:"editor.action.removeCommentLine",label:Xa("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2099),weight:100}}])}return p(t,e),t}(gle),yle=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.blockComment",label:Xa("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:d_.MenubarEditMenu,group:"5_insert",title:Xa({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=e.get(Ek);if(t.hasModel()){var i=t.getOption(23),r=[],o=t.getSelections(),a=!0,s=!1,l=void 0;try{for(var u,c=o[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;r.push(new hle(d,i.insertSpace,n))}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}}]),t}(M_);O_(vle),O_(ple),O_(mle),O_(yle);var _le,ble=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},kle=function(e,t){return function(n,i){t(n,i,e)}},wle=(Jt=function(){function e(t,n,i,r,o,a,s,l){var c=this;u(this,e),this._contextMenuService=n,this._contextViewService=i,this._contextKeyService=r,this._keybindingService=o,this._menuService=a,this._configurationService=s,this._workspaceContextService=l,this._toDispose=new Tu,this._contextMenuIsBeingShownCount=0,this._editor=t,this._toDispose.add(this._editor.onContextMenu((function(e){return c._onContextMenu(e)}))),this._toDispose.add(this._editor.onMouseWheel((function(e){if(c._contextMenuIsBeingShownCount>0){var t=c._contextViewService.getContextViewElement(),n=e.srcElement;n.shadowRoot&&Pp(t)===n.shadowRoot||c._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((function(e){c._editor.getOption(24)&&58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),c.showContextMenu())})))}return h(e,[{key:"_onContextMenu",value:function(e){if(this._editor.hasModel()){if(!this._editor.getOption(24))return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(12!==e.target.type&&(6!==e.target.type||!e.target.detail.injectedText)){if(e.event.preventDefault(),e.event.stopPropagation(),11===e.target.type)return this._showScrollbarContextMenu(e.event);if(6===e.target.type||7===e.target.type||1===e.target.type){if(this._editor.focus(),e.target.position){var t=!1,n=!0,i=!1,r=void 0;try{for(var o,a=this._editor.getSelections()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){if(o.value.containsPosition(e.target.position)){t=!0;break}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}t||this._editor.setPosition(e.target.position)}var s=null;1!==e.target.type&&(s=e.event),this.showContextMenu(s)}}}}},{key:"showContextMenu",value:function(e){if(this._editor.getOption(24)&&this._editor.hasModel()){var t=this._getMenuActions(this._editor.getModel(),this._editor.contextMenuId);t.length>0&&this._doShowContextMenu(t,e)}}},{key:"_getMenuActions",value:function(e,t){var n=[],i=this._menuService.getMenuActions(t,this._contextKeyService,{arg:e.uri}),r=!0,o=!1,a=void 0;try{for(var s,l=i[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=C(s.value,2)[1],c=0,d=!0,h=!1,f=void 0;try{for(var g,v=u[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;if(p instanceof v_){var m=this._getMenuActions(e,p.item.submenu);m.length>0&&(n.push(new iy(p.id,p.label,m)),c++)}else n.push(p),c++}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}c&&n.push(new ey)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n.length&&n.pop(),n}},{key:"_doShowContextMenu",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._editor.hasModel()){var i=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});var r=n;if(!r){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();var o=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),a=xp(this._editor.getDomNode()),s=a.left+o.left,l=a.top+o.top+o.height;r={x:s,y:l}}var u,c=this._editor.getOption(128)&&!ws;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:c?null!==(u=this._editor.getOverflowWidgetsDomNode())&&void 0!==u?u:this._editor.getDomNode():void 0,getAnchor:function(){return r},getActions:function(){return e},getActionViewItem:function(e){var n=t._keybindingFor(e);if(n)return new IF(e,e,{label:!0,keybinding:n.getLabel(),isMenu:!0});var i=e;return"function"==typeof i.getActionViewItem?i.getActionViewItem():new IF(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:function(e){return t._keybindingFor(e)},onHide:function(e){t._contextMenuIsBeingShownCount--,t._editor.updateOptions({hover:i})}})}}},{key:"_showScrollbarContextMenu",value:function(e){var t=this;if(this._editor.hasModel()&&!function(e){return e.id===oP}(this._workspaceContextService.getWorkspace())){var n=this._editor.getOption(73),i=0,r=function(e){return{id:"menu-action-".concat(++i),label:e.label,tooltip:"",class:void 0,enabled:void 0===e.enabled||e.enabled,checked:e.checked,run:e.run}},o=function(e,t){return new iy("menu-action-".concat(++i),e,t,void 0)},a=function(e,n,i,a,s){if(!n)return r({label:e,enabled:n,run:function(){}});var l=function(e){return function(){t._configurationService.updateValue(i,e)}},u=[],c=!0,d=!1,h=void 0;try{for(var f,g=s[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;u.push(r({label:v.label,checked:a===v.value,run:l(v.value)}))}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}return o(e,u)},s=[];s.push(r({label:Xa("context.minimap.minimap","Minimap"),checked:n.enabled,run:function(){t._configurationService.updateValue("editor.minimap.enabled",!n.enabled)}})),s.push(new ey),s.push(r({label:Xa("context.minimap.renderCharacters","Render Characters"),enabled:n.enabled,checked:n.renderCharacters,run:function(){t._configurationService.updateValue("editor.minimap.renderCharacters",!n.renderCharacters)}})),s.push(a(Xa("context.minimap.size","Vertical size"),n.enabled,"editor.minimap.size",n.size,[{label:Xa("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:Xa("context.minimap.size.fill","Fill"),value:"fill"},{label:Xa("context.minimap.size.fit","Fit"),value:"fit"}])),s.push(a(Xa("context.minimap.slider","Slider"),n.enabled,"editor.minimap.showSlider",n.showSlider,[{label:Xa("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:Xa("context.minimap.slider.always","Always"),value:"always"}]));var l=this._editor.getOption(128)&&!ws;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:function(){return e},getActions:function(){return s},onHide:function(e){t._contextMenuIsBeingShownCount--,t._editor.focus()}})}}},{key:"_keybindingFor",value:function(e){return this._keybindingService.lookupKeybinding(e.id)}},{key:"dispose",value:function(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}}],[{key:"get",value:function(e){return e.getContribution(_le.ID)}}]),e}(),_le=Jt,Jt.ID="editor.contrib.contextmenu",Jt);wle=_le=ble([kle(1,GI),kle(2,qI),kle(3,Ky),kle(4,ZI),kle(5,h_),kle(6,qb),kle(7,KA)],wle);var Cle=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.showContextMenu",label:Xa("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:p0.textInputFocus,primary:1092,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n;null===(n=wle.get(t))||void 0===n||n.showContextMenu()}}]),t}(M_);B_(wle.ID,wle,2),O_(Cle);var Sle=function(){function e(t){u(this,e),this.selections=t}return h(e,[{key:"equals",value:function(e){var t=this.selections.length;if(t!==e.selections.length)return!1;for(var n=0;n<t;n++)if(!this.selections[n].equalsSelection(e.selections[n]))return!1;return!0}}]),e}(),xle=function e(t,n,i){u(this,e),this.cursorState=t,this.scrollTop=n,this.scrollLeft=i},Lle=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._editor=e,n._isCursorUndoRedo=!1,n._undoStack=[],n._redoStack=[],n._register(e.onDidChangeModel((function(e){n._undoStack=[],n._redoStack=[]}))),n._register(e.onDidChangeModelContent((function(e){n._undoStack=[],n._redoStack=[]}))),n._register(e.onDidChangeCursorSelection((function(t){if(!n._isCursorUndoRedo&&t.oldSelections&&t.oldModelVersionId===t.modelVersionId){var i=new Sle(t.oldSelections);n._undoStack.length>0&&n._undoStack[n._undoStack.length-1].cursorState.equals(i)||(n._undoStack.push(new xle(i,e.getScrollTop(),e.getScrollLeft())),n._redoStack=[],n._undoStack.length>50&&n._undoStack.shift())}}))),n}return p(t,e),h(t,[{key:"cursorUndo",value:function(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new xle(new Sle(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}},{key:"cursorRedo",value:function(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new xle(new Sle(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}},{key:"_applyState",value:function(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}],[{key:"get",value:function(e){return e.getContribution(t.ID)}}]),t}(Ru);Lle.ID="editor.contrib.cursorUndoRedoController";var Dle=function(e){function t(){return u(this,t),l(this,t,[{id:"cursorUndo",label:Xa("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:p0.textInputFocus,primary:2099,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i;null===(i=Lle.get(t))||void 0===i||i.cursorUndo()}}]),t}(M_),Nle=function(e){function t(){return u(this,t),l(this,t,[{id:"cursorRedo",label:Xa("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i;null===(i=Lle.get(t))||void 0===i||i.cursorRedo()}}]),t}(M_);B_(Lle.ID,Lle,0),O_(Dle),O_(Nle);var Ile=function(){function e(t,n,i){u(this,e),this.selection=t,this.targetPosition=n,this.copy=i,this.targetSelection=null}return h(e,[{key:"getEditOperations",value:function(e,t){var n=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new hd(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new fd(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new fd(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new fd(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new fd(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new fd(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}},{key:"computeCursorState",value:function(e,t){return this.targetSelection}}]),e}();function Ele(e){return ms?e.altKey:e.ctrlKey}var Mle=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._editor=e,n._dndDecorationIds=n._editor.createDecorationsCollection(),n._register(n._editor.onMouseDown((function(e){return n._onEditorMouseDown(e)}))),n._register(n._editor.onMouseUp((function(e){return n._onEditorMouseUp(e)}))),n._register(n._editor.onMouseDrag((function(e){return n._onEditorMouseDrag(e)}))),n._register(n._editor.onMouseDrop((function(e){return n._onEditorMouseDrop(e)}))),n._register(n._editor.onMouseDropCanceled((function(){return n._onEditorMouseDropCanceled()}))),n._register(n._editor.onKeyDown((function(e){return n.onEditorKeyDown(e)}))),n._register(n._editor.onKeyUp((function(e){return n.onEditorKeyUp(e)}))),n._register(n._editor.onDidBlurEditorWidget((function(){return n.onEditorBlur()}))),n._register(n._editor.onDidBlurEditorText((function(){return n.onEditorBlur()}))),n._mouseDown=!1,n._modifierPressed=!1,n._dragSelection=null,n}return p(t,e),h(t,[{key:"onEditorBlur",value:function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}},{key:"onEditorKeyDown",value:function(e){this._editor.getOption(35)&&!this._editor.getOption(22)&&(Ele(e)&&(this._modifierPressed=!0),this._mouseDown&&Ele(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}},{key:"onEditorKeyUp",value:function(e){this._editor.getOption(35)&&!this._editor.getOption(22)&&(Ele(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===t.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}},{key:"_onEditorMouseDown",value:function(e){this._mouseDown=!0}},{key:"_onEditorMouseUp",value:function(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}},{key:"_onEditorMouseDrag",value:function(e){var t=e.target;if(null===this._dragSelection){var n=(this._editor.getSelections()||[]).filter((function(e){return t.position&&e.containsPosition(t.position)}));if(1!==n.length)return;this._dragSelection=n[0]}Ele(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}},{key:"_onEditorMouseDropCanceled",value:function(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}},{key:"_onEditorMouseDrop",value:function(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){var n=new dd(e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){var i=null;if(e.event.shiftKey){var r=this._editor.getSelection();if(r){var o=r.selectionStartLineNumber,a=r.selectionStartColumn;i=[new fd(o,a,n.lineNumber,n.column)]}}else i=(this._editor.getSelections()||[]).map((function(e){return e.containsPosition(n)?new fd(n.lineNumber,n.column,n.lineNumber,n.column):e}));this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(n)||(Ele(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(n)||this._dragSelection.getStartPosition().equals(n)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(t.ID,new Ile(this._dragSelection,n,Ele(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}},{key:"showAt",value:function(e){this._dndDecorationIds.set([{range:new hd(e.lineNumber,e.column,e.lineNumber,e.column),options:t._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}},{key:"_removeDecoration",value:function(){this._dndDecorationIds.clear()}},{key:"_hitContent",value:function(e){return 6===e.type||7===e.type}},{key:"_hitMargin",value:function(e){return 2===e.type||3===e.type||4===e.type}},{key:"dispose",value:function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,g(v(t.prototype),"dispose",this).call(this)}}]),t}(Ru);Mle.ID="editor.contrib.dragAndDrop",Mle.TRIGGER_KEY_VALUE=ms?6:5,Mle._DECORATION_OPTIONS=cU.register({description:"dnd-target",className:"dnd-target"}),B_(Mle.ID,Mle,2),B_(bne.ID,bne,0),jY(Rte),P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:mne,precondition:yne,kbOpts:{weight:100,primary:2137}}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t){var n;return null===(n=bne.get(t))||void 0===n?void 0:n.changePasteType()}}]),t}(E_))),P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"editor.hidePasteWidget",precondition:yne,kbOpts:{weight:100,primary:9}}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t){var n;null===(n=bne.get(t))||void 0===n||n.clearWidgets()}}]),t}(E_))),O_((en=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.pasteAs",label:Xa("pasteAs","Paste As..."),alias:"Paste As...",precondition:p0.writable,metadata:{description:"Paste as",args:[{name:"args",schema:t.argsSchema}]}}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i,r="string"==typeof(null==n?void 0:n.kind)?n.kind:void 0;return!r&&n&&(r="string"==typeof n.id?n.id:void 0),null===(i=bne.get(t))||void 0===i?void 0:i.pasteAs(r?new vte(r):void 0)}}]),t}(M_),en.argsSchema={type:"object",properties:{kind:{type:"string",description:Xa("pasteAs.kind","The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.")}}},en)),O_(function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.pasteAsText",label:Xa("pasteAsText","Paste as Text"),alias:"Paste as Text",precondition:p0.writable}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n;return null===(n=bne.get(t))||void 0===n?void 0:n.pasteAs({providerId:Lte.id})}}]),t}(M_));var Tle=function(){function e(){u(this,e),this._dragOperations=new Map}return h(e,[{key:"removeDragOperationTransfer",value:function(e){if(e&&this._dragOperations.has(e)){var t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}}]),e}(),Rle=function e(t){u(this,e),this.identifier=t},Ale=Zm("treeViewsDndService");nk(Ale,Tle,1);var Ple,Ole=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Fle=function(e,t){return function(n,i){t(n,i,e)}},Wle="editor.experimental.dropIntoEditor.defaultProvider",Ble="editor.changeDropType",Hle=new jy("dropWidgetVisible",!1,Xa("dropWidgetVisible","Whether the drop widget is showing")),Vle=(tn=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t))._configService=i,a._languageFeaturesService=r,a._treeViewsDragAndDropService=o,a.treeItemsTransfer=yte.getInstance(),a._dropProgressManager=a._register(n.createInstance(Jte,"dropIntoEditor",e)),a._postDropWidgetManager=a._register(n.createInstance(fne,"dropIntoEditor",e,Hle,{id:Ble,label:Xa("postDropWidgetTitle","Show drop options...")})),a._register(e.onDropIntoEditor((function(t){return a.onDropIntoEditor(e,t.position,t.event)}))),a}return p(t,e),h(t,[{key:"clearWidgets",value:function(){this._postDropWidgetManager.clear()}},{key:"changeDropType",value:function(){this._postDropWidgetManager.tryShowSelector()}},{key:"onDropIntoEditor",value:function(e,t,n){var i=this;return s((function(){var r,o;return E(this,(function(a){return n.dataTransfer&&e.hasModel()?(null===(r=i._currentOperation)||void 0===r||r.cancel(),e.focus(),e.setPosition(t),o=hg(function(){var r=s((function(r){var a,l,u,c,d,h,f,g,v;return E(this,(function(p){switch(p.label){case 0:a=new Tu,l=a.add(new E9(e,1,void 0,r)),p.label=1;case 1:return p.trys.push([1,,6,7]),[4,i.extractDataTransferData(n)];case 2:return 0===(u=p.sent()).size||l.token.isCancellationRequested?[2]:(c=e.getModel())?(d=i._languageFeaturesService.documentDropEditProvider.ordered(c).filter((function(e){return!e.dropMimeTypes||e.dropMimeTypes.some((function(e){return u.matches(e)}))})),f=a.add,[4,i.getDropEdits(d,c,t,u,l)]):[2];case 3:return h=f.apply(a,[p.sent()]),l.token.isCancellationRequested?[2]:h.edits.length?(g=i.getInitialActiveEditIndex(c,h.edits),v="afterDrop"===e.getOption(36).showDropSelector,[4,i._postDropWidgetManager.applyEditAndShowIfNeeded([hd.fromPositions(t)],{activeEditIndex:g,allEdits:h.edits},v,function(){var e=s((function(e){return E(this,(function(t){return[2,e]}))}));return function(t){return e.apply(this,arguments)}}(),r)]):[3,5];case 4:p.sent(),p.label=5;case 5:return[3,7];case 6:return a.dispose(),i._currentOperation===o&&(i._currentOperation=void 0),[7];case 7:return[2]}}))}));return function(e){return r.apply(this,arguments)}}()),i._dropProgressManager.showWhile(t,Xa("dropIntoEditorProgress","Running drop handlers. Click to cancel"),o,{cancel:function(){return o.cancel()}}),i._currentOperation=o,[2]):[2]}))}))()}},{key:"getDropEdits",value:function(e,t,n,i,r){return s((function(){var o,a;return E(this,(function(l){switch(l.label){case 0:return o=new Tu,[4,fg(Promise.all(e.map(function(){var e=s((function(e){var a,s;return E(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,e.provideDocumentDropEdits(t,n,i,r.token)];case 1:return(a=l.sent())&&o.add(a),[2,null==a?void 0:a.edits.map((function(t){return b(_({},t),{providerId:e.id})}))];case 2:return s=l.sent(),console.error(s),[3,3];case 3:return[2,void 0]}}))}));return function(t){return e.apply(this,arguments)}}())),r.token)];case 1:return a=l.sent(),[2,{edits:Zte(aa(null!=a?a:[]).flat()),dispose:function(){return o.dispose()}}]}}))}))()}},{key:"getInitialActiveEditIndex",value:function(e,t){var n=this._configService.getValue(Wle,{resource:e.uri}),i=!0,r=!1,o=void 0;try{for(var a,s=function(){var e=C(a.value,2),n=e[0],i=e[1],r=new vte(i),o=t.findIndex((function(e){return r.value===e.providerId&&e.handledMimeType&&hte(n,[e.handledMimeType])}));if(o>=0)return{v:o}},l=Object.entries(n)[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var u=s();if("object"===L(u))return u.v}}catch(e){r=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}return 0}},{key:"extractDataTransferData",value:function(e){var t=this;return s((function(){var n,i,r,o,a,s,l,u,c,d,h,f,g,v,p,m,y,_;return E(this,(function(b){switch(b.label){case 0:if(!e.dataTransfer)return[2,new cte];if(n=wte(e.dataTransfer),!t.treeItemsTransfer.hasData(Rle.prototype))return[3,8];if(i=t.treeItemsTransfer.getData(Rle.prototype),!Array.isArray(i))return[3,8];r=!0,o=!1,a=void 0,b.label=1;case 1:b.trys.push([1,6,7,8]),s=i[Symbol.iterator](),b.label=2;case 2:return(r=(l=s.next()).done)?[3,5]:(u=l.value,[4,t._treeViewsDragAndDropService.removeDragOperationTransfer(u.identifier)]);case 3:if(c=b.sent()){d=!0,h=!1,f=void 0;try{for(g=c[Symbol.iterator]();!(d=(v=g.next()).done);d=!0)p=C(v.value,2),m=p[0],y=p[1],n.replace(m,y)}catch(e){h=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(h)throw f}}}b.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return _=b.sent(),o=!0,a=_,[3,8];case 7:try{r||null==s.return||s.return()}finally{if(o)throw a}return[7];case 8:return[2,n]}}))}))()}}],[{key:"get",value:function(e){return e.getContribution(Ple.ID)}}]),t}(Ru),Ple=tn,tn.ID="editor.contrib.dropIntoEditorController",tn);B_((Vle=Ple=Ole([Fle(1,Gm),Fle(2,qb),Fle(3,wS),Fle(4,Ale)],Vle)).ID,Vle,2),jY(Tte),P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:Ble,precondition:Hle,kbOpts:{weight:100,primary:2137}}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t,n){var i;null===(i=Vle.get(t))||void 0===i||i.changeDropType()}}]),t}(E_))),P_(new(function(e){function t(){return u(this,t),l(this,t,[{id:"editor.hideDropWidget",precondition:Hle,kbOpts:{weight:100,primary:9}}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t,n){var i;null===(i=Vle.get(t))||void 0===i||i.clearWidgets()}}]),t}(E_))),i_.as(lk).registerConfiguration(b(_({},YR),{properties:f({},Wle,{type:"object",scope:5,description:Xa("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}})}));var zle=function(){function e(t){u(this,e),this._editor=t,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}return h(e,[{key:"dispose",value:function(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}},{key:"reset",value:function(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}},{key:"getCount",value:function(){return this._decorations.length}},{key:"getFindScope",value:function(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}},{key:"getFindScopes",value:function(){var e=this;if(this._findScopeDecorationIds.length){var t=this._findScopeDecorationIds.map((function(t){return e._editor.getModel().getDecorationRange(t)})).filter((function(e){return!!e}));if(t.length)return t}return null}},{key:"getStartPosition",value:function(){return this._startPosition}},{key:"setStartPosition",value:function(e){this._startPosition=e,this.setCurrentFindMatch(null)}},{key:"_getDecorationIndex",value:function(e){var t=this._decorations.indexOf(e);return t>=0?t+1:1}},{key:"getDecorationRangeAt",value:function(e){var t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}},{key:"getCurrentMatchesPosition",value:function(t){var n=this._editor.getModel().getDecorationsInRange(t),i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=l.options;if(u===e._FIND_MATCH_DECORATION||u===e._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(l.id)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return 0}},{key:"setCurrentFindMatch",value:function(t){var n=this,i=null,r=0;if(t)for(var o=0,a=this._decorations.length;o<a;o++){var s=this._editor.getModel().getDecorationRange(this._decorations[o]);if(t.equalsRange(s)){i=this._decorations[o],r=o+1;break}}return null===this._highlightedDecorationId&&null===i||this._editor.changeDecorations((function(t){if(null!==n._highlightedDecorationId&&(t.changeDecorationOptions(n._highlightedDecorationId,e._FIND_MATCH_DECORATION),n._highlightedDecorationId=null),null!==i&&(n._highlightedDecorationId=i,t.changeDecorationOptions(n._highlightedDecorationId,e._CURRENT_FIND_MATCH_DECORATION)),null!==n._rangeHighlightDecorationId&&(t.removeDecoration(n._rangeHighlightDecorationId),n._rangeHighlightDecorationId=null),null!==i){var r=n._editor.getModel().getDecorationRange(i);if(r.startLineNumber!==r.endLineNumber&&1===r.endColumn){var o=r.endLineNumber-1,a=n._editor.getModel().getLineMaxColumn(o);r=new hd(r.startLineNumber,r.startColumn,o,a)}n._rangeHighlightDecorationId=t.addDecoration(r,e._RANGE_HIGHLIGHT_DECORATION)}})),r}},{key:"set",value:function(t,n){var i=this;this._editor.changeDecorations((function(r){var o=e._FIND_MATCH_DECORATION,a=[];if(t.length>1e3){o=e._FIND_MATCH_NO_OVERVIEW_DECORATION;for(var s=i._editor.getModel().getLineCount(),l=i._editor.getLayoutInfo().height/s,u=Math.max(2,Math.ceil(3/l)),c=t[0].range.startLineNumber,d=t[0].range.endLineNumber,h=1,f=t.length;h<f;h++){var g=t[h].range;d+u>=g.startLineNumber?g.endLineNumber>d&&(d=g.endLineNumber):(a.push({range:new hd(c,1,d,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),c=g.startLineNumber,d=g.endLineNumber)}a.push({range:new hd(c,1,d,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}for(var v=new Array(t.length),p=0,m=t.length;p<m;p++)v[p]={range:t[p].range,options:o};i._decorations=r.deltaDecorations(i._decorations,v),i._overviewRulerApproximateDecorations=r.deltaDecorations(i._overviewRulerApproximateDecorations,a),i._rangeHighlightDecorationId&&(r.removeDecoration(i._rangeHighlightDecorationId),i._rangeHighlightDecorationId=null),i._findScopeDecorationIds.length&&(i._findScopeDecorationIds.forEach((function(e){return r.removeDecoration(e)})),i._findScopeDecorationIds=[]),(null==n?void 0:n.length)&&(i._findScopeDecorationIds=n.map((function(t){return r.addDecoration(t,e._FIND_SCOPE_DECORATION)})))}))}},{key:"matchBeforePosition",value:function(e){if(0===this._decorations.length)return null;for(var t=this._decorations.length-1;t>=0;t--){var n=this._decorations[t],i=this._editor.getModel().getDecorationRange(n);if(i&&!(i.endLineNumber>e.lineNumber)){if(i.endLineNumber<e.lineNumber)return i;if(!(i.endColumn>e.column))return i}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}},{key:"matchAfterPosition",value:function(e){if(0===this._decorations.length)return null;for(var t=0,n=this._decorations.length;t<n;t++){var i=this._decorations[t],r=this._editor.getModel().getDecorationRange(i);if(r&&!(r.startLineNumber<e.lineNumber)){if(r.startLineNumber>e.lineNumber)return r;if(!(r.startColumn<e.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[0])}},{key:"_allDecorations",value:function(){var e,t=[];(t=t.concat(this._decorations),t=t.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length)&&(e=t).push.apply(e,x(this._findScopeDecorationIds));return this._rangeHighlightDecorationId&&t.push(this._rangeHighlightDecorationId),t}}]),e}();zle._CURRENT_FIND_MATCH_DECORATION=cU.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",inlineClassName:"currentFindMatchInline",showIfCollapsed:!0,overviewRuler:{color:OS(JD),position:dw.Center},minimap:{color:OS(rN),position:1}}),zle._FIND_MATCH_DECORATION=cU.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",inlineClassName:"findMatchInline",showIfCollapsed:!0,overviewRuler:{color:OS(JD),position:dw.Center},minimap:{color:OS(rN),position:1}}),zle._FIND_MATCH_NO_OVERVIEW_DECORATION=cU.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),zle._FIND_MATCH_ONLY_OVERVIEW_DECORATION=cU.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:OS(JD),position:dw.Center}}),zle._RANGE_HIGHLIGHT_DECORATION=cU.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),zle._FIND_SCOPE_DECORATION=cU.register({description:"find-scope",className:"findScope",isWholeLine:!0});var Ule=function(){function e(t,n,i){u(this,e),this._editorSelection=t,this._ranges=n,this._replaceStrings=i,this._trackedEditorSelectionId=null}return h(e,[{key:"getEditOperations",value:function(e,t){if(this._ranges.length>0){for(var n=[],i=0;i<this._ranges.length;i++)n.push({range:this._ranges[i],text:this._replaceStrings[i]});n.sort((function(e,t){return hd.compareRangesUsingStarts(e.range,t.range)}));for(var r=[],o=n[0],a=1;a<n.length;a++)o.range.endLineNumber===n[a].range.startLineNumber&&o.range.endColumn===n[a].range.startColumn?(o.range=o.range.plusRange(n[a].range),o.text=o.text+n[a].text):(r.push(o),o=n[a]);r.push(o);var s=!0,l=!1,u=void 0;try{for(var c,d=r[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;t.addEditOperation(h.range,h.text)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}]),e}();function jle(e,t){if(e&&""!==e[0]){var n=Kle(e,t,"-"),i=Kle(e,t,"_");return n&&!i?qle(e,t,"-"):!n&&i?qle(e,t,"_"):e[0].toUpperCase()===e[0]?t.toUpperCase():e[0].toLowerCase()===e[0]?t.toLowerCase():function(e){return!!e&&(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e)}(e[0][0])&&t.length>0?t[0].toUpperCase()+t.substr(1):e[0][0].toUpperCase()!==e[0][0]&&t.length>0?t[0].toLowerCase()+t.substr(1):t}return t}function Kle(e,t,n){return-1!==e[0].indexOf(n)&&-1!==t.indexOf(n)&&e[0].split(n).length===t.split(n).length}function qle(e,t,n){var i=t.split(n),r=e[0].split(n),o="";return i.forEach((function(e,t){o+=jle([r[t]],e)+n})),o.slice(0,-1)}var Gle=function e(t){u(this,e),this.staticValue=t,this.kind=0},Zle=function e(t){u(this,e),this.pieces=t,this.kind=1},Yle=function(){function e(t){u(this,e),t&&0!==t.length?1===t.length&&null!==t[0].staticValue?this._state=new Gle(t[0].staticValue):this._state=new Zle(t):this._state=new Gle("")}return h(e,[{key:"hasReplacementPatterns",get:function(){return 1===this._state.kind}},{key:"buildReplaceString",value:function(t,n){if(0===this._state.kind)return n?jle(t,this._state.staticValue):this._state.staticValue;for(var i="",r=0,o=this._state.pieces.length;r<o;r++){var a=this._state.pieces[r];if(null===a.staticValue){var s=e._substitute(a.matchIndex,t);if(null!==a.caseOps&&a.caseOps.length>0){for(var l=[],u=a.caseOps.length,c=0,d=0,h=s.length;d<h;d++){if(c>=u){l.push(s.slice(d));break}switch(a.caseOps[c]){case"U":l.push(s[d].toUpperCase());break;case"u":l.push(s[d].toUpperCase()),c++;break;case"L":l.push(s[d].toLowerCase());break;case"l":l.push(s[d].toLowerCase()),c++;break;default:l.push(s[d])}}s=l.join("")}i+=s}else i+=a.staticValue}return i}}],[{key:"fromStaticValue",value:function(t){return new e([Qle.staticValue(t)])}},{key:"_substitute",value:function(e,t){if(null===t)return"";if(0===e)return t[0];for(var n="";e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}]),e}(),Qle=function(){function e(t,n,i){u(this,e),this.staticValue=t,this.matchIndex=n,i&&0!==i.length?this.caseOps=i.slice(0):this.caseOps=null}return h(e,null,[{key:"staticValue",value:function(t){return new e(t,-1,null)}},{key:"caseOps",value:function(t,n){return new e(null,t,n)}}]),e}(),Xle=function(){function e(t){u(this,e),this._source=t,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}return h(e,[{key:"emitUnchanged",value:function(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}},{key:"emitStatic",value:function(e,t){this._emitStatic(e),this._lastCharIndex=t}},{key:"_emitStatic",value:function(e){0!==e.length&&(this._currentStaticPiece+=e)}},{key:"emitMatchIndex",value:function(e,t,n){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=Qle.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=Qle.caseOps(e,n),this._lastCharIndex=t}},{key:"finalize",value:function(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=Qle.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new Yle(this._result)}}]),e}();var $le=new jy("findWidgetVisible",!1);$le.toNegated();var Jle=new jy("findInputFocussed",!1),eue=new jy("replaceInputFocussed",!1),tue={primary:545,mac:{primary:2593}},nue={primary:565,mac:{primary:2613}},iue={primary:560,mac:{primary:2608}},rue={primary:554,mac:{primary:2602}},oue={primary:558,mac:{primary:2606}},aue="actions.find",sue="actions.findWithSelection",lue="editor.actions.findWithArgs",uue="editor.action.nextMatchFindAction",cue="editor.action.previousMatchFindAction",due="editor.action.goToMatchFindAction",hue="editor.action.nextSelectionMatchFindAction",fue="editor.action.previousSelectionMatchFindAction",gue="editor.action.startFindReplaceAction",vue="closeFindWidget",pue="toggleFindCaseSensitive",mue="toggleFindWholeWord",yue="toggleFindRegex",_ue="toggleFindInSelection",bue="togglePreserveCase",kue="editor.action.replaceOne",wue="editor.action.replaceAll",Cue="editor.action.selectAllMatches",Sue=19999,xue=function(){function e(t,n){var i=this;u(this,e),this._toDispose=new Tu,this._editor=t,this._state=n,this._isDisposed=!1,this._startSearchingTimer=new wg,this._decorations=new zle(t),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new Sg((function(){if(i._editor.hasModel())return i.research(!1)}),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition((function(e){3!==e.reason&&5!==e.reason&&6!==e.reason||i._decorations.setStartPosition(i._editor.getPosition())}))),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent((function(e){i._ignoreModelContentChanged||(e.isFlush&&i._decorations.reset(),i._decorations.setStartPosition(i._editor.getPosition()),i._updateDecorationsScheduler.schedule())}))),this._toDispose.add(this._state.onFindReplaceStateChange((function(e){return i._onStateChanged(e)}))),this.research(!1,this._state.searchScope)}return h(e,[{key:"dispose",value:function(){this._isDisposed=!0,Iu(this._startSearchingTimer),this._toDispose.dispose()}},{key:"_onStateChanged",value:function(e){var t=this;this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet((function(){e.searchScope?t.research(e.moveCursor,t._state.searchScope):t.research(e.moveCursor)}),240)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}},{key:"research",value:function(e,t){var n=this,i=null;void 0!==t?null!==t&&(i=Array.isArray(t)?t:[t]):i=this._decorations.getFindScopes(),null!==i&&(i=i.map((function(e){if(e.startLineNumber!==e.endLineNumber){var t=e.endLineNumber;return 1===e.endColumn&&(t-=1),new hd(e.startLineNumber,1,t,n._editor.getModel().getLineMaxColumn(t))}return e})));var r=this._findMatches(i,!1,Sue);this._decorations.set(r,i);var o=this._editor.getSelection(),a=this._decorations.getCurrentMatchesPosition(o);if(0===a&&r.length>0){var s=jw(r.map((function(e){return e.range})),(function(e){return hd.compareRangesUsingStarts(e,o)>=0}));a=s>0?s-1+1:a}this._state.changeMatchInfo(a,this._decorations.getCount(),void 0),e&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}},{key:"_hasMatches",value:function(){return this._state.matchesCount>0}},{key:"_cannotFind",value:function(){if(!this._hasMatches()){var e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}},{key:"_setCurrentFindMatch",value:function(e){var t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}},{key:"_prevSearchPosition",value:function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),n=e.lineNumber,i=e.column,r=this._editor.getModel();return t||1===i?(1===n?n=r.getLineCount():n--,i=r.getLineMaxColumn(n)):i--,new dd(n,i)}},{key:"_moveToPrevMatch",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._state.canNavigateBack()){if(this._decorations.getCount()<Sue){var i=this._decorations.matchBeforePosition(t);return i&&i.isEmpty()&&i.getStartPosition().equals(t)&&(t=this._prevSearchPosition(t),i=this._decorations.matchBeforePosition(t)),void(i&&this._setCurrentFindMatch(i))}if(!this._cannotFind()){var r=this._decorations.getFindScope(),o=e._getSearchRange(this._editor.getModel(),r);o.getEndPosition().isBefore(t)&&(t=o.getEndPosition()),t.isBefore(o.getStartPosition())&&(t=o.getEndPosition());var a=t.lineNumber,s=t.column,l=this._editor.getModel(),u=new dd(a,s),c=l.findPreviousMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(u)&&(u=this._prevSearchPosition(u),c=l.findPreviousMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1)),c)return n||o.containsRange(c.range)?void this._setCurrentFindMatch(c.range):this._moveToPrevMatch(c.range.getStartPosition(),!0)}}else{var d=this._decorations.matchAfterPosition(t);d&&this._setCurrentFindMatch(d)}}},{key:"moveToPrevMatch",value:function(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}},{key:"_nextSearchPosition",value:function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),n=e.lineNumber,i=e.column,r=this._editor.getModel();return t||i===r.getLineMaxColumn(n)?(n===r.getLineCount()?n=1:n++,i=1):i++,new dd(n,i)}},{key:"_moveToNextMatch",value:function(e){if(this._state.canNavigateForward()){if(this._decorations.getCount()<Sue){var t=this._decorations.matchAfterPosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),void(t&&this._setCurrentFindMatch(t))}var n=this._getNextMatch(e,!1,!0);n&&this._setCurrentFindMatch(n.range)}else{var i=this._decorations.matchBeforePosition(e);i&&this._setCurrentFindMatch(i)}}},{key:"_getNextMatch",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._cannotFind())return null;var o=this._decorations.getFindScope(),a=e._getSearchRange(this._editor.getModel(),o);a.getEndPosition().isBefore(t)&&(t=a.getStartPosition()),t.isBefore(a.getStartPosition())&&(t=a.getStartPosition());var s=t.lineNumber,l=t.column,u=this._editor.getModel(),c=new dd(s,l),d=u.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,n);return i&&d&&d.range.isEmpty()&&d.range.getStartPosition().equals(c)&&(c=this._nextSearchPosition(c),d=u.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,n)),d?r||a.containsRange(d.range)?d:this._getNextMatch(d.range.getEndPosition(),n,i,!0):null}},{key:"moveToNextMatch",value:function(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}},{key:"_moveToMatch",value:function(e){var t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}},{key:"moveToMatch",value:function(e){this._moveToMatch(e)}},{key:"_getReplacePattern",value:function(){return this._state.isRegex?function(e){if(!e||0===e.length)return new Yle(null);for(var t=[],n=new Xle(e),i=0,r=e.length;i<r;i++){var o=e.charCodeAt(i);if(92!==o){if(36===o){if(++i>=r)break;var a=e.charCodeAt(i);if(36===a){n.emitUnchanged(i-1),n.emitStatic("$",i+1);continue}if(48===a||38===a){n.emitUnchanged(i-1),n.emitMatchIndex(0,i+1,t),t.length=0;continue}if(49<=a&&a<=57){var s=a-48;if(i+1<r){var l=e.charCodeAt(i+1);if(48<=l&&l<=57){i++,s=10*s+(l-48),n.emitUnchanged(i-2),n.emitMatchIndex(s,i+1,t),t.length=0;continue}}n.emitUnchanged(i-1),n.emitMatchIndex(s,i+1,t),t.length=0;continue}}}else{if(++i>=r)break;var u=e.charCodeAt(i);switch(u){case 92:n.emitUnchanged(i-1),n.emitStatic("\\",i+1);break;case 110:n.emitUnchanged(i-1),n.emitStatic("\n",i+1);break;case 116:n.emitUnchanged(i-1),n.emitStatic("\t",i+1);break;case 117:case 85:case 108:case 76:n.emitUnchanged(i-1),n.emitStatic("",i+1),t.push(String.fromCharCode(u))}}}return n.finalize()}(this._state.replaceString):Yle.fromStaticValue(this._state.replaceString)}},{key:"replace",value:function(){if(this._hasMatches()){var e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){var i=e.buildReplaceString(n.matches,this._state.preserveCase),r=new mJ(t,i);this._executeEditorCommand("replace",r),this._decorations.setStartPosition(new dd(t.startLineNumber,t.startColumn+i.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}}},{key:"_findMatches",value:function(t,n,i){var r=this,o=(t||[null]).map((function(t){return e._getSearchRange(r._editor.getModel(),t)}));return this._editor.getModel().findMatches(this._state.searchString,o,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,n,i)}},{key:"replaceAll",value:function(){if(this._hasMatches()){var e=this._decorations.getFindScopes();null===e&&this._state.matchesCount>=Sue?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}}},{key:"_largeReplaceAll",value:function(){var e=new Nw(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null),t=e.parseSearchRequest();if(t){var n=t.regex;if(!n.multiline){var i="mu";n.ignoreCase&&(i+="i"),n.global&&(i+="g"),n=new RegExp(n.source,i)}var r,o=this._editor.getModel(),a=o.getValue(1),s=o.getFullModelRange(),l=this._getReplacePattern(),u=this._state.preserveCase;r=l.hasReplacementPatterns||u?a.replace(n,(function(){return l.buildReplaceString(arguments,u)})):a.replace(n,l.buildReplaceString(null,u));var c=new kJ(s,r,this._editor.getSelection());this._executeEditorCommand("replaceAll",c)}}},{key:"_regularReplaceAll",value:function(e){for(var t=this._getReplacePattern(),n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),i=[],r=0,o=n.length;r<o;r++)i[r]=t.buildReplaceString(n[r].matches,this._state.preserveCase);var a=new Ule(this._editor.getSelection(),n.map((function(e){return e.range})),i);this._executeEditorCommand("replaceAll",a)}},{key:"selectAllMatches",value:function(){if(this._hasMatches()){for(var e=this._decorations.getFindScopes(),t=this._findMatches(e,!1,1073741824).map((function(e){return new fd(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)})),n=this._editor.getSelection(),i=0,r=t.length;i<r;i++){if(t[i].equalsRange(n)){t=[n].concat(t.slice(0,i)).concat(t.slice(i+1));break}}this._editor.setSelections(t)}}},{key:"_executeEditorCommand",value:function(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}],[{key:"_getSearchRange",value:function(e,t){return t||e.getFullModelRange()}}]),e}(),Lue=function(e){function t(e,n,i){var r;u(this,t),(r=l(this,t))._hideSoon=r._register(new Sg((function(){return r._hide()}),2e3)),r._isVisible=!1,r._editor=e,r._state=n,r._keybindingService=i,r._domNode=document.createElement("div"),r._domNode.className="findOptionsWidget",r._domNode.style.display="none",r._domNode.style.top="10px",r._domNode.style.zIndex="12",r._domNode.setAttribute("role","presentation"),r._domNode.setAttribute("aria-hidden","true");var o={inputActiveOptionBorder:NL(vN),inputActiveOptionForeground:NL(yN),inputActiveOptionBackground:NL(mN)},a=r._register(LO());return r.caseSensitive=r._register(new pj(_({appendTitle:r._keybindingLabelFor(pue),isChecked:r._state.matchCase,hoverDelegate:a},o))),r._domNode.appendChild(r.caseSensitive.domNode),r._register(r.caseSensitive.onChange((function(){r._state.change({matchCase:r.caseSensitive.checked},!1)}))),r.wholeWords=r._register(new mj(_({appendTitle:r._keybindingLabelFor(mue),isChecked:r._state.wholeWord,hoverDelegate:a},o))),r._domNode.appendChild(r.wholeWords.domNode),r._register(r.wholeWords.onChange((function(){r._state.change({wholeWord:r.wholeWords.checked},!1)}))),r.regex=r._register(new yj(_({appendTitle:r._keybindingLabelFor(yue),isChecked:r._state.isRegex,hoverDelegate:a},o))),r._domNode.appendChild(r.regex.domNode),r._register(r.regex.onChange((function(){r._state.change({isRegex:r.regex.checked},!1)}))),r._editor.addOverlayWidget(r),r._register(r._state.onFindReplaceStateChange((function(e){var t=!1;e.isRegex&&(r.regex.checked=r._state.isRegex,t=!0),e.wholeWord&&(r.wholeWords.checked=r._state.wholeWord,t=!0),e.matchCase&&(r.caseSensitive.checked=r._state.matchCase,t=!0),!r._state.isRevealed&&t&&r._revealTemporarily()}))),r._register(cp(r._domNode,rm.MOUSE_LEAVE,(function(e){return r._onMouseLeave()}))),r._register(cp(r._domNode,"mouseover",(function(e){return r._onMouseOver()}))),r}return p(t,e),h(t,[{key:"_keybindingLabelFor",value:function(e){var t=this._keybindingService.lookupKeybinding(e);return t?" (".concat(t.getLabel(),")"):""}},{key:"dispose",value:function(){this._editor.removeOverlayWidget(this),g(v(t.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return t.ID}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return{preference:0}}},{key:"highlightFindOptions",value:function(){this._revealTemporarily()}},{key:"_revealTemporarily",value:function(){this._show(),this._hideSoon.schedule()}},{key:"_onMouseLeave",value:function(){this._hideSoon.schedule()}},{key:"_onMouseOver",value:function(){this._hideSoon.cancel()}},{key:"_show",value:function(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}},{key:"_hide",value:function(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}}]),t}(eE);function Due(e,t){return 1===e||2!==e&&t}Lue.ID="editor.contrib.findOptionsWidget";var Nue=function(e){function t(){var e;return u(this,t),(e=l(this,t))._onFindReplaceStateChange=e._register(new Zu),e.onFindReplaceStateChange=e._onFindReplaceStateChange.event,e._searchString="",e._replaceString="",e._isRevealed=!1,e._isReplaceRevealed=!1,e._isRegex=!1,e._isRegexOverride=0,e._wholeWord=!1,e._wholeWordOverride=0,e._matchCase=!1,e._matchCaseOverride=0,e._preserveCase=!1,e._preserveCaseOverride=0,e._searchScope=null,e._matchesPosition=0,e._matchesCount=0,e._currentMatch=null,e._loop=!0,e._isSearching=!1,e._filters=null,e}return p(t,e),h(t,[{key:"searchString",get:function(){return this._searchString}},{key:"replaceString",get:function(){return this._replaceString}},{key:"isRevealed",get:function(){return this._isRevealed}},{key:"isReplaceRevealed",get:function(){return this._isReplaceRevealed}},{key:"isRegex",get:function(){return Due(this._isRegexOverride,this._isRegex)}},{key:"wholeWord",get:function(){return Due(this._wholeWordOverride,this._wholeWord)}},{key:"matchCase",get:function(){return Due(this._matchCaseOverride,this._matchCase)}},{key:"preserveCase",get:function(){return Due(this._preserveCaseOverride,this._preserveCase)}},{key:"actualIsRegex",get:function(){return this._isRegex}},{key:"actualWholeWord",get:function(){return this._wholeWord}},{key:"actualMatchCase",get:function(){return this._matchCase}},{key:"actualPreserveCase",get:function(){return this._preserveCase}},{key:"searchScope",get:function(){return this._searchScope}},{key:"matchesPosition",get:function(){return this._matchesPosition}},{key:"matchesCount",get:function(){return this._matchesCount}},{key:"currentMatch",get:function(){return this._currentMatch}},{key:"changeMatchInfo",value:function(e,t,n){var i={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},r=!1;0===t&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,i.matchesPosition=!0,r=!0),this._matchesCount!==t&&(this._matchesCount=t,i.matchesCount=!0,r=!0),void 0!==n&&(hd.equalsRange(this._currentMatch,n)||(this._currentMatch=n,i.currentMatch=!0,r=!0)),r&&this._onFindReplaceStateChange.fire(i)}},{key:"change",value:function(e,t){var n,i=this,r={moveCursor:t,updateHistory:!(arguments.length>2&&void 0!==arguments[2])||arguments[2],searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},o=!1,a=this.isRegex,s=this.wholeWord,l=this.matchCase,u=this.preserveCase;(void 0!==e.searchString&&this._searchString!==e.searchString&&(this._searchString=e.searchString,r.searchString=!0,o=!0),void 0!==e.replaceString&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,r.replaceString=!0,o=!0),void 0!==e.isRevealed&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,r.isRevealed=!0,o=!0),void 0!==e.isReplaceRevealed&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,r.isReplaceRevealed=!0,o=!0),void 0!==e.isRegex&&(this._isRegex=e.isRegex),void 0!==e.wholeWord&&(this._wholeWord=e.wholeWord),void 0!==e.matchCase&&(this._matchCase=e.matchCase),void 0!==e.preserveCase&&(this._preserveCase=e.preserveCase),void 0!==e.searchScope)&&((null===(n=e.searchScope)||void 0===n?void 0:n.every((function(e){var t;return null===(t=i._searchScope)||void 0===t?void 0:t.some((function(t){return!hd.equalsRange(t,e)}))})))||(this._searchScope=e.searchScope,r.searchScope=!0,o=!0));void 0!==e.loop&&this._loop!==e.loop&&(this._loop=e.loop,r.loop=!0,o=!0),void 0!==e.isSearching&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,r.isSearching=!0,o=!0),void 0!==e.filters&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,r.filters=!0,o=!0),this._isRegexOverride=void 0!==e.isRegexOverride?e.isRegexOverride:0,this._wholeWordOverride=void 0!==e.wholeWordOverride?e.wholeWordOverride:0,this._matchCaseOverride=void 0!==e.matchCaseOverride?e.matchCaseOverride:0,this._preserveCaseOverride=void 0!==e.preserveCaseOverride?e.preserveCaseOverride:0,a!==this.isRegex&&(o=!0,r.isRegex=!0),s!==this.wholeWord&&(o=!0,r.wholeWord=!0),l!==this.matchCase&&(o=!0,r.matchCase=!0),u!==this.preserveCase&&(o=!0,r.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(r)}},{key:"canNavigateBack",value:function(){return this.canNavigateInLoop()||1!==this.matchesPosition}},{key:"canNavigateForward",value:function(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}},{key:"canNavigateInLoop",value:function(){return this._loop||this.matchesCount>=Sue}}]),t}(Ru),Iue=Xa("defaultLabel","input"),Eue=Xa("label.preserveCaseToggle","Preserve Case"),Mue=function(e){function t(e){var n;return u(this,t),l(this,t,[{icon:bd.preserveCase,title:Eue+e.appendTitle,isChecked:e.isChecked,hoverDelegate:null!==(n=e.hoverDelegate)&&void 0!==n?n:xO("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground}])}return p(t,e),t}(OU),Tue=function(e){function t(e,n,i,r){var o;u(this,t),(o=l(this,t))._showOptionButtons=i,o.fixFocusOnOptionClickEnabled=!0,o.cachedOptionsWidth=0,o._onDidOptionChange=o._register(new Zu),o.onDidOptionChange=o._onDidOptionChange.event,o._onKeyDown=o._register(new Zu),o.onKeyDown=o._onKeyDown.event,o._onMouseDown=o._register(new Zu),o._onInput=o._register(new Zu),o._onKeyUp=o._register(new Zu),o._onPreserveCaseKeyDown=o._register(new Zu),o.onPreserveCaseKeyDown=o._onPreserveCaseKeyDown.event,o.contextViewProvider=n,o.placeholder=r.placeholder||"",o.validation=r.validation,o.label=r.label||Iue;var a=r.appendPreserveCaseLabel||"",s=r.history||[],c=!!r.flexibleHeight,d=!!r.flexibleWidth,h=r.flexibleMaxHeight;o.domNode=document.createElement("div"),o.domNode.classList.add("monaco-findInput"),o.inputBox=o._register(new Cj(o.domNode,o.contextViewProvider,{ariaLabel:o.label||"",placeholder:o.placeholder||"",validationOptions:{validation:o.validation},history:s,showHistoryHint:r.showHistoryHint,flexibleHeight:c,flexibleWidth:d,flexibleMaxHeight:h,inputBoxStyles:r.inputBoxStyles})),o.preserveCase=o._register(new Mue(_({appendTitle:a,isChecked:!1},r.toggleStyles))),o._register(o.preserveCase.onChange((function(e){o._onDidOptionChange.fire(e),!e&&o.fixFocusOnOptionClickEnabled&&o.inputBox.focus(),o.validate()}))),o._register(o.preserveCase.onKeyDown((function(e){o._onPreserveCaseKeyDown.fire(e)}))),o._showOptionButtons?o.cachedOptionsWidth=o.preserveCase.width():o.cachedOptionsWidth=0;var f=[o.preserveCase.domNode];o.onkeydown(o.domNode,(function(e){if(e.equals(15)||e.equals(17)||e.equals(9)){var t=f.indexOf(o.domNode.ownerDocument.activeElement);if(t>=0){var n=-1;e.equals(17)?n=(t+1)%f.length:e.equals(15)&&(n=0===t?f.length-1:t-1),e.equals(9)?(f[t].blur(),o.inputBox.focus()):n>=0&&f[n].focus(),om(e,!0)}}}));var g=document.createElement("div");return g.className="controls",g.style.display=o._showOptionButtons?"block":"none",g.appendChild(o.preserveCase.domNode),o.domNode.appendChild(g),null==e||e.appendChild(o.domNode),o.onkeydown(o.inputBox.inputElement,(function(e){return o._onKeyDown.fire(e)})),o.onkeyup(o.inputBox.inputElement,(function(e){return o._onKeyUp.fire(e)})),o.oninput(o.inputBox.inputElement,(function(e){return o._onInput.fire()})),o.onmousedown(o.inputBox.inputElement,(function(e){return o._onMouseDown.fire(e)})),o}return p(t,e),h(t,[{key:"enable",value:function(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}},{key:"disable",value:function(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}},{key:"setEnabled",value:function(e){e?this.enable():this.disable()}},{key:"select",value:function(){this.inputBox.select()}},{key:"focus",value:function(){this.inputBox.focus()}},{key:"getPreserveCase",value:function(){return this.preserveCase.checked}},{key:"setPreserveCase",value:function(e){this.preserveCase.checked=e}},{key:"focusOnPreserve",value:function(){this.preserveCase.focus()}},{key:"validate",value:function(){var e;null===(e=this.inputBox)||void 0===e||e.validate()}},{key:"width",set:function(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this)}}]),t}(eE),Rue=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Aue=function(e,t){return function(n,i){t(n,i,e)}},Pue=new jy("suggestWidgetVisible",!1,Xa("suggestWidgetVisible","Whether suggestion are visible")),Oue="historyNavigationWidgetFocus",Fue="historyNavigationForwardsEnabled",Wue="historyNavigationBackwardsEnabled",Bue=void 0,Hue=[];function Vue(e,t){if(Hue.includes(t))throw new Error("Cannot register the same widget multiple times");Hue.push(t);var n=new Tu,i=new jy(Oue,!1).bindTo(e),r=new jy(Fue,!0).bindTo(e),o=new jy(Wue,!0).bindTo(e),a=function(){i.set(!0),Bue=t},s=function(){i.set(!1),Bue===t&&(Bue=void 0)};return Fp(t.element)&&a(),n.add(t.onDidFocus((function(){return a()}))),n.add(t.onDidBlur((function(){return s()}))),n.add(Mu((function(){Hue.splice(Hue.indexOf(t),1),s()}))),{historyNavigationForwardsEnablement:r,historyNavigationBackwardsEnablement:o,dispose:function(){n.dispose()}}}var zue=function(e){function t(e,n,i,r){var o;u(this,t);var a=(o=l(this,t,[e,n,i]))._register(r.createScoped(o.inputBox.element));return o._register(Vue(a,o.inputBox)),o}return p(t,e),t}(xj);zue=Rue([Aue(3,Ky)],zue);var Uue=function(e){function t(e,n,i,r){var o,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];u(this,t);var s=(o=l(this,t,[e,n,a,i]))._register(r.createScoped(o.inputBox.element));return o._register(Vue(s,o.inputBox)),o}return p(t,e),t}(Tue);function jue(e){var t,n;return"Up"===(null===(t=e.lookupKeybinding("history.showPrevious"))||void 0===t?void 0:t.getElectronAccelerator())&&"Down"===(null===(n=e.lookupKeybinding("history.showNext"))||void 0===n?void 0:n.getElectronAccelerator())}Uue=Rue([Aue(3,Ky)],Uue),o_.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:Sy.and(Sy.has(Oue),Sy.equals(Wue,!0),Sy.not("isComposing"),Pue.isEqualTo(!1)),primary:16,secondary:[528],handler:function(e){null==Bue||Bue.showPreviousValue()}}),o_.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:Sy.and(Sy.has(Oue),Sy.equals(Fue,!0),Sy.not("isComposing"),Pue.isEqualTo(!1)),primary:18,secondary:[530],handler:function(e){null==Bue||Bue.showNextValue()}});var Kue=IZ("find-collapsed",bd.chevronRight,Xa("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),que=IZ("find-expanded",bd.chevronDown,Xa("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),Gue=IZ("find-selection",bd.selection,Xa("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Zue=IZ("find-replace",bd.replace,Xa("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Yue=IZ("find-replace-all",bd.replaceAll,Xa("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),Que=IZ("find-previous-match",bd.arrowUp,Xa("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),Xue=IZ("find-next-match",bd.arrowDown,Xa("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),$ue=Xa("label.findDialog","Find / Replace"),Jue=Xa("label.find","Find"),ece=Xa("placeholder.find","Find"),tce=Xa("label.previousMatchButton","Previous Match"),nce=Xa("label.nextMatchButton","Next Match"),ice=Xa("label.toggleSelectionFind","Find in Selection"),rce=Xa("label.closeButton","Close"),oce=Xa("label.replace","Replace"),ace=Xa("placeholder.replace","Replace"),sce=Xa("label.replaceButton","Replace"),lce=Xa("label.replaceAllButton","Replace All"),uce=Xa("label.toggleReplaceButton","Toggle Replace"),cce=Xa("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Sue),dce=Xa("label.matchesLocation","{0} of {1}"),hce=Xa("label.noResults","No results"),fce=419,gce=69,vce="ctrlEnterReplaceAll.windows.donotask",pce=ms?256:2048,mce=function e(t){u(this,e),this.afterLineNumber=t,this.heightInPx=33,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"};function yce(e,t,n){var i=!!t.match(/\n/);n&&i&&n.selectionStart>0&&e.stopPropagation()}function _ce(e,t,n){var i=!!t.match(/\n/);n&&i&&n.selectionEnd<n.value.length&&e.stopPropagation()}var bce=function(e){function t(e,n,i,r,o,a,c,d,h,f){var g,v;return u(this,t),g=l(this,t),v=g,g._hoverService=f,g._cachedHeight=null,g._revealTimeouts=[],g._codeEditor=e,g._controller=n,g._state=i,g._contextViewProvider=r,g._keybindingService=o,g._contextKeyService=a,g._storageService=d,g._notificationService=h,g._ctrlEnterReplaceAllWarningPrompted=!!d.getBoolean(vce,0),g._isVisible=!1,g._isReplaceVisible=!1,g._ignoreChangeEvent=!1,g._updateHistoryDelayer=new vg(500),g._register(Mu((function(){return g._updateHistoryDelayer.cancel()}))),g._register(g._state.onFindReplaceStateChange((function(e){return g._onStateChanged(e)}))),g._buildDomNode(),g._updateButtons(),g._tryUpdateWidgetWidth(),g._findInput.inputBox.layout(),g._register(g._codeEditor.onDidChangeConfiguration((function(e){if(e.hasChanged(92)&&(g._codeEditor.getOption(92)&&g._state.change({isReplaceRevealed:!1},!1),g._updateButtons()),e.hasChanged(146)&&g._tryUpdateWidgetWidth(),e.hasChanged(2)&&g.updateAccessibilitySupport(),e.hasChanged(41)){var t=g._codeEditor.getOption(41).loop;g._state.change({loop:t},!1);var n=g._codeEditor.getOption(41).addExtraSpaceOnTop;n&&!g._viewZone&&(g._viewZone=new mce(0),g._showViewZone()),!n&&g._viewZone&&g._removeViewZone()}}))),g.updateAccessibilitySupport(),g._register(g._codeEditor.onDidChangeCursorSelection((function(){g._isVisible&&g._updateToggleSelectionFindButton()}))),g._register(g._codeEditor.onDidFocusEditorWidget(s((function(){var e;return E(this,(function(t){switch(t.label){case 0:return v._isVisible?[4,v._controller.getGlobalBufferTerm()]:[3,2];case 1:(e=t.sent())&&e!==v._state.searchString&&(v._state.change({searchString:e},!1),v._findInput.select()),t.label=2;case 2:return[2]}}))})))),g._findInputFocused=Jle.bindTo(a),g._findFocusTracker=g._register(sm(g._findInput.inputBox.inputElement)),g._register(g._findFocusTracker.onDidFocus((function(){g._findInputFocused.set(!0),g._updateSearchScope()}))),g._register(g._findFocusTracker.onDidBlur((function(){g._findInputFocused.set(!1)}))),g._replaceInputFocused=eue.bindTo(a),g._replaceFocusTracker=g._register(sm(g._replaceInput.inputBox.inputElement)),g._register(g._replaceFocusTracker.onDidFocus((function(){g._replaceInputFocused.set(!0),g._updateSearchScope()}))),g._register(g._replaceFocusTracker.onDidBlur((function(){g._replaceInputFocused.set(!1)}))),g._codeEditor.addOverlayWidget(g),g._codeEditor.getOption(41).addExtraSpaceOnTop&&(g._viewZone=new mce(0)),g._register(g._codeEditor.onDidChangeModel((function(){g._isVisible&&(g._viewZoneId=void 0)}))),g._register(g._codeEditor.onDidScrollChange((function(e){e.scrollTopChanged?g._layoutViewZone():setTimeout((function(){g._layoutViewZone()}),0)}))),g}return p(t,e),h(t,[{key:"getId",value:function(){return t.ID}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return this._isVisible?{preference:0}:null}},{key:"_onStateChanged",value:function(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(92)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=Dp(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){var t=this._state.searchString.length>0&&0===this._state.matchesCount;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}},{key:"_delayedUpdateHistory",value:function(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,vu)}},{key:"_updateHistory",value:function(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}},{key:"_updateMatchesCount",value:function(){var e,t;if(this._matchesCount.style.minWidth=gce+"px",this._state.matchesCount>=Sue?this._matchesCount.title=cce:this._matchesCount.title="",null===(e=this._matchesCount.firstChild)||void 0===e||e.remove(),this._state.matchesCount>0){var n=String(this._state.matchesCount);this._state.matchesCount>=Sue&&(n+="+");var i=String(this._state.matchesPosition);"0"===i&&(i="?"),t=jh(dce,i,n)}else t=hce;this._matchesCount.appendChild(document.createTextNode(t)),_R(this._getAriaLabel(t,this._state.currentMatch,this._state.searchString)),gce=Math.max(gce,this._matchesCount.clientWidth)}},{key:"_getAriaLabel",value:function(e,t,n){if(e===hce)return""===n?Xa("ariaSearchNoResultEmpty","{0} found",e):Xa("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){var i=Xa("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),r=this._codeEditor.getModel();if(r&&t.startLineNumber<=r.getLineCount()&&t.startLineNumber>=1){var o=r.getLineContent(t.startLineNumber);return"".concat(o,", ").concat(i)}return i}return Xa("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}},{key:"_updateToggleSelectionFindButton",value:function(){var e=this._codeEditor.getSelection(),t=!!e&&(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn),n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}},{key:"_updateButtons",value:function(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);var e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);var n=!this._codeEditor.getOption(92);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}},{key:"_reveal",value:function(){var e=this;if(this._revealTimeouts.forEach((function(e){clearTimeout(e)})),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;var t=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":var n=!!t&&t.startLineNumber!==t.endLineNumber;this._toggleSelectionFind.checked=n}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout((function(){e._domNode.classList.add("visible"),e._domNode.setAttribute("aria-hidden","false")}),0)),this._revealTimeouts.push(setTimeout((function(){e._findInput.validate()}),200)),this._codeEditor.layoutOverlayWidget(this);var i=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&t){var r=this._codeEditor.getDomNode();if(r){var o=xp(r),a=this._codeEditor.getScrolledVisiblePosition(t.getStartPosition()),s=o.left+(a?a.left:0),l=a?a.top:0;if(this._viewZone&&l<this._viewZone.heightInPx){t.endLineNumber>t.startLineNumber&&(i=!1);var u=Sp(this._domNode).left;s>u&&(i=!1);var c=this._codeEditor.getScrolledVisiblePosition(t.getEndPosition());o.left+(c?c.left:0)>u&&(i=!1)}}}this._showViewZone(i)}}},{key:"_hide",value:function(e){this._revealTimeouts.forEach((function(e){clearTimeout(e)})),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}},{key:"_layoutViewZone",value:function(e){var t=this;if(this._codeEditor.getOption(41).addExtraSpaceOnTop){if(this._isVisible){var n=this._viewZone;void 0===this._viewZoneId&&n&&this._codeEditor.changeViewZones((function(i){n.heightInPx=t._getHeight(),t._viewZoneId=i.addZone(n),t._codeEditor.setScrollTop(e||t._codeEditor.getScrollTop()+n.heightInPx)}))}}else this._removeViewZone()}},{key:"_showViewZone",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._isVisible&&this._codeEditor.getOption(41).addExtraSpaceOnTop){void 0===this._viewZone&&(this._viewZone=new mce(0));var n=this._viewZone;this._codeEditor.changeViewZones((function(i){if(void 0!==e._viewZoneId){var r=e._getHeight();if(r===n.heightInPx)return;var o=r-n.heightInPx;return n.heightInPx=r,i.layoutZone(e._viewZoneId),void(t&&e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()+o))}var a=e._getHeight();(a-=e._codeEditor.getOption(84).top)<=0||(n.heightInPx=a,e._viewZoneId=i.addZone(n),t&&e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()+a))}))}}},{key:"_removeViewZone",value:function(){var e=this;this._codeEditor.changeViewZones((function(t){void 0!==e._viewZoneId&&(t.removeZone(e._viewZoneId),e._viewZoneId=void 0,e._viewZone&&(e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()-e._viewZone.heightInPx),e._viewZone=void 0))}))}},{key:"_tryUpdateWidgetWidth",value:function(){if(this._isVisible&&this._domNode.isConnected){var e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0)this._domNode.classList.add("hiddenEditor");else{this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");var t=e.width,n=e.minimap.minimapWidth,i=!1,r=!1,o=!1;if(this._resized)if(Dp(this._domNode)>fce)return this._domNode.style.maxWidth="".concat(t-28-n-15,"px"),void(this._replaceInput.width=Dp(this._findInput.domNode));if(447+n>=t&&(r=!0),447+n-gce>=t&&(o=!0),447+n-gce>=t+50&&(i=!0),this._domNode.classList.toggle("collapsed-find-widget",i),this._domNode.classList.toggle("narrow-find-widget",o),this._domNode.classList.toggle("reduced-find-widget",r),o||i||(this._domNode.style.maxWidth="".concat(t-28-n-15,"px")),this._findInput.layout({collapsedFindWidget:i,narrowFindWidget:o,reducedFindWidget:r}),this._resized){var a=this._findInput.inputBox.element.clientWidth;a>0&&(this._replaceInput.width=a)}else this._isReplaceVisible&&(this._replaceInput.width=Dp(this._findInput.domNode))}}}},{key:"_getHeight",value:function(){var e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}},{key:"_tryUpdateHeight",value:function(){var e=this._getHeight();return(null===this._cachedHeight||this._cachedHeight!==e)&&(this._cachedHeight=e,this._domNode.style.height="".concat(e,"px"),!0)}},{key:"focusFindInput",value:function(){this._findInput.select(),this._findInput.focus()}},{key:"focusReplaceInput",value:function(){this._replaceInput.select(),this._replaceInput.focus()}},{key:"highlightFindOptions",value:function(){this._findInput.highlightFindOptions()}},{key:"_updateSearchScope",value:function(){var e=this;if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){var t=this._codeEditor.getSelections();t.map((function(t){1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));var n=e._state.currentMatch;return t.startLineNumber===t.endLineNumber||hd.equalsRange(t,n)?null:t})).filter((function(e){return!!e})),t.length&&this._state.change({searchScope:t},!0)}}},{key:"_onFindInputMouseDown",value:function(e){e.middleButton&&e.stopPropagation()}},{key:"_onFindInputKeyDown",value:function(e){return e.equals(3|pce)?(this._keybindingService.dispatchEvent(e,e.target)||this._findInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?yce(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):e.equals(18)?_ce(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}},{key:"_onReplaceInputKeyDown",value:function(e){return e.equals(3|pce)?(this._keybindingService.dispatchEvent(e,e.target)||(ps&&_s&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(Xa("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(vce,!0,0,0)),this._replaceInput.inputBox.insertAtCursor("\n")),void e.preventDefault()):e.equals(2)?(this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(1026)?(this._findInput.focus(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?yce(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):e.equals(18)?_ce(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}},{key:"getVerticalSashLeft",value:function(e){return 0}},{key:"_keybindingLabelFor",value:function(e){var t=this._keybindingService.lookupKeybinding(e);return t?" (".concat(t.getLabel(),")"):""}},{key:"_buildDomNode",value:function(){var e=this,t=!0,n=!0;this._findInput=this._register(new zue(null,this._contextViewProvider,{width:221,label:Jue,placeholder:ece,appendCaseSensitiveLabel:this._keybindingLabelFor(pue),appendWholeWordsLabel:this._keybindingLabelFor(mue),appendRegexLabel:this._keybindingLabelFor(yue),validation:function(t){if(0===t.length||!e._findInput.getRegex())return null;try{return new RegExp(t,"gu"),null}catch(e){return{content:e.message}}},flexibleHeight:t,flexibleWidth:n,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:function(){return jue(e._keybindingService)},inputBoxStyles:qF,toggleStyles:KF},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown((function(t){return e._onFindInputKeyDown(t)}))),this._register(this._findInput.inputBox.onDidChange((function(){e._ignoreChangeEvent||e._state.change({searchString:e._findInput.getValue()},!0)}))),this._register(this._findInput.onDidOptionChange((function(){e._state.change({isRegex:e._findInput.getRegex(),wholeWord:e._findInput.getWholeWords(),matchCase:e._findInput.getCaseSensitive()},!0)}))),this._register(this._findInput.onCaseSensitiveKeyDown((function(t){t.equals(1026)&&e._isReplaceVisible&&(e._replaceInput.focus(),t.preventDefault())}))),this._register(this._findInput.onRegexKeyDown((function(t){t.equals(2)&&e._isReplaceVisible&&(e._replaceInput.focusOnPreserve(),t.preventDefault())}))),this._register(this._findInput.inputBox.onDidHeightChange((function(t){e._tryUpdateHeight()&&e._showViewZone()}))),ys&&this._register(this._findInput.onMouseDown((function(t){return e._onFindInputMouseDown(t)}))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount();var i=this._register(LO());this._prevBtn=this._register(new kce({label:tce+this._keybindingLabelFor(cue),icon:Que,hoverDelegate:i,onTrigger:function(){Fa(e._codeEditor.getAction(cue)).run().then(void 0,vu)}},this._hoverService)),this._nextBtn=this._register(new kce({label:nce+this._keybindingLabelFor(uue),icon:Xue,hoverDelegate:i,onTrigger:function(){Fa(e._codeEditor.getAction(uue)).run().then(void 0,vu)}},this._hoverService));var r=document.createElement("div");r.className="find-part",r.appendChild(this._findInput.domNode);var o=document.createElement("div");o.className="find-actions",r.appendChild(o),o.appendChild(this._matchesCount),o.appendChild(this._prevBtn.domNode),o.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new OU({icon:Gue,title:ice+this._keybindingLabelFor(_ue),isChecked:!1,hoverDelegate:i,inputActiveOptionBackground:NL(mN),inputActiveOptionBorder:NL(vN),inputActiveOptionForeground:NL(yN)})),this._register(this._toggleSelectionFind.onChange((function(){if(e._toggleSelectionFind.checked){if(e._codeEditor.hasModel()){var t=e._codeEditor.getSelections();(t=t.map((function(t){return 1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t})).filter((function(e){return!!e}))).length&&e._state.change({searchScope:t},!0)}}else e._state.change({searchScope:null},!0)}))),o.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new kce({label:rce+this._keybindingLabelFor(vue),icon:AZ,hoverDelegate:i,onTrigger:function(){e._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:function(t){t.equals(2)&&e._isReplaceVisible&&(e._replaceBtn.isEnabled()?e._replaceBtn.focus():e._codeEditor.focus(),t.preventDefault())}},this._hoverService)),this._replaceInput=this._register(new Uue(null,void 0,{label:oce,placeholder:ace,appendPreserveCaseLabel:this._keybindingLabelFor(bue),history:[],flexibleHeight:t,flexibleWidth:n,flexibleMaxHeight:118,showHistoryHint:function(){return jue(e._keybindingService)},inputBoxStyles:qF,toggleStyles:KF},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown((function(t){return e._onReplaceInputKeyDown(t)}))),this._register(this._replaceInput.inputBox.onDidChange((function(){e._state.change({replaceString:e._replaceInput.inputBox.value},!1)}))),this._register(this._replaceInput.inputBox.onDidHeightChange((function(t){e._isReplaceVisible&&e._tryUpdateHeight()&&e._showViewZone()}))),this._register(this._replaceInput.onDidOptionChange((function(){e._state.change({preserveCase:e._replaceInput.getPreserveCase()},!0)}))),this._register(this._replaceInput.onPreserveCaseKeyDown((function(t){t.equals(2)&&(e._prevBtn.isEnabled()?e._prevBtn.focus():e._nextBtn.isEnabled()?e._nextBtn.focus():e._toggleSelectionFind.enabled?e._toggleSelectionFind.focus():e._closeBtn.isEnabled()&&e._closeBtn.focus(),t.preventDefault())})));var a=this._register(LO());this._replaceBtn=this._register(new kce({label:sce+this._keybindingLabelFor(kue),icon:Zue,hoverDelegate:a,onTrigger:function(){e._controller.replace()},onKeyDown:function(t){t.equals(1026)&&(e._closeBtn.focus(),t.preventDefault())}},this._hoverService)),this._replaceAllBtn=this._register(new kce({label:lce+this._keybindingLabelFor(wue),icon:Yue,hoverDelegate:a,onTrigger:function(){e._controller.replaceAll()}},this._hoverService));var s=document.createElement("div");s.className="replace-part",s.appendChild(this._replaceInput.domNode);var l=document.createElement("div");l.className="replace-actions",s.appendChild(l),l.appendChild(this._replaceBtn.domNode),l.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new kce({label:uce,className:"codicon toggle left",onTrigger:function(){e._state.change({isReplaceRevealed:!e._isReplaceVisible},!1),e._isReplaceVisible&&(e._replaceInput.width=Dp(e._findInput.domNode),e._replaceInput.inputBox.layout()),e._showViewZone()}},this._hoverService)),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=$ue,this._domNode.role="dialog",this._domNode.style.width="".concat(fce,"px"),this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(r),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(s),this._resizeSash=this._register(new Vj(this._domNode,this,{orientation:0,size:2})),this._resized=!1;var u=fce;this._register(this._resizeSash.onDidStart((function(){u=Dp(e._domNode)}))),this._register(this._resizeSash.onDidChange((function(t){e._resized=!0;var n=u+t.startX-t.currentX;n<fce||(n>(parseFloat(bp(e._domNode).maxWidth)||0)||(e._domNode.style.width="".concat(n,"px"),e._isReplaceVisible&&(e._replaceInput.width=Dp(e._findInput.domNode)),e._findInput.inputBox.layout(),e._tryUpdateHeight()))}))),this._register(this._resizeSash.onDidReset((function(){var t=Dp(e._domNode);if(!(t<fce)){var n=fce;if(!e._resized||t===fce){var i=e._codeEditor.getLayoutInfo();n=i.width-28-i.minimap.minimapWidth-15,e._resized=!0}e._domNode.style.width="".concat(n,"px"),e._isReplaceVisible&&(e._replaceInput.width=Dp(e._findInput.domNode)),e._findInput.inputBox.layout()}})))}},{key:"updateAccessibilitySupport",value:function(){var e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(2!==e)}}]),t}(eE);bce.ID="editor.contrib.findWidget";var kce=function(e){function t(e,n){var i;u(this,t),(i=l(this,t))._opts=e;var r,o="button";return i._opts.className&&(o=o+" "+i._opts.className),i._opts.icon&&(o=o+" "+ny.asClassName(i._opts.icon)),i._domNode=document.createElement("div"),i._domNode.tabIndex=0,i._domNode.className=o,i._domNode.setAttribute("role","button"),i._domNode.setAttribute("aria-label",i._opts.label),i._register(n.setupManagedHover(null!==(r=e.hoverDelegate)&&void 0!==r?r:xO("element"),i._domNode,i._opts.label)),i.onclick(i._domNode,(function(e){i._opts.onTrigger(),e.preventDefault()})),i.onkeydown(i._domNode,(function(e){var t,n;if(e.equals(10)||e.equals(3))return i._opts.onTrigger(),void e.preventDefault();null===(t=(n=i._opts).onKeyDown)||void 0===t||t.call(n,e)})),i}return p(t,e),h(t,[{key:"domNode",get:function(){return this._domNode}},{key:"isEnabled",value:function(){return this._domNode.tabIndex>=0}},{key:"focus",value:function(){this._domNode.focus()}},{key:"setEnabled",value:function(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}},{key:"setExpanded",value:function(e){var t,n,i,r;(this._domNode.setAttribute("aria-expanded",String(!!e)),e)?((t=this._domNode.classList).remove.apply(t,x(ny.asClassNameArray(Kue))),(n=this._domNode.classList).add.apply(n,x(ny.asClassNameArray(que)))):((i=this._domNode.classList).remove.apply(i,x(ny.asClassNameArray(que))),(r=this._domNode.classList).add.apply(r,x(ny.asClassNameArray(Kue))))}}]),t}(eE);VS((function(e,t){var n=e.getColor(wD);n&&t.addRule(".monaco-editor .findMatch { border: 1px ".concat(RS(e.type)?"dotted":"solid"," ").concat(n,"; box-sizing: border-box; }"));var i=e.getColor(CD);i&&t.addRule(".monaco-editor .findScope { border: 1px ".concat(RS(e.type)?"dashed":"solid"," ").concat(i,"; }"));var r=e.getColor(KL);r&&t.addRule(".monaco-editor .find-widget { border: 1px solid ".concat(r,"; }"));var o=e.getColor(_D);o&&t.addRule(".monaco-editor .findMatchInline { color: ".concat(o,"; }"));var a=e.getColor(kD);a&&t.addRule(".monaco-editor .currentFindMatchInline { color: ".concat(a,"; }"))}));var wce,Cce=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Sce=function(e,t){return function(n,i){t(n,i,e)}};function xce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.hasModel())return null;var i=e.getSelection();if("single"===t&&i.startLineNumber===i.endLineNumber||"multiple"===t)if(i.isEmpty()){var r=e.getConfiguredWordAtPosition(i.getStartPosition());if(r&&!1===n)return r.word}else if(e.getModel().getValueLengthInRange(i)<524288)return e.getModel().getValueInRange(i);return null}var Lce=(nn=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t))._editor=e,s._findWidgetVisible=$le.bindTo(n),s._contextKeyService=n,s._storageService=i,s._clipboardService=r,s._notificationService=o,s._hoverService=a,s._updateHistoryDelayer=new vg(500),s._state=s._register(new Nue),s.loadQueryState(),s._register(s._state.onFindReplaceStateChange((function(e){return s._onStateChanged(e)}))),s._model=null,s._register(s._editor.onDidChangeModel((function(){var e=s._editor.getModel()&&s._state.isRevealed;s.disposeModel(),s._state.change({searchScope:null,matchCase:s._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:s._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:s._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:s._storageService.getBoolean("editor.preserveCase",1,!1)},!1),e&&s._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:s._editor.getOption(41).loop})}))),s}return p(t,e),h(t,[{key:"editor",get:function(){return this._editor}},{key:"dispose",value:function(){this.disposeModel(),g(v(t.prototype),"dispose",this).call(this)}},{key:"disposeModel",value:function(){this._model&&(this._model.dispose(),this._model=null)}},{key:"_onStateChanged",value:function(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}},{key:"saveQueryState",value:function(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}},{key:"loadQueryState",value:function(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}},{key:"isFindInputFocused",value:function(){return!!Jle.getValue(this._contextKeyService)}},{key:"getState",value:function(){return this._state}},{key:"closeFindWidget",value:function(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}},{key:"toggleCaseSensitive",value:function(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleWholeWords",value:function(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleRegex",value:function(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"togglePreserveCase",value:function(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleSearchScope",value:function(){var e=this;if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){var t=this._editor.getSelections();(t=t.map((function(t){return 1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t})).filter((function(e){return!!e}))).length&&this._state.change({searchScope:t},!0)}}},{key:"setSearchString",value:function(e){this._state.isRegex&&(e=qh(e)),this._state.change({searchString:e},!1)}},{key:"highlightFindOptions",value:function(){}},{key:"_start",value:function(e,t){var n=this;return s((function(){var i,r,o,a,s;return E(this,(function(l){switch(l.label){case 0:return n.disposeModel(),n._editor.hasModel()?(i=b(_({},t),{isRevealed:!0}),"single"===e.seedSearchStringFromSelection?(r=xce(n._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection))&&(n._state.isRegex?i.searchString=qh(r):i.searchString=r):"multiple"!==e.seedSearchStringFromSelection||e.updateSearchScope||(o=xce(n._editor,e.seedSearchStringFromSelection))&&(i.searchString=o),i.searchString||!e.seedSearchStringFromGlobalClipboard?[3,2]:[4,n.getGlobalBufferTerm()]):[2];case 1:if(a=l.sent(),!n._editor.hasModel())return[2];a&&(i.searchString=a),l.label=2;case 2:return e.forceRevealReplace||i.isReplaceRevealed?i.isReplaceRevealed=!0:n._findWidgetVisible.get()||(i.isReplaceRevealed=!1),e.updateSearchScope&&(s=n._editor.getSelections()).some((function(e){return!e.isEmpty()}))&&(i.searchScope=s),i.loop=e.loop,n._state.change(i,!1),n._model||(n._model=new xue(n._editor,n._state)),[2]}}))}))()}},{key:"start",value:function(e,t){return this._start(e,t)}},{key:"moveToNextMatch",value:function(){return!!this._model&&(this._model.moveToNextMatch(),!0)}},{key:"moveToPrevMatch",value:function(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}},{key:"goToMatch",value:function(e){return!!this._model&&(this._model.moveToMatch(e),!0)}},{key:"replace",value:function(){return!!this._model&&(this._model.replace(),!0)}},{key:"replaceAll",value:function(){var e;return!!this._model&&((null===(e=this._editor.getModel())||void 0===e?void 0:e.isTooLargeForHeapOperation())?(this._notificationService.warn(Xa("too.large.for.replaceall","The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0))}},{key:"selectAllMatches",value:function(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}},{key:"getGlobalBufferTerm",value:function(){var e=this;return s((function(){return E(this,(function(t){return e._editor.getOption(41).globalFindClipboard&&e._editor.hasModel()&&!e._editor.getModel().isTooLargeForSyncing()?[2,e._clipboardService.readFindText()]:[2,""]}))}))()}},{key:"setGlobalBufferTerm",value:function(e){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}}],[{key:"get",value:function(e){return e.getContribution(wce.ID)}}]),t}(Ru),wce=nn,nn.ID="editor.contrib.findController",nn),Dce=function(e){function t(e,n,i,r,o,a,s,c,d){var h;return u(this,t),(h=l(this,t,[e,i,s,c,a,d]))._contextViewService=n,h._keybindingService=r,h._themeService=o,h._widget=null,h._findOptionsWidget=null,h}return p(t,e),h(t,[{key:"_start",value:function(e,n){var i=this,r=this,o=function(){return g(v(t.prototype),"_start",i)};return s((function(){var t,i,a;return E(this,(function(s){switch(s.label){case 0:switch(r._widget||r._createFindWidget(),t=r._editor.getSelection(),i=!1,r._editor.getOption(41).autoFindInSelection){case"always":i=!0;break;case"never":i=!1;break;case"multiline":a=!!t&&t.startLineNumber!==t.endLineNumber,i=a}return e.updateSearchScope=e.updateSearchScope||i,[4,o().call(r,e,n)];case 1:return s.sent(),r._widget&&(2===e.shouldFocus?r._widget.focusReplaceInput():1===e.shouldFocus&&r._widget.focusFindInput()),[2]}}))}))()}},{key:"highlightFindOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}},{key:"_createFindWidget",value:function(){this._widget=this._register(new bce(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService,this._hoverService)),this._findOptionsWidget=this._register(new Lue(this._editor,this._state,this._keybindingService))}}]),t}(Lce=wce=Cce([Sce(1,Ky),Sce(2,BF),Sce(3,fY),Sce(4,rx),Sce(5,jI)],Lce));Dce=Cce([Sce(1,qI),Sce(2,Ky),Sce(3,ZI),Sce(4,PS),Sce(5,rx),Sce(6,BF),Sce(7,fY),Sce(8,jI)],Dce),F_(new T_({id:aue,label:Xa("startFindAction","Find"),alias:"Find",precondition:Sy.or(p0.focus,Sy.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:d_.MenubarEditMenu,group:"3_find",title:Xa({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}})).addImplementation(0,(function(e,t,n){var i=Lce.get(t);return!!i&&i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(41).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(41).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:t.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop})}));var Nce={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},isRegex:{type:"boolean"},matchWholeWord:{type:"boolean"},isCaseSensitive:{type:"boolean"},preserveCase:{type:"boolean"},findInSelection:{type:"boolean"}}}}]},Ice=function(e){function t(){return u(this,t),l(this,t,[{id:lue,label:Xa("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:Nce}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){return s((function(){var e,i;return E(this,(function(r){switch(r.label){case 0:return(e=Lce.get(t))?(i=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:void 0!==n.replaceString,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{},[4,e.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===e.getState().searchString.length&&"never"!==t.getOption(41).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(41).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(null==n?void 0:n.findInSelection)||!1,loop:t.getOption(41).loop},i)]):[3,2];case 1:r.sent(),e.setGlobalBufferTerm(e.getState().searchString),r.label=2;case 2:return[2]}}))}))()}}]),t}(M_),Ece=function(e){function t(){return u(this,t),l(this,t,[{id:sue,label:Xa("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e;return E(this,(function(n){switch(n.label){case 0:return(e=Lce.get(t))?[4,e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop})]:[3,2];case 1:n.sent(),e.setGlobalBufferTerm(e.getState().searchString),n.label=2;case 2:return[2]}}))}))()}}]),t}(M_),Mce=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=this;return s((function(){var e;return E(this,(function(i){switch(i.label){case 0:return!(e=Lce.get(t))||n._run(e)?[3,2]:[4,e.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===e.getState().searchString.length&&"never"!==t.getOption(41).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(41).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop})];case 1:i.sent(),n._run(e),i.label=2;case 2:return[2]}}))}))()}}]),t}(M_),Tce=function(e){function t(){return u(this,t),l(this,t,[{id:uue,label:Xa("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:p0.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:Sy.and(p0.focus,Jle),primary:3,weight:100}]}])}return p(t,e),h(t,[{key:"_run",value:function(e){return!!e.moveToNextMatch()&&(e.editor.pushUndoStop(),!0)}}]),t}(Mce),Rce=function(e){function t(){return u(this,t),l(this,t,[{id:cue,label:Xa("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:p0.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:Sy.and(p0.focus,Jle),primary:1027,weight:100}]}])}return p(t,e),h(t,[{key:"_run",value:function(e){return e.moveToPrevMatch()}}]),t}(Mce),Ace=function(e){function t(){var e;return u(this,t),(e=l(this,t,[{id:due,label:Xa("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:$le}]))._highlightDecorations=[],e}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i=this,r=Lce.get(t);if(r){var o=r.getState().matchesCount;if(o<1){e.get(rx).notify({severity:ix.Warning,message:Xa("findMatchAction.noResults","No matches. Try searching for something else.")})}else{var a=e.get(TU),s=new Tu,l=s.add(a.createInputBox());l.placeholder=Xa("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",o);var u=function(e){var t=parseInt(e);if(!isNaN(t)){var n=r.getState().matchesCount;return t>0&&t<=n?t-1:t<0&&t>=-n?n+t:void 0}};s.add(l.onDidChangeValue((function(e){!function(e){var n=u(e);if("number"==typeof n){l.validationMessage=void 0,r.goToMatch(n);var o=r.getState().currentMatch;o&&i.addDecorations(t,o)}else l.validationMessage=Xa("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",r.getState().matchesCount),i.clearDecorations(t)}(e)}))),s.add(l.onDidAccept((function(){var e=u(l.value);"number"==typeof e?(r.goToMatch(e),l.hide()):l.validationMessage=Xa("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",r.getState().matchesCount)}))),s.add(l.onDidHide((function(){i.clearDecorations(t),s.dispose()}))),l.show()}}}},{key:"clearDecorations",value:function(e){var t=this;e.changeDecorations((function(e){t._highlightDecorations=e.deltaDecorations(t._highlightDecorations,[])}))}},{key:"addDecorations",value:function(e,t){var n=this;e.changeDecorations((function(e){n._highlightDecorations=e.deltaDecorations(n._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:OS(cB),position:dw.Full}}}])}))}}]),t}(M_),Pce=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=this;return s((function(){var e,i;return E(this,(function(r){switch(r.label){case 0:return(e=Lce.get(t))?((i=xce(t,"single",!1))&&e.setSearchString(i),n._run(e)?[3,2]:[4,e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop})]):[2];case 1:r.sent(),n._run(e),r.label=2;case 2:return[2]}}))}))()}}]),t}(M_),Oce=function(e){function t(){return u(this,t),l(this,t,[{id:hue,label:Xa("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:p0.focus,primary:2109,weight:100}}])}return p(t,e),h(t,[{key:"_run",value:function(e){return e.moveToNextMatch()}}]),t}(Pce),Fce=function(e){function t(){return u(this,t),l(this,t,[{id:fue,label:Xa("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:p0.focus,primary:3133,weight:100}}])}return p(t,e),h(t,[{key:"_run",value:function(e){return e.moveToPrevMatch()}}]),t}(Pce);F_(new T_({id:gue,label:Xa("startReplace","Replace"),alias:"Replace",precondition:Sy.or(p0.focus,Sy.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:d_.MenubarEditMenu,group:"3_find",title:Xa({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}})).addImplementation(0,(function(e,t,n){if(!t.hasModel()||t.getOption(92))return!1;var i=Lce.get(t);if(!i)return!1;var r=t.getSelection(),o=i.isFindInputFocused(),a=!r.isEmpty()&&r.startLineNumber===r.endLineNumber&&"never"!==t.getOption(41).seedSearchStringFromSelection&&!o,s=o||a?2:1;return i.start({forceRevealReplace:!0,seedSearchStringFromSelection:a?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(41).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==t.getOption(41).seedSearchStringFromSelection,shouldFocus:s,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop})})),B_(Lce.ID,Dce,0),O_(Ice),O_(Ece),O_(Tce),O_(Rce),O_(Ace),O_(Oce),O_(Fce);var Wce,Bce=E_.bindToContribution(Lce.get);P_(new Bce({id:vue,precondition:$le,handler:function(e){return e.closeFindWidget()},kbOpts:{weight:105,kbExpr:Sy.and(p0.focus,Sy.not("isComposing")),primary:9,secondary:[1033]}})),P_(new Bce({id:pue,precondition:void 0,handler:function(e){return e.toggleCaseSensitive()},kbOpts:{weight:105,kbExpr:p0.focus,primary:tue.primary,mac:tue.mac,win:tue.win,linux:tue.linux}})),P_(new Bce({id:mue,precondition:void 0,handler:function(e){return e.toggleWholeWords()},kbOpts:{weight:105,kbExpr:p0.focus,primary:nue.primary,mac:nue.mac,win:nue.win,linux:nue.linux}})),P_(new Bce({id:yue,precondition:void 0,handler:function(e){return e.toggleRegex()},kbOpts:{weight:105,kbExpr:p0.focus,primary:iue.primary,mac:iue.mac,win:iue.win,linux:iue.linux}})),P_(new Bce({id:_ue,precondition:void 0,handler:function(e){return e.toggleSearchScope()},kbOpts:{weight:105,kbExpr:p0.focus,primary:rue.primary,mac:rue.mac,win:rue.win,linux:rue.linux}})),P_(new Bce({id:bue,precondition:void 0,handler:function(e){return e.togglePreserveCase()},kbOpts:{weight:105,kbExpr:p0.focus,primary:oue.primary,mac:oue.mac,win:oue.win,linux:oue.linux}})),P_(new Bce({id:kue,precondition:$le,handler:function(e){return e.replace()},kbOpts:{weight:105,kbExpr:p0.focus,primary:3094}})),P_(new Bce({id:kue,precondition:$le,handler:function(e){return e.replace()},kbOpts:{weight:105,kbExpr:Sy.and(p0.focus,eue),primary:3}})),P_(new Bce({id:wue,precondition:$le,handler:function(e){return e.replaceAll()},kbOpts:{weight:105,kbExpr:p0.focus,primary:2563}})),P_(new Bce({id:wue,precondition:$le,handler:function(e){return e.replaceAll()},kbOpts:{weight:105,kbExpr:Sy.and(p0.focus,eue),primary:void 0,mac:{primary:2051}}})),P_(new Bce({id:Cue,precondition:$le,handler:function(e){return e.selectAllMatches()},kbOpts:{weight:105,kbExpr:p0.focus,primary:515}}));var Hce=(f(Wce={},0," "),f(Wce,1,"u"),f(Wce,2,"r"),Wce),Vce=16777215,zce=4278190080,Uce=function(){function e(t){u(this,e);var n=Math.ceil(t/32);this._states=new Uint32Array(n)}return h(e,[{key:"get",value:function(e){var t=e/32|0,n=e%32;return!!(this._states[t]&1<<n)}},{key:"set",value:function(e,t){var n=e/32|0,i=e%32,r=this._states[n];this._states[n]=t?r|1<<i:r&~(1<<i)}}]),e}(),jce=function(){function e(t,n,i){if(u(this,e),t.length!==n.length||t.length>65535)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=t,this._endIndexes=n,this._collapseStates=new Uce(t.length),this._userDefinedStates=new Uce(t.length),this._recoveredStates=new Uce(t.length),this._types=i,this._parentsComputed=!1}return h(e,[{key:"ensureParentIndices",value:function(){var e=this;if(!this._parentsComputed){this._parentsComputed=!0;for(var t=[],n=function(n,i){var r=t[t.length-1];return e.getStartLineNumber(r)<=n&&e.getEndLineNumber(r)>=i},i=0,r=this._startIndexes.length;i<r;i++){var o=this._startIndexes[i],a=this._endIndexes[i];if(o>Vce||a>Vce)throw new Error("startLineNumber or endLineNumber must not exceed "+Vce);for(;t.length>0&&!n(o,a);)t.pop();var s=t.length>0?t[t.length-1]:-1;t.push(i),this._startIndexes[i]=o+((255&s)<<24),this._endIndexes[i]=a+((65280&s)<<16)}}}},{key:"length",get:function(){return this._startIndexes.length}},{key:"getStartLineNumber",value:function(e){return this._startIndexes[e]&Vce}},{key:"getEndLineNumber",value:function(e){return this._endIndexes[e]&Vce}},{key:"getType",value:function(e){return this._types?this._types[e]:void 0}},{key:"hasTypes",value:function(){return!!this._types}},{key:"isCollapsed",value:function(e){return this._collapseStates.get(e)}},{key:"setCollapsed",value:function(e,t){this._collapseStates.set(e,t)}},{key:"isUserDefined",value:function(e){return this._userDefinedStates.get(e)}},{key:"setUserDefined",value:function(e,t){return this._userDefinedStates.set(e,t)}},{key:"isRecovered",value:function(e){return this._recoveredStates.get(e)}},{key:"setRecovered",value:function(e,t){return this._recoveredStates.set(e,t)}},{key:"getSource",value:function(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}},{key:"setSource",value:function(e,t){1===t?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):2===t?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}},{key:"setCollapsedAllOfType",value:function(e,t){var n=!1;if(this._types)for(var i=0;i<this._types.length;i++)this._types[i]===e&&(this.setCollapsed(i,t),n=!0);return n}},{key:"toRegion",value:function(e){return new Kce(this,e)}},{key:"getParentIndex",value:function(e){this.ensureParentIndices();var t=((this._startIndexes[e]&zce)>>>24)+((this._endIndexes[e]&zce)>>>16);return 65535===t?-1:t}},{key:"contains",value:function(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}},{key:"findIndex",value:function(e){var t=0,n=this._startIndexes.length;if(0===n)return-1;for(;t<n;){var i=Math.floor((t+n)/2);e<this.getStartLineNumber(i)?n=i:t=i+1}return t-1}},{key:"findRange",value:function(e){var t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);-1!==t;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}},{key:"toString",value:function(){for(var e=[],t=0;t<this.length;t++)e[t]="[".concat(Hce[this.getSource(t)]).concat(this.isCollapsed(t)?"+":"-","] ").concat(this.getStartLineNumber(t),"/").concat(this.getEndLineNumber(t));return e.join(", ")}},{key:"toFoldRange",value:function(e){return{startLineNumber:this._startIndexes[e]&Vce,endLineNumber:this._endIndexes[e]&Vce,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}}],[{key:"fromFoldRanges",value:function(t){for(var n=t.length,i=new Uint32Array(n),r=new Uint32Array(n),o=[],a=!1,s=0;s<n;s++){var l=t[s];i[s]=l.startLineNumber,r[s]=l.endLineNumber,o.push(l.type),l.type&&(a=!0)}a||(o=void 0);for(var u=new e(i,r,o),c=0;c<n;c++)t[c].isCollapsed&&u.setCollapsed(c,!0),u.setSource(c,t[c].source);return u}},{key:"sanitizeAndMerge",value:function(e,t,n,i){n=null!=n?n:Number.MAX_VALUE;for(var r,o=function(e,t){return Array.isArray(e)?function(n){return n<t?e[n]:void 0}:function(n){return n<t?e.toFoldRange(n):void 0}},a=o(e,e.length),s=o(t,t.length),l=0,u=0,c=a(0),d=s(0),h=[],f=0,g=[];c||d;){var v=void 0;if(d&&(!c||c.startLineNumber>=d.startLineNumber))c&&c.startLineNumber===d.startLineNumber?(1===d.source?v=d:((v=c).isCollapsed=d.isCollapsed&&(c.endLineNumber===d.endLineNumber||!(null==i?void 0:i.startsInside(c.startLineNumber+1,c.endLineNumber+1))),v.source=0),c=a(++l)):(v=d,d.isCollapsed&&0===d.source&&(v.source=2)),d=s(++u);else{for(var p=u,m=d;;){if(!m||m.startLineNumber>c.endLineNumber){v=c;break}if(1===m.source&&m.endLineNumber>c.endLineNumber)break;m=s(++p)}c=a(++l)}if(v){for(;r&&r.endLineNumber<v.startLineNumber;)r=h.pop();v.endLineNumber>v.startLineNumber&&v.startLineNumber>f&&v.endLineNumber<=n&&(!r||r.endLineNumber>=v.endLineNumber)&&(g.push(v),f=v.startLineNumber,r&&h.push(r),r=v)}}return g}}]),e}(),Kce=function(){function e(t,n){u(this,e),this.ranges=t,this.index=n}return h(e,[{key:"startLineNumber",get:function(){return this.ranges.getStartLineNumber(this.index)}},{key:"endLineNumber",get:function(){return this.ranges.getEndLineNumber(this.index)}},{key:"regionIndex",get:function(){return this.index}},{key:"parentIndex",get:function(){return this.ranges.getParentIndex(this.index)}},{key:"isCollapsed",get:function(){return this.ranges.isCollapsed(this.index)}},{key:"containedBy",value:function(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}},{key:"containsLine",value:function(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}]),e}(),qce=function(){function e(t,n){u(this,e),this._updateEventEmitter=new Zu,this.onDidChange=this._updateEventEmitter.event,this._textModel=t,this._decorationProvider=n,this._regions=new jce(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}return h(e,[{key:"regions",get:function(){return this._regions}},{key:"textModel",get:function(){return this._textModel}},{key:"toggleCollapseState",value:function(e){var t=this;if(e.length){e=e.sort((function(e,t){return e.regionIndex-t.regionIndex}));var n={};this._decorationProvider.changeDecorations((function(i){var r=0,o=-1,a=-1,s=function(e){for(;r<e;){var n=t._regions.getEndLineNumber(r),s=t._regions.isCollapsed(r);if(n<=o){var l=0!==t.regions.getSource(r);i.changeDecorationOptions(t._editorDecorationIds[r],t._decorationProvider.getDecorationOption(s,n<=a,l))}s&&n>a&&(a=n),r++}},l=!0,u=!1,c=void 0;try{for(var d,h=e[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value.regionIndex,g=t._editorDecorationIds[f];if(g&&!n[g]){n[g]=!0,s(f);var v=!t._regions.isCollapsed(f);t._regions.setCollapsed(f,v),o=Math.max(o,t._regions.getEndLineNumber(f))}}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}s(t._regions.length)})),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}}},{key:"removeManualRanges",value:function(e){for(var t=new Array,n=function(t){var n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(!(s.startLineNumber>t.endLineNumber||t.startLineNumber>s.endLineNumber))return!0}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return!1},i=0;i<this._regions.length;i++){var r=this._regions.toFoldRange(i);0!==r.source&&n(r)||t.push(r)}this.updatePost(jce.fromFoldRanges(t))}},{key:"update",value:function(e,t){var n=this._currentFoldedOrManualRanges(t),i=jce.sanitizeAndMerge(e,n,this._textModel.getLineCount(),t);this.updatePost(jce.fromFoldRanges(i))}},{key:"updatePost",value:function(e){for(var t=this,n=[],i=-1,r=0,o=e.length;r<o;r++){var a=e.getStartLineNumber(r),s=e.getEndLineNumber(r),l=e.isCollapsed(r),u=0!==e.getSource(r),c={startLineNumber:a,startColumn:this._textModel.getLineMaxColumn(a),endLineNumber:s,endColumn:this._textModel.getLineMaxColumn(s)+1};n.push({range:c,options:this._decorationProvider.getDecorationOption(l,s<=i,u)}),l&&s>i&&(i=s)}this._decorationProvider.changeDecorations((function(e){return t._editorDecorationIds=e.deltaDecorations(t._editorDecorationIds,n)})),this._regions=e,this._updateEventEmitter.fire({model:this})}},{key:"_currentFoldedOrManualRanges",value:function(e){for(var t=[],n=0,i=this._regions.length;n<i;n++){var r=this.regions.isCollapsed(n),o=this.regions.getSource(n);if(r||0!==o){var a=this._regions.toFoldRange(n),s=this._textModel.getDecorationRange(this._editorDecorationIds[n]);s&&(r&&(null==e?void 0:e.startsInside(s.startLineNumber+1,s.endLineNumber))&&(r=!1),t.push({startLineNumber:s.startLineNumber,endLineNumber:s.endLineNumber,type:a.type,isCollapsed:r,source:o}))}}return t}},{key:"getMemento",value:function(){for(var e=this._currentFoldedOrManualRanges(),t=[],n=this._textModel.getLineCount(),i=0,r=e.length;i<r;i++){var o=e[i];if(!(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>n)){var a=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);t.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,isCollapsed:o.isCollapsed,source:o.source,checksum:a})}}return t.length>0?t:void 0}},{key:"applyMemento",value:function(e){if(Array.isArray(e)){var t=[],n=this._textModel.getLineCount(),i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(!(l.startLineNumber>=l.endLineNumber||l.startLineNumber<1||l.endLineNumber>n)){var u,c,d=this._getLinesChecksum(l.startLineNumber+1,l.endLineNumber);if(!l.checksum||d===l.checksum)t.push({startLineNumber:l.startLineNumber,endLineNumber:l.endLineNumber,type:void 0,isCollapsed:null===(u=l.isCollapsed)||void 0===u||u,source:null!==(c=l.source)&&void 0!==c?c:0})}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}var h=jce.sanitizeAndMerge(this._regions,t,n);this.updatePost(jce.fromFoldRanges(h))}}},{key:"_getLinesChecksum",value:function(e,t){return Kv(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}},{key:"dispose",value:function(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}},{key:"getAllRegionsAtLine",value:function(e,t){var n=[];if(this._regions)for(var i=this._regions.findRange(e),r=1;i>=0;){var o=this._regions.toRegion(i);t&&!t(o,r)||n.push(o),r++,i=o.parentIndex}return n}},{key:"getRegionAtLine",value:function(e){if(this._regions){var t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}},{key:"getRegionsInside",value:function(e,t){var n=[],i=e?e.regionIndex+1:0,r=e?e.endLineNumber:Number.MAX_VALUE;if(t&&2===t.length)for(var o=[],a=i,s=this._regions.length;a<s;a++){var l=this._regions.toRegion(a);if(!(this._regions.getStartLineNumber(a)<r))break;for(;o.length>0&&!l.containedBy(o[o.length-1]);)o.pop();o.push(l),t(l,o.length)&&n.push(l)}else for(var u=i,c=this._regions.length;u<c;u++){var d=this._regions.toRegion(u);if(!(this._regions.getStartLineNumber(u)<r))break;t&&!t(d)||n.push(d)}return n}}]),e}();function Gce(e,t,n){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=function(){var n=s.value,r=e.getRegionAtLine(n);if(r){var o=!r.isCollapsed;if(i.push(r),t>1){var a,l=e.getRegionsInside(r,(function(e,n){return e.isCollapsed!==o&&n<t}));(a=i).push.apply(a,x(l))}}},u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)l()}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}e.toggleCollapseState(i)}function Zce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_VALUE,i=arguments.length>3?arguments[3]:void 0,r=[];if(i&&i.length>0){var o=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=e.getRegionAtLine(c);if(d&&(d.isCollapsed!==t&&r.push(d),n>1)){var h,f=e.getRegionsInside(d,(function(e,i){return e.isCollapsed!==t&&i<n}));(h=r).push.apply(h,x(f))}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}else{var g,v=e.getRegionsInside(null,(function(e,i){return e.isCollapsed!==t&&i<n}));(g=r).push.apply(g,x(v))}e.toggleCollapseState(r)}function Yce(e,t,n,i){var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c,d=l.value,h=e.getAllRegionsAtLine(d,(function(e,i){return e.isCollapsed!==t&&i<=n}));(c=r).push.apply(c,x(h))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}e.toggleCollapseState(r)}function Qce(e,t,n){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=e.getAllRegionsAtLine(u,void 0);c.length>0&&i.push(c[0])}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}var d=e.getRegionsInside(null,(function(e){return i.every((function(t){return!t.containedBy(e)&&!e.containedBy(t)}))&&e.isCollapsed!==t}));e.toggleCollapseState(d)}function Xce(e,t,n){for(var i=e.textModel,r=e.regions,o=[],a=r.length-1;a>=0;a--)if(n!==r.isCollapsed(a)){var s=r.getStartLineNumber(a);t.test(i.getLineContent(s))&&o.push(r.toRegion(a))}e.toggleCollapseState(o)}function $ce(e,t,n){for(var i=e.regions,r=[],o=i.length-1;o>=0;o--)n!==i.isCollapsed(o)&&t===i.getType(o)&&r.push(i.toRegion(o));e.toggleCollapseState(r)}var Jce=function(){function e(t){var n=this;u(this,e),this._updateEventEmitter=new Zu,this._hasLineChanges=!1,this._foldingModel=t,this._foldingModelListener=t.onDidChange((function(e){return n.updateHiddenRanges()})),this._hiddenRanges=[],t.regions.length&&this.updateHiddenRanges()}return h(e,[{key:"onDidChange",get:function(){return this._updateEventEmitter.event}},{key:"hiddenRanges",get:function(){return this._hiddenRanges}},{key:"notifyChangeModelContent",value:function(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some((function(e){return e.range.endLineNumber!==e.range.startLineNumber||0!==Ax(e.text)[0]})))}},{key:"updateHiddenRanges",value:function(){for(var e=!1,t=[],n=0,i=0,r=Number.MAX_VALUE,o=-1,a=this._foldingModel.regions;n<a.length;n++)if(a.isCollapsed(n)){var s=a.getStartLineNumber(n)+1,l=a.getEndLineNumber(n);r<=s&&l<=o||(!e&&i<this._hiddenRanges.length&&this._hiddenRanges[i].startLineNumber===s&&this._hiddenRanges[i].endLineNumber===l?(t.push(this._hiddenRanges[i]),i++):(e=!0,t.push(new hd(s,1,l,1))),r=s,o=l)}(this._hasLineChanges||e||i<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}},{key:"applyHiddenRanges",value:function(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}},{key:"hasRanges",value:function(){return this._hiddenRanges.length>0}},{key:"isHidden",value:function(e){return null!==ede(this._hiddenRanges,e)}},{key:"adjustSelections",value:function(e){for(var t=this,n=!1,i=this._foldingModel.textModel,r=null,o=function(e){return r&&function(e,t){return e>=t.startLineNumber&&e<=t.endLineNumber}(e,r)||(r=ede(t._hiddenRanges,e)),r?r.startLineNumber-1:null},a=0,s=e.length;a<s;a++){var l=e[a],u=o(l.startLineNumber);u&&(l=l.setStartPosition(u,i.getLineMaxColumn(u)),n=!0);var c=o(l.endLineNumber);c&&(l=l.setEndPosition(c,i.getLineMaxColumn(c)),n=!0),e[a]=l}return n}},{key:"dispose",value:function(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}]),e}();function ede(e,t){var n=jw(e,(function(e){return t<e.startLineNumber}))-1;return n>=0&&e[n].endLineNumber>=t?e[n]:null}var tde=function(){function e(t,n,i){u(this,e),this.editorModel=t,this.languageConfigurationService=n,this.foldingRangesLimit=i,this.id="indent"}return h(e,[{key:"dispose",value:function(){}},{key:"compute",value:function(e){var t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,n=t&&!!t.offSide,i=t&&t.markers;return Promise.resolve(function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ide,r=e.getOptions().tabSize,o=new nde(i),a=void 0;n&&(a=new RegExp("(".concat(n.start.source,")|(?:").concat(n.end.source,")")));var s=[],l=e.getLineCount()+1;s.push({indent:-1,endAbove:l,line:l});for(var u=e.getLineCount();u>0;u--){var c=e.getLineContent(u),d=lV(c,r),h=s[s.length-1];if(-1!==d){var f=void 0;if(a&&(f=c.match(a))){if(!f[1]){s.push({indent:-2,endAbove:u,line:u});continue}for(var g=s.length-1;g>0&&-2!==s[g].indent;)g--;if(g>0){s.length=g+1,h=s[g],o.insertFirst(u,h.line,d),h.line=u,h.indent=d,h.endAbove=u;continue}}if(h.indent>d){do{s.pop(),h=s[s.length-1]}while(h.indent>d);var v=h.endAbove-1;v-u>=1&&o.insertFirst(u,v,d)}h.indent===d?h.endAbove=u:s.push({indent:d,endAbove:u,line:u})}else t&&(h.endAbove=u)}return o.toIndentRanges(e)}(this.editorModel,n,i,this.foldingRangesLimit))}}]),e}(),nde=function(){function e(t){u(this,e),this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=t}return h(e,[{key:"insertFirst",value:function(e,t,n){if(!(e>Vce||t>Vce)){var i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}}},{key:"toIndentRanges",value:function(e){var t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);for(var n=new Uint32Array(this._length),i=new Uint32Array(this._length),r=this._length-1,o=0;r>=0;r--,o++)n[o]=this._startIndexes[r],i[o]=this._endIndexes[r];return new jce(n,i)}this._foldingRangesLimit.update(this._length,t);for(var a=0,s=this._indentOccurrences.length,l=0;l<this._indentOccurrences.length;l++){var u=this._indentOccurrences[l];if(u){if(u+a>t){s=l;break}a+=u}}for(var c=e.getOptions().tabSize,d=new Uint32Array(t),h=new Uint32Array(t),f=this._length-1,g=0;f>=0;f--){var v=this._startIndexes[f],p=lV(e.getLineContent(v),c);(p<s||p===s&&a++<t)&&(d[g]=v,h[g]=this._endIndexes[f],g++)}return new jce(d,h)}}]),e}(),ide={limit:5e3,update:function(){}};var rde=TL("editor.foldBackground",{light:PL(vD,.3),dark:PL(vD,.3),hcDark:null,hcLight:null},Xa("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);TL("editor.foldPlaceholderForeground",{light:"#808080",dark:"#808080",hcDark:null,hcLight:null},Xa("collapsedTextColor","Color of the collapsed text after the first line of a folded range.")),TL("editorGutter.foldingControlForeground",UL,Xa("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));var ode=IZ("folding-expanded",bd.chevronDown,Xa("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),ade=IZ("folding-collapsed",bd.chevronRight,Xa("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),sde=IZ("folding-manual-collapsed",ade,Xa("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),lde=IZ("folding-manual-expanded",ode,Xa("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),ude={color:OS(rde),position:1},cde=Xa("linesCollapsed","Click to expand the range."),dde=Xa("linesExpanded","Click to collapse the range."),hde=function(){function e(t){u(this,e),this.editor=t,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}return h(e,[{key:"getDecorationOption",value:function(t,n,i){return n?e.HIDDEN_RANGE_DECORATION:"never"===this.showFoldingControls?t?this.showFoldingHighlights?e.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:e.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:e.NO_CONTROLS_EXPANDED_RANGE_DECORATION:t?i?this.showFoldingHighlights?e.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:e.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?e.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:e.COLLAPSED_VISUAL_DECORATION:"mouseover"===this.showFoldingControls?i?e.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:e.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:i?e.MANUALLY_EXPANDED_VISUAL_DECORATION:e.EXPANDED_VISUAL_DECORATION}},{key:"changeDecorations",value:function(e){return this.editor.changeDecorations(e)}},{key:"removeDecorations",value:function(e){this.editor.removeDecorations(e)}}]),e}();hde.COLLAPSED_VISUAL_DECORATION=cU.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:cde,firstLineDecorationClassName:ny.asClassName(ade)}),hde.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=cU.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:ude,isWholeLine:!0,linesDecorationsTooltip:cde,firstLineDecorationClassName:ny.asClassName(ade)}),hde.MANUALLY_COLLAPSED_VISUAL_DECORATION=cU.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:cde,firstLineDecorationClassName:ny.asClassName(sde)}),hde.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=cU.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:ude,isWholeLine:!0,linesDecorationsTooltip:cde,firstLineDecorationClassName:ny.asClassName(sde)}),hde.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=cU.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:cde}),hde.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=cU.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:ude,isWholeLine:!0,linesDecorationsTooltip:cde}),hde.EXPANDED_VISUAL_DECORATION=cU.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+ny.asClassName(ode),linesDecorationsTooltip:dde}),hde.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=cU.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:ny.asClassName(ode),linesDecorationsTooltip:dde}),hde.MANUALLY_EXPANDED_VISUAL_DECORATION=cU.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+ny.asClassName(lde),linesDecorationsTooltip:dde}),hde.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=cU.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:ny.asClassName(lde),linesDecorationsTooltip:dde}),hde.NO_CONTROLS_EXPANDED_RANGE_DECORATION=cU.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0}),hde.HIDDEN_RANGE_DECORATION=cU.register({description:"folding-hidden-range-decoration",stickiness:1});var fde={},gde=function(){function e(t,n,i,r,o){u(this,e),this.editorModel=t,this.providers=n,this.handleFoldingRangesChange=i,this.foldingRangesLimit=r,this.fallbackRangeProvider=o,this.id="syntax",this.disposables=new Tu,o&&this.disposables.add(o);var a=!0,s=!1,l=void 0;try{for(var c,d=n[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var h=c.value;"function"==typeof h.onDidChange&&this.disposables.add(h.onDidChange(i))}}catch(e){s=!0,l=e}finally{try{a||null==d.return||d.return()}finally{if(s)throw l}}}return h(e,[{key:"compute",value:function(e){var t=this;return function(e,t,n){var i=null,r=e.map((function(e,r){return Promise.resolve(e.provideFoldingRanges(t,fde,n)).then((function(e){if(!n.isCancellationRequested&&Array.isArray(e)){Array.isArray(i)||(i=[]);var o=t.getLineCount(),a=!0,s=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;d.start>0&&d.end>d.start&&d.end<=o&&i.push({start:d.start,end:d.end,rank:r,kind:d.kind})}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}}}),pu)}));return Promise.all(r).then((function(e){return i}))}(this.providers,this.editorModel,e).then((function(n){var i,r;if(n){var o=function(e,t){var n=e.sort((function(e,t){var n=e.start-t.start;return 0===n&&(n=e.rank-t.rank),n})),i=new vde(t),r=void 0,o=[],a=!0,s=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;if(r){if(d.start>r.start)if(d.end<=r.end)o.push(r),r=d,i.add(d.start,d.end,d.kind&&d.kind.value,o.length);else{if(d.start>r.end){do{r=o.pop()}while(r&&d.start>r.end);r&&o.push(r),r=d}i.add(d.start,d.end,d.kind&&d.kind.value,o.length)}}else r=d,i.add(d.start,d.end,d.kind&&d.kind.value,o.length)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return i.toIndentRanges()}(n,t.foldingRangesLimit);return o}return null!==(r=null===(i=t.fallbackRangeProvider)||void 0===i?void 0:i.compute(e))&&void 0!==r?r:null}))}},{key:"dispose",value:function(){this.disposables.dispose()}}]),e}();var vde=function(){function e(t){u(this,e),this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=t}return h(e,[{key:"add",value:function(e,t,n,i){if(!(e>Vce||t>Vce)){var r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._nestingLevels[r]=i,this._types[r]=n,this._length++,i<30&&(this._nestingLevelCounts[i]=(this._nestingLevelCounts[i]||0)+1)}}},{key:"toIndentRanges",value:function(){var e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);for(var t=new Uint32Array(this._length),n=new Uint32Array(this._length),i=0;i<this._length;i++)t[i]=this._startIndexes[i],n[i]=this._endIndexes[i];return new jce(t,n,this._types)}this._foldingRangesLimit.update(this._length,e);for(var r=0,o=this._nestingLevelCounts.length,a=0;a<this._nestingLevelCounts.length;a++){var s=this._nestingLevelCounts[a];if(s){if(s+r>e){o=a;break}r+=s}}for(var l=new Uint32Array(e),u=new Uint32Array(e),c=[],d=0,h=0;d<this._length;d++){var f=this._nestingLevels[d];(f<o||f===o&&r++<e)&&(l[h]=this._startIndexes[d],u[h]=this._endIndexes[d],c[h]=this._types[d],h++)}return new jce(l,u,c)}}]),e}();var pde,mde=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},yde=function(e,t){return function(n,i){t(n,i,e)}},_de=new jy("foldingEnabled",!1),bde=(rn=function(e){function t(e,n,i,r,o,a){var s;u(this,t),(s=l(this,t)).contextKeyService=n,s.languageConfigurationService=i,s.languageFeaturesService=a,s.localToDispose=s._register(new Tu),s.editor=e,s._foldingLimitReporter=new kde(e);var c=s.editor.getOptions();return s._isEnabled=c.get(43),s._useFoldingProviders="indentation"!==c.get(44),s._unfoldOnClickAfterEndOfLine=c.get(48),s._restoringViewState=!1,s._currentModelHasFoldedImports=!1,s._foldingImportsByDefault=c.get(46),s.updateDebounceInfo=o.for(a.foldingRangeProvider,"Folding",{min:200}),s.foldingModel=null,s.hiddenRangeModel=null,s.rangeProvider=null,s.foldingRegionPromise=null,s.foldingModelPromise=null,s.updateScheduler=null,s.cursorChangedScheduler=null,s.mouseDownInfo=null,s.foldingDecorationProvider=new hde(e),s.foldingDecorationProvider.showFoldingControls=c.get(111),s.foldingDecorationProvider.showFoldingHighlights=c.get(45),s.foldingEnabled=_de.bindTo(s.contextKeyService),s.foldingEnabled.set(s._isEnabled),s._register(s.editor.onDidChangeModel((function(){return s.onModelChanged()}))),s._register(s.editor.onDidChangeConfiguration((function(e){if(e.hasChanged(43)&&(s._isEnabled=s.editor.getOptions().get(43),s.foldingEnabled.set(s._isEnabled),s.onModelChanged()),e.hasChanged(47)&&s.onModelChanged(),e.hasChanged(111)||e.hasChanged(45)){var t=s.editor.getOptions();s.foldingDecorationProvider.showFoldingControls=t.get(111),s.foldingDecorationProvider.showFoldingHighlights=t.get(45),s.triggerFoldingModelChanged()}e.hasChanged(44)&&(s._useFoldingProviders="indentation"!==s.editor.getOptions().get(44),s.onFoldingStrategyChanged()),e.hasChanged(48)&&(s._unfoldOnClickAfterEndOfLine=s.editor.getOptions().get(48)),e.hasChanged(46)&&(s._foldingImportsByDefault=s.editor.getOptions().get(46))}))),s.onModelChanged(),s}return p(t,e),h(t,[{key:"saveViewState",value:function(){var e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){var t=this.foldingModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}},{key:"restoreViewState",value:function(e){var t=this.editor.getModel();if(t&&this._isEnabled&&!t.isTooLargeForTokenization()&&this.hiddenRangeModel&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}},{key:"onModelChanged",value:function(){var e=this;this.localToDispose.clear();var t=this.editor.getModel();this._isEnabled&&t&&!t.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new qce(t,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new Jce(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange((function(t){return e.onHiddenRangesChanges(t)}))),this.updateScheduler=new vg(this.updateDebounceInfo.get(t)),this.cursorChangedScheduler=new Sg((function(){return e.revealCursor()}),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange((function(){return e.onFoldingStrategyChanged()}))),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration((function(){return e.onFoldingStrategyChanged()}))),this.localToDispose.add(this.editor.onDidChangeModelContent((function(t){return e.onDidChangeModelContent(t)}))),this.localToDispose.add(this.editor.onDidChangeCursorPosition((function(){return e.onCursorPositionChanged()}))),this.localToDispose.add(this.editor.onMouseDown((function(t){return e.onEditorMouseDown(t)}))),this.localToDispose.add(this.editor.onMouseUp((function(t){return e.onEditorMouseUp(t)}))),this.localToDispose.add({dispose:function(){var t,n;e.foldingRegionPromise&&(e.foldingRegionPromise.cancel(),e.foldingRegionPromise=null),null===(t=e.updateScheduler)||void 0===t||t.cancel(),e.updateScheduler=null,e.foldingModel=null,e.foldingModelPromise=null,e.hiddenRangeModel=null,e.cursorChangedScheduler=null,null===(n=e.rangeProvider)||void 0===n||n.dispose(),e.rangeProvider=null}}),this.triggerFoldingModelChanged())}},{key:"onFoldingStrategyChanged",value:function(){var e;null===(e=this.rangeProvider)||void 0===e||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}},{key:"getRangeProvider",value:function(e){var t=this;if(this.rangeProvider)return this.rangeProvider;var n=new tde(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=n,this._useFoldingProviders&&this.foldingModel){var i=pde.getFoldingRangeProviders(this.languageFeaturesService,e);i.length>0&&(this.rangeProvider=new gde(e,i,(function(){return t.triggerFoldingModelChanged()}),this._foldingLimitReporter,n))}return this.rangeProvider}},{key:"getFoldingModel",value:function(){return this.foldingModelPromise}},{key:"onDidChangeModelContent",value:function(e){var t;null===(t=this.hiddenRangeModel)||void 0===t||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}},{key:"triggerFoldingModelChanged",value:function(){var e=this;this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger((function(){var t=e.foldingModel;if(!t)return null;var n=new Hu,i=e.getRangeProvider(t.textModel),r=e.foldingRegionPromise=hg((function(e){return i.compute(e)}));return r.then((function(i){if(i&&r===e.foldingRegionPromise){var o;if(e._foldingImportsByDefault&&!e._currentModelHasFoldedImports){var a=i.setCollapsedAllOfType(Wd.Imports.value,!0);a&&(o=g3.capture(e.editor),e._currentModelHasFoldedImports=a)}var s=e.editor.getSelections();t.update(i,function(e){if(!e||0===e.length)return{startsInside:function(){return!1}};return{startsInside:function(t,n){var i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value.startLineNumber;if(l>=t&&l<=n)return!0}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return!1}}}(s)),null==o||o.restore(e.editor);var l=e.updateDebounceInfo.update(t.textModel,n.elapsed());e.updateScheduler&&(e.updateScheduler.defaultDelay=l)}return t}))})).then(void 0,(function(e){return vu(e),null})))}},{key:"onHiddenRangesChanges",value:function(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){var t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e,this)}},{key:"onCursorPositionChanged",value:function(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}},{key:"revealCursor",value:function(){var e=this,t=this.getFoldingModel();t&&t.then((function(t){if(t){var n=e.editor.getSelections();if(n&&n.length>0){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=function(){var n,r=s.value.selectionStartLineNumber;e.hiddenRangeModel&&e.hiddenRangeModel.isHidden(r)&&(n=i).push.apply(n,x(t.getAllRegionsAtLine(r,(function(e){return e.isCollapsed&&r>e.startLineNumber}))))},u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)l()}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}i.length&&(t.toggleCollapseState(i),e.reveal(n[0].getPosition()))}}})).then(void 0,vu)}},{key:"onEditorMouseDown",value:function(e){if(this.mouseDownInfo=null,this.hiddenRangeModel&&e.target&&e.target.range&&(e.event.leftButton||e.event.middleButton)){var t=e.target.range,n=!1;switch(e.target.type){case 4:var i=e.target.detail,r=e.target.element.offsetLeft;if(i.offsetX-r<4)return;n=!0;break;case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges())if(!e.target.detail.isAfterLines)break;return;case 6:if(this.hiddenRangeModel.hasRanges()){var o=this.editor.getModel();if(o&&t.startColumn===o.getLineMaxColumn(t.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}}},{key:"onEditorMouseUp",value:function(e){var t=this.foldingModel;if(t&&this.mouseDownInfo&&e.target){var n=this.mouseDownInfo.lineNumber,i=this.mouseDownInfo.iconClicked,r=e.target.range;if(r&&r.startLineNumber===n){if(i){if(4!==e.target.type)return}else{var o=this.editor.getModel();if(!o||r.startColumn!==o.getLineMaxColumn(n))return}var a=t.getRegionAtLine(n);if(a&&a.startLineNumber===n){var s=a.isCollapsed;if(i||s){var l=[];if(e.event.altKey){var u=t.getRegionsInside(null,(function(e){return!e.containedBy(a)&&!a.containedBy(e)})),c=!0,d=!1,h=void 0;try{for(var f,g=u[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;v.isCollapsed&&l.push(v)}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}0===l.length&&(l=u)}else{var p=e.event.middleButton||e.event.shiftKey;if(p){var m=!0,y=!1,_=void 0;try{for(var b,k=t.getRegionsInside(a)[Symbol.iterator]();!(m=(b=k.next()).done);m=!0){var w=b.value;w.isCollapsed===s&&l.push(w)}}catch(e){y=!0,_=e}finally{try{m||null==k.return||k.return()}finally{if(y)throw _}}}!s&&p&&0!==l.length||l.push(a)}t.toggleCollapseState(l),this.reveal({lineNumber:n,column:1})}}}}}},{key:"reveal",value:function(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}}],[{key:"get",value:function(e){return e.getContribution(pde.ID)}},{key:"getFoldingRangeProviders",value:function(e,t){var n,i,r=e.foldingRangeProvider.ordered(t);return null!==(i=null===(n=pde._foldingRangeSelector)||void 0===n?void 0:n.call(pde,r,t))&&void 0!==i?i:r}}]),t}(Ru),pde=rn,rn.ID="editor.contrib.folding",rn);bde=pde=mde([yde(1,Ky),yde(2,Ek),yde(3,rx),yde(4,Ix),yde(5,wS)],bde);var kde=function(){function e(t){u(this,e),this.editor=t,this._onDidChange=new Zu,this._computed=0,this._limited=!1}return h(e,[{key:"limit",get:function(){return this.editor.getOptions().get(47)}},{key:"update",value:function(e,t){e===this._computed&&t===this._limited||(this._computed=e,this._limited=t,this._onDidChange.fire())}}]),e}(),wde=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t,n){var i=this,r=e.get(Ek),o=bde.get(t);if(o){var a=o.getFoldingModel();return a?(this.reportTelemetry(e,t),a.then((function(e){if(e){i.invoke(o,e,t,n,r);var a=t.getSelection();a&&o.reveal(a.getStartPosition())}}))):void 0}}},{key:"getSelectedLines",value:function(e){var t=e.getSelections();return t?t.map((function(e){return e.startLineNumber})):[]}},{key:"getLineNumbers",value:function(e,t){return e&&e.selectionLines?e.selectionLines.map((function(e){return e+1})):this.getSelectedLines(t)}},{key:"run",value:function(e,t){}}]),t}(M_);function Cde(e){if(!Ra(e)){if(!Na(e))return!1;var t=e;if(!Ra(t.levels)&&!Ea(t.levels))return!1;if(!Ra(t.direction)&&!Da(t.direction))return!1;if(!(Ra(t.selectionLines)||Array.isArray(t.selectionLines)&&t.selectionLines.every(Ea)))return!1}return!0}var Sde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.unfold",label:Xa("unfoldAction.label","Unfold"),alias:"Unfold",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:Cde,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n,i){var r=i&&i.levels||1,o=this.getLineNumbers(i,n);i&&"up"===i.direction?Yce(t,!1,r,o):Zce(t,!1,r,o)}}]),t}(wde),xde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.unfoldRecursively",label:Xa("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2142),weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n,i){Zce(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}]),t}(wde),Lde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.fold",label:Xa("foldAction.label","Fold"),alias:"Fold",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t",constraint:Cde,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n,i){var r=this.getLineNumbers(i,n),o=i&&i.levels,a=i&&i.direction;"number"!=typeof o&&"string"!=typeof a?function(e,t,n){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=e.getAllRegionsAtLine(u,(function(e){return e.isCollapsed!==t}));c.length>0&&i.push(c[0])}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}e.toggleCollapseState(i)}(t,!0,r):"up"===a?Yce(t,!0,o||1,r):Zce(t,!0,o||1,r)}}]),t}(wde),Dde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.toggleFold",label:Xa("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2090),weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n){Gce(t,1,this.getSelectedLines(n))}}]),t}(wde),Nde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.foldRecursively",label:Xa("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2140),weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n){var i=this.getSelectedLines(n);Zce(t,!0,Number.MAX_VALUE,i)}}]),t}(wde),Ide=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.toggleFoldRecursively",label:Xa("toggleFoldRecursivelyAction.label","Toggle Fold Recursively"),alias:"Toggle Fold Recursively",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,3114),weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n){var i=this.getSelectedLines(n);Gce(t,Number.MAX_VALUE,i)}}]),t}(wde),Ede=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.foldAllBlockComments",label:Xa("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2138),weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n,i,r){if(t.regions.hasTypes())$ce(t,Wd.Comment.value,!0);else{var o=n.getModel();if(!o)return;var a=r.getLanguageConfiguration(o.getLanguageId()).comments;if(a&&a.blockCommentStartToken)Xce(t,new RegExp("^\\s*"+qh(a.blockCommentStartToken)),!0)}}}]),t}(wde),Mde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.foldAllMarkerRegions",label:Xa("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2077),weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n,i,r){if(t.regions.hasTypes())$ce(t,Wd.Region.value,!0);else{var o=n.getModel();if(!o)return;var a=r.getLanguageConfiguration(o.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start)Xce(t,new RegExp(a.markers.start),!0)}}}]),t}(wde),Tde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.unfoldAllMarkerRegions",label:Xa("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2078),weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n,i,r){if(t.regions.hasTypes())$ce(t,Wd.Region.value,!1);else{var o=n.getModel();if(!o)return;var a=r.getLanguageConfiguration(o.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start)Xce(t,new RegExp(a.markers.start),!1)}}}]),t}(wde),Rde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.foldAllExcept",label:Xa("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2136),weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n){Qce(t,!0,this.getSelectedLines(n))}}]),t}(wde),Ade=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.unfoldAllExcept",label:Xa("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2134),weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n){Qce(t,!1,this.getSelectedLines(n))}}]),t}(wde),Pde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.foldAll",label:Xa("foldAllAction.label","Fold All"),alias:"Fold All",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2069),weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n){Zce(t,!0)}}]),t}(wde),Ode=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.unfoldAll",label:Xa("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2088),weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n){Zce(t,!1)}}]),t}(wde),Fde=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"getFoldingLevel",value:function(){return parseInt(this.id.substr(t.ID_PREFIX.length))}},{key:"invoke",value:function(e,t,n){!function(e,t,n,i){var r=e.getRegionsInside(null,(function(e,r){return r===t&&e.isCollapsed!==n&&!i.some((function(t){return e.containsLine(t)}))}));e.toggleCollapseState(r)}(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}]),t}(wde);Fde.ID_PREFIX="editor.foldLevel",Fde.ID=function(e){return Fde.ID_PREFIX+e};var Wde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.gotoParentFold",label:Xa("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n){var i=this.getSelectedLines(n);if(i.length>0){var r=function(e,t){var n=null,i=t.getRegionAtLine(e);if(null!==i&&e===(n=i.startLineNumber)){var r=i.parentIndex;n=-1!==r?t.regions.getStartLineNumber(r):null}return n}(i[0],t);null!==r&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}]),t}(wde),Bde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.gotoPreviousFold",label:Xa("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n){var i=this.getSelectedLines(n);if(i.length>0){var r=function(e,t){var n=t.getRegionAtLine(e);if(null!==n&&n.startLineNumber===e){if(e!==n.startLineNumber)return n.startLineNumber;var i=n.parentIndex,r=0;for(-1!==i&&(r=t.regions.getStartLineNumber(n.parentIndex));null!==n;){if(!(n.regionIndex>0))return null;if((n=t.regions.toRegion(n.regionIndex-1)).startLineNumber<=r)return null;if(n.parentIndex===i)return n.startLineNumber}}else if(t.regions.length>0)for(n=t.regions.toRegion(t.regions.length-1);null!==n;){if(n.startLineNumber<e)return n.startLineNumber;n=n.regionIndex>0?t.regions.toRegion(n.regionIndex-1):null}return null}(i[0],t);null!==r&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}]),t}(wde),Hde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.gotoNextFold",label:Xa("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n){var i=this.getSelectedLines(n);if(i.length>0){var r=function(e,t){var n=t.getRegionAtLine(e);if(null!==n&&n.startLineNumber===e){var i=n.parentIndex,r=0;if(-1!==i)r=t.regions.getEndLineNumber(n.parentIndex);else{if(0===t.regions.length)return null;r=t.regions.getEndLineNumber(t.regions.length-1)}for(;null!==n;){if(!(n.regionIndex<t.regions.length))return null;if((n=t.regions.toRegion(n.regionIndex+1)).startLineNumber>=r)return null;if(n.parentIndex===i)return n.startLineNumber}}else if(t.regions.length>0)for(n=t.regions.toRegion(0);null!==n;){if(n.startLineNumber>e)return n.startLineNumber;n=n.regionIndex<t.regions.length?t.regions.toRegion(n.regionIndex+1):null}return null}(i[0],t);null!==r&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}]),t}(wde),Vde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.createFoldingRangeFromSelection",label:Xa("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2135),weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n){var i=[],r=n.getSelections();if(r){var o=!0,a=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=c.endLineNumber;1===c.endColumn&&--d,d>c.startLineNumber&&(i.push({startLineNumber:c.startLineNumber,endLineNumber:d,type:void 0,isCollapsed:!0,source:1}),n.setSelection({startLineNumber:c.startLineNumber,startColumn:1,endLineNumber:c.startLineNumber,endColumn:1}))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}if(i.length>0){var h;i.sort((function(e,t){return e.startLineNumber-t.startLineNumber}));var f=jce.sanitizeAndMerge(t.regions,i,null===(h=n.getModel())||void 0===h?void 0:h.getLineCount());t.updatePost(jce.fromFoldRanges(f))}}}}]),t}(wde),zde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.removeManualFoldingRanges",label:Xa("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2137),weight:100}}])}return p(t,e),h(t,[{key:"invoke",value:function(e,t,n){var i=n.getSelections();if(i){var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=c.startLineNumber,h=c.endLineNumber;r.push(h>=d?{startLineNumber:d,endLineNumber:h}:{endLineNumber:h,startLineNumber:d})}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}t.removeManualRanges(r),e.triggerFoldingModelChanged()}}}]),t}(wde);B_(bde.ID,bde,0),O_(Sde),O_(xde),O_(Lde),O_(Nde),O_(Ide),O_(Pde),O_(Ode),O_(Ede),O_(Mde),O_(Tde),O_(Rde),O_(Ade),O_(Dde),O_(Wde),O_(Bde),O_(Hde),O_(Vde),O_(zde);for(var Ude=1;Ude<=7;Ude++)W_(new Fde({id:Fde.ID(Ude),label:Xa("foldLevelAction.label","Fold Level {0}",Ude),alias:"Fold Level ".concat(Ude),precondition:_de,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2048|21+Ude),weight:100}}));sy.registerCommand("_executeFoldingRangeProvider",function(){var e=s((function(e){var t,n,i,r,o,a,s,l,u,c,d,h,f,g,v,p,m,y,_=arguments;return E(this,(function(b){switch(b.label){case 0:for(t=_.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=_[i];if(r=C(n,1),!((o=r[0])instanceof ed))throw wu();if(a=e.get(wS),!(s=e.get(Qm).getModel(o)))throw wu();return(l=e.get(qb)).getValue("editor.folding",{resource:o})?(u=e.get(Ek),c=l.getValue("editor.foldingStrategy",{resource:o}),h=new tde(s,u,d={get limit(){return l.getValue("editor.foldingMaximumRegions",{resource:o})},update:function(e,t){}}),f=h,"indentation"!==c&&(g=bde.getFoldingRangeProviders(a,s)).length&&(f=new gde(s,g,(function(){}),d,h)),[4,f.compute(Uu.None)]):[2,[]];case 1:v=b.sent(),p=[];try{if(v)for(m=0;m<v.length;m++)y=v.getType(m),p.push({start:v.getStartLineNumber(m),end:v.getEndLineNumber(m),kind:y?Wd.fromValue(y):void 0});return[2,p]}finally{f.dispose()}return[2]}}))}));return function(t){return e.apply(this,arguments)}}());var jde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.fontZoomIn",label:Xa("EditorFontZoomIn.label","Increase Editor Font Size"),alias:"Increase Editor Font Size",precondition:void 0}])}return p(t,e),h(t,[{key:"run",value:function(e,t){Hm.setZoomLevel(Hm.getZoomLevel()+1)}}]),t}(M_),Kde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.fontZoomOut",label:Xa("EditorFontZoomOut.label","Decrease Editor Font Size"),alias:"Decrease Editor Font Size",precondition:void 0}])}return p(t,e),h(t,[{key:"run",value:function(e,t){Hm.setZoomLevel(Hm.getZoomLevel()-1)}}]),t}(M_),qde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.fontZoomReset",label:Xa("EditorFontZoomReset.label","Reset Editor Font Size"),alias:"Reset Editor Font Size",precondition:void 0}])}return p(t,e),h(t,[{key:"run",value:function(e,t){Hm.setZoomLevel(0)}}]),t}(M_);O_(jde),O_(Kde),O_(qde);var Gde=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Zde=function(e,t){return function(n,i){t(n,i,e)}},Yde=(on=function(){function e(t,n,i,r){var o=this;u(this,e),this._editor=t,this._languageFeaturesService=n,this._workerService=i,this._accessibilitySignalService=r,this._disposables=new Tu,this._sessionDisposables=new Tu,this._disposables.add(n.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(t.onDidChangeModel((function(){return o._update()}))),this._disposables.add(t.onDidChangeModelLanguage((function(){return o._update()}))),this._disposables.add(t.onDidChangeConfiguration((function(e){e.hasChanged(56)&&o._update()}))),this._update()}return h(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._sessionDisposables.dispose()}},{key:"_update",value:function(){var e=this;if(this._sessionDisposables.clear(),this._editor.getOption(56)&&this._editor.hasModel()){var t=this._editor.getModel(),n=C(this._languageFeaturesService.onTypeFormattingEditProvider.ordered(t),1)[0];if(n&&n.autoFormatTriggerCharacters){var i=new Xk,r=!0,o=!1,a=void 0;try{for(var s,l=n.autoFormatTriggerCharacters[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i.add(u.charCodeAt(0))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}this._sessionDisposables.add(this._editor.onDidType((function(t){var n=t.charCodeAt(t.length-1);i.has(n)&&e._trigger(String.fromCharCode(n))})))}}}},{key:"_trigger",value:function(e){var t=this;if(this._editor.hasModel()&&!(this._editor.getSelections().length>1)&&this._editor.getSelection().isEmpty()){var n=this._editor.getModel(),i=this._editor.getPosition(),r=new rc,o=this._editor.onDidChangeModelContent((function(e){if(e.isFlush)return r.cancel(),void o.dispose();for(var t=0,n=e.changes.length;t<n;t++){if(e.changes[t].range.endLineNumber<=i.lineNumber)return r.cancel(),void o.dispose()}}));$9(this._workerService,this._languageFeaturesService,n,i,e,n.getFormattingOptions(),r.token).then((function(e){r.token.isCancellationRequested||ua(e)&&(t._accessibilitySignalService.playSignal(VY.format,{userGesture:!1}),P9.execute(t._editor,e,!0))})).finally((function(){o.dispose()}))}}}]),e}(),on.ID="editor.contrib.autoFormat",on);Yde=Gde([Zde(1,wS),Zde(2,TW),Zde(3,WY)],Yde);var Qde=(an=function(){function e(t,n,i){var r=this;u(this,e),this.editor=t,this._languageFeaturesService=n,this._instantiationService=i,this._callOnDispose=new Tu,this._callOnModel=new Tu,this._callOnDispose.add(t.onDidChangeConfiguration((function(){return r._update()}))),this._callOnDispose.add(t.onDidChangeModel((function(){return r._update()}))),this._callOnDispose.add(t.onDidChangeModelLanguage((function(){return r._update()}))),this._callOnDispose.add(n.documentRangeFormattingEditProvider.onDidChange(this._update,this))}return h(e,[{key:"dispose",value:function(){this._callOnDispose.dispose(),this._callOnModel.dispose()}},{key:"_update",value:function(){var e=this;this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste((function(t){var n=t.range;return e._trigger(n)})))}},{key:"_trigger",value:function(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(H9,this.editor,e,2,FA.None,Uu.None,!1).catch(vu))}}]),e}(),an.ID="editor.contrib.formatOnPaste",an);Qde=Gde([Zde(1,wS),Zde(2,Gm)],Qde);var Xde=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.formatDocument",label:Xa("formatDocument.label","Format Document"),alias:"Format Document",precondition:Sy.and(p0.notInCompositeEditor,p0.writable,p0.hasDocumentFormattingProvider),kbOpts:{kbExpr:p0.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var n;return E(this,(function(i){switch(i.label){case 0:return t.hasModel()?(n=e.get(Gm),[4,e.get(WA).showWhile(n.invokeFunction(j9,t,1,FA.None,Uu.None,!0),250)]):[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))()}}]),t}(M_),$de=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.formatSelection",label:Xa("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:Sy.and(p0.writable,p0.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2084),weight:100},contextMenuOpts:{when:p0.hasNonEmptySelection,group:"1_modification",order:1.31}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var n,i,r;return E(this,(function(o){switch(o.label){case 0:return t.hasModel()?(n=e.get(Gm),i=t.getModel(),r=t.getSelections().map((function(e){return e.isEmpty()?new hd(e.startLineNumber,1,e.startLineNumber,i.getLineMaxColumn(e.startLineNumber)):e})),[4,e.get(WA).showWhile(n.invokeFunction(H9,t,r,1,FA.None,Uu.None,!0),250)]):[2];case 1:return o.sent(),[2]}}))}))()}}]),t}(M_);B_(Yde.ID,Yde,2),B_(Qde.ID,Qde,2),O_(Xde),O_($de),sy.registerCommand("editor.action.format",function(){var e=s((function(e){var t,n;return E(this,(function(i){switch(i.label){case 0:return(t=e.get(Ym).getFocusedCodeEditor())&&t.hasModel()?(n=e.get(ay),t.getSelection().isEmpty()?[4,n.executeCommand("editor.action.formatDocument")]:[3,2]):[2];case 1:return i.sent(),[3,4];case 2:return[4,n.executeCommand("editor.action.formatSelection")];case 3:i.sent(),i.label=4;case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}());var Jde=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ehe=function(e,t){return function(n,i){t(n,i,e)}},the=function(){function e(){u(this,e)}return h(e,[{key:"remove",value:function(){var e;null===(e=this.parent)||void 0===e||e.children.delete(this.id)}}],[{key:"findId",value:function(e,t){var n;"string"==typeof e?n="".concat(t.id,"/").concat(e):(n="".concat(t.id,"/").concat(e.name),void 0!==t.children.get(n)&&(n="".concat(t.id,"/").concat(e.name,"_").concat(e.range.startLineNumber,"_").concat(e.range.startColumn)));for(var i=n,r=0;void 0!==t.children.get(i);r++)i="".concat(n,"_").concat(r);return i}},{key:"empty",value:function(e){return 0===e.children.size}}]),e}(),nhe=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t)).id=e,r.parent=n,r.symbol=i,r.children=new Map,r}return p(t,e),t}(the),ihe=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t)).id=e,o.parent=n,o.label=i,o.order=r,o.children=new Map,o}return p(t,e),t}(the),rhe=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).uri=e,n.id="root",n.parent=void 0,n._groups=new Map,n.children=new Map,n.id="root",n.parent=void 0,n}return p(t,e),h(t,[{key:"_compact",value:function(){var e=0,t=!0,n=!1,i=void 0;try{for(var r,o=this._groups[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=C(r.value,2),s=a[0];0===a[1].children.size?this._groups.delete(s):e+=1}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}if(1!==e)this.children=this._groups;else{var l=Ts.first(this._groups.values()),u=!0,c=!1,d=void 0;try{for(var h,f=l.children[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=C(h.value,2)[1];g.parent=this,this.children.set(g.id,g)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}return this}},{key:"getTopLevelSymbols",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this.children.values()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a,s=r.value;if(s instanceof nhe)e.push(s.symbol);else(a=e).push.apply(a,x(Ts.map(s.children.values(),(function(e){return e.symbol}))))}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e.sort((function(e,t){return hd.compareRangesUsingStarts(e.range,t.range)}))}},{key:"asListOfDocumentSymbols",value:function(){var e=this.getTopLevelSymbols(),n=[];return t._flattenDocumentSymbols(n,e,""),n.sort((function(e,t){return dd.compare(hd.getStartPosition(e.range),hd.getStartPosition(t.range))||dd.compare(hd.getEndPosition(t.range),hd.getEndPosition(e.range))}))}}],[{key:"create",value:function(e,n,i){var r=new rc(i),o=new t(n.uri),a=e.ordered(n),s=a.map((function(e,i){var a,s=the.findId("provider_".concat(i),o),l=new ihe(s,o,null!==(a=e.displayName)&&void 0!==a?a:"Unknown Outline Provider",i);return Promise.resolve(e.provideDocumentSymbols(n,r.token)).then((function(e){var n=!0,i=!1,r=void 0;try{for(var o,a=(e||[])[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t._makeOutlineElement(s,l)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return l}),(function(e){return pu(e),l})).then((function(e){the.empty(e)?e.remove():o._groups.set(s,e)}))})),l=e.onDidChange((function(){ea(e.ordered(n),a)||r.cancel()}));return Promise.all(s).then((function(){return r.token.isCancellationRequested&&!i.isCancellationRequested?t.create(e,n,i):o._compact()})).finally((function(){r.dispose(),l.dispose(),r.dispose()}))}},{key:"_makeOutlineElement",value:function(e,n){var i=the.findId(e,n),r=new nhe(i,n,e);if(e.children){var o=!0,a=!1,s=void 0;try{for(var l,u=e.children[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;t._makeOutlineElement(c,r)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}n.children.set(r.id,r)}},{key:"_flattenDocumentSymbols",value:function(e,n,i){var r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;e.push({kind:u.kind,tags:u.tags,name:u.name,detail:u.detail,containerName:u.containerName||i,range:u.range,selectionRange:u.selectionRange,children:void 0}),u.children&&t._flattenDocumentSymbols(e,u.children,u.name)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}}]),t}(the),ohe=Zm("IOutlineModelService"),ahe=function(){function e(t,n,i){var r=this;u(this,e),this._languageFeaturesService=t,this._disposables=new Tu,this._cache=new pw(10,.7),this._debounceInformation=n.for(t.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(i.onModelRemoved((function(e){r._cache.delete(e.id)})))}return h(e,[{key:"dispose",value:function(){this._disposables.dispose()}},{key:"getOrCreate",value:function(e,t){var n=this;return s((function(){var i,r,o,a,s,l;return E(this,(function(u){switch(u.label){case 0:if(i=n._languageFeaturesService.documentSymbolProvider,r=i.ordered(e),(o=n._cache.get(e.id))&&o.versionId===e.getVersionId()&&ea(o.provider,r)||(a=new rc,o={versionId:e.getVersionId(),provider:r,promiseCnt:0,source:a,promise:rhe.create(i,e,a.token),model:void 0},n._cache.set(e.id,o),s=Date.now(),o.promise.then((function(t){o.model=t,n._debounceInformation.update(e,Date.now()-s)})).catch((function(t){n._cache.delete(e.id)}))),o.model)return[2,o.model];o.promiseCnt+=1,l=t.onCancellationRequested((function(){0==--o.promiseCnt&&(o.source.cancel(),n._cache.delete(e.id))})),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,o.promise];case 2:return[2,u.sent()];case 3:return l.dispose(),[7];case 4:return[2]}}))}))()}}]),e}();ahe=Jde([ehe(0,wS),ehe(1,Ix),ehe(2,Qm)],ahe),nk(ohe,ahe,1),sy.registerCommand("_executeDocumentSymbolProvider",function(){var e=s((function(e){var t,n,i,r,o,a,s,l=arguments;return E(this,(function(u){switch(u.label){case 0:for(t=l.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=l[i];return r=C(n,1),o=r[0],Oa(ed.isUri(o)),a=e.get(ohe),[4,e.get(Xm).createModelReference(o)];case 1:s=u.sent(),u.label=2;case 2:return u.trys.push([2,,4,5]),[4,a.getOrCreate(s.object.textEditorModel,Uu.None)];case 3:return[2,u.sent().getTopLevelSymbols()];case 4:return s.dispose(),[7];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}());var she=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).contextKeyService=e,i.model=n,i.inlineCompletionVisible=t.inlineSuggestionVisible.bindTo(i.contextKeyService),i.inlineCompletionSuggestsIndentation=t.inlineSuggestionHasIndentation.bindTo(i.contextKeyService),i.inlineCompletionSuggestsIndentationLessThanTabSize=t.inlineSuggestionHasIndentationLessThanTabSize.bindTo(i.contextKeyService),i.suppressSuggestions=t.suppressSuggestions.bindTo(i.contextKeyService),i._register(XP((function(e){var t=i.model.read(e),n=null==t?void 0:t.state.read(e),r=!!(null==n?void 0:n.inlineCompletion)&&void 0!==(null==n?void 0:n.primaryGhostText)&&!(null==n?void 0:n.primaryGhostText.isEmpty());i.inlineCompletionVisible.set(r),(null==n?void 0:n.primaryGhostText)&&(null==n?void 0:n.inlineCompletion)&&i.suppressSuggestions.set(n.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)}))),i._register(XP((function(e){var t=i.model.read(e),n=!1,r=!0,o=null==t?void 0:t.primaryGhostText.read(e);if((null==t?void 0:t.selectedSuggestItem)&&o&&o.parts.length>0){var a=o.parts[0],s=a.column,l=a.lines[0];if(s<=t.textModel.getLineIndentColumn(o.lineNumber)){var u=$h(l);-1===u&&(u=l.length-1),n=u>0;var c=t.textModel.getOptions().tabSize;r=WB.visibleColumnFromColumn(l,u+1,c)<c}}i.inlineCompletionSuggestsIndentation.set(n),i.inlineCompletionSuggestsIndentationLessThanTabSize.set(r)}))),i}return p(t,e),t}(Ru);she.inlineSuggestionVisible=new jy("inlineSuggestionVisible",!1,Xa("inlineSuggestionVisible","Whether an inline suggestion is visible")),she.inlineSuggestionHasIndentation=new jy("inlineSuggestionHasIndentation",!1,Xa("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),she.inlineSuggestionHasIndentationLessThanTabSize=new jy("inlineSuggestionHasIndentationLessThanTabSize",!0,Xa("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),she.suppressSuggestions=new jy("inlineSuggestionSuppressSuggestions",void 0,Xa("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"));var lhe=function(){function e(t,n){u(this,e),this.lineNumber=t,this.parts=n}return h(e,[{key:"equals",value:function(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((function(t,n){return t.equals(e.parts[n])}))}},{key:"renderForScreenReader",value:function(e){if(0===this.parts.length)return"";var t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1),i=new Xw(x(this.parts.map((function(e){return new $w(hd.fromPositions(new dd(1,e.column)),e.lines.join("\n"))})))).applyToString(n);return i.substring(this.parts[0].column-1)}},{key:"isEmpty",value:function(){return this.parts.every((function(e){return 0===e.lines.length}))}},{key:"lineCount",get:function(){return 1+this.parts.reduce((function(e,t){return e+t.lines.length-1}),0)}}]),e}(),uhe=function(){function e(t,n,i){u(this,e),this.column=t,this.text=n,this.preview=i,this.lines=Xh(this.text)}return h(e,[{key:"equals",value:function(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((function(t,n){return t===e.lines[n]}))}}]),e}(),che=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;u(this,e),this.lineNumber=t,this.columnRange=n,this.text=i,this.additionalReservedLineCount=r,this.parts=[new uhe(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=Xh(this.text)}return h(e,[{key:"renderForScreenReader",value:function(e){return this.newLines.join("\n")}},{key:"lineCount",get:function(){return this.newLines.length}},{key:"isEmpty",value:function(){return this.parts.every((function(e){return 0===e.lines.length}))}},{key:"equals",value:function(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((function(t,n){return t===e.newLines[n]}))&&this.additionalReservedLineCount===e.additionalReservedLineCount}}]),e}();function dhe(e,t){return ea(e,t,hhe)}function hhe(e,t){return e===t||!(!e||!t)&&((e instanceof lhe&&t instanceof lhe||e instanceof che&&t instanceof che)&&e.equals(t))}var fhe=[];var ghe=function(){function e(t,n){if(u(this,e),this.startColumn=t,this.endColumnExclusive=n,t>n)throw new Lu("startColumn ".concat(t," cannot be after endColumnExclusive ").concat(n))}return h(e,[{key:"toRange",value:function(e){return new hd(e,this.startColumn,e,this.endColumnExclusive)}},{key:"equals",value:function(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}}]),e}();function vhe(e,t){var n=new Tu,i=e.createDecorationsCollection();return n.add($P({debugName:function(){return"Apply decorations from ".concat(t.debugName)}},(function(e){var n=t.read(e);i.set(n)}))),n.add({dispose:function(){i.clear()}}),n}function phe(e,t){return new dd(e.lineNumber-t.lineNumber+1,e.lineNumber-t.lineNumber==0?e.column-t.column+1:e.column)}var mhe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},yhe=function(e,t){return function(n,i){t(n,i,e)}},_he="ghost-text",bhe=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t)).editor=e,r.model=n,r.languageService=i,r.isDisposed=BP(r,!1),r.currentTextModel=rO(r,r.editor.onDidChangeModel,(function(){return r.editor.getModel()})),r.uiState=UP(r,(function(e){var t=function(e,t){if(s.length>0){var n=s[s.length-1];t&&n.decorations.push(new CQ(n.content.length+1,n.content.length+1+e[0].length,t,0)),n.content+=e[0],e=e.slice(1)}var i=!0,r=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var u=a.value;s.push({content:u,decorations:t?[new CQ(1,u.length+1,t,0)]:[]})}}catch(e){r=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}};if(!r.isDisposed.read(e)){var n=r.currentTextModel.read(e);if(n===r.model.targetTextModel.read(e)){var i=r.model.ghostText.read(e);if(i){var o=i instanceof che?i.columnRange:void 0,a=[],s=[],l=n.getLineContent(i.lineNumber),u=void 0,c=0,d=!0,h=!1,f=void 0;try{for(var g,v=i.parts[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value,m=p.lines;void 0===u?(a.push({column:p.column,text:m[0],preview:p.preview}),m=m.slice(1)):t([l.substring(c,p.column-1)],void 0),m.length>0&&(t(m,_he),void 0===u&&p.column<=l.length&&(u=p.column)),c=p.column-1}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}void 0!==u&&t([l.substring(c)],void 0);var y=void 0!==u?new ghe(u,l.length+1):void 0;return{replacedRange:o,inlineTexts:a,additionalLines:s,hiddenRange:y,lineNumber:i.lineNumber,additionalReservedLineCount:r.model.minReservedLineCount.read(e),targetTextModel:n}}}}})),r.decorations=UP(r,(function(e){var t=r.uiState.read(e);if(!t)return[];var n=[];t.replacedRange&&n.push({range:t.replacedRange.toRange(t.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),t.hiddenRange&&n.push({range:t.hiddenRange.toRange(t.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});var i=!0,o=!1,a=void 0;try{for(var s,l=t.inlineTexts[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;n.push({range:hd.fromPositions(new dd(t.lineNumber,u.column)),options:{description:_he,after:{content:u.text,inlineClassName:u.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:fw.Left},showIfCollapsed:!0}})}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return n})),r.additionalLinesWidget=r._register(new khe(r.editor,r.languageService.languageIdCodec,UP((function(e){var t=r.uiState.read(e);return t?{lineNumber:t.lineNumber,additionalLines:t.additionalLines,minReservedLineCount:t.additionalReservedLineCount,targetTextModel:t.targetTextModel}:void 0})))),r._register(Mu((function(){r.isDisposed.set(!0,void 0)}))),r._register(vhe(r.editor,r.decorations)),r}return p(t,e),h(t,[{key:"ownsViewZone",value:function(e){return this.additionalLinesWidget.viewZoneId===e}}]),t}(Ru);bhe=mhe([yhe(2,Jb)],bhe);var khe=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t)).editor=e,r.languageIdCodec=n,r.lines=i,r._viewZoneId=void 0,r.editorOptionsChanged=aO("editorOptionChanged",Au.filter(r.editor.onDidChangeConfiguration,(function(e){return e.hasChanged(33)||e.hasChanged(118)||e.hasChanged(100)||e.hasChanged(95)||e.hasChanged(51)||e.hasChanged(50)||e.hasChanged(67)}))),r._register(XP((function(e){var t=r.lines.read(e);r.editorOptionsChanged.read(e),t?r.updateLines(t.lineNumber,t.additionalLines,t.minReservedLineCount):r.clear()}))),r}return p(t,e),h(t,[{key:"viewZoneId",get:function(){return this._viewZoneId}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this.clear()}},{key:"clear",value:function(){var e=this;this.editor.changeViewZones((function(t){e._viewZoneId&&(t.removeZone(e._viewZoneId),e._viewZoneId=void 0)}))}},{key:"updateLines",value:function(e,t,n){var i=this,r=this.editor.getModel();if(r){var o=r.getOptions().tabSize;this.editor.changeViewZones((function(r){i._viewZoneId&&(r.removeZone(i._viewZoneId),i._viewZoneId=void 0);var a=Math.max(t.length,n);if(a>0){var s=document.createElement("div");!function(e,t,n,i,r){var o=i.get(33),a=i.get(118),s="none",l=i.get(95),u=i.get(51),c=i.get(50),d=i.get(67),h=new Tb(1e4);h.appendString('<div class="suggest-preview-text">');for(var f=0,g=n.length;f<g;f++){var v=n[f],p=v.content;h.appendString('<div class="view-line'),h.appendString('" style="top:'),h.appendString(String(f*d)),h.appendString('px;width:1000000px;">');var m=Sf(p),y=wf(p),_=YT.createEmpty(p,r);RQ(new IQ(c.isMonospace&&!o,c.canUseHalfwidthRightwardsArrow,p,!1,m,y,0,_,v.decorations,t,0,c.spaceWidth,c.middotWidth,c.wsmiddotWidth,a,s,l,u!==vl.OFF,null),h),h.appendString("</div>")}h.appendString("</div>"),Om(e,c);var b=h.build(),k=whe?whe.createHTML(b):b;e.innerHTML=k}(s,o,t,i.editor.getOptions(),i.languageIdCodec),i._viewZoneId=r.addZone({afterLineNumber:e,heightInLines:a,domNode:s,afterColumnAffinity:1})}}))}}}]),t}(Ru);var whe=rb("editorGhostText",{createHTML:function(e){return e}});var Che=function(){function e(t){var n=this;u(this,e),this.lines=t,this.tokenization={getLineTokens:function(e){return n.lines[e-1]}}}return h(e,[{key:"getLineCount",value:function(){return this.lines.length}},{key:"getLineLength",value:function(e){return this.lines[e-1].getLineContent().length}}]),e}();function She(e,t,n,i){return xhe.apply(this,arguments)}function xhe(){return xhe=s((function(e,t,n,i){var r,o,a,l,u,c,d,h,f,g,v,p,m,y,_,b,k,w,C,S,L,D,N,I,M,T,R,A,P,O,F,W=arguments;function B(e){if(!e.yieldsToGroupIds)return[];var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=(e.yieldsToGroupIds||[])[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=u.get(s),c=!0,d=!1,h=void 0;try{for(var f,g=l[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;t.push(v)}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}function H(e,t){if(t=x(t).concat([e]),m.has(e))return t;m.add(e);try{var n=B(e),i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=H(a.value,t);if(l)return l}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}finally{m.delete(e)}}function V(e){var o=p.get(e);if(o)return o;var a=H(e,[]);a&&pu(new Error("Inline completions: cyclic yield-to dependency detected. Path: ".concat(a.map((function(e){return e.toString?e.toString():""+e})).join(" -> "))));var l=new Ng;return p.set(e,l.p),s((function(){var o,s,l,u,c,d,h,f,g;return E(this,(function(v){switch(v.label){case 0:if(a)return[3,8];o=B(e),s=!0,l=!1,u=void 0,v.label=1;case 1:v.trys.push([1,6,7,8]),c=o[Symbol.iterator](),v.label=2;case 2:return(s=(d=c.next()).done)?[3,5]:[4,V(d.value)];case 3:if((h=v.sent())&&h.items.length>0)return[2,void 0];v.label=4;case 4:return s=!0,[3,2];case 5:return[3,8];case 6:return f=v.sent(),l=!0,u=f,[3,8];case 7:try{s||null==c.return||c.return()}finally{if(l)throw u}return[7];case 8:return v.trys.push([8,13,,14]),t instanceof dd?[4,e.provideInlineCompletions(n,t,i,r)]:[3,10];case 9:return[2,v.sent()];case 10:return[4,null===(g=e.provideInlineEdits)||void 0===g?void 0:g.call(e,n,t,i,r)];case 11:return[2,v.sent()];case 12:return[3,14];case 13:return pu(v.sent()),[2,void 0];case 14:return[2]}}))}))().then((function(e){return l.complete(e)}),(function(e){return l.error(e)})),l.p}return E(this,(function(i){switch(i.label){case 0:r=W.length>4&&void 0!==W[4]?W[4]:Uu.None,o=W.length>5?W[5]:void 0,a=t instanceof dd?function(e,t){var n=t.getWordAtPosition(e),i=t.getLineMaxColumn(e.lineNumber);return n?new hd(e.lineNumber,n.startColumn,e.lineNumber,i):hd.fromPositions(e,e.with(void 0,i))}(t,n):t,l=e.all(n),u=new yw,c=!0,d=!1,h=void 0;try{for(f=l[Symbol.iterator]();!(c=(g=f.next()).done);c=!0)(v=g.value).groupId&&u.add(v.groupId,v)}catch(e){d=!0,h=e}finally{try{c||null==f.return||f.return()}finally{if(d)throw h}}return p=new Map,m=new Set,[4,Promise.all(l.map(function(){var e=s((function(e){var t;return E(this,(function(n){switch(n.label){case 0:return t={provider:e},[4,V(e)];case 1:return[2,(t.completions=n.sent(),t)]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:y=i.sent(),_=new Map,b=[],k=!0,w=!1,C=void 0;try{for(S=y[Symbol.iterator]();!(k=(L=S.next()).done);k=!0)if(D=L.value,N=D.completions){I=new Dhe(N,D.provider),b.push(I),M=!0,T=!1,R=void 0;try{for(A=N.items[Symbol.iterator]();!(M=(P=A.next()).done);M=!0)O=P.value,F=Nhe.from(O,I,a,n,o),_.set(F.hash(),F)}catch(e){T=!0,R=e}finally{try{M||null==A.return||A.return()}finally{if(T)throw R}}}}catch(e){w=!0,C=e}finally{try{k||null==S.return||S.return()}finally{if(w)throw C}}return[2,new Lhe(Array.from(_.values()),new Set(_.keys()),b)]}}))})),xhe.apply(this,arguments)}var Lhe=function(){function e(t,n,i){u(this,e),this.completions=t,this.hashs=n,this.providerResults=i}return h(e,[{key:"has",value:function(e){return this.hashs.has(e.hash())}},{key:"dispose",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.providerResults[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.removeRef()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}}]),e}(),Dhe=function(){function e(t,n){u(this,e),this.inlineCompletions=t,this.provider=n,this.refCount=1}return h(e,[{key:"addRef",value:function(){this.refCount++}},{key:"removeRef",value:function(){this.refCount--,0===this.refCount&&this.provider.freeInlineCompletions(this.inlineCompletions)}}]),e}(),Nhe=function(){function e(t,n,i,r,o,a,s,l){u(this,e),this.filterText=t,this.command=n,this.range=i,this.insertText=r,this.snippetInfo=o,this.additionalTextEdits=a,this.sourceInlineCompletion=s,this.source=l,r=(t=t.replace(/\r\n|\r/g,"\n")).replace(/\r\n|\r/g,"\n")}return h(e,[{key:"withRange",value:function(t){return new e(this.filterText,this.command,t,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}},{key:"hash",value:function(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}},{key:"toSingleTextEdit",value:function(){return new $w(this.range,this.insertText)}}],[{key:"from",value:function(t,n,i,r,o){var a,s,l=t.range?hd.lift(t.range):i;if("string"==typeof t.insertText){if(a=t.insertText,o&&t.completeBracketPairs){var u=(a=Ihe(a,l.getStartPosition(),r,o)).length-t.insertText.length;0!==u&&(l=new hd(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+u))}s=void 0}else if("snippet"in t.insertText){var c=t.insertText.snippet.length;if(o&&t.completeBracketPairs){t.insertText.snippet=Ihe(t.insertText.snippet,l.getStartPosition(),r,o);var d=t.insertText.snippet.length-c;0!==d&&(l=new hd(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+d))}var h=(new qte).parse(t.insertText.snippet);1===h.children.length&&h.children[0]instanceof Fte?(a=h.children[0].value,s=void 0):(a=h.toString(),s={snippet:t.insertText.snippet,range:l})}else $y(t.insertText);return new e(a,t.command,l,a,s,t.additionalTextEdits||fhe,t,n)}}]),e}();function Ihe(e,t,n,i){var r=n.getLineContent(t.lineNumber).substring(0,t.column-1)+e,o=n.tokenization.tokenizeLineWithEdit(t,r.length-(t.column-1),e),a=null==o?void 0:o.sliceAndInflate(t.column-1,r.length,0);if(!a)return e;var s=function(e,t){var n=new lH,i=new LH(n,(function(e){return t.getLanguageConfiguration(e)})),r=RH(new wH(new Che([e]),i),[],void 0,!0),o="",a=e.getLineContent();return function e(t,n){if(2===t.kind)if(e(t.openingBracket,n),n=GB(n,t.openingBracket.length),t.child&&(e(t.child,n),n=GB(n,t.child.length)),t.closingBracket)e(t.closingBracket,n),n=GB(n,t.closingBracket.length);else{var r=i.getSingleLanguageBracketTokens(t.openingBracket.languageId).findClosingTokenText(t.openingBracket.bracketIds);o+=r}else if(3===t.kind);else if(0===t.kind||1===t.kind)o+=a.substring(n,GB(n,t.length));else if(4===t.kind){var s=!0,l=!1,u=void 0;try{for(var c,d=t.children[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;e(h,n),n=GB(n,h.length)}}catch(t){l=!0,u=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}}(r,0),o}(a,i);return s}function Ehe(e,t,n){var i=n?e.range.intersectRanges(n):e.range;if(!i)return e;var r=t.getValueInRange(i,1),o=df(r,e.text),a=Yw.ofText(r.substring(0,o)).addToPosition(e.range.getStartPosition()),s=e.text.substring(o),l=hd.fromPositions(a,e.range.getEndPosition());return new $w(l,s)}function Mhe(e,t){return e.text.startsWith(t.text)&&function(e,t){return t.getStartPosition().equals(e.getStartPosition())&&t.getEndPosition().isBeforeOrEqual(e.getEndPosition())}(e.range,t.range)}function The(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=Ehe(e,t);if(o.range.endLineNumber===o.range.startLineNumber){var a=t.getLineContent(o.range.startLineNumber),s=Jh(a).length;if(o.range.startColumn-1<=s){var l=Jh(o.text).length,u=a.substring(o.range.startColumn-1,s),c=[o.range.getStartPosition(),o.range.getEndPosition()],d=c[0],h=c[1],f=d.column+u.length<=h.column?d.delta(0,u.length):h,g=hd.fromPositions(f,h),v=o.text.startsWith(u)?o.text.substring(u.length):o.text.substring(l);o=new $w(g,v)}var p=t.getValueInRange(o.range),m=function(e,t){if((null==Rhe?void 0:Rhe.originalValue)===e&&(null==Rhe?void 0:Rhe.newValue)===t)return null==Rhe?void 0:Rhe.changes;var n=Phe(e,t,!0);if(n){var i=Ahe(n);if(i>0){var r=Phe(e,t,!1);r&&Ahe(r)<i&&(n=r)}}return Rhe={originalValue:e,newValue:t,changes:n},n}(p,o.text);if(m){var y=o.range.startLineNumber,_=new Array;if("prefix"===n){var b=m.filter((function(e){return 0===e.originalLength}));if(b.length>1||1===b.length&&b[0].originalStart!==p.length)return}var k=o.text.length-r,w=!0,C=!1,S=void 0;try{for(var x,L=m[Symbol.iterator]();!(w=(x=L.next()).done);w=!0){var D=x.value,N=o.range.startColumn+D.originalStart+D.originalLength;if("subwordSmart"===n&&i&&i.lineNumber===o.range.startLineNumber&&N<i.column)return;if(D.originalLength>0)return;if(0!==D.modifiedLength){var I=D.modifiedStart+D.modifiedLength,E=Math.max(D.modifiedStart,Math.min(I,k)),M=o.text.substring(D.modifiedStart,E),T=o.text.substring(E,Math.max(D.modifiedStart,I));M.length>0&&_.push(new uhe(N,M,!1)),T.length>0&&_.push(new uhe(N,T,!0))}}}catch(e){C=!0,S=e}finally{try{w||null==L.return||L.return()}finally{if(C)throw S}}return new lhe(y,_)}}}var Rhe=void 0;function Ahe(e){var t=0,n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){t+=o.value.originalLength}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}function Phe(e,t,n){if(!(e.length>5e3||t.length>5e3)){var i=Math.max(a(e),a(t)),r=l(e),o=l(t);return new Gk({getElements:function(){return r}},{getElements:function(){return o}}).ComputeDiff(!1).changes}function a(e){for(var t=0,n=0,i=e.length;n<i;n++){var r=e.charCodeAt(n);r>t&&(t=r)}return t}function s(e){if(e<0)throw new Error("unexpected");return i+e+1}function l(e){for(var t=0,i=0,r=new Int32Array(e.length),o=0,a=e.length;o<a;o++)if(n&&"("===e[o]){var l=100*i+t;r[o]=s(2*l),t++}else if(n&&")"===e[o]){var u=100*i+(t=Math.max(t-1,0));r[o]=s(2*u+1),0===t&&i++}else r[o]=e.charCodeAt(o);return r}}var Ohe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Fhe=function(e,t){return function(n,i){t(n,i,e)}},Whe=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t)).textModel=e,a.versionId=n,a._debounceValue=i,a.languageFeaturesService=r,a.languageConfigurationService=o,a._updateOperation=a._register(new Pu),a.inlineCompletions=VP("inlineCompletions",void 0),a.suggestWidgetInlineCompletions=VP("suggestWidgetInlineCompletions",void 0),a._register(a.textModel.onDidChangeContent((function(){a._updateOperation.clear()}))),a}return p(t,e),h(t,[{key:"fetch",value:function(e,t,n){var i,r,o=new Hhe(e,t,this.textModel.getVersionId()),a=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(null===(i=this._updateOperation.value)||void 0===i?void 0:i.request.satisfies(o))return this._updateOperation.value.promise;if(null===(r=a.get())||void 0===r?void 0:r.request.satisfies(o))return Promise.resolve(!0);var l=!!this._updateOperation.value;this._updateOperation.clear();var u=new rc,c=this,d=s((function(){var i,r,s,d,h;return E(this,(function(f){switch(f.label){case 0:return l||t.triggerKind===_d.Automatic?[4,Bhe(c._debounceValue.get(c.textModel),u.token)]:[3,2];case 1:f.sent(),f.label=2;case 2:return u.token.isCancellationRequested||c._store.isDisposed||c.textModel.getVersionId()!==o.versionId?[2,!1]:(i=new Date,[4,She(c.languageFeaturesService.inlineCompletionsProvider,e,c.textModel,t,u.token,c.languageConfigurationService)]);case 3:return r=f.sent(),u.token.isCancellationRequested||c._store.isDisposed||c.textModel.getVersionId()!==o.versionId?[2,!1]:(s=new Date,c._debounceValue.update(c.textModel,s.getTime()-i.getTime()),d=new zhe(r,o,c.textModel,c.versionId),n&&(h=n.toInlineCompletion(void 0),n.canBeReused(c.textModel,e)&&!r.has(h)&&d.prepend(n.inlineCompletion,h.range,!0)),c._updateOperation.clear(),TP((function(e){a.set(d,e)})),[2,!0])}}))}))(),h=new Vhe(o,u,d);return this._updateOperation.value=h,d}},{key:"clear",value:function(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}},{key:"clearSuggestWidgetInlineCompletions",value:function(e){var t;(null===(t=this._updateOperation.value)||void 0===t?void 0:t.request.context.selectedSuggestionInfo)&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}},{key:"cancelUpdate",value:function(){this._updateOperation.clear()}}]),t}(Ru);function Bhe(e,t){return new Promise((function(n){var i=void 0,r=setTimeout((function(){i&&i.dispose(),n()}),e);t&&(i=t.onCancellationRequested((function(){clearTimeout(r),i&&i.dispose(),n()})))}))}Whe=Ohe([Fhe(3,wS),Fhe(4,Ek)],Whe);var Hhe=function(){function e(t,n,i){u(this,e),this.position=t,this.context=n,this.versionId=i}return h(e,[{key:"satisfies",value:function(e){return this.position.equals(e.position)&&_P(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,(function(e,t){return e.equals(t)}))&&(e.context.triggerKind===_d.Automatic||this.context.triggerKind===_d.Explicit)&&this.versionId===e.versionId}}]),e}(),Vhe=function(){function e(t,n,i){u(this,e),this.request=t,this.cancellationTokenSource=n,this.promise=i}return h(e,[{key:"dispose",value:function(){this.cancellationTokenSource.cancel()}}]),e}(),zhe=function(){function e(t,n,i,r){var o=this;u(this,e),this.inlineCompletionProviderResult=t,this.request=n,this._textModel=i,this._versionId=r,this._refCount=1,this._prependedInlineCompletionItems=[];var a=i.deltaDecorations([],t.completions.map((function(e){return{range:e.range,options:{description:"inline-completion-tracking-range"}}})));this._inlineCompletions=t.completions.map((function(e,t){return new Uhe(e,a[t],o._textModel,o._versionId)}))}return h(e,[{key:"inlineCompletions",get:function(){return this._inlineCompletions}},{key:"clone",value:function(){return this._refCount++,this}},{key:"dispose",value:function(){var e=this;if(this._refCount--,0===this._refCount){setTimeout((function(){e._textModel.isDisposed()||e._textModel.deltaDecorations(e._inlineCompletions.map((function(e){return e.decorationId})),[])}),0),this.inlineCompletionProviderResult.dispose();var t=!0,n=!1,i=void 0;try{for(var r,o=this._prependedInlineCompletionItems[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.source.removeRef()}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}},{key:"prepend",value:function(e,t,n){n&&e.source.addRef();var i=this._textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new Uhe(e,i,this._textModel,this._versionId)),this._prependedInlineCompletionItems.push(e)}}]),e}(),Uhe=function(){function e(t,n,i,r){var o=this;u(this,e),this.inlineCompletion=t,this.decorationId=n,this._textModel=i,this._modelVersion=r,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._updatedRange=KP({owner:this,equalsFn:hd.equalsRange},(function(e){return o._modelVersion.read(e),o._textModel.getDecorationRange(o.decorationId)}))}return h(e,[{key:"forwardStable",get:function(){var e;return null!==(e=this.inlineCompletion.source.inlineCompletions.enableForwardStability)&&void 0!==e&&e}},{key:"toInlineCompletion",value:function(e){var t;return this.inlineCompletion.withRange(null!==(t=this._updatedRange.read(e))&&void 0!==t?t:jhe)}},{key:"toSingleTextEdit",value:function(e){var t;return new $w(null!==(t=this._updatedRange.read(e))&&void 0!==t?t:jhe,this.inlineCompletion.insertText)}},{key:"isVisible",value:function(e,t,n){var i=Ehe(this._toFilterTextReplacement(n),e),r=this._updatedRange.read(n);if(!r||!this.inlineCompletion.range.getStartPosition().equals(r.getStartPosition())||t.lineNumber!==i.range.startLineNumber)return!1;var o=e.getValueInRange(i.range,1),a=i.text,s=Math.max(0,t.column-i.range.startColumn),l=a.substring(0,s),u=a.substring(s),c=o.substring(0,s),d=o.substring(s),h=e.getLineIndentColumn(i.range.startLineNumber);return i.range.startColumn<=h&&(0===(c=c.trimStart()).length&&(d=d.trimStart()),0===(l=l.trimStart()).length&&(u=u.trimStart())),l.startsWith(c)&&!!ZE(d,u)}},{key:"canBeReused",value:function(e,t){var n=this._updatedRange.read(void 0);return!!n&&n.containsPosition(t)&&this.isVisible(e,t,void 0)&&Yw.ofRange(n).isGreaterThanOrEqualTo(Yw.ofRange(this.inlineCompletion.range))}},{key:"_toFilterTextReplacement",value:function(e){var t;return new $w(null!==(t=this._updatedRange.read(e))&&void 0!==t?t:jhe,this.inlineCompletion.filterText)}}]),e}(),jhe=new hd(1,1,1,1),Khe={Visible:Pue,HasFocusedSuggestion:new jy("suggestWidgetHasFocusedSuggestion",!1,Xa("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new jy("suggestWidgetDetailsVisible",!1,Xa("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new jy("suggestWidgetMultipleSuggestions",!1,Xa("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new jy("suggestionMakesTextEdit",!0,Xa("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new jy("acceptSuggestionOnEnter",!0,Xa("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new jy("suggestionHasInsertAndReplaceRange",!1,Xa("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new jy("suggestionInsertMode",void 0,{type:"string",description:Xa("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new jy("suggestionCanResolve",!1,Xa("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},qhe=new d_("suggestWidgetStatusBar"),Ghe=function(){function e(t,n,i,r){var o;u(this,e),this.position=t,this.completion=n,this.container=i,this.provider=r,this.isInvalid=!1,this.score=wM.Default,this.distance=0,this.textLabel="string"==typeof n.label?n.label:null===(o=n.label)||void 0===o?void 0:o.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=n.sortText&&n.sortText.toLowerCase(),this.filterTextLow=n.filterText&&n.filterText.toLowerCase(),this.extensionId=n.extensionId,hd.isIRange(n.range)?(this.editStart=new dd(n.range.startLineNumber,n.range.startColumn),this.editInsertEnd=new dd(n.range.endLineNumber,n.range.endColumn),this.editReplaceEnd=new dd(n.range.endLineNumber,n.range.endColumn),this.isInvalid=this.isInvalid||hd.spansMultipleLines(n.range)||n.range.startLineNumber!==t.lineNumber):(this.editStart=new dd(n.range.insert.startLineNumber,n.range.insert.startColumn),this.editInsertEnd=new dd(n.range.insert.endLineNumber,n.range.insert.endColumn),this.editReplaceEnd=new dd(n.range.replace.endLineNumber,n.range.replace.endColumn),this.isInvalid=this.isInvalid||hd.spansMultipleLines(n.range.insert)||hd.spansMultipleLines(n.range.replace)||n.range.insert.startLineNumber!==t.lineNumber||n.range.replace.startLineNumber!==t.lineNumber||n.range.insert.startColumn!==n.range.replace.startColumn),"function"!=typeof r.resolveCompletionItem&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}return h(e,[{key:"isResolved",get:function(){return void 0!==this._resolveDuration}},{key:"resolveDuration",get:function(){return void 0!==this._resolveDuration?this._resolveDuration:-1}},{key:"resolve",value:function(e){var t=this;return s((function(){var n,i;return E(this,(function(r){return t._resolveCache||(n=e.onCancellationRequested((function(){t._resolveCache=void 0,t._resolveDuration=void 0})),i=new Hu(!0),t._resolveCache=Promise.resolve(t.provider.resolveCompletionItem(t.completion,e)).then((function(e){Object.assign(t.completion,e),t._resolveDuration=i.elapsed()}),(function(e){_u(e)&&(t._resolveCache=void 0,t._resolveDuration=void 0)})).finally((function(){n.dispose()}))),[2,t._resolveCache]}))}))()}}]),e}(),Zhe=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];u(this,e),this.snippetSortOrder=t,this.kindFilter=n,this.providerFilter=i,this.providerItemsToReuse=r,this.showDeprecated=o};Zhe.default=new Zhe;var Yhe=function e(t,n,i,r){u(this,e),this.items=t,this.needsClipboard=n,this.durations=i,this.disposable=r};function Qhe(e,t,n){return Xhe.apply(this,arguments)}function Xhe(){return Xhe=s((function(e,t,n){var i,r,o,a,l,u,c,d,h,f,g,v,p,m,y,_,b,k,w,C,S=arguments;return E(this,(function(x){switch(x.label){case 0:i=S.length>3&&void 0!==S[3]?S[3]:Zhe.default,r=S.length>4&&void 0!==S[4]?S[4]:{triggerKind:0},o=S.length>5&&void 0!==S[5]?S[5]:Uu.None,a=new Hu,n=n.clone(),l=t.getWordAtPosition(n),u=l?new hd(n.lineNumber,l.startColumn,n.lineNumber,l.endColumn):hd.fromPositions(n),c={replace:u,insert:u.setEndPosition(n.lineNumber,n.column)},d=[],h=new Tu,f=[],g=!1,v=function(e,t,r){var o=!1;if(!t)return o;var a,s,l=!0,u=!1,v=void 0;try{for(var p,m=t.suggestions[Symbol.iterator]();!(l=(p=m.next()).done);l=!0){var y=p.value;if(!i.kindFilter.has(y.kind)){var _;if(!i.showDeprecated&&(null==y||null===(_=y.tags)||void 0===_?void 0:_.includes(1)))continue;y.range||(y.range=c),y.sortText||(y.sortText="string"==typeof y.label?y.label:y.label.label),!g&&y.insertTextRules&&4&y.insertTextRules&&(g=qte.guessNeedsClipboard(y.insertText)),d.push(new Ghe(n,y,t,e)),o=!0}}}catch(e){u=!0,v=e}finally{try{l||null==m.return||m.return()}finally{if(u)throw v}}return Nu(t)&&h.add(t),f.push({providerName:null!==(a=e._debugDisplayName)&&void 0!==a?a:"unknown_provider",elapsedProvider:null!==(s=t.duration)&&void 0!==s?s:-1,elapsedOverall:r.elapsed()}),o},p=s((function(){return E(this,(function(e){return[2]}))}))(),m=!0,y=!1,_=void 0,x.label=1;case 1:x.trys.push([1,6,7,8]),b=function(){var e,a;return E(this,(function(l){switch(l.label){case 0:return e=w.value,a=!1,[4,Promise.all(e.map(function(){var e=s((function(e){var s,l,u;return E(this,(function(c){switch(c.label){case 0:if(i.providerItemsToReuse.has(e))return(s=i.providerItemsToReuse.get(e)).forEach((function(e){return d.push(e)})),a=a||s.length>0,[2];if(i.providerFilter.size>0&&!i.providerFilter.has(e))return[2];c.label=1;case 1:return c.trys.push([1,3,,4]),l=new Hu,[4,e.provideCompletionItems(t,n,r,o)];case 2:return u=c.sent(),a=v(e,u,l)||a,[3,4];case 3:return pu(c.sent()),[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:return l.sent(),a||o.isCancellationRequested?[2,"break"]:[2]}}))},k=e.orderedGroups(t)[Symbol.iterator](),x.label=2;case 2:return(m=(w=k.next()).done)?[3,5]:[5,M(b())];case 3:if("break"===x.sent())return[3,5];x.label=4;case 4:return m=!0,[3,2];case 5:return[3,8];case 6:return C=x.sent(),y=!0,_=C,[3,8];case 7:try{m||null==k.return||k.return()}finally{if(y)throw _}return[7];case 8:return[4,p];case 9:return x.sent(),o.isCancellationRequested?(h.dispose(),[2,Promise.reject(new bu)]):[2,new Yhe(d.sort(efe(i.snippetSortOrder)),g,{entries:f,elapsed:a.elapsed()},h)]}}))})),Xhe.apply(this,arguments)}function $he(e,t){if(e.sortTextLow&&t.sortTextLow){if(e.sortTextLow<t.sortTextLow)return-1;if(e.sortTextLow>t.sortTextLow)return 1}return e.textLabel<t.textLabel?-1:e.textLabel>t.textLabel?1:e.completion.kind-t.completion.kind}var Jhe=new Map;function efe(e){return Jhe.get(e)}Jhe.set(0,(function(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return-1;if(27===t.completion.kind)return 1}return $he(e,t)})),Jhe.set(2,(function(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return 1;if(27===t.completion.kind)return-1}return $he(e,t)})),Jhe.set(1,$he),sy.registerCommand("_executeCompletionItemProvider",function(){var e=s((function(e){var t,n,i,r,o,a,s,l,u,c,d,h,f,g,v,p,m,y,_,b,k=arguments;return E(this,(function(w){switch(w.label){case 0:for(t=k.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=k[i];return r=C(n,4),o=r[0],a=r[1],s=r[2],l=r[3],Oa(ed.isUri(o)),Oa(dd.isIPosition(a)),Oa("string"==typeof s||!s),Oa("number"==typeof l||!l),u=e.get(wS).completionProvider,[4,e.get(Xm).createModelReference(o)];case 1:c=w.sent(),w.label=2;case 2:return w.trys.push([2,,8,9]),d={incomplete:!1,suggestions:[]},h=[],f=c.object.textEditorModel.validatePosition(a),[4,Qhe(u,c.object.textEditorModel,f,void 0,{triggerCharacter:null!=s?s:void 0,triggerKind:s?1:0})];case 3:g=w.sent(),v=!0,p=!1,m=void 0;try{for(y=g.items[Symbol.iterator]();!(v=(_=y.next()).done);v=!0)b=_.value,h.length<(null!=l?l:0)&&h.push(b.resolve(Uu.None)),d.incomplete=d.incomplete||b.container.incomplete,d.suggestions.push(b.completion)}catch(e){p=!0,m=e}finally{try{v||null==y.return||y.return()}finally{if(p)throw m}}w.label=4;case 4:return w.trys.push([4,,6,7]),[4,Promise.all(h)];case 5:return w.sent(),[2,d];case 6:return setTimeout((function(){return g.disposable.dispose()}),100),[7];case 7:return[3,9];case 8:return c.dispose(),[7];case 9:return[2]}}))}));return function(t){return e.apply(this,arguments)}}());var tfe=function(){function e(){u(this,e)}return h(e,null,[{key:"isAllOff",value:function(e){return"off"===e.other&&"off"===e.comments&&"off"===e.strings}},{key:"isAllOn",value:function(e){return"on"===e.other&&"on"===e.comments&&"on"===e.strings}},{key:"valueFor",value:function(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}]),e}();function nfe(e){return function(e){return!!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ps)&&$x(e.charCodeAt(0))&&58===e.charCodeAt(1)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:ps)?e.charAt(0).toUpperCase()+e.slice(1):e}var ife=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},rfe=function(e,t){return function(n,i){t(n,i,e)}},ofe=function(){function e(t){u(this,e),this._delegates=t}return h(e,[{key:"resolve",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._delegates[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value.resolve(e);if(void 0!==a)return a}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}]),e}(),afe=function(){function e(t,n,i,r){u(this,e),this._model=t,this._selection=n,this._selectionIdx=i,this._overtypingCapturer=r}return h(e,[{key:"resolve",value:function(e){var t=e.name;if("SELECTION"===t||"TM_SELECTED_TEXT"===t){var n=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){var r=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);r&&(n=r.value,i=r.multiline)}if(n&&i&&e.snippet){var o=Jh(this._model.getLineContent(this._selection.startLineNumber),0,this._selection.startColumn-1),a=o;e.snippet.walk((function(t){return t!==e&&(t instanceof Fte&&(a=Jh(Xh(t.value).pop())),!0)}));var s=df(a,o);n=n.replace(/(\r\n|\r|\n)(.*)/g,(function(e,t,n){return"".concat(t).concat(a.substr(s)).concat(n)}))}return n}if("TM_CURRENT_LINE"===t)return this._model.getLineContent(this._selection.positionLineNumber);if("TM_CURRENT_WORD"===t){var l=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return l&&l.word||void 0}return"TM_LINE_INDEX"===t?String(this._selection.positionLineNumber-1):"TM_LINE_NUMBER"===t?String(this._selection.positionLineNumber):"CURSOR_INDEX"===t?String(this._selectionIdx):"CURSOR_NUMBER"===t?String(this._selectionIdx+1):void 0}}]),e}(),sfe=function(){function e(t,n){u(this,e),this._labelService=t,this._model=n}return h(e,[{key:"resolve",value:function(e){var t=e.name;if("TM_FILENAME"===t)return jc(this._model.uri.fsPath);if("TM_FILENAME_BASE"===t){var n=jc(this._model.uri.fsPath),i=n.lastIndexOf(".");return i<=0?n:n.slice(0,i)}return"TM_DIRECTORY"===t?"."===Uc(this._model.uri.fsPath)?"":this._labelService.getUriLabel(XM(this._model.uri)):"TM_FILEPATH"===t?this._labelService.getUriLabel(this._model.uri):"RELATIVE_FILEPATH"===t?this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0}):void 0}}]),e}(),lfe=function(){function e(t,n,i,r){u(this,e),this._readClipboardText=t,this._selectionIdx=n,this._selectionCount=i,this._spread=r}return h(e,[{key:"resolve",value:function(e){if("CLIPBOARD"===e.name){var t=this._readClipboardText();if(t){if(this._spread){var n=t.split(/\r\n|\n|\r/).filter((function(e){return!zh(e)}));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}}]),e}(),ufe=function(){function e(t,n,i){u(this,e),this._model=t,this._selection=n,this._languageConfigurationService=i}return h(e,[{key:"resolve",value:function(e){var t=e.name,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),i=this._languageConfigurationService.getLanguageConfiguration(n).comments;if(i)return"LINE_COMMENT"===t?i.lineCommentToken||void 0:"BLOCK_COMMENT_START"===t?i.blockCommentStartToken||void 0:"BLOCK_COMMENT_END"===t&&i.blockCommentEndToken||void 0}}]),e}();ufe=ife([rfe(2,Ek)],ufe);var cfe=function(){function e(){u(this,e),this._date=new Date}return h(e,[{key:"resolve",value:function(t){var n=t.name;if("CURRENT_YEAR"===n)return String(this._date.getFullYear());if("CURRENT_YEAR_SHORT"===n)return String(this._date.getFullYear()).slice(-2);if("CURRENT_MONTH"===n)return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if("CURRENT_DATE"===n)return String(this._date.getDate().valueOf()).padStart(2,"0");if("CURRENT_HOUR"===n)return String(this._date.getHours().valueOf()).padStart(2,"0");if("CURRENT_MINUTE"===n)return String(this._date.getMinutes().valueOf()).padStart(2,"0");if("CURRENT_SECOND"===n)return String(this._date.getSeconds().valueOf()).padStart(2,"0");if("CURRENT_DAY_NAME"===n)return e.dayNames[this._date.getDay()];if("CURRENT_DAY_NAME_SHORT"===n)return e.dayNamesShort[this._date.getDay()];if("CURRENT_MONTH_NAME"===n)return e.monthNames[this._date.getMonth()];if("CURRENT_MONTH_NAME_SHORT"===n)return e.monthNamesShort[this._date.getMonth()];if("CURRENT_SECONDS_UNIX"===n)return String(Math.floor(this._date.getTime()/1e3));if("CURRENT_TIMEZONE_OFFSET"===n){var i=this._date.getTimezoneOffset(),r=i>0?"-":"+",o=Math.trunc(Math.abs(i/60)),a=o<10?"0"+o:o,s=Math.abs(i)-60*o;return r+a+":"+(s<10?"0"+s:s)}}}]),e}();cfe.dayNames=[Xa("Sunday","Sunday"),Xa("Monday","Monday"),Xa("Tuesday","Tuesday"),Xa("Wednesday","Wednesday"),Xa("Thursday","Thursday"),Xa("Friday","Friday"),Xa("Saturday","Saturday")],cfe.dayNamesShort=[Xa("SundayShort","Sun"),Xa("MondayShort","Mon"),Xa("TuesdayShort","Tue"),Xa("WednesdayShort","Wed"),Xa("ThursdayShort","Thu"),Xa("FridayShort","Fri"),Xa("SaturdayShort","Sat")],cfe.monthNames=[Xa("January","January"),Xa("February","February"),Xa("March","March"),Xa("April","April"),Xa("May","May"),Xa("June","June"),Xa("July","July"),Xa("August","August"),Xa("September","September"),Xa("October","October"),Xa("November","November"),Xa("December","December")],cfe.monthNamesShort=[Xa("JanuaryShort","Jan"),Xa("FebruaryShort","Feb"),Xa("MarchShort","Mar"),Xa("AprilShort","Apr"),Xa("MayShort","May"),Xa("JuneShort","Jun"),Xa("JulyShort","Jul"),Xa("AugustShort","Aug"),Xa("SeptemberShort","Sep"),Xa("OctoberShort","Oct"),Xa("NovemberShort","Nov"),Xa("DecemberShort","Dec")];var dfe,hfe=function(){function e(t){u(this,e),this._workspaceService=t}return h(e,[{key:"resolve",value:function(e){if(this._workspaceService){var t=function(e){if("string"==typeof e||void 0===e)return"string"==typeof e?{id:jc(e)}:ZA;var t=e;return t.configuration?{id:t.id,configPath:t.configuration}:1===t.folders.length?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}(this._workspaceService.getWorkspace());if(!GA(t))return"WORKSPACE_NAME"===e.name?this._resolveWorkspaceName(t):"WORKSPACE_FOLDER"===e.name?this._resoveWorkspacePath(t):void 0}}},{key:"_resolveWorkspaceName",value:function(e){if(qA(e))return jc(e.uri.path);var t=jc(e.configPath.path);return t.endsWith(QA)&&(t=t.substr(0,t.length-14-1)),t}},{key:"_resoveWorkspacePath",value:function(e){if(qA(e))return nfe(e.uri.fsPath);var t=jc(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?nfe(n):"/"}}]),e}(),ffe=function(){function e(){u(this,e)}return h(e,[{key:"resolve",value:function(e){var t=e.name;return"RANDOM"===t?Math.random().toString().slice(-6):"RANDOM_HEX"===t?Math.random().toString(16).slice(-6):"UUID"===t?lte():void 0}}]),e}(),gfe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},vfe=function(e,t){return function(n,i){t(n,i,e)}},pfe=function(){function e(t,n,i){u(this,e),this._editor=t,this._snippet=n,this._snippetLineLeadingWhitespace=i,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=ia(n.placeholders,Bte.compareByIndex),this._placeholderGroupsIdx=-1}return h(e,[{key:"initialize",value:function(e){this._offset=e.newPosition}},{key:"dispose",value:function(){this._placeholderDecorations&&this._editor.removeDecorations(x(this._placeholderDecorations.values())),this._placeholderGroups.length=0}},{key:"_initDecorations",value:function(){var t=this;if(-1===this._offset)throw new Error("Snippet not initialized!");if(!this._placeholderDecorations){this._placeholderDecorations=new Map;var n=this._editor.getModel();this._editor.changeDecorations((function(i){var r=!0,o=!1,a=void 0;try{for(var s,l=t._snippet.placeholders[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=t._snippet.offset(u),d=t._snippet.fullLen(u),h=hd.fromPositions(n.getPositionAt(t._offset+c),n.getPositionAt(t._offset+c+d)),f=u.isFinalTabstop?e._decor.inactiveFinal:e._decor.inactive,g=i.addDecoration(h,f);t._placeholderDecorations.set(u,g)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}))}}},{key:"move",value:function(t){var n=this;if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=this._placeholderGroups[this._placeholderGroupsIdx][Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;if(u.transform){for(var c=this._placeholderDecorations.get(u),d=this._editor.getModel().getDecorationRange(c),h=this._editor.getModel().getValueInRange(d),f=u.transform.resolve(h).split(/\r\n|\r|\n/),g=1;g<f.length;g++)f[g]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+f[g]);i.push(lA.replace(d,f.join(this._editor.getModel().getEOL())))}}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}i.length>0&&this._editor.executeEdits("snippet.placeholderTransform",i)}var v=!1;!0===t&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,v=!0):!1===t&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,v=!0);var p=this._editor.getModel().changeDecorations((function(t){var i=new Set,r=[],o=!0,a=!1,s=void 0;try{for(var l,u=n._placeholderGroups[n._placeholderGroupsIdx][Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=n._placeholderDecorations.get(c),h=n._editor.getModel().getDecorationRange(d);r.push(new fd(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn)),v=v&&n._hasPlaceholderBeenCollapsed(c),t.changeDecorationOptions(d,c.isFinalTabstop?e._decor.activeFinal:e._decor.active),i.add(c);var f=!0,g=!1,p=void 0;try{for(var m,y=n._snippet.enclosingPlaceholders(c)[Symbol.iterator]();!(f=(m=y.next()).done);f=!0){var _=m.value,b=n._placeholderDecorations.get(_);t.changeDecorationOptions(b,_.isFinalTabstop?e._decor.activeFinal:e._decor.active),i.add(_)}}catch(e){g=!0,p=e}finally{try{f||null==y.return||y.return()}finally{if(g)throw p}}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var k=!0,w=!1,S=void 0;try{for(var x,L=n._placeholderDecorations[Symbol.iterator]();!(k=(x=L.next()).done);k=!0){var D=C(x.value,2),N=D[0],I=D[1];i.has(N)||t.changeDecorationOptions(I,N.isFinalTabstop?e._decor.inactiveFinal:e._decor.inactive)}}catch(e){w=!0,S=e}finally{try{k||null==L.return||L.return()}finally{if(w)throw S}}return r}));return v?this.move(t):null!=p?p:[]}},{key:"_hasPlaceholderBeenCollapsed",value:function(e){for(var t=e;t;){if(t instanceof Bte){var n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}},{key:"isAtFirstPlaceholder",get:function(){return this._placeholderGroupsIdx<=0||0===this._placeholderGroups.length}},{key:"isAtLastPlaceholder",get:function(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}},{key:"hasPlaceholder",get:function(){return this._snippet.placeholders.length>0}},{key:"isTrivialSnippet",get:function(){if(0===this._snippet.placeholders.length)return!0;if(1===this._snippet.placeholders.length){var e=C(this._snippet.placeholders,1),t=e[0];if(t.isFinalTabstop&&this._snippet.rightMostDescendant===t)return!0}return!1}},{key:"computePossibleSelections",value:function(){var e=new Map,t=!0,n=!1,i=void 0;try{for(var r,o=this._placeholderGroups[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=void 0,l=!0,u=!1,c=void 0;try{for(var d,h=a[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;if(f.isFinalTabstop)break;s||(s=[],e.set(f.index,s));var g=this._placeholderDecorations.get(f),v=this._editor.getModel().getDecorationRange(g);if(!v){e.delete(f.index);break}s.push(v)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}},{key:"activeChoice",get:function(){if(this._placeholderDecorations){var e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(null==e?void 0:e.choice){var t=this._placeholderDecorations.get(e);if(t){var n=this._editor.getModel().getDecorationRange(t);if(n)return{range:n,choice:e.choice}}}}}},{key:"hasChoice",get:function(){var e=!1;return this._snippet.walk((function(t){return e=t instanceof Hte,!e})),e}},{key:"merge",value:function(t){var n=this,i=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations((function(r){var o=!0,a=!1,s=void 0;try{for(var l,u=n._placeholderGroups[n._placeholderGroupsIdx][Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=t.shift();console.assert(-1!==d._offset),console.assert(!d._placeholderDecorations);var h=d._snippet.placeholderInfo.last.index,f=!0,g=!1,v=void 0;try{for(var p,m=d._snippet.placeholderInfo.all[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value;y.isFinalTabstop?y.index=c.index+(h+1)/n._nestingLevel:y.index=c.index+y.index/n._nestingLevel}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}n._snippet.replace(c,d._snippet.children);var _=n._placeholderDecorations.get(c);r.removeDecoration(_),n._placeholderDecorations.delete(c);var b=!0,k=!1,w=void 0;try{for(var C,S=d._snippet.placeholders[Symbol.iterator]();!(b=(C=S.next()).done);b=!0){var x=C.value,L=d._snippet.offset(x),D=d._snippet.fullLen(x),N=hd.fromPositions(i.getPositionAt(d._offset+L),i.getPositionAt(d._offset+L+D)),I=r.addDecoration(N,e._decor.inactive);n._placeholderDecorations.set(x,I)}}catch(e){k=!0,w=e}finally{try{b||null==S.return||S.return()}finally{if(k)throw w}}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}n._placeholderGroups=ia(n._snippet.placeholders,Bte.compareByIndex)}))}}]),e}();pfe._decor={active:cU.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:cU.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:cU.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:cU.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};var mfe={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},yfe=dfe=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mfe,r=arguments.length>3?arguments[3]:void 0;u(this,e),this._editor=t,this._template=n,this._options=i,this._languageConfigurationService=r,this._templateMerges=[],this._snippets=[]}return h(e,[{key:"dispose",value:function(){Iu(this._snippets)}},{key:"_logInfo",value:function(){return'template="'.concat(this._template,'", merged_templates="').concat(this._templateMerges.join(" -> "),'"')}},{key:"insert",value:function(){var e=this;if(this._editor.hasModel()){var t="string"==typeof this._template?dfe.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):dfe.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService),n=t.edits,i=t.snippets;this._snippets=i,this._editor.executeEdits("snippet",n,(function(t){for(var n=t.filter((function(e){return!!e.identifier})),r=0;r<i.length;r++)i[r].initialize(n[r].textChange);return e._snippets[0].hasPlaceholder?e._move(!0):n.map((function(e){return fd.fromPositions(e.range.getEndPosition())}))})),this._editor.revealRange(this._editor.getSelections()[0])}}},{key:"merge",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mfe;if(this._editor.hasModel()){this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);var i=dfe.createEditsAndSnippetsFromSelections(this._editor,e,n.overwriteBefore,n.overwriteAfter,!0,n.adjustWhitespace,n.clipboardText,n.overtypingCapturer,this._languageConfigurationService),r=i.edits,o=i.snippets;this._editor.executeEdits("snippet",r,(function(e){for(var n=e.filter((function(e){return!!e.identifier})),i=0;i<o.length;i++)o[i].initialize(n[i].textChange);var r=o[0].isTrivialSnippet;if(!r){var a=!0,s=!1,l=void 0;try{for(var u,c=t._snippets[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){u.value.merge(o)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}console.assert(0===o.length)}return t._snippets[0].hasPlaceholder&&!r?t._move(void 0):n.map((function(e){return fd.fromPositions(e.range.getEndPosition())}))}))}}},{key:"next",value:function(){var e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}},{key:"prev",value:function(){var e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}},{key:"_move",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=this._snippets[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s,l=o.value.move(e);(s=t).push.apply(s,x(l))}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}},{key:"isAtFirstPlaceholder",get:function(){return this._snippets[0].isAtFirstPlaceholder}},{key:"isAtLastPlaceholder",get:function(){return this._snippets[0].isAtLastPlaceholder}},{key:"hasPlaceholder",get:function(){return this._snippets[0].hasPlaceholder}},{key:"hasChoice",get:function(){return this._snippets[0].hasChoice}},{key:"activeChoice",get:function(){return this._snippets[0].activeChoice}},{key:"isSelectionWithinPlaceholders",value:function(){if(!this.hasPlaceholder)return!1;var e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;var t=new Map,n=!0,i=!1,r=void 0;try{for(var o,a=function(){var n=o.value.computePossibleSelections();if(0===t.size){var i=!0,r=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=C(s.value,2),c=u[0],d=u[1];d.sort(hd.compareRangesUsingStarts);var h=!0,f=!1,g=void 0;try{for(var v,p=e[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var m=v.value;if(d[0].containsRange(m)){t.set(c,[]);break}}}catch(e){f=!0,g=e}finally{try{h||null==p.return||p.return()}finally{if(f)throw g}}}}catch(e){r=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}}if(0===t.size)return{v:!1};t.forEach((function(e,t){var i;(i=e).push.apply(i,x(n.get(t)))}))},s=this._snippets[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=a();if("object"===L(l))return l.v}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}e.sort(hd.compareRangesUsingStarts);var u=!0,c=!1,d=void 0;try{for(var h,f=t[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=C(h.value,2),v=g[0],p=g[1];if(p.length===e.length){p.sort(hd.compareRangesUsingStarts);for(var m=0;m<p.length;m++)p[m].containsRange(e[m])||t.delete(v)}else t.delete(v)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}return t.size>0}}],[{key:"adjustWhitespace",value:function(e,t,n,i,r){var o,a=Jh(e.getLineContent(t.lineNumber),0,t.column-1);return i.walk((function(t){if(!(t instanceof Fte)||t.parent instanceof Hte)return!0;if(r&&!r.has(t))return!0;var s=t.value.split(/\r\n|\r|\n/);if(n){var l=i.offset(t);if(0===l)s[0]=e.normalizeIndentation(s[0]);else{var u=(o=null!=o?o:i.toString()).charCodeAt(l-1);10!==u&&13!==u||(s[0]=e.normalizeIndentation(a+s[0]))}for(var c=1;c<s.length;c++)s[c]=e.normalizeIndentation(a+s[c])}var d=s.join(e.getEOL());return d!==t.value&&(t.parent.replace(t,[new Fte(d)]),o=void 0),!0})),a}},{key:"adjustSelection",value:function(e,t,n,i){if(0!==n||0!==i){var r=t.positionLineNumber,o=t.positionColumn,a=o-n,s=o+i,l=e.validateRange({startLineNumber:r,startColumn:a,endLineNumber:r,endColumn:s});t=fd.createWithDirection(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn,t.getDirection())}return t}},{key:"createEditsAndSnippetsFromSelections",value:function(e,t,n,i,r,o,a,s,l){var u=[],c=[];if(!e.hasModel())return{edits:u,snippets:c};var d=e.getModel(),h=e.invokeWithinContext((function(e){return e.get(KA)})),f=e.invokeWithinContext((function(e){return new sfe(e.get(PA),d)})),g=function(){return a},v=d.getValueInRange(dfe.adjustSelection(d,e.getSelection(),n,0)),p=d.getValueInRange(dfe.adjustSelection(d,e.getSelection(),0,i)),m=d.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),y=e.getSelections().map((function(e,t){return{selection:e,idx:t}})).sort((function(e,t){return hd.compareRangesUsingStarts(e.selection,t.selection)})),_=!0,b=!1,k=void 0;try{for(var w,C=y[Symbol.iterator]();!(_=(w=C.next()).done);_=!0){var S=w.value,x=S.selection,L=S.idx,D=dfe.adjustSelection(d,x,n,0),N=dfe.adjustSelection(d,x,0,i);v!==d.getValueInRange(D)&&(D=x),p!==d.getValueInRange(N)&&(N=x);var I=x.setStartPosition(D.startLineNumber,D.startColumn).setEndPosition(N.endLineNumber,N.endColumn),E=(new qte).parse(t,!0,r),M=I.getStartPosition(),T=dfe.adjustWhitespace(d,M,o||L>0&&m!==d.getLineFirstNonWhitespaceColumn(x.positionLineNumber),E);E.resolveVariables(new ofe([f,new lfe(g,L,y.length,"spread"===e.getOption(79)),new afe(d,x,L,s),new ufe(d,x,l),new cfe,new hfe(h),new ffe])),u[L]=lA.replace(I,E.toString()),u[L].identifier={major:L,minor:0},u[L]._isTracked=!0,c[L]=new pfe(e,E,T)}}catch(e){b=!0,k=e}finally{try{_||null==C.return||C.return()}finally{if(b)throw k}}return{edits:u,snippets:c}}},{key:"createEditsAndSnippetsFromEdits",value:function(e,t,n,i,r,o,a){if(!e.hasModel()||0===t.length)return{edits:[],snippets:[]};var s=[],l=e.getModel(),u=new qte,c=new Kte,d=new ofe([e.invokeWithinContext((function(e){return new sfe(e.get(PA),l)})),new lfe((function(){return r}),0,e.getSelections().length,"spread"===e.getOption(79)),new afe(l,e.getSelection(),0,o),new ufe(l,e.getSelection(),a),new cfe,new hfe(e.invokeWithinContext((function(e){return e.get(KA)}))),new ffe]);t=t.sort((function(e,t){return hd.compareRangesUsingStarts(e.range,t.range)}));for(var h=0,f=0;f<t.length;f++){var g=t[f],v=g.range,p=g.template;if(f>0){var m=t[f-1].range,y=hd.fromPositions(m.getEndPosition(),v.getStartPosition()),_=new Fte(l.getValueInRange(y));c.appendChild(_),h+=_.value.length}var b=u.parseFragment(p,c);dfe.adjustWhitespace(l,v.getStartPosition(),!0,c,new Set(b)),c.resolveVariables(d);var k=c.toString(),w=k.slice(h);h=k.length;var C=lA.replace(v,w);C.identifier={major:f,minor:0},C._isTracked=!0,s.push(C)}return u.ensureFinalTabstop(c,n,!0),{edits:s,snippets:[new pfe(e,c,"")]}}}]),e}();yfe=dfe=gfe([vfe(3,Ek)],yfe);var _fe,bfe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},kfe=function(e,t){return function(n,i){t(n,i,e)}},wfe={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},Cfe=(sn=function(){function e(t,n,i,r,o){u(this,e),this._editor=t,this._logService=n,this._languageFeaturesService=i,this._languageConfigurationService=o,this._snippetListener=new Tu,this._modelVersionId=-1,this._inSnippet=_fe.InSnippetMode.bindTo(r),this._hasNextTabstop=_fe.HasNextTabstop.bindTo(r),this._hasPrevTabstop=_fe.HasPrevTabstop.bindTo(r)}return h(e,[{key:"dispose",value:function(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),null===(e=this._session)||void 0===e||e.dispose(),this._snippetListener.dispose()}},{key:"insert",value:function(e,t){try{this._doInsert(e,void 0===t?wfe:_({},wfe,t))}catch(t){this.cancel(),this._logService.error(t),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}},{key:"_doInsert",value:function(e,t){var n,i=this;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&"string"!=typeof e&&this.cancel(),this._session?(Oa("string"==typeof e),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new yfe(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),null===(n=this._session)||void 0===n?void 0:n.hasChoice){var r,o={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:function(e,t){if(i._session&&e===i._editor.getModel()&&dd.equals(i._editor.getPosition(),t)){var n=i._session.activeChoice;if(n&&0!==n.choice.options.length){for(var r=e.getValueInRange(n.range),o=Boolean(n.choice.options.find((function(e){return e.value===r}))),a=[],s=0;s<n.choice.options.length;s++){var l=n.choice.options[s];a.push({kind:13,label:l.value,insertText:l.value,sortText:"a".repeat(s+1),range:n.range,filterText:o?"".concat(r,"_").concat(l.value):void 0,command:{id:"jumpToNextSnippetPlaceholder",title:Xa("next","Go to next placeholder...")}})}return{suggestions:a}}}}},a=this._editor.getModel(),s=!1;this._choiceCompletions={provider:o,enable:function(){s||(r=i._languageFeaturesService.completionProvider.register({language:a.getLanguageId(),pattern:a.uri.fsPath,scheme:a.uri.scheme,exclusive:!0},o),i._snippetListener.add(r),s=!0)},disable:function(){null==r||r.dispose(),s=!1}}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent((function(e){return e.isFlush&&i.cancel()}))),this._snippetListener.add(this._editor.onDidChangeModel((function(){return i.cancel()}))),this._snippetListener.add(this._editor.onDidChangeCursorSelection((function(){return i._updateState()})))}}},{key:"_updateState",value:function(){if(this._session&&this._editor.hasModel()){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}},{key:"_handleChoice",value:function(){var e=this;if(this._session&&this._editor.hasModel()){var t,n=this._session.activeChoice;if(!n||!this._choiceCompletions)return null===(t=this._choiceCompletions)||void 0===t||t.disable(),void(this._currentChoice=void 0);this._currentChoice!==n.choice&&(this._currentChoice=n.choice,this._choiceCompletions.enable(),queueMicrotask((function(){!function(e,t){var n;null===(n=e.getContribution("editor.contrib.suggestController"))||void 0===n||n.triggerSuggest((new Set).add(t),void 0,!0)}(e._editor,e._choiceCompletions.provider)})))}else this._currentChoice=void 0}},{key:"finish",value:function(){for(;this._inSnippet.get();)this.next()}},{key:"cancel",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,null===(e=this._session)||void 0===e||e.dispose(),this._session=void 0,this._modelVersionId=-1,t&&this._editor.setSelections([this._editor.getSelection()])}},{key:"prev",value:function(){var e;null===(e=this._session)||void 0===e||e.prev(),this._updateState()}},{key:"next",value:function(){var e;null===(e=this._session)||void 0===e||e.next(),this._updateState()}},{key:"isInSnippet",value:function(){return Boolean(this._inSnippet.get())}}],[{key:"get",value:function(e){return e.getContribution(_fe.ID)}}]),e}(),_fe=sn,sn.ID="snippetController2",sn.InSnippetMode=new jy("inSnippetMode",!1,Xa("inSnippetMode","Whether the editor in current in snippet mode")),sn.HasNextTabstop=new jy("hasNextTabstop",!1,Xa("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),sn.HasPrevTabstop=new jy("hasPrevTabstop",!1,Xa("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),sn);B_((Cfe=_fe=bfe([kfe(1,k_),kfe(2,wS),kfe(3,Ky),kfe(4,Ek)],Cfe)).ID,Cfe,4);var Sfe=E_.bindToContribution(Cfe.get);P_(new Sfe({id:"jumpToNextSnippetPlaceholder",precondition:Sy.and(Cfe.InSnippetMode,Cfe.HasNextTabstop),handler:function(e){return e.next()},kbOpts:{weight:130,kbExpr:p0.textInputFocus,primary:2}})),P_(new Sfe({id:"jumpToPrevSnippetPlaceholder",precondition:Sy.and(Cfe.InSnippetMode,Cfe.HasPrevTabstop),handler:function(e){return e.prev()},kbOpts:{weight:130,kbExpr:p0.textInputFocus,primary:1026}})),P_(new Sfe({id:"leaveSnippet",precondition:Cfe.InSnippetMode,handler:function(e){return e.cancel(!0)},kbOpts:{weight:130,kbExpr:p0.textInputFocus,primary:9,secondary:[1033]}})),P_(new Sfe({id:"acceptSnippet",precondition:Cfe.InSnippetMode,handler:function(e){return e.finish()}}));var xfe,Lfe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Dfe=function(e,t){return function(n,i){t(n,i,e)}},Nfe=function(e){function t(e,n,i,r,o,a,s,c,d,h,f,g){var v;u(this,t),(v=l(this,t)).textModel=e,v.selectedSuggestItem=n,v._textModelVersionId=i,v._positions=r,v._debounceValue=o,v._suggestPreviewEnabled=a,v._suggestPreviewMode=s,v._inlineSuggestMode=c,v._enabled=d,v._instantiationService=h,v._commandService=f,v._languageConfigurationService=g,v._source=v._register(v._instantiationService.createInstance(Whe,v.textModel,v._textModelVersionId,v._debounceValue)),v._isActive=BP(v,!1),v._forceUpdateExplicitlySignal=lO(v),v._selectedInlineCompletionId=BP(v,void 0),v._primaryPosition=UP(v,(function(e){var t;return null!==(t=v._positions.read(e)[0])&&void 0!==t?t:new dd(1,1)})),v._isAcceptingPartially=!1,v._preserveCurrentCompletionReasons=new Set([xfe.Redo,xfe.Undo,xfe.AcceptWord]),v._fetchInlineCompletionsPromise=qP({owner:v,createEmptyChangeSummary:function(){return{preserveCurrentCompletion:!1,inlineCompletionTriggerKind:_d.Automatic}},handleChange:function(e,t){return e.didChange(v._textModelVersionId)&&v._preserveCurrentCompletionReasons.has(v._getReason(e.change))?t.preserveCurrentCompletion=!0:e.didChange(v._forceUpdateExplicitlySignal)&&(t.inlineCompletionTriggerKind=_d.Explicit),!0}},(function(e,t){if(v._forceUpdateExplicitlySignal.read(e),v._enabled.read(e)&&v.selectedSuggestItem.read(e)||v._isActive.read(e)){v._textModelVersionId.read(e);var n=v._source.suggestWidgetInlineCompletions.get(),i=v.selectedSuggestItem.read(e);if(n&&!i){var r=v._source.inlineCompletions.get();TP((function(e){(!r||n.request.versionId>r.request.versionId)&&v._source.inlineCompletions.set(n.clone(),e),v._source.clearSuggestWidgetInlineCompletions(e)}))}var o=v._primaryPosition.read(e),a={triggerKind:t.inlineCompletionTriggerKind,selectedSuggestionInfo:null==i?void 0:i.toSelectedSuggestionInfo()},s=v.selectedInlineCompletion.get(),l=t.preserveCurrentCompletion||(null==s?void 0:s.forwardStable)?s:void 0;return v._source.fetch(o,a,l)}v._source.cancelUpdate()})),v._filteredInlineCompletionItems=KP({owner:v,equalsFn:yP()},(function(e){var t=v._source.inlineCompletions.read(e);if(!t)return[];var n=v._primaryPosition.read(e),i=t.inlineCompletions.filter((function(t){return t.isVisible(v.textModel,n,e)}));return i})),v.selectedInlineCompletionIndex=UP(v,(function(e){var t=v._selectedInlineCompletionId.read(e),n=v._filteredInlineCompletionItems.read(e),i=void 0===v._selectedInlineCompletionId?-1:n.findIndex((function(e){return e.semanticId===t}));return-1===i?(v._selectedInlineCompletionId.set(void 0,void 0),0):i})),v.selectedInlineCompletion=UP(v,(function(e){return v._filteredInlineCompletionItems.read(e)[v.selectedInlineCompletionIndex.read(e)]})),v.activeCommands=KP({owner:v,equalsFn:yP()},(function(e){var t,n;return null!==(n=null===(t=v.selectedInlineCompletion.read(e))||void 0===t?void 0:t.inlineCompletion.source.inlineCompletions.commands)&&void 0!==n?n:[]})),v.lastTriggerKind=v._source.inlineCompletions.map(v,(function(e){return null==e?void 0:e.request.context.triggerKind})),v.inlineCompletionsCount=UP(v,(function(e){return v.lastTriggerKind.read(e)===_d.Explicit?v._filteredInlineCompletionItems.read(e).length:void 0})),v.state=KP({owner:v,equalsFn:function(e,t){return e&&t?dhe(e.ghostTexts,t.ghostTexts)&&e.inlineCompletion===t.inlineCompletion&&e.suggestItem===t.suggestItem:e===t}},(function(e){var t=v.textModel,n=v.selectedSuggestItem.read(e);if(n){var i,r=Ehe(n.toSingleTextEdit(),t),o=v._computeAugmentation(r,e);if(!v._suggestPreviewEnabled.read(e)&&!o)return;var a,s=null!==(i=null==o?void 0:o.edit)&&void 0!==i?i:r,l=o?o.edit.text.length-r.text.length:0,u=v._suggestPreviewMode.read(e),c=v._positions.read(e),d=[s].concat(x(Ife(v.textModel,c,s))),h=d.map((function(e,n){return The(e,t,u,c[n],l)})).filter(Aa);return{edits:d,primaryGhostText:null!==(a=h[0])&&void 0!==a?a:new lhe(s.range.endLineNumber,[]),ghostTexts:h,inlineCompletion:null==o?void 0:o.completion,suggestItem:n}}if(v._isActive.read(e)){var f=v.selectedInlineCompletion.read(e);if(f){var g=f.toSingleTextEdit(e),p=v._inlineSuggestMode.read(e),m=v._positions.read(e),y=[g].concat(x(Ife(v.textModel,m,g))),_=y.map((function(e,n){return The(e,t,p,m[n],0)})).filter(Aa);if(_[0])return{edits:y,primaryGhostText:_[0],ghostTexts:_,inlineCompletion:f,suggestItem:void 0}}}})),v.ghostTexts=KP({owner:v,equalsFn:dhe},(function(e){var t=v.state.read(e);if(t)return t.ghostTexts})),v.primaryGhostText=KP({owner:v,equalsFn:hhe},(function(e){var t=v.state.read(e);if(t)return null==t?void 0:t.primaryGhostText})),v._register(cO(v._fetchInlineCompletionsPromise));var p=void 0;return v._register(XP((function(e){var t=v.state.read(e),n=null==t?void 0:t.inlineCompletion;if((null==n?void 0:n.semanticId)!==(null==p?void 0:p.semanticId)&&(p=n,n)){var i,r,o=n.inlineCompletion,a=o.source;null===(i=(r=a.provider).handleItemDidShow)||void 0===i||i.call(r,a.inlineCompletions,o.sourceInlineCompletion,o.insertText)}}))),v}return p(t,e),h(t,[{key:"isAcceptingPartially",get:function(){return this._isAcceptingPartially}},{key:"_getReason",value:function(e){return(null==e?void 0:e.isUndoing)?xfe.Undo:(null==e?void 0:e.isRedoing)?xfe.Redo:this.isAcceptingPartially?xfe.AcceptWord:xfe.Other}},{key:"trigger",value:function(e){var t=this;return s((function(){return E(this,(function(n){switch(n.label){case 0:return t._isActive.set(!0,e),[4,t._fetchInlineCompletionsPromise.get()];case 1:return n.sent(),[2]}}))}))()}},{key:"triggerExplicitly",value:function(e){var t=this;return s((function(){return E(this,(function(n){switch(n.label){case 0:return FP(e,(function(e){t._isActive.set(!0,e),t._forceUpdateExplicitlySignal.trigger(e)})),[4,t._fetchInlineCompletionsPromise.get()];case 1:return n.sent(),[2]}}))}))()}},{key:"stop",value:function(e){var t=this;FP(e,(function(e){t._isActive.set(!1,e),t._source.clear(e)}))}},{key:"_computeAugmentation",value:function(e,t){var n=this.textModel,i=this._source.suggestWidgetInlineCompletions.read(t),r=function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=t(o.value);if(void 0!==s)return s}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}(i?i.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(Aa),(function(i){var r=i.toSingleTextEdit(t);return Mhe(r=Ehe(r,n,hd.fromPositions(r.range.getStartPosition(),e.range.getEndPosition())),e)?{completion:i,edit:r}:void 0}));return r}},{key:"_deltaSelectedInlineCompletionIndex",value:function(e){var t=this;return s((function(){var n,i;return E(this,(function(r){switch(r.label){case 0:return[4,t.triggerExplicitly()];case 1:return r.sent(),(n=t._filteredInlineCompletionItems.get()||[]).length>0?(i=(t.selectedInlineCompletionIndex.get()+e+n.length)%n.length,t._selectedInlineCompletionId.set(n[i].semanticId,void 0)):t._selectedInlineCompletionId.set(void 0,void 0),[2]}}))}))()}},{key:"next",value:function(){var e=this;return s((function(){return E(this,(function(t){switch(t.label){case 0:return[4,e._deltaSelectedInlineCompletionIndex(1)];case 1:return t.sent(),[2]}}))}))()}},{key:"previous",value:function(){var e=this;return s((function(){return E(this,(function(t){switch(t.label){case 0:return[4,e._deltaSelectedInlineCompletionIndex(-1)];case 1:return t.sent(),[2]}}))}))()}},{key:"accept",value:function(e){var t=this;return s((function(){var n,i,r,o,a,s;return E(this,(function(l){switch(l.label){case 0:if(e.getModel()!==t.textModel)throw new Lu;return(n=t.state.get())&&!n.primaryGhostText.isEmpty()&&n.inlineCompletion?((i=n.inlineCompletion.toInlineCompletion(void 0)).command&&i.source.addRef(),e.pushUndoStop(),i.snippetInfo?(e.executeEdits("inlineSuggestion.accept",[lA.replace(i.range,"")].concat(x(i.additionalTextEdits))),e.setPosition(i.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),null===(r=Cfe.get(e))||void 0===r||r.insert(i.snippetInfo.snippet,{undoStopBefore:!1})):(o=n.edits,a=Efe(o).map((function(e){return fd.fromPositions(e)})),e.executeEdits("inlineSuggestion.accept",x(o.map((function(e){return lA.replace(e.range,e.text)}))).concat(x(i.additionalTextEdits))),e.setSelections(a,"inlineCompletionAccept")),t.stop(),i.command?[4,(s=t._commandService).executeCommand.apply(s,[i.command.id].concat(x(i.command.arguments||[]))).then(void 0,pu)]:[3,2]):[2];case 1:l.sent(),i.source.removeRef(),l.label=2;case 2:return[2]}}))}))()}},{key:"acceptNextWord",value:function(e){var t=this;return s((function(){return E(this,(function(n){switch(n.label){case 0:return[4,t._acceptNext(e,(function(e,n){var i=t.textModel.getLanguageIdAtPosition(e.lineNumber,e.column),r=t._languageConfigurationService.getLanguageConfiguration(i),o=new RegExp(r.wordDefinition.source,r.wordDefinition.flags.replace("g","")),a=n.match(o),s=0;s=a&&void 0!==a.index?0===a.index?a[0].length:a.index:n.length;var l=/\s+/g.exec(n);return l&&void 0!==l.index&&l.index+l[0].length<s&&(s=l.index+l[0].length),s}),0)];case 1:return n.sent(),[2]}}))}))()}},{key:"acceptNextLine",value:function(e){var t=this;return s((function(){return E(this,(function(n){switch(n.label){case 0:return[4,t._acceptNext(e,(function(e,t){var n=t.match(/\n/);return n&&void 0!==n.index?n.index+1:t.length}),1)];case 1:return n.sent(),[2]}}))}))()}},{key:"_acceptNext",value:function(e,t,n){var i=this;return s((function(){var r,o,a,s,l,u,c,d,h,f,g,v,p,m,y,_,b;return E(this,(function(k){switch(k.label){case 0:if(e.getModel()!==i.textModel)throw new Lu;return(r=i.state.get())&&!r.primaryGhostText.isEmpty()&&r.inlineCompletion?(o=r.primaryGhostText,(a=r.inlineCompletion.toInlineCompletion(void 0)).snippetInfo||a.filterText!==a.insertText?[4,i.accept(e)]:[3,2]):[2];case 1:return k.sent(),[2];case 2:if(s=o.parts[0],l=new dd(o.lineNumber,s.column),u=s.text,(c=t(l,u))===u.length&&1===o.parts.length)return i.accept(e),[2];d=u.substring(0,c),h=i._positions.get(),f=h[0],a.source.addRef();try{i._isAcceptingPartially=!0;try{e.pushUndoStop(),g=hd.fromPositions(f,l),v=e.getModel().getValueInRange(g)+d,p=new $w(g,v),m=[p].concat(x(Ife(i.textModel,h,p))),y=Efe(m).map((function(e){return fd.fromPositions(e)})),e.executeEdits("inlineSuggestion.accept",m.map((function(e){return lA.replace(e.range,e.text)}))),e.setSelections(y,"inlineCompletionPartialAccept"),e.revealPositionInCenterIfOutsideViewport(e.getPosition(),1)}finally{i._isAcceptingPartially=!1}a.source.provider.handlePartialAccept&&(_=hd.fromPositions(a.range.getStartPosition(),Yw.ofText(d).addToPosition(l)),b=e.getModel().getValueInRange(_,1),a.source.provider.handlePartialAccept(a.source.inlineCompletions,a.sourceInlineCompletion,b.length,{kind:n}))}finally{a.source.removeRef()}return[2]}}))}))()}},{key:"handleSuggestAccepted",value:function(e){var t,n,i=Ehe(e.toSingleTextEdit(),this.textModel),r=this._computeAugmentation(i,void 0);if(r){var o=r.completion.inlineCompletion;null===(t=(n=o.source.provider).handlePartialAccept)||void 0===t||t.call(n,o.source.inlineCompletions,o.sourceInlineCompletion,i.text.length,{kind:2})}}}]),t}(Ru);function Ife(e,t,n){if(1===t.length)return[];var i=t[0],r=t.slice(1),o=n.range.getStartPosition(),a=n.range.getEndPosition(),s=e.getValueInRange(hd.fromPositions(i,a)),l=phe(i,o);if(l.lineNumber<1)return vu(new Lu("positionWithinTextEdit line number should be bigger than 0.\n\t\t\tInvalid subtraction between ".concat(i.toString()," and ").concat(o.toString()))),[];var u=function(e,t){for(var n="",i=function(e){for(var t=[],n=e.split(/(\r\n|\r|\n)/),i=0;i<Math.ceil(n.length/2);i++){var r;t.push(n[2*i]+(null!==(r=n[2*i+1])&&void 0!==r?r:""))}return t}(e),r=t.lineNumber-1;r<i.length;r++)n+=i[r].substring(r===t.lineNumber-1?t.column-1:0);return n}(n.text,l);return r.map((function(t){var n=function(e,t){return new dd(e.lineNumber+t.lineNumber-1,1===t.lineNumber?e.column+t.column-1:t.column)}(phe(t,o),a),i=e.getValueInRange(hd.fromPositions(t,n)),r=df(s,i),l=hd.fromPositions(t,t.delta(0,r));return new $w(l,u)}))}function Efe(e){var t=La.createSortPermutation(e,ba((function(e){return e.range}),hd.compareRangesUsingStarts)),n=new Xw(t.apply(e)).getNewRanges();return t.inverse().apply(n).map((function(e){return e.getEndPosition()}))}Nfe=Lfe([Dfe(9,Gm),Dfe(10,ay),Dfe(11,Ek)],Nfe),function(e){e[e.Undo=0]="Undo",e[e.Redo=1]="Redo",e[e.AcceptWord=2]="AcceptWord",e[e.Other=3]="Other"}(xfe||(xfe={}));var Mfe,Tfe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Rfe=function(e,t){return function(n,i){t(n,i,e)}},Afe=function(){function e(t){u(this,e),this.name=t}return h(e,[{key:"select",value:function(e,t,n){if(0===n.length)return 0;for(var i=n[0].score[0],r=0;r<n.length;r++){var o=n[r],a=o.score,s=o.completion;if(a[0]!==i)break;if(s.preselect)return r}return 0}}]),e}(),Pfe=function(e){function t(){return u(this,t),l(this,t,["first"])}return p(t,e),h(t,[{key:"memorize",value:function(e,t,n){}},{key:"toJSON",value:function(){}},{key:"fromJSON",value:function(){}}]),t}(Afe),Ofe=function(e){function t(){var e;return u(this,t),(e=l(this,t,["recentlyUsed"]))._cache=new pw(300,.66),e._seq=0,e}return p(t,e),h(t,[{key:"memorize",value:function(e,t,n){var i="".concat(e.getLanguageId(),"/").concat(n.textLabel);this._cache.set(i,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}},{key:"select",value:function(e,n,i){if(0===i.length)return 0;var r=e.getLineContent(n.lineNumber).substr(n.column-10,n.column-1);if(/\s$/.test(r))return g(v(t.prototype),"select",this).call(this,e,n,i);for(var o=i[0].score[0],a=-1,s=-1,l=-1,u=0;u<i.length&&i[u].score[0]===o;u++){var c="".concat(e.getLanguageId(),"/").concat(i[u].textLabel),d=this._cache.peek(c);if(d&&d.touch>l&&d.type===i[u].completion.kind&&d.insertText===i[u].completion.insertText&&(l=d.touch,s=u),i[u].completion.preselect&&-1===a)return u}return-1!==s?s:-1!==a?a:0}},{key:"toJSON",value:function(){return this._cache.toJSON()}},{key:"fromJSON",value:function(e){this._cache.clear();var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=C(r.value,2),s=a[0],l=a[1];l.touch=0,l.type="number"==typeof l.type?l.type:yd.fromString(l.type),this._cache.set(s,l)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}this._seq=this._cache.size}}]),t}(Afe),Ffe=function(e){function t(){var e;return u(this,t),(e=l(this,t,["recentlyUsedByPrefix"]))._trie=jA.forStrings(),e._seq=0,e}return p(t,e),h(t,[{key:"memorize",value:function(e,t,n){var i=e.getWordUntilPosition(t).word,r="".concat(e.getLanguageId(),"/").concat(i);this._trie.set(r,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}},{key:"select",value:function(e,n,i){var r=e.getWordUntilPosition(n).word;if(!r)return g(v(t.prototype),"select",this).call(this,e,n,i);var o="".concat(e.getLanguageId(),"/").concat(r),a=this._trie.get(o);if(a||(a=this._trie.findSubstr(o)),a)for(var s=0;s<i.length;s++){var l=i[s].completion,u=l.kind,c=l.insertText;if(u===a.type&&c===a.insertText)return s}return g(v(t.prototype),"select",this).call(this,e,n,i)}},{key:"toJSON",value:function(){var e=[];return this._trie.forEach((function(t,n){return e.push([n,t])})),e.sort((function(e,t){return-(e[1].touch-t[1].touch)})).forEach((function(e,t){return e[1].touch=t})),e.slice(0,200)}},{key:"fromJSON",value:function(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=C(r.value,2),s=a[0],l=a[1];l.type="number"==typeof l.type?l.type:yd.fromString(l.type),this._trie.set(s,l)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}}]),t}(Afe),Wfe=(ln=function(){function e(t,n){var i=this;u(this,e),this._storageService=t,this._configService=n,this._disposables=new Tu,this._persistSoon=new Sg((function(){return i._saveState()}),500),this._disposables.add(t.onWillSaveState((function(e){e.reason===OF.SHUTDOWN&&i._saveState()})))}return h(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._persistSoon.dispose()}},{key:"memorize",value:function(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}},{key:"select",value:function(e,t,n){return this._withStrategy(e,t).select(e,t,n)}},{key:"_withStrategy",value:function(e,t){var n,i=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if((null===(n=this._strategy)||void 0===n?void 0:n.name)!==i){this._saveState();var r=Mfe._strategyCtors.get(i)||Pfe;this._strategy=new r;try{var o=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,a=this._storageService.get("".concat(Mfe._storagePrefix,"/").concat(i),o);a&&this._strategy.fromJSON(JSON.parse(a))}catch(e){}}return this._strategy}},{key:"_saveState",value:function(){if(this._strategy){var e=this._configService.getValue("editor.suggest.shareSuggestSelections"),t=e?0:1,n=JSON.stringify(this._strategy);this._storageService.store("".concat(Mfe._storagePrefix,"/").concat(this._strategy.name),n,t,1)}}}]),e}(),Mfe=ln,ln._strategyCtors=new Map([["recentlyUsedByPrefix",Ffe],["recentlyUsed",Ofe],["first",Pfe]]),ln._storagePrefix="suggest/memories",ln);Wfe=Mfe=Tfe([Rfe(0,BF),Rfe(1,qb)],Wfe);var Bfe=Zm("ISuggestMemories");nk(Bfe,Wfe,1);var Hfe,Vfe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},zfe=function(e,t){return function(n,i){t(n,i,e)}},Ufe=(un=function(){function e(t,n){var i=this;u(this,e),this._editor=t,this._enabled=!1,this._ckAtEnd=Hfe.AtEnd.bindTo(n),this._configListener=this._editor.onDidChangeConfiguration((function(e){return e.hasChanged(124)&&i._update()})),this._update()}return h(e,[{key:"dispose",value:function(){var e;this._configListener.dispose(),null===(e=this._selectionListener)||void 0===e||e.dispose(),this._ckAtEnd.reset()}},{key:"_update",value:function(){var e=this,t="on"===this._editor.getOption(124);if(this._enabled!==t)if(this._enabled=t,this._enabled){var n=function(){if(e._editor.hasModel()){var t=e._editor.getModel(),n=e._editor.getSelection(),i=t.getWordAtPosition(n.getStartPosition());i?e._ckAtEnd.set(i.endColumn===n.getStartPosition().column):e._ckAtEnd.set(!1)}else e._ckAtEnd.set(!1)};this._selectionListener=this._editor.onDidChangeCursorSelection(n),n()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}}]),e}(),Hfe=un,un.AtEnd=new jy("atEndOfWord",!1),un);Ufe=Hfe=Vfe([zfe(1,Ky)],Ufe);var jfe,Kfe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},qfe=function(e,t){return function(n,i){t(n,i,e)}},Gfe=(cn=function(){function e(t,n){u(this,e),this._editor=t,this._index=0,this._ckOtherSuggestions=jfe.OtherSuggestions.bindTo(n)}return h(e,[{key:"dispose",value:function(){this.reset()}},{key:"reset",value:function(){var e;this._ckOtherSuggestions.reset(),null===(e=this._listener)||void 0===e||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}},{key:"set",value:function(e,t){var n=this,i=e.model,r=e.index;0!==i.items.length?jfe._moveIndex(!0,i,r)!==r?(this._acceptNext=t,this._model=i,this._index=r,this._listener=this._editor.onDidChangeCursorPosition((function(){n._ignore||n.reset()})),this._ckOtherSuggestions.set(!0)):this.reset():this.reset()}},{key:"next",value:function(){this._move(!0)}},{key:"prev",value:function(){this._move(!1)}},{key:"_move",value:function(e){if(this._model)try{this._ignore=!0,this._index=jfe._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}}],[{key:"_moveIndex",value:function(e,t,n){for(var i=n,r=t.items.length;r>0&&(i=(i+t.items.length+(e?1:-1))%t.items.length)!==n&&t.items[i].completion.additionalTextEdits;r--);return i}}]),e}(),jfe=cn,cn.OtherSuggestions=new jy("hasOtherSuggestions",!1),cn);Gfe=jfe=Kfe([qfe(1,Ky)],Gfe);var Zfe=function(){function e(t,n,i,r){var o=this;u(this,e),this._disposables=new Tu,this._disposables.add(i.onDidSuggest((function(e){0===e.completionModel.items.length&&o.reset()}))),this._disposables.add(i.onDidCancel((function(e){o.reset()}))),this._disposables.add(n.onDidShow((function(){return o._onItem(n.getFocusedItem())}))),this._disposables.add(n.onDidFocus(this._onItem,this)),this._disposables.add(n.onDidHide(this.reset,this)),this._disposables.add(t.onWillType((function(e){if(o._active&&!n.isFrozen()&&0!==i.state){var a=e.charCodeAt(e.length-1);o._active.acceptCharacters.has(a)&&t.getOption(0)&&r(o._active.item)}})))}return h(e,[{key:"_onItem",value:function(e){if(e&&ua(e.item.completion.commitCharacters)){if(!this._active||this._active.item.item!==e.item){var t=new Xk,n=!0,i=!1,r=void 0;try{for(var o,a=e.item.completion.commitCharacters[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.length>0&&t.add(s.charCodeAt(0))}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this._active={acceptCharacters:t,item:e}}}else this.reset()}},{key:"reset",value:function(){this._active=void 0}},{key:"dispose",value:function(){this._disposables.dispose()}}]),e}(),Yfe=function(){function e(){u(this,e)}return h(e,[{key:"provideSelectionRanges",value:function(t,n){return s((function(){var i,r,o,a,s,l,u,c;return E(this,(function(d){switch(d.label){case 0:i=[],r=!0,o=!1,a=void 0,d.label=1;case 1:d.trys.push([1,6,7,8]),s=function(){var n,r,o;return E(this,(function(a){switch(a.label){case 0:return n=u.value,r=[],i.push(r),o=new Map,[4,new Promise((function(i){return e._bracketsRightYield(i,0,t,n,o)}))];case 1:return a.sent(),[4,new Promise((function(i){return e._bracketsLeftYield(i,0,t,n,o,r)}))];case 2:return a.sent(),[2]}}))},l=n[Symbol.iterator](),d.label=2;case 2:return(r=(u=l.next()).done)?[3,5]:[5,M(s())];case 3:d.sent(),d.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return c=d.sent(),o=!0,a=c,[3,8];case 7:try{r||null==l.return||l.return()}finally{if(o)throw a}return[7];case 8:return[2,i]}}))}))()}}],[{key:"_bracketsRightYield",value:function(t,n,i,r,o){for(var a=new Map,s=Date.now();;){if(n>=e._maxRounds){t();break}if(!r){t();break}var l=i.bracketPairs.findNextBracket(r);if(!l){t();break}if(Date.now()-s>e._maxDuration){setTimeout((function(){return e._bracketsRightYield(t,n+1,i,r,o)}));break}if(l.bracketInfo.isOpeningBracket){var u=l.bracketInfo.bracketText,c=a.has(u)?a.get(u):0;a.set(u,c+1)}else{var d=l.bracketInfo.getOpeningBrackets()[0].bracketText,h=a.has(d)?a.get(d):0;if(h-=1,a.set(d,Math.max(0,h)),h<0){var f=o.get(d);f||(f=new Hs,o.set(d,f)),f.push(l.range)}}r=l.range.getEndPosition()}}},{key:"_bracketsLeftYield",value:function(t,n,i,r,o,a){for(var s=new Map,l=Date.now();;){if(n>=e._maxRounds&&0===o.size){t();break}if(!r){t();break}var u=i.bracketPairs.findPrevBracket(r);if(!u){t();break}if(Date.now()-l>e._maxDuration){setTimeout((function(){return e._bracketsLeftYield(t,n+1,i,r,o,a)}));break}if(u.bracketInfo.isOpeningBracket){var c=u.bracketInfo.bracketText,d=s.has(c)?s.get(c):0;if(d-=1,s.set(c,Math.max(0,d)),d<0){var h=o.get(c);if(h){var f=h.shift();0===h.size&&o.delete(c);var g=hd.fromPositions(u.range.getEndPosition(),f.getStartPosition()),v=hd.fromPositions(u.range.getStartPosition(),f.getEndPosition());a.push({range:g}),a.push({range:v}),e._addBracketLeading(i,v,a)}}}else{var p=u.bracketInfo.getOpeningBrackets()[0].bracketText,m=s.has(p)?s.get(p):0;s.set(p,m+1)}r=u.range.getStartPosition()}}},{key:"_addBracketLeading",value:function(e,t,n){if(t.startLineNumber!==t.endLineNumber){var i=t.startLineNumber,r=e.getLineFirstNonWhitespaceColumn(i);0!==r&&r!==t.startColumn&&(n.push({range:hd.fromPositions(new dd(i,r),t.getEndPosition())}),n.push({range:hd.fromPositions(new dd(i,1),t.getEndPosition())}));var o=i-1;if(o>0){var a=e.getLineFirstNonWhitespaceColumn(o);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(o)&&(n.push({range:hd.fromPositions(new dd(o,a),t.getEndPosition())}),n.push({range:hd.fromPositions(new dd(o,1),t.getEndPosition())}))}}}}]),e}();Yfe._maxDuration=30,Yfe._maxRounds=2;var Qfe=function(){function e(){u(this,e)}return h(e,null,[{key:"create",value:function(t,n){return s((function(){var i,r,o,a,s,c;return E(this,(function(d){switch(d.label){case 0:return n.getOption(119).localityBonus&&n.hasModel()?(i=n.getModel(),r=n.getPosition(),t.canComputeWordRanges(i.uri)?[4,(new Yfe).provideSelectionRanges(i,[r])]:[2,e.None]):[2,e.None];case 1:return o=C.apply(void 0,[d.sent(),1]),0===(a=o[0]).length?[2,e.None]:[4,t.computeWordRanges(i.uri,a[0].range)];case 2:return(s=d.sent())?(c=i.getWordUntilPosition(r),delete s[c.word],[2,new(function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"distance",value:function(e,t){if(!r.equals(n.getPosition()))return 0;if(17===t.kind)return 2<<20;var i="string"==typeof t.label?t.label:t.label.label,o=s[i];if(la(o))return 2<<20;var l=ta(o,hd.fromPositions(e),hd.compareRangesUsingStarts),u=l>=0?o[l]:o[Math.max(0,~l-1)],c=a.length,d=!0,h=!1,f=void 0;try{for(var g,v=a[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;if(!hd.containsRange(p.range,u))break;c-=1}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}return c}}]),t}(e))]):[2,e.None]}}))}))()}}]),e}();Qfe.None=new(function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"distance",value:function(){return 0}}]),t}(Qfe));var Xfe,$fe=function e(t,n){u(this,e),this.leadingLineContent=t,this.characterCountDelta=n},Jfe=function(){function e(t,n,i,r,o,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:MM.default,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;u(this,e),this.clipboardText=l,this._snippetCompareFn=e._compareCompletionItems,this._items=t,this._column=n,this._wordDistance=r,this._options=o,this._refilterKind=1,this._lineContext=i,this._fuzzyScoreOptions=s,"top"===a?this._snippetCompareFn=e._compareCompletionItemsSnippetsUp:"bottom"===a&&(this._snippetCompareFn=e._compareCompletionItemsSnippetsDown)}return h(e,[{key:"lineContext",get:function(){return this._lineContext},set:function(e){this._lineContext.leadingLineContent===e.leadingLineContent&&this._lineContext.characterCountDelta===e.characterCountDelta||(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}},{key:"items",get:function(){return this._ensureCachedState(),this._filteredItems}},{key:"getItemsByProvider",value:function(){return this._ensureCachedState(),this._itemsByProvider}},{key:"getIncompleteProvider",value:function(){this._ensureCachedState();var e=new Set,t=!0,n=!1,i=void 0;try{for(var r,o=this.getItemsByProvider()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=C(r.value,2),s=a[0],l=a[1];l.length>0&&l[0].container.incomplete&&e.add(s)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}},{key:"stats",get:function(){return this._ensureCachedState(),this._stats}},{key:"_ensureCachedState",value:function(){0!==this._refilterKind&&this._createCachedState()}},{key:"_createCachedState",value:function(){this._itemsByProvider=new Map;for(var e=[],t=this._lineContext,n=t.leadingLineContent,i=t.characterCountDelta,r="",o="",a=1===this._refilterKind?this._items:this._filteredItems,s=[],l=!this._options.filterGraceful||a.length>2e3?TM:AM,u=0;u<a.length;u++){var c=a[u];if(!c.isInvalid){var d=this._itemsByProvider.get(c.provider);d?d.push(c):this._itemsByProvider.set(c.provider,[c]);var h=c.position.column-c.editStart.column,f=h+i-(c.position.column-this._column);if(r.length!==f&&(o=(r=0===f?"":n.slice(-f)).toLowerCase()),c.word=r,0===f)c.score=wM.Default;else{for(var g=0;g<h;){var v=r.charCodeAt(g);if(32!==v&&9!==v)break;g+=1}if(g>=f)c.score=wM.Default;else if("string"==typeof c.completion.filterText){var p=l(r,o,g,c.completion.filterText,c.filterTextLow,0,this._fuzzyScoreOptions);if(!p)continue;0===rf(c.completion.filterText,c.textLabel)?c.score=p:(c.score=mM(r,o,g,c.textLabel,c.labelLow,0),c.score[0]=p[0])}else{var m=l(r,o,g,c.textLabel,c.labelLow,0,this._fuzzyScoreOptions);if(!m)continue;c.score=m}}c.idx=u,c.distance=this._wordDistance.distance(c.position,c.completion),s.push(c),e.push(c.textLabel.length)}}this._filteredItems=s.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?na(e.length-.85,e,(function(e,t){return e-t})):0}}}],[{key:"_compareCompletionItems",value:function(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}},{key:"_compareCompletionItemsSnippetsDown",value:function(t,n){if(t.completion.kind!==n.completion.kind){if(27===t.completion.kind)return 1;if(27===n.completion.kind)return-1}return e._compareCompletionItems(t,n)}},{key:"_compareCompletionItemsSnippetsUp",value:function(t,n){if(t.completion.kind!==n.completion.kind){if(27===t.completion.kind)return-1;if(27===n.completion.kind)return 1}return e._compareCompletionItems(t,n)}}]),e}(),ege=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},tge=function(e,t){return function(n,i){t(n,i,e)}},nge=function(){function e(t,n,i){u(this,e),this.leadingLineContent=t.getLineContent(n.lineNumber).substr(0,n.column-1),this.leadingWord=t.getWordUntilPosition(n),this.lineNumber=n.lineNumber,this.column=n.column,this.triggerOptions=i}return h(e,null,[{key:"shouldAutoTrigger",value:function(e){if(!e.hasModel())return!1;var t=e.getModel(),n=e.getPosition();t.tokenization.tokenizeIfCheap(n.lineNumber);var i=t.getWordAtPosition(n);return!!i&&((i.endColumn===n.column||i.startColumn+1===n.column)&&!!isNaN(Number(i.word)))}}]),e}();var ige=Xfe=function(){function e(t,n,i,r,o,a,s,l,c){var d=this;u(this,e),this._editor=t,this._editorWorkerService=n,this._clipboardService=i,this._telemetryService=r,this._logService=o,this._contextKeyService=a,this._configurationService=s,this._languageFeaturesService=l,this._envService=c,this._toDispose=new Tu,this._triggerCharacterListener=new Tu,this._triggerQuickSuggest=new wg,this._triggerState=void 0,this._completionDisposables=new Tu,this._onDidCancel=new Zu,this._onDidTrigger=new Zu,this._onDidSuggest=new Zu,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new fd(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel((function(){d._updateTriggerCharacters(),d.cancel()}))),this._toDispose.add(this._editor.onDidChangeModelLanguage((function(){d._updateTriggerCharacters(),d.cancel()}))),this._toDispose.add(this._editor.onDidChangeConfiguration((function(){d._updateTriggerCharacters()}))),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange((function(){d._updateTriggerCharacters(),d._updateActiveSuggestSession()})));var h=!1;this._toDispose.add(this._editor.onDidCompositionStart((function(){h=!0}))),this._toDispose.add(this._editor.onDidCompositionEnd((function(){h=!1,d._onCompositionEnd()}))),this._toDispose.add(this._editor.onDidChangeCursorSelection((function(e){h||d._onCursorChange(e)}))),this._toDispose.add(this._editor.onDidChangeModelContent((function(){h||void 0===d._triggerState||d._refilterCompletionItems()}))),this._updateTriggerCharacters()}return h(e,[{key:"dispose",value:function(){Iu(this._triggerCharacterListener),Iu([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}},{key:"_updateTriggerCharacters",value:function(){var e=this;if(this._triggerCharacterListener.clear(),!this._editor.getOption(92)&&this._editor.hasModel()&&this._editor.getOption(122)){var t=new Map,n=!0,i=!1,r=void 0;try{for(var o,a=this._languageFeaturesService.completionProvider.all(this._editor.getModel())[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=!0,u=!1,c=void 0;try{for(var d,h=(s.triggerCharacters||[])[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value,g=t.get(f);g||(g=new Set,t.set(f,g)),g.add(s)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}var v=function(n){if(function(e,t){if(!Boolean(t.getContextKeyValue("inlineSuggestionVisible")))return!0;var n=t.getContextKeyValue(she.suppressSuggestions.key);return void 0!==n?!n:!e.getOption(62).suppressSuggestions}(e._editor,e._contextKeyService,e._configurationService)&&!nge.shouldAutoTrigger(e._editor)){if(!n){var i=e._editor.getPosition();n=e._editor.getModel().getLineContent(i.lineNumber).substr(0,i.column-1)}var r="";gf(n.charCodeAt(n.length-1))?ff(n.charCodeAt(n.length-2))&&(r=n.substr(n.length-2)):r=n.charAt(n.length-1);var o=t.get(r);if(o){var a,s=new Map;if(e._completionModel){var l=!0,u=!1,c=void 0;try{for(var d,h=e._completionModel.getItemsByProvider()[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=C(d.value,2),g=f[0],v=f[1];o.has(g)||s.set(g,v)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}e.trigger({auto:!0,triggerKind:1,triggerCharacter:r,retrigger:Boolean(e._completionModel),clipboardText:null===(a=e._completionModel)||void 0===a?void 0:a.clipboardText,completionOptions:{providerFilter:o,providerItemsToReuse:s}})}}};this._triggerCharacterListener.add(this._editor.onDidType(v)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd((function(){return v()})))}}},{key:"state",get:function(){return this._triggerState?this._triggerState.auto?2:1:0}},{key:"cancel",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];void 0!==this._triggerState&&(this._triggerQuickSuggest.cancel(),null===(e=this._requestToken)||void 0===e||e.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:t}))}},{key:"clear",value:function(){this._completionDisposables.clear()}},{key:"_updateActiveSuggestSession",value:function(){void 0!==this._triggerState&&(this._editor.hasModel()&&this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.trigger({auto:this._triggerState.auto,retrigger:!0}):this.cancel())}},{key:"_onCursorChange",value:function(e){if(this._editor.hasModel()){var t=this._currentSelection;this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||0!==e.reason&&3!==e.reason||"keyboard"!==e.source&&"deleteLeft"!==e.source?this.cancel():void 0===this._triggerState&&0===e.reason?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():void 0!==this._triggerState&&3===e.reason&&this._refilterCompletionItems()}}},{key:"_onCompositionEnd",value:function(){void 0===this._triggerState?this._doTriggerQuickSuggest():this._refilterCompletionItems()}},{key:"_doTriggerQuickSuggest",value:function(){var e,t=this;tfe.isAllOff(this._editor.getOption(90))||this._editor.getOption(119).snippetsPreventQuickSuggestions&&(null===(e=Cfe.get(this._editor))||void 0===e?void 0:e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet((function(){if(void 0===t._triggerState&&nge.shouldAutoTrigger(t._editor)&&t._editor.hasModel()&&t._editor.hasWidgetFocus()){var e=t._editor.getModel(),n=t._editor.getPosition(),i=t._editor.getOption(90);if(!tfe.isAllOff(i)){if(!tfe.isAllOn(i)){e.tokenization.tokenizeIfCheap(n.lineNumber);var r=e.tokenization.getLineTokens(n.lineNumber),o=r.getStandardTokenType(r.findTokenIndexAtOffset(Math.max(n.column-1-1,0)));if("on"!==tfe.valueFor(i,o))return}(function(e,t){if(!Boolean(t.getContextKeyValue(she.inlineSuggestionVisible.key)))return!0;var n=t.getContextKeyValue(she.suppressSuggestions.key);return void 0!==n?!n:!e.getOption(62).suppressSuggestions})(t._editor,t._contextKeyService,t._configurationService)&&t._languageFeaturesService.completionProvider.has(e)&&t.trigger({auto:!0})}}}),this._editor.getOption(91)))}},{key:"_refilterCompletionItems",value:function(){Oa(this._editor.hasModel()),Oa(void 0!==this._triggerState);var e=this._editor.getModel(),t=this._editor.getPosition(),n=new nge(e,t,b(_({},this._triggerState),{refilter:!0}));this._onNewContext(n)}},{key:"trigger",value:function(e){var t,n,i;if(this._editor.hasModel()){var r,o,a=this._editor.getModel(),l=new nge(a,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:null!==(r=e.shy)&&void 0!==r&&r,position:this._editor.getPosition()}),this._context=l;var u={triggerKind:null!==(o=e.triggerKind)&&void 0!==o?o:0};e.triggerCharacter&&(u={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new rc;var c=1;switch(this._editor.getOption(113)){case"top":c=0;break;case"bottom":c=2}var d,h=Xfe.createSuggestFilter(this._editor),f=h.itemKind,g=h.showDeprecated,v=new Zhe(c,null!==(d=null===(t=e.completionOptions)||void 0===t?void 0:t.kindFilter)&&void 0!==d?d:f,null===(n=e.completionOptions)||void 0===n?void 0:n.providerFilter,null===(i=e.completionOptions)||void 0===i?void 0:i.providerItemsToReuse,g),p=Qfe.create(this._editorWorkerService,this._editor),m=Qhe(this._languageFeaturesService.completionProvider,a,this._editor.getPosition(),v,u,this._requestToken.token),y=this;Promise.all([m,p]).then(function(){var t=s((function(t){var n,i,r,o,a,s,l,u,c,d,h,f,g,v;return E(this,(function(p){switch(p.label){case 0:return n=C(t,2),i=n[0],r=n[1],null===(o=y._requestToken)||void 0===o||o.dispose(),y._editor.hasModel()?(a=null==e?void 0:e.clipboardText)||!i.needsClipboard?[3,2]:[4,y._clipboardService.readText()]:[2];case 1:a=p.sent(),p.label=2;case 2:if(void 0===y._triggerState)return[2];if(s=y._editor.getModel(),l=new nge(s,y._editor.getPosition(),e),u=b(_({},MM.default),{firstMatchCanBeWeak:!y._editor.getOption(119).matchOnWordStartOnly}),y._completionModel=new Jfe(i.items,y._context.column,{leadingLineContent:l.leadingLineContent,characterCountDelta:l.column-y._context.column},r,y._editor.getOption(119),y._editor.getOption(113),u,a),y._completionDisposables.add(i.disposable),y._onNewContext(l),y._reportDurationsTelemetry(i.durations),!y._envService.isBuilt||y._envService.isExtensionDevelopment){c=!0,d=!1,h=void 0;try{for(f=i.items[Symbol.iterator]();!(c=(g=f.next()).done);c=!0)(v=g.value).isInvalid&&y._logService.warn("[suggest] did IGNORE invalid completion item from ".concat(v.provider._debugDisplayName),v.completion)}catch(e){d=!0,h=e}finally{try{c||null==f.return||f.return()}finally{if(d)throw h}}}return[2]}}))}));return function(e){return t.apply(this,arguments)}}()).catch(vu)}}},{key:"_reportDurationsTelemetry",value:function(e){var t=this;this._telemetryGate++%230==0&&setTimeout((function(){t._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),t._logService.debug("suggest.durations.json",e)}))}},{key:"_onNewContext",value:function(e){if(this._context)if(e.lineNumber===this._context.lineNumber)if(Jh(e.leadingLineContent)===Jh(this._context.leadingLineContent)){if(e.column<this._context.column)e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();else if(this._completionModel)if(0!==e.leadingWord.word.length&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(nge.shouldAutoTrigger(this._editor)&&this._context){var t=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:t}})}}else if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&0!==e.leadingWord.word.length){var n=new Map,i=new Set,r=!0,o=!1,a=void 0;try{for(var s,l=this._completionModel.getItemsByProvider()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=C(s.value,2),c=u[0],d=u[1];d.length>0&&d[0].container.incomplete?i.add(c):n.set(c,d)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:i,providerItemsToReuse:n}})}else{var h=this._completionModel.lineContext,f=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},0===this._completionModel.items.length){var g=nge.shouldAutoTrigger(this._editor);if(!this._context)return void this.cancel();if(g&&this._context.leadingWord.endColumn<e.leadingWord.startColumn)return void this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});if(this._context.triggerOptions.auto)return void this.cancel();if(this._completionModel.lineContext=h,(f=this._completionModel.items.length>0)&&0===e.leadingWord.word.length)return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:f})}}else this.cancel();else this.cancel()}}],[{key:"createSuggestFilter",value:function(e){var t=new Set;"none"===e.getOption(113)&&t.add(27);var n=e.getOption(119);return n.showMethods||t.add(0),n.showFunctions||t.add(1),n.showConstructors||t.add(2),n.showFields||t.add(3),n.showVariables||t.add(4),n.showClasses||t.add(5),n.showStructs||t.add(6),n.showInterfaces||t.add(7),n.showModules||t.add(8),n.showProperties||t.add(9),n.showEvents||t.add(10),n.showOperators||t.add(11),n.showUnits||t.add(12),n.showValues||t.add(13),n.showConstants||t.add(14),n.showEnums||t.add(15),n.showEnumMembers||t.add(16),n.showKeywords||t.add(17),n.showWords||t.add(18),n.showColors||t.add(19),n.showFiles||t.add(20),n.showReferences||t.add(21),n.showColors||t.add(22),n.showFolders||t.add(23),n.showTypeParameters||t.add(24),n.showSnippets||t.add(27),n.showUsers||t.add(25),n.showIssues||t.add(26),{itemKind:t,showDeprecated:n.showDeprecated}}}]),e}();ige=Xfe=ege([tge(1,TW),tge(2,fY),tge(3,b_),tge(4,k_),tge(5,Ky),tge(6,qb),tge(7,wS),tge(8,Lx)],ige);var rge=function(){function e(t,n){var i=this;u(this,e),this._disposables=new Tu,this._lastOvertyped=[],this._locked=!1,this._disposables.add(t.onWillType((function(){if(!i._locked&&t.hasModel()){for(var n=t.getSelections(),r=n.length,o=!1,a=0;a<r;a++)if(!n[a].isEmpty()){o=!0;break}if(o){i._lastOvertyped=[];for(var s=t.getModel(),l=0;l<r;l++){var u=n[l];if(s.getValueLengthInRange(u)>e._maxSelectionLength)return;i._lastOvertyped[l]={value:s.getValueInRange(u),multiline:u.startLineNumber!==u.endLineNumber}}}else 0!==i._lastOvertyped.length&&(i._lastOvertyped.length=0)}}))),this._disposables.add(n.onDidTrigger((function(e){i._locked=!0}))),this._disposables.add(n.onDidCancel((function(e){i._locked=!1})))}return h(e,[{key:"getLastOvertypedInfo",value:function(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}},{key:"dispose",value:function(){this._disposables.dispose()}}]),e}();rge._maxSelectionLength=51200;var oge=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},age=function(e,t){return function(n,i){t(n,i,e)}},sge=function(){function e(t,n,i,r,o){u(this,e),this._menuId=n,this._menuService=r,this._contextKeyService=o,this._menuDisposables=new Tu,this.element=lm(t,gm(".suggest-status-bar"));var a=function(e){return e instanceof p_?i.createInstance(rW,e,{useComma:!0}):void 0};this._leftActions=new dW(this.element,{actionViewItemProvider:a}),this._rightActions=new dW(this.element,{actionViewItemProvider:a}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}return h(e,[{key:"dispose",value:function(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}},{key:"show",value:function(){var e=this,t=this._menuService.createMenu(this._menuId,this._contextKeyService);this._menuDisposables.add(t.onDidChange((function(){return function(){var n=[],i=[],r=!0,o=!1,a=void 0;try{for(var s,l=t.getActions()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u,c,d=C(s.value,2),h=d[0],f=d[1];"left"===h?(u=n).push.apply(u,x(f)):(c=i).push.apply(c,x(f))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}e._leftActions.clear(),e._leftActions.push(n),e._rightActions.clear(),e._rightActions.push(i)}()}))),this._menuDisposables.add(t)}},{key:"hide",value:function(){this._menuDisposables.clear()}}]),e}();sge=oge([age(2,Gm),age(3,h_),age(4,Ky)],sge);var lge=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},uge=function(e,t){return function(n,i){t(n,i,e)}};function cge(e){return!!e&&Boolean(e.completion.documentation||e.completion.detail&&e.completion.detail!==e.completion.label)}var dge=function(){function e(t,n){var i=this;u(this,e),this._editor=t,this._onDidClose=new Zu,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new Zu,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new Tu,this._renderDisposeable=new Tu,this._borderWidth=1,this._size=new Cp(330,0),this.domNode=gm(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=n.createInstance(lR,{editor:t}),this._body=gm(".body"),this._scrollbar=new yE(this._body,{alwaysConsumeMouseWheel:!0}),lm(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=lm(this._body,gm(".header")),this._close=lm(this._header,gm("span"+ny.asCSSSelector(bd.close))),this._close.title=Xa("details.close","Close"),this._type=lm(this._header,gm("p.type")),this._docs=lm(this._body,gm("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration((function(e){e.hasChanged(50)&&i._configureFont()})))}return h(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._renderDisposeable.dispose()}},{key:"_configureFont",value:function(){var e=this._editor.getOptions(),t=e.get(50),n=t.getMassagedFontFamily(),i=e.get(120)||t.fontSize,r=e.get(121)||t.lineHeight,o=t.fontWeight,a="".concat(i,"px"),s="".concat(r,"px");this.domNode.style.fontSize=a,this.domNode.style.lineHeight="".concat(r/i),this.domNode.style.fontWeight=o,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=s,this._close.style.width=s}},{key:"getLayoutInfo",value:function(){var e=this._editor.getOption(121)||this._editor.getOption(50).lineHeight,t=this._borderWidth;return{lineHeight:e,borderWidth:t,borderHeight:2*t,verticalPadding:22,horizontalPadding:14}}},{key:"renderLoading",value:function(){this._type.textContent=Xa("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,2*this.getLayoutInfo().lineHeight),this._onDidChangeContents.fire(this)}},{key:"renderItem",value:function(e,t){var n=this;this._renderDisposeable.clear();var i=e.completion,r=i.detail,o=i.documentation;if(t){var a,s,l="";l+="score: ".concat(e.score[0],"\n"),l+="prefix: ".concat(null!==(s=e.word)&&void 0!==s?s:"(no prefix)","\n"),l+="word: ".concat(e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel,"\n"),l+="distance: ".concat(e.distance," (localityBonus-setting)\n"),l+="index: ".concat(e.idx,", based on ").concat(e.completion.sortText&&'sortText: "'.concat(e.completion.sortText,'"')||"label","\n"),l+="commit_chars: ".concat(null===(a=e.completion.commitCharacters)||void 0===a?void 0:a.join(""),"\n"),o=(new oT).appendCodeblock("empty",l),r="Provider: ".concat(e.provider._debugDisplayName)}if(t||cge(e)){if(this.domNode.classList.remove("no-docs","no-type"),r){var u=r.length>1e5?"".concat(r.substr(0,1e5),"…"):r;this._type.textContent=u,this._type.title=u,vm(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gim.test(u))}else lp(this._type),this._type.title="",pm(this._type),this.domNode.classList.add("no-type");if(lp(this._docs),"string"==typeof o)this._docs.classList.remove("markdown-docs"),this._docs.textContent=o;else if(o){this._docs.classList.add("markdown-docs"),lp(this._docs);var c=this._markdownRenderer.render(o);this._docs.appendChild(c.element),this._renderDisposeable.add(c),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync((function(){n.layout(n._size.width,n._type.clientHeight+n._docs.clientHeight),n._onDidChangeContents.fire(n)})))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=function(e){e.preventDefault(),e.stopPropagation()},this._close.onclick=function(e){e.preventDefault(),e.stopPropagation(),n._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}else this.clearContents()}},{key:"clearContents",value:function(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}},{key:"isEmpty",get:function(){return this.domNode.classList.contains("no-docs")}},{key:"size",get:function(){return this._size}},{key:"layout",value:function(e,t){var n=new Cp(e,t);Cp.equals(n,this._size)||(this._size=n,function(e,t,n){"number"==typeof t&&(e.style.width="".concat(t,"px")),"number"==typeof n&&(e.style.height="".concat(n,"px"))}(this.domNode,e,t)),this._scrollbar.scanDomNode()}},{key:"scrollDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;this._body.scrollTop+=e}},{key:"scrollUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;this._body.scrollTop-=e}},{key:"scrollTop",value:function(){this._body.scrollTop=0}},{key:"scrollBottom",value:function(){this._body.scrollTop=this._body.scrollHeight}},{key:"pageDown",value:function(){this.scrollDown(80)}},{key:"pageUp",value:function(){this.scrollUp(80)}},{key:"borderWidth",get:function(){return this._borderWidth},set:function(e){this._borderWidth=e}}]),e}();dge=lge([uge(1,Gm)],dge);var hge,fge=function(){function e(t,n){var i,r,o=this;u(this,e),this.widget=t,this._editor=n,this.allowEditorOverflow=!0,this._disposables=new Tu,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new xoe,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(t.domNode),this._resizable.enableSashes(!1,!0,!0,!1);var a=0,s=0;this._disposables.add(this._resizable.onDidWillResize((function(){i=o._topLeft,r=o._resizable.size}))),this._disposables.add(this._resizable.onDidResize((function(e){if(i&&r){o.widget.layout(e.dimension.width,e.dimension.height);var t=!1;e.west&&(s=r.width-e.dimension.width,t=!0),e.north&&(a=r.height-e.dimension.height,t=!0),t&&o._applyTopLeft({top:i.top+a,left:i.left+s})}e.done&&(i=void 0,r=void 0,a=0,s=0,o._userSize=e.dimension)}))),this._disposables.add(this.widget.onDidChangeContents((function(){var e;o._anchorBox&&o._placeAtAnchor(o._anchorBox,null!==(e=o._userSize)&&void 0!==e?e:o.widget.size,o._preferAlignAtTop)})))}return h(e,[{key:"dispose",value:function(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}},{key:"getId",value:function(){return"suggest.details"}},{key:"getDomNode",value:function(){return this._resizable.domNode}},{key:"getPosition",value:function(){return this._topLeft?{preference:this._topLeft}:null}},{key:"show",value:function(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}},{key:"placeAtAnchor",value:function(e,t){var n,i=e.getBoundingClientRect();this._anchorBox=i,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,null!==(n=this._userSize)&&void 0!==n?n:this.widget.size,t)}},{key:"_placeAtAnchor",value:function(e,t,n){var i,r,o,a=kp(this.getDomNode().ownerDocument.body),s=this.widget.getLayoutInfo(),l=new Cp(220,2*s.lineHeight),u=e.top,c=function(){var n=a.width-(e.left+e.width+s.borderWidth+s.horizontalPadding),i=-s.borderWidth+e.left+e.width,r=new Cp(n,a.height-e.top-s.borderHeight-s.verticalPadding),o=r.with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding);return{top:u,left:i,fit:n-t.width,maxSizeTop:r,maxSizeBottom:o,minSize:l.with(Math.min(n,l.width))}}(),d=function(){var n=e.left-s.borderWidth-s.horizontalPadding,i=Math.max(s.horizontalPadding,e.left-t.width-s.borderWidth),r=new Cp(n,a.height-e.top-s.borderHeight-s.verticalPadding),o=r.with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding);return{top:u,left:i,fit:n-t.width,maxSizeTop:r,maxSizeBottom:o,minSize:l.with(Math.min(n,l.width))}}(),h=function(){var n=e.left,i=-s.borderWidth+e.top+e.height,r=new Cp(e.width-s.borderHeight,a.height-e.top-e.height-s.verticalPadding);return{top:i,left:n,fit:r.height-t.height,maxSizeBottom:r,maxSizeTop:r,minSize:l.with(r.width)}}(),f=[c,d,h],g=null!==(i=f.find((function(e){return e.fit>=0})))&&void 0!==i?i:f.sort((function(e,t){return t.fit-e.fit}))[0],v=e.top+e.height-s.borderHeight,p=t.height,m=Math.max(g.maxSizeTop.height,g.maxSizeBottom.height);p>m&&(p=m),n?p<=g.maxSizeTop.height?(r=!0,o=g.maxSizeTop):(r=!1,o=g.maxSizeBottom):p<=g.maxSizeBottom.height?(r=!1,o=g.maxSizeBottom):(r=!0,o=g.maxSizeTop);var y=g.top,_=g.left;!r&&p>e.height&&(y=v-p);var b=this._editor.getDomNode();if(b){var k=b.getBoundingClientRect();y-=k.top,_-=k.left}this._applyTopLeft({left:_,top:y}),this._resizable.enableSashes(!r,g===c,r,g!==c),this._resizable.minSize=g.minSize,this._resizable.maxSize=o,this._resizable.layout(p,Math.min(o.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}},{key:"_applyTopLeft",value:function(e){this._topLeft=e,this._editor.layoutOverlayWidget(this)}}]),e}();!function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"}(hge||(hge={}));var gge=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function vge(e,t,n,i,r){if(ny.isThemeIcon(r))return["codicon-".concat(r.id),"predefined-file-icon"];if(ed.isUri(r))return[];var o=i===hge.ROOT_FOLDER?["rootfolder-icon"]:i===hge.FOLDER?["folder-icon"]:["file-icon"];if(n){var a;if(n.scheme===Pv.data){a=nT.parseMetaData(n).get(nT.META_DATA_LABEL)}else{var s=n.path.match(gge);s?(a=pge(s[2].toLowerCase()),s[1]&&o.push("".concat(pge(s[1].toLowerCase()),"-name-dir-icon"))):a=pge(n.authority.toLowerCase())}if(i===hge.ROOT_FOLDER)o.push("".concat(a,"-root-name-folder-icon"));else if(i===hge.FOLDER)o.push("".concat(a,"-name-folder-icon"));else{if(a){if(o.push("".concat(a,"-name-file-icon")),o.push("name-file-icon"),a.length<=255)for(var l=a.split("."),u=1;u<l.length;u++)o.push("".concat(l.slice(u).join("."),"-ext-file-icon"));o.push("ext-file-icon")}var c=function(e,t,n){if(!n)return null;var i=null;if(n.scheme===Pv.data){var r=nT.parseMetaData(n).get(nT.META_DATA_MIME);r&&(i=t.getLanguageIdByMimeType(r))}else{var o=e.getModel(n);o&&(i=o.getLanguageId())}if(i&&i!==kk)return i;return t.guessLanguageIdByFilepathOrFirstLine(n)}(e,t,n);c&&o.push("".concat(pge(c),"-lang-file-icon"))}}return o}function pge(e){return e.replace(/[\s]/g,"/")}var mge=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},yge=function(e,t){return function(n,i){t(n,i,e)}};function _ge(e){return"suggest-aria-id:".concat(e)}var bge=IZ("suggest-more-info",bd.chevronRight,Xa("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),kge=new(dn=function(){function e(){u(this,e)}return h(e,[{key:"extract",value:function(t,n){if(t.textLabel.match(e._regexStrict))return n[0]=t.textLabel,!0;if(t.completion.detail&&t.completion.detail.match(e._regexStrict))return n[0]=t.completion.detail,!0;if(t.completion.documentation){var i="string"==typeof t.completion.documentation?t.completion.documentation:t.completion.documentation.value,r=e._regexRelaxed.exec(i);if(r&&(0===r.index||r.index+r[0].length===i.length))return n[0]=r[0],!0}return!1}}]),e}(),dn._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,dn._regexStrict=new RegExp("^".concat(dn._regexRelaxed.source,"$"),"i"),dn),wge=function(){function e(t,n,i,r){u(this,e),this._editor=t,this._modelService=n,this._languageService=i,this._themeService=r,this._onDidToggleDetails=new Zu,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}return h(e,[{key:"dispose",value:function(){this._onDidToggleDetails.dispose()}},{key:"renderTemplate",value:function(e){var t=this,n=new Tu,i=e;i.classList.add("show-file-icons");var r=lm(e,gm(".icon")),o=lm(r,gm("span.colorspan")),a=lm(e,gm(".contents")),s=lm(a,gm(".main")),l=lm(s,gm(".icon-label.codicon")),u=lm(s,gm("span.left")),c=lm(s,gm("span.right")),d=new bG(u,{supportHighlights:!0,supportIcons:!0});n.add(d);var h=lm(u,gm("span.signature-label")),f=lm(u,gm("span.qualifier-label")),g=lm(c,gm("span.details-label")),v=lm(c,gm("span.readMore"+ny.asCSSSelector(bge)));v.title=Xa("readMore","Read More");return{root:i,left:u,right:c,icon:r,colorspan:o,iconLabel:d,iconContainer:l,parametersLabel:h,qualifierLabel:f,detailsLabel:g,readMore:v,disposables:n,configureFont:function(){var e=t._editor.getOptions(),n=e.get(50),o=n.getMassagedFontFamily(),a=n.fontFeatureSettings,l=e.get(120)||n.fontSize,u=e.get(121)||n.lineHeight,c=n.fontWeight,d=n.letterSpacing,h="".concat(l,"px"),f="".concat(u,"px"),g="".concat(d,"px");i.style.fontSize=h,i.style.fontWeight=c,i.style.letterSpacing=g,s.style.fontFamily=o,s.style.fontFeatureSettings=a,s.style.lineHeight=f,r.style.height=f,r.style.width=f,v.style.height=f,v.style.width=f}}}},{key:"renderElement",value:function(e,t,n){var i=this;n.configureFont();var r=e.completion;n.root.id=_ge(t),n.colorspan.style.backgroundColor="";var o={labelEscapeNewLines:!0,matches:yM(e.score)},a=[];if(19===r.kind&&kge.extract(e,a))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=a[0];else if(20===r.kind&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";var s=vge(this._modelService,this._languageService,ed.from({scheme:"fake",path:e.textLabel}),hge.FILE),l=vge(this._modelService,this._languageService,ed.from({scheme:"fake",path:r.detail}),hge.FILE);o.extraClasses=s.length>l.length?s:l}else if(23===r.kind&&this._themeService.getFileIconTheme().hasFolderIcons)n.icon.className="icon hide",n.iconContainer.className="icon hide",o.extraClasses=[vge(this._modelService,this._languageService,ed.from({scheme:"fake",path:e.textLabel}),hge.FOLDER),vge(this._modelService,this._languageService,ed.from({scheme:"fake",path:r.detail}),hge.FOLDER)].flat();else{var u;n.icon.className="icon hide",n.iconContainer.className="",(u=n.iconContainer.classList).add.apply(u,["suggest-icon"].concat(x(ny.asClassNameArray(yd.toIcon(r.kind)))))}r.tags&&r.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,o),"string"==typeof r.label?(n.parametersLabel.textContent="",n.detailsLabel.textContent=Cge(r.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=Cge(r.label.detail||""),n.detailsLabel.textContent=Cge(r.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(119).showInlineDetails?vm(n.detailsLabel):pm(n.detailsLabel),cge(e)?(n.right.classList.add("can-expand-details"),vm(n.readMore),n.readMore.onmousedown=function(e){e.stopPropagation(),e.preventDefault()},n.readMore.onclick=function(e){e.stopPropagation(),e.preventDefault(),i._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),pm(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}},{key:"disposeTemplate",value:function(e){e.disposables.dispose()}}]),e}();function Cge(e){return e.replace(/\r\n|\r|\n/g,"")}wge=mge([yge(1,Qm),yge(2,Jb),yge(3,PS)],wge);var Sge,xge=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Lge=function(e,t){return function(n,i){t(n,i,e)}};TL("editorSuggestWidget.background",iD,Xa("editorSuggestWidgetBackground","Background color of the suggest widget.")),TL("editorSuggestWidget.border",oD,Xa("editorSuggestWidgetBorder","Border color of the suggest widget."));var Dge=TL("editorSuggestWidget.foreground",nD,Xa("editorSuggestWidgetForeground","Foreground color of the suggest widget."));TL("editorSuggestWidget.selectedForeground",BI,Xa("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),TL("editorSuggestWidget.selectedIconForeground",HI,Xa("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));var Nge=TL("editorSuggestWidget.selectedBackground",VI,Xa("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));TL("editorSuggestWidget.highlightForeground",pI,Xa("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),TL("editorSuggestWidget.focusHighlightForeground",mI,Xa("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused.")),TL("editorSuggestWidgetStatus.foreground",PL(Dge,.5),Xa("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));var Ige=function(){function e(t,n){u(this,e),this._service=t,this._key="suggestWidget.size/".concat(n.getEditorType(),"/").concat(n instanceof cae)}return h(e,[{key:"restore",value:function(){var e,t=null!==(e=this._service.get(this._key,0))&&void 0!==e?e:"";try{var n=JSON.parse(t);if(Cp.is(n))return Cp.lift(n)}catch(e){}}},{key:"store",value:function(e){this._service.store(this._key,JSON.stringify(e),0,1)}},{key:"reset",value:function(){this._service.remove(this._key,0)}}]),e}(),Ege=(hn=function(){function e(t,n,i,r,o){var a=this;u(this,e),this.editor=t,this._storageService=n,this._state=0,this._isAuto=!1,this._pendingLayout=new Pu,this._pendingShowDetails=new Pu,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new wg,this._disposables=new Tu,this._onDidSelect=new Qu,this._onDidFocus=new Qu,this._onDidHide=new Zu,this._onDidShow=new Zu,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new Zu,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new xoe,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new Tge(this,t),this._persistedSize=new Ige(n,t);var s,l=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];u(this,e),this.persistedSize=t,this.currentSize=n,this.persistHeight=i,this.persistWidth=r};this._disposables.add(this.element.onDidWillResize((function(){a._contentWidget.lockPreference(),s=new l(a._persistedSize.restore(),a.element.size)}))),this._disposables.add(this.element.onDidResize((function(e){if(a._resize(e.dimension.width,e.dimension.height),s&&(s.persistHeight=s.persistHeight||!!e.north||!!e.south,s.persistWidth=s.persistWidth||!!e.east||!!e.west),e.done){if(s){var t,n,i,r,o=a.getLayoutInfo(),l=o.itemHeight,u=o.defaultSize,c=Math.round(l/2),d=a.element.size,h=d.width,f=d.height;if(!s.persistHeight||Math.abs(s.currentSize.height-f)<=c)f=null!==(n=null===(t=s.persistedSize)||void 0===t?void 0:t.height)&&void 0!==n?n:u.height;if(!s.persistWidth||Math.abs(s.currentSize.width-h)<=c)h=null!==(r=null===(i=s.persistedSize)||void 0===i?void 0:i.width)&&void 0!==r?r:u.width;a._persistedSize.store(new Cp(h,f))}a._contentWidget.unlockPreference(),s=void 0}}))),this._messageElement=lm(this.element.domNode,gm(".message")),this._listElement=lm(this.element.domNode,gm(".tree"));var c=this._disposables.add(o.createInstance(dge,this.editor));c.onDidClose(this.toggleDetails,this,this._disposables),this._details=new fge(c,this.editor);var d=function(){return a.element.domNode.classList.toggle("no-icons",!a.editor.getOption(119).showIcons)};d();var h=o.createInstance(wge,this.editor);this._disposables.add(h),this._disposables.add(h.onDidToggleDetails((function(){return a.toggleDetails()}))),this._list=new _F("SuggestWidget",this._listElement,{getHeight:function(e){return a.getLayoutInfo().itemHeight},getTemplateId:function(e){return"suggestion"}},[h],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:function(){return"option"},getWidgetAriaLabel:function(){return Xa("suggest","Suggest")},getWidgetRole:function(){return"listbox"},getAriaLabel:function(e){var t=e.textLabel;if("string"!=typeof e.completion.label){var n=e.completion.label,i=n.detail,r=n.description;i&&r?t=Xa("label.full","{0} {1}, {2}",t,i,r):i?t=Xa("label.detail","{0} {1}",t,i):r&&(t=Xa("label.desc","{0}, {1}",t,r))}if(!e.isResolved||!a._isDetailsVisible())return t;var o=e.completion,s=o.documentation;return Xa("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",t,jh("{0}{1}",o.detail||"",s?"string"==typeof s?s:s.value:""))}}}),this._list.style(QF({listInactiveFocusBackground:Nge,listInactiveFocusOutline:qL})),this._status=o.createInstance(sge,this.element.domNode,qhe);var f=function(){return a.element.domNode.classList.toggle("with-status-bar",a.editor.getOption(119).showStatusBar)};f(),this._disposables.add(r.onDidColorThemeChange((function(e){return a._onThemeChange(e)}))),this._onThemeChange(r.getColorTheme()),this._disposables.add(this._list.onMouseDown((function(e){return a._onListMouseDownOrTap(e)}))),this._disposables.add(this._list.onTap((function(e){return a._onListMouseDownOrTap(e)}))),this._disposables.add(this._list.onDidChangeSelection((function(e){return a._onListSelection(e)}))),this._disposables.add(this._list.onDidChangeFocus((function(e){return a._onListFocus(e)}))),this._disposables.add(this.editor.onDidChangeCursorSelection((function(){return a._onCursorSelectionChanged()}))),this._disposables.add(this.editor.onDidChangeConfiguration((function(e){e.hasChanged(119)&&(f(),d()),a._completionModel&&(e.hasChanged(50)||e.hasChanged(120)||e.hasChanged(121))&&a._list.splice(0,a._list.length,a._completionModel.items)}))),this._ctxSuggestWidgetVisible=Khe.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=Khe.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=Khe.MultipleSuggestions.bindTo(i),this._ctxSuggestWidgetHasFocusedSuggestion=Khe.HasFocusedSuggestion.bindTo(i),this._disposables.add(hp(this._details.widget.domNode,"keydown",(function(e){a._onDetailsKeydown.fire(e)}))),this._disposables.add(this.editor.onMouseDown((function(e){return a._onEditorMouseDown(e)})))}return h(e,[{key:"dispose",value:function(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}},{key:"_onEditorMouseDown",value:function(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}},{key:"_onCursorSelectionChanged",value:function(){0!==this._state&&this._contentWidget.layout()}},{key:"_onListMouseDownOrTap",value:function(e){void 0!==e.element&&void 0!==e.index&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}},{key:"_onListSelection",value:function(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}},{key:"_select",value:function(e,t){var n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}},{key:"_onThemeChange",value:function(e){this._details.widget.borderWidth=RS(e.type)?2:1}},{key:"_onListFocus",value:function(e){var t=this;if(!this._ignoreFocusEvents){if(!e.elements.length)return this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),void this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);if(this._completionModel){this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);var n=e.elements[0],i=e.indexes[0];if(n!==this._focusedItem){var r;null===(r=this._currentSuggestionDetails)||void 0===r||r.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(i);var o=this;this._currentSuggestionDetails=hg(function(){var e=s((function(e){var t,i;return E(this,(function(r){switch(r.label){case 0:t=yg((function(){o._isDetailsVisible()&&o.showDetails(!0)}),250),i=e.onCancellationRequested((function(){return t.dispose()})),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,n.resolve(e)];case 2:return[2,r.sent()];case 3:return t.dispose(),i.dispose(),[7];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()),this._currentSuggestionDetails.then((function(){i>=t._list.length||n!==t._list.element(i)||(t._ignoreFocusEvents=!0,t._list.splice(i,1,[n]),t._list.setFocus([i]),t._ignoreFocusEvents=!1,t._isDetailsVisible()?t.showDetails(!1):t.element.domNode.classList.remove("docs-side"),t.editor.setAriaOptions({activeDescendant:_ge(i)}))})).catch(vu)}this._onDidFocus.fire({item:n,index:i,model:this._completionModel})}}}},{key:"_setState",value:function(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",4===e),this.element.domNode.classList.remove("message"),e){case 0:pm(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=Sge.LOADING_MESSAGE,pm(this._listElement,this._status.element),vm(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,bR(Sge.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=Sge.NO_SUGGESTIONS_MESSAGE,pm(this._listElement,this._status.element),vm(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,bR(Sge.NO_SUGGESTIONS_MESSAGE);break;case 3:case 4:pm(this._messageElement),vm(this._listElement,this._status.element),this._show();break;case 5:pm(this._messageElement),vm(this._listElement,this._status.element),this._details.show(),this._show()}}},{key:"_show",value:function(){var e=this;this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet((function(){e.element.domNode.classList.add("visible"),e._onDidShow.fire(e)}),100)}},{key:"showTriggered",value:function(e,t){var n=this;0===this._state&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=yg((function(){return n._setState(1)}),t)))}},{key:"showSuggestions",value:function(e,t,n,i,r){var o,a,s=this;if(this._contentWidget.setPosition(this.editor.getPosition()),null===(o=this._loadingTimeout)||void 0===o||o.dispose(),null===(a=this._currentSuggestionDetails)||void 0===a||a.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&2!==this._state&&0!==this._state)this._setState(4);else{var l=this._completionModel.items.length,u=0===l;if(this._ctxSuggestWidgetMultipleSuggestions.set(l>1),u)return this._setState(i?0:2),void(this._completionModel=void 0);this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus(r?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=vp(ep(this.element.domNode),(function(){s._pendingLayout.clear(),s._layout(s.element.size),s._details.widget.domNode.classList.remove("focused")}))}}},{key:"focusSelected",value:function(){this._list.length>0&&this._list.setFocus([0])}},{key:"selectNextPage",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}},{key:"selectNext",value:function(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}},{key:"selectLast",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}},{key:"selectPreviousPage",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}},{key:"selectPrevious",value:function(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}},{key:"selectFirst",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}},{key:"getFocusedItem",value:function(){if(0!==this._state&&2!==this._state&&1!==this._state&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}},{key:"toggleDetailsFocus",value:function(){5===this._state?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):3===this._state&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}},{key:"toggleDetails",value:function(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):!cge(this._list.getFocusedElements()[0])&&!this._explainMode||3!==this._state&&5!==this._state&&4!==this._state||(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}},{key:"showDetails",value:function(e){var t=this;this._pendingShowDetails.value=vp(ep(this.element.domNode),(function(){t._pendingShowDetails.clear(),t._details.show(),e?t._details.widget.renderLoading():t._details.widget.renderItem(t._list.getFocusedElements()[0],t._explainMode),t._details.widget.isEmpty?t._details.hide():(t._positionDetails(),t.element.domNode.classList.add("shows-details")),t.editor.focus()}))}},{key:"toggleExplainMode",value:function(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}},{key:"resetPersistedSize",value:function(){this._persistedSize.reset()}},{key:"hideWidget",value:function(){var e;this._pendingLayout.clear(),this._pendingShowDetails.clear(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();var t=this._persistedSize.restore(),n=Math.ceil(4.3*this.getLayoutInfo().itemHeight);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}},{key:"isFrozen",value:function(){return 4===this._state}},{key:"_afterRender",value:function(e){null!==e?2!==this._state&&1!==this._state&&(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails()):this._isDetailsVisible()&&this._details.hide()}},{key:"_layout",value:function(e){if(this.editor.hasModel()&&this.editor.getDomNode()){var t=kp(this.element.domNode.ownerDocument.body),n=this.getLayoutInfo();e||(e=n.defaultSize);var i=e.height,r=e.width;if(this._status.element.style.height="".concat(n.itemHeight,"px"),2===this._state||1===this._state)i=n.itemHeight+n.borderHeight,r=n.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Cp(r,i),this._contentWidget.setPreference(2);else{var o,a,s=t.width-n.borderHeight-2*n.horizontalPadding;r>s&&(r=s);var l=this._completionModel?this._completionModel.stats.pLabelLen*n.typicalHalfwidthCharacterWidth:r,u=n.statusBarHeight+this._list.contentHeight+n.borderHeight,c=n.itemHeight+n.statusBarHeight,d=xp(this.editor.getDomNode()),h=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),f=d.top+h.top+h.height,g=Math.min(t.height-f-n.verticalPadding,u),v=d.top+h.top-n.verticalPadding,p=Math.min(v,u),m=Math.min(Math.max(p,g)+n.borderHeight,u);i===(null===(o=this._cappedHeight)||void 0===o?void 0:o.capped)&&(i=this._cappedHeight.wanted),i<c&&(i=c),i>m&&(i=m);var y;i>g||this._forceRenderingAbove&&v>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),m=p):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),m=g),this.element.preferredSize=new Cp(l,n.defaultSize.height),this.element.maxSize=new Cp(s,m),this.element.minSize=new Cp(220,c),this._cappedHeight=i===u?{wanted:null!==(y=null===(a=this._cappedHeight)||void 0===a?void 0:a.wanted)&&void 0!==y?y:e.height,capped:i}:void 0}this._resize(r,i)}}},{key:"_resize",value:function(e,t){var n=this.element.maxSize,i=n.width,r=n.height;e=Math.min(i,e),t=Math.min(r,t);var o=this.getLayoutInfo().statusBarHeight;this._list.layout(t-o,e),this._listElement.style.height="".concat(t-o,"px"),this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}},{key:"_positionDetails",value:function(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,2===(null===(e=this._contentWidget.getPosition())||void 0===e?void 0:e.preference[0]))}},{key:"getLayoutInfo",value:function(){var e=this.editor.getOption(50),t=wx(this.editor.getOption(121)||e.lineHeight,8,1e3),n=this.editor.getOption(119).showStatusBar&&2!==this._state&&1!==this._state?t:0,i=this._details.widget.borderWidth,r=2*i;return{itemHeight:t,statusBarHeight:n,borderWidth:i,borderHeight:r,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Cp(430,n+12*t+r)}}},{key:"_isDetailsVisible",value:function(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}},{key:"_setDetailsVisible",value:function(e){this._storageService.store("expandSuggestionDocs",e,0,0)}},{key:"forceRenderingAbove",value:function(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}},{key:"stopForceRenderingAbove",value:function(){this._forceRenderingAbove=!1}}]),e}(),Sge=hn,hn.LOADING_MESSAGE=Xa("suggestWidget.loading","Loading..."),hn.NO_SUGGESTIONS_MESSAGE=Xa("suggestWidget.noSuggestions","No suggestions."),hn);Ege=Sge=xge([Lge(1,BF),Lge(2,Ky),Lge(3,PS),Lge(4,Gm)],Ege);var Mge,Tge=function(){function e(t,n){u(this,e),this._widget=t,this._editor=n,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}return h(e,[{key:"dispose",value:function(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}},{key:"getId",value:function(){return"editor.widget.suggestWidget"}},{key:"getDomNode",value:function(){return this._widget.element.domNode}},{key:"show",value:function(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}},{key:"hide",value:function(){this._hidden||(this._hidden=!0,this.layout())}},{key:"layout",value:function(){this._editor.layoutContentWidget(this)}},{key:"getPosition",value:function(){return!this._hidden&&this._position&&this._preference?{position:this._position,preference:[this._preference]}:null}},{key:"beforeRender",value:function(){var e=this._widget.element.size,t=e.height,n=e.width,i=this._widget.getLayoutInfo(),r=i.borderWidth,o=i.horizontalPadding;return new Cp(n+2*r+o,t+2*r)}},{key:"afterRender",value:function(e){this._widget._afterRender(e)}},{key:"setPreference",value:function(e){this._preferenceLocked||(this._preference=e)}},{key:"lockPreference",value:function(){this._preferenceLocked=!0}},{key:"unlockPreference",value:function(){this._preferenceLocked=!1}},{key:"setPosition",value:function(e){this._position=e}}]),e}(),Rge=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Age=function(e,t){return function(n,i){t(n,i,e)}},Pge=function(){function e(t,n){var i=this;if(u(this,e),this._model=t,this._position=n,this._decorationOptions=cU.register({description:"suggest-line-suffix",stickiness:1}),t.getLineMaxColumn(n.lineNumber)!==n.column){var r=t.getOffsetAt(n),o=t.getPositionAt(r+1);t.changeDecorations((function(e){i._marker&&e.removeDecoration(i._marker),i._marker=e.addDecoration(hd.fromPositions(n,o),i._decorationOptions)}))}}return h(e,[{key:"dispose",value:function(){var e=this;this._marker&&!this._model.isDisposed()&&this._model.changeDecorations((function(t){t.removeDecoration(e._marker),e._marker=void 0}))}},{key:"delta",value:function(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){var t=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}return this._model.getLineMaxColumn(e.lineNumber)-e.column}}]),e}(),Oge=(fn=function(){function e(t,n,i,r,o,a,s){var l=this;u(this,e),this._memoryService=n,this._commandService=i,this._contextKeyService=r,this._instantiationService=o,this._logService=a,this._telemetryService=s,this._lineSuffix=new Pu,this._toDispose=new Tu,this._selectors=new Fge((function(e){return e.priority})),this._onWillInsertSuggestItem=new Zu,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=t,this.model=o.createInstance(ige,this.editor),this._selectors.register({priority:0,select:function(e,t,n){return l._memoryService.select(e,t,n)}});var c=Khe.InsertMode.bindTo(r);c.set(t.getOption(119).insertMode),this._toDispose.add(this.model.onDidTrigger((function(){return c.set(t.getOption(119).insertMode)}))),this.widget=this._toDispose.add(new mp(ep(t.getDomNode()),(function(){var e=l._instantiationService.createInstance(Ege,l.editor);l._toDispose.add(e),l._toDispose.add(e.onDidSelect((function(e){return l._insertSuggestion(e,0)}),l));var t=new Zfe(l.editor,e,l.model,(function(e){return l._insertSuggestion(e,2)}));l._toDispose.add(t);var n=Khe.MakesTextEdit.bindTo(l._contextKeyService),i=Khe.HasInsertAndReplaceRange.bindTo(l._contextKeyService),r=Khe.CanResolve.bindTo(l._contextKeyService);return l._toDispose.add(Mu((function(){n.reset(),i.reset(),r.reset()}))),l._toDispose.add(e.onDidFocus((function(e){var t=e.item,o=l.editor.getPosition(),a=t.editStart.column,s=o.column,u=!0;"smart"!==l.editor.getOption(1)||2!==l.model.state||t.completion.additionalTextEdits||4&t.completion.insertTextRules||s-a!==t.completion.insertText.length||(u=l.editor.getModel().getValueInRange({startLineNumber:o.lineNumber,startColumn:a,endLineNumber:o.lineNumber,endColumn:s})!==t.completion.insertText);n.set(u),i.set(!dd.equals(t.editInsertEnd,t.editReplaceEnd)),r.set(Boolean(t.provider.resolveCompletionItem)||Boolean(t.completion.documentation)||t.completion.detail!==t.completion.label)}))),l._toDispose.add(e.onDetailsKeyDown((function(e){e.toKeyCodeChord().equals(new Jf(!0,!1,!1,!1,33))||ms&&e.toKeyCodeChord().equals(new Jf(!1,!1,!1,!0,33))?e.stopPropagation():e.toKeyCodeChord().isModifierKey()||l.editor.focus()}))),e}))),this._overtypingCapturer=this._toDispose.add(new mp(ep(t.getDomNode()),(function(){return l._toDispose.add(new rge(l.editor,l.model))}))),this._alternatives=this._toDispose.add(new mp(ep(t.getDomNode()),(function(){return l._toDispose.add(new Gfe(l.editor,l._contextKeyService))}))),this._toDispose.add(o.createInstance(Ufe,t)),this._toDispose.add(this.model.onDidTrigger((function(e){l.widget.value.showTriggered(e.auto,e.shy?250:50),l._lineSuffix.value=new Pge(l.editor.getModel(),e.position)}))),this._toDispose.add(this.model.onDidSuggest((function(e){if(!e.triggerOptions.shy){var t=-1,n=!0,i=!1,r=void 0;try{for(var o,a=l._selectors.itemsOrderedByPriorityDesc[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){if(-1!==(t=o.value.select(l.editor.getModel(),l.editor.getPosition(),e.completionModel.items)))break}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}if(-1===t&&(t=0),0!==l.model.state){var s=!1;if(e.triggerOptions.auto){var u=l.editor.getOption(119);"never"===u.selectionMode||"always"===u.selectionMode?s="never"===u.selectionMode:"whenTriggerCharacter"===u.selectionMode?s=1!==e.triggerOptions.triggerKind:"whenQuickSuggestion"===u.selectionMode&&(s=1===e.triggerOptions.triggerKind&&!e.triggerOptions.refilter)}l.widget.value.showSuggestions(e.completionModel,t,e.isFrozen,e.triggerOptions.auto,s)}}}))),this._toDispose.add(this.model.onDidCancel((function(e){e.retrigger||l.widget.value.hideWidget()}))),this._toDispose.add(this.editor.onDidBlurEditorWidget((function(){l.model.cancel(),l.model.clear()})));var d=Khe.AcceptSuggestionsOnEnter.bindTo(r),h=function(){var e=l.editor.getOption(1);d.set("on"===e||"smart"===e)};this._toDispose.add(this.editor.onDidChangeConfiguration((function(){return h()}))),h()}return h(e,[{key:"dispose",value:function(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}},{key:"_insertSuggestion",value:function(e,t){var n=this;if(!e||!e.item)return this._alternatives.value.reset(),this.model.cancel(),void this.model.clear();if(this.editor.hasModel()){var i=Cfe.get(this.editor);if(i){this._onWillInsertSuggestItem.fire({item:e.item});var r=this.editor.getModel(),o=r.getAlternativeVersionId(),a=e.item,s=[],l=new rc;1&t||this.editor.pushUndoStop();var u=this.getOverwriteInfo(a,Boolean(8&t));this._memoryService.memorize(r,this.editor.getPosition(),a);var c=a.isResolved,d=-1,h=-1;if(Array.isArray(a.completion.additionalTextEdits)){this.model.cancel();var f=g3.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",a.completion.additionalTextEdits.map((function(e){var t=hd.lift(e.range);if(t.startLineNumber===a.position.lineNumber&&t.startColumn>a.position.column){var i=n.editor.getPosition().column-a.position.column,r=i,o=hd.spansMultipleLines(t)?0:i;t=new hd(t.startLineNumber,t.startColumn+r,t.endLineNumber,t.endColumn+o)}return lA.replaceMove(t,e.text)}))),f.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!c){var g,v=new Hu,p=r.onDidChangeContent((function(e){if(e.isFlush)return l.cancel(),void p.dispose();var t=!0,n=!1,i=void 0;try{for(var r,o=e.changes[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=hd.getEndPosition(a.range);g&&!dd.isBefore(s,g)||(g=s)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}})),m=t;t|=2;var y=!1,_=this.editor.onWillType((function(){_.dispose(),y=!0,2&m||n.editor.pushUndoStop()}));s.push(a.resolve(l.token).then((function(){if(a.completion.additionalTextEdits&&!l.token.isCancellationRequested){if(g&&a.completion.additionalTextEdits.some((function(e){return dd.isBefore(g,hd.getStartPosition(e.range))})))return!1;y&&n.editor.pushUndoStop();var e=g3.capture(n.editor);return n.editor.executeEdits("suggestController.additionalTextEdits.async",a.completion.additionalTextEdits.map((function(e){return lA.replaceMove(hd.lift(e.range),e.text)}))),e.restoreRelativeVerticalPositionOfCursor(n.editor),!y&&2&m||n.editor.pushUndoStop(),!0}})).then((function(e){n._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",v.elapsed(),e),h=!0===e?1:!1===e?0:-2})).finally((function(){p.dispose(),_.dispose()})))}var b=a.completion.insertText;if(4&a.completion.insertTextRules||(b=qte.escape(b)),this.model.cancel(),i.insert(b,{overwriteBefore:u.overwriteBefore,overwriteAfter:u.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1&a.completion.insertTextRules),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2&t||this.editor.pushUndoStop(),a.completion.command)if(a.completion.command.id===Wge.id)this.model.trigger({auto:!0,retrigger:!0});else{var k,w=new Hu;s.push((k=this._commandService).executeCommand.apply(k,[a.completion.command.id].concat(x(a.completion.command.arguments?x(a.completion.command.arguments):[]))).catch((function(e){a.completion.extensionId?pu(e):vu(e)})).finally((function(){d=w.elapsed()})))}4&t&&this._alternatives.value.set(e,(function(e){for(l.cancel();r.canUndo();){o!==r.getAlternativeVersionId()&&r.undo(),n._insertSuggestion(e,3|(8&t?8:0));break}})),this._alertCompletionItem(a),Promise.all(s).finally((function(){n._reportSuggestionAcceptedTelemetry(a,r,c,d,h,e.index,e.model.items),n.model.clear(),l.dispose()}))}}}},{key:"_reportSuggestionAcceptedTelemetry",value:function(e,t,n,i,r,o,a){var s;if(0!==Math.floor(100*Math.random())){for(var l=new Map,u=0;u<Math.min(30,a.length);u++){var c=a[u].textLabel;l.has(c)?l.get(c).push(u):l.set(c,[u])}var d,h,f=l.get(e.textLabel),g=f&&f.length>1?f[0]:-1;this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:null!==(d=null===(s=e.extensionId)||void 0===s?void 0:s.value)&&void 0!==d?d:"unknown",providerId:null!==(h=e.provider._debugDisplayName)&&void 0!==h?h:"unknown",kind:e.completion.kind,basenameHash:Kv(YM(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:QM(t.uri),resolveInfo:e.provider.resolveCompletionItem?n?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:i,additionalEditsAsync:r,index:o,firstIndex:g})}}},{key:"getOverwriteInfo",value:function(e,t){Oa(this.editor.hasModel());var n="replace"===this.editor.getOption(119).insertMode;t&&(n=!n);var i=e.position.column-e.editStart.column,r=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column;return{overwriteBefore:i+(this.editor.getPosition().column-e.position.column),overwriteAfter:r+(this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0)}}},{key:"_alertCompletionItem",value:function(e){ua(e.completion.additionalTextEdits)&&_R(Xa("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length))}},{key:"triggerSuggest",value:function(e,t,n){this.editor.hasModel()&&(this.model.trigger({auto:null!=t&&t,completionOptions:{providerFilter:e,kindFilter:n?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}},{key:"triggerSuggestAndAcceptBest",value:function(e){var t=this;if(this.editor.hasModel()){var n=this.editor.getPosition(),i=function(){n.equals(t.editor.getPosition())&&t._commandService.executeCommand(e.fallback)};Au.once(this.model.onDidTrigger)((function(e){var n=[];Au.any(t.model.onDidTrigger,t.model.onDidCancel)((function(){Iu(n),i()}),void 0,n),t.model.onDidSuggest((function(e){var r=e.completionModel;if(Iu(n),0!==r.items.length){var o=t._memoryService.select(t.editor.getModel(),t.editor.getPosition(),r.items),a=r.items[o];!function(e){if(4&e.completion.insertTextRules||e.completion.additionalTextEdits)return!0;var n=t.editor.getPosition(),i=e.editStart.column,r=n.column;return r-i!==e.completion.insertText.length||t.editor.getModel().getValueInRange({startLineNumber:n.lineNumber,startColumn:i,endLineNumber:n.lineNumber,endColumn:r})!==e.completion.insertText}(a)?i():(t.editor.pushUndoStop(),t._insertSuggestion({index:o,item:a,model:r},7))}else i()}),void 0,n)})),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(n,0),this.editor.focus()}}},{key:"acceptSelectedSuggestion",value:function(e,t){var n=this.widget.value.getFocusedItem(),i=0;e&&(i|=4),t&&(i|=8),this._insertSuggestion(n,i)}},{key:"acceptNextSuggestion",value:function(){this._alternatives.value.next()}},{key:"acceptPrevSuggestion",value:function(){this._alternatives.value.prev()}},{key:"cancelSuggestWidget",value:function(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}},{key:"focusSuggestion",value:function(){this.widget.value.focusSelected()}},{key:"selectNextSuggestion",value:function(){this.widget.value.selectNext()}},{key:"selectNextPageSuggestion",value:function(){this.widget.value.selectNextPage()}},{key:"selectLastSuggestion",value:function(){this.widget.value.selectLast()}},{key:"selectPrevSuggestion",value:function(){this.widget.value.selectPrevious()}},{key:"selectPrevPageSuggestion",value:function(){this.widget.value.selectPreviousPage()}},{key:"selectFirstSuggestion",value:function(){this.widget.value.selectFirst()}},{key:"toggleSuggestionDetails",value:function(){this.widget.value.toggleDetails()}},{key:"toggleExplainMode",value:function(){this.widget.value.toggleExplainMode()}},{key:"toggleSuggestionFocus",value:function(){this.widget.value.toggleDetailsFocus()}},{key:"resetWidgetSize",value:function(){this.widget.value.resetPersistedSize()}},{key:"forceRenderingAbove",value:function(){this.widget.value.forceRenderingAbove()}},{key:"stopForceRenderingAbove",value:function(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}},{key:"registerSelector",value:function(e){return this._selectors.register(e)}}],[{key:"get",value:function(e){return e.getContribution(Mge.ID)}}]),e}(),Mge=fn,fn.ID="editor.contrib.suggestController",fn);Oge=Mge=Rge([Age(1,Bfe),Age(2,ay),Age(3,Ky),Age(4,Gm),Age(5,k_),Age(6,b_)],Oge);var Fge=function(){function e(t){u(this,e),this.prioritySelector=t,this._items=new Array}return h(e,[{key:"register",value:function(e){var t=this;if(-1!==this._items.indexOf(e))throw new Error("Value is already registered");return this._items.push(e),this._items.sort((function(e,n){return t.prioritySelector(n)-t.prioritySelector(e)})),{dispose:function(){var n=t._items.indexOf(e);n>=0&&t._items.splice(n,1)}}}},{key:"itemsOrderedByPriorityDesc",get:function(){return this._items}}]),e}(),Wge=function(e){function t(){return u(this,t),l(this,t,[{id:t.id,label:Xa("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:Sy.and(p0.writable,p0.hasCompletionItemProvider,Khe.Visible.toNegated()),kbOpts:{kbExpr:p0.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i,r=Oge.get(t);r&&(n&&"object"===(void 0===n?"undefined":L(n))&&!0===n.auto&&(i=!0),r.triggerSuggest(void 0,i,void 0))}}]),t}(M_);Wge.id="editor.action.triggerSuggest",B_(Oge.ID,Oge,2),O_(Wge);var Bge=190,Hge=E_.bindToContribution(Oge.get);P_(new Hge({id:"acceptSelectedSuggestion",precondition:Sy.and(Khe.Visible,Khe.HasFocusedSuggestion),handler:function(e){e.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:Sy.and(Khe.Visible,p0.textInputFocus),weight:Bge},{primary:3,kbExpr:Sy.and(Khe.Visible,p0.textInputFocus,Khe.AcceptSuggestionsOnEnter,Khe.MakesTextEdit),weight:Bge}],menuOpts:[{menuId:qhe,title:Xa("accept.insert","Insert"),group:"left",order:1,when:Khe.HasInsertAndReplaceRange.toNegated()},{menuId:qhe,title:Xa("accept.insert","Insert"),group:"left",order:1,when:Sy.and(Khe.HasInsertAndReplaceRange,Khe.InsertMode.isEqualTo("insert"))},{menuId:qhe,title:Xa("accept.replace","Replace"),group:"left",order:1,when:Sy.and(Khe.HasInsertAndReplaceRange,Khe.InsertMode.isEqualTo("replace"))}]})),P_(new Hge({id:"acceptAlternativeSelectedSuggestion",precondition:Sy.and(Khe.Visible,p0.textInputFocus,Khe.HasFocusedSuggestion),kbOpts:{weight:Bge,kbExpr:p0.textInputFocus,primary:1027,secondary:[1026]},handler:function(e){e.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:qhe,group:"left",order:2,when:Sy.and(Khe.HasInsertAndReplaceRange,Khe.InsertMode.isEqualTo("insert")),title:Xa("accept.replace","Replace")},{menuId:qhe,group:"left",order:2,when:Sy.and(Khe.HasInsertAndReplaceRange,Khe.InsertMode.isEqualTo("replace")),title:Xa("accept.insert","Insert")}]})),sy.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),P_(new Hge({id:"hideSuggestWidget",precondition:Khe.Visible,handler:function(e){return e.cancelSuggestWidget()},kbOpts:{weight:Bge,kbExpr:p0.textInputFocus,primary:9,secondary:[1033]}})),P_(new Hge({id:"selectNextSuggestion",precondition:Sy.and(Khe.Visible,Sy.or(Khe.MultipleSuggestions,Khe.HasFocusedSuggestion.negate())),handler:function(e){return e.selectNextSuggestion()},kbOpts:{weight:Bge,kbExpr:p0.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),P_(new Hge({id:"selectNextPageSuggestion",precondition:Sy.and(Khe.Visible,Sy.or(Khe.MultipleSuggestions,Khe.HasFocusedSuggestion.negate())),handler:function(e){return e.selectNextPageSuggestion()},kbOpts:{weight:Bge,kbExpr:p0.textInputFocus,primary:12,secondary:[2060]}})),P_(new Hge({id:"selectLastSuggestion",precondition:Sy.and(Khe.Visible,Sy.or(Khe.MultipleSuggestions,Khe.HasFocusedSuggestion.negate())),handler:function(e){return e.selectLastSuggestion()}})),P_(new Hge({id:"selectPrevSuggestion",precondition:Sy.and(Khe.Visible,Sy.or(Khe.MultipleSuggestions,Khe.HasFocusedSuggestion.negate())),handler:function(e){return e.selectPrevSuggestion()},kbOpts:{weight:Bge,kbExpr:p0.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),P_(new Hge({id:"selectPrevPageSuggestion",precondition:Sy.and(Khe.Visible,Sy.or(Khe.MultipleSuggestions,Khe.HasFocusedSuggestion.negate())),handler:function(e){return e.selectPrevPageSuggestion()},kbOpts:{weight:Bge,kbExpr:p0.textInputFocus,primary:11,secondary:[2059]}})),P_(new Hge({id:"selectFirstSuggestion",precondition:Sy.and(Khe.Visible,Sy.or(Khe.MultipleSuggestions,Khe.HasFocusedSuggestion.negate())),handler:function(e){return e.selectFirstSuggestion()}})),P_(new Hge({id:"focusSuggestion",precondition:Sy.and(Khe.Visible,Khe.HasFocusedSuggestion.negate()),handler:function(e){return e.focusSuggestion()},kbOpts:{weight:Bge,kbExpr:p0.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}})),P_(new Hge({id:"focusAndAcceptSuggestion",precondition:Sy.and(Khe.Visible,Khe.HasFocusedSuggestion.negate()),handler:function(e){e.focusSuggestion(),e.acceptSelectedSuggestion(!0,!1)}})),P_(new Hge({id:"toggleSuggestionDetails",precondition:Sy.and(Khe.Visible,Khe.HasFocusedSuggestion),handler:function(e){return e.toggleSuggestionDetails()},kbOpts:{weight:Bge,kbExpr:p0.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:qhe,group:"right",order:1,when:Sy.and(Khe.DetailsVisible,Khe.CanResolve),title:Xa("detail.more","Show Less")},{menuId:qhe,group:"right",order:1,when:Sy.and(Khe.DetailsVisible.toNegated(),Khe.CanResolve),title:Xa("detail.less","Show More")}]})),P_(new Hge({id:"toggleExplainMode",precondition:Khe.Visible,handler:function(e){return e.toggleExplainMode()},kbOpts:{weight:100,primary:2138}})),P_(new Hge({id:"toggleSuggestionFocus",precondition:Khe.Visible,handler:function(e){return e.toggleSuggestionFocus()},kbOpts:{weight:Bge,kbExpr:p0.textInputFocus,primary:2570,mac:{primary:778}}})),P_(new Hge({id:"insertBestCompletion",precondition:Sy.and(p0.textInputFocus,Sy.equals("config.editor.tabCompletion","on"),Ufe.AtEnd,Khe.Visible.toNegated(),Gfe.OtherSuggestions.toNegated(),Cfe.InSnippetMode.toNegated()),handler:function(e,t){e.triggerSuggestAndAcceptBest(Na(t)?_({fallback:"tab"},t):{fallback:"tab"})},kbOpts:{weight:Bge,primary:2}})),P_(new Hge({id:"insertNextSuggestion",precondition:Sy.and(p0.textInputFocus,Sy.equals("config.editor.tabCompletion","on"),Gfe.OtherSuggestions,Khe.Visible.toNegated(),Cfe.InSnippetMode.toNegated()),handler:function(e){return e.acceptNextSuggestion()},kbOpts:{weight:Bge,kbExpr:p0.textInputFocus,primary:2}})),P_(new Hge({id:"insertPrevSuggestion",precondition:Sy.and(p0.textInputFocus,Sy.equals("config.editor.tabCompletion","on"),Gfe.OtherSuggestions,Khe.Visible.toNegated(),Cfe.InSnippetMode.toNegated()),handler:function(e){return e.acceptPrevSuggestion()},kbOpts:{weight:Bge,kbExpr:p0.textInputFocus,primary:1026}})),O_(function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.resetSuggestSize",label:Xa("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n;null===(n=Oge.get(t))||void 0===n||n.resetWidgetSize()}}]),t}(M_));var Vge=function(e){function t(e,n,i){var r;u(this,t),(r=l(this,t)).editor=e,r.suggestControllerPreselector=n,r.onWillAccept=i,r.isSuggestWidgetVisible=!1,r.isShiftKeyPressed=!1,r._isActive=!1,r._currentSuggestItemInfo=void 0,r._onDidSelectedItemChange=r._register(new Zu),r.onDidSelectedItemChange=r._onDidSelectedItemChange.event,r._register(e.onKeyDown((function(e){e.shiftKey&&!r.isShiftKeyPressed&&(r.isShiftKeyPressed=!0,r.update(r._isActive))}))),r._register(e.onKeyUp((function(e){e.shiftKey&&r.isShiftKeyPressed&&(r.isShiftKeyPressed=!1,r.update(r._isActive))})));var o=Oge.get(r.editor);if(o){r._register(o.registerSelector({priority:100,select:function(e,t,n){var i=r.editor.getModel();if(!i)return-1;var a=r.suggestControllerPreselector(),s=a?Ehe(a,i):void 0;if(!s)return-1;var l=dd.lift(t),u=n.map((function(e,t){var n=Ehe(zge.fromSuggestion(o,i,l,e,r.isShiftKeyPressed).toSingleTextEdit(),i);return{index:t,valid:Mhe(s,n),prefixLength:n.text.length,suggestItem:e}})).filter((function(e){return e&&e.valid&&e.prefixLength>0})),c=qw(u,ba((function(e){return e.prefixLength}),ka));return c?c.index:-1}}));var a=!1;r._register(Au.once(o.model.onDidTrigger)((function(e){a||(a=!0,r._register(o.widget.value.onDidShow((function(){r.isSuggestWidgetVisible=!0,r.update(!0)}))),r._register(o.widget.value.onDidHide((function(){r.isSuggestWidgetVisible=!1,r.update(!1)}))),r._register(o.widget.value.onDidFocus((function(){r.isSuggestWidgetVisible=!0,r.update(!0)}))))}))),r._register(o.onWillInsertSuggestItem((function(e){var t=r.editor.getPosition(),n=r.editor.getModel();if(t&&n){var i=zge.fromSuggestion(o,n,t,e.item,r.isShiftKeyPressed);r.onWillAccept(i)}})))}return r.update(r._isActive),r}return p(t,e),h(t,[{key:"selectedItem",get:function(){return this._currentSuggestItemInfo}},{key:"update",value:function(e){var t=this.getSuggestItemInfo();this._isActive===e&&function(e,t){if(e===t)return!0;if(!e||!t)return!1;return e.equals(t)}(this._currentSuggestItemInfo,t)||(this._isActive=e,this._currentSuggestItemInfo=t,this._onDidSelectedItemChange.fire())}},{key:"getSuggestItemInfo",value:function(){var e=Oge.get(this.editor);if(e&&this.isSuggestWidgetVisible){var t=e.widget.value.getFocusedItem(),n=this.editor.getPosition(),i=this.editor.getModel();if(t&&n&&i)return zge.fromSuggestion(e,i,n,t.item,this.isShiftKeyPressed)}}},{key:"stopForceRenderingAbove",value:function(){var e=Oge.get(this.editor);null==e||e.stopForceRenderingAbove()}},{key:"forceRenderingAbove",value:function(){var e=Oge.get(this.editor);null==e||e.forceRenderingAbove()}}]),t}(Ru),zge=function(){function e(t,n,i,r){u(this,e),this.range=t,this.insertText=n,this.completionItemKind=i,this.isSnippetText=r}return h(e,[{key:"equals",value:function(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}},{key:"toSelectedSuggestionInfo",value:function(){return new Ed(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}},{key:"toSingleTextEdit",value:function(){return new $w(this.range,this.insertText)}}],[{key:"fromSuggestion",value:function(t,n,i,r,o){var a=r.completion.insertText,s=!1;if(4&r.completion.insertTextRules){var l=(new qte).parse(a);l.children.length<100&&yfe.adjustWhitespace(n,i,!0,l),a=l.toString(),s=!0}var u=t.getOverwriteInfo(r,o);return new e(hd.fromPositions(i.delta(0,-u.overwriteBefore),i.delta(0,Math.max(u.overwriteAfter,0))),a,r.completion.kind,s)}}]),e}();var Uge,jge=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Kge=function(e,t){return function(n,i){t(n,i,e)}},qge=(gn=function(e){function t(e,n,i,r,o,a,c,d,h,f){var g,v;u(this,t),g=l(this,t),v=g,g.editor=e,g._instantiationService=n,g._contextKeyService=i,g._configurationService=r,g._commandService=o,g._debounceService=a,g._languageFeaturesService=c,g._accessibilitySignalService=d,g._keybindingService=h,g._accessibilityService=f,g._editorObs=t6(g.editor),g._positions=UP(g,(function(e){var t,n;return null!==(n=null===(t=g._editorObs.selections.read(e))||void 0===t?void 0:t.map((function(e){return e.getEndPosition()})))&&void 0!==n?n:[new dd(1,1)]})),g._suggestWidgetAdaptor=g._register(new Vge(g.editor,(function(){var e,t;return g._editorObs.forceUpdate(),null===(t=g.model.get())||void 0===t||null===(e=t.selectedInlineCompletion.get())||void 0===e?void 0:e.toSingleTextEdit(void 0)}),(function(e){return g._editorObs.forceUpdate((function(t){var n;null===(n=g.model.get())||void 0===n||n.handleSuggestAccepted(e)}))}))),g._suggestWidgetSelectedItem=rO(g,(function(e){return g._suggestWidgetAdaptor.onDidSelectedItemChange((function(){g._editorObs.forceUpdate((function(t){return e(void 0)}))}))}),(function(){return g._suggestWidgetAdaptor.selectedItem})),g._enabledInConfig=rO(g,g.editor.onDidChangeConfiguration,(function(){return g.editor.getOption(62).enabled})),g._isScreenReaderEnabled=rO(g,g._accessibilityService.onDidChangeScreenReaderOptimized,(function(){return g._accessibilityService.isScreenReaderOptimized()})),g._editorDictationInProgress=rO(g,g._contextKeyService.onDidChangeContext,(function(){return!0===g._contextKeyService.getContext(g.editor.getDomNode()).getValue("editorDictation.inProgress")})),g._enabled=UP(g,(function(e){return g._enabledInConfig.read(e)&&(!g._isScreenReaderEnabled.read(e)||!g._editorDictationInProgress.read(e))})),g._debounceValue=g._debounceService.for(g._languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),g.model=ZP(g,(function(e){if(!g._editorObs.isReadonly.read(e)){var t=g._editorObs.model.read(e);if(t)return g._instantiationService.createInstance(Nfe,t,g._suggestWidgetSelectedItem,g._editorObs.versionId,g._positions,g._debounceValue,rO(g.editor.onDidChangeConfiguration,(function(){return g.editor.getOption(119).preview})),rO(g.editor.onDidChangeConfiguration,(function(){return g.editor.getOption(119).previewMode})),rO(g.editor.onDidChangeConfiguration,(function(){return g.editor.getOption(62).mode})),g._enabled)}})).recomputeInitiallyAndOnChange(g._store),g._ghostTexts=UP(g,(function(e){var t,n=g.model.read(e);return null!==(t=null==n?void 0:n.ghostTexts.read(e))&&void 0!==t?t:[]})),g._stablizedGhostTexts=function(e,t){var n=BP("result",[]),i=[];return t.add(XP((function(t){var r=e.read(t);TP((function(e){if(r.length!==i.length){i.length=r.length;for(var t=0;t<i.length;t++)i[t]||(i[t]=BP("item",r[t]));n.set(x(i),e)}i.forEach((function(t,n){return t.set(r[n],e)}))}))}))),n}(g._ghostTexts,g._store),g._ghostTextWidgets=function(e,t,n,i){var r=new fO(n,i),o=KP({debugReferenceFn:n,owner:e,onLastObserverRemoved:function(){r.dispose(),r=new fO(n)}},(function(e){return r.setItems(t.read(e)),r.getItems()}));return o}(g,g._stablizedGhostTexts,(function(e,t){return t.add(g._instantiationService.createInstance(bhe,g.editor,{ghostText:e,minReservedLineCount:nO(0),targetTextModel:g.model.map((function(e){return null==e?void 0:e.textModel}))}))})).recomputeInitiallyAndOnChange(g._store),g._playAccessibilitySignal=lO(g),g._fontFamily=rO(g,g.editor.onDidChangeConfiguration,(function(){return g.editor.getOption(62).fontFamily})),g._register(new she(g._contextKeyService,g.model)),g._register(i6(g._editorObs.onDidType,(function(e,t){var n;g._enabled.get()&&(null===(n=g.model.get())||void 0===n||n.trigger())}))),g._register(g._commandService.onDidExecuteCommand((function(t){new Set([S0.Tab.id,S0.DeleteLeft.id,S0.DeleteRight.id,uoe,"acceptSelectedSuggestion"]).has(t.commandId)&&e.hasTextFocus()&&g._enabled.get()&&g._editorObs.forceUpdate((function(e){var t;null===(t=g.model.get())||void 0===t||t.trigger(e)}))}))),g._register(i6(g._editorObs.selections,(function(e,t){var n;t.some((function(e){return 3===e.reason||"api"===e.source}))&&(null===(n=g.model.get())||void 0===n||n.stop())}))),g._register(g.editor.onDidBlurEditorWidget((function(){g._contextKeyService.getContextKeyValue("accessibleViewIsShown")||g._configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(62).keepOnBlur||moe.dropDownVisible||TP((function(e){var t;null===(t=g.model.get())||void 0===t||t.stop(e)}))}))),g._register(XP((function(e){var t,n=null===(t=g.model.read(e))||void 0===t?void 0:t.state.read(e);(null==n?void 0:n.suggestItem)?n.primaryGhostText.lineCount>=2&&g._suggestWidgetAdaptor.forceRenderingAbove():g._suggestWidgetAdaptor.stopForceRenderingAbove()}))),g._register(Mu((function(){g._suggestWidgetAdaptor.stopForceRenderingAbove()})));var p=hO(g,(function(e,t){var n,i=g.model.read(e),r=null==i?void 0:i.state.read(e);return g._suggestWidgetSelectedItem.get()?t:null==r||null===(n=r.inlineCompletion)||void 0===n?void 0:n.semanticId}));return g._register(function(e,t){var n=new Tu,i=i6(e,(function(e,i){n.clear(),t(e,i,n)}));return{dispose:function(){i.dispose(),n.dispose()}}}(UP((function(e){return g._playAccessibilitySignal.read(e),p.read(e),{}})),function(){var e=s((function(e,t,n){var i,r,o;return E(this,(function(e){switch(e.label){case 0:return i=v.model.get(),(r=null==i?void 0:i.state.get())&&i?(o=i.textModel.getLineContent(r.primaryGhostText.lineNumber),[4,mg(50,oc(n))]):[2];case 1:return e.sent(),[4,pO(v._suggestWidgetSelectedItem,Ra,(function(){return!1}),oc(n))];case 2:return e.sent(),[4,v._accessibilitySignalService.playSignal(VY.inlineSuggestion)];case 3:return e.sent(),v.editor.getOption(8)&&v._provideScreenReaderUpdate(r.primaryGhostText.renderForScreenReader(o)),[2]}}))}));return function(t,n,i){return e.apply(this,arguments)}}())),g._register(new goe(g.editor,g.model,g._instantiationService)),g._register(function(e){var t=new Tu,n=t.add(zp());return t.add(XP((function(t){n.setStyle(e.read(t))}))),t}(UP((function(e){var t=g._fontFamily.read(e);return""===t||"default"===t?"":"\n.monaco-editor .ghost-text-decoration,\n.monaco-editor .ghost-text-decoration-preview,\n.monaco-editor .ghost-text {\n\tfont-family: ".concat(t,";\n}")})))),g._register(g._configurationService.onDidChangeConfiguration((function(e){e.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&g.editor.updateOptions({inlineCompletionsAccessibilityVerbose:g._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}))),g.editor.updateOptions({inlineCompletionsAccessibilityVerbose:g._configurationService.getValue("accessibility.verbosity.inlineCompletions")}),g}return p(t,e),h(t,[{key:"playAccessibilitySignal",value:function(e){this._playAccessibilitySignal.trigger(e)}},{key:"_provideScreenReaderUpdate",value:function(e){var t,n=this._contextKeyService.getContextKeyValue("accessibleViewIsShown"),i=this._keybindingService.lookupKeybinding("editor.action.accessibleView");!n&&i&&this.editor.getOption(150)&&(t=Xa("showAccessibleViewHint","Inspect this in the accessible view ({0})",i.getAriaLabel())),_R(t?e+", "+t:e)}},{key:"shouldShowHoverAt",value:function(e){var t,n=null===(t=this.model.get())||void 0===t?void 0:t.primaryGhostText.get();return!!n&&n.parts.some((function(t){return e.containsPosition(new dd(n.lineNumber,t.column))}))}},{key:"shouldShowHoverAtViewZone",value:function(e){var t,n;return null!==(n=null===(t=this._ghostTextWidgets.get()[0])||void 0===t?void 0:t.ownsViewZone(e))&&void 0!==n&&n}}],[{key:"get",value:function(e){return e.getContribution(Uge.ID)}}]),t}(Ru),Uge=gn,gn.ID="editor.contrib.inlineCompletionsController",gn);qge=Uge=jge([Kge(1,Gm),Kge(2,Ky),Kge(3,qb),Kge(4,ay),Kge(5,Ix),Kge(6,wS),Kge(7,WY),Kge(8,ZI),Kge(9,mR)],qge);var Gge=function(e){function t(){return u(this,t),l(this,t,[{id:t.ID,label:Xa("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:Sy.and(p0.writable,she.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e,n;return E(this,(function(i){return null==(n=qge.get(t))||null===(e=n.model.get())||void 0===e||e.next(),[2]}))}))()}}]),t}(M_);Gge.ID=doe;var Zge=function(e){function t(){return u(this,t),l(this,t,[{id:t.ID,label:Xa("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:Sy.and(p0.writable,she.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e,n;return E(this,(function(i){return null==(n=qge.get(t))||null===(e=n.model.get())||void 0===e||e.previous(),[2]}))}))()}}]),t}(M_);Zge.ID=coe;var Yge=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.inlineSuggest.trigger",label:Xa("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:p0.writable}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e;return E(this,(function(n){switch(n.label){case 0:return e=qge.get(t),[4,PP(function(){var t=s((function(t){var n;return E(this,(function(i){switch(i.label){case 0:return[4,null==e||null===(n=e.model.get())||void 0===n?void 0:n.triggerExplicitly(t)];case 1:return i.sent(),null==e||e.playAccessibilitySignal(t),[2]}}))}));return function(e){return t.apply(this,arguments)}}())];case 1:return n.sent(),[2]}}))}))()}}]),t}(M_),Qge=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.inlineSuggest.acceptNextWord",label:Xa("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:Sy.and(p0.writable,she.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:Sy.and(p0.writable,she.inlineSuggestionVisible)},menuOpts:[{menuId:d_.InlineSuggestionToolbar,title:Xa("acceptWord","Accept Word"),group:"primary",order:2}]}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e,n;return E(this,(function(i){switch(i.label){case 0:return[4,null==(n=qge.get(t))||null===(e=n.model.get())||void 0===e?void 0:e.acceptNextWord(n.editor)];case 1:return i.sent(),[2]}}))}))()}}]),t}(M_),Xge=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.inlineSuggest.acceptNextLine",label:Xa("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:Sy.and(p0.writable,she.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:d_.InlineSuggestionToolbar,title:Xa("acceptLine","Accept Line"),group:"secondary",order:2}]}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e,n;return E(this,(function(i){switch(i.label){case 0:return[4,null==(n=qge.get(t))||null===(e=n.model.get())||void 0===e?void 0:e.acceptNextLine(n.editor)];case 1:return i.sent(),[2]}}))}))()}}]),t}(M_),$ge=function(e){function t(){return u(this,t),l(this,t,[{id:uoe,label:Xa("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:she.inlineSuggestionVisible,menuOpts:[{menuId:d_.InlineSuggestionToolbar,title:Xa("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:Sy.and(she.inlineSuggestionVisible,p0.tabMovesFocus.toNegated(),she.inlineSuggestionHasIndentationLessThanTabSize,Khe.Visible.toNegated(),p0.hoverFocused.toNegated())}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e,n;return E(this,(function(i){return(e=qge.get(t))&&(null===(n=e.model.get())||void 0===n||n.accept(e.editor),e.editor.focus()),[2]}))}))()}}]),t}(M_),Jge=function(e){function t(){return u(this,t),l(this,t,[{id:t.ID,label:Xa("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:she.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e;return E(this,(function(n){return e=qge.get(t),TP((function(t){var n;null==e||null===(n=e.model.get())||void 0===n||n.stop(t)})),[2]}))}))()}}]),t}(M_);Jge.ID="editor.action.inlineSuggest.hide";var eve=function(e){function t(){return u(this,t),l(this,t,[{id:t.ID,title:Xa("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:d_.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:Sy.equals("config.editor.inlineSuggest.showToolbar","always")}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var t,n,i;return E(this,(function(r){return t=e.get(qb),n=t.getValue("editor.inlineSuggest.showToolbar"),i="always"===n?"onHover":"always",t.updateValue("editor.inlineSuggest.showToolbar",i),[2]}))}))()}}]),t}(m_);eve.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";var tve=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},nve=function(e,t){return function(n,i){t(n,i,e)}},ive=function(){function e(t,n,i){u(this,e),this.owner=t,this.range=n,this.controller=i}return h(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}]),e}(),rve=function(){function e(t,n,i,r,o,a){u(this,e),this._editor=t,this._languageService=n,this._openerService=i,this.accessibilityService=r,this._instantiationService=o,this._telemetryService=a,this.hoverOrdinal=4}return h(e,[{key:"suggestHoverAnchor",value:function(e){var t=qge.get(this._editor);if(!t)return null;var n=e.target;if(8===n.type){var i=n.detail;if(t.shouldShowHoverAtViewZone(i.viewZoneId))return new zre(1e3,this,hd.fromPositions(this._editor.getModel().validatePosition(i.positionBefore||i.position)),e.event.posx,e.event.posy,!1)}if(7===n.type&&t.shouldShowHoverAt(n.range))return new zre(1e3,this,n.range,e.event.posx,e.event.posy,!1);if(6===n.type&&(n.detail.mightBeForeignElement&&t.shouldShowHoverAt(n.range)))return new zre(1e3,this,n.range,e.event.posx,e.event.posy,!1);return null}},{key:"computeSync",value:function(e,t){if("onHover"!==this._editor.getOption(62).showToolbar)return[];var n=qge.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new ive(this,e.range,n)]:[]}},{key:"renderHoverParts",value:function(e,t){var n=new Tu,i=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&n.add(this.renderScreenReaderText(e,i));var r=i.controller.model.get(),o=this._instantiationService.createInstance(moe,this._editor,!1,nO(null),r.selectedInlineCompletionIndex,r.inlineCompletionsCount,r.activeCommands),a=o.getDomNode();return e.fragment.appendChild(a),r.triggerExplicitly(),n.add(o),new Ure([{hoverPart:i,hoverElement:a,dispose:function(){n.dispose()}}])}},{key:"renderScreenReaderText",value:function(e,t){var n=this,i=new Tu,r=gm,o=r("div.hover-row.markdown-hover"),a=lm(o,r("div.hover-contents",f({},"aria-live","assertive"))),s=i.add(new lR({editor:this._editor},this._languageService,this._openerService)),l=function(t){i.add(s.onDidRenderAsync((function(){a.className="hover-contents code-hover-contents",e.onContentsChanged()})));var n=Xa("inlineSuggestionFollows","Suggestion:"),r=i.add(s.render((new oT).appendText(n).appendCodeblock("text",t)));a.replaceChildren(r.element)};return i.add(XP((function(e){var i,r=null===(i=t.controller.model.read(e))||void 0===i?void 0:i.primaryGhostText.read(e);if(r){var o=n._editor.getModel().getLineContent(r.lineNumber);l(r.renderForScreenReader(o))}else cm(a)}))),e.fragment.appendChild(o),i}}]),e}();rve=tve([nve(1,Jb),nve(2,xE),nve(3,mR),nve(4,Gm),nve(5,b_)],rve);var ove=new(function(){function e(){u(this,e),this._implementations=[]}return h(e,[{key:"register",value:function(e){var t=this;return this._implementations.push(e),{dispose:function(){var n=t._implementations.indexOf(e);-1!==n&&t._implementations.splice(n,1)}}}},{key:"getImplementations",value:function(){return this._implementations}}]),e}());B_(qge.ID,qge,3),O_(Yge),O_(Gge),O_(Zge),O_(Qge),O_(Xge),O_($ge),O_(Jge),y_(eve),jre.register(rve),ove.register(new function e(){u(this,e)});var ave,sve=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},lve=function(e,t){return function(n,i){t(n,i,e)}},uve=(vn=function(){function e(t,n,i,r){var o=this;u(this,e),this.textModelResolverService=n,this.languageService=i,this.languageFeaturesService=r,this.toUnhook=new Tu,this.toUnhookForKeyboard=new Tu,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=t,this.linkDecorations=this.editor.createDecorationsCollection();var a=new rae(t);this.toUnhook.add(a),this.toUnhook.add(a.onMouseMoveOrRelevantKeyDown((function(e){var t=C(e,2),n=t[0],i=t[1];o.startFindDefinitionFromMouse(n,null!=i?i:void 0)}))),this.toUnhook.add(a.onExecute((function(e){o.isEnabled(e)&&o.gotoDefinition(e.target.position,e.hasSideBySideModifier).catch((function(e){vu(e)})).finally((function(){o.removeLinkDecorations()}))}))),this.toUnhook.add(a.onCancel((function(){o.removeLinkDecorations(),o.currentWordAtPosition=null})))}return h(e,[{key:"startFindDefinitionFromCursor",value:function(e){var t=this;return s((function(){return E(this,(function(n){switch(n.label){case 0:return[4,t.startFindDefinition(e)];case 1:return n.sent(),t.toUnhookForKeyboard.add(t.editor.onDidChangeCursorPosition((function(){t.currentWordAtPosition=null,t.removeLinkDecorations(),t.toUnhookForKeyboard.clear()}))),t.toUnhookForKeyboard.add(t.editor.onKeyDown((function(e){e&&(t.currentWordAtPosition=null,t.removeLinkDecorations(),t.toUnhookForKeyboard.clear())}))),[2]}}))}))()}},{key:"startFindDefinitionFromMouse",value:function(e,t){if(!(9===e.target.type&&this.linkDecorations.length>0)){if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordAtPosition=null,void this.removeLinkDecorations();var n=e.target.position;this.startFindDefinition(n)}}},{key:"startFindDefinition",value:function(e){var t=this;return s((function(){var n,i,r,o,a,s,l,u,c,d,h,f,g;return E(this,(function(v){switch(v.label){case 0:if(t.toUnhookForKeyboard.clear(),!(i=e?null===(n=t.editor.getModel())||void 0===n?void 0:n.getWordAtPosition(e):null))return t.currentWordAtPosition=null,t.removeLinkDecorations(),[2];if(t.currentWordAtPosition&&t.currentWordAtPosition.startColumn===i.startColumn&&t.currentWordAtPosition.endColumn===i.endColumn&&t.currentWordAtPosition.word===i.word)return[2];t.currentWordAtPosition=i,r=new I9(t.editor,15),t.previousPromise&&(t.previousPromise.cancel(),t.previousPromise=null),t.previousPromise=hg((function(n){return t.findDefinition(e,n)})),v.label=1;case 1:return v.trys.push([1,3,,4]),[4,t.previousPromise];case 2:return o=v.sent(),[3,4];case 3:return vu(v.sent()),[2];case 4:if(!o||!o.length||!r.validate(t.editor))return t.removeLinkDecorations(),[2];if(a=o[0].originSelectionRange?hd.lift(o[0].originSelectionRange):new hd(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),o.length>1){s=a,l=!0,u=!1,c=void 0;try{for(d=o[Symbol.iterator]();!(l=(h=d.next()).done);l=!0)(f=h.value.originSelectionRange)&&(s=hd.plusRange(s,f))}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}t.addDecoration(s,(new oT).appendText(Xa("multipleResults","Click to show {0} definitions.",o.length)))}else{if(!(g=o[0]).uri)return[2];t.textModelResolverService.createModelReference(g.uri).then((function(e){if(e.object&&e.object.textEditorModel){var n=e.object.textEditorModel,i=g.range.startLineNumber;if(i<1||i>n.getLineCount())e.dispose();else{var r=t.getPreviewValue(n,i,g),o=t.languageService.guessLanguageIdByFilepathOrFirstLine(n.uri);t.addDecoration(a,r?(new oT).appendCodeblock(o||"",r):void 0),e.dispose()}}else e.dispose()}))}return[2]}}))}))()}},{key:"getPreviewValue",value:function(e,t,n){var i=n.range;return i.endLineNumber-i.startLineNumber>=ave.MAX_SOURCE_PREVIEW_LINES&&(i=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,i)}},{key:"stripIndentationFromPreviewRange",value:function(e,t,n){for(var i=e.getLineFirstNonWhitespaceColumn(t),r=t+1;r<n.endLineNumber;r++){var o=e.getLineFirstNonWhitespaceColumn(r);i=Math.min(i,o)}return e.getValueInRange(n).replace(new RegExp("^\\s{".concat(i-1,"}"),"gm"),"").trim()}},{key:"getPreviewRangeBasedOnIndentation",value:function(e,t){for(var n=e.getLineFirstNonWhitespaceColumn(t),i=Math.min(e.getLineCount(),t+ave.MAX_SOURCE_PREVIEW_LINES),r=t+1;r<i;r++){if(n===e.getLineFirstNonWhitespaceColumn(r))break}return new hd(t,1,r+1,1)}},{key:"addDecoration",value:function(e,t){var n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([n])}},{key:"removeLinkDecorations",value:function(){this.linkDecorations.clear()}},{key:"isEnabled",value:function(e,t){var n;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&6===e.target.type&&!((null===(n=e.target.detail.injectedText)||void 0===n?void 0:n.options)instanceof uU)&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}},{key:"findDefinition",value:function(e,t){var n=this.editor.getModel();return n?fse(this.languageFeaturesService.definitionProvider,n,e,!1,t):Promise.resolve(null)}},{key:"gotoDefinition",value:function(e,t){var n=this;return this.editor.setPosition(e),this.editor.invokeWithinContext((function(e){var i=!t&&n.editor.getOption(89)&&!n.isInPeekEditor(e);return new wse({openToSide:t,openInPeek:i,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(e)}))}},{key:"isInPeekEditor",value:function(e){var t=e.get(Ky);return pae.inPeekEditor.getValue(t)}},{key:"dispose",value:function(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}}],[{key:"get",value:function(e){return e.getContribution(ave.ID)}}]),e}(),ave=vn,vn.ID="editor.contrib.gotodefinitionatposition",vn.MAX_SOURCE_PREVIEW_LINES=8,vn);B_((uve=ave=sve([lve(1,Xm),lve(2,Jb),lve(3,wS)],uve)).ID,uve,2);var cve=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},dve=function(e,t){return function(n,i){t(n,i,e)}},hve=function e(t,n,i){u(this,e),this.marker=t,this.index=n,this.total=i},fve=function(){function e(t,n,i){var r=this;u(this,e),this._markerService=n,this._configService=i,this._onDidChange=new Zu,this.onDidChange=this._onDidChange.event,this._dispoables=new Tu,this._markers=[],this._nextIdx=-1,ed.isUri(t)?this._resourceFilter=function(e){return e.toString()===t.toString()}:t&&(this._resourceFilter=t);var o=this._configService.getValue("problems.sortOrder"),a=function(e,t){var n=tf(e.resource.toString(),t.resource.toString());return 0===n&&(n="position"===o?hd.compareRangesUsingStarts(e,t)||EW.compare(e.severity,t.severity):EW.compare(e.severity,t.severity)||hd.compareRangesUsingStarts(e,t)),n},s=function(){r._markers=r._markerService.read({resource:ed.isUri(t)?t:void 0,severities:EW.Error|EW.Warning|EW.Info}),"function"==typeof t&&(r._markers=r._markers.filter((function(e){return r._resourceFilter(e.resource)}))),r._markers.sort(a)};s(),this._dispoables.add(n.onMarkerChanged((function(e){r._resourceFilter&&!e.some((function(e){return r._resourceFilter(e)}))||(s(),r._nextIdx=-1,r._onDidChange.fire())})))}return h(e,[{key:"dispose",value:function(){this._dispoables.dispose(),this._onDidChange.dispose()}},{key:"matches",value:function(e){return!this._resourceFilter&&!e||!(!this._resourceFilter||!e)&&this._resourceFilter(e)}},{key:"selected",get:function(){var e=this._markers[this._nextIdx];return e&&new hve(e,this._nextIdx+1,this._markers.length)}},{key:"_initIdx",value:function(e,t,n){var i=!1,r=this._markers.findIndex((function(t){return t.resource.toString()===e.uri.toString()}));r<0&&(r=ta(this._markers,{resource:e.uri},(function(e,t){return tf(e.resource.toString(),t.resource.toString())})),r<0&&(r=~r));for(var o=r;o<this._markers.length;o++){var a=hd.lift(this._markers[o]);if(a.isEmpty()){var s=e.getWordAtPosition(a.getStartPosition());s&&(a=new hd(a.startLineNumber,s.startColumn,a.startLineNumber,s.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=o,i=!0;break}if(this._markers[o].resource.toString()!==e.uri.toString())break}i||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}},{key:"resetIndex",value:function(){this._nextIdx=-1}},{key:"move",value:function(e,t,n){if(0===this._markers.length)return!1;var i=this._nextIdx;return-1===this._nextIdx?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),i!==this._nextIdx}},{key:"find",value:function(e,t){var n=this._markers.findIndex((function(t){return t.resource.toString()===e.toString()}));if(!(n<0))for(;n<this._markers.length;n++)if(hd.containsPosition(this._markers[n],t))return new hve(this._markers[n],n+1,this._markers.length)}}]),e}();fve=cve([dve(1,RW),dve(2,qb)],fve);var gve,vve=Zm("IMarkerNavigationService"),pve=function(){function e(t,n){u(this,e),this._markerService=t,this._configService=n,this._provider=new Hs}return h(e,[{key:"getMarkerList",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._provider[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value.getMarkerList(e);if(a)return a}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return new fve(e,this._markerService,this._configService)}}]),e}();nk(vve,pve=cve([dve(0,RW),dve(1,qb)],pve),1),function(e){e.className=function(e){switch(e){case tx.Ignore:return"severity-ignore "+ny.asClassName(bd.info);case tx.Info:return ny.asClassName(bd.info);case tx.Warning:return ny.asClassName(bd.warning);case tx.Error:return ny.asClassName(bd.error);default:return""}}}(gve||(gve={}));var mve,yve=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},_ve=function(e,t){return function(n,i){t(n,i,e)}},bve=function(){function e(t,n,i,r,o){var a=this;u(this,e),this._openerService=r,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new Tu,this._editor=n;var s=document.createElement("div");s.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),s.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),s.appendChild(this._relatedBlock),this._disposables.add(hp(this._relatedBlock,"click",(function(e){e.preventDefault();var t=a._relatedDiagnostics.get(e.target);t&&i(t)}))),this._scrollable=new pE(s,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),t.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll((function(e){s.style.left="-".concat(e.scrollLeft,"px"),s.style.top="-".concat(e.scrollTop,"px")}))),this._disposables.add(this._scrollable)}return h(e,[{key:"dispose",value:function(){Iu(this._disposables)}},{key:"update",value:function(e){var t=this,n=e.source,i=e.message,r=e.relatedInformation,o=e.code,a=((null==n?void 0:n.length)||0)+2;o&&(a+="string"==typeof o?o.length:o.value.length);var s=Xh(i);this._lines=s.length,this._longestLineLength=0;var l=!0,u=!1,c=void 0;try{for(var d,h=s[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;this._longestLineLength=Math.max(f.length+a,this._longestLineLength)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}lp(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);var g=this._messageBlock,v=!0,p=!1,m=void 0;try{for(var y,_=s[Symbol.iterator]();!(v=(y=_.next()).done);v=!0){var b=y.value;(g=document.createElement("div")).innerText=b,""===b&&(g.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(g)}}catch(e){p=!0,m=e}finally{try{v||null==_.return||_.return()}finally{if(p)throw m}}if(n||o){var k=document.createElement("span");if(k.classList.add("details"),g.appendChild(k),n){var w=document.createElement("span");w.innerText=n,w.classList.add("source"),k.appendChild(w)}if(o)if("string"==typeof o){var C=document.createElement("span");C.innerText="(".concat(o,")"),C.classList.add("code"),k.appendChild(C)}else{this._codeLink=gm("a.code-link"),this._codeLink.setAttribute("href","".concat(o.target.toString())),this._codeLink.onclick=function(e){t._openerService.open(o.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()},lm(this._codeLink,gm("span")).innerText=o.value,k.appendChild(this._codeLink)}}if(lp(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),ua(r)){var S=this._relatedBlock.appendChild(document.createElement("div"));S.style.paddingTop="".concat(Math.floor(.66*this._editor.getOption(67)),"px"),this._lines+=1;var x=!0,L=!1,D=void 0;try{for(var N,I=r[Symbol.iterator]();!(x=(N=I.next()).done);x=!0){var E=N.value,M=document.createElement("div"),T=document.createElement("a");T.classList.add("filename"),T.innerText="".concat(this._labelService.getUriBasenameLabel(E.resource),"(").concat(E.startLineNumber,", ").concat(E.startColumn,"): "),T.title=this._labelService.getUriLabel(E.resource),this._relatedDiagnostics.set(T,E);var R=document.createElement("span");R.innerText=E.message,M.appendChild(T),M.appendChild(R),this._lines+=1,S.appendChild(M)}}catch(e){L=!0,D=e}finally{try{x||null==I.return||I.return()}finally{if(L)throw D}}}var A=this._editor.getOption(50),P=Math.ceil(A.typicalFullwidthCharacterWidth*this._longestLineLength*.75),O=A.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:P,scrollHeight:O})}},{key:"layout",value:function(e,t){this._scrollable.getDomNode().style.height="".concat(e,"px"),this._scrollable.getDomNode().style.width="".concat(t,"px"),this._scrollable.setScrollDimensions({width:t,height:e})}},{key:"getHeightInLines",value:function(){return Math.min(17,this._lines)}},{key:"getAriaLabel",value:function(e){var t="";switch(e.severity){case EW.Error:t=Xa("Error","Error");break;case EW.Warning:t=Xa("Warning","Warning");break;case EW.Info:t=Xa("Info","Info");break;case EW.Hint:t=Xa("Hint","Hint")}var n=Xa("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn),i=this._editor.getModel();if(i&&e.startLineNumber<=i.getLineCount()&&e.startLineNumber>=1){var r=i.getLineContent(e.startLineNumber);n="".concat(r,", ").concat(n)}return n}}]),e}(),kve=(pn=function(e){function t(e,n,i,r,o,a,s){var c;return u(this,t),(c=l(this,t,[e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},o]))._themeService=n,c._openerService=i,c._menuService=r,c._contextKeyService=a,c._labelService=s,c._callOnDispose=new Tu,c._onDidSelectRelatedInformation=new Zu,c.onDidSelectRelatedInformation=c._onDidSelectRelatedInformation.event,c._severity=EW.Warning,c._backgroundColor=XC.white,c._applyTheme(n.getColorTheme()),c._callOnDispose.add(n.onDidColorThemeChange(c._applyTheme.bind(c))),c.create(),c}return p(t,e),h(t,[{key:"_applyTheme",value:function(e){this._backgroundColor=e.getColor(Tve);var t=Lve,n=Dve;this._severity===EW.Warning?(t=Nve,n=Ive):this._severity===EW.Info&&(t=Eve,n=Mve);var i=e.getColor(t),r=e.getColor(n);this.style({arrowColor:i,frameColor:i,headerBackgroundColor:r,primaryHeadingColor:e.getColor(xae),secondaryHeadingColor:e.getColor(Lae)})}},{key:"_applyStyles",value:function(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),g(v(t.prototype),"_applyStyles",this).call(this)}},{key:"dispose",value:function(){this._callOnDispose.dispose(),g(v(t.prototype),"dispose",this).call(this)}},{key:"_fillHead",value:function(e){var n=this;g(v(t.prototype),"_fillHead",this).call(this,e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun((function(e){return n.editor.focus()})));var i=[];tW(this._menuService.getMenuActions(mve.TitleMenu,this._contextKeyService),i),this._actionbarWidget.push(i,{label:!1,icon:!0,index:0})}},{key:"_fillTitleIcon",value:function(e){this._icon=lm(e,gm(""))}},{key:"_fillBody",value:function(e){var t=this;this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new bve(this._container,this.editor,(function(e){return t._onDidSelectRelatedInformation.fire(e)}),this._openerService,this._labelService),this._disposables.add(this._message)}},{key:"show",value:function(){throw new Error("call showAtMarker")}},{key:"showAtMarker",value:function(e,n,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());var r=hd.lift(e),o=this.editor.getPosition(),a=o&&r.containsPosition(o)?o:r.getStartPosition();g(v(t.prototype),"show",this).call(this,a,this.computeRequiredHeight());var s=this.editor.getModel();if(s){var l=i>1?Xa("problems","{0} of {1} problems",n,i):Xa("change","{0} of {1} problem",n,i);this.setTitle(YM(s.uri),l)}this._icon.className="codicon ".concat(gve.className(EW.toSeverity(this._severity))),this.editor.revealPositionNearTop(a,0),this.editor.focus()}},{key:"updateMarker",value:function(e){this._container.classList.remove("stale"),this._message.update(e)}},{key:"showStale",value:function(){this._container.classList.add("stale"),this._relayout()}},{key:"_doLayoutBody",value:function(e,n){g(v(t.prototype),"_doLayoutBody",this).call(this,e,n),this._heightInPixel=e,this._message.layout(e,n),this._container.style.height="".concat(e,"px")}},{key:"_onWidth",value:function(e){this._message.layout(this._heightInPixel,e)}},{key:"_relayout",value:function(){g(v(t.prototype),"_relayout",this).call(this,this.computeRequiredHeight())}},{key:"computeRequiredHeight",value:function(){return 3+this._message.getHeightInLines()}}]),t}(Cae),mve=pn,pn.TitleMenu=new d_("gotoErrorTitleMenu"),pn);kve=mve=yve([_ve(1,PS),_ve(2,xE),_ve(3,h_),_ve(4,Gm),_ve(5,Ky),_ve(6,PA)],kve);var wve,Cve=OL(aD,sD),Sve=OL(uD,cD),xve=OL(dD,hD),Lve=TL("editorMarkerNavigationError.background",{dark:Cve,light:Cve,hcDark:KL,hcLight:KL},Xa("editorMarkerNavigationError","Editor marker navigation widget error color.")),Dve=TL("editorMarkerNavigationError.headerBackground",{dark:PL(Lve,.1),light:PL(Lve,.1),hcDark:null,hcLight:null},Xa("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),Nve=TL("editorMarkerNavigationWarning.background",{dark:Sve,light:Sve,hcDark:KL,hcLight:KL},Xa("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),Ive=TL("editorMarkerNavigationWarning.headerBackground",{dark:PL(Nve,.1),light:PL(Nve,.1),hcDark:"#0C141F",hcLight:PL(Nve,.2)},Xa("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),Eve=TL("editorMarkerNavigationInfo.background",{dark:xve,light:xve,hcDark:KL,hcLight:KL},Xa("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),Mve=TL("editorMarkerNavigationInfo.headerBackground",{dark:PL(Eve,.1),light:PL(Eve,.1),hcDark:null,hcLight:null},Xa("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),Tve=TL("editorMarkerNavigation.background",tD,Xa("editorMarkerNavigationBackground","Editor marker navigation widget background.")),Rve=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ave=function(e,t){return function(n,i){t(n,i,e)}},Pve=(mn=function(){function e(t,n,i,r,o){u(this,e),this._markerNavigationService=n,this._contextKeyService=i,this._editorService=r,this._instantiationService=o,this._sessionDispoables=new Tu,this._editor=t,this._widgetVisible=zve.bindTo(this._contextKeyService)}return h(e,[{key:"dispose",value:function(){this._cleanUp(),this._sessionDispoables.dispose()}},{key:"_cleanUp",value:function(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}},{key:"_getOrCreateModel",value:function(e){var t=this;if(this._model&&this._model.matches(e))return this._model;var n=!1;return this._model&&(n=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),n&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(kve,this._editor),this._widget.onDidClose((function(){return t.close()}),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition((function(e){var n,i,r;(null===(n=t._model)||void 0===n?void 0:n.selected)&&hd.containsPosition(null===(i=t._model)||void 0===i?void 0:i.selected.marker,e.position)||(null===(r=t._model)||void 0===r||r.resetIndex())}))),this._sessionDispoables.add(this._model.onDidChange((function(){if(t._widget&&t._widget.position&&t._model){var e=t._model.find(t._editor.getModel().uri,t._widget.position);e?t._widget.updateMarker(e.marker):t._widget.showStale()}}))),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation((function(e){t._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:hd.lift(e).collapseToStart()}},t._editor),t.close(!1)}))),this._sessionDispoables.add(this._editor.onDidChangeModel((function(){return t._cleanUp()}))),this._model}},{key:"close",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._cleanUp(),e&&this._editor.focus()}},{key:"showAtMarker",value:function(e){if(this._editor.hasModel()){var t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new dd(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}},{key:"nagivate",value:function(e,t){var n=this;return s((function(){var i,r,o,a;return E(this,(function(s){switch(s.label){case 0:return n._editor.hasModel()?((i=n._getOrCreateModel(t?void 0:n._editor.getModel().uri)).move(e,n._editor.getModel(),n._editor.getPosition()),i.selected?i.selected.marker.resource.toString()===n._editor.getModel().uri.toString()?[3,2]:(n._cleanUp(),[4,n._editorService.openCodeEditor({resource:i.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:i.selected.marker}},n._editor)]):[2]):[3,3];case 1:return(r=s.sent())&&(null===(o=wve.get(r))||void 0===o||o.close(),null===(a=wve.get(r))||void 0===a||a.nagivate(e,t)),[3,3];case 2:n._widget.showAtMarker(i.selected.marker,i.selected.index,i.selected.total),s.label=3;case 3:return[2]}}))}))()}}],[{key:"get",value:function(e){return e.getContribution(wve.ID)}}]),e}(),wve=mn,mn.ID="editor.contrib.markerController",mn);Pve=wve=Rve([Ave(1,vve),Ave(2,Ky),Ave(3,Ym),Ave(4,Gm)],Pve);var Ove=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[i]))._next=e,r._multiFile=n,r}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=this;return s((function(){var e;return E(this,(function(i){return t.hasModel()&&(null===(e=Pve.get(t))||void 0===e||e.nagivate(n._next,n._multiFile)),[2]}))}))()}}]),t}(M_),Fve=function(e){function t(){return u(this,t),l(this,t,[!0,!1,{id:t.ID,label:t.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:p0.focus,primary:578,weight:100},menuOpts:{menuId:kve.TitleMenu,title:t.LABEL,icon:IZ("marker-navigation-next",bd.arrowDown,Xa("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}}])}return p(t,e),t}(Ove);Fve.ID="editor.action.marker.next",Fve.LABEL=Xa("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");var Wve=function(e){function t(){return u(this,t),l(this,t,[!1,!1,{id:t.ID,label:t.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:p0.focus,primary:1602,weight:100},menuOpts:{menuId:kve.TitleMenu,title:t.LABEL,icon:IZ("marker-navigation-previous",bd.arrowUp,Xa("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}}])}return p(t,e),t}(Ove);Wve.ID="editor.action.marker.prev",Wve.LABEL=Xa("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");var Bve=function(e){function t(){return u(this,t),l(this,t,[!0,!0,{id:"editor.action.marker.nextInFiles",label:Xa("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:p0.focus,primary:66,weight:100},menuOpts:{menuId:d_.MenubarGoMenu,title:Xa({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}}])}return p(t,e),t}(Ove),Hve=function(e){function t(){return u(this,t),l(this,t,[!1,!0,{id:"editor.action.marker.prevInFiles",label:Xa("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:p0.focus,primary:1090,weight:100},menuOpts:{menuId:d_.MenubarGoMenu,title:Xa({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}}])}return p(t,e),t}(Ove);B_(Pve.ID,Pve,4),O_(Fve),O_(Wve),O_(Bve),O_(Hve);var Vve,zve=new jy("markersNavigationVisible",!1);P_(new(E_.bindToContribution(Pve.get))({id:"closeMarkersNavigation",precondition:zve,handler:function(e){return e.close()},kbOpts:{weight:150,kbExpr:p0.focus,primary:9,secondary:[1033]}})),function(e){e.NoAutoFocus="noAutoFocus",e.FocusIfVisible="focusIfVisible",e.AutoFocusImmediately="autoFocusImmediately"}(Vve||(Vve={}));var Uve=function(e){function t(){return u(this,t),l(this,t,[{id:roe,label:Xa({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse."]},"Show or Focus Hover"),metadata:{description:Ja("showOrFocusHoverDescription","Show or focus the editor hover which shows documentation, references, and other content for a symbol at the current cursor position."),args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[Vve.NoAutoFocus,Vve.FocusIfVisible,Vve.AutoFocusImmediately],enumDescriptions:[Xa("showOrFocusHover.focus.noAutoFocus","The hover will not automatically take focus."),Xa("showOrFocusHover.focus.focusIfVisible","The hover will take focus only if it is already visible."),Xa("showOrFocusHover.focus.autoFocusImmediately","The hover will automatically take focus when it appears.")],default:Vve.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2087),weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){if(t.hasModel()){var i=ele.get(t);if(i){var r=null==n?void 0:n.focus,o=Vve.FocusIfVisible;Object.values(Vve).includes(r)?o=r:"boolean"==typeof r&&r&&(o=Vve.AutoFocusImmediately);var a=function(e){var n=t.getPosition(),r=new hd(n.lineNumber,n.column,n.lineNumber,n.column);i.showContentHover(r,1,1,e)},s=2===t.getOption(2);i.isHoverVisible?o!==Vve.NoAutoFocus?i.focus():a(s):a(s||o===Vve.AutoFocusImmediately)}}}}]),t}(M_),jve=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.showDefinitionPreviewHover",label:Xa({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0,metadata:{description:Ja("showDefinitionPreviewHoverDescription","Show the definition preview hover in the editor.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=ele.get(t);if(n){var i=t.getPosition();if(i){var r=new hd(i.lineNumber,i.column,i.lineNumber,i.column),o=uve.get(t);if(o)o.startFindDefinitionFromCursor(i).then((function(){n.showContentHover(r,1,1,!0)}))}}}}]),t}(M_),Kve=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.scrollUpHover",label:Xa({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:p0.hoverFocused,kbOpts:{kbExpr:p0.hoverFocused,primary:16,weight:100},metadata:{description:Ja("scrollUpHoverDescription","Scroll up the editor hover.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=ele.get(t);n&&n.scrollUp()}}]),t}(M_),qve=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.scrollDownHover",label:Xa({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:p0.hoverFocused,kbOpts:{kbExpr:p0.hoverFocused,primary:18,weight:100},metadata:{description:Ja("scrollDownHoverDescription","Scroll down the editor hover.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=ele.get(t);n&&n.scrollDown()}}]),t}(M_),Gve=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.scrollLeftHover",label:Xa({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:p0.hoverFocused,kbOpts:{kbExpr:p0.hoverFocused,primary:15,weight:100},metadata:{description:Ja("scrollLeftHoverDescription","Scroll left the editor hover.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=ele.get(t);n&&n.scrollLeft()}}]),t}(M_),Zve=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.scrollRightHover",label:Xa({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:p0.hoverFocused,kbOpts:{kbExpr:p0.hoverFocused,primary:17,weight:100},metadata:{description:Ja("scrollRightHoverDescription","Scroll right the editor hover.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=ele.get(t);n&&n.scrollRight()}}]),t}(M_),Yve=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.pageUpHover",label:Xa({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:p0.hoverFocused,kbOpts:{kbExpr:p0.hoverFocused,primary:11,secondary:[528],weight:100},metadata:{description:Ja("pageUpHoverDescription","Page up the editor hover.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=ele.get(t);n&&n.pageUp()}}]),t}(M_),Qve=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.pageDownHover",label:Xa({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:p0.hoverFocused,kbOpts:{kbExpr:p0.hoverFocused,primary:12,secondary:[530],weight:100},metadata:{description:Ja("pageDownHoverDescription","Page down the editor hover.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=ele.get(t);n&&n.pageDown()}}]),t}(M_),Xve=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.goToTopHover",label:Xa({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:p0.hoverFocused,kbOpts:{kbExpr:p0.hoverFocused,primary:14,secondary:[2064],weight:100},metadata:{description:Ja("goToTopHoverDescription","Go to the top of the editor hover.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=ele.get(t);n&&n.goToTop()}}]),t}(M_),$ve=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.goToBottomHover",label:Xa({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:p0.hoverFocused,kbOpts:{kbExpr:p0.hoverFocused,primary:13,secondary:[2066],weight:100},metadata:{description:Ja("goToBottomHoverDescription","Go to the bottom of the editor hover.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=ele.get(t);n&&n.goToBottom()}}]),t}(M_),Jve=function(e){function t(){return u(this,t),l(this,t,[{id:ooe,label:aoe,alias:"Increase Hover Verbosity Level",precondition:p0.hoverVisible}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i=ele.get(t);if(i){var r=void 0!==(null==n?void 0:n.index)?n.index:i.focusedHoverPartIndex();i.updateHoverVerbosityLevel(md.Increase,r,null==n?void 0:n.focus)}}}]),t}(M_),epe=function(e){function t(){return u(this,t),l(this,t,[{id:soe,label:loe,alias:"Decrease Hover Verbosity Level",precondition:p0.hoverVisible}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i,r=ele.get(t);if(r){var o=void 0!==(null==n?void 0:n.index)?n.index:r.focusedHoverPartIndex();null===(i=ele.get(t))||void 0===i||i.updateHoverVerbosityLevel(md.Decrease,o,null==n?void 0:n.focus)}}}]),t}(M_),tpe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},npe=function(e,t){return function(n,i){t(n,i,e)}},ipe=gm,rpe=function(){function e(t,n,i){u(this,e),this.owner=t,this.range=n,this.marker=i}return h(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}]),e}(),ope={type:1,filter:{include:Tne.QuickFix},triggerAction:Mne.QuickFixHover},ape=function(){function e(t,n,i,r){u(this,e),this._editor=t,this._markerDecorationsService=n,this._openerService=i,this._languageFeaturesService=r,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}return h(e,[{key:"computeSync",value:function(e,t){if(!this._editor.hasModel()||1!==e.type&&!e.supportsMarkerHover)return[];var n=this._editor.getModel(),i=e.range.startLineNumber,r=n.getLineMaxColumn(i),o=[],a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value,h=d.range.startLineNumber===i?d.range.startColumn:1,f=d.range.endLineNumber===i?d.range.endColumn:r,g=this._markerDecorationsService.getMarker(n.uri,d);if(g){var v=new hd(e.range.startLineNumber,h,e.range.startLineNumber,f);o.push(new rpe(this,v,g))}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return o}},{key:"renderHoverParts",value:function(e,t){var n=this;if(!t.length)return new Ure([]);var i=new Tu,r=[];t.forEach((function(t){var i=n._renderMarkerHover(t);e.fragment.appendChild(i.hoverElement),r.push(i)}));var o=1===t.length?t[0]:t.sort((function(e,t){return EW.compare(e.marker.severity,t.marker.severity)}))[0];return this.renderMarkerStatusbar(e,o,i),new Ure(r)}},{key:"_renderMarkerHover",value:function(e){var t=this,n=new Tu,i=ipe("div.hover-row"),r=lm(i,ipe("div.marker.hover-contents")),o=e.marker,a=o.source,s=o.message,l=o.code,u=o.relatedInformation;this._editor.applyFontInfo(r);var c=lm(r,ipe("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=s,a||l)if(l&&"string"!=typeof l){var d=ipe("span");if(a)lm(d,ipe("span")).innerText=a;var h=lm(d,ipe("a.code-link"));h.setAttribute("href",l.target.toString()),n.add(cp(h,"click",(function(e){t._openerService.open(l.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()}))),lm(h,ipe("span")).innerText=l.value;var f=lm(r,d);f.style.opacity="0.6",f.style.paddingLeft="6px"}else{var g=lm(r,ipe("span"));g.style.opacity="0.6",g.style.paddingLeft="6px",g.innerText=a&&l?"".concat(a,"(").concat(l,")"):a||"(".concat(l,")")}if(ua(u)){var v=!0,p=!1,m=void 0;try{for(var y,_,b=function(){var e=_.value,i=e.message,o=e.resource,a=e.startLineNumber,s=e.startColumn,l=lm(r,ipe("div"));l.style.marginTop="8px";var u=lm(l,ipe("a"));u.innerText="".concat(YM(o),"(").concat(a,", ").concat(s,"): "),u.style.cursor="pointer",n.add(cp(u,"click",(function(e){if(e.stopPropagation(),e.preventDefault(),t._openerService){var n={selection:{startLineNumber:a,startColumn:s}};t._openerService.open(o,{fromUserGesture:!0,editorOptions:n}).catch(vu)}})));var c=lm(l,ipe("span"));c.innerText=i,y._editor.applyFontInfo(c)},k=u[Symbol.iterator]();!(v=(_=k.next()).done);v=!0)y=this,b()}catch(e){p=!0,m=e}finally{try{v||null==k.return||k.return()}finally{if(p)throw m}}}return{hoverPart:e,hoverElement:i,dispose:function(){return n.dispose()}}}},{key:"renderMarkerStatusbar",value:function(e,t,n){var i=this;if(t.marker.severity===EW.Error||t.marker.severity===EW.Warning||t.marker.severity===EW.Info){var r=Pve.get(this._editor);r&&e.statusBar.addAction({label:Xa("view problem","View Problem"),commandId:Fve.ID,run:function(){e.hide(),r.showAtMarker(t.marker),i._editor.focus()}})}if(!this._editor.getOption(92)){var o=e.statusBar.append(ipe("div"));this.recentMarkerCodeActionsInfo&&(MW.makeKey(this.recentMarkerCodeActionsInfo.marker)===MW.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(o.textContent=Xa("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);var a=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?Ru.None:yg((function(){return o.textContent=Xa("checkingForQuickFixes","Checking for quick fixes...")}),200,n);o.textContent||(o.textContent=String.fromCharCode(160));var s=this.getCodeActions(t.marker);n.add(Mu((function(){return s.cancel()}))),s.then((function(r){if(a.dispose(),i.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:r.validActions.length>0},!i.recentMarkerCodeActionsInfo.hasCodeActions)return r.dispose(),void(o.textContent=Xa("noQuickFixes","No quick fixes available"));o.style.display="none";var s=!1;n.add(Mu((function(){s||r.dispose()}))),e.statusBar.addAction({label:Xa("quick fixes","Quick Fix..."),commandId:Wne,run:function(t){s=!0;var n=Wie.get(i._editor),o=xp(t);e.hide(),null==n||n.showCodeActions(ope,r,{x:o.left,y:o.top,width:o.width,height:o.height})}})}),vu)}}},{key:"getCodeActions",value:function(e){var t=this;return hg((function(n){return qne(t._languageFeaturesService.codeActionProvider,t._editor.getModel(),new hd(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),ope,FA.None,n)}))}}]),e}();ape=tpe([npe(1,FB),npe(2,xE),npe(3,wS)],ape);var spe,lpe=function(){function e(t){u(this,e),this._editor=t,this._lineNumber=-1,this._laneOrLine=hw.Center}return h(e,[{key:"lineNumber",get:function(){return this._lineNumber},set:function(e){this._lineNumber=e}},{key:"lane",get:function(){return this._laneOrLine},set:function(e){this._laneOrLine=e}},{key:"computeSync",value:function(){var e=function(e){return{value:e}},t=this._editor.getLineDecorations(this._lineNumber),n=[],i="lineNo"===this._laneOrLine;if(!t)return n;var r=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u,c,d,h=s.value,f=null!==(d=null===(c=h.options.glyphMargin)||void 0===c?void 0:c.position)&&void 0!==d?d:hw.Center;if(i||f===this._laneOrLine){var g=i?h.options.lineNumberHoverMessage:h.options.glyphMarginHoverMessage;g&&!aT(g)&&(u=n).push.apply(u,x(ma(g).map(e)))}}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}}]),e}(),upe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},cpe=function(e,t){return function(n,i){t(n,i,e)}},dpe=gm,hpe=(yn=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._renderDisposeables=r._register(new Tu),r._editor=e,r._isVisible=!1,r._messages=[],r._hover=r._register(new bE),r._hover.containerDomNode.classList.toggle("hidden",!r._isVisible),r._markdownRenderer=r._register(new lR({editor:r._editor},n,i)),r._computer=new lpe(r._editor),r._hoverOperation=r._register(new Soe(r._editor,r._computer)),r._register(r._hoverOperation.onResult((function(e){r._withResult(e.value)}))),r._register(r._editor.onDidChangeModelDecorations((function(){return r._onModelDecorationsChanged()}))),r._register(r._editor.onDidChangeConfiguration((function(e){e.hasChanged(50)&&r._updateFont()}))),r._register(hp(r._hover.containerDomNode,"mouseleave",(function(e){r._onMouseLeave(e)}))),r._editor.addOverlayWidget(r),r}return p(t,e),h(t,[{key:"dispose",value:function(){this._editor.removeOverlayWidget(this),g(v(t.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return spe.ID}},{key:"getDomNode",value:function(){return this._hover.containerDomNode}},{key:"getPosition",value:function(){return null}},{key:"_updateFont",value:function(){var e=this;Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((function(t){return e._editor.applyFontInfo(t)}))}},{key:"_onModelDecorationsChanged",value:function(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}},{key:"showsOrWillShow",value:function(e){var t=e.target;return 2===t.type&&t.detail.glyphMarginLane?(this._startShowingAt(t.position.lineNumber,t.detail.glyphMarginLane),!0):3===t.type&&(this._startShowingAt(t.position.lineNumber,"lineNo"),!0)}},{key:"_startShowingAt",value:function(e,t){this._computer.lineNumber===e&&this._computer.lane===t||(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._computer.lane=t,this._hoverOperation.start(0))}},{key:"hide",value:function(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}},{key:"_withResult",value:function(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}},{key:"_renderMessages",value:function(e,t){this._renderDisposeables.clear();var n=document.createDocumentFragment(),i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=dpe("div.hover-row.markdown-hover"),c=lm(u,dpe("div.hover-contents")),d=this._renderDisposeables.add(this._markdownRenderer.render(l.value));c.appendChild(d.element),n.appendChild(u)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}this._updateContents(n),this._showAt(e)}},{key:"_updateContents",value:function(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}},{key:"_showAt",value:function(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));var t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),i=this._editor.getScrollTop(),r=this._editor.getOption(67),o=n-i-(this._hover.containerDomNode.clientHeight-r)/2,a=t.glyphMarginLeft+t.glyphMarginWidth+("lineNo"===this._computer.lane?t.lineNumbersWidth:0);this._hover.containerDomNode.style.left="".concat(a,"px"),this._hover.containerDomNode.style.top="".concat(Math.max(Math.round(o),0),"px")}},{key:"_onMouseLeave",value:function(e){var t=this._editor.getDomNode();(!t||!koe(t,e.x,e.y))&&this.hide()}}]),t}(Ru),spe=yn,yn.ID="editor.contrib.modesGlyphHoverWidget",yn);hpe=spe=upe([cpe(1,Jb),cpe(2,xE)],hpe);var fpe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},gpe=function(e,t){return function(n,i){t(n,i,e)}},vpe=(_n=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._editor=e,i._instantiationService=n,i.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,i._listenersStore=new Tu,i._hoverState={mouseDown:!1},i._reactToEditorMouseMoveRunner=i._register(new Sg((function(){return i._reactToEditorMouseMove(i._mouseMoveEvent)}),0)),i._hookListeners(),i._register(i._editor.onDidChangeConfiguration((function(e){e.hasChanged(60)&&(i._unhookListeners(),i._hookListeners())}))),i}return p(t,e),h(t,[{key:"_hookListeners",value:function(){var e=this,t=this._editor.getOption(60);this._hoverSettings={enabled:t.enabled,sticky:t.sticky,hidingDelay:t.hidingDelay},t.enabled?(this._listenersStore.add(this._editor.onMouseDown((function(t){return e._onEditorMouseDown(t)}))),this._listenersStore.add(this._editor.onMouseUp((function(){return e._onEditorMouseUp()}))),this._listenersStore.add(this._editor.onMouseMove((function(t){return e._onEditorMouseMove(t)}))),this._listenersStore.add(this._editor.onKeyDown((function(t){return e._onKeyDown(t)})))):(this._listenersStore.add(this._editor.onMouseMove((function(t){return e._onEditorMouseMove(t)}))),this._listenersStore.add(this._editor.onKeyDown((function(t){return e._onKeyDown(t)})))),this._listenersStore.add(this._editor.onMouseLeave((function(t){return e._onEditorMouseLeave(t)}))),this._listenersStore.add(this._editor.onDidChangeModel((function(){e._cancelScheduler(),e._hideWidgets()}))),this._listenersStore.add(this._editor.onDidChangeModelContent((function(){return e._cancelScheduler()}))),this._listenersStore.add(this._editor.onDidScrollChange((function(t){return e._onEditorScrollChanged(t)})))}},{key:"_unhookListeners",value:function(){this._listenersStore.clear()}},{key:"_cancelScheduler",value:function(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}},{key:"_onEditorScrollChanged",value:function(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}},{key:"_onEditorMouseDown",value:function(e){this._hoverState.mouseDown=!0,this._isMouseOnMarginHoverWidget(e)||this._hideWidgets()}},{key:"_isMouseOnMarginHoverWidget",value:function(e){var t,n=null===(t=this._glyphWidget)||void 0===t?void 0:t.getDomNode();return!!n&&koe(n,e.event.posx,e.event.posy)}},{key:"_onEditorMouseUp",value:function(){this._hoverState.mouseDown=!1}},{key:"_onEditorMouseLeave",value:function(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._isMouseOnMarginHoverWidget(e)||this._hideWidgets())}},{key:"_shouldNotRecomputeCurrentHoverWidget",value:function(e){var t=this._hoverSettings.sticky,n=this._isMouseOnMarginHoverWidget(e);return t&&n}},{key:"_onEditorMouseMove",value:function(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._mouseMoveEvent=e,this._shouldNotRecomputeCurrentHoverWidget(e)?this._reactToEditorMouseMoveRunner.cancel():this._reactToEditorMouseMove(e))}},{key:"_reactToEditorMouseMove",value:function(e){e&&(this._tryShowHoverWidget(e)||this._hideWidgets())}},{key:"_tryShowHoverWidget",value:function(e){return this._getOrCreateGlyphWidget().showsOrWillShow(e)}},{key:"_onKeyDown",value:function(e){this._editor.hasModel()&&5!==e.keyCode&&6!==e.keyCode&&57!==e.keyCode&&4!==e.keyCode&&this._hideWidgets()}},{key:"_hideWidgets",value:function(){var e;null===(e=this._glyphWidget)||void 0===e||e.hide()}},{key:"_getOrCreateGlyphWidget",value:function(){return this._glyphWidget||(this._glyphWidget=this._instantiationService.createInstance(hpe,this._editor)),this._glyphWidget}},{key:"dispose",value:function(){var e;g(v(t.prototype),"dispose",this).call(this),this._unhookListeners(),this._listenersStore.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose()}}]),t}(Ru),_n.ID="editor.contrib.marginHover",_n);vpe=fpe([gpe(1,Gm)],vpe);function ppe(e,t){for(var n=0,i=0;i<e.length;i++)"\t"===e.charAt(i)?n+=t:n++;return n}function mpe(e,t,n){e=e<0?0:e;var i="";if(!n){var r=Math.floor(e/t);e%=t;for(var o=0;o<r;o++)i+="\t"}for(var a=0;a<e;a++)i+=" ";return i}function ype(e,t,n,i){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return[];var r=t.getLanguageConfiguration(e.getLanguageId()).indentRulesSupport;if(!r)return[];var o=new EJ(e,r,t);for(i=Math.min(i,e.getLineCount());n<=i&&o.shouldIgnore(n);)n++;if(n>i-1)return[];var a=e.getOptions(),s=a.tabSize,l=a.indentSize,u=a.insertSpaces,c=function(e,t){return t=t||1,HJ.shiftIndent(e,e.length+t,s,l,u)},d=function(e,t){return t=t||1,HJ.unshiftIndent(e,e.length+t,s,l,u)},h=[],f=Jh(e.getLineContent(n)),g=f;o.shouldIncrease(n)?(g=c(g),f=c(f)):o.shouldIndentNextLine(n)&&(g=c(g));for(var v=++n;v<=i;v++)if(!_pe(e,v)){var p=Jh(e.getLineContent(v)),m=g;o.shouldDecrease(v,m)&&(g=d(g),f=d(f)),p!==g&&h.push(lA.replaceMove(new fd(v,1,v,p.length+1),BB(g,l,u))),o.shouldIgnore(v)||(g=o.shouldIncrease(v,m)?f=c(f):o.shouldIndentNextLine(v,m)?c(g):f)}return h}function _pe(e,t){return!!e.tokenization.isCheapToTokenize(t)&&2===e.tokenization.getLineTokens(t).getStandardTokenType(0)}B_(ele.ID,ele,2),B_(vpe.ID,vpe,2),O_(Uve),O_(jve),O_(Kve),O_(qve),O_(Gve),O_(Zve),O_(Yve),O_(Qve),O_(Xve),O_($ve),O_(Jve),O_(epe),jre.register(Yoe),jre.register(ape),VS((function(e,t){var n=e.getColor(xD);n&&(t.addRule(".monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ".concat(n.transparent(.5),"; }")),t.addRule(".monaco-editor .monaco-hover hr { border-top: 1px solid ".concat(n.transparent(.5),"; }")),t.addRule(".monaco-editor .monaco-hover hr { border-bottom: 0px solid ".concat(n.transparent(.5),"; }")))})),ove.register(new function e(){u(this,e)}),ove.register(new function e(){u(this,e)}),ove.register(new function e(){u(this,e)});var bpe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},kpe=function(e,t){return function(n,i){t(n,i,e)}},wpe=function(e){function t(){return u(this,t),l(this,t,[{id:t.ID,label:Xa("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:p0.writable,metadata:{description:Ja("indentationToSpacesDescription","Convert the tab indentation to spaces.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=t.getModel();if(n){var i=n.getOptions(),r=t.getSelection();if(r){var o=new Ape(r,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}}}]),t}(M_);wpe.ID="editor.action.indentationToSpaces";var Cpe=function(e){function t(){return u(this,t),l(this,t,[{id:t.ID,label:Xa("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:p0.writable,metadata:{description:Ja("indentationToTabsDescription","Convert the spaces indentation to tabs.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=t.getModel();if(n){var i=n.getOptions(),r=t.getSelection();if(r){var o=new Ppe(r,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}}}]),t}(M_);Cpe.ID="editor.action.indentationToTabs";var Spe=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[i])).insertSpaces=e,r.displaySizeOnly=n,r}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=this,i=e.get(TU),r=e.get(Qm),o=t.getModel();if(o){var a=r.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),s=o.getOptions(),l=[1,2,3,4,5,6,7,8].map((function(e){return{id:e.toString(),label:e.toString(),description:e===a.tabSize&&e===s.tabSize?Xa("configuredTabSize","Configured Tab Size"):e===a.tabSize?Xa("defaultTabSize","Default Tab Size"):e===s.tabSize?Xa("currentTabSize","Current Tab Size"):void 0}})),u=Math.min(o.getOptions().tabSize-1,7);setTimeout((function(){i.pick(l,{placeHolder:Xa({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:l[u]}).then((function(e){if(e&&o&&!o.isDisposed()){var t=parseInt(e.label,10);n.displaySizeOnly?o.updateOptions({tabSize:t}):o.updateOptions({tabSize:t,indentSize:t,insertSpaces:n.insertSpaces})}}))}),50)}}}]),t}(M_),xpe=function(e){function t(){return u(this,t),l(this,t,[!1,!1,{id:t.ID,label:Xa("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0,metadata:{description:Ja("indentUsingTabsDescription","Use indentation with tabs.")}}])}return p(t,e),t}(Spe);xpe.ID="editor.action.indentUsingTabs";var Lpe=function(e){function t(){return u(this,t),l(this,t,[!0,!1,{id:t.ID,label:Xa("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0,metadata:{description:Ja("indentUsingSpacesDescription","Use indentation with spaces.")}}])}return p(t,e),t}(Spe);Lpe.ID="editor.action.indentUsingSpaces";var Dpe=function(e){function t(){return u(this,t),l(this,t,[!0,!0,{id:t.ID,label:Xa("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0,metadata:{description:Ja("changeTabDisplaySizeDescription","Change the space size equivalent of the tab.")}}])}return p(t,e),t}(Spe);Dpe.ID="editor.action.changeTabDisplaySize";var Npe=function(e){function t(){return u(this,t),l(this,t,[{id:t.ID,label:Xa("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0,metadata:{description:Ja("detectIndentationDescription","Detect the indentation from content.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=e.get(Qm),i=t.getModel();if(i){var r=n.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(r.insertSpaces,r.tabSize)}}}]),t}(M_);Npe.ID="editor.action.detectIndentation";var Ipe=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.reindentlines",label:Xa("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:p0.writable,metadata:{description:Ja("editor.reindentlinesDescription","Reindent the lines of the editor.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=e.get(Ek),i=t.getModel();if(i){var r=ype(i,n,1,i.getLineCount());r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}}]),t}(M_),Epe=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.reindentselectedlines",label:Xa("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:p0.writable,metadata:{description:Ja("editor.reindentselectedlinesDescription","Reindent the selected lines of the editor.")}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=e.get(Ek),i=t.getModel();if(i){var r=t.getSelections();if(null!==r){var o=[],a=!0,s=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d,h=u.value,f=h.startLineNumber,g=h.endLineNumber;if(f!==g&&1===h.endColumn&&g--,1===f){if(f===g)continue}else f--;var v=ype(i,n,f,g);(d=o).push.apply(d,x(v))}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}}}]),t}(M_),Mpe=function(){function e(t,n){u(this,e),this._initialSelection=n,this._edits=[],this._selectionId=null;var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l.range&&"string"==typeof l.text&&this._edits.push(l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}return h(e,[{key:"getEditOperations",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=this._edits[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.addEditOperation(hd.lift(s.range),s.text)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}var l=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(l=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(l=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),l||(this._selectionId=t.trackSelection(this._initialSelection))}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this._selectionId)}}]),e}(),Tpe=(bn=function(){function e(t,n){var i=this;u(this,e),this.editor=t,this._languageConfigurationService=n,this.callOnDispose=new Tu,this.callOnModel=new Tu,this.callOnDispose.add(t.onDidChangeConfiguration((function(){return i.update()}))),this.callOnDispose.add(t.onDidChangeModel((function(){return i.update()}))),this.callOnDispose.add(t.onDidChangeModelLanguage((function(){return i.update()})))}return h(e,[{key:"update",value:function(){var e=this;this.callOnModel.clear(),this.editor.getOption(12)<4||this.editor.getOption(55)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste((function(t){var n=t.range;e.trigger(n)})))}},{key:"trigger",value:function(e){var t=this.editor.getSelections();if(!(null===t||t.length>1)){var n=this.editor.getModel();if(n)if(!this.rangeContainsOnlyWhitespaceCharacters(n,e)&&!function(e,t){var n=function(t){var n=function(e,t){var n=t.lineNumber;if(e.tokenization.isCheapToTokenize(n)){e.tokenization.forceTokenization(n);var i=e.tokenization.getLineTokens(n),r=i.findTokenIndexAtOffset(t.column-1);return i.getStandardTokenType(r)}}(e,t);return 2===n};return n(t.getStartPosition())||n(t.getEndPosition())}(n,e)&&n.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber)){for(var i=this.editor.getOption(12),r=n.getOptions(),o=r.tabSize,a=r.indentSize,s=r.insertSpaces,l=[],u={shiftIndent:function(e){return HJ.shiftIndent(e,e.length+1,o,a,s)},unshiftIndent:function(e){return HJ.unshiftIndent(e,e.length+1,o,a,s)}},c=e.startLineNumber;c<=e.endLineNumber&&this.shouldIgnoreLine(n,c);)c++;if(!(c>e.endLineNumber)){var d=n.getLineContent(c);if(!/\S/.test(d.substring(0,e.startColumn-1))){var h=jJ(i,n,n.getLanguageId(),c,u,this._languageConfigurationService);if(null!==h){var f=Jh(d),g=ppe(h,o);if(g!==ppe(f,o)){var v=mpe(g,o,s);l.push({range:new hd(c,1,c,f.length+1),text:v}),d=v+d.substring(f.length)}else{var p=KJ(n,c,this._languageConfigurationService);if(0===p||8===p)return}}}for(var m=c;c<e.endLineNumber&&!/\S/.test(n.getLineContent(c+1));)c++;if(c!==e.endLineNumber){var y={tokenization:{getLineTokens:function(e){return n.tokenization.getLineTokens(e)},getLanguageId:function(){return n.getLanguageId()},getLanguageIdAtPosition:function(e,t){return n.getLanguageIdAtPosition(e,t)}},getLineContent:function(e){return e===m?d:n.getLineContent(e)}},_=jJ(i,y,n.getLanguageId(),c+1,u,this._languageConfigurationService);if(null!==_){var b=ppe(_,o),k=ppe(Jh(n.getLineContent(c+1)),o);if(b!==k)for(var w=b-k,C=c+1;C<=e.endLineNumber;C++){var S=Jh(n.getLineContent(C)),x=mpe(ppe(S,o)+w,o,s);x!==S&&l.push({range:new hd(C,1,C,S.length+1),text:x})}}}if(l.length>0){this.editor.pushUndoStop();var L=new Mpe(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",L),this.editor.pushUndoStop()}}}}}},{key:"rangeContainsOnlyWhitespaceCharacters",value:function(e,t){var n=function(e){return 0===e.trim().length},i=!0;if(t.startLineNumber===t.endLineNumber)i=n(e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1));else for(var r=t.startLineNumber;r<=t.endLineNumber;r++){var o=e.getLineContent(r);if(r===t.startLineNumber)i=n(o.substring(t.startColumn-1));else if(r===t.endLineNumber){i=n(o.substring(0,t.endColumn-1))}else i=0===e.getLineFirstNonWhitespaceColumn(r);if(!i)break}return i}},{key:"shouldIgnoreLine",value:function(e,t){e.tokenization.forceTokenization(t);var n=e.getLineFirstNonWhitespaceColumn(t);if(0===n)return!0;var i=e.tokenization.getLineTokens(t);if(i.getCount()>0){var r=i.findTokenIndexAtOffset(n);if(r>=0&&1===i.getStandardTokenType(r))return!0}return!1}},{key:"dispose",value:function(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}]),e}(),bn.ID="editor.contrib.autoIndentOnPaste",bn);function Rpe(e,t,n,i){if(1!==e.getLineCount()||1!==e.getLineMaxColumn(1)){for(var r="",o=0;o<n;o++)r+=" ";for(var a=new RegExp(r,"gi"),s=1,l=e.getLineCount();s<=l;s++){var u=e.getLineFirstNonWhitespaceColumn(s);if(0===u&&(u=e.getLineMaxColumn(s)),1!==u){var c=new hd(s,1,s,u),d=e.getValueInRange(c),h=i?d.replace(/\t/gi,r):d.replace(a,"\t");t.addEditOperation(c,h)}}}}Tpe=bpe([kpe(1,Ek)],Tpe);var Ape=function(){function e(t,n){u(this,e),this.selection=t,this.tabSize=n,this.selectionId=null}return h(e,[{key:"getEditOperations",value:function(e,t){this.selectionId=t.trackSelection(this.selection),Rpe(e,t,this.tabSize,!0)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this.selectionId)}}]),e}(),Ppe=function(){function e(t,n){u(this,e),this.selection=t,this.tabSize=n,this.selectionId=null}return h(e,[{key:"getEditOperations",value:function(e,t){this.selectionId=t.trackSelection(this.selection),Rpe(e,t,this.tabSize,!1)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this.selectionId)}}]),e}();B_(Tpe.ID,Tpe,2),O_(wpe),O_(Cpe),O_(xpe),O_(Lpe),O_(Dpe),O_(Npe),O_(Ipe),O_(Epe),B_(Bse.ID,Bse,1),jre.register(jse);var Ope,Fpe=function(){function e(t,n,i){u(this,e),this._editRange=t,this._originalSelection=n,this._text=i}return h(e,[{key:"getEditOperations",value:function(e,t){t.addTrackedEditOperation(this._editRange,this._text)}},{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new fd(n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn),n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn)):new fd(n.endLineNumber,n.endColumn-this._text.length,n.endLineNumber,n.endColumn)}}]),e}(),Wpe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Bpe=function(e,t){return function(n,i){t(n,i,e)}},Hpe=(kn=function(){function e(t,n){u(this,e),this.editor=t,this.editorWorkerService=n,this.decorations=this.editor.createDecorationsCollection()}return h(e,[{key:"dispose",value:function(){}},{key:"run",value:function(e,t){var n,i=this;null===(n=this.currentRequest)||void 0===n||n.cancel();var r=this.editor.getSelection(),o=this.editor.getModel();if(o&&r){var a=r;if(a.startLineNumber===a.endLineNumber){var s=new I9(this.editor,5),l=o.uri;return this.editorWorkerService.canNavigateValueSet(l)?(this.currentRequest=hg((function(e){return i.editorWorkerService.navigateValueSet(l,a,t)})),this.currentRequest.then((function(t){var n;if(t&&t.range&&t.value&&s.validate(i.editor)){var r=hd.lift(t.range),o=t.range,l=t.value.length-(a.endColumn-a.startColumn);o={startLineNumber:o.startLineNumber,startColumn:o.startColumn,endLineNumber:o.endLineNumber,endColumn:o.startColumn+t.value.length},l>1&&(a=new fd(a.startLineNumber,a.startColumn,a.endLineNumber,a.endColumn+l-1));var u=new Fpe(r,a,t.value);i.editor.pushUndoStop(),i.editor.executeCommand(e,u),i.editor.pushUndoStop(),i.decorations.set([{range:o,options:Ope.DECORATION}]),null===(n=i.decorationRemover)||void 0===n||n.cancel(),i.decorationRemover=mg(350),i.decorationRemover.then((function(){return i.decorations.clear()})).catch(vu)}})).catch(vu)):Promise.resolve(void 0)}}}}],[{key:"get",value:function(e){return e.getContribution(Ope.ID)}}]),e}(),Ope=kn,kn.ID="editor.contrib.inPlaceReplaceController",kn.DECORATION=cU.register({description:"in-place-replace",className:"valueSetReplacement"}),kn);Hpe=Ope=Wpe([Bpe(1,TW)],Hpe);var Vpe=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.inPlaceReplace.up",label:Xa("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:3159,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=Hpe.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}]),t}(M_),zpe=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.inPlaceReplace.down",label:Xa("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:3161,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=Hpe.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}]),t}(M_);B_(Hpe.ID,Hpe,4),O_(Vpe),O_(zpe);var Upe=function(e){function t(){return u(this,t),l(this,t,[{id:"expandLineSelection",label:Xa("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:p0.textInputFocus,primary:2090}}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){if(n=n||{},t.hasModel()){var i=t._getViewModel();i.model.pushStackElement(),i.setCursorStates(n.source,3,IJ.expandLineSelection(i,i.getCursorStates())),i.revealAllCursors(n.source,!0)}}}]),t}(M_);O_(Upe);var jpe=function(){function e(t,n,i){u(this,e),this._selection=t,this._cursors=n,this._selectionId=null,this._trimInRegexesAndStrings=i}return h(e,[{key:"getEditOperations",value:function(e,t){for(var n=function(e,t,n){t.sort((function(e,t){return e.lineNumber===t.lineNumber?e.column-t.column:e.lineNumber-t.lineNumber}));for(var i=t.length-2;i>=0;i--)t[i].lineNumber===t[i+1].lineNumber&&t.splice(i,1);for(var r=[],o=0,a=0,s=t.length,l=1,u=e.getLineCount();l<=u;l++){var c=e.getLineContent(l),d=c.length+1,h=0;if(!(a<s&&t[a].lineNumber===l&&(h=t[a].column,a++,h===d))&&0!==c.length){var f=ef(c),g=0;if(-1===f)g=1;else{if(f===c.length-1)continue;g=f+2}if(!n){if(!e.tokenization.hasAccurateTokensForLine(l))continue;var v=e.tokenization.getLineTokens(l),p=v.getStandardTokenType(v.findTokenIndexAtOffset(g));if(2===p||3===p)continue}g=Math.max(h,g),r[o++]=lA.delete(new hd(l,g,l,d))}}return r}(e,this._cursors,this._trimInRegexesAndStrings),i=0,r=n.length;i<r;i++){var o=n[i];t.addEditOperation(o.range,o.text)}this._selectionId=t.trackSelection(this._selection)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this._selectionId)}}]),e}();var Kpe=function(){function e(t,n,i){u(this,e),this._selection=t,this._isCopyingDown=n,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}return h(e,[{key:"getEditOperations",value:function(e,t){var n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&1===n.endColumn&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));for(var i=[],r=n.startLineNumber;r<=n.endLineNumber;r++)i.push(e.getLineContent(r));var o=i.join("\n");""===o&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new hd(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":"\n"):this._isCopyingDown?t.addEditOperation(new hd(n.startLineNumber,1,n.startLineNumber,1),o+"\n"):t.addEditOperation(new hd(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),"\n"+o),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}},{key:"computeCursorState",value:function(e,t){var n=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){var i=n.startLineNumber,r=n.startColumn,o=n.endLineNumber,a=n.endColumn;0!==this._startLineNumberDelta&&(i+=this._startLineNumberDelta,r=1),0!==this._endLineNumberDelta&&(o+=this._endLineNumberDelta,a=1),n=fd.createWithDirection(i,r,o,a,this._selectionDirection)}return n}}]),e}(),qpe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Gpe=function(e,t){return function(n,i){t(n,i,e)}},Zpe=function(){function e(t,n,i,r){u(this,e),this._languageConfigurationService=r,this._selection=t,this._isMovingDown=n,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}return h(e,[{key:"getEditOperations",value:function(e,t){var n=function(){return e.getLanguageId()},i=function(t,n){return e.getLanguageIdAtPosition(t,n)},r=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===r)this._selectionId=t.trackSelection(this._selection);else if(this._isMovingDown||1!==this._selection.startLineNumber){this._moveEndPositionDown=!1;var o=this._selection;o.startLineNumber<o.endLineNumber&&1===o.endColumn&&(this._moveEndPositionDown=!0,o=o.setEndPosition(o.endLineNumber-1,e.getLineMaxColumn(o.endLineNumber-1)));var a=e.getOptions(),s=a.tabSize,l=a.indentSize,u=a.insertSpaces,c=this.buildIndentConverter(s,l,u);if(o.startLineNumber===o.endLineNumber&&1===e.getLineMaxColumn(o.startLineNumber)){var d=o.startLineNumber,h=this._isMovingDown?d+1:d-1;1===e.getLineMaxColumn(h)?t.addEditOperation(new hd(1,1,1,1),null):(t.addEditOperation(new hd(d,1,d,1),e.getLineContent(h)),t.addEditOperation(new hd(h,1,h,e.getLineMaxColumn(h)),null)),o=new fd(h,1,h,1)}else{var f,g;if(this._isMovingDown){f=o.endLineNumber+1,g=e.getLineContent(f),t.addEditOperation(new hd(f-1,e.getLineMaxColumn(f-1),f,e.getLineMaxColumn(f)),null);var v=g;if(this.shouldAutoIndent(e,o)){var p=this.matchEnterRule(e,c,s,f,o.startLineNumber-1);if(null!==p){var m=mpe(p+ppe(Jh(e.getLineContent(f)),s),s,u);v=m+this.trimStart(g)}else{var y={tokenization:{getLineTokens:function(t){return t===o.startLineNumber?e.tokenization.getLineTokens(f):e.tokenization.getLineTokens(t)},getLanguageId:n,getLanguageIdAtPosition:i},getLineContent:function(t){return t===o.startLineNumber?e.getLineContent(f):e.getLineContent(t)}},_=jJ(this._autoIndent,y,e.getLanguageIdAtPosition(f,1),o.startLineNumber,c,this._languageConfigurationService);if(null!==_){var b=Jh(e.getLineContent(f)),k=ppe(_,s);if(k!==ppe(b,s)){var w=mpe(k,s,u);v=w+this.trimStart(g)}}}t.addEditOperation(new hd(o.startLineNumber,1,o.startLineNumber,1),v+"\n");var C=this.matchEnterRuleMovingDown(e,c,s,o.startLineNumber,f,v);if(null!==C)0!==C&&this.getIndentEditsOfMovingBlock(e,t,o,s,u,C);else{var S={tokenization:{getLineTokens:function(t){return t===o.startLineNumber?e.tokenization.getLineTokens(f):t>=o.startLineNumber+1&&t<=o.endLineNumber+1?e.tokenization.getLineTokens(t-1):e.tokenization.getLineTokens(t)},getLanguageId:n,getLanguageIdAtPosition:i},getLineContent:function(t){return t===o.startLineNumber?v:t>=o.startLineNumber+1&&t<=o.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t)}},x=jJ(this._autoIndent,S,e.getLanguageIdAtPosition(f,1),o.startLineNumber+1,c,this._languageConfigurationService);if(null!==x){var L=Jh(e.getLineContent(o.startLineNumber)),D=ppe(x,s),N=ppe(L,s);if(D!==N){var I=D-N;this.getIndentEditsOfMovingBlock(e,t,o,s,u,I)}}}}else t.addEditOperation(new hd(o.startLineNumber,1,o.startLineNumber,1),v+"\n")}else if(f=o.startLineNumber-1,g=e.getLineContent(f),t.addEditOperation(new hd(f,1,f+1,1),null),t.addEditOperation(new hd(o.endLineNumber,e.getLineMaxColumn(o.endLineNumber),o.endLineNumber,e.getLineMaxColumn(o.endLineNumber)),"\n"+g),this.shouldAutoIndent(e,o)){var E={tokenization:{getLineTokens:function(t){return t===f?e.tokenization.getLineTokens(o.startLineNumber):e.tokenization.getLineTokens(t)},getLanguageId:n,getLanguageIdAtPosition:i},getLineContent:function(t){return t===f?e.getLineContent(o.startLineNumber):e.getLineContent(t)}},M=this.matchEnterRule(e,c,s,o.startLineNumber,o.startLineNumber-2);if(null!==M)0!==M&&this.getIndentEditsOfMovingBlock(e,t,o,s,u,M);else{var T=jJ(this._autoIndent,E,e.getLanguageIdAtPosition(o.startLineNumber,1),f,c,this._languageConfigurationService);if(null!==T){var R=Jh(e.getLineContent(o.startLineNumber)),A=ppe(T,s),P=ppe(R,s);if(A!==P){var O=A-P;this.getIndentEditsOfMovingBlock(e,t,o,s,u,O)}}}}}this._selectionId=t.trackSelection(o)}else this._selectionId=t.trackSelection(this._selection)}},{key:"buildIndentConverter",value:function(e,t,n){return{shiftIndent:function(i){return HJ.shiftIndent(i,i.length+1,e,t,n)},unshiftIndent:function(i){return HJ.unshiftIndent(i,i.length+1,e,t,n)}}}},{key:"parseEnterResult",value:function(e,t,n,i,r){if(r){var o=r.indentation;r.indentAction===ab.None||r.indentAction===ab.Indent?o=r.indentation+r.appendText:r.indentAction===ab.IndentOutdent?o=r.indentation:r.indentAction===ab.Outdent&&(o=t.unshiftIndent(r.indentation)+r.appendText);var a=e.getLineContent(i);if(this.trimStart(a).indexOf(this.trimStart(o))>=0){var s=Jh(e.getLineContent(i)),l=Jh(o),u=KJ(e,i,this._languageConfigurationService);return null!==u&&2&u&&(l=t.unshiftIndent(l)),ppe(l,n)-ppe(s,n)}}return null}},{key:"matchEnterRuleMovingDown",value:function(e,t,n,i,r,o){if(ef(o)>=0){var a=e.getLineMaxColumn(r),s=AJ(this._autoIndent,e,new hd(r,a,r,a),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,s)}for(var l=i-1;l>=1;){if(ef(e.getLineContent(l))>=0)break;l--}if(l<1||i>e.getLineCount())return null;var u=e.getLineMaxColumn(l),c=AJ(this._autoIndent,e,new hd(l,u,l,u),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,c)}},{key:"matchEnterRule",value:function(e,t,n,i,r,o){for(var a=r;a>=1;){if(ef(a===r&&void 0!==o?o:e.getLineContent(a))>=0)break;a--}if(a<1||i>e.getLineCount())return null;var s=e.getLineMaxColumn(a),l=AJ(this._autoIndent,e,new hd(a,s,a,s),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,l)}},{key:"trimStart",value:function(e){return e.replace(/^\s+/,"")}},{key:"shouldAutoIndent",value:function(e,t){if(this._autoIndent<4)return!1;if(!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;var n=e.getLanguageIdAtPosition(t.startLineNumber,1);return n===e.getLanguageIdAtPosition(t.endLineNumber,1)&&null!==this._languageConfigurationService.getLanguageConfiguration(n).indentRulesSupport}},{key:"getIndentEditsOfMovingBlock",value:function(e,t,n,i,r,o){for(var a=n.startLineNumber;a<=n.endLineNumber;a++){var s=Jh(e.getLineContent(a)),l=mpe(ppe(s,i)+o,i,r);l!==s&&(t.addEditOperation(new hd(a,1,a,s.length+1),l),a===n.endLineNumber&&n.endColumn<=s.length+1&&""===l&&(this._moveEndLineSelectionShrink=!0))}}},{key:"computeCursorState",value:function(e,t){var n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}}]),e}();Zpe=qpe([Gpe(3,Ek)],Zpe);var Ype=function(){function e(t,n){u(this,e),this.selection=t,this.descending=n,this.selectionId=null}return h(e,[{key:"getEditOperations",value:function(e,t){var n=function(e,t,n){var i=Qpe(e,t,n);if(!i)return null;return lA.replace(new hd(i.startLineNumber,1,i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),i.after.join("\n"))}(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this.selectionId)}}],[{key:"getCollator",value:function(){return e._COLLATOR||(e._COLLATOR=new Intl.Collator),e._COLLATOR}},{key:"canRun",value:function(e,t,n){if(null===e)return!1;var i=Qpe(e,t,n);if(!i)return!1;for(var r=0,o=i.before.length;r<o;r++)if(i.before[r]!==i.after[r])return!0;return!1}}]),e}();function Qpe(e,t,n){var i=t.startLineNumber,r=t.endLineNumber;if(1===t.endColumn&&r--,i>=r)return null;for(var o=[],a=i;a<=r;a++)o.push(e.getLineContent(a));var s=o.slice(0);return s.sort(Ype.getCollator().compare),!0===n&&(s=s.reverse()),{startLineNumber:i,endLineNumber:r,before:o,after:s}}Ype._COLLATOR=null;var Xpe=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[n])).down=e,i}return p(t,e),h(t,[{key:"run",value:function(e,t){if(t.hasModel()){var n=t.getSelections().map((function(e,t){return{selection:e,index:t,ignore:!1}}));n.sort((function(e,t){return hd.compareRangesUsingStarts(e.selection,t.selection)}));for(var i=n[0],r=1;r<n.length;r++){var o=n[r];i.selection.endLineNumber===o.selection.startLineNumber&&(i.index<o.index?o.ignore=!0:(i.ignore=!0,i=o))}var a=[],s=!0,l=!1,u=void 0;try{for(var c,d=n[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;a.push(new Kpe(h.selection,this.down,h.ignore))}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}}]),t}(M_),$pe=function(e){function t(){return u(this,t),l(this,t,[!1,{id:"editor.action.copyLinesUpAction",label:Xa("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:d_.MenubarSelectionMenu,group:"2_line",title:Xa({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}}])}return p(t,e),t}(Xpe),Jpe=function(e){function t(){return u(this,t),l(this,t,[!0,{id:"editor.action.copyLinesDownAction",label:Xa("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:d_.MenubarSelectionMenu,group:"2_line",title:Xa({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}}])}return p(t,e),t}(Xpe),eme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.duplicateSelection",label:Xa("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:p0.writable,menuOpts:{menuId:d_.MenubarSelectionMenu,group:"2_line",title:Xa({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){if(t.hasModel()){var i=[],r=t.getSelections(),o=t.getModel(),a=!0,s=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;if(d.isEmpty())i.push(new Kpe(d,!0));else{var h=new fd(d.endLineNumber,d.endColumn,d.endLineNumber,d.endColumn);i.push(new yJ(h,o.getValueInRange(d)))}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}}]),t}(M_),tme=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[n])).down=e,i}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=e.get(Ek),i=[],r=t.getSelections()||[],o=t.getOption(12),a=!0,s=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;i.push(new Zpe(d,this.down,o,n))}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}]),t}(M_),nme=function(e){function t(){return u(this,t),l(this,t,[!1,{id:"editor.action.moveLinesUpAction",label:Xa("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:d_.MenubarSelectionMenu,group:"2_line",title:Xa({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}}])}return p(t,e),t}(tme),ime=function(e){function t(){return u(this,t),l(this,t,[!0,{id:"editor.action.moveLinesDownAction",label:Xa("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:d_.MenubarSelectionMenu,group:"2_line",title:Xa({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}}])}return p(t,e),t}(tme),rme=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[n])).descending=e,i}return p(t,e),h(t,[{key:"run",value:function(e,t){if(t.hasModel()){var n=t.getModel(),i=t.getSelections();1===i.length&&i[0].isEmpty()&&(i=[new fd(1,1,n.getLineCount(),n.getLineMaxColumn(n.getLineCount()))]);var r=!0,o=!1,a=void 0;try{for(var s,l=i[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;if(!Ype.canRun(t.getModel(),u,this.descending))return}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}for(var c=[],d=0,h=i.length;d<h;d++)c[d]=new Ype(i[d],this.descending);t.pushUndoStop(),t.executeCommands(this.id,c),t.pushUndoStop()}}}]),t}(M_),ome=function(e){function t(){return u(this,t),l(this,t,[!1,{id:"editor.action.sortLinesAscending",label:Xa("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:p0.writable}])}return p(t,e),t}(rme),ame=function(e){function t(){return u(this,t),l(this,t,[!0,{id:"editor.action.sortLinesDescending",label:Xa("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:p0.writable}])}return p(t,e),t}(rme),sme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.removeDuplicateLines",label:Xa("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:p0.writable}])}return p(t,e),h(t,[{key:"run",value:function(e,t){if(t.hasModel()){var n=t.getModel();if(1!==n.getLineCount()||1!==n.getLineMaxColumn(1)){var i=[],r=[],o=0,a=!0,s=t.getSelections();1===s.length&&s[0].isEmpty()&&(s=[new fd(1,1,n.getLineCount(),n.getLineMaxColumn(n.getLineCount()))],a=!1);var l=!0,u=!1,c=void 0;try{for(var d,h=s[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){for(var f=d.value,g=new Set,v=[],p=f.startLineNumber;p<=f.endLineNumber;p++){var m=n.getLineContent(p);g.has(m)||(v.push(m),g.add(m))}var y=new fd(f.startLineNumber,1,f.endLineNumber,n.getLineMaxColumn(f.endLineNumber)),_=f.startLineNumber-o,b=new fd(_,1,_+v.length-1,v[v.length-1].length);i.push(lA.replace(y,v.join("\n"))),r.push(b),o+=f.endLineNumber-f.startLineNumber+1-v.length}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}t.pushUndoStop(),t.executeEdits(this.id,i,a?r:void 0),t.pushUndoStop()}}}}]),t}(M_),lme=function(e){function t(){return u(this,t),l(this,t,[{id:t.ID,label:Xa("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:pc(2089,2102),weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i=[];"auto-save"===n.reason&&(i=(t.getSelections()||[]).map((function(e){return new dd(e.positionLineNumber,e.positionColumn)})));var r=t.getSelection();if(null!==r){var o=e.get(qb),a=t.getModel(),s=o.getValue("files.trimTrailingWhitespaceInRegexAndStrings",{overrideIdentifier:null==a?void 0:a.getLanguageId(),resource:null==a?void 0:a.uri}),l=new jpe(r,i,s);t.pushUndoStop(),t.executeCommands(this.id,[l]),t.pushUndoStop()}}}]),t}(M_);lme.ID="editor.action.trimTrailingWhitespace";var ume=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.deleteLines",label:Xa("lines.delete","Delete Line"),alias:"Delete Line",precondition:p0.writable,kbOpts:{kbExpr:p0.textInputFocus,primary:3113,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){if(t.hasModel()){var n=this._getLinesToRemove(t),i=t.getModel();if(1!==i.getLineCount()||1!==i.getLineMaxColumn(1)){for(var r=0,o=[],a=[],s=0,l=n.length;s<l;s++){var u=n[s],c=u.startLineNumber,d=u.endLineNumber,h=1,f=i.getLineMaxColumn(d);d<i.getLineCount()?(d+=1,f=1):c>1&&(c-=1,h=i.getLineMaxColumn(c)),o.push(lA.replace(new fd(c,h,d,f),"")),a.push(new fd(c-r,u.positionColumn,c-r,u.positionColumn)),r+=u.endLineNumber-u.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,o,a),t.pushUndoStop()}}}},{key:"_getLinesToRemove",value:function(e){var t=e.getSelections().map((function(e){var t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:t,positionColumn:e.positionColumn}}));t.sort((function(e,t){return e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber}));for(var n=[],i=t[0],r=1;r<t.length;r++)i.endLineNumber+1>=t[r].startLineNumber?i.endLineNumber=t[r].endLineNumber:(n.push(i),i=t[r]);return n.push(i),n}}]),t}(M_),cme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.indentLines",label:Xa("lines.indent","Indent Line"),alias:"Indent Line",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:2142,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,m0.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}]),t}(M_),dme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.outdentLines",label:Xa("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:2140,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){S0.Outdent.runEditorCommand(e,t,null)}}]),t}(M_),hme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.insertLineBefore",label:Xa("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:3075,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,JJ.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}]),t}(M_),fme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.insertLineAfter",label:Xa("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:2051,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,JJ.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}]),t}(M_),gme=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"run",value:function(e,t){if(t.hasModel()){for(var n=t.getSelection(),i=this._getRangesToDelete(t),r=[],o=0,a=i.length-1;o<a;o++){var s=i[o],l=i[o+1];null===hd.intersectRanges(s,l)?r.push(s):i[o+1]=hd.plusRange(s,l)}r.push(i[i.length-1]);var u=this._getEndCursorState(n,r),c=r.map((function(e){return lA.replace(e,"")}));t.pushUndoStop(),t.executeEdits(this.id,c,u),t.pushUndoStop()}}}]),t}(M_),vme=function(e){function t(){return u(this,t),l(this,t,[{id:"deleteAllLeft",label:Xa("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:p0.writable,kbOpts:{kbExpr:p0.textInputFocus,primary:0,mac:{primary:2049},weight:100}}])}return p(t,e),h(t,[{key:"_getEndCursorState",value:function(e,t){var n=null,i=[],r=0;return t.forEach((function(t){var o;if(1===t.endColumn&&r>0){var a=t.startLineNumber-r;o=new fd(a,t.startColumn,a,t.startColumn)}else o=new fd(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn);r+=t.endLineNumber-t.startLineNumber,t.intersectRanges(e)?n=o:i.push(o)})),n&&i.unshift(n),i}},{key:"_getRangesToDelete",value:function(e){var t=e.getSelections();if(null===t)return[];var n=t,i=e.getModel();return null===i?[]:(n.sort(hd.compareRangesUsingStarts),n=n.map((function(e){if(e.isEmpty()){if(1===e.startColumn){var t=Math.max(1,e.startLineNumber-1),n=1===e.startLineNumber?1:i.getLineLength(t)+1;return new hd(t,n,e.startLineNumber,1)}return new hd(e.startLineNumber,1,e.startLineNumber,e.startColumn)}return new hd(e.startLineNumber,1,e.endLineNumber,e.endColumn)})),n)}}]),t}(gme),pme=function(e){function t(){return u(this,t),l(this,t,[{id:"deleteAllRight",label:Xa("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:p0.writable,kbOpts:{kbExpr:p0.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}}])}return p(t,e),h(t,[{key:"_getEndCursorState",value:function(e,t){for(var n=null,i=[],r=0,o=t.length;r<o;r++){var a=t[r],s=new fd(a.startLineNumber-0,a.startColumn,a.startLineNumber-0,a.startColumn);a.intersectRanges(e)?n=s:i.push(s)}return n&&i.unshift(n),i}},{key:"_getRangesToDelete",value:function(e){var t=e.getModel();if(null===t)return[];var n=e.getSelections();if(null===n)return[];var i=n.map((function(e){if(e.isEmpty()){var n=t.getLineMaxColumn(e.startLineNumber);return e.startColumn===n?new hd(e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new hd(e.startLineNumber,e.startColumn,e.startLineNumber,n)}return e}));return i.sort(hd.compareRangesUsingStarts),i}}]),t}(gme),mme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.joinLines",label:Xa("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:p0.writable,kbOpts:{kbExpr:p0.editorTextFocus,primary:0,mac:{primary:296},weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=t.getSelections();if(null!==n){var i=t.getSelection();if(null!==i){n.sort(hd.compareRangesUsingStarts);var r=[],o=n.reduce((function(e,t){return e.isEmpty()?e.endLineNumber===t.startLineNumber?(i.equalsSelection(e)&&(i=t),t):t.startLineNumber>e.endLineNumber+1?(r.push(e),t):new fd(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn):t.startLineNumber>e.endLineNumber?(r.push(e),t):new fd(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn)}));r.push(o);var a=t.getModel();if(null!==a){for(var s=[],l=[],u=i,c=0,d=0,h=r.length;d<h;d++){var f=r[d],g=f.startLineNumber,v=0,p=void 0,m=void 0,y=a.getLineLength(f.endLineNumber)-f.endColumn;if(f.isEmpty()||f.startLineNumber===f.endLineNumber){var _=f.getStartPosition();_.lineNumber<a.getLineCount()?(p=g+1,m=a.getLineMaxColumn(p)):(p=_.lineNumber,m=a.getLineMaxColumn(_.lineNumber))}else p=f.endLineNumber,m=a.getLineMaxColumn(p);for(var b=a.getLineContent(g),k=g+1;k<=p;k++){var w=a.getLineContent(k),C=a.getLineFirstNonWhitespaceColumn(k);if(C>=1){var S=!0;""===b&&(S=!1),!S||" "!==b.charAt(b.length-1)&&"\t"!==b.charAt(b.length-1)||(S=!1,b=b.replace(/[\s\uFEFF\xA0]+$/g," "));var x=w.substr(C-1);b+=(S?" ":"")+x,v=S?x.length+1:x.length}else v=0}var L=new hd(g,1,p,m);if(!L.isEmpty()){var D=void 0;f.isEmpty()?(s.push(lA.replace(L,b)),D=new fd(L.startLineNumber-c,b.length-v+1,g-c,b.length-v+1)):f.startLineNumber===f.endLineNumber?(s.push(lA.replace(L,b)),D=new fd(f.startLineNumber-c,f.startColumn,f.endLineNumber-c,f.endColumn)):(s.push(lA.replace(L,b)),D=new fd(f.startLineNumber-c,f.startColumn,f.startLineNumber-c,b.length-y)),null!==hd.intersectRanges(L,i)?u=D:l.push(D)}c+=L.endLineNumber-L.startLineNumber}l.unshift(u),t.pushUndoStop(),t.executeEdits(this.id,s,l),t.pushUndoStop()}}}}}]),t}(M_),yme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.transpose",label:Xa("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:p0.writable}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=t.getSelections();if(null!==n){var i=t.getModel();if(null!==i){for(var r=[],o=0,a=n.length;o<a;o++){var s=n[o];if(s.isEmpty()){var l=s.getStartPosition(),u=i.getLineMaxColumn(l.lineNumber);if(l.column>=u){if(l.lineNumber===i.getLineCount())continue;var c=new hd(l.lineNumber,Math.max(1,l.column-1),l.lineNumber+1,1),d=i.getValueInRange(c).split("").reverse().join("");r.push(new mJ(new fd(l.lineNumber,Math.max(1,l.column-1),l.lineNumber+1,1),d))}else{var h=new hd(l.lineNumber,Math.max(1,l.column-1),l.lineNumber,l.column+1),f=i.getValueInRange(h).split("").reverse().join("");r.push(new kJ(h,f,new fd(l.lineNumber,l.column+1,l.lineNumber,l.column+1)))}}}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}}}]),t}(M_),_me=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=t.getSelections();if(null!==n){var i=t.getModel();if(null!==i){var r=t.getOption(132),o=[],a=!0,s=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;if(d.isEmpty()){var h=d.getStartPosition(),f=t.getConfiguredWordAtPosition(h);if(!f)continue;var g=new hd(h.lineNumber,f.startColumn,h.lineNumber,f.endColumn),v=i.getValueInRange(g);o.push(lA.replace(g,this._modifyText(v,r)))}else{var p=i.getValueInRange(d);o.push(lA.replace(d,this._modifyText(p,r)))}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop()}}}}]),t}(M_),bme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.transformToUppercase",label:Xa("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:p0.writable}])}return p(t,e),h(t,[{key:"_modifyText",value:function(e,t){return e.toLocaleUpperCase()}}]),t}(_me),kme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.transformToLowercase",label:Xa("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:p0.writable}])}return p(t,e),h(t,[{key:"_modifyText",value:function(e,t){return e.toLocaleLowerCase()}}]),t}(_me),wme=function(){function e(t,n){u(this,e),this._pattern=t,this._flags=n,this._actual=null,this._evaluated=!1}return h(e,[{key:"get",value:function(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(e){}}return this._actual}},{key:"isSupported",value:function(){return null!==this.get()}}]),e}(),Cme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.transformToTitlecase",label:Xa("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:p0.writable}])}return p(t,e),h(t,[{key:"_modifyText",value:function(e,n){var i=t.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,(function(e){return e.toLocaleUpperCase()})):e}}]),t}(_me);Cme.titleBoundary=new wme("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");var Sme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.transformToSnakecase",label:Xa("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:p0.writable}])}return p(t,e),h(t,[{key:"_modifyText",value:function(e,n){var i=t.caseBoundary.get(),r=t.singleLetters.get();return i&&r?e.replace(i,"$1_$2").replace(r,"$1_$2$3").toLocaleLowerCase():e}}]),t}(_me);Sme.caseBoundary=new wme("(\\p{Ll})(\\p{Lu})","gmu"),Sme.singleLetters=new wme("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");var xme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.transformToCamelcase",label:Xa("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:p0.writable}])}return p(t,e),h(t,[{key:"_modifyText",value:function(e,n){var i=t.wordBoundary.get();if(!i)return e;var r=e.split(i);return r.shift()+r.map((function(e){return e.substring(0,1).toLocaleUpperCase()+e.substring(1)})).join("")}}]),t}(_me);xme.wordBoundary=new wme("[_\\s-]","gm");var Lme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.transformToPascalcase",label:Xa("editor.transformToPascalcase","Transform to Pascal Case"),alias:"Transform to Pascal Case",precondition:p0.writable}])}return p(t,e),h(t,[{key:"_modifyText",value:function(e,n){var i=t.wordBoundary.get(),r=t.wordBoundaryToMaintain.get();if(!i||!r)return e;var o=e.split(r).map((function(e){return e.split(i)})).flat();return o.map((function(e){return e.substring(0,1).toLocaleUpperCase()+e.substring(1)})).join("")}}]),t}(_me);Lme.wordBoundary=new wme("[_\\s-]","gm"),Lme.wordBoundaryToMaintain=new wme("(?<=\\.)","gm");var Dme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.transformToKebabcase",label:Xa("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:p0.writable}])}return p(t,e),h(t,[{key:"_modifyText",value:function(e,n){var i=t.caseBoundary.get(),r=t.singleLetters.get(),o=t.underscoreBoundary.get();return i&&r&&o?e.replace(o,"$1-$3").replace(i,"$1-$2").replace(r,"$1-$2").toLocaleLowerCase():e}}],[{key:"isSupported",value:function(){var e=[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every((function(e){return e.isSupported()}));return e}}]),t}(_me);Dme.caseBoundary=new wme("(\\p{Ll})(\\p{Lu})","gmu"),Dme.singleLetters=new wme("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),Dme.underscoreBoundary=new wme("(\\S)(_)(\\S)","gm"),O_($pe),O_(Jpe),O_(eme),O_(nme),O_(ime),O_(ome),O_(ame),O_(sme),O_(lme),O_(ume),O_(cme),O_(dme),O_(hme),O_(fme),O_(vme),O_(pme),O_(mme),O_(yme),O_(bme),O_(kme),Sme.caseBoundary.isSupported()&&Sme.singleLetters.isSupported()&&O_(Sme),xme.wordBoundary.isSupported()&&O_(xme),Lme.wordBoundary.isSupported()&&O_(Lme),Cme.titleBoundary.isSupported()&&O_(Cme),Dme.isSupported()&&O_(Dme);var Nme,Ime=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Eme=function(e,t){return function(n,i){t(n,i,e)}},Mme=new jy("LinkedEditingInputVisible",!1),Tme=(wn=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t)).languageConfigurationService=r,a._syncRangesToken=0,a._localToDispose=a._register(new Tu),a._editor=e,a._providers=i.linkedEditingRangeProvider,a._enabled=!1,a._visibleContextKey=Mme.bindTo(n),a._debounceInformation=o.for(a._providers,"Linked Editing",{max:200}),a._currentDecorations=a._editor.createDecorationsCollection(),a._languageWordPattern=null,a._currentWordPattern=null,a._ignoreChangeEvent=!1,a._localToDispose=a._register(new Tu),a._rangeUpdateTriggerPromise=null,a._rangeSyncTriggerPromise=null,a._currentRequestCts=null,a._currentRequestPosition=null,a._currentRequestModelVersion=null,a._register(a._editor.onDidChangeModel((function(){return a.reinitialize(!0)}))),a._register(a._editor.onDidChangeConfiguration((function(e){(e.hasChanged(70)||e.hasChanged(94))&&a.reinitialize(!1)}))),a._register(a._providers.onDidChange((function(){return a.reinitialize(!1)}))),a._register(a._editor.onDidChangeModelLanguage((function(){return a.reinitialize(!0)}))),a.reinitialize(!0),a}return p(t,e),h(t,[{key:"reinitialize",value:function(e){var t=this,n=this._editor.getModel(),i=null!==n&&(this._editor.getOption(70)||this._editor.getOption(94))&&this._providers.has(n);if((i!==this._enabled||e)&&(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),i&&null!==n)){this._localToDispose.add(Au.runAndSubscribe(n.onDidChangeLanguageConfiguration,(function(){t._languageWordPattern=t.languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition()})));var r=new vg(this._debounceInformation.get(n)),o=function(){var e;t._rangeUpdateTriggerPromise=r.trigger((function(){return t.updateRanges()}),null!==(e=t._debounceDuration)&&void 0!==e?e:t._debounceInformation.get(n))},a=new vg(0);this._localToDispose.add(this._editor.onDidChangeCursorPosition((function(){o()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((function(e){if(!t._ignoreChangeEvent&&t._currentDecorations.length>0){var n=t._currentDecorations.getRange(0);if(n&&e.changes.every((function(e){return n.intersectRanges(e.range)})))return void function(e){t._rangeSyncTriggerPromise=a.trigger((function(){return t._syncRanges(e)}))}(t._syncRangesToken)}o()}))),this._localToDispose.add({dispose:function(){r.dispose(),a.dispose()}}),this.updateRanges()}}},{key:"_syncRanges",value:function(e){if(this._editor.hasModel()&&e===this._syncRangesToken&&0!==this._currentDecorations.length){var t=this._editor.getModel(),n=this._currentDecorations.getRange(0);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();var i=t.getValueInRange(n);if(this._currentWordPattern){var r=i.match(this._currentWordPattern);if((r?r[0].length:0)!==i.length)return this.clearRanges()}for(var o=[],a=1,s=this._currentDecorations.length;a<s;a++){var l=this._currentDecorations.getRange(a);if(l)if(l.startLineNumber!==l.endLineNumber)o.push({range:l,text:i});else{var u=t.getValueInRange(l),c=i,d=l.startColumn,h=l.endColumn,f=df(u,c);d+=f;var g=hf(u=u.substr(f),c=c.substr(f));h-=g,u=u.substr(0,u.length-g),c=c.substr(0,c.length-g),d===h&&0===c.length||o.push({range:new hd(l.startLineNumber,d,l.endLineNumber,h),text:c})}}if(0!==o.length)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;var v=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(v)}finally{this._ignoreChangeEvent=!1}}}},{key:"dispose",value:function(){this.clearRanges(),g(v(t.prototype),"dispose",this).call(this)}},{key:"clearRanges",value:function(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)}},{key:"updateRanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return s((function(){var n,i,r,o,a,s,l,u,c,d,h,f,g,v;return E(this,(function(p){switch(p.label){case 0:if(!t._editor.hasModel())return t.clearRanges(),[2];if(n=t._editor.getPosition(),!t._enabled&&!e||t._editor.getSelections().length>1)return t.clearRanges(),[2];if(i=t._editor.getModel(),r=i.getVersionId(),t._currentRequestPosition&&t._currentRequestModelVersion===r){if(n.equals(t._currentRequestPosition))return[2];if(t._currentDecorations.length>0&&(o=t._currentDecorations.getRange(0))&&o.containsPosition(n))return[2]}t.clearRanges(),t._currentRequestPosition=n,t._currentRequestModelVersion=r,a=t._currentRequestCts=new rc,p.label=1;case 1:return p.trys.push([1,3,,4]),s=new Hu(!1),[4,Ame(t._providers,i,n,a.token)];case 2:if(l=p.sent(),t._debounceInformation.update(i,s.elapsed()),a!==t._currentRequestCts)return[2];if(t._currentRequestCts=null,r!==i.getVersionId())return[2];for(u=[],(null==l?void 0:l.ranges)&&(u=l.ranges),t._currentWordPattern=(null==l?void 0:l.wordPattern)||t._languageWordPattern,c=!1,d=0,h=u.length;d<h;d++)if(hd.containsPosition(u[d],n)){c=!0,0!==d&&(f=u[d],u.splice(d,1),u.unshift(f));break}return c?(g=u.map((function(e){return{range:e,options:Nme.DECORATION}})),t._visibleContextKey.set(!0),t._currentDecorations.set(g),t._syncRangesToken++,[3,4]):(t.clearRanges(),[2]);case 3:return _u(v=p.sent())||vu(v),t._currentRequestCts!==a&&t._currentRequestCts||t.clearRanges(),[3,4];case 4:return[2]}}))}))()}}],[{key:"get",value:function(e){return e.getContribution(Nme.ID)}}]),t}(Ru),Nme=wn,wn.ID="editor.contrib.linkedEditing",wn.DECORATION=cU.register({description:"linked-editing",stickiness:0,className:"linked-editing-decoration"}),wn);Tme=Nme=Ime([Eme(1,Ky),Eme(2,wS),Eme(3,Ek),Eme(4,Ix)],Tme);var Rme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.linkedEditing",label:Xa("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:Sy.and(p0.writable,p0.hasRenameProvider),kbOpts:{kbExpr:p0.editorTextFocus,primary:3132,weight:100}}])}return p(t,e),h(t,[{key:"runCommand",value:function(e,n){var i=this,r=e.get(Ym),o=C(Array.isArray(n)&&n||[void 0,void 0],2),a=o[0],s=o[1];return ed.isUri(a)&&dd.isIPosition(s)?r.openCodeEditor({resource:a},r.getActiveCodeEditor()).then((function(e){e&&(e.setPosition(s),e.invokeWithinContext((function(t){return i.reportTelemetry(t,e),i.run(t,e)})))}),vu):g(v(t.prototype),"runCommand",this).call(this,e,n)}},{key:"run",value:function(e,t){var n=Tme.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}]),t}(M_);function Ame(e,t,n,i){return _g(e.ordered(t).map((function(e){return s((function(){return E(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.provideLinkedEditingRanges(t,n,i)];case 1:return[2,r.sent()];case 2:return pu(r.sent()),[2,void 0];case 3:return[2]}}))}))})),(function(e){return!!e&&ua(null==e?void 0:e.ranges)}))}P_(new(E_.bindToContribution(Tme.get))({id:"cancelLinkedEditingInput",precondition:Mme,handler:function(e){return e.clearRanges()},kbOpts:{kbExpr:p0.editorTextFocus,weight:199,primary:9,secondary:[1033]}})),TL("editor.linkedEditingBackground",{dark:XC.fromHex("#f00").transparent(.3),light:XC.fromHex("#f00").transparent(.3),hcDark:XC.fromHex("#f00").transparent(.3),hcLight:XC.white},Xa("editorLinkedEditingBackground","Background color when the editor auto renames on type.")),A_("_executeLinkedEditingProvider",(function(e,t,n){return Ame(e.get(wS).linkedEditingRangeProvider,t,n,Uu.None)})),B_(Tme.ID,Tme,1),O_(Rme);var Pme=function(){function e(t,n){u(this,e),this._link=t,this._provider=n}return h(e,[{key:"toJSON",value:function(){return{range:this.range,url:this.url,tooltip:this.tooltip}}},{key:"range",get:function(){return this._link.range}},{key:"url",get:function(){return this._link.url}},{key:"tooltip",get:function(){return this._link.tooltip}},{key:"resolve",value:function(e){var t=this;return s((function(){return E(this,(function(n){return t._link.url?[2,t._link.url]:"function"==typeof t._provider.resolveLink?[2,Promise.resolve(t._provider.resolveLink(t._link,e)).then((function(n){return t._link=n||t._link,t._link.url?t.resolve(e):Promise.reject(new Error("missing"))}))]:[2,Promise.reject(new Error("missing"))]}))}))()}}]),e}(),Ome=function(){function e(t){u(this,e),this._disposables=new Tu;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s,l=function(){var t=C(s.value,2),i=t[0],r=t[1],o=i.links.map((function(e){return new Pme(e,r)}));n=e._union(n,o),Nu(i)&&a._disposables.add(i)},c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)a=this,l()}catch(e){r=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}this.links=n}return h(e,[{key:"dispose",value:function(){this._disposables.dispose(),this.links.length=0}}],[{key:"_union",value:function(e,t){var n,i,r,o,a=[];for(n=0,r=0,i=e.length,o=t.length;n<i&&r<o;){var s=e[n],l=t[r];if(hd.areIntersectingOrTouching(s.range,l.range))n++;else hd.compareRangesUsingStarts(s.range,l.range)<0?(a.push(s),n++):(a.push(l),r++)}for(;n<i;n++)a.push(e[n]);for(;r<o;r++)a.push(t[r]);return a}}]),e}();function Fme(e,t,n){var i=[],r=e.ordered(t).reverse().map((function(e,r){return Promise.resolve(e.provideLinks(t,n)).then((function(t){t&&(i[r]=[t,e])}),pu)}));return Promise.all(r).then((function(){var e=new Ome(aa(i));return n.isCancellationRequested?(e.dispose(),new Ome([])):e}))}sy.registerCommand("_executeLinkProvider",function(){var e=s((function(e){var t,n,i,r,o,a,s,l,u,c,d,h=arguments;return E(this,(function(f){switch(f.label){case 0:for(t=h.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=h[i];return r=C(n,2),o=r[0],a=r[1],Oa(o instanceof ed),"number"!=typeof a&&(a=0),s=e.get(wS).linkProvider,(l=e.get(Qm).getModel(o))?[4,Fme(s,l,Uu.None)]:[2,[]];case 1:if(!(u=f.sent()))return[2,[]];c=0,f.label=2;case 2:return c<Math.min(a,u.links.length)?[4,u.links[c].resolve(Uu.None)]:[3,5];case 3:f.sent(),f.label=4;case 4:return c++,[3,2];case 5:return d=u.links.slice(0),u.dispose(),[2,d]}}))}));return function(t){return e.apply(this,arguments)}}());var Wme,Bme=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Hme=function(e,t){return function(n,i){t(n,i,e)}},Vme=(Cn=function(e){function t(e,n,i,r,o){var a;u(this,t),(a=l(this,t)).editor=e,a.openerService=n,a.notificationService=i,a.languageFeaturesService=r,a.providers=a.languageFeaturesService.linkProvider,a.debounceInformation=o.for(a.providers,"Links",{min:1e3,max:4e3}),a.computeLinks=a._register(new Sg((function(){return a.computeLinksNow()}),1e3)),a.computePromise=null,a.activeLinksList=null,a.currentOccurrences={},a.activeLinkDecorationId=null;var s=a._register(new rae(e));return a._register(s.onMouseMoveOrRelevantKeyDown((function(e){var t=C(e,2),n=t[0],i=t[1];a._onEditorMouseMove(n,i)}))),a._register(s.onExecute((function(e){a.onEditorMouseUp(e)}))),a._register(s.onCancel((function(e){a.cleanUpActiveLinkDecoration()}))),a._register(e.onDidChangeConfiguration((function(e){e.hasChanged(71)&&(a.updateDecorations([]),a.stop(),a.computeLinks.schedule(0))}))),a._register(e.onDidChangeModelContent((function(e){a.editor.hasModel()&&a.computeLinks.schedule(a.debounceInformation.get(a.editor.getModel()))}))),a._register(e.onDidChangeModel((function(e){a.currentOccurrences={},a.activeLinkDecorationId=null,a.stop(),a.computeLinks.schedule(0)}))),a._register(e.onDidChangeModelLanguage((function(e){a.stop(),a.computeLinks.schedule(0)}))),a._register(a.providers.onDidChange((function(e){a.stop(),a.computeLinks.schedule(0)}))),a.computeLinks.schedule(0),a}return p(t,e),h(t,[{key:"computeLinksNow",value:function(){var e=this;return s((function(){var t,n;return E(this,(function(i){switch(i.label){case 0:if(!e.editor.hasModel()||!e.editor.getOption(71))return[2];if((t=e.editor.getModel()).isTooLargeForSyncing())return[2];if(!e.providers.has(t))return[2];e.activeLinksList&&(e.activeLinksList.dispose(),e.activeLinksList=null),e.computePromise=hg((function(n){return Fme(e.providers,t,n)})),i.label=1;case 1:return i.trys.push([1,3,4,5]),n=new Hu(!1),[4,e.computePromise];case 2:return e.activeLinksList=i.sent(),e.debounceInformation.update(t,n.elapsed()),t.isDisposed()?[2]:(e.updateDecorations(e.activeLinksList.links),[3,5]);case 3:return vu(i.sent()),[3,5];case 4:return e.computePromise=null,[7];case 5:return[2]}}))}))()}},{key:"updateDecorations",value:function(e){var t=this,n="altKey"===this.editor.getOption(78),i=[],r=Object.keys(this.currentOccurrences),o=!0,a=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=this.currentOccurrences[c];i.push(d.decorationId)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var h=[];if(e){var f=!0,g=!1,v=void 0;try{for(var p,m=e[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value;h.push(Ume.decoration(y,n))}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}}this.editor.changeDecorations((function(n){var r=n.deltaDecorations(i,h);t.currentOccurrences={},t.activeLinkDecorationId=null;for(var o=0,a=r.length;o<a;o++){var s=new Ume(e[o],r[o]);t.currentOccurrences[s.decorationId]=s}}))}},{key:"_onEditorMouseMove",value:function(e,t){var n=this,i="altKey"===this.editor.getOption(78);if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();var r=this.getLinkOccurrence(e.target.position);r&&this.editor.changeDecorations((function(e){r.activate(e,i),n.activeLinkDecorationId=r.decorationId}))}else this.cleanUpActiveLinkDecoration()}},{key:"cleanUpActiveLinkDecoration",value:function(){var e="altKey"===this.editor.getOption(78);if(this.activeLinkDecorationId){var t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations((function(n){t.deactivate(n,e)})),this.activeLinkDecorationId=null}}},{key:"onEditorMouseUp",value:function(e){if(this.isEnabled(e)){var t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}}},{key:"openLinkOccurrence",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.openerService){var r=e.link;r.resolve(Uu.None).then((function(e){if("string"==typeof e&&n.editor.hasModel()){var r=n.editor.getModel().uri;if(r.scheme===Pv.file&&e.startsWith("".concat(Pv.file,":"))){var o=ed.parse(e);if(o.scheme===Pv.file){var a=jM(o),s=null;a.startsWith("/./")||a.startsWith("\\.\\")?s=".".concat(a.substr(1)):(a.startsWith("//./")||a.startsWith("\\\\.\\"))&&(s=".".concat(a.substr(2))),s&&(e=$M(r,s))}}}return n.openerService.open(e,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})}),(function(e){var t=e instanceof Error?e.message:e;"invalid"===t?n.notificationService.warn(Xa("invalid.url","Failed to open this link because it is not well-formed: {0}",r.url.toString())):"missing"===t?n.notificationService.warn(Xa("missing.url","Failed to open this link because its target is missing.")):vu(e)}))}}},{key:"getLinkOccurrence",value:function(e){if(!this.editor.hasModel()||!e)return null;var t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=this.currentOccurrences[s.id];if(l)return l}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return null}},{key:"isEnabled",value:function(e,t){return Boolean(6===e.target.type&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}},{key:"stop",value:function(){var e;(this.computeLinks.cancel(),this.activeLinksList)&&(null===(e=this.activeLinksList)||void 0===e||e.dispose(),this.activeLinksList=null);this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this.stop()}}],[{key:"get",value:function(e){return e.getContribution(Wme.ID)}}]),t}(Ru),Wme=Cn,Cn.ID="editor.linkDetector",Cn);Vme=Wme=Bme([Hme(1,xE),Hme(2,rx),Hme(3,wS),Hme(4,Ix)],Vme);var zme={general:cU.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:cU.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})},Ume=function(){function e(t,n){u(this,e),this.link=t,this.decorationId=n}return h(e,[{key:"activate",value:function(t,n){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,n,!0))}},{key:"deactivate",value:function(t,n){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,n,!1))}}],[{key:"decoration",value:function(t,n){return{range:t.range,options:e._getOptions(t,n,!1)}}},{key:"_getOptions",value:function(e,t,n){var i=_({},n?zme.active:zme.general);return i.hoverMessage=function(e,t){var n=e.url&&/^command:/i.test(e.url.toString()),i=e.tooltip?e.tooltip:n?Xa("links.navigate.executeCmd","Execute command"):Xa("links.navigate.follow","Follow link"),r=t?ms?Xa("links.navigate.kb.meta.mac","cmd + click"):Xa("links.navigate.kb.meta","ctrl + click"):ms?Xa("links.navigate.kb.alt.mac","option + click"):Xa("links.navigate.kb.alt","alt + click");if(e.url){var o="";if(/^command:/i.test(e.url.toString())){var a=e.url.toString().match(/^command:([^?#]+)/);if(a)o=Xa("tooltip.explanation","Execute command {0}",a[1])}return new oT("",!0).appendLink(e.url.toString(!0).replace(/ /g,"%20"),i,o).appendMarkdown(" (".concat(r,")"))}return(new oT).appendText("".concat(i," (").concat(r,")"))}(e,t),i}}]),e}();var jme=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.openLink",label:Xa("label","Open Link"),alias:"Open Link",precondition:void 0}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=Vme.get(t);if(n&&t.hasModel()){var i=t.getSelections(),r=!0,o=!1,a=void 0;try{for(var s,l=i[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=n.getLinkOccurrence(u.getEndPosition());c&&n.openLinkOccurrence(c,!1)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}}}]),t}(M_);B_(Vme.ID,Vme,1),O_(jme);var Kme=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._editor=e,n._register(n._editor.onMouseDown((function(e){var t=n._editor.getOption(118);t>=0&&6===e.target.type&&e.target.position.column>=t&&n._editor.updateOptions({stopRenderingLineAfter:-1})}))),n}return p(t,e),t}(Ru);Kme.ID="editor.contrib.longLinesHelper",B_(Kme.ID,Kme,2);var qme=TL("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},Xa("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);TL("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},Xa("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),TL("editor.wordHighlightTextBackground",qme,Xa("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);var Gme=TL("editor.wordHighlightBorder",{light:null,dark:null,hcDark:qL,hcLight:qL},Xa("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));TL("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:qL,hcLight:qL},Xa("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),TL("editor.wordHighlightTextBorder",Gme,Xa("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));var Zme=TL("editorOverviewRuler.wordHighlightForeground","#A0A0A0CC",Xa("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Yme=TL("editorOverviewRuler.wordHighlightStrongForeground","#C0A0C0CC",Xa("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Qme=TL("editorOverviewRuler.wordHighlightTextForeground",eN,Xa("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),Xme=cU.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:OS(Yme),position:dw.Center},minimap:{color:OS(oN),position:1}}),$me=cU.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:OS(Qme),position:dw.Center},minimap:{color:OS(oN),position:1}}),Jme=cU.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:OS(eN),position:dw.Center},minimap:{color:OS(oN),position:1}}),eye=cU.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),tye=cU.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:OS(Zme),position:dw.Center},minimap:{color:OS(oN),position:1}});function nye(e){return e===Nd.Write?Xme:e===Nd.Text?$me:tye}function iye(e){return e?eye:Jme}VS((function(e,t){var n=e.getColor(yD);n&&t.addRule(".monaco-editor .selectionHighlight { background-color: ".concat(n.transparent(.5),"; }"))}));var rye,oye=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},aye=function(e,t){return function(n,i){t(n,i,e)}};function sye(e,t){var n=t.filter((function(t){return!e.find((function(e){return e.equals(t)}))}));if(n.length>=1){var i=n.map((function(e){return"line ".concat(e.viewState.position.lineNumber," column ").concat(e.viewState.position.column)})).join(", ");bR(1===n.length?Xa("cursorAdded","Cursor added: {0}",i):Xa("cursorsAdded","Cursors added: {0}",i))}}var lye=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.insertCursorAbove",label:Xa("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:p0.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:d_.MenubarSelectionMenu,group:"3_multi",title:Xa({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){if(t.hasModel()){var i=!0;n&&!1===n.logicalLine&&(i=!1);var r=t._getViewModel();if(!r.cursorConfig.readOnly){r.model.pushStackElement();var o=r.getCursorStates();r.setCursorStates(n.source,3,IJ.addCursorUp(r,o,i)),r.revealTopMostCursor(n.source),sye(o,r.getCursorStates())}}}}]),t}(M_),uye=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.insertCursorBelow",label:Xa("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:p0.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:d_.MenubarSelectionMenu,group:"3_multi",title:Xa({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){if(t.hasModel()){var i=!0;n&&!1===n.logicalLine&&(i=!1);var r=t._getViewModel();if(!r.cursorConfig.readOnly){r.model.pushStackElement();var o=r.getCursorStates();r.setCursorStates(n.source,3,IJ.addCursorDown(r,o,i)),r.revealBottomMostCursor(n.source),sye(o,r.getCursorStates())}}}}]),t}(M_),cye=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.insertCursorAtEndOfEachLineSelected",label:Xa("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:p0.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:d_.MenubarSelectionMenu,group:"3_multi",title:Xa({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}}])}return p(t,e),h(t,[{key:"getCursorsForSelection",value:function(e,t,n){if(!e.isEmpty()){for(var i=e.startLineNumber;i<e.endLineNumber;i++){var r=t.getLineMaxColumn(i);n.push(new fd(i,r,i,r))}e.endColumn>1&&n.push(new fd(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}},{key:"run",value:function(e,t){var n=this;if(t.hasModel()){var i=t.getModel(),r=t.getSelections(),o=t._getViewModel(),a=o.getCursorStates(),s=[];r.forEach((function(e){return n.getCursorsForSelection(e,i,s)})),s.length>0&&t.setSelections(s),sye(a,o.getCursorStates())}}}]),t}(M_),dye=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.addCursorsToBottom",label:Xa("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0}])}return p(t,e),h(t,[{key:"run",value:function(e,t){if(t.hasModel()){for(var n=t.getSelections(),i=t.getModel().getLineCount(),r=[],o=n[0].startLineNumber;o<=i;o++)r.push(new fd(o,n[0].startColumn,o,n[0].endColumn));var a=t._getViewModel(),s=a.getCursorStates();r.length>0&&t.setSelections(r),sye(s,a.getCursorStates())}}}]),t}(M_),hye=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.addCursorsToTop",label:Xa("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0}])}return p(t,e),h(t,[{key:"run",value:function(e,t){if(t.hasModel()){for(var n=t.getSelections(),i=[],r=n[0].startLineNumber;r>=1;r--)i.push(new fd(r,n[0].startColumn,r,n[0].endColumn));var o=t._getViewModel(),a=o.getCursorStates();i.length>0&&t.setSelections(i),sye(a,o.getCursorStates())}}}]),t}(M_),fye=function e(t,n,i){u(this,e),this.selections=t,this.revealRange=n,this.revealScrollType=i},gye=function(){function e(t,n,i,r,o,a,s){u(this,e),this._editor=t,this.findController=n,this.isDisconnectedFromFindController=i,this.searchText=r,this.wholeWord=o,this.matchCase=a,this.currentMatch=s}return h(e,[{key:"addSelectionToNextFindMatch",value:function(){if(!this._editor.hasModel())return null;var e=this._getNextMatch();if(!e)return null;var t=this._editor.getSelections();return new fye(t.concat(e),e,0)}},{key:"moveSelectionToNextFindMatch",value:function(){if(!this._editor.hasModel())return null;var e=this._getNextMatch();if(!e)return null;var t=this._editor.getSelections();return new fye(t.slice(0,t.length-1).concat(e),e,0)}},{key:"_getNextMatch",value:function(){if(!this._editor.hasModel())return null;if(this.currentMatch){var e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();var t=this._editor.getSelections(),n=t[t.length-1],i=this._editor.getModel().findNextMatch(this.searchText,n.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return i?new fd(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}},{key:"addSelectionToPreviousFindMatch",value:function(){if(!this._editor.hasModel())return null;var e=this._getPreviousMatch();if(!e)return null;var t=this._editor.getSelections();return new fye(t.concat(e),e,0)}},{key:"moveSelectionToPreviousFindMatch",value:function(){if(!this._editor.hasModel())return null;var e=this._getPreviousMatch();if(!e)return null;var t=this._editor.getSelections();return new fye(t.slice(0,t.length-1).concat(e),e,0)}},{key:"_getPreviousMatch",value:function(){if(!this._editor.hasModel())return null;if(this.currentMatch){var e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();var t=this._editor.getSelections(),n=t[t.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,n.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return i?new fd(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}},{key:"selectAll",value:function(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();var t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824)}}],[{key:"create",value:function(t,n){if(!t.hasModel())return null;var i=n.getState();if(!t.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new e(t,n,!1,i.searchString,i.wholeWord,i.matchCase,null);var r,o,a=!1,s=t.getSelections();1===s.length&&s[0].isEmpty()?(a=!0,r=!0,o=!0):(r=i.wholeWord,o=i.matchCase);var l,u=t.getSelection(),c=null;if(u.isEmpty()){var d=t.getConfiguredWordAtPosition(u.getStartPosition());if(!d)return null;l=d.word,c=new fd(u.startLineNumber,d.startColumn,u.startLineNumber,d.endColumn)}else l=t.getModel().getValueInRange(u).replace(/\r\n/g,"\n");return new e(t,n,a,l,r,o,c)}}]),e}(),vye=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._sessionDispose=n._register(new Tu),n._editor=e,n._ignoreSelectionChange=!1,n._session=null,n}return p(t,e),h(t,[{key:"dispose",value:function(){this._endSession(),g(v(t.prototype),"dispose",this).call(this)}},{key:"_beginSessionIfNeeded",value:function(e){var t=this;if(!this._session){var n=gye.create(this._editor,e);if(!n)return;this._session=n;var i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection((function(e){t._ignoreSelectionChange||t._endSession()}))),this._sessionDispose.add(this._editor.onDidBlurEditorText((function(){t._endSession()}))),this._sessionDispose.add(e.getState().onFindReplaceStateChange((function(e){(e.matchCase||e.wholeWord)&&t._endSession()})))}}},{key:"_endSession",value:function(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){this._session.findController.getState().change({wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0},!1)}this._session=null}},{key:"_setSelections",value:function(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}},{key:"_expandEmptyToWord",value:function(e,t){if(!t.isEmpty())return t;var n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new fd(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}},{key:"_applySessionResult",value:function(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}},{key:"getSession",value:function(e){return this._session}},{key:"addSelectionToNextFindMatch",value:function(e){if(this._editor.hasModel()){if(!this._session){var t=this._editor.getSelections();if(t.length>1){var n=e.getState().matchCase;if(!xye(this._editor.getModel(),t,n)){for(var i=this._editor.getModel(),r=[],o=0,a=t.length;o<a;o++)r[o]=this._expandEmptyToWord(i,t[o]);return void this._editor.setSelections(r)}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}},{key:"addSelectionToPreviousFindMatch",value:function(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}},{key:"moveSelectionToNextFindMatch",value:function(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}},{key:"moveSelectionToPreviousFindMatch",value:function(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}},{key:"selectAll",value:function(e){if(this._editor.hasModel()){var t=null,n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex){var i=this._editor.getModel();t=n.searchScope?i.findMatches(n.searchString,n.searchScope,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(132):null,!1,1073741824):i.findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(132):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(n.searchScope)}if(t.length>0){for(var r=this._editor.getSelection(),o=0,a=t.length;o<a;o++){var s=t[o];if(s.range.intersectRanges(r)){t[o]=t[0],t[0]=s;break}}this._setSelections(t.map((function(e){return new fd(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)})))}}}}],[{key:"get",value:function(e){return e.getContribution(t.ID)}}]),t}(Ru);vye.ID="editor.contrib.multiCursorController";var pye=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=vye.get(t);if(n){var i=t._getViewModel();if(i){var r=i.getCursorStates(),o=Lce.get(t);if(o)this._run(n,o);else{var a=e.get(Gm).createInstance(Lce,t);this._run(n,a),a.dispose()}sye(r,i.getCursorStates())}}}}]),t}(M_),mye=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.addSelectionToNextFindMatch",label:Xa("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:p0.focus,primary:2082,weight:100},menuOpts:{menuId:d_.MenubarSelectionMenu,group:"3_multi",title:Xa({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}}])}return p(t,e),h(t,[{key:"_run",value:function(e,t){e.addSelectionToNextFindMatch(t)}}]),t}(pye),yye=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.addSelectionToPreviousFindMatch",label:Xa("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:d_.MenubarSelectionMenu,group:"3_multi",title:Xa({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}}])}return p(t,e),h(t,[{key:"_run",value:function(e,t){e.addSelectionToPreviousFindMatch(t)}}]),t}(pye),_ye=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.moveSelectionToNextFindMatch",label:Xa("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:p0.focus,primary:pc(2089,2082),weight:100}}])}return p(t,e),h(t,[{key:"_run",value:function(e,t){e.moveSelectionToNextFindMatch(t)}}]),t}(pye),bye=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.moveSelectionToPreviousFindMatch",label:Xa("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0}])}return p(t,e),h(t,[{key:"_run",value:function(e,t){e.moveSelectionToPreviousFindMatch(t)}}]),t}(pye),kye=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.selectHighlights",label:Xa("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:p0.focus,primary:3114,weight:100},menuOpts:{menuId:d_.MenubarSelectionMenu,group:"3_multi",title:Xa({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}}])}return p(t,e),h(t,[{key:"_run",value:function(e,t){e.selectAll(t)}}]),t}(pye),wye=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.changeAll",label:Xa("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:Sy.and(p0.writable,p0.editorTextFocus),kbOpts:{kbExpr:p0.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}}])}return p(t,e),h(t,[{key:"_run",value:function(e,t){e.selectAll(t)}}]),t}(pye),Cye=function(){function e(t,n,i,r,o){u(this,e),this._model=t,this._searchText=n,this._matchCase=i,this._wordSeparators=r,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,o&&this._model===o._model&&this._searchText===o._searchText&&this._matchCase===o._matchCase&&this._wordSeparators===o._wordSeparators&&this._modelVersionId===o._modelVersionId&&(this._cachedFindMatches=o._cachedFindMatches)}return h(e,[{key:"findMatches",value:function(){return null===this._cachedFindMatches&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map((function(e){return e.range})),this._cachedFindMatches.sort(hd.compareRangesUsingStarts)),this._cachedFindMatches}}]),e}(),Sye=(Sn=function(e){function t(e,n){var i;u(this,t),(i=l(this,t))._languageFeaturesService=n,i.editor=e,i._isEnabled=e.getOption(109),i._decorations=e.createDecorationsCollection(),i.updateSoon=i._register(new Sg((function(){return i._update()}),300)),i.state=null,i._register(e.onDidChangeConfiguration((function(t){i._isEnabled=e.getOption(109)}))),i._register(e.onDidChangeCursorSelection((function(e){i._isEnabled&&(e.selection.isEmpty()?3===e.reason?(i.state&&i._setState(null),i.updateSoon.schedule()):i._setState(null):i._update())}))),i._register(e.onDidChangeModel((function(e){i._setState(null)}))),i._register(e.onDidChangeModelContent((function(e){i._isEnabled&&i.updateSoon.schedule()})));var r=Lce.get(e);return r&&i._register(r.getState().onFindReplaceStateChange((function(e){i._update()}))),i.updateSoon.schedule(),i}return p(t,e),h(t,[{key:"_update",value:function(){this._setState(rye._createState(this.state,this._isEnabled,this.editor))}},{key:"_setState",value:function(e){if(this.state=e,this.state){if(this.editor.hasModel()){var t=this.editor.getModel();if(!t.isTooLargeForTokenization()){var n=this.state.findMatches(),i=this.editor.getSelections();i.sort(hd.compareRangesUsingStarts);for(var r=[],o=0,a=0,s=n.length,l=i.length;o<s;){var u=n[o];if(a>=l)r.push(u),o++;else{var c=hd.compareRangesUsingStarts(u,i[a]);c<0?(!i[a].isEmpty()&&hd.areIntersecting(u,i[a])||r.push(u),o++):(c>0||o++,a++)}}var d="off"!==this.editor.getOption(81),h=this._languageFeaturesService.documentHighlightProvider.has(t)&&d,f=r.map((function(e){return{range:e,options:iye(h)}}));this._decorations.set(f)}}}else this._decorations.clear()}},{key:"dispose",value:function(){this._setState(null),g(v(t.prototype),"dispose",this).call(this)}}],[{key:"_createState",value:function(e,t,n){if(!t)return null;if(!n.hasModel())return null;var i=n.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;var r=vye.get(n);if(!r)return null;var o=Lce.get(n);if(!o)return null;var a=r.getSession(o);if(!a){var s=n.getSelections();if(s.length>1){var l=o.getState().matchCase;if(!xye(n.getModel(),s,l))return null}a=gye.create(n,o)}if(!a)return null;if(a.currentMatch)return null;if(/^[ \t]+$/.test(a.searchText))return null;if(a.searchText.length>200)return null;var u=o.getState(),c=u.matchCase;if(u.isRevealed){var d=u.searchString;c||(d=d.toLowerCase());var h=a.searchText;if(c||(h=h.toLowerCase()),d===h&&a.matchCase===u.matchCase&&a.wholeWord===u.wholeWord&&!u.isRegex)return null}return new Cye(n.getModel(),a.searchText,a.matchCase,a.wholeWord?n.getOption(132):null,e)}}]),t}(Ru),rye=Sn,Sn.ID="editor.contrib.selectionHighlighter",Sn);function xye(e,t,n){for(var i=Lye(e,t[0],!n),r=1,o=t.length;r<o;r++){var a=t[r];if(a.isEmpty())return!1;if(i!==Lye(e,a,!n))return!1}return!0}function Lye(e,t,n){var i=e.getValueInRange(t);return n?i.toLowerCase():i}Sye=rye=oye([aye(1,wS)],Sye);var Dye=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.focusNextCursor",label:Xa("mutlicursor.focusNextCursor","Focus Next Cursor"),metadata:{description:Xa("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){if(t.hasModel()){var i=t._getViewModel();if(!i.cursorConfig.readOnly){i.model.pushStackElement();var r=Array.from(i.getCursorStates()),o=r.shift();o&&(r.push(o),i.setCursorStates(n.source,3,r),i.revealPrimaryCursor(n.source,!0),sye(r,i.getCursorStates()))}}}}]),t}(M_),Nye=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.focusPreviousCursor",label:Xa("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),metadata:{description:Xa("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){if(t.hasModel()){var i=t._getViewModel();if(!i.cursorConfig.readOnly){i.model.pushStackElement();var r=Array.from(i.getCursorStates()),o=r.pop();o&&(r.unshift(o),i.setCursorStates(n.source,3,r),i.revealPrimaryCursor(n.source,!0),sye(r,i.getCursorStates()))}}}}]),t}(M_);B_(vye.ID,vye,4),B_(Sye.ID,Sye,1),O_(lye),O_(uye),O_(cye),O_(mye),O_(yye),O_(_ye),O_(bye),O_(kye),O_(wye),O_(dye),O_(hye),O_(Dye),O_(Nye);var Iye=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Eye=function(e,t){return function(n,i){t(n,i,e)}},Mye="inline-edit",Tye=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t)).editor=e,r.model=n,r.languageService=i,r.isDisposed=BP(r,!1),r.currentTextModel=rO(r,r.editor.onDidChangeModel,(function(){return r.editor.getModel()})),r.uiState=UP(r,(function(e){var t,n=function(e,t){if(c.length>0){var n=c[c.length-1];t&&n.decorations.push(new CQ(n.content.length+1,n.content.length+1+e[0].length,t,0)),n.content+=e[0],e=e.slice(1)}var i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;c.push({content:l,decorations:t?[new CQ(1,l.length+1,t,0)]:[]})}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}};if(!r.isDisposed.read(e)){var i=r.currentTextModel.read(e);if(i===r.model.targetTextModel.read(e)){var o=r.model.ghostText.read(e);if(o){var a=null===(t=r.model.range)||void 0===t?void 0:t.read(e);a&&a.startLineNumber===a.endLineNumber&&a.startColumn===a.endColumn&&(a=void 0);var s=(!a||a.startLineNumber===a.endLineNumber)&&1===o.parts.length&&1===o.parts[0].lines.length,l=1===o.parts.length&&o.parts[0].lines.every((function(e){return 0===e.length})),u=[],c=[],d=i.getLineContent(o.lineNumber),h=void 0,f=0;if(!l&&(s||!a)){var g=!0,v=!1,p=void 0;try{for(var m,y=o.parts[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var _=m.value,b=_.lines;a&&!s&&(n(b,Mye),b=[]),void 0===h?(u.push({column:_.column,text:b[0],preview:_.preview}),b=b.slice(1)):n([d.substring(f,_.column-1)],void 0),b.length>0&&(n(b,Mye),void 0===h&&_.column<=d.length&&(h=_.column)),f=_.column-1}}catch(e){v=!0,p=e}finally{try{g||null==y.return||y.return()}finally{if(v)throw p}}void 0!==h&&n([d.substring(f)],void 0)}var k=void 0!==h?new ghe(h,d.length+1):void 0,w=s||!a?o.lineNumber:a.endLineNumber-1;return{inlineTexts:u,additionalLines:c,hiddenRange:k,lineNumber:w,additionalReservedLineCount:r.model.minReservedLineCount.read(e),targetTextModel:i,range:a,isSingleLine:s,isPureRemove:l}}}}})),r.decorations=UP(r,(function(e){var t=r.uiState.read(e);if(!t)return[];var n=[];if(t.hiddenRange&&n.push({range:t.hiddenRange.toRange(t.lineNumber),options:{inlineClassName:"inline-edit-hidden",description:"inline-edit-hidden"}}),t.range){var i=[];if(t.isSingleLine)i.push(t.range);else if(!t.isPureRemove)for(var o=t.range.endLineNumber-t.range.startLineNumber,a=0;a<o;a++){var s=t.range.startLineNumber+a,l=t.targetTextModel.getLineFirstNonWhitespaceColumn(s),u=t.targetTextModel.getLineLastNonWhitespaceColumn(s),c=new hd(s,l,s,u);i.push(c)}var d=!0,h=!1,f=void 0;try{for(var g,v=i[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;n.push({range:p,options:t5})}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}}if(t.range&&!t.isSingleLine&&t.isPureRemove){var m=new hd(t.range.startLineNumber,1,t.range.endLineNumber-1,1);n.push({range:m,options:Y3})}var y=!0,_=!1,b=void 0;try{for(var k,w=t.inlineTexts[Symbol.iterator]();!(y=(k=w.next()).done);y=!0){var C=k.value;n.push({range:hd.fromPositions(new dd(t.lineNumber,C.column)),options:{description:Mye,after:{content:C.text,inlineClassName:C.preview?"inline-edit-decoration-preview":"inline-edit-decoration",cursorStops:fw.Left},showIfCollapsed:!0}})}}catch(e){_=!0,b=e}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}return n})),r._register(Mu((function(){r.isDisposed.set(!0,void 0)}))),r._register(vhe(r.editor,r.decorations)),r}return p(t,e),t}(Ru);Tye=Iye([Eye(2,Jb)],Tye);var Rye,Aye=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Pye=function(e,t){return function(n,i){t(n,i,e)}},Oye=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t)).editor=e,r.model=n,r.instantiationService=i,r.alwaysShowToolbar=rO(r,r.editor.onDidChangeConfiguration,(function(){return"always"===r.editor.getOption(63).showToolbar})),r.sessionPosition=void 0,r.position=UP(r,(function(e){var t,n,i=null===(t=r.model.read(e))||void 0===t?void 0:t.model.ghostText.read(e);if(!r.alwaysShowToolbar.read(e)||!i||0===i.parts.length)return r.sessionPosition=void 0,null;var o,a=i.parts[0].column;r.sessionPosition&&r.sessionPosition.lineNumber!==i.lineNumber&&(r.sessionPosition=void 0);var s=new dd(i.lineNumber,Math.min(a,null!==(o=null===(n=r.sessionPosition)||void 0===n?void 0:n.column)&&void 0!==o?o:Number.MAX_SAFE_INTEGER));return r.sessionPosition=s,s})),r._register(eO((function(t,n){if(r.model.read(t)&&r.alwaysShowToolbar.read(t)){var i=n.add(r.instantiationService.createInstance(Fye,r.editor,!0,r.position));e.addContentWidget(i),n.add(Mu((function(){return e.removeContentWidget(i)})))}}))),r}return p(t,e),t}(Ru);Oye=Aye([Pye(2,Gm)],Oye);var Fye=(xn=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t)).editor=e,s.withBorder=n,s._position=i,s._contextKeyService=o,s._menuService=a,s.id="InlineEditHintsContentWidget".concat(Rye.id++),s.allowEditorOverflow=!0,s.suppressMouseDown=!1,s.nodes=Lm("div.inlineEditHints",{className:s.withBorder?".withBorder":""},[Lm("div@toolBar")]),s.inlineCompletionsActionsMenus=s._register(s._menuService.createMenu(d_.InlineEditActions,s._contextKeyService)),s.toolBar=s._register(r.createInstance(Bye,s.nodes.toolBar,s.editor,d_.InlineEditToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:function(e){return e.startsWith("primary")}},actionViewItemProvider:function(e,t){if(e instanceof p_)return r.createInstance(Wye,e,void 0)},telemetrySource:"InlineEditToolbar"})),s._register(s.toolBar.onDidChangeDropdownVisibility((function(e){Rye._dropDownVisible=e}))),s._register(XP((function(e){s._position.read(e),s.editor.layoutContentWidget(s)}))),s._register(XP((function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=s.inlineCompletionsActionsMenus.getActions()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=C(o.value,2),u=(l[0],l[1]),c=!0,d=!1,h=void 0;try{for(var f,g=u[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;v instanceof p_&&t.push(v)}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}t.length>0&&t.unshift(new ey),s.toolBar.setAdditionalSecondaryActions(t)}))),s}return p(t,e),h(t,[{key:"getId",value:function(){return this.id}},{key:"getDomNode",value:function(){return this.nodes.root}},{key:"getPosition",value:function(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}}]),t}(Ru),Rye=xn,xn._dropDownVisible=!1,xn.id=0,xn);Fye=Rye=Aye([Pye(3,Gm),Pye(4,Ky),Pye(5,h_)],Fye);var Wye=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"updateLabel",value:function(){var e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return g(v(t.prototype),"updateLabel",this).call(this);if(this.label){var n=Lm("div.keybinding").root;this._register(new xG(n,Ns,_({disableTitle:!0},SG))).set(e),this.label.textContent=this._action.label,this.label.appendChild(n),this.label.classList.add("inlineEditStatusBarItemLabel")}}},{key:"updateTooltip",value:function(){}}]),t}(iW),Bye=function(e){function t(e,n,i,r,o,a,s,c,d,h){var f;return u(this,t),(f=l(this,t,[e,_({resetMenu:i},r),o,a,s,c,d,h])).editor=n,f.menuId=i,f.options2=r,f.menuService=o,f.contextKeyService=a,f.menu=f._store.add(f.menuService.createMenu(f.menuId,f.contextKeyService,{emitEventsForSubmenuChanges:!0})),f.additionalActions=[],f.prependedPrimaryActions=[],f._store.add(f.menu.onDidChange((function(){return f.updateToolbar()}))),f._store.add(f.editor.onDidChangeCursorPosition((function(){return f.updateToolbar()}))),f.updateToolbar(),f}return p(t,e),h(t,[{key:"updateToolbar",value:function(){var e,t,n,i,r,o,a,s,l,u=[],c=[];tW(this.menu,null===(n=this.options2)||void 0===n?void 0:n.menuOptions,{primary:u,secondary:c},null===(r=this.options2)||void 0===r||null===(i=r.toolbarOptions)||void 0===i?void 0:i.primaryGroup,null===(a=this.options2)||void 0===a||null===(o=a.toolbarOptions)||void 0===o?void 0:o.shouldInlineSubmenu,null===(l=this.options2)||void 0===l||null===(s=l.toolbarOptions)||void 0===s?void 0:s.useSeparatorsInPrimaryActions),(e=c).push.apply(e,x(this.additionalActions)),(t=u).unshift.apply(t,x(this.prependedPrimaryActions)),this.setActions(u,c)}},{key:"setAdditionalSecondaryActions",value:function(e){ea(this.additionalActions,e,(function(e,t){return e===t}))||(this.additionalActions=e,this.updateToolbar())}}]),t}(G5);Bye=Aye([Pye(4,h_),Pye(5,Ky),Pye(6,GI),Pye(7,ZI),Pye(8,ay),Pye(9,b_)],Bye);var Hye,Vye,zye=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Uye=function(e,t){return function(n,i){t(n,i,e)}};function jye(e){var t,n,i=null!==(n=null===(t=e[0].match(/^\s*/))||void 0===t?void 0:t[0])&&void 0!==n?n:"",r=i.length;return{text:e.map((function(e){return e.replace(new RegExp("^"+i),"")})),shift:r}}var Kye=(Ln=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t))._editor=e,a._model=n,a._instantiationService=i,a._diffProviderFactoryService=r,a._modelService=o,a._position=UP(a,(function(e){var t,n=a._model.read(e);if(!n||0===n.text.length)return null;if(n.range.startLineNumber===n.range.endLineNumber&&(n.range.startColumn!==n.range.endColumn||1!==n.range.startColumn))return null;var i=a._editor.getModel();if(!i)return null;var r=Array.from(function(e,t){var n,i,r,o=arguments;return E(this,(function(a){switch(a.label){case 0:n=o.length>2&&void 0!==o[2]?o[2]:1,void 0===t&&(t=(i=[e,0])[0],e=i[1]),r=e,a.label=1;case 1:return r<t?[4,r]:[3,4];case 2:a.sent(),a.label=3;case 3:return r+=n,[3,1];case 4:return[2]}}))}(n.range.startLineNumber,n.range.endLineNumber+1)),o=r.map((function(e){return i.getLineLastNonWhitespaceColumn(e)})),s=(t=Math).max.apply(t,x(o)),l=r[o.indexOf(s)],u=new dd(l,s);return{top:n.range.startLineNumber,left:u}})),a._text=UP(a,(function(e){var t=a._model.read(e);if(!t)return{text:"",shift:0};var n=jye(t.text.split("\n"));return{text:n.text.join("\n"),shift:n.shift}})),a._originalModel=ZP((function(){return a._modelService.createModel("",null,Hye._createUniqueUri())})).keepObserved(a._store),a._modifiedModel=ZP((function(){return a._modelService.createModel("",null,Hye._createUniqueUri())})).keepObserved(a._store),a._diff=UP(a,(function(e){var t,n;return null===(n=a._diffPromise.read(e))||void 0===n||null===(t=n.promiseResult.read(e))||void 0===t?void 0:t.data})),a._diffPromise=UP(a,(function(e){var t=a._model.read(e);if(t){var n=a._editor.getModel();if(n){var i=jye(n.getValueInRange(t.range).split("\n")).text.join("\n"),r=jye(t.text.split("\n")).text.join("\n");a._originalModel.get().setValue(i),a._modifiedModel.get().setValue(r);var o=a._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"}),l=a;return gO.fromFn(s((function(){var e;return E(this,(function(t){switch(t.label){case 0:return[4,o.computeDiff(l._originalModel.get(),l._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},Uu.None)];case 1:return(e=t.sent()).identical?[2,void 0]:[2,e.changes]}}))})))}}})),a._register(eO((function(t,n){if(a._model.read(t)&&null!==a._position.get()){var i=n.add(a._instantiationService.createInstance(qye,a._editor,a._position,a._text.map((function(e){return e.text})),a._text.map((function(e){return e.shift})),a._diff));e.addOverlayWidget(i),n.add(Mu((function(){return e.removeOverlayWidget(i)})))}}))),a}return p(t,e),h(t,null,[{key:"_createUniqueUri",value:function(){return ed.from({scheme:"inline-edit-widget",path:(new Date).toString()+String(Hye._modelId++)})}}]),t}(Ru),Hye=Ln,Ln._modelId=0,Ln);Kye=Hye=zye([Uye(2,Gm),Uye(3,a5),Uye(4,Qm)],Kye);var qye=(Dn=function(e){function t(e,n,i,r,o,a){var s,c,d;return u(this,t),(s=l(this,t))._editor=e,s._position=n,s._text=i,s._shift=r,s._diff=o,s._instantiationService=a,s.id="InlineEditSideBySideContentWidget".concat(Vye.id++),s.allowEditorOverflow=!1,s._nodes=gm("div.inlineEditSideBySide",void 0),s._scrollChanged=aO("editor.onDidScrollChange",s._editor.onDidScrollChange),s._previewEditor=s._register(s._instantiationService.createInstance(cae,s._nodes,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,scrollbar:{vertical:"hidden",horizontal:"hidden",alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},readOnly:!0,wordWrap:"off",wordWrapOverride1:"off",wordWrapOverride2:"off",wrappingIndent:"none",wrappingStrategy:void 0},{contributions:[],isSimpleWidget:!0},s._editor)),s._previewEditorObs=t6(s._previewEditor),s._editorObs=t6(s._editor),s._previewTextModel=s._register(s._instantiationService.createInstance(eU,"",null!==(d=null===(c=s._editor.getModel())||void 0===c?void 0:c.getLanguageId())&&void 0!==d?d:kk,eU.DEFAULT_CREATION_OPTIONS,null)),s._setText=UP((function(e){var t=s._text.read(e);t&&s._previewTextModel.setValue(t)})).recomputeInitiallyAndOnChange(s._store),s._decorations=UP(s,(function(e){s._setText.read(e);var t=s._position.read(e);if(!t)return{org:[],mod:[]};var n=s._diff.read(e);if(!n)return{org:[],mod:[]};var i=[],r=[];if(1===n.length&&n[0].innerChanges[0].modifiedRange.equalsRange(s._previewTextModel.getFullModelRange()))return{org:[],mod:[]};var o=s._shift.get(),a=function(e){return new hd(e.startLineNumber+t.top-1,e.startColumn+o,e.endLineNumber+t.top-1,e.endColumn+o)},l=!0,u=!1,c=void 0;try{for(var d,h=n[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;if(f.original.isEmpty||i.push({range:a(f.original.toInclusiveRange()),options:Y3}),f.modified.isEmpty||r.push({range:f.modified.toInclusiveRange(),options:Z3}),f.modified.isEmpty||f.original.isEmpty)f.original.isEmpty||i.push({range:a(f.original.toInclusiveRange()),options:n5}),f.modified.isEmpty||r.push({range:f.modified.toInclusiveRange(),options:J3});else{var g=!0,v=!1,p=void 0;try{for(var m,y=(f.innerChanges||[])[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var _=m.value;f.original.contains(_.originalRange.startLineNumber)&&i.push({range:a(_.originalRange),options:_.originalRange.isEmpty()?i5:t5}),f.modified.contains(_.modifiedRange.startLineNumber)&&r.push({range:_.modifiedRange,options:_.modifiedRange.isEmpty()?e5:$3})}}catch(e){v=!0,p=e}finally{try{g||null==y.return||y.return()}finally{if(v)throw p}}}}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return{org:i,mod:r}})),s._originalDecorations=UP(s,(function(e){return s._decorations.read(e).org})),s._modifiedDecorations=UP(s,(function(e){return s._decorations.read(e).mod})),s._previewEditor.setModel(s._previewTextModel),s._register(s._editorObs.setDecorations(s._originalDecorations)),s._register(s._previewEditorObs.setDecorations(s._modifiedDecorations)),s._register(XP((function(e){var t=s._previewEditorObs.contentWidth.read(e),n=s._text.read(e).split("\n").length-1,i=s._editor.getOption(67)*n;t<=0||s._previewEditor.layout({height:i,width:t})}))),s._register(XP((function(e){s._position.read(e),s._editor.layoutOverlayWidget(s)}))),s._register(XP((function(e){s._scrollChanged.read(e),s._position.read(e)&&s._editor.layoutOverlayWidget(s)}))),s}return p(t,e),h(t,[{key:"getId",value:function(){return this.id}},{key:"getDomNode",value:function(){return this._nodes}},{key:"getPosition",value:function(){var e=this._position.get();if(!e)return null;var t=this._editor.getLayoutInfo(),n=this._editor.getScrolledVisiblePosition(new dd(e.top,1));if(!n)return null;var i=n.top-1,r=this._editor.getOffsetForColumn(e.left.lineNumber,e.left.column);return{preference:{left:t.contentLeft+r+10,top:i}}}}]),t}(Ru),Vye=Dn,Dn.id=0,Dn);qye=Vye=zye([Uye(5,Gm)],qye);var Gye,Zye=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Yye=function(e,t){return function(n,i){t(n,i,e)}},Qye=(Nn=function(e){function t(e,n,i,r,o,a,c,d){var h,f;u(this,t),h=l(this,t),f=h,h.editor=e,h.instantiationService=n,h.contextKeyService=i,h.languageFeaturesService=r,h._commandService=o,h._configurationService=a,h._diffProviderFactoryService=c,h._modelService=d,h._isVisibleContext=Gye.inlineEditVisibleContext.bindTo(h.contextKeyService),h._isCursorAtInlineEditContext=Gye.cursorAtInlineEditContext.bindTo(h.contextKeyService),h._currentEdit=BP(h,void 0),h._currentWidget=ZP(h._currentEdit,(function(e){var t=h._currentEdit.read(e);if(t){var n,i=t.range.endLineNumber,r=t.range.endColumn,o=!t.text.endsWith("\n")||t.range.startLineNumber===t.range.endLineNumber&&t.range.startColumn===t.range.endColumn?t.text:t.text.slice(0,-1),a=new lhe(i,[new uhe(r,o,!1)]),s=t.range.startLineNumber===t.range.endLineNumber&&1===a.parts.length&&1===a.parts[0].lines.length,l=""===t.text;if(s||l)return h.instantiationService.createInstance(Tye,h.editor,{ghostText:nO(a),minReservedLineCount:nO(0),targetTextModel:nO(null!==(n=h.editor.getModel())&&void 0!==n?n:void 0),range:nO(t.range)})}})),h._isAccepting=BP(h,!1),h._enabled=rO(h,h.editor.onDidChangeConfiguration,(function(){return h.editor.getOption(63).enabled})),h._fontFamily=rO(h,h.editor.onDidChangeConfiguration,(function(){return h.editor.getOption(63).fontFamily}));var g=aO("InlineEditController.modelContentChangedSignal",e.onDidChangeModelContent);h._register(XP((function(t){h._enabled.read(t)&&(g.read(t),h._isAccepting.read(t)||h.getInlineEdit(e,!0))})));var v=rO(h,e.onDidChangeCursorPosition,(function(){return e.getPosition()}));h._register(XP((function(e){if(h._enabled.read(e)){var t=v.read(e);t&&h.checkCursorPosition(t)}}))),h._register(XP((function(t){var n=h._currentEdit.read(t);if(h._isCursorAtInlineEditContext.set(!1),n){h._isVisibleContext.set(!0);var i=e.getPosition();i&&h.checkCursorPosition(i)}else h._isVisibleContext.set(!1)})));var p=aO("InlineEditController.editorBlurSignal",e.onDidBlurEditorWidget);h._register(XP(function(){var t=s((function(t){var n;return E(this,(function(i){switch(i.label){case 0:return f._enabled.read(t)?(p.read(t),f._configurationService.getValue("editor.experimentalInlineEdit.keepOnBlur")||e.getOption(63).keepOnBlur?[2]:(null===(n=f._currentRequestCts)||void 0===n||n.dispose(!0),f._currentRequestCts=void 0,[4,f.clear(!1)])):[2];case 1:return i.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}()));var m=aO("InlineEditController.editorFocusSignal",e.onDidFocusEditorText);h._register(XP((function(t){h._enabled.read(t)&&(m.read(t),h.getInlineEdit(e,!0))})));var y=h._register(zp());return h._register(XP((function(e){var t=h._fontFamily.read(e);y.setStyle(""===t||"default"===t?"":"\n.monaco-editor .inline-edit-decoration,\n.monaco-editor .inline-edit-decoration-preview,\n.monaco-editor .inline-edit {\n\tfont-family: ".concat(t,";\n}"))}))),h._register(new Oye(h.editor,h._currentWidget,h.instantiationService)),h._register(new Kye(h.editor,h._currentEdit,h.instantiationService,h._diffProviderFactoryService,h._modelService)),h}return p(t,e),h(t,[{key:"checkCursorPosition",value:function(e){if(this._currentEdit){var t=this._currentEdit.get();t?this._isCursorAtInlineEditContext.set(hd.containsPosition(t.range,e)):this._isCursorAtInlineEditContext.set(!1)}else this._isCursorAtInlineEditContext.set(!1)}},{key:"validateInlineEdit",value:function(e,t){if(t.text.includes("\n")&&t.range.startLineNumber!==t.range.endLineNumber&&t.range.startColumn!==t.range.endColumn){var n;if(1!==t.range.startColumn)return!1;var i,r=t.range.endLineNumber;if(t.range.endColumn!==(null!==(i=null===(n=e.getModel())||void 0===n?void 0:n.getLineLength(r))&&void 0!==i?i:0)+1)return!1}return!0}},{key:"fetchInlineEdit",value:function(e,t){var n=this;return s((function(){var i,r,o,a,s,l,u;return E(this,(function(c){switch(c.label){case 0:return n._currentRequestCts&&n._currentRequestCts.dispose(!0),(i=e.getModel())?(r=i.getVersionId(),0===(o=n.languageFeaturesService.inlineEditProvider.all(i)).length?[2]:(a=o[0],n._currentRequestCts=new rc,s=n._currentRequestCts.token,l=t?Bd.Automatic:Bd.Invoke,t?[4,Xye(50,s)]:[3,2])):[2];case 1:c.sent(),c.label=2;case 2:return s.isCancellationRequested||i.isDisposed()||i.getVersionId()!==r?[2]:[4,a.provideInlineEdit(i,{triggerKind:l},s)];case 3:return(u=c.sent())?s.isCancellationRequested||i.isDisposed()||i.getVersionId()!==r?[2]:n.validateInlineEdit(e,u)?[2,u]:[2]:[2]}}))}))()}},{key:"getInlineEdit",value:function(e,t){var n=this;return s((function(){var i;return E(this,(function(r){switch(r.label){case 0:return n._isCursorAtInlineEditContext.set(!1),[4,n.clear()];case 1:return r.sent(),[4,n.fetchInlineEdit(e,t)];case 2:return(i=r.sent())?(n._currentEdit.set(i,void 0),[2]):[2]}}))}))()}},{key:"trigger",value:function(){var e=this;return s((function(){return E(this,(function(t){switch(t.label){case 0:return[4,e.getInlineEdit(e.editor,!1)];case 1:return t.sent(),[2]}}))}))()}},{key:"jumpBack",value:function(){var e=this;return s((function(){return E(this,(function(t){return e._jumpBackPosition?(e.editor.setPosition(e._jumpBackPosition),e.editor.revealPositionInCenterIfOutsideViewport(e._jumpBackPosition),[2]):[2]}))}))()}},{key:"accept",value:function(){var e=this;return s((function(){var t,n,i;return E(this,(function(r){switch(r.label){case 0:return e._isAccepting.set(!0,void 0),(t=e._currentEdit.get())?(n=t.text,t.text.startsWith("\n")&&(n=t.text.substring(1)),e.editor.pushUndoStop(),e.editor.executeEdits("acceptCurrent",[lA.replace(hd.lift(t.range),n)]),t.accepted?[4,(i=e._commandService).executeCommand.apply(i,[t.accepted.id].concat(x(t.accepted.arguments||[]))).then(void 0,pu)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return e.freeEdit(t),TP((function(t){e._currentEdit.set(void 0,t),e._isAccepting.set(!1,t)})),[2]}}))}))()}},{key:"jumpToCurrent",value:function(){var e;this._jumpBackPosition=null===(e=this.editor.getSelection())||void 0===e?void 0:e.getStartPosition();var t=this._currentEdit.get();if(t){var n=dd.lift({lineNumber:t.range.startLineNumber,column:t.range.startColumn});this.editor.setPosition(n),this.editor.revealPositionInCenterIfOutsideViewport(n)}}},{key:"clear",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;return s((function(){var n,i;return E(this,(function(r){switch(r.label){case 0:return(n=t._currentEdit.get())&&(null==n?void 0:n.rejected)&&e?[4,(i=t._commandService).executeCommand.apply(i,[n.rejected.id].concat(x(n.rejected.arguments||[]))).then(void 0,pu)]:[3,2];case 1:r.sent(),r.label=2;case 2:return n&&t.freeEdit(n),t._currentEdit.set(void 0,void 0),[2]}}))}))()}},{key:"freeEdit",value:function(e){var t=this.editor.getModel();if(t){var n=this.languageFeaturesService.inlineEditProvider.all(t);0!==n.length&&n[0].freeInlineEdit(e)}}}],[{key:"get",value:function(e){return e.getContribution(Gye.ID)}}]),t}(Ru),Gye=Nn,Nn.ID="editor.contrib.inlineEditController",Nn.inlineEditVisibleKey="inlineEditVisible",Nn.inlineEditVisibleContext=new jy(Nn.inlineEditVisibleKey,!1),Nn.cursorAtInlineEditKey="cursorAtInlineEdit",Nn.cursorAtInlineEditContext=new jy(Nn.cursorAtInlineEditKey,!1),Nn);function Xye(e,t){return new Promise((function(n){var i=void 0,r=setTimeout((function(){i&&i.dispose(),n()}),e);t&&(i=t.onCancellationRequested((function(){clearTimeout(r),i&&i.dispose(),n()})))}))}Qye=Gye=Zye([Yye(1,Gm),Yye(2,Ky),Yye(3,wS),Yye(4,ay),Yye(5,qb),Yye(6,a5),Yye(7,Qm)],Qye);var $ye=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.inlineEdit.accept",label:"Accept Inline Edit",alias:"Accept Inline Edit",precondition:Sy.and(p0.writable,Qye.inlineEditVisibleContext),kbOpts:[{weight:101,primary:2,kbExpr:Sy.and(p0.writable,Qye.inlineEditVisibleContext,Qye.cursorAtInlineEditContext)}],menuOpts:[{menuId:d_.InlineEditToolbar,title:"Accept",group:"primary",order:1}]}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e;return E(this,(function(n){switch(n.label){case 0:return[4,null==(e=Qye.get(t))?void 0:e.accept()];case 1:return n.sent(),[2]}}))}))()}}]),t}(M_),Jye=function(e){function t(){u(this,t);var e=Sy.and(p0.writable,Sy.not(Qye.inlineEditVisibleKey));return l(this,t,[{id:"editor.action.inlineEdit.trigger",label:"Trigger Inline Edit",alias:"Trigger Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e;return E(this,(function(n){return null==(e=Qye.get(t))||e.trigger(),[2]}))}))()}}]),t}(M_),e_e=function(e){function t(){u(this,t);var e=Sy.and(p0.writable,Qye.inlineEditVisibleContext,Sy.not(Qye.cursorAtInlineEditKey));return l(this,t,[{id:"editor.action.inlineEdit.jumpTo",label:"Jump to Inline Edit",alias:"Jump to Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e},menuOpts:[{menuId:d_.InlineEditToolbar,title:"Jump To Edit",group:"primary",order:3,when:e}]}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e;return E(this,(function(n){return null==(e=Qye.get(t))||e.jumpToCurrent(),[2]}))}))()}}]),t}(M_),t_e=function(e){function t(){u(this,t);var e=Sy.and(p0.writable,Qye.cursorAtInlineEditContext);return l(this,t,[{id:"editor.action.inlineEdit.jumpBack",label:"Jump Back from Inline Edit",alias:"Jump Back from Inline Edit",precondition:e,kbOpts:{weight:110,primary:2646,kbExpr:e},menuOpts:[{menuId:d_.InlineEditToolbar,title:"Jump Back",group:"primary",order:3,when:e}]}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e;return E(this,(function(n){return null==(e=Qye.get(t))||e.jumpBack(),[2]}))}))()}}]),t}(M_),n_e=function(e){function t(){u(this,t);var e=Sy.and(p0.writable,Qye.inlineEditVisibleContext);return l(this,t,[{id:"editor.action.inlineEdit.reject",label:"Reject Inline Edit",alias:"Reject Inline Edit",precondition:e,kbOpts:{weight:100,primary:9,kbExpr:e},menuOpts:[{menuId:d_.InlineEditToolbar,title:"Reject",group:"secondary",order:2}]}])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e;return E(this,(function(n){switch(n.label){case 0:return[4,null==(e=Qye.get(t))?void 0:e.clear()];case 1:return n.sent(),[2]}}))}))()}}]),t}(M_);O_($ye),O_(n_e),O_(e_e),O_(t_e),O_(Jye),B_(Qye.ID,Qye,3);var i_e=new jy("inlineEditsVisible",!1,Xa("inlineEditsVisible","Whether an inline edit is visible")),r_e=new jy("inlineEditsIsPinned",!1,Xa("isPinned","Whether an inline edit is visible")),o_e=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._editor=e,n._editorObs=t6(n._editor),n._placeholderText=n._editorObs.getOption(88),n._state=KP({owner:n,equalsFn:bP},(function(e){var t=n._placeholderText.read(e);if(t&&n._editorObs.valueIsEmpty.read(e))return{placeholder:t}})),n._shouldViewBeAlive=function(e,t){return hO(e,(function(e,n){return!0===n||t(e)}))}(n,(function(e){var t;return void 0!==(null===(t=n._state.read(e))||void 0===t?void 0:t.placeholder)})),n._view=GP((function(e,t){if(n._shouldViewBeAlive.read(e)){var i=Lm("div.editorPlaceholder");t.add(XP((function(e){var t,r=n._state.read(e),o=void 0!==(null==r?void 0:r.placeholder);i.root.style.display=o?"block":"none",i.root.innerText=null!==(t=null==r?void 0:r.placeholder)&&void 0!==t?t:""}))),t.add(XP((function(e){var t=n._editorObs.layoutInfo.read(e);i.root.style.left="".concat(t.contentLeft,"px"),i.root.style.width=t.contentWidth-t.verticalScrollbarWidth+"px",i.root.style.top="".concat(n._editor.getTopForLineNumber(0),"px")}))),t.add(XP((function(e){i.root.style.fontFamily=n._editorObs.getOption(49).read(e),i.root.style.fontSize=n._editorObs.getOption(52).read(e)+"px",i.root.style.lineHeight=n._editorObs.getOption(67).read(e)+"px"}))),t.add(n._editorObs.createOverlayWidget({allowEditorOverflow:!1,minContentWidthInPx:nO(0),position:nO(null),domNode:i.root}))}})),n._view.recomputeInitiallyAndOnChange(n._store),n}return p(t,e),t}(Ru);o_e.ID="editor.contrib.placeholderText";var a_e=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},s_e=function(e,t){return function(n,i){t(n,i,e)}},l_e=function e(t,n,i){u(this,e),this.range=t,this.newLines=n,this.changes=i},u_e=function(e){function t(e,n,i,r){var o;u(this,t),(o=l(this,t))._editor=e,o._edit=n,o._userPrompt=i,o._instantiationService=r,o._editorObs=t6(o._editor),o._elements=Lm("div.inline-edits-widget",{style:{position:"absolute",overflow:"visible",top:"0px",left:"0px"}},[Lm("div@editorContainer",{style:{position:"absolute",top:"0px",left:"0px",width:"500px",height:"500px"}},[Lm("div.toolbar@toolbar",{style:{position:"absolute",top:"-25px",left:"0px"}}),Lm("div.promptEditor@promptEditor",{style:{position:"absolute",top:"-25px",left:"80px",width:"300px",height:"22px"}}),Lm("div.preview@editor",{style:{position:"absolute",top:"0px",left:"0px"}})]),Dm("svg",{style:{overflow:"visible",pointerEvents:"none"}},[Dm("defs",[Dm("linearGradient",{id:"Gradient2",x1:"0",y1:"0",x2:"1",y2:"0"},[Dm("stop",{offset:"0%",class:"gradient-stop"}),Dm("stop",{offset:"100%",class:"gradient-stop"})])]),Dm("path@path",{d:"",fill:"url(#Gradient2)"})])]),o._previewTextModel=o._register(o._instantiationService.createInstance(eU,"",kk,eU.DEFAULT_CREATION_OPTIONS,null)),o._setText=UP((function(e){var t=o._edit.read(e);t&&o._previewTextModel.setValue(t.newLines.join("\n"))})).recomputeInitiallyAndOnChange(o._store),o._promptTextModel=o._register(o._instantiationService.createInstance(eU,"",kk,eU.DEFAULT_CREATION_OPTIONS,null)),o._promptEditor=o._register(o._instantiationService.createInstance(cae,o._elements.promptEditor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,placeholder:"Describe the change you want...",fontFamily:w1},{contributions:L_.getSomeEditorContributions([Oge.ID,o_e.ID,wle.ID]),isSimpleWidget:!0},o._editor)),o._previewEditor=o._register(o._instantiationService.createInstance(cae,o._elements.editor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0},{contributions:[]},o._editor)),o._previewEditorObs=t6(o._previewEditor),o._decorations=UP(o,(function(e){var t;o._setText.read(e);var n=null===(t=o._edit.read(e))||void 0===t?void 0:t.changes;if(!n)return[];var i=[],r=[];if(1===n.length&&n[0].innerChanges[0].modifiedRange.equalsRange(o._previewTextModel.getFullModelRange()))return[];var a=!0,s=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;if(d.original.isEmpty||i.push({range:d.original.toInclusiveRange(),options:Y3}),d.modified.isEmpty||r.push({range:d.modified.toInclusiveRange(),options:Z3}),d.modified.isEmpty||d.original.isEmpty)d.original.isEmpty||i.push({range:d.original.toInclusiveRange(),options:n5}),d.modified.isEmpty||r.push({range:d.modified.toInclusiveRange(),options:J3});else{var h=!0,f=!1,g=void 0;try{for(var v,p=(d.innerChanges||[])[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var m=v.value;d.original.contains(m.originalRange.startLineNumber)&&i.push({range:m.originalRange,options:m.originalRange.isEmpty()?i5:t5}),d.modified.contains(m.modifiedRange.startLineNumber)&&r.push({range:m.modifiedRange,options:m.modifiedRange.isEmpty()?e5:$3})}}catch(e){f=!0,g=e}finally{try{h||null==p.return||p.return()}finally{if(f)throw g}}}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return r})),o._layout1=UP(o,(function(e){var t=o._editor.getModel(),n=o._edit.read(e);if(!n)return null;for(var i=n.range,r=0,a=i.startLineNumber;a<i.endLineNumberExclusive;a++){var s=t.getLineMaxColumn(a),l=o._editor.getOffsetForColumn(a,s);r=Math.max(r,l)}return{left:o._editor.getLayoutInfo().contentLeft+r}})),o._layout=UP(o,(function(e){var t=o._edit.read(e);if(!t)return null;var n=t.range,i=o._editorObs.scrollLeft.read(e),r=o._layout1.read(e).left+20-i,a=o._editor.getTopForLineNumber(n.startLineNumber)-o._editorObs.scrollTop.read(e),s=o._editor.getTopForLineNumber(n.endLineNumberExclusive)-o._editorObs.scrollTop.read(e),l=new c_e(r,a),u=new c_e(r,s),c=s-a,d=o._editor.getOption(67)*t.newLines.length,h=c-d;return{topCode:l,bottomCode:u,codeHeight:c,topEdit:new c_e(r+50,a+h/2),bottomEdit:new c_e(r+50,s-h/2),editHeight:d}}));var a=UP(o,(function(e){return void 0!==o._edit.read(e)||void 0!==o._userPrompt.read(e)}));return o._register(w3(o._elements.root,{display:UP(o,(function(e){return a.read(e)?"block":"none"}))})),o._register(p3(o._editor.getDomNode(),o._elements.root)),o._register(t6(e).createOverlayWidget({domNode:o._elements.root,position:nO(null),allowEditorOverflow:!1,minContentWidthInPx:UP((function(e){var t,n=null===(t=o._layout1.read(e))||void 0===t?void 0:t.left;return void 0===n?0:n+o._previewEditorObs.contentWidth.read(e)}))})),o._previewEditor.setModel(o._previewTextModel),o._register(o._previewEditorObs.setDecorations(o._decorations)),o._register(XP((function(e){var t=o._layout.read(e);if(t){var n=t.topCode,i=t.bottomCode,r=t.topEdit,a=t.bottomEdit,s=t.editHeight,l=(new d_e).moveTo(n).lineTo(n.deltaX(10)).curveTo(n.deltaX(50),r.deltaX(-40),r.deltaX(-0)).lineTo(r).lineTo(a).lineTo(a.deltaX(-0)).curveTo(a.deltaX(-40),i.deltaX(50),i.deltaX(10)).lineTo(i).build();o._elements.path.setAttribute("d",l),o._elements.editorContainer.style.top="".concat(r.y,"px"),o._elements.editorContainer.style.left="".concat(r.x,"px"),o._elements.editorContainer.style.height="".concat(s,"px");var u=o._previewEditorObs.contentWidth.read(e);o._previewEditor.layout({height:s,width:u})}}))),o._promptEditor.setModel(o._promptTextModel),o._promptEditor.layout(),o._register(function(e,t){var n=new Tu;return n.add(XP((function(n){var i=e.read(n);t.set(i,void 0)}))),n.add(XP((function(n){var i=t.read(n);e.set(i,void 0)}))),n}(function(e,t,n){return jP(void 0,(function(n){return t(e.read(n))}),(function(t,i){return e.set(n(t),i)}))}(o._userPrompt,(function(e){return null!=e?e:""}),(function(e){return e})),t6(o._promptEditor).value)),o._register(XP((function(e){var t=t6(o._promptEditor).isFocused.read(e);o._elements.root.classList.toggle("focused",t)}))),o}return p(t,e),t}(Ru);u_e=a_e([s_e(3,Gm)],u_e);var c_e=function(){function e(t,n){u(this,e),this.x=t,this.y=n}return h(e,[{key:"deltaX",value:function(t){return new e(this.x+t,this.y)}}]),e}(),d_e=function(){function e(){u(this,e),this._data=""}return h(e,[{key:"moveTo",value:function(e){return this._data+="M ".concat(e.x," ").concat(e.y," "),this}},{key:"lineTo",value:function(e){return this._data+="L ".concat(e.x," ").concat(e.y," "),this}},{key:"curveTo",value:function(e,t,n){return this._data+="C ".concat(e.x," ").concat(e.y," ").concat(t.x," ").concat(t.y," ").concat(n.x," ").concat(n.y," "),this}},{key:"build",value:function(){return this._data}}]),e}();var h_e,f_e=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},g_e=function(e,t){return function(n,i){t(n,i,e)}},v_e=(In=function(e){function t(e,n,i,r,o,a,c){var d,h;return u(this,t),d=l(this,t),h=d,d.textModel=e,d._textModelVersionId=n,d._selection=i,d._debounceValue=r,d.languageFeaturesService=o,d._diffProviderFactoryService=a,d._modelService=c,d._forceUpdateExplicitlySignal=lO(d),d._selectedInlineCompletionId=BP(d,void 0),d._isActive=BP(d,!1),d._originalModel=ZP((function(){return d._modelService.createModel("",null,h_e._createUniqueUri())})).keepObserved(d._store),d._modifiedModel=ZP((function(){return d._modelService.createModel("",null,h_e._createUniqueUri())})).keepObserved(d._store),d._pinnedRange=new y_e(d.textModel,d._textModelVersionId),d.isPinned=d._pinnedRange.range.map((function(e){return!!e})),d.userPrompt=BP(d,void 0),d.inlineEdit=UP(d,(function(e){var t,n;return null===(n=d._inlineEdit.read(e))||void 0===n||null===(t=n.promiseResult.read(e))||void 0===t?void 0:t.data})),d._inlineEdit=UP(d,(function(e){var t=function(e){var t,n,i=null!==(n=null===(t=e[0].match(/^\s*/))||void 0===t?void 0:t[0])&&void 0!==n?n:"";return e.map((function(e){return e.replace(new RegExp("^"+i),"")}))},n=d.selectedInlineEdit.read(e);if(n){var i=n.inlineCompletion.range;if(""!==n.inlineCompletion.insertText.trim()){var r=n.inlineCompletion.insertText.split(/\r\n|\r|\n/);r=t(r);var o=d.textModel.getValueInRange(i).split(/\r\n|\r|\n/);o=t(o),d._originalModel.get().setValue(o.join("\n")),d._modifiedModel.get().setValue(r.join("\n"));var a=d._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"}),l=d;return gO.fromFn(s((function(){var e;return E(this,(function(n){switch(n.label){case 0:return[4,a.computeDiff(l._originalModel.get(),l._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},Uu.None)];case 1:return(e=n.sent()).identical?[2,void 0]:[2,new l_e(Gw.fromRangeInclusive(i),t(r),e.changes)]}}))})))}}})),d._fetchStore=d._register(new Tu),d._inlineEditsFetchResult=VP(d,void 0),d._inlineEdits=KP({owner:d,equalsFn:bP},(function(e){var t,n;return null!==(n=null===(t=d._inlineEditsFetchResult.read(e))||void 0===t?void 0:t.completions.map((function(e){return new m_e(e)})))&&void 0!==n?n:[]})),d._fetchInlineEditsPromise=qP({owner:d,createEmptyChangeSummary:function(){return{inlineCompletionTriggerKind:_d.Automatic}},handleChange:function(e,t){return e.didChange(d._forceUpdateExplicitlySignal)&&(t.inlineCompletionTriggerKind=_d.Explicit),!0}},function(){var e=s((function(e,t){var n,i,r,o,a;return E(this,(function(s){switch(s.label){case 0:return h._fetchStore.clear(),h._forceUpdateExplicitlySignal.read(e),h._textModelVersionId.read(e),i=null!==(n=h._pinnedRange.range.read(e))&&void 0!==n?n:function(e,t){return t(e)}(h._selection.read(e),(function(e){return e.isEmpty()?void 0:e})),i?(r={triggerKind:t.inlineCompletionTriggerKind,selectedSuggestionInfo:void 0,userPrompt:h.userPrompt.read(e)},[4,mg(200,o=oc(h._fetchStore))]):(h._inlineEditsFetchResult.set(void 0,void 0),h.userPrompt.set(void 0,void 0),[2,void 0]);case 1:return s.sent(),[4,She(h.languageFeaturesService.inlineCompletionsProvider,i,h.textModel,r,o)];case 2:return a=s.sent(),o.isCancellationRequested?[2]:(h._inlineEditsFetchResult.set(a,void 0),[2])}}))}));return function(t,n){return e.apply(this,arguments)}}()),d._filteredInlineEditItems=KP({owner:d,equalsFn:yP()},(function(e){return d._inlineEdits.read(e)})),d.selectedInlineCompletionIndex=UP(d,(function(e){var t=d._selectedInlineCompletionId.read(e),n=d._filteredInlineEditItems.read(e),i=void 0===d._selectedInlineCompletionId?-1:n.findIndex((function(e){return e.semanticId===t}));return-1===i?(d._selectedInlineCompletionId.set(void 0,void 0),0):i})),d.selectedInlineEdit=UP(d,(function(e){return d._filteredInlineEditItems.read(e)[d.selectedInlineCompletionIndex.read(e)]})),d._register(cO(d._fetchInlineEditsPromise)),d}return p(t,e),h(t,[{key:"triggerExplicitly",value:function(e){var t=this;return s((function(){return E(this,(function(n){switch(n.label){case 0:return FP(e,(function(e){t._isActive.set(!0,e),t._forceUpdateExplicitlySignal.trigger(e)})),[4,t._fetchInlineEditsPromise.get()];case 1:return n.sent(),[2]}}))}))()}},{key:"stop",value:function(e){var t=this;FP(e,(function(e){t.userPrompt.set(void 0,e),t._isActive.set(!1,e),t._inlineEditsFetchResult.set(void 0,e),t._pinnedRange.setRange(void 0,e)}))}},{key:"_deltaSelectedInlineCompletionIndex",value:function(e){var t=this;return s((function(){var n,i;return E(this,(function(r){switch(r.label){case 0:return[4,t.triggerExplicitly()];case 1:return r.sent(),(n=t._filteredInlineEditItems.get()||[]).length>0?(i=(t.selectedInlineCompletionIndex.get()+e+n.length)%n.length,t._selectedInlineCompletionId.set(n[i].semanticId,void 0)):t._selectedInlineCompletionId.set(void 0,void 0),[2]}}))}))()}},{key:"next",value:function(){var e=this;return s((function(){return E(this,(function(t){switch(t.label){case 0:return[4,e._deltaSelectedInlineCompletionIndex(1)];case 1:return t.sent(),[2]}}))}))()}},{key:"previous",value:function(){var e=this;return s((function(){return E(this,(function(t){switch(t.label){case 0:return[4,e._deltaSelectedInlineCompletionIndex(-1)];case 1:return t.sent(),[2]}}))}))()}},{key:"accept",value:function(e){var t=this;return s((function(){var n;return E(this,(function(i){if(e.getModel()!==t.textModel)throw new Lu;return(n=t.selectedInlineEdit.get())?(e.pushUndoStop(),e.executeEdits("inlineSuggestion.accept",[n.inlineCompletion.toSingleTextEdit().toSingleEditOperation()]),t.stop(),[2]):[2]}))}))()}}],[{key:"_createUniqueUri",value:function(){return ed.from({scheme:"inline-edits",path:(new Date).toString()+String(h_e._modelId++)})}}]),t}(Ru),h_e=In,In._modelId=0,In);v_e=h_e=f_e([g_e(4,wS),g_e(5,a5),g_e(6,Qm)],v_e);var p_e,m_e=function e(t){u(this,e),this.inlineCompletion=t,this.semanticId=this.inlineCompletion.hash()},y_e=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._textModel=e,i._versionId=n,i._decorations=BP(i,[]),i.range=UP(i,(function(e){i._versionId.read(e);var t,n=i._decorations.read(e)[0];return n&&null!==(t=i._textModel.getDecorationRange(n))&&void 0!==t?t:null})),i._register(Mu((function(){i._textModel.deltaDecorations(i._decorations.get(),[])}))),i}return p(t,e),h(t,[{key:"setRange",value:function(e,t){this._decorations.set(this._textModel.deltaDecorations(this._decorations.get(),e?[{range:e,options:{description:"trackedRange"}}]:[]),t)}}]),t}(Ru),__e=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},b_e=function(e,t){return function(n,i){t(n,i,e)}},k_e=(En=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t)).editor=e,s._instantiationService=n,s._contextKeyService=i,s._debounceService=r,s._languageFeaturesService=o,s._configurationService=a,s._enabled=m6("editor.inlineEdits.enabled",!1,s._configurationService),s._editorObs=t6(s.editor),s._selection=UP(s,(function(e){var t;return null!==(t=s._editorObs.cursorSelection.read(e))&&void 0!==t?t:new fd(1,1,1,1)})),s._debounceValue=s._debounceService.for(s._languageFeaturesService.inlineCompletionsProvider,"InlineEditsDebounce",{min:50,max:50}),s.model=ZP(s,(function(e){if(s._enabled.read(e)&&!s._editorObs.isReadonly.read(e)){var t=s._editorObs.model.read(e);if(t)return s._instantiationService.createInstance(h5(v_e,e),t,s._editorObs.versionId,s._selection,s._debounceValue)}})),s._hadInlineEdit=hO(s,(function(e,t){var n;return t||void 0!==(null===(n=s.model.read(e))||void 0===n?void 0:n.inlineEdit.read(e))})),s._widget=ZP(s,(function(e){if(s._hadInlineEdit.read(e))return s._instantiationService.createInstance(h5(u_e,e),s.editor,s.model.map((function(e,t){return null==e?void 0:e.inlineEdit.read(t)})),function(e){return jP(void 0,(function(t){return e(t).read(t)}),(function(t,n){e(void 0).set(t,n)}))}((function(e){var t,n;return null!==(n=null===(t=s.model.read(e))||void 0===t?void 0:t.userPrompt)&&void 0!==n?n:BP("empty","")})))})),s._register(y6(i_e,s._contextKeyService,(function(e){var t;return!!(null===(t=s.model.read(e))||void 0===t?void 0:t.inlineEdit.read(e))}))),s._register(y6(r_e,s._contextKeyService,(function(e){var t;return!!(null===(t=s.model.read(e))||void 0===t?void 0:t.isPinned.read(e))}))),s.model.recomputeInitiallyAndOnChange(s._store),s._widget.recomputeInitiallyAndOnChange(s._store),s}return p(t,e),h(t,null,[{key:"get",value:function(e){return e.getContribution(p_e.ID)}}]),t}(Ru),p_e=En,En.ID="editor.contrib.inlineEditsController",En);function w_e(e){return{label:e.value,alias:e.original}}k_e=p_e=__e([b_e(1,Gm),b_e(2,Ky),b_e(3,Ix),b_e(4,wS),b_e(5,qb)],k_e);var C_e=function(e){function t(){return u(this,t),l(this,t,[b(_({id:t.ID},w_e(Ja("action.inlineEdits.showNext","Show Next Inline Edit"))),{precondition:Sy.and(p0.writable,i_e),kbOpts:{weight:100,primary:606}})])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e,n;return E(this,(function(i){return null==(n=k_e.get(t))||null===(e=n.model.get())||void 0===e||e.next(),[2]}))}))()}}]),t}(M_);C_e.ID="editor.action.inlineEdits.showNext";var S_e=function(e){function t(){return u(this,t),l(this,t,[b(_({id:t.ID},w_e(Ja("action.inlineEdits.showPrevious","Show Previous Inline Edit"))),{precondition:Sy.and(p0.writable,i_e),kbOpts:{weight:100,primary:604}})])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e,n;return E(this,(function(i){return null==(n=k_e.get(t))||null===(e=n.model.get())||void 0===e||e.previous(),[2]}))}))()}}]),t}(M_);S_e.ID="editor.action.inlineEdits.showPrevious";var x_e=function(e){function t(){return u(this,t),l(this,t,[b(_({id:"editor.action.inlineEdits.trigger"},w_e(Ja("action.inlineEdits.trigger","Trigger Inline Edit"))),{precondition:p0.writable})])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e;return E(this,(function(n){switch(n.label){case 0:return e=k_e.get(t),[4,PP(function(){var t=s((function(t){var n;return E(this,(function(i){switch(i.label){case 0:return[4,null==e||null===(n=e.model.get())||void 0===n?void 0:n.triggerExplicitly(t)];case 1:return i.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}())];case 1:return n.sent(),[2]}}))}))()}}]),t}(M_),L_e=function(e){function t(){return u(this,t),l(this,t,[b(_({id:"editor.action.inlineEdits.accept"},w_e(Ja("action.inlineEdits.accept","Accept Inline Edit"))),{precondition:i_e,menuOpts:{menuId:d_.InlineEditsActions,title:Xa("inlineEditsActions","Accept Inline Edit"),group:"primary",order:1,icon:bd.check},kbOpts:{primary:2058,weight:2e4,kbExpr:i_e}})])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e,n;return E(this,(function(i){return t instanceof cae&&(t=t.getParentEditor()),(e=k_e.get(t))&&(null===(n=e.model.get())||void 0===n||n.accept(e.editor),e.editor.focus()),[2]}))}))()}}]),t}(M_),D_e=function(e){function t(){return u(this,t),l(this,t,[b(_({id:t.ID},w_e(Ja("action.inlineEdits.hide","Hide Inline Edit"))),{precondition:i_e,kbOpts:{weight:100,primary:9}})])}return p(t,e),h(t,[{key:"run",value:function(e,t){return s((function(){var e;return E(this,(function(n){return e=k_e.get(t),TP((function(t){var n;null==e||null===(n=e.model.get())||void 0===n||n.stop(t)})),[2]}))}))()}}]),t}(M_);D_e.ID="editor.action.inlineEdits.hide",B_(k_e.ID,k_e,3),O_(x_e),O_(C_e),O_(S_e),O_(L_e),O_(D_e);var N_e,I_e={Visible:new jy("parameterHintsVisible",!1),MultipleSignatures:new jy("parameterHintsMultipleSignatures",!1)};function E_e(e,t,n,i,r){return M_e.apply(this,arguments)}function M_e(){return M_e=s((function(e,t,n,i,r){var o,a,s,l,u,c,d,h,f;return E(this,(function(g){switch(g.label){case 0:o=e.ordered(t),a=!0,s=!1,l=void 0,g.label=1;case 1:g.trys.push([1,8,9,10]),u=o[Symbol.iterator](),g.label=2;case 2:if(a=(c=u.next()).done)return[3,7];d=c.value,g.label=3;case 3:return g.trys.push([3,5,,6]),[4,d.provideSignatureHelp(t,n,r,i)];case 4:return(h=g.sent())?[2,h]:[3,6];case 5:return pu(g.sent()),[3,6];case 6:return a=!0,[3,2];case 7:return[3,10];case 8:return f=g.sent(),s=!0,l=f,[3,10];case 9:try{a||null==u.return||u.return()}finally{if(s)throw l}return[7];case 10:return[2,void 0]}}))})),M_e.apply(this,arguments)}sy.registerCommand("_executeSignatureHelpProvider",function(){var e=s((function(e){var t,n,i,r,o,a,s,l,u,c,d=arguments;return E(this,(function(h){switch(h.label){case 0:for(t=d.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=d[i];return r=C(n,3),o=r[0],a=r[1],s=r[2],Oa(ed.isUri(o)),Oa(dd.isIPosition(a)),Oa("string"==typeof s||!s),l=e.get(wS),[4,e.get(Xm).createModelReference(o)];case 1:u=h.sent(),h.label=2;case 2:return h.trys.push([2,,4,5]),[4,E_e(l.signatureHelpProvider,u.object.textEditorModel,dd.lift(a),{triggerKind:Dd.Invoke,isRetrigger:!1,triggerCharacter:s},Uu.None)];case 3:return(c=h.sent())?(setTimeout((function(){return c.dispose()}),0),[2,c.value]):[2,void 0];case 4:return u.dispose(),[7];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()),function(e){e.Default={type:0};e.Pending=function e(t,n){u(this,e),this.request=t,this.previouslyActiveHints=n,this.type=2};e.Active=function e(t){u(this,e),this.hints=t,this.type=1}}(N_e||(N_e={}));var T_e=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.DEFAULT_DELAY;return u(this,t),(i=l(this,t))._onChangedHints=i._register(new Zu),i.onChangedHints=i._onChangedHints.event,i.triggerOnType=!1,i._state=N_e.Default,i._pendingTriggers=[],i._lastSignatureHelpResult=i._register(new Pu),i.triggerChars=new Xk,i.retriggerChars=new Xk,i.triggerId=0,i.editor=e,i.providers=n,i.throttledDelayer=new vg(r),i._register(i.editor.onDidBlurEditorWidget((function(){return i.cancel()}))),i._register(i.editor.onDidChangeConfiguration((function(){return i.onEditorConfigurationChange()}))),i._register(i.editor.onDidChangeModel((function(e){return i.onModelChanged()}))),i._register(i.editor.onDidChangeModelLanguage((function(e){return i.onModelChanged()}))),i._register(i.editor.onDidChangeCursorSelection((function(e){return i.onCursorChange(e)}))),i._register(i.editor.onDidChangeModelContent((function(e){return i.onModelContentChange()}))),i._register(i.providers.onDidChange(i.onModelChanged,i)),i._register(i.editor.onDidType((function(e){return i.onDidType(e)}))),i.onEditorConfigurationChange(),i.onModelChanged(),i}return p(t,e),h(t,[{key:"state",get:function(){return this._state},set:function(e){2===this._state.type&&this._state.request.cancel(),this._state=e}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state=N_e.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}},{key:"trigger",value:function(e,t){var n=this,i=this.editor.getModel();if(i&&this.providers.has(i)){var r=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger((function(){return n.doTrigger(r)}),t).catch(vu)}}},{key:"next",value:function(){if(1===this.state.type){var e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e==e-1,i=this.editor.getOption(86).cycle;!(e<2||n)||i?this.updateActiveSignature(n&&i?0:t+1):this.cancel()}}},{key:"previous",value:function(){if(1===this.state.type){var e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=0===t,i=this.editor.getOption(86).cycle;!(e<2||n)||i?this.updateActiveSignature(n&&i?e-1:t-1):this.cancel()}}},{key:"updateActiveSignature",value:function(e){1===this.state.type&&(this.state=new N_e.Active(b(_({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}},{key:"doTrigger",value:function(e){var t=this;return s((function(){var n,i,r,o,a,s,l,u;return E(this,(function(c){switch(c.label){case 0:if(n=1===t.state.type||2===t.state.type,i=t.getLastActiveHints(),t.cancel(!0),0===t._pendingTriggers.length)return[2,!1];if(r=t._pendingTriggers.reduce(R_e),t._pendingTriggers=[],o={triggerKind:r.triggerKind,triggerCharacter:r.triggerCharacter,isRetrigger:n,activeSignatureHelp:i},!t.editor.hasModel())return[2,!1];a=t.editor.getModel(),s=t.editor.getPosition(),t.state=new N_e.Pending(hg((function(e){return E_e(t.providers,a,s,o,e)})),i),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,t.state.request];case 2:return l=c.sent(),e!==t.triggerId?(null==l||l.dispose(),[2,!1]):l&&l.value.signatures&&0!==l.value.signatures.length?(t.state=new N_e.Active(l.value),t._lastSignatureHelpResult.value=l,t._onChangedHints.fire(t.state.hints),[2,!0]):(null==l||l.dispose(),t._lastSignatureHelpResult.clear(),t.cancel(),[2,!1]);case 3:return u=c.sent(),e===t.triggerId&&(t.state=N_e.Default),vu(u),[2,!1];case 4:return[2]}}))}))()}},{key:"getLastActiveHints",value:function(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}},{key:"isTriggered",get:function(){return 1===this.state.type||2===this.state.type||this.throttledDelayer.isTriggered()}},{key:"onModelChanged",value:function(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();var e=this.editor.getModel();if(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this.providers.ordered(e)[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=!0,l=!1,u=void 0;try{for(var c,d=(a.signatureHelpTriggerCharacters||[])[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;if(h.length){var f=h.charCodeAt(0);this.triggerChars.add(f),this.retriggerChars.add(f)}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}var g=!0,v=!1,p=void 0;try{for(var m,y=(a.signatureHelpRetriggerCharacters||[])[Symbol.iterator]();!(g=(m=y.next()).done);g=!0){var _=m.value;_.length&&this.retriggerChars.add(_.charCodeAt(0))}}catch(e){v=!0,p=e}finally{try{g||null==y.return||y.return()}finally{if(v)throw p}}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}},{key:"onDidType",value:function(e){if(this.triggerOnType){var t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:Dd.TriggerCharacter,triggerCharacter:e.charAt(t)})}}},{key:"onCursorChange",value:function(e){"mouse"===e.source?this.cancel():this.isTriggered&&this.trigger({triggerKind:Dd.ContentChange})}},{key:"onModelContentChange",value:function(){this.isTriggered&&this.trigger({triggerKind:Dd.ContentChange})}},{key:"onEditorConfigurationChange",value:function(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()}},{key:"dispose",value:function(){this.cancel(!0),g(v(t.prototype),"dispose",this).call(this)}}]),t}(Ru);function R_e(e,t){switch(t.triggerKind){case Dd.Invoke:return t;case Dd.ContentChange:return e;case Dd.TriggerCharacter:default:return t}}T_e.DEFAULT_DELAY=120;var A_e,P_e=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},O_e=function(e,t){return function(n,i){t(n,i,e)}},F_e=gm,W_e=IZ("parameter-hints-next",bd.chevronDown,Xa("parameterHintsNextIcon","Icon for show next parameter hint.")),B_e=IZ("parameter-hints-previous",bd.chevronUp,Xa("parameterHintsPreviousIcon","Icon for show previous parameter hint.")),H_e=(Mn=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t)).editor=e,s.model=n,s.telemetryService=a,s.renderDisposeables=s._register(new Tu),s.visible=!1,s.announcedLabel=null,s.allowEditorOverflow=!0,s.markdownRenderer=s._register(new lR({editor:e},o,r)),s.keyVisible=I_e.Visible.bindTo(i),s.keyMultipleSignatures=I_e.MultipleSignatures.bindTo(i),s}return p(t,e),h(t,[{key:"createParameterHintDOMNodes",value:function(){var e=this,t=F_e(".editor-widget.parameter-hints-widget"),n=lm(t,F_e(".phwrapper"));n.tabIndex=-1;var i=lm(n,F_e(".controls")),r=lm(i,F_e(".button"+ny.asCSSSelector(B_e))),o=lm(i,F_e(".overloads")),a=lm(i,F_e(".button"+ny.asCSSSelector(W_e)));this._register(cp(r,"click",(function(t){om(t),e.previous()}))),this._register(cp(a,"click",(function(t){om(t),e.next()})));var s=F_e(".body"),l=new yE(s,{alwaysConsumeMouseWheel:!0});this._register(l),n.appendChild(l.getDomNode());var u=lm(s,F_e(".signature")),c=lm(s,F_e(".docs"));t.style.userSelect="text",this.domNodes={element:t,signature:u,overloads:o,docs:c,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection((function(t){e.visible&&e.editor.layoutContentWidget(e)})));var d=function(){if(e.domNodes){var t=e.editor.getOption(50),n=e.domNodes.element;n.style.fontSize="".concat(t.fontSize,"px"),n.style.lineHeight="".concat(t.lineHeight/t.fontSize),n.style.setProperty("--vscode-parameterHintsWidget-editorFontFamily",t.fontFamily),n.style.setProperty("--vscode-parameterHintsWidget-editorFontFamilyDefault",uu.fontFamily)}};d(),this._register(Au.chain(this.editor.onDidChangeConfiguration.bind(this.editor),(function(e){return e.filter((function(e){return e.hasChanged(50)}))}))(d)),this._register(this.editor.onDidLayoutChange((function(t){return e.updateMaxHeight()}))),this.updateMaxHeight()}},{key:"show",value:function(){var e=this;this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout((function(){var t;null===(t=e.domNodes)||void 0===t||t.element.classList.add("visible")}),100),this.editor.layoutContentWidget(this))}},{key:"hide",value:function(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,null===(e=this.domNodes)||void 0===e||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}},{key:"getPosition",value:function(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}},{key:"render",value:function(e){if(this.renderDisposeables.clear(),this.domNodes){var t=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",t),this.keyMultipleSignatures.set(t),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";var n=e.signatures[e.activeSignature];if(n){var i,r=lm(this.domNodes.signature,F_e(".code")),o=n.parameters.length>0,a=null!==(i=n.activeParameter)&&void 0!==i?i:e.activeParameter;if(o)this.renderParameters(r,n,a);else lm(r,F_e("span")).textContent=n.label;var s=n.parameters[a];if(null==s?void 0:s.documentation){var l=F_e("span.documentation");if("string"==typeof s.documentation)l.textContent=s.documentation;else{var u=this.renderMarkdownDocs(s.documentation);l.appendChild(u.element)}lm(this.domNodes.docs,F_e("p",{},l))}if(void 0===n.documentation);else if("string"==typeof n.documentation)lm(this.domNodes.docs,F_e("p",{},n.documentation));else{var c=this.renderMarkdownDocs(n.documentation);lm(this.domNodes.docs,c.element)}var d=this.hasDocs(n,s);if(this.domNodes.signature.classList.toggle("has-docs",d),this.domNodes.docs.classList.toggle("empty",!d),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,s){var h="",f=n.parameters[a];h=Array.isArray(f.label)?n.label.substring(f.label[0],f.label[1]):f.label,f.documentation&&(h+="string"==typeof f.documentation?", ".concat(f.documentation):", ".concat(f.documentation.value)),n.documentation&&(h+="string"==typeof n.documentation?", ".concat(n.documentation):", ".concat(n.documentation.value)),this.announcedLabel!==h&&(_R(Xa("hint","{0}, hint",h)),this.announcedLabel=h)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}}}},{key:"renderMarkdownDocs",value:function(e){var t=this,n=new Hu,i=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:function(){var e;null===(e=t.domNodes)||void 0===e||e.scrollbar.scanDomNode()}}));i.element.classList.add("markdown-docs");var r=n.elapsed();return r>300&&this.telemetryService.publicLog2("parameterHints.parseMarkdown",{renderDuration:r}),i}},{key:"hasDocs",value:function(e,t){return!!(t&&"string"==typeof t.documentation&&Fa(t.documentation).length>0)||(!!(t&&"object"===L(t.documentation)&&Fa(t.documentation).value.length>0)||(!!(e.documentation&&"string"==typeof e.documentation&&Fa(e.documentation).length>0)||!!(e.documentation&&"object"===L(e.documentation)&&Fa(e.documentation.value).length>0)))}},{key:"renderParameters",value:function(e,t,n){var i=C(this.getParameterLabelOffsets(t,n),2),r=i[0],o=i[1],a=document.createElement("span");a.textContent=t.label.substring(0,r);var s=document.createElement("span");s.textContent=t.label.substring(r,o),s.className="parameter active";var l=document.createElement("span");l.textContent=t.label.substring(o),lm(e,a,s,l)}},{key:"getParameterLabelOffsets",value:function(e,t){var n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){var i=new RegExp("(\\W|^)".concat(qh(n.label),"(?=\\W|$)"),"g");i.test(e.label);var r=i.lastIndex-n.label.length;return r>=0?[r,i.lastIndex]:[0,0]}return[0,0]}return[0,0]}},{key:"next",value:function(){this.editor.focus(),this.model.next()}},{key:"previous",value:function(){this.editor.focus(),this.model.previous()}},{key:"getDomNode",value:function(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}},{key:"getId",value:function(){return A_e.ID}},{key:"updateMaxHeight",value:function(){if(this.domNodes){var e=Math.max(this.editor.getLayoutInfo().height/4,250),t="".concat(e,"px");this.domNodes.element.style.maxHeight=t;var n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)}}}]),t}(Ru),A_e=Mn,Mn.ID="editor.widget.parameterHintsWidget",Mn);H_e=A_e=P_e([O_e(2,Ky),O_e(3,xE),O_e(4,Jb),O_e(5,b_)],H_e),TL("editorHoverWidget.highlightForeground",pI,Xa("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var V_e,z_e=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},U_e=function(e,t){return function(n,i){t(n,i,e)}},j_e=(Tn=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t)).editor=e,r.model=r._register(new T_e(e,i.signatureHelpProvider)),r._register(r.model.onChangedHints((function(e){var t;e?(r.widget.value.show(),r.widget.value.render(e)):null===(t=r.widget.rawValue)||void 0===t||t.hide()}))),r.widget=new Vh((function(){return r._register(n.createInstance(H_e,r.editor,r.model))})),r}return p(t,e),h(t,[{key:"cancel",value:function(){this.model.cancel()}},{key:"previous",value:function(){var e;null===(e=this.widget.rawValue)||void 0===e||e.previous()}},{key:"next",value:function(){var e;null===(e=this.widget.rawValue)||void 0===e||e.next()}},{key:"trigger",value:function(e){this.model.trigger(e,0)}}],[{key:"get",value:function(e){return e.getContribution(V_e.ID)}}]),t}(Ru),V_e=Tn,Tn.ID="editor.controller.parameterHints",Tn);j_e=V_e=z_e([U_e(1,Gm),U_e(2,wS)],j_e);var K_e=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.triggerParameterHints",label:Xa("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:p0.hasSignatureHelpProvider,kbOpts:{kbExpr:p0.editorTextFocus,primary:3082,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=j_e.get(t);null==n||n.trigger({triggerKind:Dd.Invoke})}}]),t}(M_);B_(j_e.ID,j_e,2),O_(K_e);var q_e=E_.bindToContribution(j_e.get);P_(new q_e({id:"closeParameterHints",precondition:I_e.Visible,handler:function(e){return e.cancel()},kbOpts:{weight:175,kbExpr:p0.focus,primary:9,secondary:[1033]}})),P_(new q_e({id:"showPrevParameterHint",precondition:Sy.and(I_e.Visible,I_e.MultipleSignatures),handler:function(e){return e.previous()},kbOpts:{weight:175,kbExpr:p0.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),P_(new q_e({id:"showNextParameterHint",precondition:Sy.and(I_e.Visible,I_e.MultipleSignatures),handler:function(e){return e.next()},kbOpts:{weight:175,kbExpr:p0.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var G_e=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Z_e=function(e,t){return function(n,i){t(n,i,e)}},Y_e=function(){function e(t){u(this,e),this.instantiationService=t}return h(e,[{key:"init",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]}}]),e}();var Q_e=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[n])).init(e),i}return p(t,e),t}(Y_e);Q_e=G_e([Z_e(1,Gm)],Q_e),B_(o_e.ID,function(e){return u5()?function(e,t){return function(t){function n(){var e;return u(this,n),(e=l(this,n,arguments))._autorun=void 0,e}return p(n,t),h(n,[{key:"init",value:function(){for(var t=this,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];this._autorun=eO((function(n,r){var o,a=h5(e(),n);r.add((o=t.instantiationService).createInstance.apply(o,[a].concat(x(i))))}))}},{key:"dispose",value:function(){var e;null===(e=this._autorun)||void 0===e||e.dispose()}}]),n}(t)}(e,Q_e):e()}((function(){return o_e})),0),TL("editor.placeholder.foreground",uB,Xa("placeholderForeground","Foreground color of the placeholder text in the editor."));var X_e=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},$_e=function(e,t){return function(n,i){t(n,i,e)}},J_e=new jy("renameInputVisible",!1,Xa("renameInputVisible","Whether the rename input widget is visible"));new jy("renameInputFocused",!1,Xa("renameInputFocused","Whether the rename input widget is focused"));var ebe=function(){function e(t,n,i,r,o,a){var s=this;u(this,e),this._editor=t,this._acceptKeybindings=n,this._themeService=i,this._keybindingService=r,this._logService=a,this.allowEditorOverflow=!0,this._disposables=new Tu,this._visibleContextKey=J_e.bindTo(o),this._isEditingRenameCandidate=!1,this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,this._candidates=new Set,this._beforeFirstInputFieldEditSW=new Hu,this._inputWithButton=new nbe,this._disposables.add(this._inputWithButton),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration((function(e){e.hasChanged(50)&&s._updateFont()}))),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}return h(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._editor.removeContentWidget(this)}},{key:"getId",value:function(){return"__renameInputWidget"}},{key:"getDomNode",value:function(){var e=this;return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputWithButton.domNode),this._renameCandidateListView=this._disposables.add(new tbe(this._domNode,{fontInfo:this._editor.getOption(50),onFocusChange:function(t){e._inputWithButton.input.value=t,e._isEditingRenameCandidate=!1},onSelectionChange:function(){e._isEditingRenameCandidate=!1,e.acceptInput(!1)}})),this._disposables.add(this._inputWithButton.onDidInputChange((function(){var t,n,i,r;void 0!==(null===(t=e._renameCandidateListView)||void 0===t?void 0:t.focusedCandidate)&&(e._isEditingRenameCandidate=!0),null!==(r=e._timeBeforeFirstInputFieldEdit)&&void 0!==r||(e._timeBeforeFirstInputFieldEdit=e._beforeFirstInputFieldEditSW.elapsed()),!1===(null===(n=e._renameCandidateProvidersCts)||void 0===n?void 0:n.token.isCancellationRequested)&&e._renameCandidateProvidersCts.cancel(),null===(i=e._renameCandidateListView)||void 0===i||i.clearFocus()}))),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}},{key:"_updateStyles",value:function(e){if(this._domNode){var t,n,i=e.getColor(BD),r=e.getColor(HD);this._domNode.style.backgroundColor=String(null!==(t=e.getColor(iD))&&void 0!==t?t:""),this._domNode.style.boxShadow=i?" 0 0 8px 2px ".concat(i):"",this._domNode.style.border=r?"1px solid ".concat(r):"",this._domNode.style.color=String(null!==(n=e.getColor(fN))&&void 0!==n?n:"");var o,a,s,l=e.getColor(gN);this._inputWithButton.domNode.style.backgroundColor=String(null!==(o=e.getColor(hN))&&void 0!==o?o:""),this._inputWithButton.input.style.backgroundColor=String(null!==(a=e.getColor(hN))&&void 0!==a?a:""),this._inputWithButton.domNode.style.borderWidth=l?"1px":"0px",this._inputWithButton.domNode.style.borderStyle=l?"solid":"none",this._inputWithButton.domNode.style.borderColor=null!==(s=null==l?void 0:l.toString())&&void 0!==s?s:"none"}}},{key:"_updateFont",value:function(){if(void 0!==this._domNode){Oa(void 0!==this._label,"RenameWidget#_updateFont: _label must not be undefined given _domNode is defined"),this._editor.applyFontInfo(this._inputWithButton.input);var e=this._editor.getOption(50);this._label.style.fontSize="".concat(this._computeLabelFontSize(e.fontSize),"px")}}},{key:"_computeLabelFontSize",value:function(e){return.8*e}},{key:"getPosition",value:function(){if(!this._visible)return null;if(!this._editor.hasModel()||!this._editor.getDomNode())return null;var e=kp(this.getDomNode().ownerDocument.body),t=xp(this._editor.getDomNode()),n=this._getTopForPosition();this._nPxAvailableAbove=n+t.top,this._nPxAvailableBelow=e.height-this._nPxAvailableAbove;var i=this._editor.getOption(67),r=ibe.getLayoutInfo({lineHeight:i}).totalHeight,o=this._nPxAvailableBelow>6*r?[2,1]:[1,2];return{position:this._position,preference:o}}},{key:"beforeRender",value:function(){var e,t,n=C(this._acceptKeybindings,2),i=n[0],r=n[1];return this._label.innerText=Xa({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",null===(e=this._keybindingService.lookupKeybinding(i))||void 0===e?void 0:e.getLabel(),null===(t=this._keybindingService.lookupKeybinding(r))||void 0===t?void 0:t.getLabel()),this._domNode.style.minWidth="200px",null}},{key:"afterRender",value:function(e){if(null!==e){if(this._editor.hasModel()&&this._editor.getDomNode()){Oa(this._renameCandidateListView),Oa(void 0!==this._nPxAvailableAbove),Oa(void 0!==this._nPxAvailableBelow);var t,n=Ep(this._inputWithButton.domNode),i=Ep(this._label);t=2===e?this._nPxAvailableBelow:this._nPxAvailableAbove,this._renameCandidateListView.layout({height:t-i-n,width:Dp(this._inputWithButton.domNode)})}}else this.cancelInput(!0,"afterRender (because position is null)")}},{key:"acceptInput",value:function(e){var t;this._trace("invoking acceptInput"),null===(t=this._currentAcceptInput)||void 0===t||t.call(this,e)}},{key:"cancelInput",value:function(e,t){var n;null===(n=this._currentCancelInput)||void 0===n||n.call(this,e)}},{key:"focusNextRenameSuggestion",value:function(){var e;(null===(e=this._renameCandidateListView)||void 0===e?void 0:e.focusNext())||(this._inputWithButton.input.value=this._currentName)}},{key:"focusPreviousRenameSuggestion",value:function(){var e;(null===(e=this._renameCandidateListView)||void 0===e?void 0:e.focusPrevious())||(this._inputWithButton.input.value=this._currentName)}},{key:"getInput",value:function(e,t,n,i,r){var o=this,a=this._getSelection(e,t),s=a.start,l=a.end;this._renameCts=r;var u=new Tu;this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,void 0===i?this._inputWithButton.button.style.display="none":(this._inputWithButton.button.style.display="flex",this._requestRenameCandidatesOnce=i,this._requestRenameCandidates(t,!1),u.add(cp(this._inputWithButton.button,"click",(function(){return o._requestRenameCandidates(t,!0)}))),u.add(cp(this._inputWithButton.button,rm.KEY_DOWN,(function(e){var n=new rg(e);(n.equals(3)||n.equals(10))&&(n.stopPropagation(),n.preventDefault(),o._requestRenameCandidates(t,!0))})))),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle("preview",n),this._position=new dd(e.startLineNumber,e.startColumn),this._currentName=t,this._inputWithButton.input.value=t,this._inputWithButton.input.setAttribute("selectionStart",s.toString()),this._inputWithButton.input.setAttribute("selectionEnd",l.toString()),this._inputWithButton.input.size=Math.max(1.1*(e.endColumn-e.startColumn),20),this._beforeFirstInputFieldEditSW.reset(),u.add(Mu((function(){o._renameCts=void 0,r.dispose(!0)}))),u.add(Mu((function(){void 0!==o._renameCandidateProvidersCts&&(o._renameCandidateProvidersCts.dispose(!0),o._renameCandidateProvidersCts=void 0)}))),u.add(Mu((function(){return o._candidates.clear()})));var c=new Ng;return c.p.finally((function(){u.dispose(),o._hide()})),this._currentCancelInput=function(e){var t;return o._trace("invoking _currentCancelInput"),o._currentAcceptInput=void 0,o._currentCancelInput=void 0,null===(t=o._renameCandidateListView)||void 0===t||t.clearCandidates(),c.complete(e),!0},this._currentAcceptInput=function(e){o._trace("invoking _currentAcceptInput"),Oa(void 0!==o._renameCandidateListView);var i,r,a=o._renameCandidateListView.nCandidates,s=o._renameCandidateListView.focusedCandidate;void 0!==s?(o._trace("using new name from renameSuggestion"),i=s,r={k:"renameSuggestion"}):(o._trace("using new name from inputField"),i=o._inputWithButton.input.value,r=o._isEditingRenameCandidate?{k:"userEditedRenameSuggestion"}:{k:"inputField"}),i!==t&&0!==i.trim().length?(o._currentAcceptInput=void 0,o._currentCancelInput=void 0,o._renameCandidateListView.clearCandidates(),c.complete({newName:i,wantsPreview:n&&e,stats:{source:r,nRenameSuggestions:a,timeBeforeFirstInputFieldEdit:o._timeBeforeFirstInputFieldEdit,nRenameSuggestionsInvocations:o._nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:o._hadAutomaticRenameSuggestionsInvocation}})):o.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)")},u.add(r.token.onCancellationRequested((function(){return o.cancelInput(!0,"cts.token.onCancellationRequested")}))),u.add(this._editor.onDidBlurEditorWidget((function(){var e;return o.cancelInput(!(null===(e=o._domNode)||void 0===e?void 0:e.ownerDocument.hasFocus()),"editor.onDidBlurEditorWidget")}))),this._show(),c.p}},{key:"_requestRenameCandidates",value:function(e,t){if(void 0!==this._requestRenameCandidatesOnce&&(void 0!==this._renameCandidateProvidersCts&&this._renameCandidateProvidersCts.dispose(!0),Oa(this._renameCts),"stop"!==this._inputWithButton.buttonState)){this._renameCandidateProvidersCts=new rc;var n=t?Pd.Invoke:Pd.Automatic,i=this._requestRenameCandidatesOnce(n,this._renameCandidateProvidersCts.token);if(0===i.length)return void this._inputWithButton.setSparkleButton();t||(this._hadAutomaticRenameSuggestionsInvocation=!0),this._nRenameSuggestionsInvocations+=1,this._inputWithButton.setStopButton(),this._updateRenameCandidates(i,e,this._renameCts.token)}}},{key:"_getSelection",value:function(e,t){Oa(this._editor.hasModel());var n=this._editor.getSelection(),i=0,r=t.length;return hd.isEmpty(n)||hd.spansMultipleLines(n)||!hd.containsRange(e,n)||(i=Math.max(0,n.startColumn-e.startColumn),r=Math.min(e.endColumn,n.endColumn)-e.startColumn),{start:i,end:r}}},{key:"_show",value:function(){var e=this;this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout((function(){e._inputWithButton.input.focus(),e._inputWithButton.input.setSelectionRange(parseInt(e._inputWithButton.input.getAttribute("selectionStart")),parseInt(e._inputWithButton.input.getAttribute("selectionEnd")))}),100)}},{key:"_updateRenameCandidates",value:function(e,t,n){var i=this;return s((function(){var r,o,a,s,l;return E(this,(function(u){switch(u.label){case 0:return r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i._trace.apply(i,["_updateRenameCandidates"].concat(x(t)))},r("start"),[4,fg(Promise.allSettled(e),n)];case 1:return o=u.sent(),i._inputWithButton.setSparkleButton(),void 0===o?(r("returning early - received updateRenameCandidates results - undefined"),[2]):(a=o.flatMap((function(e){return"fulfilled"===e.status&&Aa(e.value)?e.value:[]})),r("received updateRenameCandidates results - total (unfiltered) ".concat(a.length," candidates.")),s=ca(a,(function(e){return e.newSymbolName})),r("distinct candidates - ".concat(s.length," candidates.")),l=s.filter((function(e){var n=e.newSymbolName;return n.trim().length>0&&n!==i._inputWithButton.input.value&&n!==t&&!i._candidates.has(n)})),r("valid distinct candidates - ".concat(a.length," candidates.")),l.forEach((function(e){return i._candidates.add(e.newSymbolName)})),l.length<1?(r("returning early - no valid distinct candidates"),[2]):(r("setting candidates"),i._renameCandidateListView.setCandidates(l),r("asking editor to re-layout"),i._editor.layoutContentWidget(i),[2]))}}))}))()}},{key:"_hide",value:function(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}},{key:"_getTopForPosition",value:function(){var e,t=this._editor.getVisibleRanges();return t.length>0?e=t[0].startLineNumber:(this._logService.warn("RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty"),e=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(e)}},{key:"_trace",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i;(i=this._logService).trace.apply(i,["RenameWidget"].concat(x(t)))}}]),e}();ebe=X_e([$_e(2,PS),$_e(3,ZI),$_e(4,Ky),$_e(5,k_)],ebe);var tbe=function(){function e(t,n){var i=this;u(this,e),this._disposables=new Tu,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=n.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=n.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),this._listContainer.className="rename-box rename-candidate-list-container",t.appendChild(this._listContainer),this._listWidget=e._createListWidget(this._listContainer,this._candidateViewHeight,n.fontInfo),this._listWidget.onDidChangeFocus((function(e){1===e.elements.length&&n.onFocusChange(e.elements[0].newSymbolName)}),this._disposables),this._listWidget.onDidChangeSelection((function(e){1===e.elements.length&&n.onSelectionChange()}),this._disposables),this._disposables.add(this._listWidget.onDidBlur((function(e){i._listWidget.setFocus([])}))),this._listWidget.style(QF({listInactiveFocusForeground:BI,listInactiveFocusBackground:VI}))}return h(e,[{key:"dispose",value:function(){this._listWidget.dispose(),this._disposables.dispose()}},{key:"layout",value:function(e){var t=e.height,n=e.width;this._availableHeight=t,this._minimumWidth=n}},{key:"setCandidates",value:function(e){this._listWidget.splice(0,0,e);var t=this._pickListHeight(this._listWidget.length),n=this._pickListWidth(e);this._listWidget.layout(t,n),this._listContainer.style.height="".concat(t,"px"),this._listContainer.style.width="".concat(n,"px"),bR(Xa("renameSuggestionsReceivedAria","Received {0} rename suggestions",e.length))}},{key:"clearCandidates",value:function(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])}},{key:"nCandidates",get:function(){return this._listWidget.length}},{key:"focusedCandidate",get:function(){if(0!==this._listWidget.length){var e=this._listWidget.getSelectedElements()[0];if(void 0!==e)return e.newSymbolName;var t=this._listWidget.getFocusedElements()[0];return void 0!==t?t.newSymbolName:void 0}}},{key:"focusNext",value:function(){if(0===this._listWidget.length)return!1;var e=this._listWidget.getFocus();if(0===e.length)return this._listWidget.focusFirst(),this._listWidget.reveal(0),!0;if(e[0]===this._listWidget.length-1)return this._listWidget.setFocus([]),this._listWidget.reveal(0),!1;this._listWidget.focusNext();var t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}},{key:"focusPrevious",value:function(){if(0===this._listWidget.length)return!1;var e=this._listWidget.getFocus();if(0===e.length){this._listWidget.focusLast();var t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}if(0===e[0])return this._listWidget.setFocus([]),!1;this._listWidget.focusPrevious();var n=this._listWidget.getFocus()[0];return this._listWidget.reveal(n),!0}},{key:"clearFocus",value:function(){this._listWidget.setFocus([])}},{key:"_candidateViewHeight",get:function(){var e=ibe.getLayoutInfo({lineHeight:this._lineHeight}).totalHeight;return e}},{key:"_pickListHeight",value:function(e){var t=this._candidateViewHeight*e;return Math.min(t,this._availableHeight,7*this._candidateViewHeight)}},{key:"_pickListWidth",value:function(e){var t,n=Math.ceil((t=Math).max.apply(t,x(e.map((function(e){return e.newSymbolName.length}))))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+n+10)}}],[{key:"_createListWidget",value:function(e,t,n){var i=new(function(){function e(){u(this,e)}return h(e,[{key:"getTemplateId",value:function(e){return"candidate"}},{key:"getHeight",value:function(e){return t}}]),e}()),r=new(function(){function e(){u(this,e),this.templateId="candidate"}return h(e,[{key:"renderTemplate",value:function(e){return new ibe(e,n)}},{key:"renderElement",value:function(e,t,n){n.populate(e)}},{key:"disposeTemplate",value:function(e){e.dispose()}}]),e}());return new _F("NewSymbolNameCandidates",e,i,[r],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})}}]),e}(),nbe=function(){function e(){u(this,e),this._onDidInputChange=new Zu,this.onDidInputChange=this._onDidInputChange.event,this._disposables=new Tu}return h(e,[{key:"domNode",get:function(){var e=this;return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="rename-input-with-button",this._domNode.style.display="flex",this._domNode.style.flexDirection="row",this._domNode.style.alignItems="center",this._inputNode=document.createElement("input"),this._inputNode.className="rename-input",this._inputNode.type="text",this._inputNode.style.border="none",this._inputNode.setAttribute("aria-label",Xa("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._inputNode),this._buttonNode=document.createElement("div"),this._buttonNode.className="rename-suggestions-button",this._buttonNode.setAttribute("tabindex","0"),this._buttonGenHoverText=Xa("generateRenameSuggestionsButton","Generate new name suggestions"),this._buttonCancelHoverText=Xa("cancelRenameSuggestionsButton","Cancel"),this._buttonHover=NO().setupManagedHover(xO("element"),this._buttonNode,this._buttonGenHoverText),this._disposables.add(this._buttonHover),this._domNode.appendChild(this._buttonNode),this._disposables.add(cp(this.input,rm.INPUT,(function(){return e._onDidInputChange.fire()}))),this._disposables.add(cp(this.input,rm.KEY_DOWN,(function(t){var n=new rg(t);15!==n.keyCode&&17!==n.keyCode||e._onDidInputChange.fire()}))),this._disposables.add(cp(this.input,rm.CLICK,(function(){return e._onDidInputChange.fire()}))),this._disposables.add(cp(this.input,rm.FOCUS,(function(){e.domNode.style.outlineWidth="1px",e.domNode.style.outlineStyle="solid",e.domNode.style.outlineOffset="-1px",e.domNode.style.outlineColor="var(--vscode-focusBorder)"}))),this._disposables.add(cp(this.input,rm.BLUR,(function(){e.domNode.style.outline="none"})))),this._domNode}},{key:"input",get:function(){return Oa(this._inputNode),this._inputNode}},{key:"button",get:function(){return Oa(this._buttonNode),this._buttonNode}},{key:"buttonState",get:function(){return this._buttonState}},{key:"setSparkleButton",value:function(){var e,t;this._buttonState="sparkle",null!==(t=this._sparkleIcon)&&void 0!==t||(this._sparkleIcon=PE(bd.sparkle)),lp(this.button),this.button.appendChild(this._sparkleIcon),this.button.setAttribute("aria-label","Generating new name suggestions"),null===(e=this._buttonHover)||void 0===e||e.update(this._buttonGenHoverText),this.input.focus()}},{key:"setStopButton",value:function(){var e,t;this._buttonState="stop",null!==(t=this._stopIcon)&&void 0!==t||(this._stopIcon=PE(bd.primitiveSquare)),lp(this.button),this.button.appendChild(this._stopIcon),this.button.setAttribute("aria-label","Cancel generating new name suggestions"),null===(e=this._buttonHover)||void 0===e||e.update(this._buttonCancelHoverText),this.input.focus()}},{key:"dispose",value:function(){this._disposables.dispose()}}]),e}(),ibe=function(){function e(t,n){u(this,e),this._domNode=document.createElement("div"),this._domNode.className="rename-box rename-candidate",this._domNode.style.display="flex",this._domNode.style.columnGap="5px",this._domNode.style.alignItems="center",this._domNode.style.height="".concat(n.lineHeight,"px"),this._domNode.style.padding="".concat(e._PADDING,"px");var i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.width=i.style.height="".concat(.8*n.lineHeight,"px"),this._domNode.appendChild(i),this._icon=PE(bd.sparkle),this._icon.style.display="none",i.appendChild(this._icon),this._label=document.createElement("div"),Om(this._label,n),this._domNode.appendChild(this._label),t.appendChild(this._domNode)}return h(e,[{key:"populate",value:function(e){this._updateIcon(e),this._updateLabel(e)}},{key:"_updateIcon",value:function(e){var t,n=!!(null===(t=e.tags)||void 0===t?void 0:t.includes(Ad.AIGenerated));this._icon.style.display=n?"inherit":"none"}},{key:"_updateLabel",value:function(e){this._label.innerText=e.newSymbolName}},{key:"dispose",value:function(){}}],[{key:"getLayoutInfo",value:function(t){return{totalHeight:t.lineHeight+2*e._PADDING}}}]),e}();ibe._PADDING=2;var rbe,obe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},abe=function(e,t){return function(n,i){t(n,i,e)}},sbe=function(){function e(t,n,i){u(this,e),this.model=t,this.position=n,this._providerRenameIdx=0,this._providers=i.ordered(t)}return h(e,[{key:"hasProvider",value:function(){return this._providers.length>0}},{key:"resolveRenameLocation",value:function(e){var t=this;return s((function(){var n,i,r,o;return E(this,(function(a){switch(a.label){case 0:n=[],t._providerRenameIdx=0,a.label=1;case 1:return t._providerRenameIdx<t._providers.length&&(i=t._providers[t._providerRenameIdx]).resolveRenameLocation?[4,i.resolveRenameLocation(t.model,t.position,e)]:[3,4];case 2:return(r=a.sent())?r.rejectReason?(n.push(r.rejectReason),[3,3]):[2,r]:[3,3];case 3:return t._providerRenameIdx++,[3,1];case 4:return t._providerRenameIdx=0,(o=t.model.getWordAtPosition(t.position))?[2,{range:new hd(t.position.lineNumber,o.startColumn,t.position.lineNumber,o.endColumn),text:o.word,rejectReason:n.length>0?n.join("\n"):void 0}]:[2,{range:hd.fromPositions(t.position),text:"",rejectReason:n.length>0?n.join("\n"):void 0}]}}))}))()}},{key:"provideRenameEdits",value:function(e,t){var n=this;return s((function(){return E(this,(function(i){return[2,n._provideRenameEdits(e,n._providerRenameIdx,[],t)]}))}))()}},{key:"_provideRenameEdits",value:function(e,t,n,i){var r=this;return s((function(){var o,a;return E(this,(function(s){switch(s.label){case 0:return(o=r._providers[t])?[4,o.provideRenameEdits(r.model,r.position,e,i)]:[2,{edits:[],rejectReason:n.join("\n")}];case 1:return(a=s.sent())?a.rejectReason?[2,r._provideRenameEdits(e,t+1,n.concat(a.rejectReason),i)]:[2,a]:[2,r._provideRenameEdits(e,t+1,n.concat(Xa("no result","No result.")),i)]}}))}))()}}]),e}();function lbe(){return lbe=s((function(e,t,n,i){var r,o;return E(this,(function(a){switch(a.label){case 0:return[4,(r=new sbe(t,n,e)).resolveRenameLocation(Uu.None)];case 1:return(null==(o=a.sent())?void 0:o.rejectReason)?[2,{edits:[],rejectReason:o.rejectReason}]:[2,r.provideRenameEdits(i,Uu.None)]}}))})),lbe.apply(this,arguments)}var ube=(Rn=function(){function e(t,n,i,r,o,a,s,l,c){u(this,e),this.editor=t,this._instaService=n,this._notificationService=i,this._bulkEditService=r,this._progressService=o,this._logService=a,this._configService=s,this._languageFeaturesService=l,this._telemetryService=c,this._disposableStore=new Tu,this._cts=new rc,this._renameWidget=this._disposableStore.add(this._instaService.createInstance(ebe,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}return h(e,[{key:"dispose",value:function(){this._disposableStore.dispose(),this._cts.dispose(!0)}},{key:"run",value:function(){var e=this;return s((function(){var t,n,i,r,o,a,l,u,c,d,h,f,g,v,p,m,y;return E(this,(function(_){switch(_.label){case 0:if(t=e._logService.trace.bind(e._logService,"[rename]"),e._cts.dispose(!0),e._cts=new rc,!e.editor.hasModel())return t("editor has no model"),[2,void 0];if(n=e.editor.getPosition(),!(i=new sbe(e.editor.getModel(),n,e._languageFeaturesService.renameProvider)).hasProvider())return t("skeleton has no provider"),[2,void 0];r=new E9(e.editor,5,void 0,e._cts.token),_.label=1;case 1:return _.trys.push([1,3,4,5]),t("resolving rename location"),a=i.resolveRenameLocation(r.token),e._progressService.showWhile(a,250),[4,a];case 2:return o=_.sent(),t("resolved rename location"),[3,5];case 3:return(l=_.sent())instanceof bu?t("resolve rename location cancelled",JSON.stringify(l,null,"\t")):(t("resolve rename location failed",l instanceof Error?l:JSON.stringify(l,null,"\t")),("string"==typeof l||sT(l))&&(null===(u=ine.get(e.editor))||void 0===u||u.showMessage(l||Xa("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),n))),[2,void 0];case 4:return r.dispose(),[7];case 5:return o?o.rejectReason?(t("returning early - rejected with reason: ".concat(o.rejectReason),o.rejectReason),null===(c=ine.get(e.editor))||void 0===c||c.showMessage(o.rejectReason,n),[2,void 0]):r.token.isCancellationRequested?(t("returning early - cts1 cancelled"),[2,void 0]):(d=new E9(e.editor,5,o.range,e._cts.token),h=e.editor.getModel(),f=e._languageFeaturesService.newSymbolNamesProvider.all(h),[4,Promise.all(f.map(function(){var e=s((function(e){var t,n;return E(this,(function(i){switch(i.label){case 0:return n=[e],[4,e.supportsAutomaticNewSymbolNamesTriggerKind];case 1:return[2,n.concat([null!==(t=i.sent())&&void 0!==t&&t])]}}))}));return function(t){return e.apply(this,arguments)}}()))]):(t("returning early - no loc"),[2,void 0]);case 6:return g=_.sent(),v=function(e,t){var n=g.slice();return e===Pd.Automatic&&(n=n.filter((function(e){var t=C(e,2);t[0];return t[1]}))),n.map((function(n){return C(n,1)[0].provideNewSymbolNames(h,o.range,e,t)}))},t("creating rename input field and awaiting its result"),p=e._bulkEditService.hasPreviewHandler()&&e._configService.getValue(e.editor.getModel().uri,"editor.rename.enablePreview"),[4,e._renameWidget.getInput(o.range,o.text,p,f.length>0?v:void 0,d)];case 7:return m=_.sent(),t("received response from rename input field"),f.length>0&&e._reportTelemetry(f.length,h.getLanguageId(),m),"boolean"==typeof m?(t("returning early - rename input field response - ".concat(m)),m&&e.editor.focus(),d.dispose(),[2,void 0]):(e.editor.focus(),t("requesting rename edits"),y=fg(i.provideRenameEdits(m.newName,d.token),d.token).then(function(){var n=s((function(n){return E(this,(function(i){return n?e.editor.hasModel()?n.rejectReason?(t("returning early - rejected with reason: ".concat(n.rejectReason)),e._notificationService.info(n.rejectReason),[2]):(e.editor.setSelection(hd.fromPositions(e.editor.getSelection().getPosition())),t("applying edits"),e._bulkEditService.apply(n,{editor:e.editor,showPreview:m.wantsPreview,label:Xa("label","Renaming '{0}' to '{1}'",null==o?void 0:o.text,m.newName),code:"undoredo.rename",quotableLabel:Xa("quotableLabel","Renaming {0} to {1}",null==o?void 0:o.text,m.newName),respectAutoSaveConfig:!0}).then((function(e){t("edits applied"),e.ariaSummary&&_R(Xa("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",o.text,m.newName,e.ariaSummary))})).catch((function(n){t("error when applying edits ".concat(JSON.stringify(n,null,"\t"))),e._notificationService.error(Xa("rename.failedApply","Rename failed to apply edits")),e._logService.error(n)})),[2]):(t("returning early - no model after rename edits are provided"),[2]):(t("returning early - no rename edits result"),[2])}))}));return function(e){return n.apply(this,arguments)}}(),(function(n){t("error when providing rename edits",JSON.stringify(n,null,"\t")),e._notificationService.error(Xa("rename.failed","Rename failed to compute edits")),e._logService.error(n)})).finally((function(){d.dispose()})),t("returning rename operation"),e._progressService.showWhile(y,250),[2,y])}}))}))()}},{key:"acceptRenameInput",value:function(e){this._renameWidget.acceptInput(e)}},{key:"cancelRenameInput",value:function(){this._renameWidget.cancelInput(!0,"cancelRenameInput command")}},{key:"focusNextRenameSuggestion",value:function(){this._renameWidget.focusNextRenameSuggestion()}},{key:"focusPreviousRenameSuggestion",value:function(){this._renameWidget.focusPreviousRenameSuggestion()}},{key:"_reportTelemetry",value:function(e,t,n){var i="boolean"==typeof n?{kind:"cancelled",languageId:t,nRenameSuggestionProviders:e}:{kind:"accepted",languageId:t,nRenameSuggestionProviders:e,source:n.stats.source.k,nRenameSuggestions:n.stats.nRenameSuggestions,timeBeforeFirstInputFieldEdit:n.stats.timeBeforeFirstInputFieldEdit,wantsPreview:n.wantsPreview,nRenameSuggestionsInvocations:n.stats.nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:n.stats.hadAutomaticRenameSuggestionsInvocation};this._telemetryService.publicLog2("renameInvokedEvent",i)}}],[{key:"get",value:function(e){return e.getContribution(rbe.ID)}}]),e}(),rbe=Rn,Rn.ID="editor.contrib.renameController",Rn);ube=rbe=obe([abe(1,Gm),abe(2,rx),abe(3,jR),abe(4,WA),abe(5,k_),abe(6,bS),abe(7,wS),abe(8,b_)],ube);var cbe=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.rename",label:Xa("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:Sy.and(p0.writable,p0.hasRenameProvider),kbOpts:{kbExpr:p0.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}}])}return p(t,e),h(t,[{key:"runCommand",value:function(e,n){var i=this,r=e.get(Ym),o=C(Array.isArray(n)&&n||[void 0,void 0],2),a=o[0],s=o[1];return ed.isUri(a)&&dd.isIPosition(s)?r.openCodeEditor({resource:a},r.getActiveCodeEditor()).then((function(e){e&&(e.setPosition(s),e.invokeWithinContext((function(t){return i.reportTelemetry(t,e),i.run(t,e)})))}),vu):g(v(t.prototype),"runCommand",this).call(this,e,n)}},{key:"run",value:function(e,t){var n=e.get(k_),i=ube.get(t);return i?(n.trace("[RenameAction] got controller, running..."),i.run()):(n.trace("[RenameAction] returning early - controller missing"),Promise.resolve())}}]),t}(M_);B_(ube.ID,ube,4),O_(cbe);var dbe=E_.bindToContribution(ube.get);P_(new dbe({id:"acceptRenameInput",precondition:J_e,handler:function(e){return e.acceptRenameInput(!1)},kbOpts:{weight:199,kbExpr:Sy.and(p0.focus,Sy.not("isComposing")),primary:3}})),P_(new dbe({id:"acceptRenameInputWithPreview",precondition:Sy.and(J_e,Sy.has("config.editor.rename.enablePreview")),handler:function(e){return e.acceptRenameInput(!0)},kbOpts:{weight:199,kbExpr:Sy.and(p0.focus,Sy.not("isComposing")),primary:2051}})),P_(new dbe({id:"cancelRenameInput",precondition:J_e,handler:function(e){return e.cancelRenameInput()},kbOpts:{weight:199,kbExpr:p0.focus,primary:9,secondary:[1033]}})),y_(function(e){function t(){return u(this,t),l(this,t,[{id:"focusNextRenameSuggestion",title:_({},Ja("focusNextRenameSuggestion","Focus Next Rename Suggestion")),precondition:J_e,keybinding:[{primary:18,weight:199}]}])}return p(t,e),h(t,[{key:"run",value:function(e){var t=e.get(Ym).getFocusedCodeEditor();if(t){var n=ube.get(t);n&&n.focusNextRenameSuggestion()}}}]),t}(m_)),y_(function(e){function t(){return u(this,t),l(this,t,[{id:"focusPreviousRenameSuggestion",title:_({},Ja("focusPreviousRenameSuggestion","Focus Previous Rename Suggestion")),precondition:J_e,keybinding:[{primary:16,weight:199}]}])}return p(t,e),h(t,[{key:"run",value:function(e){var t=e.get(Ym).getFocusedCodeEditor();if(t){var n=ube.get(t);n&&n.focusPreviousRenameSuggestion()}}}]),t}(m_)),A_("_executeDocumentRenameProvider",(function(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];var a=C(r,1)[0];return Oa("string"==typeof a),function(e,t,n,i){return lbe.apply(this,arguments)}(e.get(wS).renameProvider,t,n,a)})),A_("_executePrepareRename",function(){var e=s((function(e,t,n){var i,r;return E(this,(function(o){switch(o.label){case 0:return i=e.get(wS).renameProvider,[4,new sbe(t,n,i).resolveRenameLocation(Uu.None)];case 1:if(null==(r=o.sent())?void 0:r.rejectReason)throw new Error(r.rejectReason);return[2,r]}}))}));return function(t,n,i){return e.apply(this,arguments)}}()),i_.as(lk).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:Xa("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var hbe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},fbe=function(e,t){return function(n,i){t(n,i,e)}},gbe=(An=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t)).editor=e,r.languageConfigurationService=n,r.editorWorkerService=i,r.decorations=r.editor.createDecorationsCollection(),r.options=r.createOptions(e.getOption(73)),r.computePromise=null,r.currentOccurrences={},r._register(e.onDidChangeModel((function(t){r.currentOccurrences={},r.options=r.createOptions(e.getOption(73)),r.stop(),r.computeSectionHeaders.schedule(0)}))),r._register(e.onDidChangeModelLanguage((function(t){r.currentOccurrences={},r.options=r.createOptions(e.getOption(73)),r.stop(),r.computeSectionHeaders.schedule(0)}))),r._register(n.onDidChange((function(t){var n,i=null===(n=r.editor.getModel())||void 0===n?void 0:n.getLanguageId();i&&t.affects(i)&&(r.currentOccurrences={},r.options=r.createOptions(e.getOption(73)),r.stop(),r.computeSectionHeaders.schedule(0))}))),r._register(e.onDidChangeConfiguration((function(t){r.options&&!t.hasChanged(73)||(r.options=r.createOptions(e.getOption(73)),r.updateDecorations([]),r.stop(),r.computeSectionHeaders.schedule(0))}))),r._register(r.editor.onDidChangeModelContent((function(e){r.computeSectionHeaders.schedule()}))),r._register(e.onDidChangeModelTokens((function(e){r.computeSectionHeaders.isScheduled()||r.computeSectionHeaders.schedule(1e3)}))),r.computeSectionHeaders=r._register(new Sg((function(){r.findSectionHeaders()}),250)),r.computeSectionHeaders.schedule(0),r}return p(t,e),h(t,[{key:"createOptions",value:function(e){if(e&&this.editor.hasModel()){var t=this.editor.getModel().getLanguageId();if(t){var n=this.languageConfigurationService.getLanguageConfiguration(t).comments,i=this.languageConfigurationService.getLanguageConfiguration(t).foldingRules;if(n||(null==i?void 0:i.markers))return{foldingRules:i,findMarkSectionHeaders:e.showMarkSectionHeaders,findRegionSectionHeaders:e.showRegionSectionHeaders}}}}},{key:"findSectionHeaders",value:function(){var e,t,n=this;if(this.editor.hasModel()&&((null===(e=this.options)||void 0===e?void 0:e.findMarkSectionHeaders)||(null===(t=this.options)||void 0===t?void 0:t.findRegionSectionHeaders))){var i=this.editor.getModel();if(!i.isDisposed()&&!i.isTooLargeForSyncing()){var r=i.getVersionId();this.editorWorkerService.findSectionHeaders(i.uri,this.options).then((function(e){i.isDisposed()||i.getVersionId()!==r||n.updateDecorations(e)}))}}}},{key:"updateDecorations",value:function(e){var t=this,n=this.editor.getModel();n&&(e=e.filter((function(e){if(!e.shouldBeInComments)return!0;var t=n.validateRange(e.range),i=n.tokenization.getLineTokens(t.startLineNumber),r=i.findTokenIndexAtOffset(t.startColumn-1),o=i.getStandardTokenType(r);return i.getLanguageId(r)===n.getLanguageId()&&1===o})));var i=Object.values(this.currentOccurrences).map((function(e){return e.decorationId})),r=e.map((function(e){return function(e){return{range:e.range,options:cU.createDynamic({description:"section-header",stickiness:3,collapseOnReplaceEdit:!0,minimap:{color:void 0,position:1,sectionHeaderStyle:e.hasSeparatorLine?2:1,sectionHeaderText:e.text}})}}(e)}));this.editor.changeDecorations((function(n){var o=n.deltaDecorations(i,r);t.currentOccurrences={};for(var a=0,s=o.length;a<s;a++){var l={sectionHeader:e[a],decorationId:o[a]};t.currentOccurrences[l.decorationId]=l}}))}},{key:"stop",value:function(){this.computeSectionHeaders.cancel(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this.stop(),this.decorations.clear()}}]),t}(Ru),An.ID="editor.sectionHeaderDetector",An);function vbe(e){var t=new Uint32Array(function(e){var t=0;if(t+=2,"full"===e.type)t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;var n=!0,i=!1,r=void 0;try{for(var o,a=e.deltas[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.data&&(t+=s.data.length)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}return t}(e)),n=0;if(t[n++]=e.id,"full"===e.type)t[n++]=1,t[n++]=e.data.length,t.set(e.data,n),n+=e.data.length;else{t[n++]=2,t[n++]=e.deltas.length;var i=!0,r=!1,o=void 0;try{for(var a,s=e.deltas[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;t[n++]=l.start,t[n++]=l.deleteCount,l.data?(t[n++]=l.data.length,t.set(l.data,n),n+=l.data.length):t[n++]=0}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}return function(e){var t=new Uint8Array(e.buffer,e.byteOffset,4*e.length);return Ms()||function(e){for(var t=0,n=e.length;t<n;t+=4){var i=e[t+0],r=e[t+1],o=e[t+2],a=e[t+3];e[t+0]=a,e[t+1]=o,e[t+2]=r,e[t+3]=i}}(t),wb.wrap(t)}(t)}function pbe(e){return e&&!!e.data}function mbe(e){return e&&Array.isArray(e.edits)}B_((gbe=hbe([fbe(1,Ek),fbe(2,TW)],gbe)).ID,gbe,1);var ybe=function e(t,n,i){u(this,e),this.provider=t,this.tokens=n,this.error=i};function _be(e,t){return e.has(t)}function bbe(e,t,n,i,r){return kbe.apply(this,arguments)}function kbe(){return kbe=s((function(e,t,n,i,r){var o,a,l,u,c,d,h,f;return E(this,(function(g){switch(g.label){case 0:return o=function(e,t){var n=e.orderedGroups(t);return n.length>0?n[0]:[]}(e,t),[4,Promise.all(o.map(function(){var e=s((function(e){var o,a,s;return E(this,(function(l){switch(l.label){case 0:a=null,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,e.provideDocumentSemanticTokens(t,e===n?i:null,r)];case 2:return o=l.sent(),[3,4];case 3:return s=l.sent(),a=s,o=null,[3,4];case 4:return o&&(pbe(o)||mbe(o))||(o=null),[2,new ybe(e,o,a)]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:a=g.sent(),l=!0,u=!1,c=void 0;try{for(d=a[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){if((f=h.value).error)throw f.error;if(f.tokens)return[2,f]}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}return a.length>0?[2,a[0]]:[2,null]}}))})),kbe.apply(this,arguments)}var wbe=function e(t,n){u(this,e),this.provider=t,this.tokens=n};function Cbe(e,t){var n=e.orderedGroups(t);return n.length>0?n[0]:[]}function Sbe(e,t,n,i){return xbe.apply(this,arguments)}function xbe(){return xbe=s((function(e,t,n,i){var r,o,a,l,u,c,d,h;return E(this,(function(f){switch(f.label){case 0:return r=Cbe(e,t),[4,Promise.all(r.map(function(){var e=s((function(e){var r;return E(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,e.provideDocumentRangeSemanticTokens(t,n,i)];case 1:return r=o.sent(),[3,3];case 2:return pu(o.sent()),r=null,[3,3];case 3:return r&&pbe(r)||(r=null),[2,new wbe(e,r)]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:o=f.sent(),a=!0,l=!1,u=void 0;try{for(c=o[Symbol.iterator]();!(a=(d=c.next()).done);a=!0)if((h=d.value).tokens)return[2,h]}catch(e){l=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw u}}return o.length>0?[2,o[0]]:[2,null]}}))})),xbe.apply(this,arguments)}sy.registerCommand("_provideDocumentSemanticTokensLegend",function(){var e=s((function(e){var t,n,i,r,o,a,s,l,u=arguments;return E(this,(function(c){for(t=u.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=u[i];return r=C(n,1),Oa((o=r[0])instanceof ed),(a=e.get(Qm).getModel(o))?(s=e.get(wS).documentSemanticTokensProvider,l=function(e,t){var n=e.orderedGroups(t);return n.length>0?n[0]:null}(s,a),l?[2,l[0].getLegend()]:[2,e.get(ay).executeCommand("_provideDocumentRangeSemanticTokensLegend",o)]):[2,void 0]}))}));return function(t){return e.apply(this,arguments)}}()),sy.registerCommand("_provideDocumentSemanticTokens",function(){var e=s((function(e){var t,n,i,r,o,a,s,l,u,c,d,h=arguments;return E(this,(function(f){switch(f.label){case 0:for(t=h.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=h[i];return r=C(n,1),Oa((o=r[0])instanceof ed),(a=e.get(Qm).getModel(o))?_be(s=e.get(wS).documentSemanticTokensProvider,a)?[4,bbe(s,a,null,null,Uu.None)]:[2,e.get(ay).executeCommand("_provideDocumentRangeSemanticTokens",o,a.getFullModelRange())]:[2,void 0];case 1:return(l=f.sent())?(u=l.provider,(c=l.tokens)&&pbe(c)?(d=vbe({id:0,type:"full",data:c.data}),c.resultId&&u.releaseDocumentSemanticTokens(c.resultId),[2,d]):[2,void 0]):[2,void 0]}}))}));return function(t){return e.apply(this,arguments)}}()),sy.registerCommand("_provideDocumentRangeSemanticTokensLegend",function(){var e=s((function(e){var t,n,i,r,o,a,s,l,u,c,d=arguments;return E(this,(function(h){switch(h.label){case 0:for(t=d.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=d[i];return r=C(n,2),o=r[0],a=r[1],Oa(o instanceof ed),(s=e.get(Qm).getModel(o))?(l=e.get(wS).documentRangeSemanticTokensProvider,0===(u=Cbe(l,s)).length?[2,void 0]:1===u.length?[2,u[0].getLegend()]:a&&hd.isIRange(a)?[4,Sbe(l,s,hd.lift(a),Uu.None)]:(console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),[2,u[0].getLegend()])):[2,void 0];case 1:return(c=h.sent())?[2,c.provider.getLegend()]:[2,void 0]}}))}));return function(t){return e.apply(this,arguments)}}()),sy.registerCommand("_provideDocumentRangeSemanticTokens",function(){var e=s((function(e){var t,n,i,r,o,a,s,l,u=arguments;return E(this,(function(c){switch(c.label){case 0:for(t=u.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=u[i];return r=C(n,2),o=r[0],a=r[1],Oa(o instanceof ed),Oa(hd.isIRange(a)),(s=e.get(Qm).getModel(o))?[4,Sbe(e.get(wS).documentRangeSemanticTokensProvider,s,hd.lift(a),Uu.None)]:[2,void 0];case 1:return(l=c.sent())&&l.tokens?[2,vbe({id:0,type:"full",data:l.tokens.data})]:[2,void 0]}}))}));return function(t){return e.apply(this,arguments)}}());var Lbe="editor.semanticHighlighting";function Dbe(e,t,n){var i,r=null===(i=n.getValue(Lbe,{overrideIdentifier:e.getLanguageId(),resource:e.uri}))||void 0===i?void 0:i.enabled;return"boolean"==typeof r?r:t.getColorTheme().semanticHighlighting}var Nbe,Ibe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ebe=function(e,t){return function(n,i){t(n,i,e)}},Mbe=function(e){function t(e,n,i,r,o,a){var s;u(this,t),(s=l(this,t))._watchers=Object.create(null);var c=function(t){s._watchers[t.uri.toString()]=new Tbe(t,e,i,o,a)},d=function(e,t){t.dispose(),delete s._watchers[e.uri.toString()]},h=function(){var e=!0,t=!1,o=void 0;try{for(var a,l=n.getModels()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var u=a.value,h=s._watchers[u.uri.toString()];Dbe(u,i,r)?h||c(u):h&&d(u,h)}}catch(e){t=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(t)throw o}}};return n.getModels().forEach((function(e){Dbe(e,i,r)&&c(e)})),s._register(n.onModelAdded((function(e){Dbe(e,i,r)&&c(e)}))),s._register(n.onModelRemoved((function(e){var t=s._watchers[e.uri.toString()];t&&d(e,t)}))),s._register(r.onDidChangeConfiguration((function(e){e.affectsConfiguration(Lbe)&&h()}))),s._register(i.onDidColorThemeChange(h)),s}return p(t,e),h(t,[{key:"dispose",value:function(){var e=!0,n=!1,i=void 0;try{for(var r,o=Object.values(this._watchers)[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){r.value.dispose()}}catch(e){n=!0,i=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}g(v(t.prototype),"dispose",this).call(this)}}]),t}(Ru);Mbe=Ibe([Ebe(0,jx),Ebe(1,Qm),Ebe(2,PS),Ebe(3,qb),Ebe(4,Ix),Ebe(5,wS)],Mbe);var Tbe=(Pn=function(e){function t(e,n,i,r,o){var a;u(this,t),(a=l(this,t))._semanticTokensStylingService=n,a._isDisposed=!1,a._model=e,a._provider=o.documentSemanticTokensProvider,a._debounceInformation=r.for(a._provider,"DocumentSemanticTokens",{min:Nbe.REQUEST_MIN_DELAY,max:Nbe.REQUEST_MAX_DELAY}),a._fetchDocumentSemanticTokens=a._register(new Sg((function(){return a._fetchDocumentSemanticTokensNow()}),Nbe.REQUEST_MIN_DELAY)),a._currentDocumentResponse=null,a._currentDocumentRequestCancellationTokenSource=null,a._documentProvidersChangeListeners=[],a._providersChangedDuringRequest=!1,a._register(a._model.onDidChangeContent((function(){a._fetchDocumentSemanticTokens.isScheduled()||a._fetchDocumentSemanticTokens.schedule(a._debounceInformation.get(a._model))}))),a._register(a._model.onDidChangeAttached((function(){a._fetchDocumentSemanticTokens.isScheduled()||a._fetchDocumentSemanticTokens.schedule(a._debounceInformation.get(a._model))}))),a._register(a._model.onDidChangeLanguage((function(){a._currentDocumentResponse&&(a._currentDocumentResponse.dispose(),a._currentDocumentResponse=null),a._currentDocumentRequestCancellationTokenSource&&(a._currentDocumentRequestCancellationTokenSource.cancel(),a._currentDocumentRequestCancellationTokenSource=null),a._setDocumentSemanticTokens(null,null,null,[]),a._fetchDocumentSemanticTokens.schedule(0)})));var s=function(){Iu(a._documentProvidersChangeListeners),a._documentProvidersChangeListeners=[];var t=!0,n=!1,i=void 0;try{for(var r,o=a._provider.all(e)[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;"function"==typeof s.onDidChange&&a._documentProvidersChangeListeners.push(s.onDidChange((function(){a._currentDocumentRequestCancellationTokenSource?a._providersChangedDuringRequest=!0:a._fetchDocumentSemanticTokens.schedule(0)})))}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}};return s(),a._register(a._provider.onDidChange((function(){s(),a._fetchDocumentSemanticTokens.schedule(a._debounceInformation.get(a._model))}))),a._register(i.onDidColorThemeChange((function(e){a._setDocumentSemanticTokens(null,null,null,[]),a._fetchDocumentSemanticTokens.schedule(a._debounceInformation.get(a._model))}))),a._fetchDocumentSemanticTokens.schedule(0),a}return p(t,e),h(t,[{key:"dispose",value:function(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),Iu(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,g(v(t.prototype),"dispose",this).call(this)}},{key:"_fetchDocumentSemanticTokensNow",value:function(){var e=this;if(!this._currentDocumentRequestCancellationTokenSource)if(_be(this._provider,this._model)){if(this._model.isAttachedToEditor()){var t=new rc,n=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,i=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,r=bbe(this._provider,this._model,n,i,t.token);this._currentDocumentRequestCancellationTokenSource=t,this._providersChangedDuringRequest=!1;var o=[],a=this._model.onDidChangeContent((function(e){o.push(e)})),s=new Hu(!1);r.then((function(t){if(e._debounceInformation.update(e._model,s.elapsed()),e._currentDocumentRequestCancellationTokenSource=null,a.dispose(),t){var n=t.provider,i=t.tokens,r=e._semanticTokensStylingService.getStyling(n);e._setDocumentSemanticTokens(n,i||null,r,o)}else e._setDocumentSemanticTokens(null,null,null,o)}),(function(t){t&&(_u(t)||"string"==typeof t.message&&-1!==t.message.indexOf("busy"))||vu(t),e._currentDocumentRequestCancellationTokenSource=null,a.dispose(),(o.length>0||e._providersChangedDuringRequest)&&(e._fetchDocumentSemanticTokens.isScheduled()||e._fetchDocumentSemanticTokens.schedule(e._debounceInformation.get(e._model)))}))}}else this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1)}},{key:"_setDocumentSemanticTokens",value:function(e,t,n,i){var r=this,o=this._currentDocumentResponse,a=function(){(i.length>0||r._providersChangedDuringRequest)&&!r._fetchDocumentSemanticTokens.isScheduled()&&r._fetchDocumentSemanticTokens.schedule(r._debounceInformation.get(r._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed)e&&t&&e.releaseDocumentSemanticTokens(t.resultId);else if(e&&n){if(!t)return this._model.tokenization.setSemanticTokens(null,!0),void a();if(mbe(t)){if(!o)return void this._model.tokenization.setSemanticTokens(null,!0);if(0===t.edits.length)t={resultId:t.resultId,data:o.data};else{var s=0,l=!0,u=!1,c=void 0;try{for(var d,h=t.edits[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;s+=(f.data?f.data.length:0)-f.deleteCount}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}for(var g=o.data,v=new Uint32Array(g.length+s),p=g.length,m=v.length,y=t.edits.length-1;y>=0;y--){var _=t.edits[y];if(_.start>g.length)return n.warnInvalidEditStart(o.resultId,t.resultId,y,_.start,g.length),void this._model.tokenization.setSemanticTokens(null,!0);var b=p-(_.start+_.deleteCount);b>0&&(Nbe._copy(g,p-b,v,m-b,b),m-=b),_.data&&(Nbe._copy(_.data,0,v,m-_.data.length,_.data.length),m-=_.data.length),p=_.start}p>0&&Nbe._copy(g,0,v,0,p),t={resultId:t.resultId,data:v}}}if(pbe(t)){this._currentDocumentResponse=new Rbe(e,t.resultId,t.data);var k=Vx(t,n,this._model.getLanguageId());if(i.length>0){var w=!0,C=!1,S=void 0;try{for(var x,L=i[Symbol.iterator]();!(w=(x=L.next()).done);w=!0){var D=x.value,N=!0,I=!1,E=void 0;try{for(var M,T=k[Symbol.iterator]();!(N=(M=T.next()).done);N=!0){var R=M.value,A=!0,P=!1,O=void 0;try{for(var F,W=D.changes[Symbol.iterator]();!(A=(F=W.next()).done);A=!0){var B=F.value;R.applyEdit(B.range,B.text)}}catch(e){P=!0,O=e}finally{try{A||null==W.return||W.return()}finally{if(P)throw O}}}}catch(e){I=!0,E=e}finally{try{N||null==T.return||T.return()}finally{if(I)throw E}}}}catch(e){C=!0,S=e}finally{try{w||null==L.return||L.return()}finally{if(C)throw S}}}this._model.tokenization.setSemanticTokens(k,!0)}else this._model.tokenization.setSemanticTokens(null,!0);a()}else this._model.tokenization.setSemanticTokens(null,!1)}}],[{key:"_copy",value:function(e,t,n,i,r){r=Math.min(r,n.length-i,e.length-t);for(var o=0;o<r;o++)n[i+o]=e[t+o]}}]),t}(Ru),Nbe=Pn,Pn.REQUEST_MIN_DELAY=300,Pn.REQUEST_MAX_DELAY=2e3,Pn);Tbe=Nbe=Ibe([Ebe(1,jx),Ebe(2,PS),Ebe(3,Ix),Ebe(4,wS)],Tbe);var Rbe=function(){function e(t,n,i){u(this,e),this.provider=t,this.resultId=n,this.data=i}return h(e,[{key:"dispose",value:function(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}]),e}();jY(Mbe);var Abe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Pbe=function(e,t){return function(n,i){t(n,i,e)}},Obe=(On=function(e){function t(e,n,i,r,o,a){var s;u(this,t),(s=l(this,t))._semanticTokensStylingService=n,s._themeService=i,s._configurationService=r,s._editor=e,s._provider=a.documentRangeSemanticTokensProvider,s._debounceInformation=o.for(s._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),s._tokenizeViewport=s._register(new Sg((function(){return s._tokenizeViewportNow()}),100)),s._outstandingRequests=[];var c=function(){s._editor.hasModel()&&s._tokenizeViewport.schedule(s._debounceInformation.get(s._editor.getModel()))};return s._register(s._editor.onDidScrollChange((function(){c()}))),s._register(s._editor.onDidChangeModel((function(){s._cancelAll(),c()}))),s._register(s._editor.onDidChangeModelContent((function(e){s._cancelAll(),c()}))),s._register(s._provider.onDidChange((function(){s._cancelAll(),c()}))),s._register(s._configurationService.onDidChangeConfiguration((function(e){e.affectsConfiguration(Lbe)&&(s._cancelAll(),c())}))),s._register(s._themeService.onDidColorThemeChange((function(){s._cancelAll(),c()}))),c(),s}return p(t,e),h(t,[{key:"_cancelAll",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this._outstandingRequests[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.cancel()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this._outstandingRequests=[]}},{key:"_removeOutstandingRequest",value:function(e){for(var t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e)return void this._outstandingRequests.splice(t,1)}},{key:"_tokenizeViewportNow",value:function(){var e=this;if(this._editor.hasModel()){var t=this._editor.getModel();if(!t.tokenization.hasCompleteSemanticTokens())if(Dbe(t,this._themeService,this._configurationService))if(function(e,t){return e.has(t)}(this._provider,t)){var n=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(n.map((function(n){return e._requestRange(t,n)})))}else t.tokenization.hasSomeSemanticTokens()&&t.tokenization.setSemanticTokens(null,!1);else t.tokenization.hasSomeSemanticTokens()&&t.tokenization.setSemanticTokens(null,!1)}}},{key:"_requestRange",value:function(e,t){var n=this,i=e.getVersionId(),r=hg((function(i){return Promise.resolve(Sbe(n._provider,e,t,i))})),o=new Hu(!1);return r.then((function(r){if(n._debounceInformation.update(e,o.elapsed()),r&&r.tokens&&!e.isDisposed()&&e.getVersionId()===i){var a=r.provider,s=r.tokens,l=n._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,Vx(s,l,e.getLanguageId()))}})).then((function(){return n._removeOutstandingRequest(r)}),(function(){return n._removeOutstandingRequest(r)})),r}}]),t}(Ru),On.ID="editor.contrib.viewportSemanticTokens",On);B_((Obe=Abe([Pbe(1,jx),Pbe(2,PS),Pbe(3,qb),Pbe(4,Ix),Pbe(5,wS)],Obe)).ID,Obe,1);var Fbe,Wbe=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];u(this,e),this.selectSubwords=t}return h(e,[{key:"provideSelectionRanges",value:function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=[];n.push(u),this.selectSubwords&&this._addInWordRanges(u,e,l),this._addWordRanges(u,e,l),this._addWhitespaceLine(u,e,l),u.push({range:e.getFullModelRange()})}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}},{key:"_addInWordRanges",value:function(e,t,n){var i=t.getWordAtPosition(n);if(i){for(var r=i.word,o=i.startColumn,a=n.column-o,s=a,l=a,u=0;s>=0;s--){var c=r.charCodeAt(s);if(s!==a&&(95===c||45===c))break;if(sf(c)&&lf(u))break;u=c}for(s+=1;l<r.length;l++){var d=r.charCodeAt(l);if(lf(d)&&sf(u))break;if(95===d||45===d)break;u=d}s<l&&e.push({range:new hd(n.lineNumber,o+s,n.lineNumber,o+l)})}}},{key:"_addWordRanges",value:function(e,t,n){var i=t.getWordAtPosition(n);i&&e.push({range:new hd(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn)})}},{key:"_addWhitespaceLine",value:function(e,t,n){t.getLineLength(n.lineNumber)>0&&0===t.getLineFirstNonWhitespaceColumn(n.lineNumber)&&0===t.getLineLastNonWhitespaceColumn(n.lineNumber)&&e.push({range:new hd(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}]),e}(),Bbe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Hbe=function(e,t){return function(n,i){t(n,i,e)}},Vbe=function(){function e(t,n){u(this,e),this.index=t,this.ranges=n}return h(e,[{key:"mov",value:function(t){var n=this.index+(t?1:-1);if(n<0||n>=this.ranges.length)return this;var i=new e(n,this.ranges);return i.ranges[n].equalsRange(this.ranges[this.index])?i.mov(t):i}}]),e}(),zbe=(Fn=function(){function e(t,n){u(this,e),this._editor=t,this._languageFeaturesService=n,this._ignoreSelection=!1}return h(e,[{key:"dispose",value:function(){var e;null===(e=this._selectionListener)||void 0===e||e.dispose()}},{key:"run",value:function(e){var t=this;return s((function(){var n,i,r;return E(this,(function(o){switch(o.label){case 0:return t._editor.hasModel()?(n=t._editor.getSelections(),i=t._editor.getModel(),t._state?[3,2]:[4,qbe(t._languageFeaturesService.selectionRangeProvider,i,n.map((function(e){return e.getPosition()})),t._editor.getOption(114),Uu.None).then((function(e){var i,r=function(t){e[t]=e[t].filter((function(e){return e.containsPosition(n[t].getStartPosition())&&e.containsPosition(n[t].getEndPosition())})),e[t].unshift(n[t])};if(ua(e)&&e.length===n.length&&t._editor.hasModel()&&ea(t._editor.getSelections(),n,(function(e,t){return e.equalsSelection(t)}))){for(var o=0;o<e.length;o++)r(o);t._state=e.map((function(e){return new Vbe(0,e)})),null===(i=t._selectionListener)||void 0===i||i.dispose(),t._selectionListener=t._editor.onDidChangeCursorPosition((function(){var e;t._ignoreSelection||(null===(e=t._selectionListener)||void 0===e||e.dispose(),t._state=void 0)}))}}))]):[2];case 1:o.sent(),o.label=2;case 2:if(!t._state)return[2];t._state=t._state.map((function(t){return t.mov(e)})),r=t._state.map((function(e){return fd.fromPositions(e.ranges[e.index].getStartPosition(),e.ranges[e.index].getEndPosition())})),t._ignoreSelection=!0;try{t._editor.setSelections(r)}finally{t._ignoreSelection=!1}return[2]}}))}))()}}],[{key:"get",value:function(e){return e.getContribution(Fbe.ID)}}]),e}(),Fbe=Fn,Fn.ID="editor.contrib.smartSelectController",Fn);zbe=Fbe=Bbe([Hbe(1,wS)],zbe);var Ube=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[n]))._forward=e,i}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=this;return s((function(){var e;return E(this,(function(i){switch(i.label){case 0:return(e=zbe.get(t))?[4,e.run(n._forward)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))()}}]),t}(M_),jbe=function(e){function t(){return u(this,t),l(this,t,[!0,{id:"editor.action.smartSelect.expand",label:Xa("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:p0.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:d_.MenubarSelectionMenu,group:"1_basic",title:Xa({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}}])}return p(t,e),t}(Ube);sy.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");var Kbe=function(e){function t(){return u(this,t),l(this,t,[!1,{id:"editor.action.smartSelect.shrink",label:Xa("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:p0.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:d_.MenubarSelectionMenu,group:"1_basic",title:Xa({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}}])}return p(t,e),t}(Ube);function qbe(e,t,n,i,r){return Gbe.apply(this,arguments)}function Gbe(){return Gbe=s((function(e,t,n,i,r){var o,a,s,l,u,c,d,h,f;return E(this,(function(g){switch(g.label){case 0:1===(o=e.all(t).concat(new Wbe(i.selectSubwords))).length&&o.unshift(new Yfe),a=[],s=[],l=!0,u=!1,c=void 0;try{for(d=o[Symbol.iterator]();!(l=(h=d.next()).done);l=!0)f=h.value,a.push(Promise.resolve(f.provideSelectionRanges(t,n,r)).then((function(e){if(ua(e)&&e.length===n.length)for(var t=0;t<n.length;t++){s[t]||(s[t]=[]);var i=!0,r=!1,o=void 0;try{for(var a,l=e[t][Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var u=a.value;hd.isIRange(u.range)&&hd.containsPosition(u.range,n[t])&&s[t].push(hd.lift(u.range))}}catch(e){r=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}}}),pu))}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}return[4,Promise.all(a)];case 1:return g.sent(),[2,s.map((function(e){if(0===e.length)return[];e.sort((function(e,t){return dd.isBefore(e.getStartPosition(),t.getStartPosition())?1:dd.isBefore(t.getStartPosition(),e.getStartPosition())||dd.isBefore(e.getEndPosition(),t.getEndPosition())?-1:dd.isBefore(t.getEndPosition(),e.getEndPosition())?1:0}));var n,r=[],o=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;(!n||hd.containsRange(c,n)&&!hd.equalsRange(c,n))&&(r.push(c),n=c)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}if(!i.selectLeadingAndTrailingWhitespace)return r;for(var d=[r[0]],h=1;h<r.length;h++){var f=r[h-1],g=r[h];if(g.startLineNumber!==f.startLineNumber||g.endLineNumber!==f.endLineNumber){var v=new hd(f.startLineNumber,t.getLineFirstNonWhitespaceColumn(f.startLineNumber),f.endLineNumber,t.getLineLastNonWhitespaceColumn(f.endLineNumber));v.containsRange(f)&&!v.equalsRange(f)&&g.containsRange(v)&&!g.equalsRange(v)&&d.push(v);var p=new hd(f.startLineNumber,1,f.endLineNumber,t.getLineMaxColumn(f.endLineNumber));p.containsRange(f)&&!p.equalsRange(v)&&g.containsRange(p)&&!g.equalsRange(p)&&d.push(p)}d.push(g)}return d}))]}}))})),Gbe.apply(this,arguments)}B_(zbe.ID,zbe,4),O_(jbe),O_(Kbe),sy.registerCommand("_executeSelectionRangeProvider",function(){var e=s((function(e){var t,n,i,r,o,a,s,l,u=arguments;return E(this,(function(c){switch(c.label){case 0:for(t=u.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=u[i];return r=C(n,2),o=r[0],a=r[1],Oa(ed.isUri(o)),s=e.get(wS).selectionRangeProvider,[4,e.get(Xm).createModelReference(o)];case 1:l=c.sent();try{return[2,qbe(s,l.object.textEditorModel,a,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},Uu.None)]}finally{l.dispose()}return[2]}}))}));return function(t){return e.apply(this,arguments)}}());var Zbe,Ybe,Qbe=Object.freeze({View:Ja("view","View"),Help:Ja("help","Help"),Test:Ja("test","Test"),File:Ja("file","File"),Preferences:Ja("preferences","Preferences"),Developer:Ja({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")}),Xbe=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;u(this,e),this.startLineNumbers=t,this.endLineNumbers=n,this.lastLineRelativePosition=i,this.showEndForLine=r}return h(e,[{key:"equals",value:function(e){return!!e&&this.lastLineRelativePosition===e.lastLineRelativePosition&&this.showEndForLine===e.showEndForLine&&ea(this.startLineNumbers,e.startLineNumbers)&&ea(this.endLineNumbers,e.endLineNumbers)}}],[{key:"Empty",get:function(){return new e([],[],0)}}]),e}(),$be=rb("stickyScrollViewLayer",{createHTML:function(e){return e}}),Jbe="data-sticky-line-index",eke="data-sticky-is-line",tke="data-sticky-is-folding-icon",nke=function(e){function t(e){var n;u(this,t),(n=l(this,t))._editor=e,n._foldingIconStore=new Tu,n._rootDomNode=document.createElement("div"),n._lineNumbersDomNode=document.createElement("div"),n._linesDomNodeScrollable=document.createElement("div"),n._linesDomNode=document.createElement("div"),n._lineHeight=n._editor.getOption(67),n._renderedStickyLines=[],n._lineNumbers=[],n._lastLineRelativePosition=0,n._minContentWidthInPx=0,n._isOnGlyphMargin=!1,n._lineNumbersDomNode.className="sticky-widget-line-numbers",n._lineNumbersDomNode.setAttribute("role","none"),n._linesDomNode.className="sticky-widget-lines",n._linesDomNode.setAttribute("role","list"),n._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",n._linesDomNodeScrollable.appendChild(n._linesDomNode),n._rootDomNode.className="sticky-widget",n._rootDomNode.classList.toggle("peek",e instanceof cae),n._rootDomNode.appendChild(n._lineNumbersDomNode),n._rootDomNode.appendChild(n._linesDomNodeScrollable);var i=function(){n._linesDomNode.style.left=n._editor.getOption(116).scrollWithEditor?"-".concat(n._editor.getScrollLeft(),"px"):"0px"};return n._register(n._editor.onDidChangeConfiguration((function(e){e.hasChanged(116)&&i(),e.hasChanged(67)&&(n._lineHeight=n._editor.getOption(67))}))),n._register(n._editor.onDidScrollChange((function(e){e.scrollLeftChanged&&i(),e.scrollWidthChanged&&n._updateWidgetWidth()}))),n._register(n._editor.onDidChangeModel((function(){i(),n._updateWidgetWidth()}))),n._register(n._foldingIconStore),i(),n._register(n._editor.onDidLayoutChange((function(e){n._updateWidgetWidth()}))),n._updateWidgetWidth(),n}return p(t,e),h(t,[{key:"lineNumbers",get:function(){return this._lineNumbers}},{key:"lineNumberCount",get:function(){return this._lineNumbers.length}},{key:"getRenderedStickyLine",value:function(e){return this._renderedStickyLines.find((function(t){return t.lineNumber===e}))}},{key:"getCurrentLines",value:function(){return this._lineNumbers}},{key:"setState",value:function(e,t,n){if(void 0!==n||!(!this._previousState&&!e||this._previousState&&this._previousState.equals(e))){var i=this._isWidgetHeightZero(e),r=i?void 0:e,o=i?0:this._findLineToRebuildWidgetFrom(e,n);this._renderRootNode(r,t,o),this._previousState=e}}},{key:"_isWidgetHeightZero",value:function(e){if(!e)return!0;var t=e.startLineNumbers.length*this._lineHeight+e.lastLineRelativePosition;if(t>0){this._lastLineRelativePosition=e.lastLineRelativePosition;var n=x(e.startLineNumbers);null!==e.showEndForLine&&(n[e.showEndForLine]=e.endLineNumbers[e.showEndForLine]),this._lineNumbers=n}else this._lastLineRelativePosition=0,this._lineNumbers=[];return 0===t}},{key:"_findLineToRebuildWidgetFrom",value:function(e,t){if(!e||!this._previousState)return 0;if(void 0!==t)return t;var n=this._previousState,i=e.startLineNumbers.findIndex((function(e){return!n.startLineNumbers.includes(e)}));return-1===i?0:i}},{key:"_updateWidgetWidth",value:function(){var e=this._editor.getLayoutInfo(),t=e.contentLeft;this._lineNumbersDomNode.style.width="".concat(t,"px"),this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth","".concat(this._editor.getScrollWidth()-e.verticalScrollbarWidth,"px")),this._rootDomNode.style.width="".concat(e.width-e.verticalScrollbarWidth,"px")}},{key:"_clearStickyLinesFromLine",value:function(e){this._foldingIconStore.clear();for(var t=e;t<this._renderedStickyLines.length;t++){var n=this._renderedStickyLines[t];n.lineNumberDomNode.remove(),n.lineDomNode.remove()}this._renderedStickyLines=this._renderedStickyLines.slice(0,e),this._rootDomNode.style.display="none"}},{key:"_useFoldingOpacityTransition",value:function(e){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition","opacity ".concat(e?.5:0,"s"))}},{key:"_setFoldingIconsVisibility",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._renderedStickyLines[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value.foldingIcon;a&&a.setVisible(!!e||a.isCollapsed)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"_renderRootNode",value:function(e,t,n){var i=this;return s((function(){var r,o,a,s,l,u,c,d,h,f,g,v,p,m,y,_,b,k,w;return E(this,(function(S){if(i._clearStickyLinesFromLine(n),!e)return[2];o=!0,a=!1,s=void 0;try{for(l=i._renderedStickyLines[Symbol.iterator]();!(o=(u=l.next()).done);o=!0)c=u.value,i._updateTopAndZIndexOfStickyLine(c)}catch(e){a=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}d=i._editor.getLayoutInfo(),h=i._lineNumbers.slice(n),f=!0,g=!1,v=void 0;try{for(p=h.entries()[Symbol.iterator]();!(f=(m=p.next()).done);f=!0)y=C(m.value,2),_=y[0],b=y[1],(k=i._renderChildNode(_+n,b,t,d))&&(i._linesDomNode.appendChild(k.lineDomNode),i._lineNumbersDomNode.appendChild(k.lineNumberDomNode),i._renderedStickyLines.push(k))}catch(e){g=!0,v=e}finally{try{f||null==p.return||p.return()}finally{if(g)throw v}}return t&&(i._setFoldingHoverListeners(),i._useFoldingOpacityTransition(!i._isOnGlyphMargin)),w=i._lineNumbers.length*i._lineHeight+i._lastLineRelativePosition,i._rootDomNode.style.display="block",i._lineNumbersDomNode.style.height="".concat(w,"px"),i._linesDomNodeScrollable.style.height="".concat(w,"px"),i._rootDomNode.style.height="".concat(w,"px"),i._rootDomNode.style.marginLeft="0px",i._minContentWidthInPx=(r=Math).max.apply(r,x(i._renderedStickyLines.map((function(e){return e.scrollWidth}))))+d.verticalScrollbarWidth,i._editor.layoutOverlayWidget(i),[2]}))}))()}},{key:"_setFoldingHoverListeners",value:function(){var e=this;"mouseover"===this._editor.getOption(111)&&(this._foldingIconStore.add(cp(this._lineNumbersDomNode,rm.MOUSE_ENTER,(function(){e._isOnGlyphMargin=!0,e._setFoldingIconsVisibility(!0)}))),this._foldingIconStore.add(cp(this._lineNumbersDomNode,rm.MOUSE_LEAVE,(function(){e._isOnGlyphMargin=!1,e._useFoldingOpacityTransition(!0),e._setFoldingIconsVisibility(!1)}))))}},{key:"_renderChildNode",value:function(e,t,n,i){var r=this._editor._getViewModel();if(r){var o,a=r.coordinatesConverter.convertModelPositionToViewPosition(new dd(t,1)).lineNumber,s=r.getViewLineRenderingData(a),l=this._editor.getOption(68);try{o=CQ.filter(s.inlineDecorations,a,s.minColumn,s.maxColumn)}catch(e){o=[]}var u,c=new IQ(!0,!0,s.content,s.continuesWithWrappedLine,s.isBasicASCII,s.containsRTL,0,s.tokens,o,s.tabSize,s.startVisibleColumn,1,1,1,500,"none",!0,!0,null),d=new Tb(2e3),h=RQ(c,d);u=$be?$be.createHTML(d.build()):d.build();var f=document.createElement("span");f.setAttribute(Jbe,String(e)),f.setAttribute(eke,""),f.setAttribute("role","listitem"),f.tabIndex=0,f.className="sticky-line-content",f.classList.add("stickyLine".concat(t)),f.style.lineHeight="".concat(this._lineHeight,"px"),f.innerHTML=u;var g=document.createElement("span");g.setAttribute(Jbe,String(e)),g.setAttribute("data-sticky-is-line-number",""),g.className="sticky-line-number",g.style.lineHeight="".concat(this._lineHeight,"px");var v=i.contentLeft;g.style.width="".concat(v,"px");var p=document.createElement("span");1===l.renderType||3===l.renderType&&t%10==0?p.innerText=t.toString():2===l.renderType&&(p.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),p.className="sticky-line-number-inner",p.style.lineHeight="".concat(this._lineHeight,"px"),p.style.width="".concat(i.lineNumbersWidth,"px"),p.style.paddingLeft="".concat(i.lineNumbersLeft,"px"),g.appendChild(p);var m=this._renderFoldingIconForLine(n,t);m&&g.appendChild(m.domNode),this._editor.applyFontInfo(f),this._editor.applyFontInfo(p),g.style.lineHeight="".concat(this._lineHeight,"px"),f.style.lineHeight="".concat(this._lineHeight,"px"),g.style.height="".concat(this._lineHeight,"px"),f.style.height="".concat(this._lineHeight,"px");var y=new ike(e,t,f,g,m,h.characterMapping,f.scrollWidth);return this._updateTopAndZIndexOfStickyLine(y)}}},{key:"_updateTopAndZIndexOfStickyLine",value:function(e){var t,n=e.index,i=e.lineDomNode,r=e.lineNumberDomNode,o=n===this._lineNumbers.length-1;i.style.zIndex=o?"0":"1",r.style.zIndex=o?"0":"1";var a="".concat(n*this._lineHeight+this._lastLineRelativePosition+((null===(t=e.foldingIcon)||void 0===t?void 0:t.isCollapsed)?1:0),"px"),s="".concat(n*this._lineHeight,"px");return i.style.top=o?a:s,r.style.top=o?a:s,e}},{key:"_renderFoldingIconForLine",value:function(e,t){var n=this._editor.getOption(111);if(e&&"never"!==n){var i=e.regions,r=i.findRange(t),o=i.getStartLineNumber(r);if(t===o){var a=i.isCollapsed(r),s=new rke(a,o,i.getEndLineNumber(r),this._lineHeight);return s.setVisible(!!this._isOnGlyphMargin||(a||"always"===n)),s.domNode.setAttribute(tke,""),s}}}},{key:"getId",value:function(){return"editor.contrib.stickyScrollWidget"}},{key:"getDomNode",value:function(){return this._rootDomNode}},{key:"getPosition",value:function(){return{preference:2,stackOridinal:10}}},{key:"getMinContentWidthInPx",value:function(){return this._minContentWidthInPx}},{key:"focusLineWithIndex",value:function(e){0<=e&&e<this._renderedStickyLines.length&&this._renderedStickyLines[e].lineDomNode.focus()}},{key:"getEditorPositionFromNode",value:function(e){if(!e||e.children.length>0)return null;var t=this._getRenderedStickyLineFromChildDomNode(e);if(!t)return null;var n=y$(t.characterMapping,e,0);return new dd(t.lineNumber,n)}},{key:"getLineNumberFromChildDomNode",value:function(e){var t,n;return null!==(n=null===(t=this._getRenderedStickyLineFromChildDomNode(e))||void 0===t?void 0:t.lineNumber)&&void 0!==n?n:null}},{key:"_getRenderedStickyLineFromChildDomNode",value:function(e){var t=this.getLineIndexFromChildDomNode(e);return null===t||t<0||t>=this._renderedStickyLines.length?null:this._renderedStickyLines[t]}},{key:"getLineIndexFromChildDomNode",value:function(e){var t=this._getAttributeValue(e,Jbe);return t?parseInt(t,10):null}},{key:"isInStickyLine",value:function(e){return void 0!==this._getAttributeValue(e,eke)}},{key:"isInFoldingIconDomNode",value:function(e){return void 0!==this._getAttributeValue(e,tke)}},{key:"_getAttributeValue",value:function(e,t){for(;e&&e!==this._rootDomNode;){var n=e.getAttribute(t);if(null!==n)return n;e=e.parentElement}}}]),t}(Ru),ike=function e(t,n,i,r,o,a,s){u(this,e),this.index=t,this.lineNumber=n,this.lineDomNode=i,this.lineNumberDomNode=r,this.foldingIcon=o,this.characterMapping=a,this.scrollWidth=s},rke=function(){function e(t,n,i,r){u(this,e),this.isCollapsed=t,this.foldingStartLine=n,this.foldingEndLine=i,this.dimension=r,this.domNode=document.createElement("div"),this.domNode.style.width="".concat(r,"px"),this.domNode.style.height="".concat(r,"px"),this.domNode.className=ny.asClassName(t?ade:ode)}return h(e,[{key:"setVisible",value:function(e){this.domNode.style.cursor=e?"pointer":"default",this.domNode.style.opacity=e?"1":"0"}}]),e}(),oke=function e(t,n){u(this,e),this.startLineNumber=t,this.endLineNumber=n},ake=function e(t,n,i){u(this,e),this.range=t,this.children=n,this.parent=i},ske=function e(t,n,i,r){u(this,e),this.uri=t,this.version=n,this.element=i,this.outlineProviderId=r},lke=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},uke=function(e,t){return function(n,i){t(n,i,e)}};!function(e){e.OUTLINE_MODEL="outlineModel",e.FOLDING_PROVIDER_MODEL="foldingProviderModel",e.INDENTATION_MODEL="indentationModel"}(Zbe||(Zbe={})),function(e){e[e.VALID=0]="VALID",e[e.INVALID=1]="INVALID",e[e.CANCELED=2]="CANCELED"}(Ybe||(Ybe={}));var cke=function(e){function t(e,n,i,r){var o;switch(u(this,t),(o=l(this,t))._editor=e,o._modelProviders=[],o._modelPromise=null,o._updateScheduler=o._register(new vg(300)),o._updateOperation=o._register(new Tu),o._editor.getOption(116).defaultModel){case Zbe.OUTLINE_MODEL:o._modelProviders.push(new hke(o._editor,r));case Zbe.FOLDING_PROVIDER_MODEL:o._modelProviders.push(new vke(o._editor,n,r));case Zbe.INDENTATION_MODEL:o._modelProviders.push(new gke(o._editor,i))}return o}return p(t,e),h(t,[{key:"dispose",value:function(){this._modelProviders.forEach((function(e){return e.dispose()})),this._updateOperation.clear(),this._cancelModelPromise(),g(v(t.prototype),"dispose",this).call(this)}},{key:"_cancelModelPromise",value:function(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}},{key:"update",value:function(e){var t=this;return s((function(){return E(this,(function(n){switch(n.label){case 0:return t._updateOperation.clear(),t._updateOperation.add({dispose:function(){t._cancelModelPromise(),t._updateScheduler.cancel()}}),t._cancelModelPromise(),[4,t._updateScheduler.trigger(s((function(){var n,i,r,o,a,s,l,u,c,d,h;return E(this,(function(f){switch(f.label){case 0:n=!0,i=!1,r=void 0,f.label=1;case 1:f.trys.push([1,6,7,8]),o=t._modelProviders[Symbol.iterator](),f.label=2;case 2:return(n=(a=o.next()).done)?[3,5]:(s=a.value,l=s.computeStickyModel(e),u=l.statusPromise,c=l.modelPromise,t._modelPromise=c,[4,u]);case 3:if(d=f.sent(),t._modelPromise!==c)return[2,null];switch(d){case Ybe.CANCELED:return t._updateOperation.clear(),[2,null];case Ybe.VALID:return[2,s.stickyModel]}f.label=4;case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return h=f.sent(),i=!0,r=h,[3,8];case 7:try{n||null==o.return||o.return()}finally{if(i)throw r}return[7];case 8:return[2,null]}}))}))).catch((function(e){return vu(e),null}))];case 1:return[2,n.sent()]}}))}))()}}]),t}(Ru);cke=lke([uke(2,Gm),uke(3,wS)],cke);var dke=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._editor=e,n._stickyModel=null,n}return p(t,e),h(t,[{key:"stickyModel",get:function(){return this._stickyModel}},{key:"_invalid",value:function(){return this._stickyModel=null,Ybe.INVALID}},{key:"computeStickyModel",value:function(e){var t=this;if(e.isCancellationRequested||!this.isProviderValid())return{statusPromise:this._invalid(),modelPromise:null};var n=hg((function(e){return t.createModelFromProvider(e)}));return{statusPromise:n.then((function(n){return t.isModelValid(n)?e.isCancellationRequested?Ybe.CANCELED:(t._stickyModel=t.createStickyModel(e,n),Ybe.VALID):t._invalid()})).then(void 0,(function(e){return vu(e),Ybe.CANCELED})),modelPromise:n}}},{key:"isModelValid",value:function(e){return!0}},{key:"isProviderValid",value:function(){return!0}}]),t}(Ru),hke=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[e]))._languageFeaturesService=n,i}return p(t,e),h(t,[{key:"createModelFromProvider",value:function(e){return rhe.create(this._languageFeaturesService.documentSymbolProvider,this._editor.getModel(),e)}},{key:"createStickyModel",value:function(e,t){var n,i=this._stickyModelFromOutlineModel(t,null===(n=this._stickyModel)||void 0===n?void 0:n.outlineProviderId),r=i.stickyOutlineElement,o=i.providerID,a=this._editor.getModel();return new ske(a.uri,a.getVersionId(),r,o)}},{key:"isModelValid",value:function(e){return e&&e.children.size>0}},{key:"_stickyModelFromOutlineModel",value:function(e,t){var n,i=this;if(Ts.first(e.children.values())instanceof ihe){var r=Ts.find(e.children.values(),(function(e){return e.id===t}));if(r)n=r.children;else{var o="",a=-1,s=void 0,l=!0,u=!1,c=void 0;try{for(var d,h=e.children.entries()[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=C(d.value,2),g=(f[0],f[1]),v=this._findSumOfRangesOfGroup(g);v>a&&(s=g,a=v,o=g.id)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}t=o,n=s.children}}else n=e.children;var p=[],m=Array.from(n.values()).sort((function(e,t){var n=new oke(e.symbol.range.startLineNumber,e.symbol.range.endLineNumber),r=new oke(t.symbol.range.startLineNumber,t.symbol.range.endLineNumber);return i._comparator(n,r)})),y=!0,_=!1,b=void 0;try{for(var k,w=m[Symbol.iterator]();!(y=(k=w.next()).done);y=!0){var S=k.value;p.push(this._stickyModelFromOutlineElement(S,S.symbol.selectionRange.startLineNumber))}}catch(e){_=!0,b=e}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}return{stickyOutlineElement:new ake(void 0,p,void 0),providerID:t}}},{key:"_stickyModelFromOutlineElement",value:function(e,t){var n=this,i=[],r=!0,o=!1,a=void 0;try{for(var s,l=e.children.values()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;if(u.symbol.selectionRange.startLineNumber!==u.symbol.range.endLineNumber)if(u.symbol.selectionRange.startLineNumber!==t)i.push(this._stickyModelFromOutlineElement(u,u.symbol.selectionRange.startLineNumber));else{var c=!0,d=!1,h=void 0;try{for(var f,g=u.children.values()[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;i.push(this._stickyModelFromOutlineElement(v,u.symbol.selectionRange.startLineNumber))}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}}}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}i.sort((function(e,t){return n._comparator(e.range,t.range)}));var p=new oke(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber);return new ake(p,i,void 0)}},{key:"_comparator",value:function(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}},{key:"_findSumOfRangesOfGroup",value:function(e){var t=0,n=!0,i=!1,r=void 0;try{for(var o,a=e.children.values()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t+=this._findSumOfRangesOfGroup(s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return e instanceof nhe?t+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:t}}]),t}(dke);hke=lke([uke(1,wS)],hke);var fke=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._foldingLimitReporter=new kde(e),n}return p(t,e),h(t,[{key:"createStickyModel",value:function(e,t){var n=this._fromFoldingRegions(t),i=this._editor.getModel();return new ske(i.uri,i.getVersionId(),n,void 0)}},{key:"isModelValid",value:function(e){return null!==e}},{key:"_fromFoldingRegions",value:function(e){for(var t=e.length,n=[],i=new ake(void 0,[],void 0),r=0;r<t;r++){var o=e.getParentIndex(r),a=void 0;a=-1!==o?n[o]:i;var s=new ake(new oke(e.getStartLineNumber(r),e.getEndLineNumber(r)+1),[],a);a.children.push(s),n.push(s)}return i}}]),t}(dke),gke=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[e]))._languageConfigurationService=n,i.provider=i._register(new tde(e.getModel(),i._languageConfigurationService,i._foldingLimitReporter)),i}return p(t,e),h(t,[{key:"createModelFromProvider",value:function(e){var t=this;return s((function(){return E(this,(function(n){return[2,t.provider.compute(e)]}))}))()}}]),t}(fke);gke=lke([uke(1,Ek)],gke);var vke=function(e){function t(e,n,i){var r;u(this,t),(r=l(this,t,[e]))._languageFeaturesService=i;var o=bde.getFoldingRangeProviders(r._languageFeaturesService,e.getModel());return o.length>0&&(r.provider=r._register(new gde(e.getModel(),o,n,r._foldingLimitReporter,void 0))),r}return p(t,e),h(t,[{key:"isProviderValid",value:function(){return void 0!==this.provider}},{key:"createModelFromProvider",value:function(e){var t=this;return s((function(){var n,i;return E(this,(function(r){return[2,null!==(i=null===(n=t.provider)||void 0===n?void 0:n.compute(e))&&void 0!==i?i:null]}))}))()}}]),t}(fke);vke=lke([uke(2,wS)],vke);var pke=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},mke=function(e,t){return function(n,i){t(n,i,e)}},yke=function e(t,n,i){u(this,e),this.startLineNumber=t,this.endLineNumber=n,this.nestingDepth=i},_ke=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._languageFeaturesService=n,r._languageConfigurationService=i,r._onDidChangeStickyScroll=r._register(new Zu),r.onDidChangeStickyScroll=r._onDidChangeStickyScroll.event,r._model=null,r._cts=null,r._stickyModelProvider=null,r._editor=e,r._sessionStore=r._register(new Tu),r._updateSoon=r._register(new Sg((function(){return r.update()}),50)),r._register(r._editor.onDidChangeConfiguration((function(e){e.hasChanged(116)&&r.readConfiguration()}))),r.readConfiguration(),r}return p(t,e),h(t,[{key:"readConfiguration",value:function(){var e=this;this._sessionStore.clear(),this._editor.getOption(116).enabled&&(this._sessionStore.add(this._editor.onDidChangeModel((function(){e._model=null,e.updateStickyModelProvider(),e._onDidChangeStickyScroll.fire(),e.update()}))),this._sessionStore.add(this._editor.onDidChangeHiddenAreas((function(){return e.update()}))),this._sessionStore.add(this._editor.onDidChangeModelContent((function(){return e._updateSoon.schedule()}))),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange((function(){return e.update()}))),this._sessionStore.add(Mu((function(){var t;null===(t=e._stickyModelProvider)||void 0===t||t.dispose(),e._stickyModelProvider=null}))),this.updateStickyModelProvider(),this.update())}},{key:"getVersionId",value:function(){var e;return null===(e=this._model)||void 0===e?void 0:e.version}},{key:"updateStickyModelProvider",value:function(){var e,t=this;null===(e=this._stickyModelProvider)||void 0===e||e.dispose(),this._stickyModelProvider=null;var n=this._editor;n.hasModel()&&(this._stickyModelProvider=new cke(n,(function(){return t._updateSoon.schedule()}),this._languageConfigurationService,this._languageFeaturesService))}},{key:"update",value:function(){var e=this;return s((function(){var t;return E(this,(function(n){switch(n.label){case 0:return null===(t=e._cts)||void 0===t||t.dispose(!0),e._cts=new rc,[4,e.updateStickyModel(e._cts.token)];case 1:return n.sent(),e._onDidChangeStickyScroll.fire(),[2]}}))}))()}},{key:"updateStickyModel",value:function(e){var t=this;return s((function(){var n;return E(this,(function(i){switch(i.label){case 0:return t._editor.hasModel()&&t._stickyModelProvider&&!t._editor.getModel().isTooLargeForTokenization()?[4,t._stickyModelProvider.update(e)]:(t._model=null,[2]);case 1:return n=i.sent(),e.isCancellationRequested?[2]:(t._model=n,[2])}}))}))()}},{key:"updateIndex",value:function(e){return-1===e?e=0:e<0&&(e=-e-2),e}},{key:"getCandidateStickyLinesIntersectingFromStickyModel",value:function(e,t,n,i,r){if(0!==t.children.length){for(var o=r,a=[],s=0;s<t.children.length;s++){var l=t.children[s];l.range&&a.push(l.range.startLineNumber)}for(var u=this.updateIndex(ta(a,e.startLineNumber,(function(e,t){return e-t}))),c=this.updateIndex(ta(a,e.startLineNumber+i,(function(e,t){return e-t}))),d=u;d<=c;d++){var h=t.children[d];if(!h)return;if(h.range){var f=h.range.startLineNumber,g=h.range.endLineNumber;e.startLineNumber<=g+1&&f-1<=e.endLineNumber&&f!==o&&(o=f,n.push(new yke(f,g-1,i+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,h,n,i+1,f))}else this.getCandidateStickyLinesIntersectingFromStickyModel(e,h,n,i,r)}}}},{key:"getCandidateStickyLinesIntersecting",value:function(e){var t,n;if(!(null===(t=this._model)||void 0===t?void 0:t.element))return[];var i=[];this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,i,0,-1);var r=null===(n=this._editor._getViewModel())||void 0===n?void 0:n.getHiddenAreas();if(r){var o=!0,a=!1,s=void 0;try{for(var l,u=function(){var e=l.value;i=i.filter((function(t){return!(t.startLineNumber>=e.startLineNumber&&t.endLineNumber<=e.endLineNumber+1)}))},c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0)u()}catch(e){a=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}}return i}}]),t}(Ru);_ke=pke([mke(1,wS),mke(2,Ek)],_ke);var bke,kke=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},wke=function(e,t){return function(n,i){t(n,i,e)}},Cke=(Wn=function(e){function t(e,n,i,r,o,a,c){var d,h;u(this,t),d=l(this,t),h=d,d._editor=e,d._contextMenuService=n,d._languageFeaturesService=i,d._instaService=r,d._contextKeyService=c,d._sessionStore=new Tu,d._maxStickyLines=Number.MAX_SAFE_INTEGER,d._candidateDefinitionsLength=-1,d._focusedStickyElementIndex=-1,d._enabled=!1,d._focused=!1,d._positionRevealed=!1,d._onMouseDown=!1,d._endLineNumbers=[],d._stickyScrollWidget=new nke(d._editor),d._stickyLineCandidateProvider=new _ke(d._editor,i,o),d._register(d._stickyScrollWidget),d._register(d._stickyLineCandidateProvider),d._widgetState=Xbe.Empty,d._onDidResize(),d._readConfiguration();var f=d._stickyScrollWidget.getDomNode();d._register(d._editor.onDidChangeConfiguration((function(e){d._readConfigurationChange(e)}))),d._register(cp(f,rm.CONTEXT_MENU,function(){var e=s((function(e){return E(this,(function(t){return h._onContextMenu(ep(f),e),[2]}))}));return function(t){return e.apply(this,arguments)}}())),d._stickyScrollFocusedContextKey=p0.stickyScrollFocused.bindTo(d._contextKeyService),d._stickyScrollVisibleContextKey=p0.stickyScrollVisible.bindTo(d._contextKeyService);var g=d._register(sm(f));return d._register(g.onDidBlur((function(e){!1===d._positionRevealed&&0===f.clientHeight?(d._focusedStickyElementIndex=-1,d.focus()):d._disposeFocusStickyScrollStore()}))),d._register(g.onDidFocus((function(e){d.focus()}))),d._registerMouseListeners(),d._register(cp(f,rm.MOUSE_DOWN,(function(e){d._onMouseDown=!0}))),d}return p(t,e),h(t,[{key:"_disposeFocusStickyScrollStore",value:function(){var e;this._stickyScrollFocusedContextKey.set(!1),null===(e=this._focusDisposableStore)||void 0===e||e.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}},{key:"focus",value:function(){if(this._onMouseDown)return this._onMouseDown=!1,void this._editor.focus();var e=this._stickyScrollFocusedContextKey.get();!0!==e&&(this._focused=!0,this._focusDisposableStore=new Tu,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}},{key:"focusNext",value:function(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}},{key:"focusPrevious",value:function(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}},{key:"selectEditor",value:function(){this._editor.focus()}},{key:"_focusNav",value:function(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}},{key:"goToFocused",value:function(){var e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}},{key:"_revealPosition",value:function(e){var t=this;this._reveaInEditor(e,(function(){return t._editor.revealPosition(e)}))}},{key:"_revealLineInCenterIfOutsideViewport",value:function(e){var t=this;this._reveaInEditor(e,(function(){return t._editor.revealLineInCenterIfOutsideViewport(e.lineNumber,0)}))}},{key:"_reveaInEditor",value:function(e,t){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,t(),this._editor.setSelection(hd.fromPositions(e)),this._editor.focus()}},{key:"_registerMouseListeners",value:function(){var e=this,t=this._register(new Tu),n=this._register(new rae(this._editor,{extractLineNumberFromMouseEvent:function(t){var n=e._stickyScrollWidget.getEditorPositionFromNode(t.target.element);return n?n.lineNumber:0}})),i=this._stickyScrollWidget.getDomNode();this._register(hp(i,rm.CLICK,(function(t){if(!(t.ctrlKey||t.altKey||t.metaKey)&&t.leftButton)if(t.shiftKey){var n=e._stickyScrollWidget.getLineIndexFromChildDomNode(t.target);if(null===n)return;var i=new dd(e._endLineNumbers[n],1);e._revealLineInCenterIfOutsideViewport(i)}else{if(e._stickyScrollWidget.isInFoldingIconDomNode(t.target)){var r=e._stickyScrollWidget.getLineNumberFromChildDomNode(t.target);e._toggleFoldingRegionForLine(r)}else{if(e._stickyScrollWidget.isInStickyLine(t.target)){var o=e._stickyScrollWidget.getEditorPositionFromNode(t.target);if(!o){var a=e._stickyScrollWidget.getLineNumberFromChildDomNode(t.target);if(null===a)return;o=new dd(a,1)}e._revealPosition(o)}}}}))),this._register(hp(i,rm.MOUSE_MOVE,(function(t){if(t.shiftKey){var n=e._stickyScrollWidget.getLineIndexFromChildDomNode(t.target);if(null===n||null!==e._showEndForLine&&e._showEndForLine===n)return;return e._showEndForLine=n,void e._renderStickyScroll()}void 0!==e._showEndForLine&&(e._showEndForLine=void 0,e._renderStickyScroll())}))),this._register(cp(i,rm.MOUSE_LEAVE,(function(t){void 0!==e._showEndForLine&&(e._showEndForLine=void 0,e._renderStickyScroll())}))),this._register(n.onMouseMoveOrRelevantKeyDown((function(n){var i=C(n,2),r=i[0],o=(i[1],function(t){if(!e._editor.hasModel())return null;if(12!==t.target.type||t.target.detail!==e._stickyScrollWidget.getId())return null;var n=t.target.element;if(!n||n.innerText!==n.innerHTML)return null;var i=e._stickyScrollWidget.getEditorPositionFromNode(n);return i?{range:new hd(i.lineNumber,i.column,i.lineNumber,i.column+n.innerText.length),textElement:n}:null}(r));if(o&&r.hasTriggerModifier&&e._editor.hasModel()){var a=o.range,s=o.textElement;if(a.equalsRange(e._stickyRangeProjectedOnEditor)){if("underline"===s.style.textDecoration)return}else e._stickyRangeProjectedOnEditor=a,t.clear();var l,u=new rc;t.add(Mu((function(){return u.dispose(!0)}))),fse(e._languageFeaturesService.definitionProvider,e._editor.getModel(),new dd(a.startLineNumber,a.startColumn+1),!1,u.token).then((function(n){if(!u.token.isCancellationRequested)if(0!==n.length){e._candidateDefinitionsLength=n.length;var i=s;l!==i?(t.clear(),(l=i).style.textDecoration="underline",t.add(Mu((function(){l.style.textDecoration="none"})))):l||((l=i).style.textDecoration="underline",t.add(Mu((function(){l.style.textDecoration="none"}))))}else t.clear()}))}else t.clear()}))),this._register(n.onCancel((function(){t.clear()})));var r=this;this._register(n.onExecute(function(){var e=s((function(e){var t;return E(this,(function(n){return 12!==e.target.type||e.target.detail!==r._stickyScrollWidget.getId()?[2]:(t=r._stickyScrollWidget.getEditorPositionFromNode(e.target.element))&&r._editor.hasModel()&&r._stickyRangeProjectedOnEditor?(r._candidateDefinitionsLength>1&&(r._focused&&r._disposeFocusStickyScrollStore(),r._revealPosition({lineNumber:t.lineNumber,column:1})),r._instaService.invokeFunction(Ese,e,r._editor,{uri:r._editor.getModel().uri,range:r._stickyRangeProjectedOnEditor}),[2]):[2]}))}));return function(t){return e.apply(this,arguments)}}()))}},{key:"_onContextMenu",value:function(e,t){var n=new lg(e,t);this._contextMenuService.showContextMenu({menuId:d_.StickyScrollContext,getAnchor:function(){return n}})}},{key:"_toggleFoldingRegionForLine",value:function(e){if(this._foldingModel&&null!==e){var t=this._stickyScrollWidget.getRenderedStickyLine(e),n=null==t?void 0:t.foldingIcon;if(n){Gce(this._foldingModel,Number.MAX_VALUE,[e]),n.isCollapsed=!n.isCollapsed;var i=(n.isCollapsed?this._editor.getTopForLineNumber(n.foldingEndLine):this._editor.getTopForLineNumber(n.foldingStartLine))-this._editor.getOption(67)*t.index+1;this._editor.setScrollTop(i),this._renderStickyScroll(e)}}}},{key:"_readConfiguration",value:function(){var e=this,t=this._editor.getOption(116);if(!1===t.enabled)return this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),void(this._enabled=!1);t.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange((function(t){t.scrollTopChanged&&(e._showEndForLine=void 0,e._renderStickyScroll())}))),this._sessionStore.add(this._editor.onDidLayoutChange((function(){return e._onDidResize()}))),this._sessionStore.add(this._editor.onDidChangeModelTokens((function(t){return e._onTokensChange(t)}))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll((function(){e._showEndForLine=void 0,e._renderStickyScroll()}))),this._enabled=!0),2===this._editor.getOption(68).renderType&&this._sessionStore.add(this._editor.onDidChangeCursorPosition((function(){e._showEndForLine=void 0,e._renderStickyScroll(0)})))}},{key:"_readConfigurationChange",value:function(e){(e.hasChanged(116)||e.hasChanged(73)||e.hasChanged(67)||e.hasChanged(111)||e.hasChanged(68))&&this._readConfiguration(),e.hasChanged(68)&&this._renderStickyScroll(0)}},{key:"_needsUpdate",value:function(e){var t=this._stickyScrollWidget.getCurrentLines(),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=!0,u=!1,c=void 0;try{for(var d,h=e.ranges[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;if(s>=f.fromLineNumber&&s<=f.toLineNumber)return!0}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return!1}},{key:"_onTokensChange",value:function(e){this._needsUpdate(e)&&this._renderStickyScroll(0)}},{key:"_onDidResize",value:function(){var e=this._editor.getLayoutInfo(),t=e.height/this._editor.getOption(67);this._maxStickyLines=Math.round(.25*t)}},{key:"_renderStickyScroll",value:function(e){var t=this;return s((function(){var n,i,r,o;return E(this,(function(a){switch(a.label){case 0:return!(n=t._editor.getModel())||n.isTooLargeForTokenization()?(t._resetState(),[2]):(i=t._updateAndGetMinRebuildFromLine(e),r=t._stickyLineCandidateProvider.getVersionId(),void 0===r||r===n.getVersionId()?t._focused?[3,2]:[4,t._updateState(i)]:[3,6]);case 1:return a.sent(),[3,6];case 2:return-1!==t._focusedStickyElementIndex?[3,4]:[4,t._updateState(i)];case 3:return a.sent(),t._focusedStickyElementIndex=t._stickyScrollWidget.lineNumberCount-1,-1!==t._focusedStickyElementIndex&&t._stickyScrollWidget.focusLineWithIndex(t._focusedStickyElementIndex),[3,6];case 4:return o=t._stickyScrollWidget.lineNumbers[t._focusedStickyElementIndex],[4,t._updateState(i)];case 5:a.sent(),0===t._stickyScrollWidget.lineNumberCount?t._focusedStickyElementIndex=-1:(t._stickyScrollWidget.lineNumbers.includes(o)||(t._focusedStickyElementIndex=t._stickyScrollWidget.lineNumberCount-1),t._stickyScrollWidget.focusLineWithIndex(t._focusedStickyElementIndex)),a.label=6;case 6:return[2]}}))}))()}},{key:"_updateAndGetMinRebuildFromLine",value:function(e){if(void 0!==e){var t=void 0!==this._minRebuildFromLine?this._minRebuildFromLine:1/0;this._minRebuildFromLine=Math.min(e,t)}return this._minRebuildFromLine}},{key:"_updateState",value:function(e){var t=this;return s((function(){var n,i,r;return E(this,(function(o){switch(o.label){case 0:return t._minRebuildFromLine=void 0,[4,null===(n=bde.get(t._editor))||void 0===n?void 0:n.getFoldingModel()];case 1:return t._foldingModel=null!==(i=o.sent())&&void 0!==i?i:void 0,t._widgetState=t.findScrollWidgetState(),r=t._widgetState.startLineNumbers.length>0,t._stickyScrollVisibleContextKey.set(r),t._stickyScrollWidget.setState(t._widgetState,t._foldingModel,e),[2]}}))}))()}},{key:"_resetState",value:function(){var e=this;return s((function(){return E(this,(function(t){return e._minRebuildFromLine=void 0,e._foldingModel=void 0,e._widgetState=Xbe.Empty,e._stickyScrollVisibleContextKey.set(!1),e._stickyScrollWidget.setState(void 0,void 0),[2]}))}))()}},{key:"findScrollWidgetState",value:function(){var e=this._editor.getOption(67),t=Math.min(this._maxStickyLines,this._editor.getOption(116).maxLineCount),n=this._editor.getScrollTop(),i=0,r=[],o=[],a=this._editor.getVisibleRanges();if(0!==a.length){var s=new oke(a[0].startLineNumber,a[a.length-1].endLineNumber),l=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(s),u=!0,c=!1,d=void 0;try{for(var h,f=l[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value,v=g.startLineNumber,p=g.endLineNumber,m=g.nestingDepth;if(p-v>0){var y=(m-1)*e,_=m*e,b=this._editor.getBottomForLineNumber(v)-n,k=this._editor.getTopForLineNumber(p)-n,w=this._editor.getBottomForLineNumber(p)-n;if(y>k&&y<=w){r.push(v),o.push(p+1),i=w-_;break}if(_>b&&_<=w&&(r.push(v),o.push(p+1)),r.length===t)break}}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}return this._endLineNumbers=o,new Xbe(r,o,i,this._showEndForLine)}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this._sessionStore.dispose()}}],[{key:"get",value:function(e){return e.getContribution(bke.ID)}}]),t}(Ru),bke=Wn,Wn.ID="store.contrib.stickyScrollController",Wn);Cke=bke=kke([wke(1,GI),wke(2,wS),wke(3,Gm),wke(4,Ek),wke(5,Ix),wke(6,Ky)],Cke);var Ske=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.toggleStickyScroll",title:b(_({},Ja("toggleEditorStickyScroll","Toggle Editor Sticky Scroll")),{mnemonicTitle:Xa({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Editor Sticky Scroll")}),metadata:{description:Ja("toggleEditorStickyScroll.description","Toggle/enable the editor sticky scroll which shows the nested scopes at the top of the viewport")},category:Qbe.View,toggled:{condition:Sy.equals("config.editor.stickyScroll.enabled",!0),title:Xa("stickyScroll","Sticky Scroll"),mnemonicTitle:Xa({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:d_.CommandPalette},{id:d_.MenubarAppearanceMenu,group:"4_editor",order:3},{id:d_.StickyScrollContext}]}])}return p(t,e),h(t,[{key:"run",value:function(e){return s((function(){var t,n;return E(this,(function(i){return t=e.get(qb),n=!t.getValue("editor.stickyScroll.enabled"),[2,t.updateValue("editor.stickyScroll.enabled",n)]}))}))()}}]),t}(m_),xke=100,Lke=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.focusStickyScroll",title:b(_({},Ja("focusStickyScroll","Focus on the editor sticky scroll")),{mnemonicTitle:Xa({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll")}),precondition:Sy.and(Sy.has("config.editor.stickyScroll.enabled"),p0.stickyScrollVisible),menu:[{id:d_.CommandPalette}]}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t){var n;null===(n=Cke.get(t))||void 0===n||n.focus()}}]),t}(R_),Dke=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.selectNextStickyScrollLine",title:Ja("selectNextStickyScrollLine.title","Select the next editor sticky scroll line"),precondition:p0.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:xke,primary:18}}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t){var n;null===(n=Cke.get(t))||void 0===n||n.focusNext()}}]),t}(R_),Nke=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.selectPreviousStickyScrollLine",title:Ja("selectPreviousStickyScrollLine.title","Select the previous sticky scroll line"),precondition:p0.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:xke,primary:16}}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t){var n;null===(n=Cke.get(t))||void 0===n||n.focusPrevious()}}]),t}(R_),Ike=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.goToFocusedStickyScrollLine",title:Ja("goToFocusedStickyScrollLine.title","Go to the focused sticky scroll line"),precondition:p0.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:xke,primary:3}}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t){var n;null===(n=Cke.get(t))||void 0===n||n.goToFocused()}}]),t}(R_),Eke=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.selectEditor",title:Ja("selectEditor.title","Select Editor"),precondition:p0.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:xke,primary:9}}])}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t){var n;null===(n=Cke.get(t))||void 0===n||n.selectEditor()}}]),t}(R_);B_(Cke.ID,Cke,1),y_(Ske),y_(Lke),y_(Nke),y_(Dke),y_(Ike),y_(Eke);var Mke=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Tke=function(e,t){return function(n,i){t(n,i,e)}},Rke=function e(t,n,i,r,o,a){u(this,e),this.range=t,this.insertText=n,this.filterText=i,this.additionalTextEdits=r,this.command=o,this.completion=a},Ake=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t,[o.disposable])).model=e,s.line=n,s.word=i,s.completionModel=r,s._suggestMemoryService=a,s}return p(t,e),h(t,[{key:"canBeReused",value:function(e,t,n){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===n.startColumn&&this.word.endColumn<n.endColumn&&0===this.completionModel.getIncompleteProvider().size}},{key:"items",get:function(){var e=[],t=this.completionModel.items,n=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},t),i=Ts.slice(t,n),r=Ts.slice(t,0,n),o=5,a=!0,s=!1,l=void 0;try{for(var u,c=Ts.concat(i,r)[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;if(d.score!==wM.Default){var h,f=new hd(d.editStart.lineNumber,d.editStart.column,d.editInsertEnd.lineNumber,d.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),g=d.completion.insertTextRules&&4&d.completion.insertTextRules?{snippet:d.completion.insertText}:d.completion.insertText;e.push(new Rke(f,g,null!==(h=d.filterTextLow)&&void 0!==h?h:d.labelLow,d.completion.additionalTextEdits,d.completion.command,d)),o-- >=0&&d.resolve(Uu.None)}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return e}}]),t}(Ou);Ake=Mke([Tke(5,Bfe)],Ake);var Pke=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t))._languageFeatureService=e,o._clipboardService=n,o._suggestMemoryService=i,o._editorService=r,o._store.add(e.inlineCompletionsProvider.register("*",o)),o}return p(t,e),h(t,[{key:"provideInlineCompletions",value:function(e,t,n,i){var r=this;return s((function(){var o,a,s,l,u,c,d,h,f,g,v,p,m,y,_,b,k,w,C;return E(this,(function(S){switch(S.label){case 0:if(n.selectedSuggestionInfo)return[2];s=!0,l=!1,u=void 0;try{for(c=r._editorService.listCodeEditors()[Symbol.iterator]();!(s=(d=c.next()).done);s=!0)if((h=d.value).getModel()===e){a=h;break}}catch(e){l=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(l)throw u}}return a?(f=a.getOption(90),tfe.isAllOff(f)?[2]:(e.tokenization.tokenizeIfCheap(t.lineNumber),g=e.tokenization.getLineTokens(t.lineNumber),v=g.getStandardTokenType(g.findTokenIndexAtOffset(Math.max(t.column-1-1,0))),"inline"!==tfe.valueFor(f,v)?[2,void 0]:((null==(p=e.getWordAtPosition(t))?void 0:p.word)||(m=r._getTriggerCharacterInfo(e,t)),(null==p?void 0:p.word)||m?(p||(p=e.getWordUntilPosition(t)),p.endColumn!==t.column?[2]:(_=e.getValueInRange(new hd(t.lineNumber,1,t.lineNumber,t.column)),m||!(null===(o=r._lastResult)||void 0===o?void 0:o.canBeReused(e,t.lineNumber,p))?[3,1]:(b=new $fe(_,t.column-r._lastResult.word.endColumn),r._lastResult.completionModel.lineContext=b,r._lastResult.acquire(),y=r._lastResult,[3,5]))):[2]))):[2];case 1:return[4,Qhe(r._languageFeatureService.completionProvider,e,t,new Zhe(void 0,ige.createSuggestFilter(a).itemKind,null==m?void 0:m.providers),m&&{triggerKind:1,triggerCharacter:m.ch},i)];case 2:return(k=S.sent()).needsClipboard?[4,r._clipboardService.readText()]:[3,4];case 3:w=S.sent(),S.label=4;case 4:C=new Jfe(k.items,t.column,new $fe(_,0),Qfe.None,a.getOption(119),a.getOption(113),{boostFullMatch:!1,firstMatchCanBeWeak:!1},w),y=new Ake(e,t.lineNumber,p,C,k,r._suggestMemoryService),S.label=5;case 5:return r._lastResult=y,[2,y]}}))}))()}},{key:"handleItemDidShow",value:function(e,t){t.completion.resolve(Uu.None)}},{key:"freeInlineCompletions",value:function(e){e.release()}},{key:"_getTriggerCharacterInfo",value:function(e,t){var n=e.getValueInRange(hd.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),i=new Set,r=!0,o=!1,a=void 0;try{for(var s,l=this._languageFeatureService.completionProvider.all(e)[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u,c=s.value;(null===(u=c.triggerCharacters)||void 0===u?void 0:u.includes(n))&&i.add(c)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}if(0!==i.size)return{providers:i,ch:n}}}]),t}(Ru);jY(Pke=Mke([Tke(0,wS),Tke(1,fY),Tke(2,Bfe),Tke(3,Ym)],Pke));var Oke=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.forceRetokenize",label:Xa("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0}])}return p(t,e),h(t,[{key:"run",value:function(e,t){if(t.hasModel()){var n=t.getModel();n.tokenization.resetTokenization();var i=new Hu;n.tokenization.forceTokenization(n.getLineCount()),i.stop(),console.log("tokenization took ".concat(i.elapsed()))}}}]),t}(M_);O_(Oke);var Fke=function(e){function t(){return u(this,t),l(this,t,[{id:t.ID,title:Ja({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},metadata:{description:Ja("tabMovesFocusDescriptions","Determines whether the tab key moves focus around the workbench or inserts the tab character in the current editor. This is also called tab trapping, tab navigation, or tab focus mode.")},f1:!0}])}return p(t,e),h(t,[{key:"run",value:function(){var e=NX.getTabFocusMode(),t=!e;NX.setTabFocusMode(t),_R(t?Xa("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):Xa("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}]),t}(m_);Fke.ID="editor.action.toggleTabFocusMode",y_(Fke);var Wke=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Bke=function(e,t){return function(n,i){t(n,i,e)}},Hke=function(e){function t(e,n){var i,r,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;u(this,t),(i=l(this,t))._link=n,i._hoverService=s,i._enabled=!0,i.el=lm(e,gm("a.monaco-link",{tabIndex:null!==(r=n.tabIndex)&&void 0!==r?r:0,href:n.href},n.label)),i.hoverDelegate=null!==(o=a.hoverDelegate)&&void 0!==o?o:xO("mouse"),i.setTooltip(n.title),i.el.setAttribute("role","button");var d=i._register(new LE(i.el,"click")),h=i._register(new LE(i.el,"keypress")),f=Au.chain(h.event,(function(e){return e.map((function(e){return new rg(e)})).filter((function(e){return 3===e.keyCode}))})),g=i._register(new LE(i.el,XI.Tap)).event;i._register(JI.addTarget(i.el));var v=Au.any(d.event,f,g);return i._register(v((function(e){i.enabled&&(om(e,!0),(null==a?void 0:a.opener)?a.opener(i._link.href):c.open(i._link.href,{allowCommands:!0}))}))),i.enabled=!0,i}return p(t,e),h(t,[{key:"enabled",get:function(){return this._enabled},set:function(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}},{key:"setTooltip",value:function(e){this.hoverDelegate.showNativeHover?this.el.title=null!=e?e:"":!this.hover&&e?this.hover=this._register(this._hoverService.setupManagedHover(this.hoverDelegate,this.el,e)):this.hover&&this.hover.update(e)}}]),t}(Ru);Hke=Wke([Bke(3,jI),Bke(4,xE)],Hke);var Vke=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},zke=function(e,t){return function(n,i){t(n,i,e)}},Uke=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t))._editor=e,i.instantiationService=n,i.banner=i._register(i.instantiationService.createInstance(jke)),i}return p(t,e),h(t,[{key:"hide",value:function(){this._editor.setBanner(null,0),this.banner.clear()}},{key:"show",value:function(e){var t=this;this.banner.show(b(_({},e),{onClose:function(){var n;t.hide(),null===(n=e.onClose)||void 0===n||n.call(e)}})),this._editor.setBanner(this.banner.element,26)}}]),t}(Ru);Uke=Vke([zke(1,Gm)],Uke);var jke=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).instantiationService=e,n.markdownRenderer=n.instantiationService.createInstance(lR,{}),n.element=gm("div.editor-banner"),n.element.tabIndex=0,n}return p(t,e),h(t,[{key:"getAriaLabel",value:function(e){return e.ariaLabel?e.ariaLabel:"string"==typeof e.message?e.message:void 0}},{key:"getBannerMessage",value:function(e){if("string"==typeof e){var t=gm("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}},{key:"clear",value:function(){lp(this.element)}},{key:"show",value:function(e){lp(this.element);var t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);var n=lm(this.element,gm("div.icon-container"));n.setAttribute("aria-hidden","true"),e.icon&&n.appendChild(gm("div".concat(ny.asCSSSelector(e.icon))));var i=lm(this.element,gm("div.message-container"));if(i.setAttribute("aria-hidden","true"),i.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=lm(this.element,gm("div.message-actions-container")),e.actions){var r=!0,o=!1,a=void 0;try{for(var s,l=e.actions[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;this._register(this.instantiationService.createInstance(Hke,this.messageActionsContainer,b(_({},u),{tabIndex:-1}),{}))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}var c=lm(this.element,gm("div.action-container"));this.actionBar=this._register(new dW(c)),this.actionBar.push(this._register(new $m("banner.close","Close Banner",ny.asClassName(AZ),!0,(function(){"function"==typeof e.onClose&&e.onClose()}))),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}}]),t}(Ru);jke=Vke([zke(0,Gm)],jke);var Kke=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},qke=function(e,t){return function(n,i){t(n,i,e)}},Gke=IZ("extensions-warning-message",bd.warning,Xa("warningIcon","Icon shown with a warning message in the extensions editor.")),Zke=(Bn=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t))._editor=e,o._editorWorkerService=n,o._workspaceTrustService=i,o._highlighter=null,o._bannerClosed=!1,o._updateState=function(e){if(e&&e.hasMore){if(o._bannerClosed)return;var t,n=Math.max(e.ambiguousCharacterCount,e.nonBasicAsciiCharacterCount,e.invisibleCharacterCount);if(e.nonBasicAsciiCharacterCount>=n)t={message:Xa("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new swe};else if(e.ambiguousCharacterCount>=n)t={message:Xa("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new owe};else{if(!(e.invisibleCharacterCount>=n))throw new Error("Unreachable");t={message:Xa("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new awe}}o._bannerController.show({id:"unicodeHighlightBanner",message:t.message,icon:Gke,actions:[{label:t.command.shortLabel,href:"command:".concat(t.command.id)}],onClose:function(){o._bannerClosed=!0}})}else o._bannerController.hide()},o._bannerController=o._register(r.createInstance(Uke,e)),o._register(o._editor.onDidChangeModel((function(){o._bannerClosed=!1,o._updateHighlighter()}))),o._options=e.getOption(126),o._register(i.onDidChangeTrust((function(e){o._updateHighlighter()}))),o._register(e.onDidChangeConfiguration((function(t){t.hasChanged(126)&&(o._options=e.getOption(126),o._updateHighlighter())}))),o._updateHighlighter(),o}return p(t,e),h(t,[{key:"dispose",value:function(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),g(v(t.prototype),"dispose",this).call(this)}},{key:"_updateHighlighter",value:function(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),this._editor.hasModel()){var e=function(e,t){return{nonBasicASCII:t.nonBasicASCII===zl?!e:t.nonBasicASCII,ambiguousCharacters:t.ambiguousCharacters,invisibleCharacters:t.invisibleCharacters,includeComments:t.includeComments===zl?!e:t.includeComments,includeStrings:t.includeStrings===zl?!e:t.includeStrings,allowedCharacters:t.allowedCharacters,allowedLocales:t.allowedLocales}}(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if(![e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every((function(e){return!1===e}))){var t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map((function(e){return e.codePointAt(0)})),allowedLocales:Object.keys(e.allowedLocales).map((function(e){return"_os"===e?(new Intl.NumberFormat).resolvedOptions().locale:"_vscode"===e?xs:e}))};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new Yke(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new Qke(this._editor,t,this._updateState)}}}},{key:"getDecorationInfo",value:function(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}}]),t}(Ru),Bn.ID="editor.contrib.unicodeHighlighter",Bn);Zke=Kke([qke(1,TW),qke(2,aP),qke(3,Gm)],Zke);var Yke=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t))._editor=e,o._options=n,o._updateState=i,o._editorWorkerService=r,o._model=o._editor.getModel(),o._decorations=o._editor.createDecorationsCollection(),o._updateSoon=o._register(new Sg((function(){return o._update()}),250)),o._register(o._editor.onDidChangeModelContent((function(){o._updateSoon.schedule()}))),o._updateSoon.schedule(),o}return p(t,e),h(t,[{key:"dispose",value:function(){this._decorations.clear(),g(v(t.prototype),"dispose",this).call(this)}},{key:"_update",value:function(){var e=this;if(!this._model.isDisposed())if(this._model.mightContainNonBasicASCII()){var t=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then((function(n){if(!e._model.isDisposed()&&e._model.getVersionId()===t){e._updateState(n);var i=[];if(!n.hasMore){var r=!0,o=!1,a=void 0;try{for(var s,l=n.ranges[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i.push({range:u,options:nwe.instance.getDecorationFromOptions(e._options)})}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}e._decorations.set(i)}}))}else this._decorations.clear()}},{key:"getDecorationInfo",value:function(e){if(!this._decorations.has(e))return null;var t=this._editor.getModel();return L4(t,e)?{reason:twe(t.getValueInRange(e.range),this._options),inComment:D4(t,e),inString:N4(t,e)}:null}}]),t}(Ru);Yke=Kke([qke(3,TW)],Yke);var Qke=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._editor=e,r._options=n,r._updateState=i,r._model=r._editor.getModel(),r._decorations=r._editor.createDecorationsCollection(),r._updateSoon=r._register(new Sg((function(){return r._update()}),250)),r._register(r._editor.onDidLayoutChange((function(){r._updateSoon.schedule()}))),r._register(r._editor.onDidScrollChange((function(){r._updateSoon.schedule()}))),r._register(r._editor.onDidChangeHiddenAreas((function(){r._updateSoon.schedule()}))),r._register(r._editor.onDidChangeModelContent((function(){r._updateSoon.schedule()}))),r._updateSoon.schedule(),r}return p(t,e),h(t,[{key:"dispose",value:function(){this._decorations.clear(),g(v(t.prototype),"dispose",this).call(this)}},{key:"_update",value:function(){if(!this._model.isDisposed())if(this._model.mightContainNonBasicASCII()){var e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1},i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=Aw.computeUnicodeHighlights(this._model,this._options,l),c=!0,d=!1,h=void 0;try{for(var f,g=u.ranges[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value;n.ranges.push(v)}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||u.hasMore}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}if(!n.hasMore){var p=!0,m=!1,y=void 0;try{for(var _,b=n.ranges[Symbol.iterator]();!(p=(_=b.next()).done);p=!0){var k=_.value;t.push({range:k,options:nwe.instance.getDecorationFromOptions(this._options)})}}catch(e){m=!0,y=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw y}}}this._updateState(n),this._decorations.set(t)}else this._decorations.clear()}},{key:"getDecorationInfo",value:function(e){if(!this._decorations.has(e))return null;var t=this._editor.getModel(),n=t.getValueInRange(e.range);return L4(t,e)?{reason:twe(n,this._options),inComment:D4(t,e),inString:N4(t,e)}:null}}]),t}(Ru),Xke=Xa("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options"),$ke=function(){function e(t,n,i){u(this,e),this._editor=t,this._languageService=n,this._openerService=i,this.hoverOrdinal=5}return h(e,[{key:"computeSync",value:function(e,t){if(!this._editor.hasModel()||1!==e.type)return[];var n=this._editor.getModel(),i=this._editor.getContribution(Zke.ID);if(!i)return[];var r=[],o=new Set,a=300,s=!0,l=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value,f=i.getDecorationInfo(h);if(f){var g=n.getValueInRange(h.range).codePointAt(0),v=ewe(g),p=void 0;switch(f.reason.kind){case 0:p=Sf(f.reason.confusableWith)?Xa("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",v,ewe(f.reason.confusableWith.codePointAt(0))):Xa("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",v,ewe(f.reason.confusableWith.codePointAt(0)));break;case 1:p=Xa("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",v);break;case 2:p=Xa("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",v)}if(!o.has(p)){o.add(p);var m={codePoint:g,reason:f.reason,inComment:f.inComment,inString:f.inString},y=Xa("unicodeHighlight.adjustSettings","Adjust settings"),_="command:".concat(lwe.ID,"?").concat(encodeURIComponent(JSON.stringify(m))),b=new oT("",!0).appendMarkdown(p).appendText(" ").appendLink(_,y,Xke);r.push(new Goe(this,h.range,[b],!1,a++))}}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return r}},{key:"renderHoverParts",value:function(e,t){return function(e,t,n,i,r){t.sort(ba((function(e){return e.ordinal}),ka));var o=[],a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;o.push($oe(n,d,i,r,e.onContentsChanged))}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return new Ure(o)}(e,t,this._editor,this._languageService,this._openerService)}}]),e}();function Jke(e){return"U+".concat(e.toString(16).padStart(4,"0"))}function ewe(e){var t="`".concat(Jke(e),"`");return Ff.isInvisibleCharacter(e)||(t+=' "'.concat("".concat(function(e){if(96===e)return"`` ` ``";return"`"+String.fromCodePoint(e)+"`"}(e)),'"')),t}function twe(e,t){return Aw.computeUnicodeHighlightReason(e,t)}$ke=Kke([qke(1,Jb),qke(2,xE)],$ke);var nwe=function(){function e(){u(this,e),this.map=new Map}return h(e,[{key:"getDecorationFromOptions",value:function(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}},{key:"getDecoration",value:function(e,t){var n="".concat(e).concat(t),i=this.map.get(n);return i||(i=cU.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(n,i)),i}}]),e}();nwe.instance=new nwe;var iwe=function(e){function t(){var e;return u(this,t),(e=l(this,t,[{id:owe.ID,label:Xa("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}])).shortLabel=Xa("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments"),e}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i=this;return s((function(){var t;return E(this,(function(n){return(t=null==e?void 0:e.get(qb))&&i.runAction(t),[2]}))}))()}},{key:"runAction",value:function(e){return s((function(){return E(this,(function(t){switch(t.label){case 0:return[4,e.updateValue(Gl,!1,2)];case 1:return t.sent(),[2]}}))}))()}}]),t}(M_),rwe=function(e){function t(){var e;return u(this,t),(e=l(this,t,[{id:owe.ID,label:Xa("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}])).shortLabel=Xa("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings"),e}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i=this;return s((function(){var t;return E(this,(function(n){return(t=null==e?void 0:e.get(qb))&&i.runAction(t),[2]}))}))()}},{key:"runAction",value:function(e){return s((function(){return E(this,(function(t){switch(t.label){case 0:return[4,e.updateValue(Zl,!1,2)];case 1:return t.sent(),[2]}}))}))()}}]),t}(M_),owe=function(e){function t(){var e;return u(this,t),(e=l(this,t,[{id:t.ID,label:Xa("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}])).shortLabel=Xa("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight"),e}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i=this;return s((function(){var t;return E(this,(function(n){return(t=null==e?void 0:e.get(qb))&&i.runAction(t),[2]}))}))()}},{key:"runAction",value:function(e){return s((function(){return E(this,(function(t){switch(t.label){case 0:return[4,e.updateValue(ql,!1,2)];case 1:return t.sent(),[2]}}))}))()}}]),t}(M_);owe.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";var awe=function(e){function t(){var e;return u(this,t),(e=l(this,t,[{id:t.ID,label:Xa("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}])).shortLabel=Xa("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight"),e}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i=this;return s((function(){var t;return E(this,(function(n){return(t=null==e?void 0:e.get(qb))&&i.runAction(t),[2]}))}))()}},{key:"runAction",value:function(e){return s((function(){return E(this,(function(t){switch(t.label){case 0:return[4,e.updateValue(jl,!1,2)];case 1:return t.sent(),[2]}}))}))()}}]),t}(M_);awe.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";var swe=function(e){function t(){var e;return u(this,t),(e=l(this,t,[{id:t.ID,label:Xa("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}])).shortLabel=Xa("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight"),e}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i=this;return s((function(){var t;return E(this,(function(n){return(t=null==e?void 0:e.get(qb))&&i.runAction(t),[2]}))}))()}},{key:"runAction",value:function(e){return s((function(){return E(this,(function(t){switch(t.label){case 0:return[4,e.updateValue(Kl,!1,2)];case 1:return t.sent(),[2]}}))}))()}}]),t}(M_);swe.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";var lwe=function(e){function t(){return u(this,t),l(this,t,[{id:t.ID,label:Xa("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){return s((function(){var t,i,r,o,a,l,u,c,d,h,f,g,v,p,m,y,_,b,k,w;function C(e){return Ff.isInvisibleCharacter(e)?Xa("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",Jke(e)):Xa("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted","".concat(Jke(e),' "').concat(a,'"'))}return E(this,(function(S){switch(S.label){case 0:if(t=n.codePoint,i=n.reason,r=n.inString,o=n.inComment,a=String.fromCodePoint(t),l=e.get(TU),u=e.get(qb),c=[],0===i.kind){d=!0,h=!1,f=void 0;try{for(g=function(){var e=p.value;c.push({label:Xa("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',e),run:s((function(){return E(this,(function(t){return function(e,t){cwe.apply(this,arguments)}(u,[e]),[2]}))}))})},v=i.notAmbiguousInLocales[Symbol.iterator]();!(d=(p=v.next()).done);d=!0)g()}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}}return c.push({label:C(t),run:function(){return function(e,t){return uwe.apply(this,arguments)}(u,[t])}}),o?(m=new iwe,c.push({label:m.label,run:s((function(){return E(this,(function(e){return[2,m.runAction(u)]}))}))})):r&&(y=new rwe,c.push({label:y.label,run:s((function(){return E(this,(function(e){return[2,y.runAction(u)]}))}))})),0===i.kind?(_=new owe,c.push({label:_.label,run:s((function(){return E(this,(function(e){return[2,_.runAction(u)]}))}))})):1===i.kind?(b=new awe,c.push({label:b.label,run:s((function(){return E(this,(function(e){return[2,b.runAction(u)]}))}))})):2===i.kind?(k=new swe,c.push({label:k.label,run:s((function(){return E(this,(function(e){return[2,k.runAction(u)]}))}))})):function(e){throw new Error("Unexpected value: ".concat(e))}(i),[4,l.pick(c,{title:Xke})];case 1:return(w=S.sent())?[4,w.run()]:[3,3];case 2:S.sent(),S.label=3;case 3:return[2]}}))}))()}}]),t}(M_);function uwe(){return uwe=s((function(e,t){var n,i,r,o,a,s,l,u;return E(this,(function(c){switch(c.label){case 0:n=e.getValue(Ul),i="object"===(void 0===n?"undefined":L(n))&&n?n:{},r=!0,o=!1,a=void 0;try{for(s=t[Symbol.iterator]();!(r=(l=s.next()).done);r=!0)u=l.value,i[String.fromCodePoint(u)]=!0}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return[4,e.updateValue(Ul,i,2)];case 1:return c.sent(),[2]}}))})),uwe.apply(this,arguments)}function cwe(){return cwe=s((function(e,t){var n,i,r,o,a,s,l,u,c;return E(this,(function(d){switch(d.label){case 0:i=null===(n=e.inspect(Yl).user)||void 0===n?void 0:n.value,r="object"===(void 0===i?"undefined":L(i))&&i?Object.assign({},i):{},o=!0,a=!1,s=void 0;try{for(l=t[Symbol.iterator]();!(o=(u=l.next()).done);o=!0)c=u.value,r[c]=!0}catch(e){a=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}return[4,e.updateValue(Yl,r,2)];case 1:return d.sent(),[2]}}))})),cwe.apply(this,arguments)}lwe.ID="editor.action.unicodeHighlight.showExcludeOptions",O_(owe),O_(awe),O_(swe),O_(lwe),B_(Zke.ID,Zke,1),jre.register($ke);var dwe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},hwe=function(e,t){return function(n,i){t(n,i,e)}},fwe="ignoreUnusualLineTerminators";var gwe=(Hn=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._editor=e,r._dialogService=n,r._codeEditorService=i,r._isPresentingDialog=!1,r._config=r._editor.getOption(127),r._register(r._editor.onDidChangeConfiguration((function(e){e.hasChanged(127)&&(r._config=r._editor.getOption(127),r._checkForUnusualLineTerminators())}))),r._register(r._editor.onDidChangeModel((function(){r._checkForUnusualLineTerminators()}))),r._register(r._editor.onDidChangeModelContent((function(e){e.isUndoing||r._checkForUnusualLineTerminators()}))),r._checkForUnusualLineTerminators(),r}return p(t,e),h(t,[{key:"_checkForUnusualLineTerminators",value:function(){var e=this;return s((function(){var t,n,i;return E(this,(function(r){switch(r.label){case 0:if("off"===e._config)return[2];if(!e._editor.hasModel())return[2];if(!(t=e._editor.getModel()).mightContainUnusualLineTerminators())return[2];if(n=function(e,t){return e.getModelProperty(t.uri,fwe)}(e._codeEditorService,t),!0===n)return[2];if(e._editor.getOption(92))return[2];if("auto"===e._config)return t.removeUnusualLineTerminators(e._editor.getSelections()),[2];if(e._isPresentingDialog)return[2];r.label=1;case 1:return r.trys.push([1,,3,4]),e._isPresentingDialog=!0,[4,e._dialogService.confirm({title:Xa("unusualLineTerminators.title","Unusual Line Terminators"),message:Xa("unusualLineTerminators.message","Detected unusual line terminators"),detail:Xa("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",YM(t.uri)),primaryButton:Xa({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:Xa("unusualLineTerminators.ignore","Ignore")})];case 2:return i=r.sent(),[3,4];case 3:return e._isPresentingDialog=!1,[7];case 4:return i.confirmed?(t.removeUnusualLineTerminators(e._editor.getSelections()),[2]):(function(e,t,n){e.setModelProperty(t.uri,fwe,n)}(e._codeEditorService,t,!0),[2])}}))}))()}}]),t}(Ru),Hn.ID="editor.contrib.unusualLineTerminatorsDetector",Hn);B_((gwe=dwe([hwe(1,nx),hwe(2,Ym)],gwe)).ID,gwe,1);var vwe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},pwe=function(e,t){return function(n,i){t(n,i,e)}},mwe=function(){function e(){u(this,e),this.selector={language:"*"}}return h(e,[{key:"provideDocumentHighlights",value:function(e,t,n){var i=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});return i?e.isDisposed()?void 0:e.findMatches(i.word,!0,!1,!0,Vs,!1).map((function(e){return{range:e.range,kind:Nd.Text}})):Promise.resolve([])}},{key:"provideMultiDocumentHighlights",value:function(e,t,n,i){var r=new cw,o=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});if(!o)return Promise.resolve(r);var a=!0,s=!1,l=void 0;try{for(var u,c=[e].concat(x(n))[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;if(!d.isDisposed()){var h=d.findMatches(o.word,!0,!1,!0,Vs,!1).map((function(e){return{range:e.range,kind:Nd.Text}}));h&&r.set(d.uri,h)}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return r}}]),e}(),ywe=function(e){function t(e){var n;return u(this,t),(n=l(this,t))._register(e.documentHighlightProvider.register("*",new mwe)),n._register(e.multiDocumentHighlightProvider.register("*",new mwe)),n}return p(t,e),t}(Ru);ywe=vwe([pwe(0,wS)],ywe);var _we,bwe,kwe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},wwe=function(e,t){return function(n,i){t(n,i,e)}},Cwe=new jy("hasWordHighlights",!1);function Swe(e,t,n,i){return _g(e.ordered(t).map((function(e){return function(){return Promise.resolve(e.provideDocumentHighlights(t,n,i)).then(void 0,pu)}})),(function(e){return null!=e})).then((function(e){if(e){var n=new cw;return n.set(t.uri,e),n}return new cw}))}var xwe=function(){function e(t,n,i){u(this,e),this._model=t,this._selection=n,this._wordSeparators=i,this._wordRange=this._getCurrentWordRange(t,n),this._result=null}return h(e,[{key:"result",get:function(){var e=this;return this._result||(this._result=hg((function(t){return e._compute(e._model,e._selection,e._wordSeparators,t)}))),this._result}},{key:"_getCurrentWordRange",value:function(e,t){var n=e.getWordAtPosition(t.getPosition());return n?new hd(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}},{key:"isValid",value:function(e,t,n){for(var i=t.startLineNumber,r=t.startColumn,o=t.endColumn,a=this._getCurrentWordRange(e,t),s=Boolean(this._wordRange&&this._wordRange.equalsRange(a)),l=0,u=n.length;!s&&l<u;l++){var c=n.getRange(l);c&&c.startLineNumber===i&&c.startColumn<=r&&c.endColumn>=o&&(s=!0)}return s}},{key:"cancel",value:function(){this.result.cancel()}}]),e}(),Lwe=function(e){function t(e,n,i,r){var o;return u(this,t),(o=l(this,t,[e,n,i]))._providers=r,o}return p(t,e),h(t,[{key:"_compute",value:function(e,t,n,i){return Swe(this._providers,e,t.getPosition(),i).then((function(e){return e||new cw}))}}]),t}(xwe),Dwe=function(e){function t(e,n,i,r,o){var a;return u(this,t),(a=l(this,t,[e,n,i]))._providers=r,a._otherModels=o,a}return p(t,e),h(t,[{key:"_compute",value:function(e,t,n,i){return function(e,t,n,i,r,o){return _g(e.ordered(t).map((function(e){return function(){var i=o.filter((function(e){return Dw(e)})).filter((function(t){return kL(e.selector,t.uri,t.getLanguageId(),!0,void 0,void 0)>0}));return Promise.resolve(e.provideMultiDocumentHighlights(t,n,i,r)).then(void 0,pu)}})),(function(e){return null!=e}))}(this._providers,e,t.getPosition(),0,i,this._otherModels).then((function(e){return e||new cw}))}}]),t}(xwe);A_("_executeDocumentHighlights",function(){var e=s((function(e,t,n){var i;return E(this,(function(r){switch(r.label){case 0:return[4,Swe(e.get(wS).documentHighlightProvider,t,n,Uu.None)];case 1:return[2,null==(i=r.sent())?void 0:i.get(t.uri)]}}))}));return function(t,n,i){return e.apply(this,arguments)}}());var Nwe=(Vn=function(){function e(t,n,i,r,o){var a=this;u(this,e),this.toUnhook=new Tu,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new cw,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.runDelayer=this.toUnhook.add(new vg(50)),this.editor=t,this.providers=n,this.multiDocumentProviders=i,this.codeEditorService=o,this._hasWordHighlights=Cwe.bindTo(r),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(81),this.model=this.editor.getModel(),this.toUnhook.add(t.onDidChangeCursorPosition((function(e){a._ignorePositionChangeEvent||"off"!==a.occurrencesHighlight&&a.runDelayer.trigger((function(){a._onPositionChanged(e)}))}))),this.toUnhook.add(t.onDidFocusEditorText((function(e){"off"!==a.occurrencesHighlight&&(a.workerRequest||a.runDelayer.trigger((function(){a._run()})))}))),this.toUnhook.add(t.onDidChangeModelContent((function(e){Wv(a.model.uri,"output")||a._stopAll()}))),this.toUnhook.add(t.onDidChangeModel((function(e){!e.newModelUrl&&e.oldModelUrl?a._stopSingular():_we.query&&a._run()}))),this.toUnhook.add(t.onDidChangeConfiguration((function(e){var t=a.editor.getOption(81);if(a.occurrencesHighlight!==t)switch(a.occurrencesHighlight=t,t){case"off":a._stopAll();break;case"singleFile":var n,i;a._stopAll(null===(i=_we.query)||void 0===i||null===(n=i.modelInfo)||void 0===n?void 0:n.model);break;case"multiFile":_we.query&&a._run(!0);break;default:console.warn("Unknown occurrencesHighlight setting value:",t)}}))),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,_we.query&&this._run()}return h(e,[{key:"hasDecorations",value:function(){return this.decorations.length>0}},{key:"restore",value:function(){"off"!==this.occurrencesHighlight&&(this.runDelayer.cancel(),this._run())}},{key:"_getSortedHighlights",value:function(){return this.decorations.getRanges().sort(hd.compareRangesUsingStarts)}},{key:"moveNext",value:function(){var e=this,t=this._getSortedHighlights(),n=t.findIndex((function(t){return t.containsPosition(e.editor.getPosition())})),i=(n+1)%t.length,r=t[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(r.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(r);var o=this._getWord();if(o){var a=this.editor.getModel().getLineContent(r.startLineNumber);_R("".concat(a,", ").concat(i+1," of ").concat(t.length," for '").concat(o.word,"'"))}}finally{this._ignorePositionChangeEvent=!1}}},{key:"moveBack",value:function(){var e=this,t=this._getSortedHighlights(),n=t.findIndex((function(t){return t.containsPosition(e.editor.getPosition())})),i=(n-1+t.length)%t.length,r=t[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(r.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(r);var o=this._getWord();if(o){var a=this.editor.getModel().getLineContent(r.startLineNumber);_R("".concat(a,", ").concat(i+1," of ").concat(t.length," for '").concat(o.word,"'"))}}finally{this._ignorePositionChangeEvent=!1}}},{key:"_removeSingleDecorations",value:function(){if(this.editor.hasModel()){var e=_we.storedDecorationIDs.get(this.editor.getModel().uri);e&&(this.editor.removeDecorations(e),_we.storedDecorationIDs.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))}}},{key:"_removeAllDecorations",value:function(e){var t=this.codeEditorService.listCodeEditors(),n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(l.hasModel()&&!GM(l.getModel().uri,null==e?void 0:e.uri)){var u=_we.storedDecorationIDs.get(l.getModel().uri);if(u){l.removeDecorations(u),n.push(l.getModel().uri);var c=Iwe.get(l);(null==c?void 0:c.wordHighlighter)&&c.wordHighlighter.decorations.length>0&&(c.wordHighlighter.decorations.clear(),c.wordHighlighter.workerRequest=null,c.wordHighlighter._hasWordHighlights.set(!1))}}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}var d=!0,h=!1,f=void 0;try{for(var g,v=n[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;_we.storedDecorationIDs.delete(p)}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}}},{key:"_stopSingular",value:function(){var e,t,n,i;(this._removeSingleDecorations(),this.editor.hasTextFocus())&&((null===(e=this.editor.getModel())||void 0===e?void 0:e.uri.scheme)!==Pv.vscodeNotebookCell&&(null===(n=_we.query)||void 0===n||null===(t=n.modelInfo)||void 0===t?void 0:t.model.uri.scheme)!==Pv.vscodeNotebookCell?(_we.query=null,this._run()):(null===(i=_we.query)||void 0===i?void 0:i.modelInfo)&&(_we.query.modelInfo=null));-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),null!==this.workerRequest&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}},{key:"_stopAll",value:function(e){this._removeAllDecorations(e),-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),null!==this.workerRequest&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}},{key:"_onPositionChanged",value:function(e){var t;"off"!==this.occurrencesHighlight&&(3===e.reason||(null===(t=this.editor.getModel())||void 0===t?void 0:t.uri.scheme)===Pv.vscodeNotebookCell)?this._run():this._stopAll()}},{key:"_getWord",value:function(){var e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:t,column:n})}},{key:"getOtherModelsToHighlight",value:function(e){if(!e)return[];if(e.uri.scheme===Pv.vscodeNotebookCell){var t=[],n=this.codeEditorService.listCodeEditors(),i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value.getModel();l&&l!==e&&l.uri.scheme===Pv.vscodeNotebookCell&&t.push(l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return t}var u=[],c=this.codeEditorService.listCodeEditors(),d=!0,h=!1,f=void 0;try{for(var g,v=c[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;if(R9(p)){var m=p.getModel();m&&e===m.modified&&u.push(m.modified)}}}catch(e){h=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(h)throw f}}if(u.length)return u;if("singleFile"===this.occurrencesHighlight)return[];var y=!0,_=!1,b=void 0;try{for(var k,w=c[Symbol.iterator]();!(y=(k=w.next()).done);y=!0){var C=k.value.getModel();C&&C!==e&&u.push(C)}}catch(e){_=!0,b=e}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}return u}},{key:"_run",value:function(e){var t,n,i=this;if(this.editor.hasTextFocus()){var r=this.editor.getSelection();if(!r||r.startLineNumber!==r.endLineNumber)return _we.query=null,void this._stopAll();var o=r.startColumn,a=r.endColumn,s=this._getWord();if(!s||s.startColumn>o||s.endColumn<a)return _we.query=null,void this._stopAll();n=this.workerRequest&&this.workerRequest.isValid(this.model,r,this.decorations),_we.query={modelInfo:{model:this.model,selection:r},word:s}}else if(!_we.query)return void this._stopAll();if(this.lastCursorPositionChangeTime=(new Date).getTime(),n)this.workerRequestCompleted&&-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else if(GM(this.editor.getModel().uri,null===(t=_we.query.modelInfo)||void 0===t?void 0:t.model.uri)){var l;if(!e){var u=this.decorations.getRanges(),c=!0,d=!1,h=void 0;try{for(var f,g=u[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){if(f.value.containsPosition(this.editor.getPosition()))return}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}}this._stopAll(e?this.model:void 0);var v=++this.workerRequestTokenId;this.workerRequestCompleted=!1;var p=this.getOtherModelsToHighlight(this.editor.getModel());if(!_we.query||!_we.query.modelInfo||_we.query.modelInfo.model.isDisposed())return;this.workerRequest=this.computeWithModel(_we.query.modelInfo.model,_we.query.modelInfo.selection,_we.query.word,p),null===(l=this.workerRequest)||void 0===l||l.result.then((function(e){v===i.workerRequestTokenId&&(i.workerRequestCompleted=!0,i.workerRequestValue=e||[],i._beginRenderDecorations())}),vu)}}},{key:"computeWithModel",value:function(e,t,n,i){return i.length?function(e,t,n,i,r,o){return new Dwe(t,n,r,e,o)}(this.multiDocumentProviders,e,t,0,this.editor.getOption(132),i):function(e,t,n,i,r){return new Lwe(t,n,r,e)}(this.providers,e,t,0,this.editor.getOption(132))}},{key:"_beginRenderDecorations",value:function(){var e=this,t=(new Date).getTime(),n=this.lastCursorPositionChangeTime+250;t>=n?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout((function(){e.renderDecorations()}),n-t)}},{key:"renderDecorations",value:function(){this.renderDecorationsTimer=-1;var e=this.codeEditorService.listCodeEditors(),t=!0,n=!1,i=void 0;try{for(var r,o,a=function(){var e,t=o.value,n=Iwe.get(t);if(!n)return"continue";var i=[],a=null===(e=t.getModel())||void 0===e?void 0:e.uri;if(a&&r.workerRequestValue.has(a)){var s=_we.storedDecorationIDs.get(a),l=r.workerRequestValue.get(a);if(l){var u=!0,c=!1,d=void 0;try{for(var h,f=l[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;g.range&&i.push({range:g.range,options:nye(g.kind)})}}catch(t){c=!0,d=t}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}var v,p,m=[];if(t.changeDecorations((function(e){m=e.deltaDecorations(null!=s?s:[],i)})),_we.storedDecorationIDs=_we.storedDecorationIDs.set(a,m),i.length>0)null===(v=n.wordHighlighter)||void 0===v||v.decorations.set(i),null===(p=n.wordHighlighter)||void 0===p||p._hasWordHighlights.set(!0)}},s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0)r=this,a()}catch(e){n=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}}},{key:"dispose",value:function(){this._stopSingular(),this.toUnhook.dispose()}}]),e}(),_we=Vn,Vn.storedDecorationIDs=new cw,Vn.query=null,Vn);Nwe=_we=kwe([wwe(4,Ym)],Nwe);var Iwe=(zn=function(e){function t(e,n,i,r){var o;u(this,t),(o=l(this,t))._wordHighlighter=null;var a=function(){e.hasModel()&&!e.getModel().isTooLargeForTokenization()&&(o._wordHighlighter=new Nwe(e,i.documentHighlightProvider,i.multiDocumentHighlightProvider,n,r))};return o._register(e.onDidChangeModel((function(e){o._wordHighlighter&&(o._wordHighlighter.dispose(),o._wordHighlighter=null),a()}))),a(),o}return p(t,e),h(t,[{key:"wordHighlighter",get:function(){return this._wordHighlighter}},{key:"saveViewState",value:function(){return!(!this._wordHighlighter||!this._wordHighlighter.hasDecorations())}},{key:"moveNext",value:function(){var e;null===(e=this._wordHighlighter)||void 0===e||e.moveNext()}},{key:"moveBack",value:function(){var e;null===(e=this._wordHighlighter)||void 0===e||e.moveBack()}},{key:"restoreViewState",value:function(e){this._wordHighlighter&&e&&this._wordHighlighter.restore()}},{key:"dispose",value:function(){this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),g(v(t.prototype),"dispose",this).call(this)}}],[{key:"get",value:function(e){return e.getContribution(bwe.ID)}}]),t}(Ru),bwe=zn,zn.ID="editor.contrib.wordHighlighter",zn);Iwe=bwe=kwe([wwe(1,Ky),wwe(2,wS),wwe(3,Ym)],Iwe);var Ewe=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t,[n]))._isNext=e,i}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=Iwe.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}}]),t}(M_),Mwe=function(e){function t(){return u(this,t),l(this,t,[!0,{id:"editor.action.wordHighlight.next",label:Xa("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:Cwe,kbOpts:{kbExpr:p0.editorTextFocus,primary:65,weight:100}}])}return p(t,e),t}(Ewe),Twe=function(e){function t(){return u(this,t),l(this,t,[!1,{id:"editor.action.wordHighlight.prev",label:Xa("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:Cwe,kbOpts:{kbExpr:p0.editorTextFocus,primary:1089,weight:100}}])}return p(t,e),t}(Ewe),Rwe=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.wordHighlight.trigger",label:Xa("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:void 0,kbOpts:{kbExpr:p0.editorTextFocus,primary:0,weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){var i=Iwe.get(t);i&&i.restoreViewState(!0)}}]),t}(M_);B_(Iwe.ID,Iwe,0),O_(Mwe),O_(Twe),O_(Rwe),jY(ywe);var Awe=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._inSelectionMode=e.inSelectionMode,n._wordNavigationType=e.wordNavigationType,n}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t,n){var i=this;if(t.hasModel()){var r=kw(t.getOption(132),t.getOption(131)),o=t.getModel(),a=t.getSelections(),s=a.length>1,l=a.map((function(e){var t=new dd(e.positionLineNumber,e.positionColumn),n=i._move(r,o,t,i._wordNavigationType,s);return i._moveTo(e,n,i._inSelectionMode)}));if(o.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,l.map((function(e){return cJ.fromModelSelection(e)}))),1===l.length){var u=new dd(l[0].positionLineNumber,l[0].positionColumn);t.revealPosition(u,0)}}}},{key:"_moveTo",value:function(e,t,n){return n?new fd(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new fd(t.lineNumber,t.column,t.lineNumber,t.column)}}]),t}(E_),Pwe=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_move",value:function(e,t,n,i,r){return xJ.moveWordLeft(e,t,n,i,r)}}]),t}(Awe),Owe=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_move",value:function(e,t,n,i,r){return xJ.moveWordRight(e,t,n,i)}}]),t}(Awe),Fwe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0}])}return p(t,e),t}(Pwe),Wwe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0}])}return p(t,e),t}(Pwe),Bwe=function(e){function t(){var e;return u(this,t),l(this,t,[{inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:Sy.and(p0.textInputFocus,null===(e=Sy.and(yR,lq))||void 0===e?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}}])}return p(t,e),t}(Pwe),Hwe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0}])}return p(t,e),t}(Pwe),Vwe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0}])}return p(t,e),t}(Pwe),zwe=function(e){function t(){var e;return u(this,t),l(this,t,[{inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:Sy.and(p0.textInputFocus,null===(e=Sy.and(yR,lq))||void 0===e?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}}])}return p(t,e),t}(Pwe),Uwe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0}])}return p(t,e),h(t,[{key:"_move",value:function(e,n,i,r,o){return g(v(t.prototype),"_move",this).call(this,kw(hu.wordSeparators.defaultValue,e.intlSegmenterLocales),n,i,r,o)}}]),t}(Pwe),jwe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0}])}return p(t,e),h(t,[{key:"_move",value:function(e,n,i,r,o){return g(v(t.prototype),"_move",this).call(this,kw(hu.wordSeparators.defaultValue,e.intlSegmenterLocales),n,i,r,o)}}]),t}(Pwe),Kwe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0}])}return p(t,e),t}(Owe),qwe=function(e){function t(){var e;return u(this,t),l(this,t,[{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:Sy.and(p0.textInputFocus,null===(e=Sy.and(yR,lq))||void 0===e?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}}])}return p(t,e),t}(Owe),Gwe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0}])}return p(t,e),t}(Owe),Zwe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0}])}return p(t,e),t}(Owe),Ywe=function(e){function t(){var e;return u(this,t),l(this,t,[{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:Sy.and(p0.textInputFocus,null===(e=Sy.and(yR,lq))||void 0===e?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}}])}return p(t,e),t}(Owe),Qwe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0}])}return p(t,e),t}(Owe),Xwe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0}])}return p(t,e),h(t,[{key:"_move",value:function(e,n,i,r,o){return g(v(t.prototype),"_move",this).call(this,kw(hu.wordSeparators.defaultValue,e.intlSegmenterLocales),n,i,r,o)}}]),t}(Owe),$we=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0}])}return p(t,e),h(t,[{key:"_move",value:function(e,n,i,r,o){return g(v(t.prototype),"_move",this).call(this,kw(hu.wordSeparators.defaultValue,e.intlSegmenterLocales),n,i,r,o)}}]),t}(Owe),Jwe=function(e){function t(e){var n;return u(this,t),(n=l(this,t,[e]))._whitespaceHeuristics=e.whitespaceHeuristics,n._wordNavigationType=e.wordNavigationType,n}return p(t,e),h(t,[{key:"runEditorCommand",value:function(e,t,n){var i=this,r=e.get(Ek);if(t.hasModel()){var o=kw(t.getOption(132),t.getOption(131)),a=t.getModel(),s=t.getSelections(),l=t.getOption(6),u=t.getOption(11),c=r.getLanguageConfiguration(a.getLanguageId()).getAutoClosingPairs(),d=t._getViewModel(),h=s.map((function(e){var n=i._delete({wordSeparators:o,model:a,selection:e,whitespaceHeuristics:i._whitespaceHeuristics,autoClosingDelete:t.getOption(9),autoClosingBrackets:l,autoClosingQuotes:u,autoClosingPairs:c,autoClosedCharacters:d.getCursorAutoClosedCharacters()},i._wordNavigationType);return new mJ(n,"")}));t.pushUndoStop(),t.executeCommands(this.id,h),t.pushUndoStop()}}}]),t}(E_),eCe=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_delete",value:function(e,t){var n=xJ.deleteWordLeft(e,t);return n||new hd(1,1,1,1)}}]),t}(Jwe),tCe=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_delete",value:function(e,t){var n=xJ.deleteWordRight(e,t);if(n)return n;var i=e.model.getLineCount(),r=e.model.getLineMaxColumn(i);return new hd(i,r,i,r)}}]),t}(Jwe),nCe=function(e){function t(){return u(this,t),l(this,t,[{whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:p0.writable}])}return p(t,e),t}(eCe),iCe=function(e){function t(){return u(this,t),l(this,t,[{whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:p0.writable}])}return p(t,e),t}(eCe),rCe=function(e){function t(){return u(this,t),l(this,t,[{whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:p0.writable,kbOpts:{kbExpr:p0.textInputFocus,primary:2049,mac:{primary:513},weight:100}}])}return p(t,e),t}(eCe),oCe=function(e){function t(){return u(this,t),l(this,t,[{whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:p0.writable}])}return p(t,e),t}(tCe),aCe=function(e){function t(){return u(this,t),l(this,t,[{whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:p0.writable}])}return p(t,e),t}(tCe),sCe=function(e){function t(){return u(this,t),l(this,t,[{whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:p0.writable,kbOpts:{kbExpr:p0.textInputFocus,primary:2068,mac:{primary:532},weight:100}}])}return p(t,e),t}(tCe),lCe=function(e){function t(){return u(this,t),l(this,t,[{id:"deleteInsideWord",precondition:p0.writable,label:Xa("deleteInsideWord","Delete Word"),alias:"Delete Word"}])}return p(t,e),h(t,[{key:"run",value:function(e,t,n){if(t.hasModel()){var i=kw(t.getOption(132),t.getOption(131)),r=t.getModel(),o=t.getSelections().map((function(e){var t=xJ.deleteInsideWord(i,r,e);return new mJ(t,"")}));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}}]),t}(M_);P_(new Fwe),P_(new Wwe),P_(new Bwe),P_(new Hwe),P_(new Vwe),P_(new zwe),P_(new Kwe),P_(new qwe),P_(new Gwe),P_(new Zwe),P_(new Ywe),P_(new Qwe),P_(new Uwe),P_(new jwe),P_(new Xwe),P_(new $we),P_(new nCe),P_(new iCe),P_(new rCe),P_(new oCe),P_(new aCe),P_(new sCe),O_(lCe);var uCe=function(e){function t(){return u(this,t),l(this,t,[{whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:p0.writable,kbOpts:{kbExpr:p0.textInputFocus,primary:0,mac:{primary:769},weight:100}}])}return p(t,e),h(t,[{key:"_delete",value:function(e,t){var n=LJ.deleteWordPartLeft(e);return n||new hd(1,1,1,1)}}]),t}(Jwe),cCe=function(e){function t(){return u(this,t),l(this,t,[{whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:p0.writable,kbOpts:{kbExpr:p0.textInputFocus,primary:0,mac:{primary:788},weight:100}}])}return p(t,e),h(t,[{key:"_delete",value:function(e,t){var n=LJ.deleteWordPartRight(e);if(n)return n;var i=e.model.getLineCount(),r=e.model.getLineMaxColumn(i);return new hd(i,r,i,r)}}]),t}(Jwe),dCe=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_move",value:function(e,t,n,i,r){return LJ.moveWordPartLeft(e,t,n,r)}}]),t}(Awe),hCe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:p0.textInputFocus,primary:0,mac:{primary:783},weight:100}}])}return p(t,e),t}(dCe);sy.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");var fCe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:p0.textInputFocus,primary:0,mac:{primary:1807},weight:100}}])}return p(t,e),t}(dCe);sy.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");var gCe=function(e){function t(){return u(this,t),l(this,t,arguments)}return p(t,e),h(t,[{key:"_move",value:function(e,t,n,i,r){return LJ.moveWordPartRight(e,t,n)}}]),t}(Awe),vCe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:p0.textInputFocus,primary:0,mac:{primary:785},weight:100}}])}return p(t,e),t}(gCe),pCe=function(e){function t(){return u(this,t),l(this,t,[{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:p0.textInputFocus,primary:0,mac:{primary:1809},weight:100}}])}return p(t,e),t}(gCe);P_(new uCe),P_(new cCe),P_(new hCe),P_(new fCe),P_(new vCe),P_(new pCe);var mCe=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).editor=e,n._register(n.editor.onDidAttemptReadOnlyEdit((function(){return n._onDidAttemptReadOnlyEdit()}))),n}return p(t,e),h(t,[{key:"_onDidAttemptReadOnlyEdit",value:function(){var e=ine.get(this.editor);if(e&&this.editor.hasModel()){var t=this.editor.getOptions().get(93);t||(t=this.editor.isSimpleWidget?new oT(Xa("editor.simple.readonly","Cannot edit in read-only input")):new oT(Xa("editor.readonly","Cannot edit in read-only editor"))),e.showMessage(t,this.editor.getPosition())}}}]),t}(Ru);mCe.ID="editor.contrib.readOnlyMessageController",B_(mCe.ID,mCe,2);var yCe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},_Ce=function(e,t){return function(n,i){t(n,i,e)}},bCe=function(e){function t(e,n,i){var r,o;u(this,t),r=l(this,t),o=r,r._textModel=e,r._languageFeaturesService=n,r._outlineModelService=i,r._currentModel=BP(r,void 0);var a=aO("documentSymbolProvider.onDidChange",r._languageFeaturesService.documentSymbolProvider.onDidChange),c=aO("_textModel.onDidChangeContent",Au.debounce((function(e){return r._textModel.onDidChangeContent(e)}),(function(){}),100));return r._register(eO(function(){var e=s((function(e,t){var n,i;return E(this,(function(r){switch(r.label){case 0:return a.read(e),c.read(e),n=t.add(new S3),[4,o._outlineModelService.getOrCreate(o._textModel,n.token)];case 1:return i=r.sent(),t.isDisposed?[2]:(o._currentModel.set(i,void 0),[2])}}))}));return function(t,n){return e.apply(this,arguments)}}())),r}return p(t,e),h(t,[{key:"getBreadcrumbItems",value:function(e,t){var n=this._currentModel.read(t);if(!n)return[];var i=n.asListOfDocumentSymbols().filter((function(t){return e.contains(t.range.startLineNumber)&&!e.contains(t.range.endLineNumber)}));return i.sort(Ca(ba((function(e){return e.range.endLineNumber-e.range.startLineNumber}),ka))),i.map((function(e){return{name:e.name,kind:e.kind,startLineNumber:e.range.startLineNumber}}))}}]),t}(Ru);bCe=yCe([_Ce(1,wS),_Ce(2,ohe)],bCe),s6.setBreadcrumbsSourceFactory((function(e,t){return t.createInstance(bCe,e)}));var kCe=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).editor=e,n.widget=null,ws&&(n._register(e.onDidChangeConfiguration((function(){return n.update()}))),n.update()),n}return p(t,e),h(t,[{key:"update",value:function(){var e=!this.editor.getOption(92);!this.widget&&e?this.widget=new wCe(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}},{key:"dispose",value:function(){g(v(t.prototype),"dispose",this).call(this),this.widget&&(this.widget.dispose(),this.widget=null)}}]),t}(Ru);kCe.ID="editor.contrib.iPadShowKeyboard";var wCe=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).editor=e,n._domNode=document.createElement("textarea"),n._domNode.className="iPadShowKeyboard",n._register(cp(n._domNode,"touchstart",(function(e){n.editor.focus()}))),n._register(cp(n._domNode,"focus",(function(e){n.editor.focus()}))),n.editor.addOverlayWidget(n),n}return p(t,e),h(t,[{key:"dispose",value:function(){this.editor.removeOverlayWidget(this),g(v(t.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return t.ID}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return{preference:1}}}]),t}(Ru);wCe.ID="editor.contrib.ShowKeyboardWidget",B_(kCe.ID,kCe,3);var CCe,SCe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},xCe=function(e,t){return function(n,i){t(n,i,e)}},LCe=(Un=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t))._editor=e,r._languageService=i,r._widget=null,r._register(r._editor.onDidChangeModel((function(e){return r.stop()}))),r._register(r._editor.onDidChangeModelLanguage((function(e){return r.stop()}))),r._register(Rh.onDidChange((function(e){return r.stop()}))),r._register(r._editor.onKeyUp((function(e){return 9===e.keyCode&&r.stop()}))),r}return p(t,e),h(t,[{key:"dispose",value:function(){this.stop(),g(v(t.prototype),"dispose",this).call(this)}},{key:"launch",value:function(){this._widget||this._editor.hasModel()&&(this._widget=new NCe(this._editor,this._languageService))}},{key:"stop",value:function(){this._widget&&(this._widget.dispose(),this._widget=null)}}],[{key:"get",value:function(e){return e.getContribution(CCe.ID)}}]),t}(Ru),CCe=Un,Un.ID="editor.contrib.inspectTokens",Un);LCe=CCe=SCe([xCe(1,GZ),xCe(2,Jb)],LCe);var DCe=function(e){function t(){return u(this,t),l(this,t,[{id:"editor.action.inspectTokens",label:XA.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0}])}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=LCe.get(t);null==n||n.launch()}}]),t}(M_);var NCe=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).allowEditorOverflow=!0,i._editor=e,i._languageService=n,i._model=i._editor.getModel(),i._domNode=document.createElement("div"),i._domNode.className="tokens-inspect-widget",i._tokenizationSupport=function(e,t){var n=Rh.get(t);if(n)return n;var i=e.encodeLanguageId(t);return{getInitialState:function(){return XT},tokenize:function(e,n,i){return $T(t,i)},tokenizeEncoded:function(e,t,n){return JT(i,n)}}}(i._languageService.languageIdCodec,i._model.getLanguageId()),i._compute(i._editor.getPosition()),i._register(i._editor.onDidChangeCursorPosition((function(e){return i._compute(i._editor.getPosition())}))),i._editor.addContentWidget(i),i}return p(t,e),h(t,[{key:"dispose",value:function(){this._editor.removeContentWidget(this),g(v(t.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return t._ID}},{key:"_compute",value:function(e){for(var t=this._getTokensAtLine(e.lineNumber),n=0,i=t.tokens1.length-1;i>=0;i--){var r=t.tokens1[i];if(e.column-1>=r.offset){n=i;break}}for(var o=0,a=t.tokens2.length>>>1;a>=0;a--)if(e.column-1>=t.tokens2[a<<1]){o=a;break}var s=this._model.getLineContent(e.lineNumber),l="";if(n<t.tokens1.length){var u=t.tokens1[n].offset,c=n+1<t.tokens1.length?t.tokens1[n+1].offset:s.length;l=s.substring(u,c)}cm(this._domNode,gm("h2.tm-token",void 0,function(e){for(var t="",n=0,i=e.length;n<i;n++){var r=e.charCodeAt(n);switch(r){case 9:t+="→";break;case 32:t+="·";break;default:t+=String.fromCharCode(r)}}return t}(l),gm("span.tm-token-length",void 0,"".concat(l.length," ").concat(1===l.length?"char":"chars")))),lm(this._domNode,gm("hr.tokens-inspect-separator",{style:"clear:both"}));var d=1+(o<<1)<t.tokens2.length?this._decodeMetadata(t.tokens2[1+(o<<1)]):null;lm(this._domNode,gm("table.tm-metadata-table",void 0,gm("tbody",void 0,gm("tr",void 0,gm("td.tm-metadata-key",void 0,"language"),gm("td.tm-metadata-value",void 0,"".concat(d?d.languageId:"-?-"))),gm("tr",void 0,gm("td.tm-metadata-key",void 0,"token type"),gm("td.tm-metadata-value",void 0,"".concat(d?this._tokenTypeToString(d.tokenType):"-?-"))),gm("tr",void 0,gm("td.tm-metadata-key",void 0,"font style"),gm("td.tm-metadata-value",void 0,"".concat(d?this._fontStyleToString(d.fontStyle):"-?-"))),gm("tr",void 0,gm("td.tm-metadata-key",void 0,"foreground"),gm("td.tm-metadata-value",void 0,"".concat(d?XC.Format.CSS.formatHex(d.foreground):"-?-"))),gm("tr",void 0,gm("td.tm-metadata-key",void 0,"background"),gm("td.tm-metadata-value",void 0,"".concat(d?XC.Format.CSS.formatHex(d.background):"-?-")))))),lm(this._domNode,gm("hr.tokens-inspect-separator")),n<t.tokens1.length&&lm(this._domNode,gm("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}},{key:"_decodeMetadata",value:function(e){var t=Rh.getColorMap(),n=Rx.getLanguageId(e),i=Rx.getTokenType(e),r=Rx.getFontStyle(e),o=Rx.getForeground(e),a=Rx.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(n),tokenType:i,fontStyle:r,foreground:t[o],background:t[a]}}},{key:"_tokenTypeToString",value:function(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}},{key:"_fontStyleToString",value:function(e){var t="";return 1&e&&(t+="italic "),2&e&&(t+="bold "),4&e&&(t+="underline "),8&e&&(t+="strikethrough "),0===t.length&&(t="---"),t}},{key:"_getTokensAtLine",value:function(e){var t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),i=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:n.tokens,tokens2:i.tokens,endState:n.endState}}},{key:"_getStateBeforeLine",value:function(e){for(var t=this._tokenizationSupport.getInitialState(),n=1;n<e;n++){t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t).endState}return t}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return{position:this._editor.getPosition(),preference:[2,1]}}}]),t}(Ru);NCe._ID="editor.contrib.inspectTokensWidget",B_(LCe.ID,LCe,4),O_(DCe);var ICe,ECe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},MCe=function(e,t){return function(n,i){t(n,i,e)}},TCe=(jn=function(){function e(t,n){u(this,e),this.quickInputService=t,this.keybindingService=n,this.registry=i_.as(xU)}return h(e,[{key:"provide",value:function(e){var t=this,n=new Tu;return n.add(e.onDidAccept((function(){var n=C(e.selectedItems,1)[0];n&&t.quickInputService.quickAccess.show(n.prefix,{preserveValue:!0})}))),n.add(e.onDidChangeValue((function(e){var n=t.registry.getQuickAccessProvider(e.substr(ICe.PREFIX.length));n&&n.prefix&&n.prefix!==ICe.PREFIX&&t.quickInputService.quickAccess.show(n.prefix,{preserveValue:!0})}))),e.items=this.getQuickAccessProviders().filter((function(e){return e.prefix!==ICe.PREFIX})),n}},{key:"getQuickAccessProviders",value:function(){var e=this;return this.registry.getQuickAccessProviders().sort((function(e,t){return e.prefix.localeCompare(t.prefix)})).flatMap((function(t){return e.createPicks(t)}))}},{key:"createPicks",value:function(e){var t=this;return e.helpEntries.map((function(n){var i=n.prefix||e.prefix,r=i||"…";return{prefix:i,label:r,keybinding:n.commandId?t.keybindingService.lookupKeybinding(n.commandId):void 0,ariaLabel:Xa("helpPickAriaLabel","{0}, {1}",r,n.description),description:n.description}}))}}]),e}(),ICe=jn,jn.PREFIX="?",jn);TCe=ICe=ECe([MCe(0,TU),MCe(1,ZI)],TCe),i_.as(xU).registerQuickAccessProvider({ctor:TCe,prefix:"",helpEntries:[{description:JA.helpQuickAccessActionLabel}]});var RCe=function(){function e(t){u(this,e),this.options=t,this.rangeHighlightDecorationId=void 0}return h(e,[{key:"provide",value:function(e,t,n){var i,r=this,o=new Tu;e.canAcceptInBackground=!!(null===(i=this.options)||void 0===i?void 0:i.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;var a=o.add(new Pu);return a.value=this.doProvide(e,t,n),o.add(this.onDidActiveTextEditorControlChange((function(){a.value=void 0,a.value=r.doProvide(e,t)}))),o}},{key:"doProvide",value:function(e,t,n){var i=this,r=new Tu,o=this.activeTextEditorControl;if(o&&this.canProvideWithTextEditor(o)){var a={editor:o},s=A9(o);if(s){var l,u=null!==(l=o.saveViewState())&&void 0!==l?l:void 0;r.add(s.onDidChangeCursorPosition((function(){var e;u=null!==(e=o.saveViewState())&&void 0!==e?e:void 0}))),a.restoreViewState=function(){u&&o===i.activeTextEditorControl&&o.restoreViewState(u)},r.add(Du(t.onCancellationRequested)((function(){var e;return null===(e=a.restoreViewState)||void 0===e?void 0:e.call(a)})))}r.add(Mu((function(){return i.clearDecorations(o)}))),r.add(this.provideWithTextEditor(a,e,t,n))}else r.add(this.provideWithoutTextEditor(e,t));return r}},{key:"canProvideWithTextEditor",value:function(e){return!0}},{key:"gotoLocation",value:function(e,t){var n=e.editor;n.setSelection(t.range,"code.jump"),n.revealRangeInCenter(t.range,0),t.preserveFocus||n.focus();var i=n.getModel();i&&"getLineContent"in i&&bR("".concat(i.getLineContent(t.range.startLineNumber)))}},{key:"getModel",value:function(e){var t;return R9(e)?null===(t=e.getModel())||void 0===t?void 0:t.modified:e.getModel()}},{key:"addDecorations",value:function(e,t){var n=this;e.changeDecorations((function(e){var i=[];n.rangeHighlightDecorationId&&(i.push(n.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(n.rangeHighlightDecorationId.rangeHighlightId),n.rangeHighlightDecorationId=void 0);var r=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:OS(cB),position:dw.Full}}}],o=C(e.deltaDecorations(i,r),2),a=o[0],s=o[1];n.rangeHighlightDecorationId={rangeHighlightId:a,overviewRulerDecorationId:s}}))}},{key:"clearDecorations",value:function(e){var t=this.rangeHighlightDecorationId;t&&(e.changeDecorations((function(e){e.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])})),this.rangeHighlightDecorationId=void 0)}}]),e}(),ACe=function(e){function t(){return u(this,t),l(this,t,[{canAcceptInBackground:!0}])}return p(t,e),h(t,[{key:"provideWithoutTextEditor",value:function(e){var t=Xa("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,Ru.None}},{key:"provideWithTextEditor",value:function(e,n,i){var r=this,o=e.editor,a=new Tu;a.add(n.onDidAccept((function(t){var i=C(n.selectedItems,1)[0];if(i){if(!r.isValidLineNumber(o,i.lineNumber))return;r.gotoLocation(e,{range:r.toRange(i.lineNumber,i.column),keyMods:n.keyMods,preserveFocus:t.inBackground}),t.inBackground||n.hide()}})));var s=function(){var e=r.parsePosition(o,n.value.trim().substr(t.PREFIX.length)),i=r.getPickLabel(o,e.lineNumber,e.column);if(n.items=[{lineNumber:e.lineNumber,column:e.column,label:i}],n.ariaLabel=i,r.isValidLineNumber(o,e.lineNumber)){var a=r.toRange(e.lineNumber,e.column);o.revealRangeInCenter(a,0),r.addDecorations(o,a)}else r.clearDecorations(o)};s(),a.add(n.onDidChangeValue((function(){return s()})));var l=A9(o);l&&(2===l.getOptions().get(68).renderType&&(l.updateOptions({lineNumbers:"on"}),a.add(Mu((function(){return l.updateOptions({lineNumbers:"relative"})})))));return a}},{key:"toRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}},{key:"parsePosition",value:function(e,t){var n=t.split(/,|:|#/).map((function(e){return parseInt(e,10)})).filter((function(e){return!isNaN(e)})),i=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:i+n[0],column:n[1]}}},{key:"getPickLabel",value:function(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?Xa("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):Xa("gotoLineLabel","Go to line {0}.",t);var i=e.getPosition()||{lineNumber:1,column:1},r=this.lineCount(e);return r>1?Xa("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",i.lineNumber,i.column,r):Xa("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",i.lineNumber,i.column)}},{key:"isValidLineNumber",value:function(e,t){return!(!t||"number"!=typeof t)&&(t>0&&t<=this.lineCount(e))}},{key:"isValidColumn",value:function(e,t,n){if(!n||"number"!=typeof n)return!1;var i=this.getModel(e);if(!i)return!1;var r={lineNumber:t,column:n};return i.validatePosition(r).equals(r)}},{key:"lineCount",value:function(e){var t,n;return null!==(n=null===(t=this.getModel(e))||void 0===t?void 0:t.getLineCount())&&void 0!==n?n:0}}]),t}(RCe);ACe.PREFIX=":";var PCe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},OCe=function(e,t){return function(n,i){t(n,i,e)}},FCe=function(e){function t(e){var n;return u(this,t),(n=l(this,t)).editorService=e,n.onDidActiveTextEditorControlChange=Au.None,n}return p(t,e),h(t,[{key:"activeTextEditorControl",get:function(){var e;return null!==(e=this.editorService.getFocusedCodeEditor())&&void 0!==e?e:void 0}}]),t}(ACe);FCe=PCe([OCe(0,Ym)],FCe);var WCe=(Kn=function(e){function t(){return u(this,t),l(this,t,[{id:t.ID,label:$A.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:p0.focus,primary:2085,mac:{primary:293},weight:100}}])}return p(t,e),h(t,[{key:"run",value:function(e){e.get(TU).quickAccess.show(FCe.PREFIX)}}]),t}(M_),Kn.ID="editor.action.gotoLine",Kn);O_(WCe),i_.as(xU).registerQuickAccessProvider({ctor:FCe,prefix:FCe.PREFIX,helpEntries:[{description:$A.gotoLineActionLabel,commandId:WCe.ID}]});var BCe=[void 0,[]];function HCe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=t;return r.values&&r.values.length>1?function(e,t,n,i){var r=0,o=[],a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d,h=C(VCe(e,u.value,n,i),2),f=h[0],g=h[1];if("number"!=typeof f)return BCe;r+=f,(d=o).push.apply(d,x(g))}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return[r,zCe(o)]}(e,r.values,n,i):VCe(e,t,n,i)}function VCe(e,t,n,i){var r=TM(t.original,t.originalLowercase,n,e,e.toLowerCase(),i,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return r?[r[0],yM(r)]:BCe}function zCe(e){var t=e.sort((function(e,t){return e.start-t.start})),n=[],i=void 0,r=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i&&UCe(i,u)?(i.start=Math.min(i.start,u.start),i.end=Math.max(i.end,u.end)):(i=u,n.push(u))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}function UCe(e,t){return!(e.end<t.start)&&!(t.end<e.start)}function jCe(e){return e.startsWith('"')&&e.endsWith('"')}function KCe(e){"string"!=typeof e&&(e="");var t=e.toLowerCase(),n=qCe(e),i=n.pathNormalized,r=n.normalized,o=n.normalizedLowercase,a=i.indexOf(qc)>=0,s=jCe(e),l=void 0,u=e.split(" ");if(u.length>1){var c=!0,d=!1,h=void 0;try{for(var f,g=u[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var v=f.value,p=jCe(v),m=qCe(v),y=m.pathNormalized,_=m.normalized,b=m.normalizedLowercase;_&&(l||(l=[]),l.push({original:v,originalLowercase:v.toLowerCase(),pathNormalized:y,normalized:_,normalizedLowercase:b,expectContiguousMatch:p}))}}catch(e){d=!0,h=e}finally{try{c||null==g.return||g.return()}finally{if(d)throw h}}}return{original:e,originalLowercase:t,pathNormalized:i,normalized:r,normalizedLowercase:o,values:l,containsPathSeparator:a,expectContiguousMatch:s}}function qCe(e){var t,n=function(e){return e.replace(/\*/g,"")}(t=ps?e.replace(/\//g,qc):e.replace(/\\/g,qc)).replace(/\s|"/g,"");return{pathNormalized:t,normalized:n,normalizedLowercase:n.toLowerCase()}}function GCe(e){return Array.isArray(e)?KCe(e.map((function(e){return e.original})).join(" ")):KCe(e.original)}var ZCe,YCe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},QCe=function(e,t){return function(n,i){t(n,i,e)}},XCe=(qn=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.create(null);return u(this,t),(i=l(this,t,[r]))._languageFeaturesService=e,i._outlineModelService=n,i.options=r,i.options.canAcceptInBackground=!0,i}return p(t,e),h(t,[{key:"provideWithoutTextEditor",value:function(e){return this.provideLabelPick(e,Xa("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),Ru.None}},{key:"provideWithTextEditor",value:function(e,t,n,i){var r=e.editor,o=this.getModel(r);return o?this._languageFeaturesService.documentSymbolProvider.has(o)?this.doProvideWithEditorSymbols(e,o,t,n,i):this.doProvideWithoutEditorSymbols(e,o,t,n):Ru.None}},{key:"doProvideWithoutEditorSymbols",value:function(e,t,n,i){var r=new Tu;this.provideLabelPick(n,Xa("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information."));var o=this;return s((function(){return E(this,(function(a){switch(a.label){case 0:return[4,o.waitForLanguageSymbolRegistry(t,r)];case 1:return!a.sent()||i.isCancellationRequested||r.add(o.doProvideWithEditorSymbols(e,t,n,i)),[2]}}))}))(),r}},{key:"provideLabelPick",value:function(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}},{key:"waitForLanguageSymbolRegistry",value:function(e,t){var n=this;return s((function(){var i,r;return E(this,(function(o){return n._languageFeaturesService.documentSymbolProvider.has(e)?[2,!0]:(i=new Ng,r=t.add(n._languageFeaturesService.documentSymbolProvider.onDidChange((function(){n._languageFeaturesService.documentSymbolProvider.has(e)&&(r.dispose(),i.complete(!0))}))),t.add(Mu((function(){return i.complete(!1)}))),[2,i.p])}))}))()}},{key:"doProvideWithEditorSymbols",value:function(e,t,n,i,r){var o,a=this,l=e.editor,u=new Tu;u.add(n.onDidAccept((function(t){var i,o=C(n.selectedItems,1)[0];o&&o.range&&(a.gotoLocation(e,{range:o.range.selection,keyMods:n.keyMods,preserveFocus:t.inBackground}),null==r||null===(i=r.handleAccept)||void 0===i||i.call(r,o),t.inBackground||n.hide())}))),u.add(n.onDidTriggerItemButton((function(t){var i=t.item;i&&i.range&&(a.gotoLocation(e,{range:i.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())})));var c=this.getDocumentSymbols(t,i),d=void 0,h=this,f=function(){var e=s((function(e){var r,o,a;return E(this,(function(s){switch(s.label){case 0:null==d||d.dispose(!0),n.busy=!1,d=new rc(i),n.busy=!0,s.label=1;case 1:return s.trys.push([1,,3,4]),r=KCe(n.value.substr(ZCe.PREFIX.length).trim()),[4,h.doGetSymbolPicks(c,r,void 0,d.token,t)];case 2:return o=s.sent(),i.isCancellationRequested?[2]:(o.length>0?(n.items=o,e&&0===r.original.length&&(a=Vw(o,(function(t){return Boolean("separator"!==t.type&&t.range&&hd.containsPosition(t.range.decoration,e))})),a&&(n.activeItems=[a]))):r.original.length>0?h.provideLabelPick(n,Xa("noMatchingSymbolResults","No matching editor symbols")):h.provideLabelPick(n,Xa("noSymbolResults","No editor symbols")),[3,4]);case 3:return i.isCancellationRequested||(n.busy=!1),[7];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return u.add(n.onDidChangeValue((function(){return f(void 0)}))),f(null===(o=l.getSelection())||void 0===o?void 0:o.getPosition()),u.add(n.onDidChangeActive((function(){var e=C(n.activeItems,1)[0];e&&e.range&&(l.revealRangeInCenter(e.range.selection,0),a.addDecorations(l,e.range.decoration))}))),u}},{key:"doGetSymbolPicks",value:function(e,t,n,i,r){var o=this;return s((function(){var a,s,l,u,c,d,h,f,g,v,p,m,y,k,w,S,L,D,N,I,M,T,R,A,P,O,F,W,B,H,V,z,U,j,K,q,G;return E(this,(function(E){switch(E.label){case 0:return[4,e];case 1:if(l=E.sent(),i.isCancellationRequested)return[2,[]];for(u=0===t.original.indexOf(ZCe.SCOPE_PREFIX),c=u?1:0,t.values&&t.values.length>1?(d=GCe(t.values[0]),h=GCe(t.values.slice(1))):d=t,(g=null===(s=o.options)||void 0===s||null===(a=s.openSideBySideDirection)||void 0===a?void 0:a.call(s))&&(f=[{iconClass:"right"===g?ny.asClassName(bd.splitHorizontal):ny.asClassName(bd.splitVertical),tooltip:"right"===g?Xa("openToSide","Open to the Side"):Xa("openToBottom","Open to the Bottom")}]),v=[],p=0;p<l.length;p++){if(m=l[p],y=Gh(m.name),k="$(".concat(Md.toIcon(m.kind).id,") ").concat(y),w=k.length-y.length,S=m.containerName,(null==n?void 0:n.extraContainerLabel)&&(S=S?"".concat(n.extraContainerLabel," • ").concat(S):n.extraContainerLabel),L=void 0,D=void 0,N=void 0,I=void 0,t.original.length>c){if(M=!1,d!==t&&(T=C(HCe(k,b(_({},t),{values:void 0}),c,w),2),L=T[0],D=T[1],"number"==typeof L&&(M=!0)),"number"!=typeof L&&(R=C(HCe(k,d,c,w),2),L=R[0],D=R[1],"number"!=typeof L))continue;if(!M&&h){if(S&&h.original.length>0&&(A=C(HCe(S,h),2),N=A[0],I=A[1]),"number"!=typeof N)continue;"number"==typeof L&&(L+=N)}}P=m.tags&&m.tags.indexOf(1)>=0,v.push({index:p,kind:m.kind,score:L,label:k,ariaLabel:Rd(m.name,m.kind),description:S,highlights:P?void 0:{label:D,description:I},range:{selection:hd.collapseToStart(m.selectionRange),decoration:m.range},uri:r.uri,symbolName:y,strikethrough:P,buttons:f})}if(O=v.sort((function(e,t){return u?o.compareByKindAndScore(e,t):o.compareByScore(e,t)})),F=[],u){W=function(){H&&"number"==typeof B&&V>0&&(H.label=jh(eSe[B]||JCe,V))},B=void 0,H=void 0,V=0,z=!0,U=!1,j=void 0;try{for(K=O[Symbol.iterator]();!(z=(q=K.next()).done);z=!0)G=q.value,B!==G.kind?(W(),B=G.kind,V=1,H={type:"separator"},F.push(H)):V++,F.push(G)}catch(e){U=!0,j=e}finally{try{z||null==K.return||K.return()}finally{if(U)throw j}}W()}else O.length>0&&(F=[{label:Xa("symbols","symbols ({0})",v.length),type:"separator"}].concat(x(O)));return[2,F]}}))}))()}},{key:"compareByScore",value:function(e,t){if("number"!=typeof e.score&&"number"==typeof t.score)return 1;if("number"==typeof e.score&&"number"!=typeof t.score)return-1;if("number"==typeof e.score&&"number"==typeof t.score){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}},{key:"compareByKindAndScore",value:function(e,t){var n=eSe[e.kind]||JCe,i=eSe[t.kind]||JCe,r=n.localeCompare(i);return 0===r?this.compareByScore(e,t):r}},{key:"getDocumentSymbols",value:function(e,t){var n=this;return s((function(){var i;return E(this,(function(r){switch(r.label){case 0:return[4,n._outlineModelService.getOrCreate(e,t)];case 1:return i=r.sent(),[2,t.isCancellationRequested?[]:i.asListOfDocumentSymbols()]}}))}))()}}]),t}(RCe),ZCe=qn,qn.PREFIX="@",qn.SCOPE_PREFIX=":",qn.PREFIX_BY_CATEGORY="".concat(qn.PREFIX).concat(qn.SCOPE_PREFIX),qn);XCe=ZCe=YCe([QCe(0,wS),QCe(1,ohe)],XCe);var $Ce,JCe=Xa("property","properties ({0})"),eSe=(f($Ce={},5,Xa("method","methods ({0})")),f($Ce,11,Xa("function","functions ({0})")),f($Ce,8,Xa("_constructor","constructors ({0})")),f($Ce,12,Xa("variable","variables ({0})")),f($Ce,4,Xa("class","classes ({0})")),f($Ce,22,Xa("struct","structs ({0})")),f($Ce,23,Xa("event","events ({0})")),f($Ce,24,Xa("operator","operators ({0})")),f($Ce,10,Xa("interface","interfaces ({0})")),f($Ce,2,Xa("namespace","namespaces ({0})")),f($Ce,3,Xa("package","packages ({0})")),f($Ce,25,Xa("typeParameter","type parameters ({0})")),f($Ce,1,Xa("modules","modules ({0})")),f($Ce,6,Xa("property","properties ({0})")),f($Ce,9,Xa("enum","enumerations ({0})")),f($Ce,21,Xa("enumMember","enumeration members ({0})")),f($Ce,14,Xa("string","strings ({0})")),f($Ce,0,Xa("file","files ({0})")),f($Ce,17,Xa("array","arrays ({0})")),f($Ce,15,Xa("number","numbers ({0})")),f($Ce,16,Xa("boolean","booleans ({0})")),f($Ce,18,Xa("object","objects ({0})")),f($Ce,19,Xa("key","keys ({0})")),f($Ce,7,Xa("field","fields ({0})")),f($Ce,13,Xa("constant","constants ({0})")),$Ce),tSe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},nSe=function(e,t){return function(n,i){t(n,i,e)}},iSe=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t,[n,i])).editorService=e,r.onDidActiveTextEditorControlChange=Au.None,r}return p(t,e),h(t,[{key:"activeTextEditorControl",get:function(){var e;return null!==(e=this.editorService.getFocusedCodeEditor())&&void 0!==e?e:void 0}}]),t}(XCe);iSe=tSe([nSe(0,Ym),nSe(1,wS),nSe(2,ohe)],iSe);var rSe=function(e){function t(){return u(this,t),l(this,t,[{id:t.ID,label:tP.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:p0.hasDocumentSymbolProvider,kbOpts:{kbExpr:p0.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}}])}return p(t,e),h(t,[{key:"run",value:function(e){e.get(TU).quickAccess.show(XCe.PREFIX,{itemActivation:NU.NONE})}}]),t}(M_);rSe.ID="editor.action.quickOutline",O_(rSe),i_.as(xU).registerQuickAccessProvider({ctor:iSe,prefix:XCe.PREFIX,helpEntries:[{description:tP.quickOutlineActionLabel,prefix:XCe.PREFIX,commandId:rSe.ID},{description:tP.quickOutlineByCategoryActionLabel,prefix:XCe.PREFIX_BY_CATEGORY}]});var oSe,aSe=function(){function e(){u(this,e),this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}return h(e,[{key:"calculateScores",value:function(e,t){var n=this.computeEmbedding(e),i=new Map,r=[],o=!0,a=!1,s=void 0;try{for(var l,u=this.documents[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=C(l.value,2),d=c[0],h=c[1];if(t.isCancellationRequested)return[];var f=!0,g=!1,v=void 0;try{for(var p,m=h.chunks[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var y=p.value,_=this.computeSimilarityScore(y,n,i);_>0&&r.push({key:d,score:_})}}catch(e){g=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw v}}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return r}},{key:"updateDocuments",value:function(t){var n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value.key;this.deleteDocument(s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}var l=!0,u=!1,c=void 0;try{for(var d,h=t[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value,g=[],v=!0,p=!1,m=void 0;try{for(var y,_=f.textChunks[Symbol.iterator]();!(v=(y=_.next()).done);v=!0){var b=y.value,k=e.termFrequencies(b),w=!0,C=!1,S=void 0;try{for(var x,L=k.keys()[Symbol.iterator]();!(w=(x=L.next()).done);w=!0){var D,N=x.value;this.chunkOccurrences.set(N,(null!==(D=this.chunkOccurrences.get(N))&&void 0!==D?D:0)+1)}}catch(e){C=!0,S=e}finally{try{w||null==L.return||L.return()}finally{if(C)throw S}}g.push({text:b,tf:k})}}catch(e){p=!0,m=e}finally{try{v||null==_.return||_.return()}finally{if(p)throw m}}this.chunkCount+=g.length,this.documents.set(f.key,{chunks:g})}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return this}},{key:"deleteDocument",value:function(e){var t=this.documents.get(e);if(t){this.documents.delete(e),this.chunkCount-=t.chunks.length;var n=!0,i=!1,r=void 0;try{for(var o,a=t.chunks[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=!0,u=!1,c=void 0;try{for(var d,h=s.tf.keys()[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value,g=this.chunkOccurrences.get(f);if("number"==typeof g){var v=g-1;v<=0?this.chunkOccurrences.delete(f):this.chunkOccurrences.set(f,v)}}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}},{key:"computeSimilarityScore",value:function(e,t,n){var i=0,r=!0,o=!1,a=void 0;try{for(var s,l=Object.entries(t)[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=C(s.value,2),c=u[0],d=u[1],h=e.tf.get(c);if(h){var f=n.get(c);"number"!=typeof f&&(f=this.computeIdf(c),n.set(c,f)),i+=h*f*d}}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return i}},{key:"computeEmbedding",value:function(t){var n=e.termFrequencies(t);return this.computeTfidf(n)}},{key:"computeIdf",value:function(e){var t,n=null!==(t=this.chunkOccurrences.get(e))&&void 0!==t?t:0;return n>0?Math.log((this.chunkCount+1)/n):0}},{key:"computeTfidf",value:function(e){var t=Object.create(null),n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=C(o.value,2),l=s[0],u=s[1],c=this.computeIdf(l);c>0&&(t[l]=u*c)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}}],[{key:"termFrequencies",value:function(t){return function(e){var t=new Map,n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s,l=o.value;t.set(l,(null!==(s=t.get(l))&&void 0!==s?s:0)+1)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}(e.splitTerms(t))}},{key:"splitTerms",value:function(e){var t,n,i,r,o,a,s,l,u,c,d,h,f,g,v,p;return E(this,(function(m){switch(m.label){case 0:t=function(e){return e.toLowerCase()},n=!0,i=!1,r=void 0,m.label=1;case 1:m.trys.push([1,13,14,15]),o=e.matchAll(RegExp("\\b\\p{Letter}[\\p{Letter}\\d]{2,}\\b","gu"))[Symbol.iterator](),m.label=2;case 2:return(n=(a=o.next()).done)?[3,12]:(s=C(a.value,1),l=s[0],[4,t(l)]);case 3:if(m.sent(),!((u=l.replace(/([a-z])([A-Z])/g,"$1 $2").split(/\s+/g)).length>1))return[3,11];c=!0,d=!1,h=void 0,m.label=4;case 4:m.trys.push([4,9,10,11]),f=u[Symbol.iterator](),m.label=5;case 5:return(c=(g=f.next()).done)?[3,8]:(v=g.value).length>2&&RegExp("\\p{Letter}{3,}","gu").test(v)?[4,t(v)]:[3,7];case 6:m.sent(),m.label=7;case 7:return c=!0,[3,5];case 8:return[3,11];case 9:return p=m.sent(),d=!0,h=p,[3,11];case 10:try{c||null==f.return||f.return()}finally{if(d)throw h}return[7];case 11:return n=!0,[3,2];case 12:return[3,15];case 13:return p=m.sent(),i=!0,r=p,[3,15];case 14:try{n||null==o.return||o.return()}finally{if(i)throw r}return[7];case 15:return[2]}}))}}]),e}();function sSe(e){var t=e;return Array.isArray(t.items)}function lSe(e){var t=e;return!!t.picks&&t.additionalPicks instanceof Promise}!function(e){e[e.NO_ACTION=0]="NO_ACTION",e[e.CLOSE_PICKER=1]="CLOSE_PICKER",e[e.REFRESH_PICKER=2]="REFRESH_PICKER",e[e.REMOVE_ITEM=3]="REMOVE_ITEM"}(oSe||(oSe={}));var uSe,cSe,dSe=function(e){function t(e,n){var i;return u(this,t),(i=l(this,t)).prefix=e,i.options=n,i}return p(t,e),h(t,[{key:"provide",value:function(e,t,n){var i,r=new Tu;e.canAcceptInBackground=!!(null===(i=this.options)||void 0===i?void 0:i.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;var o=void 0,a=r.add(new Pu),l=this,u=function(){var i=s((function(){var i,r,u,c,d,h,f,g;return E(this,(function(v){switch(v.label){case 0:return r=a.value=new Tu,null==o||o.dispose(!0),e.busy=!1,o=new rc(t),u=o.token,c=e.value.substring(l.prefix.length),(null===(i=l.options)||void 0===i?void 0:i.shouldSkipTrimPickFilter)||(c=c.trim()),d=l._getPicks(c,r,u,n),h=function(t,n){var i,r=void 0;if(sSe(t)?(i=t.items,r=t.active):i=t,0===i.length){var o;if(n)return!1;(c.length>0||e.hideInput)&&(null===(o=l.options)||void 0===o?void 0:o.noResultsPick)&&(i=Wa(l.options.noResultsPick)?[l.options.noResultsPick(c)]:[l.options.noResultsPick])}return e.items=i,r&&(e.activeItems=[r]),!0},f=function(){var t=s((function(t){var n,i;return E(this,(function(r){switch(r.label){case 0:return n=!1,i=!1,[4,Promise.all([s((function(){return E(this,(function(e){switch(e.label){case 0:return"number"!=typeof t.mergeDelay?[3,2]:[4,mg(t.mergeDelay)];case 1:if(e.sent(),u.isCancellationRequested)return[2];e.label=2;case 2:return i||(n=h(t.picks,!0)),[2]}}))}))(),s((function(){var r,o,a,s,l,c,d;return E(this,(function(f){switch(f.label){case 0:e.busy=!0,f.label=1;case 1:return f.trys.push([1,,3,4]),[4,t.additionalPicks];case 2:return r=f.sent(),u.isCancellationRequested?[2]:(a=void 0,sSe(t.picks)?(o=t.picks.items,a=t.picks.active):o=t.picks,l=void 0,sSe(r)?(s=r.items,l=r.active):s=r,(s.length>0||!n)&&(c=void 0,a||l||(d=e.activeItems[0])&&-1!==o.indexOf(d)&&(c=d),h({items:x(o).concat(x(s)),active:a||l||c})),[3,4]);case 3:return u.isCancellationRequested||(e.busy=!1),i=!0,[7];case 4:return[2]}}))}))()])];case 1:return r.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}(),null!==d?[3,1]:[3,11];case 1:return lSe(d)?[4,f(d)]:[3,3];case 2:return v.sent(),[3,11];case 3:return d instanceof Promise?[3,4]:(h(d),[3,11]);case 4:e.busy=!0,v.label=5;case 5:return v.trys.push([5,,10,11]),[4,d];case 6:return g=v.sent(),u.isCancellationRequested?[2]:lSe(g)?[4,f(g)]:[3,8];case 7:return v.sent(),[3,9];case 8:h(g),v.label=9;case 9:return[3,11];case 10:return u.isCancellationRequested||(e.busy=!1),[7];case 11:return[2]}}))}));return function(){return i.apply(this,arguments)}}();r.add(e.onDidChangeValue((function(){return u()}))),u(),r.add(e.onDidAccept((function(t){var i;if(null==n?void 0:n.handleAccept)return t.inBackground||e.hide(),void(null===(i=n.handleAccept)||void 0===i||i.call(n,e.activeItems[0]));var r=C(e.selectedItems,1)[0];"function"==typeof(null==r?void 0:r.accept)&&(t.inBackground||e.hide(),r.accept(e.keyMods,t))})));var c=function(){var n=s((function(n,i){var r,o,a,s,l,c,d,h,f,g,v;return E(this,(function(p){switch(p.label){case 0:return"function"!=typeof i.trigger?[2]:(a=null!==(o=null===(r=i.buttons)||void 0===r?void 0:r.indexOf(n))&&void 0!==o?o:-1)>=0?"number"!=typeof(s=i.trigger(a,e.keyMods))?[3,1]:(c=s,[3,3]):[3,4];case 1:return[4,s];case 2:c=p.sent(),p.label=3;case 3:if(l=c,t.isCancellationRequested)return[2];switch(l){case oSe.NO_ACTION:break;case oSe.CLOSE_PICKER:e.hide();break;case oSe.REFRESH_PICKER:u();break;case oSe.REMOVE_ITEM:-1!==(d=e.items.indexOf(i))&&(h=e.items.slice(),f=h.splice(d,1),g=e.activeItems.filter((function(e){return e!==f[0]})),v=e.keepScrollPosition,e.keepScrollPosition=!0,e.items=h,g&&(e.activeItems=g),e.keepScrollPosition=v)}p.label=4;case 4:return[2]}}))}));return function(e,t){return n.apply(this,arguments)}}();return r.add(e.onDidTriggerItemButton((function(e){var t=e.button,n=e.item;return c(t,n)}))),r.add(e.onDidTriggerSeparatorButton((function(e){var t=e.button,n=e.separator;return c(t,n)}))),r}}]),t}(Ru),hSe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},fSe=function(e,t){return function(n,i){t(n,i,e)}},gSe=(Gn=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t,[uSe.PREFIX,e])).instantiationService=n,s.keybindingService=i,s.commandService=r,s.telemetryService=o,s.dialogService=a,s.commandsHistory=s._register(s.instantiationService.createInstance(vSe)),s.options=e,s}return p(t,e),h(t,[{key:"_getPicks",value:function(e,t,n,i){var r=this;return s((function(){var t,o,a,l,u,c,d,h,f,g,v,p,m,y,_,b,k,w,C,S,x,D,N,I,M,T;return E(this,(function(R){switch(R.label){case 0:return[4,r.getCommandPicks(n)];case 1:if(t=R.sent(),n.isCancellationRequested)return[2,[]];o=Du((function(){var i=new aSe;return i.updateDocuments(t.map((function(e){return{key:e.commandId,textChunks:[r.getTfIdfChunk(e)]}}))),function(e){var t,n,i=e.slice(0);i.sort((function(e,t){return t.score-e.score}));var r=null!==(n=null===(t=i[0])||void 0===t?void 0:t.score)&&void 0!==n?n:0;if(r>0){var o=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)l.value.score/=r}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}return i}(i.calculateScores(e,n)).filter((function(e){return e.score>uSe.TFIDF_THRESHOLD})).slice(0,uSe.TFIDF_MAX_RESULTS)})),a=[],l=!0,u=!1,c=void 0;try{for(d=function(){var t,i,s=f.value,l=null!==(t=uSe.WORD_FILTER(e,s.label))&&void 0!==t?t:void 0,u=s.commandAlias&&null!==(i=uSe.WORD_FILTER(e,s.commandAlias))&&void 0!==i?i:void 0;if(l||u)s.highlights={label:l,detail:r.options.showAlias?u:void 0},a.push(s);else if(e===s.commandId)a.push(s);else if(e.length>=3){var c=o();if(n.isCancellationRequested)return{v:[]};var d=c.find((function(e){return e.key===s.commandId}));d&&(s.tfIdfScore=d.score,a.push(s))}},h=t[Symbol.iterator]();!(l=(f=h.next()).done);l=!0)if("object"===L(g=d()))return[2,g.v]}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}v=new Map,p=!0,m=!1,y=void 0;try{for(_=a[Symbol.iterator]();!(p=(b=_.next()).done);p=!0)k=b.value,(w=v.get(k.label))?(k.description=k.commandId,w.description=w.commandId):v.set(k.label,k)}catch(e){m=!0,y=e}finally{try{p||null==_.return||_.return()}finally{if(m)throw y}}for(a.sort((function(e,t){if(e.tfIdfScore&&t.tfIdfScore)return e.tfIdfScore===t.tfIdfScore?e.label.localeCompare(t.label):t.tfIdfScore-e.tfIdfScore;if(e.tfIdfScore)return 1;if(t.tfIdfScore)return-1;var n=r.commandsHistory.peek(e.commandId),i=r.commandsHistory.peek(t.commandId);if(n&&i)return n>i?-1:1;if(n)return-1;if(i)return 1;if(r.options.suggestedCommandIds){var o=r.options.suggestedCommandIds.has(e.commandId),a=r.options.suggestedCommandIds.has(t.commandId);if(o&&a)return 0;if(o)return-1;if(a)return 1}return e.label.localeCompare(t.label)})),C=[],S=!1,x=!0,D=!!r.options.suggestedCommandIds,N=0;N<a.length;N++)T=a[N],0===N&&r.commandsHistory.peek(T.commandId)&&(C.push({type:"separator",label:Xa("recentlyUsed","recently used")}),S=!0),x&&void 0!==T.tfIdfScore&&(C.push({type:"separator",label:Xa("suggested","similar commands")}),x=!1),D&&void 0===T.tfIdfScore&&!r.commandsHistory.peek(T.commandId)&&(null===(I=r.options.suggestedCommandIds)||void 0===I?void 0:I.has(T.commandId))&&(C.push({type:"separator",label:Xa("commonlyUsed","commonly used")}),S=!0,D=!1),!S||void 0!==T.tfIdfScore||r.commandsHistory.peek(T.commandId)||(null===(M=r.options.suggestedCommandIds)||void 0===M?void 0:M.has(T.commandId))||(C.push({type:"separator",label:Xa("morecCommands","other commands")}),S=!1),C.push(r.toCommandPick(T,i));return r.hasAdditionalCommandPicks(e,n)?[2,{picks:C,additionalPicks:s((function(){var o,s,l;return E(this,(function(u){switch(u.label){case 0:return[4,r.getAdditionalCommandPicks(t,a,e,n)];case 1:return s=u.sent(),n.isCancellationRequested?[2,[]]:(l=s.map((function(e){return r.toCommandPick(e,i)})),x&&"separator"!==(null===(o=l[0])||void 0===o?void 0:o.type)&&l.unshift({type:"separator",label:Xa("suggested","similar commands")}),[2,l])}}))}))()}]:[2,C]}}))}))()}},{key:"toCommandPick",value:function(e,t){if("separator"===e.type)return e;var n=this.keybindingService.lookupKeybinding(e.commandId),i=n?Xa("commandPickAriaLabelWithKeybinding","{0}, {1}",e.label,n.getAriaLabel()):e.label,r=this;return b(_({},e),{ariaLabel:i,detail:this.options.showAlias&&e.commandAlias!==e.label?e.commandAlias:void 0,keybinding:n,accept:s((function(){var n,i,o,a;return E(this,(function(s){switch(s.label){case 0:r.commandsHistory.push(e.commandId),r.telemetryService.publicLog2("workbenchActionExecuted",{id:e.commandId,from:null!==(n=null==t?void 0:t.from)&&void 0!==n?n:"quick open"}),s.label=1;case 1:return s.trys.push([1,6,,7]),(null===(o=e.args)||void 0===o?void 0:o.length)?[4,(i=r.commandService).executeCommand.apply(i,[e.commandId].concat(x(e.args)))]:[3,3];case 2:return s.sent(),[3,5];case 3:return[4,r.commandService.executeCommand(e.commandId)];case 4:s.sent(),s.label=5;case 5:return[3,7];case 6:return _u(a=s.sent())||r.dialogService.error(Xa("canNotRun","Command '{0}' resulted in an error",e.label),lne(a)),[3,7];case 7:return[2]}}))}))})}},{key:"getTfIdfChunk",value:function(e){var t=e.label,n=e.commandAlias,i=e.commandDescription,r=t;return n&&n!==t&&(r+=" - ".concat(n)),i&&i.value!==t&&(r+=" - ".concat(i.value===i.original?i.value:"".concat(i.value," (").concat(i.original,")"))),r}}]),t}(dSe),uSe=Gn,Gn.PREFIX=">",Gn.TFIDF_THRESHOLD=.5,Gn.TFIDF_MAX_RESULTS=5,Gn.WORD_FILTER=jE(KE,(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t||0===t.length)return null;var i=null,r=0;for(e=e.toLowerCase(),t=t.toLowerCase();r<t.length&&null===(i=cM(e,t,0,r,n));)r=dM(t,r+1);return i}),GE),Gn);gSe=uSe=hSe([fSe(1,Gm),fSe(2,ZI),fSe(3,ay),fSe(4,b_),fSe(5,nx)],gSe);var vSe=(Zn=function(e){function t(e,n,i){var r;return u(this,t),(r=l(this,t)).storageService=e,r.configurationService=n,r.logService=i,r.configuredCommandsHistoryLength=0,r.updateConfiguration(),r.load(),r.registerListeners(),r}return p(t,e),h(t,[{key:"registerListeners",value:function(){var e=this;this._register(this.configurationService.onDidChangeConfiguration((function(t){return e.updateConfiguration(t)}))),this._register(this.storageService.onWillSaveState((function(t){t.reason===OF.SHUTDOWN&&e.saveState()})))}},{key:"updateConfiguration",value:function(e){e&&!e.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=cSe.getConfiguredCommandHistoryLength(this.configurationService),cSe.cache&&cSe.cache.limit!==this.configuredCommandsHistoryLength&&(cSe.cache.limit=this.configuredCommandsHistoryLength,cSe.hasChanges=!0))}},{key:"load",value:function(){var e,t=this.storageService.get(cSe.PREF_KEY_CACHE,0);if(t)try{e=JSON.parse(t)}catch(t){this.logService.error("[CommandsHistory] invalid data: ".concat(t))}var n,i=cSe.cache=new pw(this.configuredCommandsHistoryLength,1);e&&(n=e.usesLRU?e.entries:e.entries.sort((function(e,t){return e.value-t.value})),n.forEach((function(e){return i.set(e.key,e.value)})));cSe.counter=this.storageService.getNumber(cSe.PREF_KEY_COUNTER,0,cSe.counter)}},{key:"push",value:function(e){cSe.cache&&(cSe.cache.set(e,cSe.counter++),cSe.hasChanges=!0)}},{key:"peek",value:function(e){var t;return null===(t=cSe.cache)||void 0===t?void 0:t.peek(e)}},{key:"saveState",value:function(){if(cSe.cache&&cSe.hasChanges){var e={usesLRU:!0,entries:[]};cSe.cache.forEach((function(t,n){return e.entries.push({key:n,value:t})})),this.storageService.store(cSe.PREF_KEY_CACHE,JSON.stringify(e),0,0),this.storageService.store(cSe.PREF_KEY_COUNTER,cSe.counter,0,0),cSe.hasChanges=!1}}}],[{key:"getConfiguredCommandHistoryLength",value:function(e){var t,n,i=null===(n=e.getValue().workbench)||void 0===n||null===(t=n.commandPalette)||void 0===t?void 0:t.history;return"number"==typeof i?i:cSe.DEFAULT_COMMANDS_HISTORY_LENGTH}}]),t}(Ru),cSe=Zn,Zn.DEFAULT_COMMANDS_HISTORY_LENGTH=50,Zn.PREF_KEY_CACHE="commandPalette.mru.cache",Zn.PREF_KEY_COUNTER="commandPalette.mru.counter",Zn.counter=1,Zn.hasChanges=!1,Zn);vSe=cSe=hSe([fSe(0,BF),fSe(1,qb),fSe(2,k_)],vSe);var pSe=function(e){function t(e,n,i,r,o,a){return u(this,t),l(this,t,[e,n,i,r,o,a])}return p(t,e),h(t,[{key:"getCodeEditorCommandPicks",value:function(){var e=this.activeTextEditorControl;if(!e)return[];var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e.getSupportedActions()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s,l=o.value,u=void 0;(null===(s=l.metadata)||void 0===s?void 0:s.description)&&(u=AF(l.metadata.description)?l.metadata.description:{original:l.metadata.description,value:l.metadata.description}),t.push({commandId:l.id,commandAlias:l.alias,commandDescription:u,label:HM(l.label)||l.id})}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}}]),t}(gSe),mSe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ySe=function(e,t){return function(n,i){t(n,i,e)}},_Se=function(e){function t(e,n,i,r,o,a){var s;return u(this,t),(s=l(this,t,[{showAlias:!1},e,i,r,o,a])).codeEditorService=n,s}return p(t,e),h(t,[{key:"activeTextEditorControl",get:function(){var e;return null!==(e=this.codeEditorService.getFocusedCodeEditor())&&void 0!==e?e:void 0}},{key:"getCommandPicks",value:function(){var e=this;return s((function(){return E(this,(function(t){return[2,e.getCodeEditorCommandPicks()]}))}))()}},{key:"hasAdditionalCommandPicks",value:function(){return!1}},{key:"getAdditionalCommandPicks",value:function(){return s((function(){return E(this,(function(e){return[2,[]]}))}))()}}]),t}(pSe);_Se=mSe([ySe(0,Gm),ySe(1,Ym),ySe(2,ZI),ySe(3,ay),ySe(4,b_),ySe(5,nx)],_Se);var bSe=function(e){function t(){return u(this,t),l(this,t,[{id:t.ID,label:eP.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:p0.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}}])}return p(t,e),h(t,[{key:"run",value:function(e){e.get(TU).quickAccess.show(_Se.PREFIX)}}]),t}(M_);bSe.ID="editor.action.quickCommand",O_(bSe),i_.as(xU).registerQuickAccessProvider({ctor:_Se,prefix:_Se.PREFIX,helpEntries:[{description:eP.quickCommandHelp,commandId:bSe.ID}]});var kSe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":L(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},wSe=function(e,t){return function(n,i){t(n,i,e)}},CSe=function(e){function t(e,n,i,r,o,a,s){return u(this,t),l(this,t,[!0,e,n,i,r,o,a,s])}return p(t,e),t}(nse);CSe=kSe([wSe(1,Ky),wSe(2,Ym),wSe(3,rx),wSe(4,Gm),wSe(5,BF),wSe(6,qb)],CSe),B_(nse.ID,CSe,4);var SSe=function(e){function t(){var e;return u(this,t),(e=l(this,t,[{id:"editor.action.toggleHighContrast",label:iP.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}]))._originalThemeName=null,e}return p(t,e),h(t,[{key:"run",value:function(e,t){var n=e.get(GZ),i=n.getColorTheme();RS(i.type)?(n.setTheme(this._originalThemeName||(AS(i.type)?FZ:OZ)),this._originalThemeName=null):(n.setTheme(AS(i.type)?WZ:BZ),this._originalThemeName=i.themeName)}}]),t}(M_);function xSe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript",t=null,i=n(null);function r(){return o.apply(this,arguments)}function o(){return o=s((function(){var e;return E(this,(function(n){switch(n.label){case 0:return[4,null==t||null===(e=t.getAction("editor.action.formatDocument"))||void 0===e?void 0:e.run()];case 1:return n.sent(),[2]}}))})),o.apply(this,arguments)}function a(e){null==t||t.updateOptions(e)}function l(e){return null==t?void 0:t.getOption(e)}return y((function(){t&&t.dispose()})),{monacoEditorRef:i,createEditor:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i.value)return t=h8.create(i.value,_({model:h8.createModel("",e),minimap:{enabled:!0},roundedSelection:!0,theme:"vs",multiCursorModifier:"ctrlCmd",scrollbar:{verticalScrollbarSize:8,horizontalScrollbarSize:8},lineNumbers:"on",tabSize:2,fontSize:16,autoIndent:"advanced",automaticLayout:!0},n))},getEditor:function(){return t},updateVal:function(e){K((function(){l(h8.EditorOption.readOnly)&&a({readOnly:!1}),null==t||t.setValue(e),setTimeout(s((function(){return E(this,(function(e){switch(e.label){case 0:return[4,r()];case 1:return e.sent(),[2]}}))})),10)}))},updateOptions:a,getOption:l,formatDoc:r}}O_(SSe);var LSe=A({__name:"monaco",props:{width:{default:"100%"},height:{default:"100%"},language:{default:"javascript"},editorOption:{default:function(){return{}}},modelValue:{default:""}},emits:["blue","update:modelValue"],setup:function(e,t){var n=t.expose,i=t.emit,r=e,o=i,s=O((function(){return{width:"string"==typeof r.width?r.width:r.width+"px",height:"string"==typeof r.height?r.height:r.height+"px"}})),l=xSe(r.language),u=l.monacoEditorRef,c=l.createEditor,d=l.updateVal,h=l.updateOptions,f=l.getEditor;function g(e){var t;e!==(null===(t=f())||void 0===t?void 0:t.getValue())&&d(e)}return D((function(){var e=c(r.editorOption);g(r.modelValue),null==e||e.onDidChangeModelContent((function(){o("update:modelValue",e.getValue())})),null==e||e.onDidBlurEditorText((function(){o("blue")}))})),a((function(){return r.modelValue}),(function(){g(r.modelValue)})),n({updateOptions:h}),function(e,t){return G(),Z("div",{ref_key:"monacoEditorRef",ref:u,style:Y(s.value)},null,4)}}}),DSe={class:"flex flex-col w-70% py-20px ml-20px"},NSe={class:"w-50% inline-block float-left"},ISe={class:"w-50% inline-block float-left"},ESe={key:0},MSe={key:1},TSe={key:0},RSe={key:1},ASe={key:0},PSe={key:1},OSe={class:"border-1px border-blue-400 border-solid px-2 py-2"},FSe=A({__name:"Maven项目打包命令生成器",setup:function(e){function t(e){return e.replace(/[\s\r\n]+/g," ").replace(", ]","]")}var i=n(!1),r=n("right"),o=n(Q("autoCreateCmd",{id:"19ningxia",shouldBuild:!0,name:"19宁夏",oriDir:"D:\\TFS159\\01干部管理系统\\04项目分支\\19NX区组项目_7_1_0_0\\01源码",outputDir:"D:\\temp\\宁夏\\",projectVersion:"7.1.0",config:"[]",saver:[]})),s=n([]),l=n(o.value.config);a(l,(function(e){console.log(l.value);var n=JSON.parse(t("".concat(l.value)));"object"===(void 0===n?"undefined":L(n))&&0!=n.length&&(o.value.config=l.value,s.value=n.map((function(e){return{name:"com.bop.web.".concat(e.name),path:"".concat(e.path,"\\com.bop.web.").concat(e.name),selected:"".concat(e.selected)}})))}));var u=O((function(){return s.value.filter((function(e){return e.path.includes("trunk\\")}))})),c=O((function(){return s.value.filter((function(e){return e.path.includes("trunk_common\\")}))}));D((function(){"[]"!=o.value.config&&d()}));var d=function(){var e=JSON.parse(t("".concat(o.value.config)));s.value=e.map((function(e){return{name:"com.bop.web.".concat(e.name),path:"".concat(e.path,"\\com.bop.web.").concat(e.name),selected:"".concat(e.selected)}})),l.value=o.value.config},h=function(e){if(e){var t=u.value[0].selected;s.value.filter((function(e){return e.path.includes("trunk\\")})).forEach((function(e){e.selected=!t}))}else{var n=c.value[0].selected;s.value.filter((function(e){return e.path.includes("trunk_common\\")})).forEach((function(e){e.selected=!n}))}},f=X(),g=(f.text,f.copy),v=f.copied,p=(f.isSupported,X()),m=p.copy,y=p.copied,_=X(),b=_.copy,k=_.copied,w=function(){o.value.config="[]",s.value=[]},C=function(e){o.value=Object.assign({},o.value,e);var t=o.value.id;o.value.saver.map((function(e){return e.id==t?e.apply=!0:e.apply=!1,e})),d()},S=function(e){var t=Object.keys(e).sort().map((function(t){return"".concat(t,"=").concat(e[t])})).join("&"),n=Date.now(),i=Math.floor(1e6*Math.random()),r="".concat(n,"-").concat(i,"-").concat(t);return e.id=r,e},x=O((function(){var e=s.value.filter((function(e){return"true"===e.selected||!0===e.selected}));return 0===e.length?"请至少选择一个项目。":e.map((function(e){return"cd ".concat(o.value.oriDir,"\\").concat(e.path)+(o.value.shouldBuild?" && mvn clean install":"")+' && copy /y "'.concat(o.value.oriDir,"\\").concat(e.path,"\\target\\*-").concat(o.value.projectVersion,'.jar" "').concat(o.value.outputDir,'"')})).join("\n")+"\n\n\n"}));return function(e,t){var n=Er,a=eo,s=nt,d=qo,f=it,p=uo,_=kr,L=$o,D=LSe,N=Gr;return G(),Z("div",DSe,[t[32]||(t[32]=$("h1",{class:"text-35px text-center font-bold"},"Maven 项目打包命令生成器",-1)),$("div",null,[$("div",NSe,[$("h2",{onClick:t[0]||(t[0]=function(e){return h(!1)}),class:"text-20px font-bold cursor-pointer"},"选择项目trunk_common（全选）"),(G(!0),Z(T,null,J(ee(c),(function(e){return G(),re(a,{key:e.name},{default:ne((function(){return[te(n,{type:"checkbox",checked:e.selected,"onUpdate:checked":function(t){return e.selected=t}},{default:ne((function(){return[I(oe(e.name),1)]})),_:2},1032,["checked","onUpdate:checked"])]})),_:2},1024)})),128))]),$("div",ISe,[$("h2",{onClick:t[1]||(t[1]=function(e){return h(!0)}),class:"text-20px font-bold cursor-pointer"},"选择项目trunk（全选）"),(G(!0),Z(T,null,J(ee(u),(function(e){return G(),re(a,{key:e.name},{default:ne((function(){return[te(n,{type:"checkbox",checked:e.selected,"onUpdate:checked":function(t){return e.selected=t}},{default:ne((function(){return[I(oe(e.name),1)]})),_:2},1032,["checked","onUpdate:checked"])]})),_:2},1024)})),128))])]),te(s,{onClick:t[2]||(t[2]=function(e){return function(e){i.value=!0,r.value=e,"[]"==o.value.config&&(l.value='[\n    {\n        "name": "activiti",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "common",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "datashare",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "formdesign",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "inf",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "log",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "makecode",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "mybatis",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "portal",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "query",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "report",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "rsgl",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "sdy",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "systemright",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "util",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "xtgl",\n        "path": "trunk_common",\n        "selected": false\n    },\n    {\n        "name": "datamove",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "filemanage",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "gbjd",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "gbjy",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "gbrm",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "gbrszda",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "gbxxgl",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "ipad",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "jgbzl",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "jxkh",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "ldcx",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "ndtj",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "nqgbl",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "orgtree",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "xdsxxgl",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "ypfx",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "zgzhzd",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "zhhw",\n        "path": "trunk",\n        "selected": false\n    },\n    {\n        "name": "zhywsp",\n        "path": "trunk",\n        "selected": false\n    }\n]')}("right")}),type:"primary",class:"mt-20px text-16px",size:"large"},{icon:ne((function(){return t[16]||(t[16]=[$("span",{class:"i-mdi:reload"},null,-1)])})),default:ne((function(){return[t[17]||(t[17]=I("加载默认配置 "))]})),_:1}),te(s,{onClick:t[3]||(t[3]=function(e){return w()}),type:"error",class:"mt-10px text-16px",size:"large"},{icon:ne((function(){return t[18]||(t[18]=[$("span",{class:"i-mdi:delete-empty-outline"},null,-1)])})),default:ne((function(){return[t[19]||(t[19]=I("清空配置"))]})),_:1}),te(p,{size:"small",class:"pt-10px flex-col","label-placement":"left","label-width":"auto",style:{maxWidth:"940px"}},{default:ne((function(){return[te(d,{label:""},{default:ne((function(){return[te(n,{type:"checkbox",checked:ee(o).shouldBuild,"onUpdate:checked":t[4]||(t[4]=function(e){return ee(o).shouldBuild=e})},{default:ne((function(){return t[20]||(t[20]=[I(" 执行 mvn clean install（默认是勾选） ")])})),_:1},8,["checked"])]})),_:1}),te(d,{label:"配置名称："},{default:ne((function(){return[te(f,{type:"text",value:ee(o).name,"onUpdate:value":t[5]||(t[5]=function(e){return ee(o).name=e})},null,8,["value"])]})),_:1}),te(d,{label:"打包路径：",span:7},{default:ne((function(){return[te(f,{type:"text",value:ee(o).oriDir,"onUpdate:value":t[6]||(t[6]=function(e){return ee(o).oriDir=e})},null,8,["value"]),te(s,{onClick:t[7]||(t[7]=function(e){return ee(m)("cd "+ee(o).oriDir+" && explorer . \n")}),type:"info",class:"ml-4",size:"small"},{icon:ne((function(){return t[21]||(t[21]=[$("span",{class:"i-mdi:content-copy"},null,-1)])})),default:ne((function(){return[t[22]||(t[22]=I(" 复制")),ee(y)?(G(),Z("span",MSe,"Copied!")):(G(),Z("span",ESe,"Copy"))]})),_:1})]})),_:1}),te(d,{label:"目标文件夹："},{default:ne((function(){return[te(f,{type:"text",value:ee(o).outputDir,"onUpdate:value":t[8]||(t[8]=function(e){return ee(o).outputDir=e})},null,8,["value"]),te(s,{onClick:t[9]||(t[9]=function(e){return ee(b)("cd "+ee(o).outputDir+" && explorer . \n")}),type:"info",class:"ml-4",size:"small"},{icon:ne((function(){return t[23]||(t[23]=[$("span",{class:"i-mdi:content-copy"},null,-1)])})),default:ne((function(){return[t[24]||(t[24]=I(" 复制")),ee(k)?(G(),Z("span",RSe,"Copied!")):(G(),Z("span",TSe,"Copy"))]})),_:1})]})),_:1}),te(d,{label:"项目版本："},{default:ne((function(){return[te(f,{type:"text",value:ee(o).projectVersion,"onUpdate:value":t[10]||(t[10]=function(e){return ee(o).projectVersion=e})},null,8,["value"])]})),_:1})]})),_:1}),te(s,{onClick:t[11]||(t[11]=function(e){return ee(g)(ee(x))}),type:"info",class:"text-16px",size:"large"},{icon:ne((function(){return t[25]||(t[25]=[$("span",{class:"i-mdi:content-copy"},null,-1)])})),default:ne((function(){return[t[26]||(t[26]=I(" 复制")),ee(v)?(G(),Z("span",PSe,"Copied!")):(G(),Z("span",ASe,"Copy"))]})),_:1}),te(s,{onClick:t[12]||(t[12]=function(e){return function(){var e=JSON.parse(JSON.stringify(o.value));delete e.saver,S(e),o.value.saver.push(e)}()}),type:"info",class:"my-10px text-16px",size:"large"},{icon:ne((function(){return t[27]||(t[27]=[$("span",{class:"i-mdi:transfer-down"},null,-1)])})),default:ne((function(){return[t[28]||(t[28]=I("生成存档"))]})),_:1}),te(s,{onClick:t[13]||(t[13]=function(e){return function(e){alert(e)}(ee(l))}),class:"bg-green-400 hidden"},{default:ne((function(){return t[29]||(t[29]=[I("获取编辑器的值")])})),_:1}),$("div",OSe,[t[30]||(t[30]=$("span",{class:"text-sky-400"},"存档：",-1)),te(a,null,{default:ne((function(){return[(G(!0),Z(T,null,J(ee(o).saver,(function(e,t){return G(),re(_,{class:"cursor-pointer",key:t,type:e.apply?"success":"",round:"",onClick:function(t){return C(e)},closable:!!t,onClose:function(e){return function(e){o.value.saver.splice(e,1)}(t)}},{default:ne((function(){return[I(oe(e.name),1)]})),_:2},1032,["type","onClick","closable","onClose"])})),128))]})),_:1})]),te(L,{class:"p-20px bg-gray-100 mt-20px border-solid border-1px border-blue-400",log:ee(x)},null,8,["log"]),te(N,{show:ee(i),"onUpdate:show":t[15]||(t[15]=function(e){return ie(i)?i.value=e:null}),width:502,placement:ee(r)},{default:ne((function(){return[te(D,{class:"h-400px",modelValue:ee(l),"onUpdate:modelValue":t[14]||(t[14]=function(e){return ie(l)?l.value=e:l=e})},null,8,["modelValue"]),t[31]||(t[31]=$("input",{type:"text"},null,-1))]})),_:1},8,["show","placement"])])}}}),WSe=Object.freeze(Object.defineProperty({__proto__:null,default:FSe},Symbol.toStringTag,{value:"Module"}));e("o",WSe)}))}))}();
